

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: Roundcube-Mel/program/js/app.js | Source: Roundcube-Mel/program/js/app.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">Source: Roundcube-Mel/program/js/app.js</a></h1>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-examples hidden"><h3>Examples</h3><ul><li><a href="tutorial-icon-previsualiser-tutorial.html">icon-previsualiser-tutorial</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="icon-previsualiser-tutorial_sub"></div></li><li><a href="tutorial-js-html.html">js-html</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="js-html_sub"></div></li><li><a href="tutorial-mel-html.html">mel-html</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel-html_sub"></div></li><li><a href="tutorial-meldialog.html">meldialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="meldialog_sub"></div></li><li><a href="tutorial-meldialogex.html">meldialogex</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="meldialogex_sub"></div></li><li><a href="tutorial-modal_.html">modal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="modal_sub"></div></li><li><a href="tutorial-webcomponent-avatar.html">webcomponent-avatar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="webcomponent-avatar_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Namespaces</h3><ul><li><a href="Calendar.html">Calendar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Calendar_sub"></div></li><li><a href="Callbacks.html">Callbacks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Callbacks_sub"></div></li><li><a href="Constants.html">Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Constants_sub"></div></li><li><a href="EventView.html">EventView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EventView_sub"></div></li><li><a href="MainObjects.html">MainObjects</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MainObjects_sub"></div></li><li><a href="OCA.Bnum.html">OCA.Bnum</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="OCA.Bnum_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="OCA.Bnum.html#.RecipientInfo">RecipientInfo</a></li><li><a href="OCA.Bnum.html#.ShareInfo">ShareInfo</a></li><li><a href="OCA.Bnum.html#.SharedFileInfo">SharedFileInfo</a></li></ul></div></li><li><a href="OCA.Bnum.App.html">OCA.Bnum.App</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="OCA.Bnum.App_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="OCA.Bnum.App.html#.destroy">destroy</a></li></ul></div></li><li><a href="Plugins.html">Plugins</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Plugins_sub"></div></li><li><a href="Plugins.MelCalResource.html">Plugins.MelCalResource</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Plugins.MelCalResource_sub"></div></li><li><a href="Plugins.MelCalResource.exports.template_resource.html">Plugins.MelCalResource.exports.template_resource</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Plugins.MelCalResource.exports.template_resource_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Plugins.MelCalResource.exports.template_resource.html#.get_page">get_page</a></li></ul></div></li><li><a href="Plugins.MelMetapage.html">Plugins.MelMetapage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Plugins.MelMetapage_sub"></div></li><li><a href="Plugins.Tchap.html">Plugins.Tchap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Plugins.Tchap_sub"></div></li><li><a href="Skins.html">Skins</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Skins_sub"></div></li><li><a href="Utilities.html">Utilities</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Utilities_sub"></div></li><li><a href="Visio.html">Visio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Visio_sub"></div></li><li><a href="VisioClasses.html">VisioClasses</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VisioClasses_sub"></div></li><li><a href="VisioParts.html">VisioParts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VisioParts_sub"></div></li><li><a href="animation.html">animation</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="animation_sub"></div></li><li><a href="aria.html">aria</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="aria_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="aria.html#.KeyCode">KeyCode</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="aria.html#.getCurrentDialog">getCurrentDialog</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Modules</h3><ul><li><a href="module-BaseStorage.html">BaseStorage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BaseStorage_sub"></div></li><li><a href="module-BnumNotification.html">BnumNotification</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BnumNotification_sub"></div></li><li><a href="module-CalendarEvent.html">CalendarEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:CalendarEvent_sub"></div></li><li><a href="module-Color.html">Color</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Color_sub"></div></li><li><a href="module-Constants.html">Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Constants.html#.EMPTY_STRING">EMPTY_STRING</a></li><li><a href="module-Constants.html#.TCHAT_UNREAD">TCHAT_UNREAD</a></li><li><a href="module-Constants.html#.TYPE_STRING">TYPE_STRING</a></li></ul></div></li><li><a href="module-Constants_Dates.html">Constants/Dates</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Constants/Dates_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Constants_Dates.html#.DATE_FORMAT">DATE_FORMAT</a></li><li><a href="module-Constants_Dates.html#.DATE_HOUR_FORMAT">DATE_HOUR_FORMAT</a></li><li><a href="module-Constants_Dates.html#.DATE_TIME_FORMAT">DATE_TIME_FORMAT</a></li></ul></div></li><li><a href="module-Constants_RegEx.html">Constants/RegEx</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Constants/RegEx_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Constants_RegEx.html#.REG_ALPHANUM">REG_ALPHANUM</a></li><li><a href="module-Constants_RegEx.html#.REG_BETWEEN_PARENTHESIS">REG_BETWEEN_PARENTHESIS</a></li><li><a href="module-Constants_RegEx.html#.REG_NUMBER">REG_NUMBER</a></li><li><a href="module-Constants_RegEx.html#.REG_NUMBERS">REG_NUMBERS</a></li><li><a href="module-Constants_RegEx.html#.REG_URL">REG_URL</a></li></ul></div></li><li><a href="module-Cookies.html">Cookies</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Cookies_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Cookies.html#~ExpireDate">ExpireDate</a></li></ul></div></li><li><a href="module-EventView.html">EventView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView.html#~EventViewDialog">EventViewDialog</a></li></ul></div></li><li><a href="module-EventView_Constants.html">EventView/Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Constants.html#.ATTENDEE_CONTAINER_SELECTOR">ATTENDEE_CONTAINER_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.ATTENDEE_SELECTOR">ATTENDEE_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.CLASS_SELECTOR">CLASS_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.CUSTOM_DIALOG_CLASS">CUSTOM_DIALOG_CLASS</a></li><li><a href="module-EventView_Constants.html#.FIRST_ARGUMENT">FIRST_ARGUMENT</a></li><li><a href="module-EventView_Constants.html#.GUEST_DRAGG_CLASS">GUEST_DRAGG_CLASS</a></li><li><a href="module-EventView_Constants.html#.ID_SELECTOR">ID_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.INTERNAL_LOCAL_CHANGE_WARNING_SELECTOR">INTERNAL_LOCAL_CHANGE_WARNING_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.LISTENER_SAVE_EVENT">LISTENER_SAVE_EVENT</a></li><li><a href="module-EventView_Constants.html#.LOADER_SELECTOR">LOADER_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.LOCAL_CHANGE_WARNING_SELECTOR">LOCAL_CHANGE_WARNING_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.MAIN_DIV_SELECTOR">MAIN_DIV_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.MAIN_FORM_SELECTOR">MAIN_FORM_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.RECURRING_WARNING_SELECTOR">RECURRING_WARNING_SELECTOR</a></li><li><a href="module-EventView_Constants.html#.WARNING_PANEL_CLICKED_CLASS">WARNING_PANEL_CLICKED_CLASS</a></li><li><a href="module-EventView_Constants.html#.WARNING_PANEL_SELECTOR">WARNING_PANEL_SELECTOR</a></li></ul></div></li><li><a href="module-EventView_Parts.html">EventView/Parts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView_Parts.html#~EventCallback">EventCallback</a></li></ul></div></li><li><a href="module-EventView_Parts_Alarm.html">EventView/Parts/Alarm</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Alarm_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView_Parts_Alarm.html#~PredefinedOption">PredefinedOption</a></li></ul></div></li><li><a href="module-EventView_Parts_CalendarOwner.html">EventView/Parts/CalendarOwner</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/CalendarOwner_sub"></div></li><li><a href="module-EventView_Parts_Categories.html">EventView/Parts/Categories</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Categories_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView_Parts_Categories.html#~StringWhereCallback">StringWhereCallback</a></li></ul></div></li><li><a href="module-EventView_Parts_Constants.html">EventView/Parts/Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Constants.html#.CHECK_BOX_NOTIFY">CHECK_BOX_NOTIFY</a></li><li><a href="module-EventView_Parts_Constants.html#.CLASS_ALL_DAY">CLASS_ALL_DAY</a></li><li><a href="module-EventView_Parts_Constants.html#.CLASS_MANUALLY_CHANGED">CLASS_MANUALLY_CHANGED</a></li><li><a href="module-EventView_Parts_Constants.html#.GUEST_SEPARATOR">GUEST_SEPARATOR</a></li><li><a href="module-EventView_Parts_Constants.html#.INTEGRATED_VISIO_MIN_NUMBER_COUNT">INTEGRATED_VISIO_MIN_NUMBER_COUNT</a></li><li><a href="module-EventView_Parts_Constants.html#.INTEGRATED_VISIO_MIN_SIZE">INTEGRATED_VISIO_MIN_SIZE</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_AUDIO_OPTION_VALUE">LOCATION_AUDIO_OPTION_VALUE</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_OPTION_VALUE">LOCATION_OPTION_VALUE</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_SEPARATOR">LOCATION_SEPARATOR</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_VISIO_EXTERNAL_OPTION_VALUE">LOCATION_VISIO_EXTERNAL_OPTION_VALUE</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_VISIO_INTERNAL_OPTION_VALUE">LOCATION_VISIO_INTERNAL_OPTION_VALUE</a></li><li><a href="module-EventView_Parts_Constants.html#.LOCATION_VISIO_OPTION_VALUE">LOCATION_VISIO_OPTION_VALUE</a></li><li><a href="module-EventView_Parts_Constants.html#.MAX_SLOT">MAX_SLOT</a></li><li><a href="module-EventView_Parts_Constants.html#.REPLACE_CHAR">REPLACE_CHAR</a></li><li><a href="module-EventView_Parts_Constants.html#.ROLE_ATTENDEE_OPTIONNAL">ROLE_ATTENDEE_OPTIONNAL</a></li><li><a href="module-EventView_Parts_Constants.html#.SELECTOR_CHECKBOX_NOTIFY">SELECTOR_CHECKBOX_NOTIFY</a></li><li><a href="module-EventView_Parts_Constants.html#.SEPARATOR_AUDIO_PIN">SEPARATOR_AUDIO_PIN</a></li><li><a href="module-EventView_Parts_Constants.html#.SEPARATOR_AUDIO_URL_LOCATION">SEPARATOR_AUDIO_URL_LOCATION</a></li><li><a href="module-EventView_Parts_Constants.html#.SEPARATOR_END_LOCATION_VISIO_INTEGRATED_PHONE">SEPARATOR_END_LOCATION_VISIO_INTEGRATED_PHONE</a></li><li><a href="module-EventView_Parts_Constants.html#.SEPARATOR_LOCATION_VISIO_INTEGRATED_PHONE">SEPARATOR_LOCATION_VISIO_INTEGRATED_PHONE</a></li><li><a href="module-EventView_Parts_Constants.html#.SEPARATOR_LOCATION_VISIO_INTEGRATED_PIN_PHONE">SEPARATOR_LOCATION_VISIO_INTEGRATED_PIN_PHONE</a></li><li><a href="module-EventView_Parts_Constants.html#.TAG_WSP_CATEGORY">TAG_WSP_CATEGORY</a></li></ul></div></li><li><a href="module-EventView_Parts_DateTime.html">EventView/Parts/DateTime</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/DateTime_sub"></div></li><li><a href="module-EventView_Parts_Guests.html">EventView/Parts/Guests</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView_Parts_Guests.html#~Attendee">Attendee</a></li><li><a href="module-EventView_Parts_Guests.html#~AttendeeEx">AttendeeEx</a></li><li><a href="module-EventView_Parts_Guests.html#~DispoPromise">DispoPromise</a></li><li><a href="module-EventView_Parts_Guests.html#~Role">Role</a></li><li><a href="module-EventView_Parts_Guests.html#~User">User</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests_FreeBusy.html">EventView/Parts/Guests/FreeBusy</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests/FreeBusy_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.html#~DAY_MS">DAY_MS</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.html#~HOUR_MS">HOUR_MS</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.html#~FreeBusyTimesData">FreeBusyTimesData</a></li></ul></div></li><li><a href="module-EventView_Parts_Location.html">EventView/Parts/Location</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location_sub"></div></li><li><a href="module-EventView_Parts_Reccursivity.html">EventView/Parts/Reccursivity</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Reccursivity_sub"></div></li><li><a href="module-EventView_Parts_Sensitivity.html">EventView/Parts/Sensitivity</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Sensitivity_sub"></div></li><li><a href="module-EventView_Parts_State.html">EventView/Parts/State</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/State_sub"></div></li><li><a href="module-Exceptions.html">Exceptions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Exceptions_sub"></div></li><li><a href="module-Frames.html">Frames</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames.html#~FramesManager">FramesManager</a></li><li><a href="module-Frames.html#~MAX_FRAME">MAX_FRAME</a></li><li><a href="module-Frames.html#~MODULE">MODULE</a></li><li><a href="module-Frames.html#~MODULE_CUSTOM_FRAMES">MODULE_CUSTOM_FRAMES</a></li><li><a href="module-Frames.html#~MULTI_FRAME_FROM_NAV_BAR">MULTI_FRAME_FROM_NAV_BAR</a></li><li><a href="module-Frames.html#~OTHERAPPS_Z_INDEX">OTHERAPPS_Z_INDEX</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Frames.html#~FrameDataEssential">FrameDataEssential</a></li><li><a href="module-Frames.html#~FrameManagerWrapperHelper">FrameManagerWrapperHelper</a></li><li><a href="module-Frames.html#~OnFrameCreatedCallback">OnFrameCreatedCallback</a></li><li><a href="module-Frames.html#~OnLoadCallback">OnLoadCallback</a></li></ul></div></li><li><a href="module-FreeBusy.html">FreeBusy</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:FreeBusy_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-FreeBusy.html#~FreeBusy">FreeBusy</a></li><li><a href="module-FreeBusy.html#~KEY_FREEBUSY_DATE">KEY_FREEBUSY_DATE</a></li></ul></div></li><li><a href="module-JsHtml.html">JsHtml</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:JsHtml_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-JsHtml.html#.JsHtml">JsHtml</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-JsHtml.html#~ActionCallback">ActionCallback</a></li><li><a href="module-JsHtml.html#~AttribData">AttribData</a></li><li><a href="module-JsHtml.html#~Attribs">Attribs</a></li><li><a href="module-JsHtml.html#~EachCallback">EachCallback</a></li></ul></div></li><li><a href="module-Log.html">Log</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Log_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Log.html#~LogLevel">LogLevel</a></li><li><a href="module-Log.html#~LogLevels">LogLevels</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI.html">MEL_ELASTIC_UI</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI.html#~Keys">Keys</a></li><li><a href="module-MEL_ELASTIC_UI.html#~RuleKeyValuePair">RuleKeyValuePair</a></li></ul></div></li><li><a href="module-MainNav.html">MainNav</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MainNav_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-MainNav.html#~Helper">Helper</a></li><li><a href="module-MainNav.html#~Selector">Selector</a></li></ul></div></li><li><a href="module-Mel_UsefulFunctions.html">Mel/UsefulFunctions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Mel/UsefulFunctions_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Mel_UsefulFunctions.html#~Classes">Classes</a></li><li><a href="module-Mel_UsefulFunctions.html#~isArrayLike">isArrayLike</a></li><li><a href="module-Mel_UsefulFunctions.html#~isDecimal">isDecimal</a></li><li><a href="module-Mel_UsefulFunctions.html#~isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Mel_UsefulFunctions.html#~toHex">toHex</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Mel_UsefulFunctions.html#~Class">Class</a></li><li><a href="module-Mel_UsefulFunctions.html#~Classes">Classes</a></li></ul></div></li><li><a href="module-MelCalResource_Page_Location.html">MelCalResource/Page/Location</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelCalResource/Page/Location_sub"></div></li><li><a href="module-MelIconPrevisualiser.html">MelIconPrevisualiser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelIconPrevisualiser_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-MelIconPrevisualiser.html#~AfterCallback">AfterCallback</a></li><li><a href="module-MelIconPrevisualiser.html#~ButtonCallback">ButtonCallback</a></li><li><a href="module-MelIconPrevisualiser.html#~HtmlCallback">HtmlCallback</a></li><li><a href="module-MelIconPrevisualiser.html#~OnCreateCallback">OnCreateCallback</a></li></ul></div></li><li><a href="module-MelIconPrevisualiserCallbacks.html">MelIconPrevisualiserCallbacks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelIconPrevisualiserCallbacks_sub"></div></li><li><a href="module-MelLinq.html">MelLinq</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelLinq_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-MelLinq.html#~RGenerator">RGenerator</a></li><li><a href="module-MelLinq.html#~SelectCallback">SelectCallback</a></li><li><a href="module-MelLinq.html#~SelectorCallback">SelectorCallback</a></li><li><a href="module-MelLinq.html#~WhereCallback">WhereCallback</a></li></ul></div></li><li><a href="module-MelTemplate.html">MelTemplate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelTemplate_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-MelTemplate.html#~TemplateEvent">TemplateEvent</a></li></ul></div></li><li><a href="module-Modal.html">Modal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Modal.html#~DialogButtonConfig">DialogButtonConfig</a></li><li><a href="module-Modal.html#~OnButtonCreatedCallback">OnButtonCreatedCallback</a></li><li><a href="module-Modal.html#~OnPageCreatedCallback">OnPageCreatedCallback</a></li><li><a href="module-Modal.html#~SwitchPageCallback">SwitchPageCallback</a></li></ul></div></li><li><a href="module-PlanningManager_Constants.html">PlanningManager/Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:PlanningManager/Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-PlanningManager_Constants.html#.CONFIG_FIRST_LETTER">CONFIG_FIRST_LETTER</a></li><li><a href="module-PlanningManager_Constants.html#.ID_BACKGROUND_LOADER">ID_BACKGROUND_LOADER</a></li><li><a href="module-PlanningManager_Constants.html#.ID_LOADER">ID_LOADER</a></li><li><a href="module-PlanningManager_Constants.html#.ID_RESOURCES_WSP">ID_RESOURCES_WSP</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_BLOCK">SELECTOR_BLOCK</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_BLOCK_BODY">SELECTOR_BLOCK_BODY</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_BTN_NAVIGATORS">SELECTOR_BTN_NAVIGATORS</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_CHOOSE_DATE_BUTTON">SELECTOR_CHOOSE_DATE_BUTTON</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_FULLCALENDAR_DATE">SELECTOR_FULLCALENDAR_DATE</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_HEADER_BTNS">SELECTOR_HEADER_BTNS</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_PLANNING_CURRENT_DATE">SELECTOR_PLANNING_CURRENT_DATE</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_PLANNING_ICON">SELECTOR_PLANNING_ICON</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_SEARCH_ICON">SELECTOR_SEARCH_ICON</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_SEARCH_INPUT">SELECTOR_SEARCH_INPUT</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_SEARCH_RESET_BUTTON">SELECTOR_SEARCH_RESET_BUTTON</a></li><li><a href="module-PlanningManager_Constants.html#.SELECTOR_TODAY_BUTTON">SELECTOR_TODAY_BUTTON</a></li></ul></div></li><li><a href="module-Resources.html">Resources</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Resources.html#~ResourceData">ResourceData</a></li><li><a href="module-Resources.html#~ResourceObject">ResourceObject</a></li></ul></div></li><li><a href="module-Resources_Favorites_Loaders.html">Resources/Favorites/Loaders</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Favorites/Loaders_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Favorites_Loaders.html#~instances">instances</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Resources_Favorites_Loaders.html#~FavoriteData">FavoriteData</a></li><li><a href="module-Resources_Favorites_Loaders.html#~FavoriteLoaderWrapper">FavoriteLoaderWrapper</a></li></ul></div></li><li><a href="module-Resources_Filters.html">Resources/Filters</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Filters_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Filters.html#~eInputType">eInputType</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Resources_Filters.html#~LoadDataCallback">LoadDataCallback</a></li></ul></div></li><li><a href="module-Resources_Location.html">Resources/Location</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Location_sub"></div></li><li><a href="module-Resources_Modal.html">Resources/Modal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Modal_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Resources_Modal.html#~FilterConfig">FilterConfig</a></li><li><a href="module-Resources_Modal.html#~GuestResource">GuestResource</a></li><li><a href="module-Resources_Modal.html#~ResourceConfig">ResourceConfig</a></li><li><a href="module-Resources_Modal.html#~ResourcesConfig">ResourcesConfig</a></li></ul></div></li><li><a href="module-Resources_ResourceBaseFunctions_Functions.html">Resources/ResourceBaseFunctions/Functions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/ResourceBaseFunctions/Functions_sub"></div></li><li><a href="module-Tchap.html">Tchap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Tchap_sub"></div></li><li><a href="module-Visio_Abstract_Checkbox.html">Visio/Abstract/Checkbox</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Abstract/Checkbox_sub"></div></li><li><a href="module-Visio_Audio.html">Visio/Audio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Audio_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Audio.html#~ConnectStreamCallback">ConnectStreamCallback</a></li><li><a href="module-Visio_Audio.html#~ProcessFrameCallback">ProcessFrameCallback</a></li></ul></div></li><li><a href="module-Visio_Configs.html">Visio/Configs</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Configs_sub"></div></li><li><a href="module-Visio_Connectors.html">Visio/Connectors</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Connectors_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Connectors.html#~connectors">connectors</a></li></ul></div></li><li><a href="module-Visio_Constants.html">Visio/Constants</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Constants_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Constants.html#.SELECTOR_BUTTON_QUIT">SELECTOR_BUTTON_QUIT</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_BUTTON_START">SELECTOR_BUTTON_START</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_CHECKBOX_CHANNEL">SELECTOR_CHECKBOX_CHANNEL</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_CHECKBOX_PASSWORD">SELECTOR_CHECKBOX_PASSWORD</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_DIV_CHANNEL">SELECTOR_DIV_CHANNEL</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_DIV_WSP">SELECTOR_DIV_WSP</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_FORM_PASSWORD">SELECTOR_FORM_PASSWORD</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_KEY_INPUT">SELECTOR_KEY_INPUT</a></li><li><a href="module-Visio_Constants.html#.SELECTOR_PASS_INPUT">SELECTOR_PASS_INPUT</a></li><li><a href="module-Visio_Constants.html#.audiourltotest">audiourltotest</a></li><li><a href="module-Visio_Constants.html#.class_to_add_to_top">class_to_add_to_top</a></li><li><a href="module-Visio_Constants.html#.private_key">private_key</a></li><li><a href="module-Visio_Constants.html#.private_room">private_room</a></li><li><a href="module-Visio_Constants.html#.public_room">public_room</a></li><li><a href="module-Visio_Constants.html#.right_item_size">right_item_size</a></li><li><a href="module-Visio_Constants.html#.visualValueCount">visualValueCount</a></li></ul></div></li><li><a href="module-Visio_Core.html">Visio/Core</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Core_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Core.html#~CallData">CallData</a></li></ul></div></li><li><a href="module-Visio_Enums.html">Visio/Enums</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Enums_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Enums.html#~eLocks">eLocks</a></li><li><a href="module-Visio_Enums.html#~ePage">ePage</a></li></ul></div></li><li><a href="module-Visio_Helper.html">Visio/Helper</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Helper_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Helper.html#.VisioHelper">VisioHelper</a></li></ul></div></li><li><a href="module-Visio_Interfaces_Parts.html">Visio/Interfaces/Parts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Interfaces/Parts_sub"></div></li><li><a href="module-Visio_Jitsi.html">Visio/Jitsi</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Jitsi_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Jitsi.html#~ESourceType">ESourceType</a></li><li><a href="module-Visio_Jitsi.html#~EUserRole">EUserRole</a></li><li><a href="module-Visio_Jitsi.html#~device">device</a></li><li><a href="module-Visio_Jitsi.html#~proxy">proxy</a></li><li><a href="module-Visio_Jitsi.html#~screen">screen</a></li><li><a href="module-Visio_Jitsi.html#~window">window</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Jitsi.html#~ChatUpdated">ChatUpdated</a></li><li><a href="module-Visio_Jitsi.html#~ChatUpdatedCallback">ChatUpdatedCallback</a></li><li><a href="module-Visio_Jitsi.html#~CurrentDevicesObject">CurrentDevicesObject</a></li><li><a href="module-Visio_Jitsi.html#~Device">Device</a></li><li><a href="module-Visio_Jitsi.html#~DeviceEx">DeviceEx</a></li><li><a href="module-Visio_Jitsi.html#~DevicesObject">DevicesObject</a></li><li><a href="module-Visio_Jitsi.html#~EnabledStatus">EnabledStatus</a></li><li><a href="module-Visio_Jitsi.html#~EventMouse">EventMouse</a></li><li><a href="module-Visio_Jitsi.html#~MouseEventStructure">MouseEventStructure</a></li><li><a href="module-Visio_Jitsi.html#~MouseMoveCallback">MouseMoveCallback</a></li><li><a href="module-Visio_Jitsi.html#~MuteStatusChangedCallback">MuteStatusChangedCallback</a></li><li><a href="module-Visio_Jitsi.html#~MutedStatus">MutedStatus</a></li><li><a href="module-Visio_Jitsi.html#~Participant">Participant</a></li><li><a href="module-Visio_Jitsi.html#~RaiseHand">RaiseHand</a></li><li><a href="module-Visio_Jitsi.html#~RaiseHandUpdatedCallback">RaiseHandUpdatedCallback</a></li><li><a href="module-Visio_Jitsi.html#~ResponseRooms">ResponseRooms</a></li><li><a href="module-Visio_Jitsi.html#~Room">Room</a></li><li><a href="module-Visio_Jitsi.html#~ScreenSharingDetails">ScreenSharingDetails</a></li><li><a href="module-Visio_Jitsi.html#~ScreenSharingObject">ScreenSharingObject</a></li><li><a href="module-Visio_Jitsi.html#~ScreenSharingStatusChangedCallback">ScreenSharingStatusChangedCallback</a></li><li><a href="module-Visio_Jitsi.html#~TileViewChangedCallback">TileViewChangedCallback</a></li><li><a href="module-Visio_Jitsi.html#~VideoConferenceJoined">VideoConferenceJoined</a></li><li><a href="module-Visio_Jitsi.html#~VideoConferenceJoinedCallback">VideoConferenceJoinedCallback</a></li><li><a href="module-Visio_Jitsi.html#~VisibilityStatus">VisibilityStatus</a></li><li><a href="module-Visio_Jitsi.html#~VisibilityStatusChangedCallback">VisibilityStatusChangedCallback</a></li></ul></div></li><li><a href="module-Visio_Loader.html">Visio/Loader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Loader_sub"></div></li><li><a href="module-Visio_Pages_Index.html">Visio/Pages/Index</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Pages/Index_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Pages_Index.html#~AjaxVisioData">AjaxVisioData</a></li><li><a href="module-Visio_Pages_Index.html#~VisioData">VisioData</a></li></ul></div></li><li><a href="module-Visio_Parts_Channel.html">Visio/Parts/Channel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Parts/Channel_sub"></div></li><li><a href="module-Visio_Parts_PasswordPart.html">Visio/Parts/PasswordPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Parts/PasswordPart_sub"></div></li><li><a href="module-Visio_Structures_Data.html">Visio/Structures/Data</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Data_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Structures_Data.html#~RawConfigData">RawConfigData</a></li><li><a href="module-Visio_Structures_Data.html#~RawConfigVisioData">RawConfigVisioData</a></li><li><a href="module-Visio_Structures_Data.html#~RawConfigVisioData2">RawConfigVisioData2</a></li><li><a href="module-Visio_Structures_Data.html#~RawVisioData">RawVisioData</a></li><li><a href="module-Visio_Structures_Data.html#~RawVisioData2">RawVisioData2</a></li></ul></div></li><li><a href="module-Visio_Structures_Locks.html">Visio/Structures/Locks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Locks_sub"></div></li><li><a href="module-Visio_Toolbar.html">Visio/Toolbar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Toolbar_sub"></div></li><li><a href="module-Visio_Toolbar_Popup.html">Visio/Toolbar/Popup</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Toolbar/Popup_sub"></div></li><li><a href="module-Visio_Video.html">Visio/Video</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Video_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Video.html#~generate_canvas">generate_canvas</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Visio_Video.html#~OnBeforeCallback">OnBeforeCallback</a></li><li><a href="module-Visio_Video.html#~OnClickCallback">OnClickCallback</a></li><li><a href="module-Visio_Video.html#~OnCreateCallback">OnCreateCallback</a></li><li><a href="module-Visio_Video.html#~OnDisposeCallback">OnDisposeCallback</a></li><li><a href="module-Visio_Video.html#~Size">Size</a></li></ul></div></li><li><a href="module-Visio_View.html">Visio/View</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/View_sub"></div></li><li><a href="module-WebComponents_Avatar.html">WebComponents/Avatar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Avatar_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_Avatar.html#~AVATAR_URL">AVATAR_URL</a></li><li><a href="module-WebComponents_Avatar.html#~COOKIE_EXPIRE">COOKIE_EXPIRE</a></li><li><a href="module-WebComponents_Avatar.html#~COOKIE_LENGTH_MAX">COOKIE_LENGTH_MAX</a></li><li><a href="module-WebComponents_Avatar.html#~COOKIE_NAME">COOKIE_NAME</a></li><li><a href="module-WebComponents_Avatar.html#~ENABLE_COOKIE">ENABLE_COOKIE</a></li><li><a href="module-WebComponents_Avatar.html#~EVENT_IMAGE_LOAD">EVENT_IMAGE_LOAD</a></li><li><a href="module-WebComponents_Avatar.html#~EVENT_IMAGE_NOT_LOAD">EVENT_IMAGE_NOT_LOAD</a></li><li><a href="module-WebComponents_Avatar.html#~STYLE_BASE">STYLE_BASE</a></li><li><a href="module-WebComponents_Avatar.html#~STYLE_ERROR">STYLE_ERROR</a></li><li><a href="module-WebComponents_Avatar.html#~STYLE_HOST">STYLE_HOST</a></li><li><a href="module-WebComponents_Avatar.html#~STYLE_LOADED">STYLE_LOADED</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Avatar.html#~onLoaded">onLoaded</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-WebComponents_Avatar.html#~OnImageLoadCallback">OnImageLoadCallback</a></li><li><a href="module-WebComponents_Avatar.html#~OnImageNotLoadCallback">OnImageNotLoadCallback</a></li></ul></div></li><li><a href="module-WebComponents_Base.html">WebComponents/Base</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Base_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_Base.html#~EWebComponentMode">EWebComponentMode</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-WebComponents_Base.html#~LocalizationCallback">LocalizationCallback</a></li></ul></div></li><li><a href="module-WebComponents_InfiniteScrollContainer.html">WebComponents/InfiniteScrollContainer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/InfiniteScrollContainer_sub"><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-WebComponents_InfiniteScrollContainer.html#~OnScrollEndedCallback">OnScrollEndedCallback</a></li><li><a href="module-WebComponents_InfiniteScrollContainer.html#~PageData">PageData</a></li></ul></div></li><li><a href="module-Workspace_Index.html">Workspace/Index</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Workspace/Index_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Workspace_Index.html#~EMode">EMode</a></li><li><a href="module-Workspace_Index.html#~EVisuMode">EVisuMode</a></li><li><a href="module-Workspace_Index.html#~OVERFLOW_CSS_DISPLAY">OVERFLOW_CSS_DISPLAY</a></li><li><a href="module-Workspace_Index.html#~OVERFLOW_CSS_PROP">OVERFLOW_CSS_PROP</a></li><li><a href="module-Workspace_Index.html#~OVERFLOW_ENABLED">OVERFLOW_ENABLED</a></li><li><a href="module-Workspace_Index.html#~archived">archived</a></li><li><a href="module-Workspace_Index.html#~publics">publics</a></li><li><a href="module-Workspace_Index.html#~subscribed">subscribed</a></li></ul></div></li><li><a href="module-Workspace_Object.html">Workspace/Object</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Workspace/Object_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Workspace_Object.html#~workspaceData">workspaceData</a></li></ul><div class="member-type">Typedef</div><ul class="inner"><li><a href="module-Workspace_Object.html#~MethodCallback">MethodCallback</a></li><li><a href="module-Workspace_Object.html#~OnActionReceivedCallback">OnActionReceivedCallback</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Interfaces</h3><ul><li><a href="module-EventView_Parts_Location-IDestroyable.html">IDestroyable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~IDestroyable_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-IDestroyable.html#destroy">destroy</a></li></ul></div></li><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html">IVisioPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Interfaces/Parts~IVisioPart_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html#_p_disable">_p_disable</a></li><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html#_p_enable">_p_enable</a></li><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html#disable">disable</a></li><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html#enable">enable</a></li><li><a href="module-Visio_Interfaces_Parts-IVisioPart.html#value">value</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="ABaseMelEvent.html">ABaseMelEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ABaseMelEvent_sub"></div></li><li><a href="Alarm.html">Alarm</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Alarm_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Alarm.html#.enums">enums</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Alarm.html#assign">assign</a></li><li><a href="Alarm.html#getTimeMode">getTimeMode</a></li><li><a href="Alarm.html#init">init</a></li></ul></div></li><li><a href="BnumConnector.html">BnumConnector</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="BnumConnector_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="BnumConnector.html#.connectors">connectors</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="BnumConnector.html#.connect">connect</a></li><li><a href="BnumConnector.html#.force_connect">force_connect</a></li><li><a href="BnumConnector.html#.is_on_progress">is_on_progress</a></li></ul></div></li><li><a href="BnumEvent.html">BnumEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="BnumEvent_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="BnumEvent.html#events">events</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="BnumEvent.html#_call_callback">_call_callback</a></li><li><a href="BnumEvent.html#add">add</a></li><li><a href="BnumEvent.html#asyncCall">asyncCall</a></li><li><a href="BnumEvent.html#call">call</a></li><li><a href="BnumEvent.html#clear">clear</a></li><li><a href="BnumEvent.html#count">count</a></li><li><a href="BnumEvent.html#has">has</a></li><li><a href="BnumEvent.html#haveEvents">haveEvents</a></li><li><a href="BnumEvent.html#push">push</a></li><li><a href="BnumEvent.html#rebase">rebase</a></li><li><a href="BnumEvent.html#remove">remove</a></li></ul></div></li><li><a href="BootstrapLoader_BootstrapLoader.html">BootstrapLoader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="BootstrapLoader#BootstrapLoader_sub"></div></li><li><a href="CalendarLoader.html">CalendarLoader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="CalendarLoader_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="CalendarLoader.html#_listener">_listener</a></li><li><a href="CalendarLoader.html#rc_data">rc_data</a></li><li><a href="CalendarLoader.html#.KEY_LAST_REFRESH">KEY_LAST_REFRESH</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="CalendarLoader.html#add_event_listener">add_event_listener</a></li><li><a href="CalendarLoader.html#change_frame">change_frame</a></li><li><a href="CalendarLoader.html#cookie_get">cookie_get</a></li><li><a href="CalendarLoader.html#cookie_remove">cookie_remove</a></li><li><a href="CalendarLoader.html#cookie_set">cookie_set</a></li><li><a href="CalendarLoader.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="CalendarLoader.html#create_promise">create_promise</a></li><li><a href="CalendarLoader.html#force_load_all_events_from_storage">force_load_all_events_from_storage</a></li><li><a href="CalendarLoader.html#generate_loader">generate_loader</a></li><li><a href="CalendarLoader.html#get_custom_rules">get_custom_rules</a></li><li><a href="CalendarLoader.html#get_date_splitted">get_date_splitted</a></li><li><a href="CalendarLoader.html#get_env">get_env</a></li><li><a href="CalendarLoader.html#get_from_day">get_from_day</a></li><li><a href="CalendarLoader.html#get_next_events_day">get_next_events_day</a></li><li><a href="CalendarLoader.html#get_skin">get_skin</a></li><li><a href="CalendarLoader.html#gettext">gettext</a></li><li><a href="CalendarLoader.html#have_frame">have_frame</a></li><li><a href="CalendarLoader.html#http_call">http_call</a></li><li><a href="CalendarLoader.html#http_internal_call">http_internal_call</a></li><li><a href="CalendarLoader.html#http_internal_get">http_internal_get</a></li><li><a href="CalendarLoader.html#http_internal_post">http_internal_post</a></li><li><a href="CalendarLoader.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="CalendarLoader.html#is_date_okay">is_date_okay</a></li><li><a href="CalendarLoader.html#load">load</a></li><li><a href="CalendarLoader.html#load_all_events">load_all_events</a></li><li><a href="CalendarLoader.html#main">main</a></li><li><a href="CalendarLoader.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="CalendarLoader.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="CalendarLoader.html#on_refresh">on_refresh</a></li><li><a href="CalendarLoader.html#rcmail">rcmail</a></li><li><a href="CalendarLoader.html#save">save</a></li><li><a href="CalendarLoader.html#select">select</a></li><li><a href="CalendarLoader.html#select_frame">select_frame</a></li><li><a href="CalendarLoader.html#select_frame_except">select_frame_except</a></li><li><a href="CalendarLoader.html#send_notification">send_notification</a></li><li><a href="CalendarLoader.html#sleep">sleep</a></li><li><a href="CalendarLoader.html#switch_frame">switch_frame</a></li><li><a href="CalendarLoader.html#trigger_event">trigger_event</a></li><li><a href="CalendarLoader.html#unload">unload</a></li><li><a href="CalendarLoader.html#update_agenda_local_datas">update_agenda_local_datas</a></li><li><a href="CalendarLoader.html#url">url</a></li><li><a href="CalendarLoader.html#wait_something">wait_something</a></li></ul></div></li><li><a href="Calendar_Alarm.html">Calendar_Alarm</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Calendar_Alarm_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Calendar_Alarm.html#assign">assign</a></li><li><a href="Calendar_Alarm.html#clearTimeouts">clearTimeouts</a></li><li><a href="Calendar_Alarm.html#create_alarm">create_alarm</a></li><li><a href="Calendar_Alarm.html#generate">generate</a></li><li><a href="Calendar_Alarm.html#generate_id">generate_id</a></li><li><a href="Calendar_Alarm.html#init">init</a></li><li><a href="Calendar_Alarm.html#show">show</a></li></ul></div></li><li><a href="ChatManager.html">ChatManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ChatManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="ChatManager.html#_listener">_listener</a></li><li><a href="ChatManager.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="ChatManager.html#add_event_listener">add_event_listener</a></li><li><a href="ChatManager.html#change_frame">change_frame</a></li><li><a href="ChatManager.html#chat">chat</a></li><li><a href="ChatManager.html#cookie_get">cookie_get</a></li><li><a href="ChatManager.html#cookie_remove">cookie_remove</a></li><li><a href="ChatManager.html#cookie_set">cookie_set</a></li><li><a href="ChatManager.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="ChatManager.html#create_promise">create_promise</a></li><li><a href="ChatManager.html#generate_loader">generate_loader</a></li><li><a href="ChatManager.html#getChatStatusMessage">getChatStatusMessage</a></li><li><a href="ChatManager.html#get_custom_rules">get_custom_rules</a></li><li><a href="ChatManager.html#get_env">get_env</a></li><li><a href="ChatManager.html#get_frame">get_frame</a></li><li><a href="ChatManager.html#get_skin">get_skin</a></li><li><a href="ChatManager.html#gettext">gettext</a></li><li><a href="ChatManager.html#goLastRoom">goLastRoom</a></li><li><a href="ChatManager.html#have_frame">have_frame</a></li><li><a href="ChatManager.html#http_call">http_call</a></li><li><a href="ChatManager.html#http_internal_call">http_internal_call</a></li><li><a href="ChatManager.html#http_internal_get">http_internal_get</a></li><li><a href="ChatManager.html#http_internal_post">http_internal_post</a></li><li><a href="ChatManager.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="ChatManager.html#load">load</a></li><li><a href="ChatManager.html#main">main</a></li><li><a href="ChatManager.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="ChatManager.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="ChatManager.html#on_refresh">on_refresh</a></li><li><a href="ChatManager.html#rcmail">rcmail</a></li><li><a href="ChatManager.html#save">save</a></li><li><a href="ChatManager.html#select">select</a></li><li><a href="ChatManager.html#select_frame">select_frame</a></li><li><a href="ChatManager.html#select_frame_except">select_frame_except</a></li><li><a href="ChatManager.html#send_notification">send_notification</a></li><li><a href="ChatManager.html#setStatus">setStatus</a></li><li><a href="ChatManager.html#sleep">sleep</a></li><li><a href="ChatManager.html#switch_frame">switch_frame</a></li><li><a href="ChatManager.html#trigger_event">trigger_event</a></li><li><a href="ChatManager.html#unload">unload</a></li><li><a href="ChatManager.html#url">url</a></li><li><a href="ChatManager.html#wait_something">wait_something</a></li><li><a href="ChatManager.html#.Instance">Instance</a></li></ul></div></li><li><a href="Connector.html">Connector</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Connector_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Connector.html#connect">connect</a></li><li><a href="Connector.html#force_connect">force_connect</a></li><li><a href="Connector.html#.in_work">in_work</a></li></ul></div></li><li><a href="EmptyMelObject.html">EmptyMelObject</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EmptyMelObject_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="EmptyMelObject.html#_listener">_listener</a></li><li><a href="EmptyMelObject.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="EmptyMelObject.html#add_event_listener">add_event_listener</a></li><li><a href="EmptyMelObject.html#change_frame">change_frame</a></li><li><a href="EmptyMelObject.html#cookie_get">cookie_get</a></li><li><a href="EmptyMelObject.html#cookie_remove">cookie_remove</a></li><li><a href="EmptyMelObject.html#cookie_set">cookie_set</a></li><li><a href="EmptyMelObject.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="EmptyMelObject.html#create_promise">create_promise</a></li><li><a href="EmptyMelObject.html#generate_loader">generate_loader</a></li><li><a href="EmptyMelObject.html#get_custom_rules">get_custom_rules</a></li><li><a href="EmptyMelObject.html#get_env">get_env</a></li><li><a href="EmptyMelObject.html#get_skin">get_skin</a></li><li><a href="EmptyMelObject.html#gettext">gettext</a></li><li><a href="EmptyMelObject.html#have_frame">have_frame</a></li><li><a href="EmptyMelObject.html#http_call">http_call</a></li><li><a href="EmptyMelObject.html#http_internal_call">http_internal_call</a></li><li><a href="EmptyMelObject.html#http_internal_get">http_internal_get</a></li><li><a href="EmptyMelObject.html#http_internal_post">http_internal_post</a></li><li><a href="EmptyMelObject.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="EmptyMelObject.html#load">load</a></li><li><a href="EmptyMelObject.html#main">main</a></li><li><a href="EmptyMelObject.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="EmptyMelObject.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="EmptyMelObject.html#on_refresh">on_refresh</a></li><li><a href="EmptyMelObject.html#rcmail">rcmail</a></li><li><a href="EmptyMelObject.html#save">save</a></li><li><a href="EmptyMelObject.html#select">select</a></li><li><a href="EmptyMelObject.html#select_frame">select_frame</a></li><li><a href="EmptyMelObject.html#select_frame_except">select_frame_except</a></li><li><a href="EmptyMelObject.html#send_notification">send_notification</a></li><li><a href="EmptyMelObject.html#sleep">sleep</a></li><li><a href="EmptyMelObject.html#switch_frame">switch_frame</a></li><li><a href="EmptyMelObject.html#trigger_event">trigger_event</a></li><li><a href="EmptyMelObject.html#unload">unload</a></li><li><a href="EmptyMelObject.html#url">url</a></li><li><a href="EmptyMelObject.html#wait_something">wait_something</a></li></ul></div></li><li><a href="EventListenerDatas.html">EventListenerDatas</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="EventListenerDatas_sub"></div></li><li><a href="GlobalModal.html">GlobalModal</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="GlobalModal_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="GlobalModal.html#close">close</a></li><li><a href="GlobalModal.html#editBody">editBody</a></li><li><a href="GlobalModal.html#editHeader">editHeader</a></li><li><a href="GlobalModal.html#editTitle">editTitle</a></li><li><a href="GlobalModal.html#setTopPosition">setTopPosition</a></li><li><a href="GlobalModal.html#show">show</a></li><li><a href="GlobalModal.html#.close">close</a></li></ul></div></li><li><a href="GlobalModalConfig.html">GlobalModalConfig</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="GlobalModalConfig_sub"></div></li><li><a href="HTMLTabContainer.html">HTMLTabContainer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="HTMLTabContainer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="HTMLTabContainer.html#.TAG">TAG</a></li></ul></div></li><li><a href="HTMLTabReceiver.html">HTMLTabReceiver</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="HTMLTabReceiver_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="HTMLTabReceiver.html#.TAG">TAG</a></li></ul></div></li><li><a href="IExt.html">IExt</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="IExt_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="IExt.html#_listener">_listener</a></li><li><a href="IExt.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="IExt.html#add_event_listener">add_event_listener</a></li><li><a href="IExt.html#add_status_callback">add_status_callback</a></li><li><a href="IExt.html#add_unread_callback">add_unread_callback</a></li><li><a href="IExt.html#change_frame">change_frame</a></li><li><a href="IExt.html#chat">chat</a></li><li><a href="IExt.html#cookie_get">cookie_get</a></li><li><a href="IExt.html#cookie_remove">cookie_remove</a></li><li><a href="IExt.html#cookie_set">cookie_set</a></li><li><a href="IExt.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="IExt.html#create_promise">create_promise</a></li><li><a href="IExt.html#generate_loader">generate_loader</a></li><li><a href="IExt.html#get_custom_rules">get_custom_rules</a></li><li><a href="IExt.html#get_env">get_env</a></li><li><a href="IExt.html#get_skin">get_skin</a></li><li><a href="IExt.html#gettext">gettext</a></li><li><a href="IExt.html#have_frame">have_frame</a></li><li><a href="IExt.html#http_call">http_call</a></li><li><a href="IExt.html#http_internal_call">http_internal_call</a></li><li><a href="IExt.html#http_internal_get">http_internal_get</a></li><li><a href="IExt.html#http_internal_post">http_internal_post</a></li><li><a href="IExt.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="IExt.html#load">load</a></li><li><a href="IExt.html#main">main</a></li><li><a href="IExt.html#manager">manager</a></li><li><a href="IExt.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="IExt.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="IExt.html#on_refresh">on_refresh</a></li><li><a href="IExt.html#rcmail">rcmail</a></li><li><a href="IExt.html#save">save</a></li><li><a href="IExt.html#select">select</a></li><li><a href="IExt.html#select_frame">select_frame</a></li><li><a href="IExt.html#select_frame_except">select_frame_except</a></li><li><a href="IExt.html#send_notification">send_notification</a></li><li><a href="IExt.html#sleep">sleep</a></li><li><a href="IExt.html#switch_frame">switch_frame</a></li><li><a href="IExt.html#trigger_event">trigger_event</a></li><li><a href="IExt.html#unload">unload</a></li><li><a href="IExt.html#url">url</a></li><li><a href="IExt.html#wait_something">wait_something</a></li></ul></div></li><li><a href="MelDataStore.html">MelDataStore</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelDataStore_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MelDataStore.html#get">get</a></li><li><a href="MelDataStore.html#getSize">getSize</a></li><li><a href="MelDataStore.html#remove">remove</a></li><li><a href="MelDataStore.html#set">set</a></li></ul></div></li><li><a href="MelEventManager.html">MelEventManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelEventManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MelEventManager.html#add">add</a></li><li><a href="MelEventManager.html#call">call</a></li><li><a href="MelEventManager.html#remove_callback">remove_callback</a></li></ul></div></li><li><a href="MelListingPrevisualiser.html">MelListingPrevisualiser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelListingPrevisualiser_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MelListingPrevisualiser.html#addElement">addElement</a></li><li><a href="MelListingPrevisualiser.html#get_elements">get_elements</a></li></ul></div></li><li><a href="MelNews.html">MelNews</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelNews_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MelNews.html#init">init</a></li><li><a href="MelNews.html#setNews">setNews</a></li><li><a href="MelNews.html#setType">setType</a></li><li><a href="MelNews.html#setup">setup</a></li><li><a href="MelNews.html#setup_vignette">setup_vignette</a></li></ul></div></li><li><a href="MelObject.html">MelObject</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelObject_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="MelObject.html#_listener">_listener</a></li><li><a href="MelObject.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="MelObject.html#add_event_listener">add_event_listener</a></li><li><a href="MelObject.html#change_frame">change_frame</a></li><li><a href="MelObject.html#cookie_get">cookie_get</a></li><li><a href="MelObject.html#cookie_remove">cookie_remove</a></li><li><a href="MelObject.html#cookie_set">cookie_set</a></li><li><a href="MelObject.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="MelObject.html#create_promise">create_promise</a></li><li><a href="MelObject.html#generate_loader">generate_loader</a></li><li><a href="MelObject.html#get_custom_rules">get_custom_rules</a></li><li><a href="MelObject.html#get_env">get_env</a></li><li><a href="MelObject.html#get_skin">get_skin</a></li><li><a href="MelObject.html#gettext">gettext</a></li><li><a href="MelObject.html#have_frame">have_frame</a></li><li><a href="MelObject.html#http_call">http_call</a></li><li><a href="MelObject.html#http_internal_call">http_internal_call</a></li><li><a href="MelObject.html#http_internal_get">http_internal_get</a></li><li><a href="MelObject.html#http_internal_post">http_internal_post</a></li><li><a href="MelObject.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="MelObject.html#load">load</a></li><li><a href="MelObject.html#main">main</a></li><li><a href="MelObject.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="MelObject.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="MelObject.html#on_refresh">on_refresh</a></li><li><a href="MelObject.html#rcmail">rcmail</a></li><li><a href="MelObject.html#save">save</a></li><li><a href="MelObject.html#select">select</a></li><li><a href="MelObject.html#select_frame">select_frame</a></li><li><a href="MelObject.html#select_frame_except">select_frame_except</a></li><li><a href="MelObject.html#send_notification">send_notification</a></li><li><a href="MelObject.html#sleep">sleep</a></li><li><a href="MelObject.html#switch_frame">switch_frame</a></li><li><a href="MelObject.html#trigger_event">trigger_event</a></li><li><a href="MelObject.html#unload">unload</a></li><li><a href="MelObject.html#url">url</a></li><li><a href="MelObject.html#wait_something">wait_something</a></li><li><a href="MelObject.html#.Empty">Empty</a></li><li><a href="MelObject.html#.Url">Url</a></li></ul></div></li><li><a href="MelPopover_MelPopover.html">MelPopover</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelPopover#MelPopover_sub"></div></li><li><a href="MelPrevisualiser.html">MelPrevisualiser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MelPrevisualiser_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="MelPrevisualiser.html#id">id</a></li><li><a href="MelPrevisualiser.html#on_after_generate_jquery">on_after_generate_jquery</a></li><li><a href="MelPrevisualiser.html#on_after_html">on_after_html</a></li><li><a href="MelPrevisualiser.html#on_cancel">on_cancel</a></li><li><a href="MelPrevisualiser.html#on_close">on_close</a></li><li><a href="MelPrevisualiser.html#on_generate">on_generate</a></li><li><a href="MelPrevisualiser.html#on_save">on_save</a></li><li><a href="MelPrevisualiser.html#previsu_id">previsu_id</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="MelPrevisualiser.html#create_popup">create_popup</a></li></ul></div></li><li><a href="Mel_Promise.html">Mel_Promise</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Mel_Promise_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="Mel_Promise.html#onAbort">onAbort</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="Mel_Promise.html#abort">abort</a></li><li><a href="Mel_Promise.html#isCancelled">isCancelled</a></li><li><a href="Mel_Promise.html#isPending">isPending</a></li><li><a href="Mel_Promise.html#isRejected">isRejected</a></li><li><a href="Mel_Promise.html#isResolved">isResolved</a></li><li><a href="Mel_Promise.html#.wait">wait</a></li><li><a href="Mel_Promise.html#.wait_async">wait_async</a></li></ul></div></li><li><a href="MetapageModule.html">MetapageModule</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="MetapageModule_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="MetapageModule.html#main">main</a></li></ul></div></li><li><a href="NavBarComponent.html">NavBarComponent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NavBarComponent_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="NavBarComponent.html#parent">parent</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="NavBarComponent.html#_p_get_data">_p_get_data</a></li><li><a href="NavBarComponent.html#_p_start_construct">_p_start_construct</a></li><li><a href="NavBarComponent.html#setNavBarParent">setNavBarParent</a></li></ul></div></li><li><a href="NewsPopup.html">NewsPopup</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NewsPopup_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="NewsPopup.html#check">check</a></li><li><a href="NewsPopup.html#confirm">confirm</a></li><li><a href="NewsPopup.html#createCheckBoxChoices">createCheckBoxChoices</a></li><li><a href="NewsPopup.html#createInput">createInput</a></li><li><a href="NewsPopup.html#createOrEdit">createOrEdit</a></li><li><a href="NewsPopup.html#createOrEditPublish">createOrEditPublish</a></li><li><a href="NewsPopup.html#createSelect">createSelect</a></li><li><a href="NewsPopup.html#createTextarea">createTextarea</a></li><li><a href="NewsPopup.html#drawChoice">drawChoice</a></li><li><a href="NewsPopup.html#filter">filter</a></li><li><a href="NewsPopup.html#isSettings">isSettings</a></li><li><a href="NewsPopup.html#post">post</a></li><li><a href="NewsPopup.html#showStep2">showStep2</a></li><li><a href="NewsPopup.html#updateFilter">updateFilter</a></li><li><a href="NewsPopup.html#.fabric">fabric</a></li></ul></div></li><li><a href="Nextcloud_Document.html">Nextcloud_Document</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Nextcloud_Document_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Nextcloud_Document.html#addApp">addApp</a></li><li><a href="Nextcloud_Document.html#addRaw">addRaw</a></li><li><a href="Nextcloud_Document.html#createDocument">createDocument</a></li><li><a href="Nextcloud_Document.html#getIcon">getIcon</a></li></ul></div></li><li><a href="Nextcloud_Document_Config.html">Nextcloud_Document_Config</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Nextcloud_Document_Config_sub"></div></li><li><a href="Nextcloud_File.html">Nextcloud_File</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Nextcloud_File_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Nextcloud_File.html#document_path">document_path</a></li><li><a href="Nextcloud_File.html#is_file">is_file</a></li><li><a href="Nextcloud_File.html#is_master_folder">is_master_folder</a></li><li><a href="Nextcloud_File.html#.get_path">get_path</a></li></ul></div></li><li><a href="Nextcloud_Icon.html">Nextcloud_Icon</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Nextcloud_Icon_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Nextcloud_Icon.html#check">check</a></li><li><a href="Nextcloud_Icon.html#init">init</a></li></ul></div></li><li><a href="Nextcloud_Response.html">Nextcloud_Response</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Nextcloud_Response_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Nextcloud_Response.html#FileExist">FileExist</a></li><li><a href="Nextcloud_Response.html#GetFile">GetFile</a></li><li><a href="Nextcloud_Response.html#GetFiles">GetFiles</a></li></ul></div></li><li><a href="NotifierObject.html">NotifierObject</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="NotifierObject_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="NotifierObject.html#on_prop_update">on_prop_update</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="NotifierObject.html#_p_addProp">_p_addProp</a></li></ul></div></li><li><a href="OCA.Bnum.FileList.html">FileList</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="OCA.Bnum.FileList_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="OCA.Bnum.FileList.html#_entities">_entities</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="OCA.Bnum.FileList.html#getDirectoryPermissions">getDirectoryPermissions</a></li><li><a href="OCA.Bnum.FileList.html#setSharedWithUser">setSharedWithUser</a></li></ul></div></li><li><a href="PageUser.html">PageUser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PageUser_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="PageUser.html#.Start">Start</a></li></ul></div></li><li><a href="ParapheurAction.html">ParapheurAction</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ParapheurAction_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ParapheurAction.html#call">call</a></li><li><a href="ParapheurAction.html#post">post</a></li></ul></div></li><li><a href="ParapheurMailAction.html">ParapheurMailAction</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="ParapheurMailAction_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="ParapheurMailAction.html#command_to_parapheur">command_to_parapheur</a></li><li><a href="ParapheurMailAction.html#main">main</a></li><li><a href="ParapheurMailAction.html#.exec_command_to_parapheur">exec_command_to_parapheur</a></li></ul></div></li><li><a href="PlanningManager.html">PlanningManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="PlanningManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="PlanningManager.html#_listener">_listener</a></li><li><a href="PlanningManager.html#calendar">calendar</a></li><li><a href="PlanningManager.html#events">events</a></li><li><a href="PlanningManager.html#freebusy">freebusy</a></li><li><a href="PlanningManager.html#loading">loading</a></li><li><a href="PlanningManager.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="PlanningManager.html#_accept_calendar">_accept_calendar</a></li><li><a href="PlanningManager.html#_event_on_click">_event_on_click</a></li><li><a href="PlanningManager.html#_event_on_remove_search_click">_event_on_remove_search_click</a></li><li><a href="PlanningManager.html#_event_render">_event_render</a></li><li><a href="PlanningManager.html#_generate_calendar">_generate_calendar</a></li><li><a href="PlanningManager.html#_generate_visuals">_generate_visuals</a></li><li><a href="PlanningManager.html#_init">_init</a></li><li><a href="PlanningManager.html#_next">_next</a></li><li><a href="PlanningManager.html#_on_search">_on_search</a></li><li><a href="PlanningManager.html#_prev">_prev</a></li><li><a href="PlanningManager.html#_refresh_callback">_refresh_callback</a></li><li><a href="PlanningManager.html#_rerender">_rerender</a></li><li><a href="PlanningManager.html#_rerender_action">_rerender_action</a></li><li><a href="PlanningManager.html#_resources_order">_resources_order</a></li><li><a href="PlanningManager.html#_resources_render">_resources_render</a></li><li><a href="PlanningManager.html#_set_busy">_set_busy</a></li><li><a href="PlanningManager.html#_set_today_button">_set_today_button</a></li><li><a href="PlanningManager.html#_show_calendar">_show_calendar</a></li><li><a href="PlanningManager.html#_source_events">_source_events</a></li><li><a href="PlanningManager.html#_source_freebusy">_source_freebusy</a></li><li><a href="PlanningManager.html#_start">_start</a></li><li><a href="PlanningManager.html#_startup">_startup</a></li><li><a href="PlanningManager.html#_today">_today</a></li><li><a href="PlanningManager.html#_unset_busy">_unset_busy</a></li><li><a href="PlanningManager.html#addListeners">addListeners</a></li><li><a href="PlanningManager.html#add_event_listener">add_event_listener</a></li><li><a href="PlanningManager.html#calendar_resources">calendar_resources</a></li><li><a href="PlanningManager.html#change_frame">change_frame</a></li><li><a href="PlanningManager.html#cookie_get">cookie_get</a></li><li><a href="PlanningManager.html#cookie_remove">cookie_remove</a></li><li><a href="PlanningManager.html#cookie_set">cookie_set</a></li><li><a href="PlanningManager.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="PlanningManager.html#create_promise">create_promise</a></li><li><a href="PlanningManager.html#generateEvents">generateEvents</a></li><li><a href="PlanningManager.html#generateResources">generateResources</a></li><li><a href="PlanningManager.html#generate_loader">generate_loader</a></li><li><a href="PlanningManager.html#get_callback_key">get_callback_key</a></li><li><a href="PlanningManager.html#get_custom_rules">get_custom_rules</a></li><li><a href="PlanningManager.html#get_env">get_env</a></li><li><a href="PlanningManager.html#get_search_value">get_search_value</a></li><li><a href="PlanningManager.html#get_skin">get_skin</a></li><li><a href="PlanningManager.html#gettext">gettext</a></li><li><a href="PlanningManager.html#have_frame">have_frame</a></li><li><a href="PlanningManager.html#http_call">http_call</a></li><li><a href="PlanningManager.html#http_internal_call">http_internal_call</a></li><li><a href="PlanningManager.html#http_internal_get">http_internal_get</a></li><li><a href="PlanningManager.html#http_internal_post">http_internal_post</a></li><li><a href="PlanningManager.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="PlanningManager.html#load">load</a></li><li><a href="PlanningManager.html#loadResources">loadResources</a></li><li><a href="PlanningManager.html#main">main</a></li><li><a href="PlanningManager.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="PlanningManager.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="PlanningManager.html#on_refresh">on_refresh</a></li><li><a href="PlanningManager.html#rcmail">rcmail</a></li><li><a href="PlanningManager.html#refresh_planning_date">refresh_planning_date</a></li><li><a href="PlanningManager.html#save">save</a></li><li><a href="PlanningManager.html#select">select</a></li><li><a href="PlanningManager.html#select_frame">select_frame</a></li><li><a href="PlanningManager.html#select_frame_except">select_frame_except</a></li><li><a href="PlanningManager.html#send_notification">send_notification</a></li><li><a href="PlanningManager.html#sleep">sleep</a></li><li><a href="PlanningManager.html#switch_frame">switch_frame</a></li><li><a href="PlanningManager.html#trigger_event">trigger_event</a></li><li><a href="PlanningManager.html#unload">unload</a></li><li><a href="PlanningManager.html#url">url</a></li><li><a href="PlanningManager.html#wait_something">wait_something</a></li><li><a href="PlanningManager.html#.Start">Start</a></li></ul></div></li><li><a href="SearchResult.html">SearchResult</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SearchResult_sub"></div></li><li><a href="SearchResultCalendar.html">SearchResultCalendar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SearchResultCalendar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="SearchResultCalendar.html#.CreateOrOpen">CreateOrOpen</a></li><li><a href="SearchResultCalendar.html#.after_loading">after_loading</a></li><li><a href="SearchResultCalendar.html#.from_array">from_array</a></li></ul></div></li><li><a href="SplittedDate.html">SplittedDate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="SplittedDate_sub"></div></li><li><a href="Sticker.html">Sticker</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Sticker_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Sticker.html#_post_move">_post_move</a></li><li><a href="Sticker.html#get_datas">get_datas</a></li><li><a href="Sticker.html#get_html">get_html</a></li><li><a href="Sticker.html#html">html</a></li><li><a href="Sticker.html#post">post</a></li><li><a href="Sticker.html#post_add">post_add</a></li><li><a href="Sticker.html#post_delete">post_delete</a></li><li><a href="Sticker.html#post_move_down">post_move_down</a></li><li><a href="Sticker.html#post_move_up">post_move_up</a></li><li><a href="Sticker.html#post_update">post_update</a></li><li><a href="Sticker.html#set_handlers">set_handlers</a></li><li><a href="Sticker.html#.findByOrder">findByOrder</a></li><li><a href="Sticker.html#.from">from</a></li><li><a href="Sticker.html#.fromHtml">fromHtml</a></li></ul></div></li><li><a href="TabsElement.html">TabsElement</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="TabsElement_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="TabsElement.html#ontabswitched">ontabswitched</a></li><li><a href="TabsElement.html#.DEFAUT_VOICE">DEFAUT_VOICE</a></li><li><a href="TabsElement.html#.ID_SR_PREFIX">ID_SR_PREFIX</a></li><li><a href="TabsElement.html#.ID_TABPANNEL_PREFIX">ID_TABPANNEL_PREFIX</a></li><li><a href="TabsElement.html#.ID_TAB_PREFIX">ID_TAB_PREFIX</a></li><li><a href="TabsElement.html#.TAG">TAG</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="TabsElement.html#_click_button_action">_click_button_action</a></li><li><a href="TabsElement.html#_generate_id">_generate_id</a></li><li><a href="TabsElement.html#_select_button">_select_button</a></li><li><a href="TabsElement.html#_show_pannel">_show_pannel</a></li></ul></div></li><li><a href="Title.html">Title</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Title_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Title.html#focusHidden">focusHidden</a></li><li><a href="Title.html#set">set</a></li><li><a href="Title.html#update">update</a></li></ul></div></li><li><a href="Tuple.html">Tuple</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Tuple_sub"></div></li><li><a href="VisualiserObject.html">VisualiserObject</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VisualiserObject_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="VisualiserObject.html#ref">ref</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="VisualiserObject.html#_p_draw">_p_draw</a></li><li><a href="VisualiserObject.html#update">update</a></li></ul></div></li><li><a href="VisualiserObjectEx_VisualiserObjectEx.html">VisualiserObjectEx</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="VisualiserObjectEx#VisualiserObjectEx_sub"></div></li><li><a href="WaitSomething.html">WaitSomething</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WaitSomething_sub"></div></li><li><a href="WaitSomethingAsync.html">WaitSomethingAsync</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WaitSomethingAsync_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WaitSomethingAsync.html#onAbort">onAbort</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WaitSomethingAsync.html#abort">abort</a></li><li><a href="WaitSomethingAsync.html#isCancelled">isCancelled</a></li><li><a href="WaitSomethingAsync.html#isPending">isPending</a></li><li><a href="WaitSomethingAsync.html#isRejected">isRejected</a></li><li><a href="WaitSomethingAsync.html#isResolved">isResolved</a></li></ul></div></li><li><a href="WorkspaceModuleBlock.html">WorkspaceModuleBlock</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WorkspaceModuleBlock_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WorkspaceModuleBlock.html#content">content</a></li><li><a href="WorkspaceModuleBlock.html#header">header</a></li><li><a href="WorkspaceModuleBlock.html#.maxHeight">maxHeight</a></li><li><a href="WorkspaceModuleBlock.html#.maxHeightSmall">maxHeightSmall</a></li><li><a href="WorkspaceModuleBlock.html#.minHeight">minHeight</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WorkspaceModuleBlock.html#appendContent">appendContent</a></li><li><a href="WorkspaceModuleBlock.html#appendContentJQuery">appendContentJQuery</a></li><li><a href="WorkspaceModuleBlock.html#appendContentJsHtml">appendContentJsHtml</a></li><li><a href="WorkspaceModuleBlock.html#setContent">setContent</a></li><li><a href="WorkspaceModuleBlock.html#setIframe">setIframe</a></li><li><a href="WorkspaceModuleBlock.html#setIframeFromTask">setIframeFromTask</a></li></ul></div></li><li><a href="WrapperObject.html">WrapperObject</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WrapperObject_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WrapperObject.html#Instance">Instance</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WrapperObject.html#.Create">Create</a></li></ul></div></li><li><a href="WspNavBarDescription.html">WspNavBarDescription</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="WspNavBarDescription_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="WspNavBarDescription.html#description">description</a></li><li><a href="WspNavBarDescription.html#descriptionNode">descriptionNode</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="WspNavBarDescription.html#_p_get_data">_p_get_data</a></li><li><a href="WspNavBarDescription.html#_p_start_construct">_p_start_construct</a></li><li><a href="WspNavBarDescription.html#setNavBarParent">setNavBarParent</a></li></ul></div></li><li><a href="aria.Dialog.html">Dialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="aria.Dialog_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="aria.Dialog.html#close">close</a></li><li><a href="aria.Dialog.html#replace">replace</a></li></ul></div></li><li><a href="html_events.html">html_events</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="html_events_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="html_events.html#addContent">addContent</a></li></ul></div></li><li><a href="html_li.html">html_li</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="html_li_sub"></div></li><li><a href="html_ul.html">html_ul</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="html_ul_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="html_ul.html#addContent">addContent</a></li><li><a href="html_ul.html#li">li</a></li></ul></div></li><li><a href="mail_html_mail_html.html">mail_html</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mail_html#mail_html_sub"></div></li><li><a href="mel_cancellable_html_timer.html">mel_cancellable_html_timer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel_cancellable_html_timer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="mel_cancellable_html_timer.html#_original_contents">_original_contents</a></li><li><a href="mel_cancellable_html_timer.html#ontimerfinished">ontimerfinished</a></li><li><a href="mel_cancellable_html_timer.html#timer">timer</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="mel_cancellable_html_timer.html#addContent">addContent</a></li><li><a href="mel_cancellable_html_timer.html#appendTo">appendTo</a></li><li><a href="mel_cancellable_html_timer.html#count">count</a></li><li><a href="mel_cancellable_html_timer.html#create">create</a></li><li><a href="mel_cancellable_html_timer.html#find_by_class">find_by_class</a></li><li><a href="mel_cancellable_html_timer.html#find_by_id">find_by_id</a></li><li><a href="mel_cancellable_html_timer.html#first">first</a></li><li><a href="mel_cancellable_html_timer.html#firstOrDefault">firstOrDefault</a></li><li><a href="mel_cancellable_html_timer.html#generate">generate</a></li><li><a href="mel_cancellable_html_timer.html#tryAddClass">tryAddClass</a></li><li><a href="mel_cancellable_html_timer.html#._alert">_alert</a></li></ul></div></li><li><a href="mel_filter.html">mel_filter</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel_filter_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="mel_filter.html#_start">_start</a></li><li><a href="mel_filter.html#activate">activate</a></li><li><a href="mel_filter.html#deactivate">deactivate</a></li><li><a href="mel_filter.html#disable">disable</a></li><li><a href="mel_filter.html#enable">enable</a></li><li><a href="mel_filter.html#is_active">is_active</a></li><li><a href="mel_filter.html#is_enabled">is_enabled</a></li><li><a href="mel_filter.html#toggle">toggle</a></li><li><a href="mel_filter.html#toggle_active">toggle_active</a></li><li><a href="mel_filter.html#.filter_class">filter_class</a></li></ul></div></li><li><a href="mel_html.html">mel_html</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel_html_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="mel_html.html#addClass">addClass</a></li><li><a href="mel_html.html#bind_events">bind_events</a></li><li><a href="mel_html.html#create">create</a></li><li><a href="mel_html.html#css">css</a></li><li><a href="mel_html.html#generate">generate</a></li><li><a href="mel_html.html#hasClass">hasClass</a></li><li><a href="mel_html.html#setAttr">setAttr</a></li><li><a href="mel_html.html#setId">setId</a></li><li><a href="mel_html.html#.div">div</a></li></ul></div></li><li><a href="mel_html2.html">mel_html2</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel_html2_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="mel_html2.html#addContent">addContent</a></li><li><a href="mel_html2.html#appendTo">appendTo</a></li><li><a href="mel_html2.html#count">count</a></li><li><a href="mel_html2.html#find_by_class">find_by_class</a></li><li><a href="mel_html2.html#find_by_id">find_by_id</a></li><li><a href="mel_html2.html#first">first</a></li><li><a href="mel_html2.html#firstOrDefault">firstOrDefault</a></li><li><a href="mel_html2.html#.div">div</a></li></ul></div></li><li><a href="mel_html_timer.html">mel_html_timer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="mel_html_timer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="mel_html_timer.html#_original_contents">_original_contents</a></li><li><a href="mel_html_timer.html#ontimerfinished">ontimerfinished</a></li><li><a href="mel_html_timer.html#timer">timer</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="mel_html_timer.html#addContent">addContent</a></li><li><a href="mel_html_timer.html#appendTo">appendTo</a></li><li><a href="mel_html_timer.html#count">count</a></li><li><a href="mel_html_timer.html#create">create</a></li><li><a href="mel_html_timer.html#find_by_class">find_by_class</a></li><li><a href="mel_html_timer.html#find_by_id">find_by_id</a></li><li><a href="mel_html_timer.html#first">first</a></li><li><a href="mel_html_timer.html#firstOrDefault">firstOrDefault</a></li><li><a href="mel_html_timer.html#generate">generate</a></li><li><a href="mel_html_timer.html#tryAddClass">tryAddClass</a></li></ul></div></li><li><a href="module-BaseStorage-BaseStorage.html">BaseStorage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BaseStorage~BaseStorage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-BaseStorage-BaseStorage.html#length">length</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-BaseStorage-BaseStorage.html#%255Bundefined%255D">[undefined]</a></li><li><a href="module-BaseStorage-BaseStorage.html#add">add</a></li><li><a href="module-BaseStorage-BaseStorage.html#clear">clear</a></li><li><a href="module-BaseStorage-BaseStorage.html#get">get</a></li><li><a href="module-BaseStorage-BaseStorage.html#has">has</a></li><li><a href="module-BaseStorage-BaseStorage.html#remove">remove</a></li></ul></div></li><li><a href="module-BnumNotification-BnumNotification.html">BnumNotification</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BnumNotification~BnumNotification_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-BnumNotification-BnumNotification.html#action">action</a></li><li><a href="module-BnumNotification-BnumNotification.html#category">category</a></li><li><a href="module-BnumNotification-BnumNotification.html#created">created</a></li><li><a href="module-BnumNotification-BnumNotification.html#isread">isread</a></li><li><a href="module-BnumNotification-BnumNotification.html#local">local</a></li><li><a href="module-BnumNotification-BnumNotification.html#modified">modified</a></li><li><a href="module-BnumNotification-BnumNotification.html#title">title</a></li><li><a href="module-BnumNotification-BnumNotification.html#uid">uid</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-BnumNotification-BnumNotification.html#notify">notify</a></li><li><a href="module-BnumNotification-BnumNotification.html#.Notify">Notify</a></li><li><a href="module-BnumNotification-BnumNotification.html#._____GET____">_____GET____</a></li><li><a href="module-BnumNotification-BnumNotification.html#.throw_exception">throw_exception</a></li></ul></div></li><li><a href="module-BnumNotification-BnumNotificationAction.html">BnumNotificationAction</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BnumNotification~BnumNotificationAction_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-BnumNotification-BnumNotificationAction.html#command">command</a></li><li><a href="module-BnumNotification-BnumNotificationAction.html#params">params</a></li><li><a href="module-BnumNotification-BnumNotificationAction.html#text">text</a></li><li><a href="module-BnumNotification-BnumNotificationAction.html#title">title</a></li></ul></div></li><li><a href="module-BnumNotification-NotificationException.html">NotificationException</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:BnumNotification~NotificationException_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-BnumNotification-NotificationException.html#args">args</a></li><li><a href="module-BnumNotification-NotificationException.html#errored_item">errored_item</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-BnumNotification-NotificationException.html#complete_logs">complete_logs</a></li><li><a href="module-BnumNotification-NotificationException.html#items">items</a></li><li><a href="module-BnumNotification-NotificationException.html#log">log</a></li><li><a href="module-BnumNotification-NotificationException.html#log_fatal">log_fatal</a></li></ul></div></li><li><a href="module-CalendarEvent.CalendarEvent.html">CalendarEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:CalendarEvent.CalendarEvent_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-CalendarEvent.CalendarEvent.html#view">view</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-CalendarEvent.CalendarEvent.html#.Start">Start</a></li></ul></div></li><li><a href="module-Color-Color.html">Color</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Color~Color_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Color-Color.html#b">b</a></li><li><a href="module-Color-Color.html#g">g</a></li><li><a href="module-Color-Color.html#r">r</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Color-Color.html#toHexa">toHexa</a></li><li><a href="module-Color-Color.html#toRGB">toRGB</a></li><li><a href="module-Color-Color.html#.fromRGB">fromRGB</a></li></ul></div></li><li><a href="module-Color-ColorRGBA.html">ColorRGBA</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Color~ColorRGBA_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Color-ColorRGBA.html#a">a</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Color-ColorRGBA.html#toHexa">toHexa</a></li><li><a href="module-Color-ColorRGBA.html#toRGBA">toRGBA</a></li></ul></div></li><li><a href="module-Cookies.Cookie.html">Cookie</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Cookies.Cookie_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Cookies.Cookie.html#key">key</a></li><li><a href="module-Cookies.Cookie.html#value">value</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Cookies.Cookie.html#remove">remove</a></li><li><a href="module-Cookies.Cookie.html#update_value">update_value</a></li><li><a href="module-Cookies.Cookie.html#.get_cookie">get_cookie</a></li><li><a href="module-Cookies.Cookie.html#.get_expire">get_expire</a></li><li><a href="module-Cookies.Cookie.html#.remove_cookie">remove_cookie</a></li><li><a href="module-Cookies.Cookie.html#.set_cookie">set_cookie</a></li></ul></div></li><li><a href="module-EventView.EventView.html">EventView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView.EventView_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView.EventView.html#fakes">fakes</a></li><li><a href="module-EventView.EventView.html#inputs">inputs</a></li><li><a href="module-EventView.EventView.html#parts">parts</a></li><li><a href="module-EventView.EventView.html#.INSTANCE">INSTANCE</a></li><li><a href="module-EventView.EventView.html#.false_selectors">false_selectors</a></li><li><a href="module-EventView.EventView.html#.true_selectors">true_selectors</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView.EventView.html#get_dialog">get_dialog</a></li><li><a href="module-EventView.EventView.html#is_jquery_dialog">is_jquery_dialog</a></li><li><a href="module-EventView.EventView.html#.Create">Create</a></li><li><a href="module-EventView.EventView.html#.Start">Start</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-EventView.EventView.html#event:before_save">before_save</a></li><li><a href="module-EventView.EventView.html#event:on_dialog_before_close">on_dialog_before_close</a></li><li><a href="module-EventView.EventView.html#event:on_drop">on_drop</a></li></ul></div></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html">AlarmPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Alarm.AlarmPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_$fieldAlarmOffsetType">_$fieldAlarmOffsetType</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_$fieldAlarmType">_$fieldAlarmType</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#.PREDEFINED">PREDEFINED</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#_startModalCustomAlarm">_startModalCustomAlarm</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#init">init</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Alarm.AlarmPart.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts_Alarm-AlarmData.html">AlarmData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Alarm~AlarmData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Alarm-AlarmData.html#offset">offset</a></li><li><a href="module-EventView_Parts_Alarm-AlarmData.html#value">value</a></li><li><a href="module-EventView_Parts_Alarm-AlarmData.html#.OFFSETS">OFFSETS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Alarm-AlarmData.html#getTime">getTime</a></li><li><a href="module-EventView_Parts_Alarm-AlarmData.html#toString">toString</a></li><li><a href="module-EventView_Parts_Alarm-AlarmData.html#.From">From</a></li></ul></div></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html">CalendarOwner</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/CalendarOwner~CalendarOwner_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#_$icon">_$icon</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_CalendarOwner-CalendarOwner.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html">CategoryPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Categories.CategoryPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_$hasCategory">_$hasCategory</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_$icon">_$icon</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_$wspButton">_$wspButton</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#.PARTS">PARTS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#init">init</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#onUpdate">onUpdate</a></li><li><a href="module-EventView_Parts_Categories.CategoryPart.html#updateIcon">updateIcon</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-EventView_Parts_Categories.CategoryPart.html#event:onChange">onChange</a></li></ul></div></li><li><a href="module-EventView_Parts_Categories-CategoryData.html">CategoryData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Categories~CategoryData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Categories-CategoryData.html#callback">callback</a></li><li><a href="module-EventView_Parts_Categories-CategoryData.html#icon">icon</a></li><li><a href="module-EventView_Parts_Categories-CategoryData.html#name">name</a></li><li><a href="module-EventView_Parts_Categories-CategoryData.html#show_callback">show_callback</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Categories-CategoryData.html#_default_callback">_default_callback</a></li><li><a href="module-EventView_Parts_Categories-CategoryData.html#.Part">Part</a></li></ul></div></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html">TimePartManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/DateTime.TimePartManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#$allDay">$allDay</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_$end_date">_$end_date</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_$start_date">_$start_date</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#base_diff">base_diff</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#date_end">date_end</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#date_start">date_start</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#end">end</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#is_all_day">is_all_day</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#start">start</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#.WORDS">WORDS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_invalid_action_date">_invalid_action_date</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_invalid_action_time">_invalid_action_time</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_on_all_day_changed">_on_all_day_changed</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#_update_date">_update_date</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#init">init</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_DateTime.TimePartManager.html#.UpdateOption">UpdateOption</a></li></ul></div></li><li><a href="module-EventView_Parts_DateTime-TimePart.html">TimePart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/DateTime~TimePart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_DateTime-TimePart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#.INTERVAL">INTERVAL</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_DateTime-TimePart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#_toTimeMoment">_toTimeMoment</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#init">init</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#onUpdate">onUpdate</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#reinit">reinit</a></li><li><a href="module-EventView_Parts_DateTime-TimePart.html#.UpdateOption">UpdateOption</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html">GuestsPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests.GuestsPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_$animators">_$animators</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_$optionnals">_$optionnals</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_datePart">_datePart</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_switchButton">_switchButton</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#cant_modify">cant_modify</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.INSTANCE">INSTANCE</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.ROLES">ROLES</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.can">can</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.event">event</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.stop">stop</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_onUpdate">_onUpdate</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_on_switch">_on_switch</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#init">init</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onButtonMailClicked">onButtonMailClicked</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onKeyUp">onKeyUp</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onNotificationChanged">onNotificationChanged</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#onUpdate">onUpdate</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#update_free_busy">update_free_busy</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.GetMe">GetMe</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.SetAttendeesListOrganizer">SetAttendeesListOrganizer</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.UpdateDispos">UpdateDispos</a></li><li><a href="module-EventView_Parts_Guests.GuestsPart.html#.UpdateFreeBusy">UpdateFreeBusy</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html">FreeBusyGuests</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests/FreeBusy.FreeBusyGuests_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#interval">interval</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#.can">can</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#load_freebusy_data">load_freebusy_data</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#.CloneDate">CloneDate</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#.FixDate">FixDate</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.FreeBusyGuests.html#.Get">Get</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html">Slot</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests/FreeBusy.Slot_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#_is_in_working_hour">_is_in_working_hour</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#end">end</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#isFree">isFree</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#start">start</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#state">state</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#.COLORS">COLORS</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#.STATES">STATES</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#.TEXTES">TEXTES</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#_generate_different_date">_generate_different_date</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#_onclick">_onclick</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slot.html#generate">generate</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html">Slots</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests/FreeBusy.Slots_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#email">email</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#end">end</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#interval">interval</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#slots">slots</a></li><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#start">start</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests_FreeBusy.Slots.html#getNextFreeSlots">getNextFreeSlots</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests-Guest.html">Guest</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests~Guest_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-Guest.html#email">email</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#name">name</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-Guest.html#_close_button_click">_close_button_click</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#_dragEnd">_dragEnd</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#_dragStart">_dragStart</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#_remove_from_table">_remove_from_table</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#get_dispo">get_dispo</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#toAttendee">toAttendee</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#toHtml">toHtml</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#toString">toString</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#.From">From</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#.GetDispo">GetDispo</a></li><li><a href="module-EventView_Parts_Guests-Guest.html#.UpdateDispo">UpdateDispo</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests-GuestButton.html">GuestButton</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests~GuestButton_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-GuestButton.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#clicked">clicked</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-GuestButton.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#click">click</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Guests-GuestButton.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html">GuestPartFieldException</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Guests~GuestPartFieldException_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#$field">$field</a></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#args">args</a></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#errored_item">errored_item</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#complete_logs">complete_logs</a></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#items">items</a></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#log">log</a></li><li><a href="module-EventView_Parts_Guests-GuestPartFieldException.html#log_fatal">log_fatal</a></li></ul></div></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html">LocationPartManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location.LocationPartManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_$locations">_$locations</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_cached">_cached</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_category">_category</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#locations">locations</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#.FAKE_LOCATION_PART">FAKE_LOCATION_PART</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#.PARTS">PARTS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_generateIndex">_generateIndex</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_generate_select">_generate_select</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_on_change_action">_on_change_action</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_on_select_changed">_on_select_changed</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_update_all_selects">_update_all_selects</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#_update_selects">_update_selects</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#add">add</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#init">init</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#remove">remove</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#update_first_location">update_first_location</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#waitComplete">waitComplete</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#.AddExtraLocationType">AddExtraLocationType</a></li><li><a href="module-EventView_Parts_Location.LocationPartManager.html#.AddLocationType">AddLocationType</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-ALocationPart.html">ALocationPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~ALocationPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-ALocationPart.html#id">id</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#location">location</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-ALocationPart.html#destroy">destroy</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#.Max">Max</a></li><li><a href="module-EventView_Parts_Location-ALocationPart.html#.OptionValue">OptionValue</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-AVisio.html">AVisio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~AVisio_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-AVisio.html#id">id</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#location">location</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-AVisio.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-AVisio.html#wait">wait</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html">ExternalVisio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~ExternalVisio_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-ExternalVisio.html#id">id</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#location">location</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-ExternalVisio.html#_on_update">_on_update</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#wait">wait</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-ExternalVisio.html#.OptionValue">OptionValue</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html">IntegratedVisio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~IntegratedVisio_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_$div">_$div</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_current_promise">_current_promise</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_last_room">_last_room</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_pass">_pass</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_phone">_phone</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_pin">_pin</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_room">_room</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#id">id</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#location">location</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_on_pass_updated">_on_pass_updated</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_on_room_input">_on_room_input</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#_on_room_updated">_on_room_updated</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#get_phone">get_phone</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#wait">wait</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-IntegratedVisio.html#.OptionValue">OptionValue</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-Location.html">Location</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~Location_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-Location.html#id">id</a></li><li><a href="module-EventView_Parts_Location-Location.html#location">location</a></li><li><a href="module-EventView_Parts_Location-Location.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-Location.html#_on_update">_on_update</a></li><li><a href="module-EventView_Parts_Location-Location.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-Location.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-Location.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-Location.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-Location.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-Location.html#.Max">Max</a></li><li><a href="module-EventView_Parts_Location-Location.html#.OptionValue">OptionValue</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-Phone.html">Phone</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~Phone_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-Phone.html#_phone">_phone</a></li><li><a href="module-EventView_Parts_Location-Phone.html#_pin">_pin</a></li><li><a href="module-EventView_Parts_Location-Phone.html#id">id</a></li><li><a href="module-EventView_Parts_Location-Phone.html#location">location</a></li><li><a href="module-EventView_Parts_Location-Phone.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-Phone.html#_on_update">_on_update</a></li><li><a href="module-EventView_Parts_Location-Phone.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-Phone.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-Phone.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-Phone.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-Phone.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-Phone.html#.Max">Max</a></li><li><a href="module-EventView_Parts_Location-Phone.html#.OptionValue">OptionValue</a></li><li><a href="module-EventView_Parts_Location-Phone.html#.Url">Url</a></li></ul></div></li><li><a href="module-EventView_Parts_Location-VisioManager.html">VisioManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Location~VisioManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Location-VisioManager.html#id">id</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#location">location</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#onchange">onchange</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Location-VisioManager.html#generate">generate</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#invalid_action">invalid_action</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#is_valid">is_valid</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#option_value">option_value</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#wait">wait</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#.Has">Has</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#.Max">Max</a></li><li><a href="module-EventView_Parts_Location-VisioManager.html#.OptionValue">OptionValue</a></li></ul></div></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html">RecPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Reccursivity.RecPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#.frequency">frequency</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#destroy">destroy</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#init">init</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Reccursivity.RecPart.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html">SensitivityPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/Sensitivity.SensitivityPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_$dialog">_$dialog</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_$icon">_$icon</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_title">_title</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#.ICONS">ICONS</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#.STATES">STATES</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#init">init</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#onUpdate">onUpdate</a></li><li><a href="module-EventView_Parts_Sensitivity.SensitivityPart.html#update_dialog_title">update_dialog_title</a></li></ul></div></li><li><a href="module-EventView_Parts_State-StatePart.html">StatePart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts/State~StatePart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts_State-StatePart.html#_$field">_$field</a></li><li><a href="module-EventView_Parts_State-StatePart.html#_$icon">_$icon</a></li><li><a href="module-EventView_Parts_State-StatePart.html#.CLASSES">CLASSES</a></li><li><a href="module-EventView_Parts_State-StatePart.html#.ICONS_CLASSES">ICONS_CLASSES</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts_State-StatePart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts_State-StatePart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts_State-StatePart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts_State-StatePart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts_State-StatePart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts_State-StatePart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts_State-StatePart.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts-FakePart.html">FakePart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts~FakePart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts-FakePart.html#_$field">_$field</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts-FakePart.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts-FakePart.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts-FakePart.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts-FakePart.html#init">init</a></li><li><a href="module-EventView_Parts-FakePart.html#onChange">onChange</a></li><li><a href="module-EventView_Parts-FakePart.html#onClick">onClick</a></li><li><a href="module-EventView_Parts-FakePart.html#onInput">onInput</a></li><li><a href="module-EventView_Parts-FakePart.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView_Parts-Parts.html">Parts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView/Parts~Parts_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView_Parts-Parts.html#_$field">_$field</a></li><li><a href="module-EventView_Parts-Parts.html#.MODE">MODE</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView_Parts-Parts.html#_p_get_field">_p_get_field</a></li><li><a href="module-EventView_Parts-Parts.html#_p_initField">_p_initField</a></li><li><a href="module-EventView_Parts-Parts.html#_p_try_add_event">_p_try_add_event</a></li><li><a href="module-EventView_Parts-Parts.html#onChange">onChange</a></li><li><a href="module-EventView_Parts-Parts.html#onClick">onClick</a></li><li><a href="module-EventView_Parts-Parts.html#onInput">onInput</a></li><li><a href="module-EventView_Parts-Parts.html#onUpdate">onUpdate</a></li></ul></div></li><li><a href="module-EventView-EventField.html">EventField</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView~EventField_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView-EventField.html#name">name</a></li><li><a href="module-EventView-EventField.html#selector">selector</a></li></ul></div></li><li><a href="module-EventView-EventManager.html">EventManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView~EventManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView-EventManager.html#add">add</a></li><li><a href="module-EventView-EventManager.html#generate">generate</a></li></ul></div></li><li><a href="module-EventView-EventParts.html">EventParts</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView~EventParts_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView-EventParts.html#_onButtonTitleClicked">_onButtonTitleClicked</a></li><li><a href="module-EventView-EventParts.html#init">init</a></li></ul></div></li><li><a href="module-EventView-WarningPanel.html">WarningPanel</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:EventView~WarningPanel_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-EventView-WarningPanel.html#panel">panel</a></li><li><a href="module-EventView-WarningPanel.html#.CHILDS_ITEMS_SELECTORS">CHILDS_ITEMS_SELECTORS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-EventView-WarningPanel.html#hide">hide</a></li><li><a href="module-EventView-WarningPanel.html#is_display">is_display</a></li><li><a href="module-EventView-WarningPanel.html#show">show</a></li><li><a href="module-EventView-WarningPanel.html#.Get">Get</a></li><li><a href="module-EventView-WarningPanel.html#.Reinit">Reinit</a></li></ul></div></li><li><a href="module-Exceptions-BnumException.html">BnumException</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Exceptions~BnumException_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Exceptions-BnumException.html#args">args</a></li><li><a href="module-Exceptions-BnumException.html#errored_item">errored_item</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Exceptions-BnumException.html#complete_logs">complete_logs</a></li><li><a href="module-Exceptions-BnumException.html#items">items</a></li><li><a href="module-Exceptions-BnumException.html#log">log</a></li><li><a href="module-Exceptions-BnumException.html#log_fatal">log_fatal</a></li><li><a href="module-Exceptions-BnumException.html#.IsBnumError">IsBnumError</a></li></ul></div></li><li><a href="module-Frames-FrameData.html">FrameData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames~FrameData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames-FrameData.html#$frame">$frame</a></li><li><a href="module-Frames-FrameData.html#id">id</a></li><li><a href="module-Frames-FrameData.html#name">name</a></li><li><a href="module-Frames-FrameData.html#parent">parent</a></li><li><a href="module-Frames-FrameData.html#task">task</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Frames-FrameData.html#_onload">_onload</a></li><li><a href="module-Frames-FrameData.html#create">create</a></li><li><a href="module-Frames-FrameData.html#generate_id">generate_id</a></li><li><a href="module-Frames-FrameData.html#hide">hide</a></li><li><a href="module-Frames-FrameData.html#show">show</a></li><li><a href="module-Frames-FrameData.html#update_src">update_src</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Frames-FrameData.html#event:onframecreated">onframecreated</a></li><li><a href="module-Frames-FrameData.html#event:onframecreatedafter">onframecreatedafter</a></li><li><a href="module-Frames-FrameData.html#event:onload">onload</a></li></ul></div></li><li><a href="module-Frames-FrameManager.html">FrameManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames~FrameManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames-FrameManager.html#$layout_frames">$layout_frames</a></li><li><a href="module-Frames-FrameManager.html#_attaches">_attaches</a></li><li><a href="module-Frames-FrameManager.html#_manual_multi_frame_enabled">_manual_multi_frame_enabled</a></li><li><a href="module-Frames-FrameManager.html#_modes">_modes</a></li><li><a href="module-Frames-FrameManager.html#_selected_window">_selected_window</a></li><li><a href="module-Frames-FrameManager.html#_windows">_windows</a></li><li><a href="module-Frames-FrameManager.html#currentTask">currentTask</a></li><li><a href="module-Frames-FrameManager.html#.Helper">Helper</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Frames-FrameManager.html#Symbol.iterator">Symbol.iterator</a></li><li><a href="module-Frames-FrameManager.html#_generate_menu">_generate_menu</a></li><li><a href="module-Frames-FrameManager.html#add_buttons_actions">add_buttons_actions</a></li><li><a href="module-Frames-FrameManager.html#add_mode">add_mode</a></li><li><a href="module-Frames-FrameManager.html#add_tag">add_tag</a></li><li><a href="module-Frames-FrameManager.html#attach">attach</a></li><li><a href="module-Frames-FrameManager.html#button_action">button_action</a></li><li><a href="module-Frames-FrameManager.html#call_attach">call_attach</a></li><li><a href="module-Frames-FrameManager.html#close_except_selected">close_except_selected</a></li><li><a href="module-Frames-FrameManager.html#close_windows_to_remove_on_change">close_windows_to_remove_on_change</a></li><li><a href="module-Frames-FrameManager.html#create_window">create_window</a></li><li><a href="module-Frames-FrameManager.html#current_frame">current_frame</a></li><li><a href="module-Frames-FrameManager.html#delete_window">delete_window</a></li><li><a href="module-Frames-FrameManager.html#detach">detach</a></li><li><a href="module-Frames-FrameManager.html#disable_manual_multiframe">disable_manual_multiframe</a></li><li><a href="module-Frames-FrameManager.html#enable_manual_multiframe">enable_manual_multiframe</a></li><li><a href="module-Frames-FrameManager.html#get_frame">get_frame</a></li><li><a href="module-Frames-FrameManager.html#get_window">get_window</a></li><li><a href="module-Frames-FrameManager.html#has_frame">has_frame</a></li><li><a href="module-Frames-FrameManager.html#has_multiples_windows">has_multiples_windows</a></li><li><a href="module-Frames-FrameManager.html#hide_except_selected">hide_except_selected</a></li><li><a href="module-Frames-FrameManager.html#manual_multi_frame_enabled">manual_multi_frame_enabled</a></li><li><a href="module-Frames-FrameManager.html#open_another_window">open_another_window</a></li><li><a href="module-Frames-FrameManager.html#remove_tag">remove_tag</a></li><li><a href="module-Frames-FrameManager.html#select_window">select_window</a></li><li><a href="module-Frames-FrameManager.html#start_custom_multi_frame">start_custom_multi_frame</a></li><li><a href="module-Frames-FrameManager.html#start_mode">start_mode</a></li><li><a href="module-Frames-FrameManager.html#stop_custom_multi_frame">stop_custom_multi_frame</a></li><li><a href="module-Frames-FrameManager.html#switch_frame">switch_frame</a></li><li><a href="module-Frames-FrameManager.html#unselect_all">unselect_all</a></li></ul></div></li><li><a href="module-Frames-FrameManagerWrapper.html">FrameManagerWrapper</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames~FrameManagerWrapper_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames-FrameManagerWrapper.html#Helper">Helper</a></li><li><a href="module-Frames-FrameManagerWrapper.html#Instance">Instance</a></li></ul></div></li><li><a href="module-Frames-HistoryManager.html">HistoryManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames~HistoryManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames-HistoryManager.html#$back">$back</a></li><li><a href="module-Frames-HistoryManager.html#_history">_history</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Frames-HistoryManager.html#add">add</a></li><li><a href="module-Frames-HistoryManager.html#back">back</a></li><li><a href="module-Frames-HistoryManager.html#back_enabled">back_enabled</a></li><li><a href="module-Frames-HistoryManager.html#show_history">show_history</a></li><li><a href="module-Frames-HistoryManager.html#update_button_back">update_button_back</a></li></ul></div></li><li><a href="module-Frames-Window.html">Window</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Frames~Window_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Frames-Window.html#_can_be_selected">_can_be_selected</a></li><li><a href="module-Frames-Window.html#_current_frame">_current_frame</a></li><li><a href="module-Frames-Window.html#_frames">_frames</a></li><li><a href="module-Frames-Window.html#_history">_history</a></li><li><a href="module-Frames-Window.html#_id">_id</a></li><li><a href="module-Frames-Window.html#currentFrameData">currentFrameData</a></li><li><a href="module-Frames-Window.html#currentTask">currentTask</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Frames-Window.html#_create_frame">_create_frame</a></li><li><a href="module-Frames-Window.html#_first_load">_first_load</a></li><li><a href="module-Frames-Window.html#_generate_layout_frames">_generate_layout_frames</a></li><li><a href="module-Frames-Window.html#_generate_window">_generate_window</a></li><li><a href="module-Frames-Window.html#_open_frame">_open_frame</a></li><li><a href="module-Frames-Window.html#add_tag">add_tag</a></li><li><a href="module-Frames-Window.html#can_be_selected">can_be_selected</a></li><li><a href="module-Frames-Window.html#delete">delete</a></li><li><a href="module-Frames-Window.html#get_frame">get_frame</a></li><li><a href="module-Frames-Window.html#get_window">get_window</a></li><li><a href="module-Frames-Window.html#get_window_id">get_window_id</a></li><li><a href="module-Frames-Window.html#has_frame">has_frame</a></li><li><a href="module-Frames-Window.html#has_other_window">has_other_window</a></li><li><a href="module-Frames-Window.html#has_tag">has_tag</a></li><li><a href="module-Frames-Window.html#hide">hide</a></li><li><a href="module-Frames-Window.html#is_hidden">is_hidden</a></li><li><a href="module-Frames-Window.html#is_remove_on_change">is_remove_on_change</a></li><li><a href="module-Frames-Window.html#is_selected">is_selected</a></li><li><a href="module-Frames-Window.html#refresh">refresh</a></li><li><a href="module-Frames-Window.html#remove_frame">remove_frame</a></li><li><a href="module-Frames-Window.html#remove_tag">remove_tag</a></li><li><a href="module-Frames-Window.html#select">select</a></li><li><a href="module-Frames-Window.html#set_can_be_select">set_can_be_select</a></li><li><a href="module-Frames-Window.html#set_cannot_be_select">set_cannot_be_select</a></li><li><a href="module-Frames-Window.html#set_remove_on_change">set_remove_on_change</a></li><li><a href="module-Frames-Window.html#show">show</a></li><li><a href="module-Frames-Window.html#switch_frame">switch_frame</a></li><li><a href="module-Frames-Window.html#unselect">unselect</a></li><li><a href="module-Frames-Window.html#unset_remove_on_change">unset_remove_on_change</a></li><li><a href="module-Frames-Window.html#update_id">update_id</a></li><li><a href="module-Frames-Window.html#.GetTaskTitle">GetTaskTitle</a></li><li><a href="module-Frames-Window.html#.UpdateDocumentTitle">UpdateDocumentTitle</a></li><li><a href="module-Frames-Window.html#.UpdateNavUrl">UpdateNavUrl</a></li><li><a href="module-Frames-Window.html#.UrlFromTask">UrlFromTask</a></li></ul></div></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html">FreeBusyClassLoader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:FreeBusy~FreeBusyClassLoader_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_listener">_listener</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_call">_call</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_is_date_ok">_is_date_ok</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_load">_load</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_load_free_busy">_load_free_busy</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_save">_save</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#_save_date">_save_date</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#add_event_listener">add_event_listener</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#change_frame">change_frame</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#clear_in_memory">clear_in_memory</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#cookie_get">cookie_get</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#cookie_remove">cookie_remove</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#cookie_set">cookie_set</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#create_promise">create_promise</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#generate">generate</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#generate_and_save">generate_and_save</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#generate_loader">generate_loader</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#get">get</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#get_env">get_env</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#get_skin">get_skin</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#gettext">gettext</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#have_frame">have_frame</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#http_call">http_call</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#http_internal_call">http_internal_call</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#http_internal_get">http_internal_get</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#http_internal_post">http_internal_post</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#load">load</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#load_from_memory">load_from_memory</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#main">main</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#on_refresh">on_refresh</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#rcmail">rcmail</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#save">save</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#select">select</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#select_frame">select_frame</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#select_frame_except">select_frame_except</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#send_notification">send_notification</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#sleep">sleep</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#switch_frame">switch_frame</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#trigger_event">trigger_event</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#unload">unload</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#url">url</a></li><li><a href="module-FreeBusy-FreeBusyClassLoader.html#wait_something">wait_something</a></li></ul></div></li><li><a href="module-JsHtml-____JsHtml.html">____JsHtml</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:JsHtml~____JsHtml_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-JsHtml-____JsHtml.html#.actions">actions</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-JsHtml-____JsHtml.html#_">_</a></li><li><a href="module-JsHtml-____JsHtml.html#_create">_create</a></li><li><a href="module-JsHtml-____JsHtml.html#_create_oneline">_create_oneline</a></li><li><a href="module-JsHtml-____JsHtml.html#a">a</a></li><li><a href="module-JsHtml-____JsHtml.html#action">action</a></li><li><a href="module-JsHtml-____JsHtml.html#addClass">addClass</a></li><li><a href="module-JsHtml-____JsHtml.html#add_child">add_child</a></li><li><a href="module-JsHtml-____JsHtml.html#address">address</a></li><li><a href="module-JsHtml-____JsHtml.html#article">article</a></li><li><a href="module-JsHtml-____JsHtml.html#aside">aside</a></li><li><a href="module-JsHtml-____JsHtml.html#attr">attr</a></li><li><a href="module-JsHtml-____JsHtml.html#attrs">attrs</a></li><li><a href="module-JsHtml-____JsHtml.html#blockquote">blockquote</a></li><li><a href="module-JsHtml-____JsHtml.html#br">br</a></li><li><a href="module-JsHtml-____JsHtml.html#button">button</a></li><li><a href="module-JsHtml-____JsHtml.html#canvas">canvas</a></li><li><a href="module-JsHtml-____JsHtml.html#caption">caption</a></li><li><a href="module-JsHtml-____JsHtml.html#col">col</a></li><li><a href="module-JsHtml-____JsHtml.html#colgroup">colgroup</a></li><li><a href="module-JsHtml-____JsHtml.html#comment">comment</a></li><li><a href="module-JsHtml-____JsHtml.html#css">css</a></li><li><a href="module-JsHtml-____JsHtml.html#dd">dd</a></li><li><a href="module-JsHtml-____JsHtml.html#details">details</a></li><li><a href="module-JsHtml-____JsHtml.html#disable">disable</a></li><li><a href="module-JsHtml-____JsHtml.html#div">div</a></li><li><a href="module-JsHtml-____JsHtml.html#dl">dl</a></li><li><a href="module-JsHtml-____JsHtml.html#dt">dt</a></li><li><a href="module-JsHtml-____JsHtml.html#each">each</a></li><li><a href="module-JsHtml-____JsHtml.html#end">end</a></li><li><a href="module-JsHtml-____JsHtml.html#fieldset">fieldset</a></li><li><a href="module-JsHtml-____JsHtml.html#first">first</a></li><li><a href="module-JsHtml-____JsHtml.html#footer">footer</a></li><li><a href="module-JsHtml-____JsHtml.html#form">form</a></li><li><a href="module-JsHtml-____JsHtml.html#generate">generate</a></li><li><a href="module-JsHtml-____JsHtml.html#generate_html">generate_html</a></li><li><a href="module-JsHtml-____JsHtml.html#h">h</a></li><li><a href="module-JsHtml-____JsHtml.html#h1">h1</a></li><li><a href="module-JsHtml-____JsHtml.html#h2">h2</a></li><li><a href="module-JsHtml-____JsHtml.html#h3">h3</a></li><li><a href="module-JsHtml-____JsHtml.html#h4">h4</a></li><li><a href="module-JsHtml-____JsHtml.html#h5">h5</a></li><li><a href="module-JsHtml-____JsHtml.html#h6">h6</a></li><li><a href="module-JsHtml-____JsHtml.html#hasAttr">hasAttr</a></li><li><a href="module-JsHtml-____JsHtml.html#hasClass">hasClass</a></li><li><a href="module-JsHtml-____JsHtml.html#header">header</a></li><li><a href="module-JsHtml-____JsHtml.html#hgroup">hgroup</a></li><li><a href="module-JsHtml-____JsHtml.html#hr">hr</a></li><li><a href="module-JsHtml-____JsHtml.html#iframe">iframe</a></li><li><a href="module-JsHtml-____JsHtml.html#img">img</a></li><li><a href="module-JsHtml-____JsHtml.html#input">input</a></li><li><a href="module-JsHtml-____JsHtml.html#label">label</a></li><li><a href="module-JsHtml-____JsHtml.html#legend">legend</a></li><li><a href="module-JsHtml-____JsHtml.html#li">li</a></li><li><a href="module-JsHtml-____JsHtml.html#main">main</a></li><li><a href="module-JsHtml-____JsHtml.html#menu">menu</a></li><li><a href="module-JsHtml-____JsHtml.html#meter">meter</a></li><li><a href="module-JsHtml-____JsHtml.html#nav">nav</a></li><li><a href="module-JsHtml-____JsHtml.html#ol">ol</a></li><li><a href="module-JsHtml-____JsHtml.html#optgroup">optgroup</a></li><li><a href="module-JsHtml-____JsHtml.html#option">option</a></li><li><a href="module-JsHtml-____JsHtml.html#option_one_line">option_one_line</a></li><li><a href="module-JsHtml-____JsHtml.html#output">output</a></li><li><a href="module-JsHtml-____JsHtml.html#p">p</a></li><li><a href="module-JsHtml-____JsHtml.html#parent">parent</a></li><li><a href="module-JsHtml-____JsHtml.html#progress">progress</a></li><li><a href="module-JsHtml-____JsHtml.html#removeAttr">removeAttr</a></li><li><a href="module-JsHtml-____JsHtml.html#removeClass">removeClass</a></li><li><a href="module-JsHtml-____JsHtml.html#script">script</a></li><li><a href="module-JsHtml-____JsHtml.html#section">section</a></li><li><a href="module-JsHtml-____JsHtml.html#select">select</a></li><li><a href="module-JsHtml-____JsHtml.html#span">span</a></li><li><a href="module-JsHtml-____JsHtml.html#style">style</a></li><li><a href="module-JsHtml-____JsHtml.html#style_css_prop">style_css_prop</a></li><li><a href="module-JsHtml-____JsHtml.html#summary">summary</a></li><li><a href="module-JsHtml-____JsHtml.html#table">table</a></li><li><a href="module-JsHtml-____JsHtml.html#tag">tag</a></li><li><a href="module-JsHtml-____JsHtml.html#tag_one_line">tag_one_line</a></li><li><a href="module-JsHtml-____JsHtml.html#tbody">tbody</a></li><li><a href="module-JsHtml-____JsHtml.html#td">td</a></li><li><a href="module-JsHtml-____JsHtml.html#text">text</a></li><li><a href="module-JsHtml-____JsHtml.html#textarea">textarea</a></li><li><a href="module-JsHtml-____JsHtml.html#tfoot">tfoot</a></li><li><a href="module-JsHtml-____JsHtml.html#th">th</a></li><li><a href="module-JsHtml-____JsHtml.html#thead">thead</a></li><li><a href="module-JsHtml-____JsHtml.html#toString">toString</a></li><li><a href="module-JsHtml-____JsHtml.html#tr">tr</a></li><li><a href="module-JsHtml-____JsHtml.html#ul">ul</a></li><li><a href="module-JsHtml-____JsHtml.html#.add_action">add_action</a></li><li><a href="module-JsHtml-____JsHtml.html#.create_alias">create_alias</a></li><li><a href="module-JsHtml-____JsHtml.html#.generate_ids">generate_ids</a></li><li><a href="module-JsHtml-____JsHtml.html#.remove_id">remove_id</a></li><li><a href="module-JsHtml-____JsHtml.html#.start">start</a></li></ul></div></li><li><a href="module-JsHtml-____js_html___.html">____js_html___</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:JsHtml~____js_html____sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-JsHtml-____js_html___.html#start">start</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-JsHtml-____js_html___.html#create_alias">create_alias</a></li><li><a href="module-JsHtml-____js_html___.html#extend">extend</a></li><li><a href="module-JsHtml-____js_html___.html#load_page">load_page</a></li><li><a href="module-JsHtml-____js_html___.html#update">update</a></li><li><a href="module-JsHtml-____js_html___.html#write">write</a></li></ul></div></li><li><a href="module-Log.BnumLog.html">BnumLog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Log.BnumLog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Log.BnumLog.html#.LogLevels">LogLevels</a></li><li><a href="module-Log.BnumLog.html#.log_level">log_level</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Log.BnumLog.html#.debug">debug</a></li><li><a href="module-Log.BnumLog.html#.debugger">debugger</a></li><li><a href="module-Log.BnumLog.html#.error">error</a></li><li><a href="module-Log.BnumLog.html#.fatal">fatal</a></li><li><a href="module-Log.BnumLog.html#.info">info</a></li><li><a href="module-Log.BnumLog.html#.log">log</a></li><li><a href="module-Log.BnumLog.html#.set_log_level">set_log_level</a></li><li><a href="module-Log.BnumLog.html#.warning">warning</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI.Mel_Elastic_Storage.html">Mel_Elastic_Storage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI.Mel_Elastic_Storage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI.Mel_Elastic_Storage.html#.KEY">KEY</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI.Mel_Elastic_Storage.html#.load">load</a></li><li><a href="module-MEL_ELASTIC_UI.Mel_Elastic_Storage.html#.remove">remove</a></li><li><a href="module-MEL_ELASTIC_UI.Mel_Elastic_Storage.html#.save">save</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html">Mel_CSS_Advanced_Rule</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI~Mel_CSS_Advanced_Rule_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#rule">rule</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#selector">selector</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#add">add</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#remove">remove</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#rules">rules</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#set">set</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#toString">toString</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Advanced_Rule.html#update">update</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html">Mel_CSS_Array_Rule</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI~Mel_CSS_Array_Rule_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#ids">ids</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#styleRule">styleRule</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#delete">delete</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#rule_id">rule_id</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#set">set</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Array_Rule.html#toString">toString</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html">Mel_CSS_Rule</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI~Mel_CSS_Rule_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#rule">rule</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#styleRule">styleRule</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#delete">delete</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#id">id</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#set">set</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#toString">toString</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#.component">component</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#.from_array">from_array</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Rule.html#.lastIndex">lastIndex</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html">Mel_CSS_Style_Sheet</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI~Mel_CSS_Style_Sheet_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#css">css</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#add">add</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#addAdvanced">addAdvanced</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#addRules">addRules</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#getKeys">getKeys</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#getStyleSheet">getStyleSheet</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#remove">remove</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#removeRules">removeRules</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#reset">reset</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_CSS_Style_Sheet.html#ruleExist">ruleExist</a></li></ul></div></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html">Mel_Elastic</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MEL_ELASTIC_UI~Mel_Elastic_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#FROM_INFOS">FROM_INFOS</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#IS_EXTERNE">IS_EXTERNE</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#JSON_CHAR_REPLACE">JSON_CHAR_REPLACE</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#SELECT_VALUE_REPLACE">SELECT_VALUE_REPLACE</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#_hide_main_menu">_hide_main_menu</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#_integer">_integer</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#css_rules">css_rules</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#keys">keys</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#screen_type">screen_type</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#_format_replace_conditions">_format_replace_conditions</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#color_mode">color_mode</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#create_number">create_number</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#generateSelect">generateSelect</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#gestionTabs">gestionTabs</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#getRandomColor">getRandomColor</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#getRect">getRect</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#get_input_mail_search">get_input_mail_search</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#get_nav_button_main_class">get_nav_button_main_class</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#init">init</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#init_const">init_const</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#init_theme">init_theme</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#isScollBarAuto">isScollBarAuto</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#pagination_next">pagination_next</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#pagination_page">pagination_page</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#pagination_prev">pagination_prev</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#redStars">redStars</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setValue">setValue</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#set_pagination">set_pagination</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup">setup</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_adressbook">setup_adressbook</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_calendar">setup_calendar</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_compose">setup_compose</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_html">setup_html</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_mails">setup_mails</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_mails_classes">setup_mails_classes</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_nav">setup_nav</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_other_apps">setup_other_apps</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_search">setup_search</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#setup_tasks">setup_tasks</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#switchTab">switchTab</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#switch_color">switch_color</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#update">update</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#updateSelectValue">updateSelectValue</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#update_pagination">update_pagination</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#update_tabs">update_tabs</a></li><li><a href="module-MEL_ELASTIC_UI-Mel_Elastic.html#url">url</a></li></ul></div></li><li><a href="module-MainNav.MainNav.html">MainNav</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MainNav.MainNav_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MainNav.MainNav.html#.helper">helper</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MainNav.MainNav.html#.get_icon_data">get_icon_data</a></li><li><a href="module-MainNav.MainNav.html#.try_add_round">try_add_round</a></li><li><a href="module-MainNav.MainNav.html#.update_badge">update_badge</a></li><li><a href="module-MainNav.MainNav.html#.update_badge_number">update_badge_number</a></li><li><a href="module-MainNav.MainNav.html#.update_badge_text">update_badge_text</a></li></ul></div></li><li><a href="module-MelCalResource_Page_Location-ResourceDialogPage.html">ResourceDialogPage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelCalResource/Page/Location~ResourceDialogPage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MelCalResource_Page_Location-ResourceDialogPage.html#dialog">dialog</a></li><li><a href="module-MelCalResource_Page_Location-ResourceDialogPage.html#onclickafter">onclickafter</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MelCalResource_Page_Location-ResourceDialogPage.html#get">get</a></li></ul></div></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html">MelIconPrevisualiser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelIconPrevisualiser~MelIconPrevisualiser_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#add_default_action_default_buttons">add_default_action_default_buttons</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#add_defaults_actions">add_defaults_actions</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#custom_icons">custom_icons</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#generate_defaults_icons">generate_defaults_icons</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_after_create_items">on_after_create_items</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_button_click">on_button_click</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_button_hover">on_button_hover</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_button_leave">on_button_leave</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_create_default_items">on_create_default_items</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_create_set_selected">on_create_set_selected</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#on_create_show_selected">on_create_show_selected</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#.ICONS">ICONS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#_on_default_click">_on_default_click</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#_on_default_hover">_on_default_hover</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#_on_default_leave">_on_default_leave</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#_p_show_defaut_previsu">_p_show_defaut_previsu</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#_save_default_icon">_save_default_icon</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#addCustomIcon">addCustomIcon</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#addCustomIcons">addCustomIcons</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#addElement">addElement</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#get_elements">get_elements</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#get_previsu">get_previsu</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#get_selected_icon">get_selected_icon</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#main">main</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#select_item">select_item</a></li><li><a href="module-MelIconPrevisualiser-MelIconPrevisualiser.html#unselect_item">unselect_item</a></li></ul></div></li><li><a href="module-MelLinq-MelEnumerable.html">MelEnumerable</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelLinq~MelEnumerable_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MelLinq-MelEnumerable.html#generator">generator</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MelLinq-MelEnumerable.html#add">add</a></li><li><a href="module-MelLinq-MelEnumerable.html#aggregate">aggregate</a></li><li><a href="module-MelLinq-MelEnumerable.html#all">all</a></li><li><a href="module-MelLinq-MelEnumerable.html#any">any</a></li><li><a href="module-MelLinq-MelEnumerable.html#contains">contains</a></li><li><a href="module-MelLinq-MelEnumerable.html#count">count</a></li><li><a href="module-MelLinq-MelEnumerable.html#distinct">distinct</a></li><li><a href="module-MelLinq-MelEnumerable.html#except">except</a></li><li><a href="module-MelLinq-MelEnumerable.html#first">first</a></li><li><a href="module-MelLinq-MelEnumerable.html#firstOrDefault">firstOrDefault</a></li><li><a href="module-MelLinq-MelEnumerable.html#flat">flat</a></li><li><a href="module-MelLinq-MelEnumerable.html#groupBy">groupBy</a></li><li><a href="module-MelLinq-MelEnumerable.html#intersect">intersect</a></li><li><a href="module-MelLinq-MelEnumerable.html#join">join</a></li><li><a href="module-MelLinq-MelEnumerable.html#last">last</a></li><li><a href="module-MelLinq-MelEnumerable.html#lastOrDefault">lastOrDefault</a></li><li><a href="module-MelLinq-MelEnumerable.html#max">max</a></li><li><a href="module-MelLinq-MelEnumerable.html#min">min</a></li><li><a href="module-MelLinq-MelEnumerable.html#orderBy">orderBy</a></li><li><a href="module-MelLinq-MelEnumerable.html#orderByDescending">orderByDescending</a></li><li><a href="module-MelLinq-MelEnumerable.html#remove">remove</a></li><li><a href="module-MelLinq-MelEnumerable.html#removeAt">removeAt</a></li><li><a href="module-MelLinq-MelEnumerable.html#reverse">reverse</a></li><li><a href="module-MelLinq-MelEnumerable.html#select">select</a></li><li><a href="module-MelLinq-MelEnumerable.html#sum">sum</a></li><li><a href="module-MelLinq-MelEnumerable.html#take">take</a></li><li><a href="module-MelLinq-MelEnumerable.html#then">then</a></li><li><a href="module-MelLinq-MelEnumerable.html#thenDescending">thenDescending</a></li><li><a href="module-MelLinq-MelEnumerable.html#toArray">toArray</a></li><li><a href="module-MelLinq-MelEnumerable.html#toJsonObject">toJsonObject</a></li><li><a href="module-MelLinq-MelEnumerable.html#union">union</a></li><li><a href="module-MelLinq-MelEnumerable.html#where">where</a></li><li><a href="module-MelLinq-MelEnumerable.html#.choice">choice</a></li><li><a href="module-MelLinq-MelEnumerable.html#.cycle">cycle</a></li><li><a href="module-MelLinq-MelEnumerable.html#.empty">empty</a></li><li><a href="module-MelLinq-MelEnumerable.html#.from">from</a></li><li><a href="module-MelLinq-MelEnumerable.html#.random">random</a></li><li><a href="module-MelLinq-MelEnumerable.html#.range">range</a></li><li><a href="module-MelLinq-MelEnumerable.html#.rangeDown">rangeDown</a></li><li><a href="module-MelLinq-MelEnumerable.html#.toInfinity">toInfinity</a></li><li><a href="module-MelLinq-MelEnumerable.html#.toNegativeInfinity">toNegativeInfinity</a></li></ul></div></li><li><a href="module-MelLinq-MelKeyValuePair.html">MelKeyValuePair</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelLinq~MelKeyValuePair_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-MelLinq-MelKeyValuePair.html#key">key</a></li><li><a href="module-MelLinq-MelKeyValuePair.html#value">value</a></li></ul></div></li><li><a href="module-MelTemplate-MelTemplate.html">MelTemplate</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:MelTemplate~MelTemplate_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-MelTemplate-MelTemplate.html"></a></li><li><a href="module-MelTemplate-MelTemplate.html#addData">addData</a></li><li><a href="module-MelTemplate-MelTemplate.html#addEvent">addEvent</a></li><li><a href="module-MelTemplate-MelTemplate.html#addHtml">addHtml</a></li><li><a href="module-MelTemplate-MelTemplate.html#render">render</a></li><li><a href="module-MelTemplate-MelTemplate.html#renderHtml">renderHtml</a></li><li><a href="module-MelTemplate-MelTemplate.html#setData">setData</a></li><li><a href="module-MelTemplate-MelTemplate.html#setEvents">setEvents</a></li><li><a href="module-MelTemplate-MelTemplate.html#setTemplateSelector">setTemplateSelector</a></li></ul></div></li><li><a href="module-Modal-DialogPage.html">DialogPage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~DialogPage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-DialogPage.html#buttons">buttons</a></li><li><a href="module-Modal-DialogPage.html#content">content</a></li><li><a href="module-Modal-DialogPage.html#name">name</a></li><li><a href="module-Modal-DialogPage.html#title">title</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-DialogPage.html#get">get</a></li><li><a href="module-Modal-DialogPage.html#start_update_content">start_update_content</a></li><li><a href="module-Modal-DialogPage.html#.DrawChoice">DrawChoice</a></li><li><a href="module-Modal-DialogPage.html#.DrawChoices">DrawChoices</a></li><li><a href="module-Modal-DialogPage.html#.DrawConfirm">DrawConfirm</a></li></ul></div></li><li><a href="module-Modal-DialogPageManager.html">DialogPageManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~DialogPageManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-DialogPageManager.html#_current_page">_current_page</a></li><li><a href="module-Modal-DialogPageManager.html#_pages">_pages</a></li><li><a href="module-Modal-DialogPageManager.html#onswitchpage">onswitchpage</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-DialogPageManager.html#add_page">add_page</a></li><li><a href="module-Modal-DialogPageManager.html#add_pages">add_pages</a></li><li><a href="module-Modal-DialogPageManager.html#has_pages">has_pages</a></li><li><a href="module-Modal-DialogPageManager.html#switch_page">switch_page</a></li></ul></div></li><li><a href="module-Modal-JQueryDialogPage.html">JQueryDialogPage</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~JQueryDialogPage_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-JQueryDialogPage.html#buttons">buttons</a></li><li><a href="module-Modal-JQueryDialogPage.html#content">content</a></li><li><a href="module-Modal-JQueryDialogPage.html#name">name</a></li><li><a href="module-Modal-JQueryDialogPage.html#title">title</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-JQueryDialogPage.html#get">get</a></li><li><a href="module-Modal-JQueryDialogPage.html#start_update_content">start_update_content</a></li></ul></div></li><li><a href="module-Modal-MelDialog.html">MelDialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~MelDialog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-MelDialog.html#_$dialog">_$dialog</a></li><li><a href="module-Modal-MelDialog.html#options">options</a></li><li><a href="module-Modal-MelDialog.html#page_manager">page_manager</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-MelDialog.html#_update_page">_update_page</a></li><li><a href="module-Modal-MelDialog.html#add_page">add_page</a></li><li><a href="module-Modal-MelDialog.html#destroy">destroy</a></li><li><a href="module-Modal-MelDialog.html#draw_choice">draw_choice</a></li><li><a href="module-Modal-MelDialog.html#draw_choices">draw_choices</a></li><li><a href="module-Modal-MelDialog.html#hide">hide</a></li><li><a href="module-Modal-MelDialog.html#show">show</a></li><li><a href="module-Modal-MelDialog.html#switch_page">switch_page</a></li><li><a href="module-Modal-MelDialog.html#update_option">update_option</a></li><li><a href="module-Modal-MelDialog.html#update_options">update_options</a></li><li><a href="module-Modal-MelDialog.html#.Confirm">Confirm</a></li><li><a href="module-Modal-MelDialog.html#.Create">Create</a></li><li><a href="module-Modal-MelDialog.html#.CreateConfirmDialog">CreateConfirmDialog</a></li></ul></div></li><li><a href="module-Modal-RcmailDialog.html">RcmailDialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~RcmailDialog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-RcmailDialog.html#_$dialog">_$dialog</a></li><li><a href="module-Modal-RcmailDialog.html#_listener">_listener</a></li><li><a href="module-Modal-RcmailDialog.html#buttons">buttons</a></li><li><a href="module-Modal-RcmailDialog.html#contents">contents</a></li><li><a href="module-Modal-RcmailDialog.html#options">options</a></li><li><a href="module-Modal-RcmailDialog.html#rc_data">rc_data</a></li><li><a href="module-Modal-RcmailDialog.html#title">title</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-RcmailDialog.html#add_event_listener">add_event_listener</a></li><li><a href="module-Modal-RcmailDialog.html#change_frame">change_frame</a></li><li><a href="module-Modal-RcmailDialog.html#cookie_get">cookie_get</a></li><li><a href="module-Modal-RcmailDialog.html#cookie_remove">cookie_remove</a></li><li><a href="module-Modal-RcmailDialog.html#cookie_set">cookie_set</a></li><li><a href="module-Modal-RcmailDialog.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Modal-RcmailDialog.html#create_promise">create_promise</a></li><li><a href="module-Modal-RcmailDialog.html#destroy">destroy</a></li><li><a href="module-Modal-RcmailDialog.html#generate_loader">generate_loader</a></li><li><a href="module-Modal-RcmailDialog.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Modal-RcmailDialog.html#get_env">get_env</a></li><li><a href="module-Modal-RcmailDialog.html#get_skin">get_skin</a></li><li><a href="module-Modal-RcmailDialog.html#gettext">gettext</a></li><li><a href="module-Modal-RcmailDialog.html#have_frame">have_frame</a></li><li><a href="module-Modal-RcmailDialog.html#hide">hide</a></li><li><a href="module-Modal-RcmailDialog.html#http_call">http_call</a></li><li><a href="module-Modal-RcmailDialog.html#http_internal_call">http_internal_call</a></li><li><a href="module-Modal-RcmailDialog.html#http_internal_get">http_internal_get</a></li><li><a href="module-Modal-RcmailDialog.html#http_internal_post">http_internal_post</a></li><li><a href="module-Modal-RcmailDialog.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Modal-RcmailDialog.html#load">load</a></li><li><a href="module-Modal-RcmailDialog.html#main">main</a></li><li><a href="module-Modal-RcmailDialog.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Modal-RcmailDialog.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Modal-RcmailDialog.html#on_refresh">on_refresh</a></li><li><a href="module-Modal-RcmailDialog.html#rcmail">rcmail</a></li><li><a href="module-Modal-RcmailDialog.html#save">save</a></li><li><a href="module-Modal-RcmailDialog.html#select">select</a></li><li><a href="module-Modal-RcmailDialog.html#select_frame">select_frame</a></li><li><a href="module-Modal-RcmailDialog.html#select_frame_except">select_frame_except</a></li><li><a href="module-Modal-RcmailDialog.html#send_notification">send_notification</a></li><li><a href="module-Modal-RcmailDialog.html#show">show</a></li><li><a href="module-Modal-RcmailDialog.html#sleep">sleep</a></li><li><a href="module-Modal-RcmailDialog.html#switch_frame">switch_frame</a></li><li><a href="module-Modal-RcmailDialog.html#to_mel_dialog">to_mel_dialog</a></li><li><a href="module-Modal-RcmailDialog.html#trigger_event">trigger_event</a></li><li><a href="module-Modal-RcmailDialog.html#unload">unload</a></li><li><a href="module-Modal-RcmailDialog.html#url">url</a></li><li><a href="module-Modal-RcmailDialog.html#wait_something">wait_something</a></li><li><a href="module-Modal-RcmailDialog.html#.DrawChoice">DrawChoice</a></li><li><a href="module-Modal-RcmailDialog.html#.DrawChoices">DrawChoices</a></li></ul></div></li><li><a href="module-Modal-RcmailDialogButton.html">RcmailDialogButton</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~RcmailDialogButton_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-RcmailDialogButton.html#classes">classes</a></li><li><a href="module-Modal-RcmailDialogButton.html#click">click</a></li><li><a href="module-Modal-RcmailDialogButton.html#hover">hover</a></li><li><a href="module-Modal-RcmailDialogButton.html#mouseenter">mouseenter</a></li><li><a href="module-Modal-RcmailDialogButton.html#mouseleave">mouseleave</a></li><li><a href="module-Modal-RcmailDialogButton.html#on_prop_update">on_prop_update</a></li><li><a href="module-Modal-RcmailDialogButton.html#options">options</a></li><li><a href="module-Modal-RcmailDialogButton.html#text">text</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-RcmailDialogButton.html#_p_addProp">_p_addProp</a></li><li><a href="module-Modal-RcmailDialogButton.html#generate">generate</a></li><li><a href="module-Modal-RcmailDialogButton.html#.ButtonSave">ButtonSave</a></li></ul></div></li><li><a href="module-Modal-RcmailDialogChoiceButton.html">RcmailDialogChoiceButton</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~RcmailDialogChoiceButton_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-RcmailDialogChoiceButton.html#classes">classes</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#click">click</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#hover">hover</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#icon">icon</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#mouseenter">mouseenter</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#mouseleave">mouseleave</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#on_prop_update">on_prop_update</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#options">options</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#text">text</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-RcmailDialogChoiceButton.html#_p_addProp">_p_addProp</a></li><li><a href="module-Modal-RcmailDialogChoiceButton.html#generate">generate</a></li></ul></div></li><li><a href="module-Modal-RcmailDialogChoiceButtonVisualiser.html">RcmailDialogChoiceButtonVisualiser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Modal~RcmailDialogChoiceButtonVisualiser_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Modal-RcmailDialogChoiceButtonVisualiser.html#ref">ref</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Modal-RcmailDialogChoiceButtonVisualiser.html#_p_draw">_p_draw</a></li><li><a href="module-Modal-RcmailDialogChoiceButtonVisualiser.html#update">update</a></li></ul></div></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html">FavoriteLoader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Favorites/Loaders~FavoriteLoader_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#_listener">_listener</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#add_event_listener">add_event_listener</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#add_favorites">add_favorites</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#change_frame">change_frame</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#cookie_get">cookie_get</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#cookie_remove">cookie_remove</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#cookie_set">cookie_set</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#create_promise">create_promise</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#force_load_favorites">force_load_favorites</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#generate_loader">generate_loader</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#get_env">get_env</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#get_skin">get_skin</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#gettext">gettext</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#have_frame">have_frame</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#http_call">http_call</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#http_internal_call">http_internal_call</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#http_internal_get">http_internal_get</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#http_internal_post">http_internal_post</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#is_same_date">is_same_date</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#load">load</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#load_favorites">load_favorites</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#on_refresh">on_refresh</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#rcmail">rcmail</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#remove_favorites">remove_favorites</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#save">save</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#save_favorites">save_favorites</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#select">select</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#select_frame">select_frame</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#select_frame_except">select_frame_except</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#send_notification">send_notification</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#sleep">sleep</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#switch_frame">switch_frame</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#trigger_event">trigger_event</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#unload">unload</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#url">url</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#wait_something">wait_something</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Add">Add</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Clear">Clear</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Force_Load">Force_Load</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.IsSameDate">IsSameDate</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Load">Load</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Remove">Remove</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.Save">Save</a></li><li><a href="module-Resources_Favorites_Loaders-FavoriteLoader.html#.StartLoading">StartLoading</a></li></ul></div></li><li><a href="module-Resources_Filters-FilterBase.html">FilterBase</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Filters~FilterBase_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Filters-FilterBase.html#_listener">_listener</a></li><li><a href="module-Resources_Filters-FilterBase.html#event_on_data_changed">event_on_data_changed</a></li><li><a href="module-Resources_Filters-FilterBase.html#event_on_data_loaded">event_on_data_loaded</a></li><li><a href="module-Resources_Filters-FilterBase.html#name">name</a></li><li><a href="module-Resources_Filters-FilterBase.html#rc_data">rc_data</a></li><li><a href="module-Resources_Filters-FilterBase.html#value">value</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_Filters-FilterBase.html#add_event_listener">add_event_listener</a></li><li><a href="module-Resources_Filters-FilterBase.html#change_frame">change_frame</a></li><li><a href="module-Resources_Filters-FilterBase.html#cookie_get">cookie_get</a></li><li><a href="module-Resources_Filters-FilterBase.html#cookie_remove">cookie_remove</a></li><li><a href="module-Resources_Filters-FilterBase.html#cookie_set">cookie_set</a></li><li><a href="module-Resources_Filters-FilterBase.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Resources_Filters-FilterBase.html#create_promise">create_promise</a></li><li><a href="module-Resources_Filters-FilterBase.html#filter">filter</a></li><li><a href="module-Resources_Filters-FilterBase.html#generate">generate</a></li><li><a href="module-Resources_Filters-FilterBase.html#generate_loader">generate_loader</a></li><li><a href="module-Resources_Filters-FilterBase.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Resources_Filters-FilterBase.html#get_env">get_env</a></li><li><a href="module-Resources_Filters-FilterBase.html#get_skin">get_skin</a></li><li><a href="module-Resources_Filters-FilterBase.html#gettext">gettext</a></li><li><a href="module-Resources_Filters-FilterBase.html#have_frame">have_frame</a></li><li><a href="module-Resources_Filters-FilterBase.html#http_call">http_call</a></li><li><a href="module-Resources_Filters-FilterBase.html#http_internal_call">http_internal_call</a></li><li><a href="module-Resources_Filters-FilterBase.html#http_internal_get">http_internal_get</a></li><li><a href="module-Resources_Filters-FilterBase.html#http_internal_post">http_internal_post</a></li><li><a href="module-Resources_Filters-FilterBase.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Resources_Filters-FilterBase.html#load">load</a></li><li><a href="module-Resources_Filters-FilterBase.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Resources_Filters-FilterBase.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Resources_Filters-FilterBase.html#on_refresh">on_refresh</a></li><li><a href="module-Resources_Filters-FilterBase.html#on_select_change">on_select_change</a></li><li><a href="module-Resources_Filters-FilterBase.html#push_event">push_event</a></li><li><a href="module-Resources_Filters-FilterBase.html#push_event_data_changed">push_event_data_changed</a></li><li><a href="module-Resources_Filters-FilterBase.html#rcmail">rcmail</a></li><li><a href="module-Resources_Filters-FilterBase.html#save">save</a></li><li><a href="module-Resources_Filters-FilterBase.html#select">select</a></li><li><a href="module-Resources_Filters-FilterBase.html#select_frame">select_frame</a></li><li><a href="module-Resources_Filters-FilterBase.html#select_frame_except">select_frame_except</a></li><li><a href="module-Resources_Filters-FilterBase.html#send_notification">send_notification</a></li><li><a href="module-Resources_Filters-FilterBase.html#sleep">sleep</a></li><li><a href="module-Resources_Filters-FilterBase.html#switch_frame">switch_frame</a></li><li><a href="module-Resources_Filters-FilterBase.html#trigger_event">trigger_event</a></li><li><a href="module-Resources_Filters-FilterBase.html#unload">unload</a></li><li><a href="module-Resources_Filters-FilterBase.html#url">url</a></li><li><a href="module-Resources_Filters-FilterBase.html#wait_something">wait_something</a></li></ul></div></li><li><a href="module-Resources_Location-ResourceLocation.html">ResourceLocation</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Location~ResourceLocation_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Location-ResourceLocation.html#_p_base_event">_p_base_event</a></li><li><a href="module-Resources_Location-ResourceLocation.html#onclickafter">onclickafter</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_Location-ResourceLocation.html#destroy">destroy</a></li><li><a href="module-Resources_Location-ResourceLocation.html#force_click">force_click</a></li><li><a href="module-Resources_Location-ResourceLocation.html#generate">generate</a></li><li><a href="module-Resources_Location-ResourceLocation.html#invalid_action">invalid_action</a></li><li><a href="module-Resources_Location-ResourceLocation.html#is_valid">is_valid</a></li><li><a href="module-Resources_Location-ResourceLocation.html#update_and_remove_same_location">update_and_remove_same_location</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.GenerateUniqueResources">GenerateUniqueResources</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.Has">Has</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.Instantiate">Instantiate</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.Max">Max</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.OptionValue">OptionValue</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.PluginName">PluginName</a></li><li><a href="module-Resources_Location-ResourceLocation.html#.SetAttendeeMechanics">SetAttendeeMechanics</a></li></ul></div></li><li><a href="module-Resources_Modal-ResourceDialog.html">ResourceDialog</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/Modal~ResourceDialog_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_Modal-ResourceDialog.html#_listener">_listener</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#all_day">all_day</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#end">end</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#rc_data">rc_data</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#start">start</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_Modal-ResourceDialog.html#_init">_init</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#add_event_listener">add_event_listener</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#add_resource">add_resource</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#add_resources">add_resources</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#change_frame">change_frame</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#cookie_get">cookie_get</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#cookie_remove">cookie_remove</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#cookie_set">cookie_set</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#create_promise">create_promise</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#destroy">destroy</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#generate_loader">generate_loader</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#get_current_page_resource">get_current_page_resource</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#get_env">get_env</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#get_selected_resource">get_selected_resource</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#get_skin">get_skin</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#gettext">gettext</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#have_frame">have_frame</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#http_call">http_call</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#http_internal_call">http_internal_call</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#http_internal_get">http_internal_get</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#http_internal_post">http_internal_post</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#load">load</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#on_refresh">on_refresh</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#rcmail">rcmail</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#save">save</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#select">select</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#select_frame">select_frame</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#select_frame_except">select_frame_except</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#send_notification">send_notification</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#set_date">set_date</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#set_selected_resource">set_selected_resource</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#show">show</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#sleep">sleep</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#switch_frame">switch_frame</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#trigger_event">trigger_event</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#try_init">try_init</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#unload">unload</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#url">url</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#wait_something">wait_something</a></li><li><a href="module-Resources_Modal-ResourceDialog.html#.GetRessourceLocationFormat">GetRessourceLocationFormat</a></li></ul></div></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-FunctionFrom.html">FunctionFrom</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/ResourceBaseFunctions/Functions~FunctionFrom_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_ResourceBaseFunctions_Functions-FunctionFrom.html#call">call</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-FunctionFrom.html#get">get</a></li></ul></div></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html">ResourceBaseFunctions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/ResourceBaseFunctions/Functions~ResourceBaseFunctions_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#event_loader">event_loader</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#event_loader_async">event_loader_async</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#main">main</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_date_changed">on_date_changed</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_date_end_changed">on_date_end_changed</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_date_start_changed">on_date_start_changed</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_resource_label_clicked">on_resource_label_clicked</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_resource_selected">on_resource_selected</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_selected_date">on_selected_date</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_star_clicked">on_star_clicked</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_time_end_changed">on_time_end_changed</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#on_time_start_changed">on_time_start_changed</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceBaseFunctions.html#resource_render">resource_render</a></li></ul></div></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceEvent.html">ResourceEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources/ResourceBaseFunctions/Functions~ResourceEvent_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceEvent.html#end">end</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceEvent.html#resourceId">resourceId</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceEvent.html#start">start</a></li><li><a href="module-Resources_ResourceBaseFunctions_Functions-ResourceEvent.html#title">title</a></li></ul></div></li><li><a href="module-Resources-ResourceSettings.html">ResourceSettings</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources~ResourceSettings_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources-ResourceSettings.html#is">is</a></li><li><a href="module-Resources-ResourceSettings.html#toString">toString</a></li><li><a href="module-Resources-ResourceSettings.html#.ToString">ToString</a></li></ul></div></li><li><a href="module-Resources-ResourcesBase.html">ResourcesBase</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Resources~ResourcesBase_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Resources-ResourcesBase.html#_$calendar">_$calendar</a></li><li><a href="module-Resources-ResourcesBase.html#_functions">_functions</a></li><li><a href="module-Resources-ResourcesBase.html#_init_resources">_init_resources</a></li><li><a href="module-Resources-ResourcesBase.html#_listener">_listener</a></li><li><a href="module-Resources-ResourcesBase.html#_p_endDate">_p_endDate</a></li><li><a href="module-Resources-ResourcesBase.html#_p_endTime">_p_endTime</a></li><li><a href="module-Resources-ResourcesBase.html#_p_events">_p_events</a></li><li><a href="module-Resources-ResourcesBase.html#_p_filters">_p_filters</a></li><li><a href="module-Resources-ResourcesBase.html#_p_internal_data">_p_internal_data</a></li><li><a href="module-Resources-ResourcesBase.html#_p_resources">_p_resources</a></li><li><a href="module-Resources-ResourcesBase.html#_p_startDate">_p_startDate</a></li><li><a href="module-Resources-ResourcesBase.html#_p_startTime">_p_startTime</a></li><li><a href="module-Resources-ResourcesBase.html#all_day">all_day</a></li><li><a href="module-Resources-ResourcesBase.html#end">end</a></li><li><a href="module-Resources-ResourcesBase.html#event_on_save">event_on_save</a></li><li><a href="module-Resources-ResourcesBase.html#location_id">location_id</a></li><li><a href="module-Resources-ResourcesBase.html#rc_data">rc_data</a></li><li><a href="module-Resources-ResourcesBase.html#selected_resource">selected_resource</a></li><li><a href="module-Resources-ResourcesBase.html#start">start</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Resources-ResourcesBase.html#_fetch_resources">_fetch_resources</a></li><li><a href="module-Resources-ResourcesBase.html#_format_resources">_format_resources</a></li><li><a href="module-Resources-ResourcesBase.html#_generate_ui">_generate_ui</a></li><li><a href="module-Resources-ResourcesBase.html#_get">_get</a></li><li><a href="module-Resources-ResourcesBase.html#_on_data_changed">_on_data_changed</a></li><li><a href="module-Resources-ResourcesBase.html#_on_data_loaded">_on_data_loaded</a></li><li><a href="module-Resources-ResourcesBase.html#add_event_listener">add_event_listener</a></li><li><a href="module-Resources-ResourcesBase.html#change_frame">change_frame</a></li><li><a href="module-Resources-ResourcesBase.html#cookie_get">cookie_get</a></li><li><a href="module-Resources-ResourcesBase.html#cookie_remove">cookie_remove</a></li><li><a href="module-Resources-ResourcesBase.html#cookie_set">cookie_set</a></li><li><a href="module-Resources-ResourcesBase.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Resources-ResourcesBase.html#create_page">create_page</a></li><li><a href="module-Resources-ResourcesBase.html#create_promise">create_promise</a></li><li><a href="module-Resources-ResourcesBase.html#generate_loader">generate_loader</a></li><li><a href="module-Resources-ResourcesBase.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Resources-ResourcesBase.html#get_env">get_env</a></li><li><a href="module-Resources-ResourcesBase.html#get_skin">get_skin</a></li><li><a href="module-Resources-ResourcesBase.html#gettext">gettext</a></li><li><a href="module-Resources-ResourcesBase.html#have_frame">have_frame</a></li><li><a href="module-Resources-ResourcesBase.html#http_call">http_call</a></li><li><a href="module-Resources-ResourcesBase.html#http_internal_call">http_internal_call</a></li><li><a href="module-Resources-ResourcesBase.html#http_internal_get">http_internal_get</a></li><li><a href="module-Resources-ResourcesBase.html#http_internal_post">http_internal_post</a></li><li><a href="module-Resources-ResourcesBase.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Resources-ResourcesBase.html#load">load</a></li><li><a href="module-Resources-ResourcesBase.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Resources-ResourcesBase.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Resources-ResourcesBase.html#on_refresh">on_refresh</a></li><li><a href="module-Resources-ResourcesBase.html#rcmail">rcmail</a></li><li><a href="module-Resources-ResourcesBase.html#refresh_calendar_date">refresh_calendar_date</a></li><li><a href="module-Resources-ResourcesBase.html#render">render</a></li><li><a href="module-Resources-ResourcesBase.html#save">save</a></li><li><a href="module-Resources-ResourcesBase.html#select">select</a></li><li><a href="module-Resources-ResourcesBase.html#select_frame">select_frame</a></li><li><a href="module-Resources-ResourcesBase.html#select_frame_except">select_frame_except</a></li><li><a href="module-Resources-ResourcesBase.html#send_notification">send_notification</a></li><li><a href="module-Resources-ResourcesBase.html#sleep">sleep</a></li><li><a href="module-Resources-ResourcesBase.html#switch_frame">switch_frame</a></li><li><a href="module-Resources-ResourcesBase.html#trigger_event">trigger_event</a></li><li><a href="module-Resources-ResourcesBase.html#try_add_resource">try_add_resource</a></li><li><a href="module-Resources-ResourcesBase.html#try_add_resources">try_add_resources</a></li><li><a href="module-Resources-ResourcesBase.html#unload">unload</a></li><li><a href="module-Resources-ResourcesBase.html#url">url</a></li><li><a href="module-Resources-ResourcesBase.html#wait_something">wait_something</a></li></ul></div></li><li><a href="module-Tchap-tchap_manager.html">tchap_manager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Tchap~tchap_manager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Tchap-tchap_manager.html#_listener">_listener</a></li><li><a href="module-Tchap-tchap_manager.html#badge">badge</a></li><li><a href="module-Tchap-tchap_manager.html#contextualMenuBackground">contextualMenuBackground</a></li><li><a href="module-Tchap-tchap_manager.html#disconnectButton">disconnectButton</a></li><li><a href="module-Tchap-tchap_manager.html#leftPanel">leftPanel</a></li><li><a href="module-Tchap-tchap_manager.html#rc_data">rc_data</a></li><li><a href="module-Tchap-tchap_manager.html#settingButton">settingButton</a></li><li><a href="module-Tchap-tchap_manager.html#settingMenuButton">settingMenuButton</a></li><li><a href="module-Tchap-tchap_manager.html#tchapContext">tchapContext</a></li><li><a href="module-Tchap-tchap_manager.html#themeButton">themeButton</a></li><li><a href="module-Tchap-tchap_manager.html#unread">unread</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Tchap-tchap_manager.html#add_event_listener">add_event_listener</a></li><li><a href="module-Tchap-tchap_manager.html#change_frame">change_frame</a></li><li><a href="module-Tchap-tchap_manager.html#change_theme">change_theme</a></li><li><a href="module-Tchap-tchap_manager.html#cookie_get">cookie_get</a></li><li><a href="module-Tchap-tchap_manager.html#cookie_remove">cookie_remove</a></li><li><a href="module-Tchap-tchap_manager.html#cookie_set">cookie_set</a></li><li><a href="module-Tchap-tchap_manager.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Tchap-tchap_manager.html#create_promise">create_promise</a></li><li><a href="module-Tchap-tchap_manager.html#generate_loader">generate_loader</a></li><li><a href="module-Tchap-tchap_manager.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Tchap-tchap_manager.html#get_env">get_env</a></li><li><a href="module-Tchap-tchap_manager.html#get_skin">get_skin</a></li><li><a href="module-Tchap-tchap_manager.html#gettext">gettext</a></li><li><a href="module-Tchap-tchap_manager.html#have_frame">have_frame</a></li><li><a href="module-Tchap-tchap_manager.html#http_call">http_call</a></li><li><a href="module-Tchap-tchap_manager.html#http_internal_call">http_internal_call</a></li><li><a href="module-Tchap-tchap_manager.html#http_internal_get">http_internal_get</a></li><li><a href="module-Tchap-tchap_manager.html#http_internal_post">http_internal_post</a></li><li><a href="module-Tchap-tchap_manager.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Tchap-tchap_manager.html#load">load</a></li><li><a href="module-Tchap-tchap_manager.html#main">main</a></li><li><a href="module-Tchap-tchap_manager.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Tchap-tchap_manager.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Tchap-tchap_manager.html#on_refresh">on_refresh</a></li><li><a href="module-Tchap-tchap_manager.html#rcmail">rcmail</a></li><li><a href="module-Tchap-tchap_manager.html#save">save</a></li><li><a href="module-Tchap-tchap_manager.html#select">select</a></li><li><a href="module-Tchap-tchap_manager.html#select_frame">select_frame</a></li><li><a href="module-Tchap-tchap_manager.html#select_frame_except">select_frame_except</a></li><li><a href="module-Tchap-tchap_manager.html#send_notification">send_notification</a></li><li><a href="module-Tchap-tchap_manager.html#sleep">sleep</a></li><li><a href="module-Tchap-tchap_manager.html#switch_frame">switch_frame</a></li><li><a href="module-Tchap-tchap_manager.html#tchap_disconnect">tchap_disconnect</a></li><li><a href="module-Tchap-tchap_manager.html#tchap_frame">tchap_frame</a></li><li><a href="module-Tchap-tchap_manager.html#tchap_options">tchap_options</a></li><li><a href="module-Tchap-tchap_manager.html#tchap_sidebar">tchap_sidebar</a></li><li><a href="module-Tchap-tchap_manager.html#trigger_event">trigger_event</a></li><li><a href="module-Tchap-tchap_manager.html#unload">unload</a></li><li><a href="module-Tchap-tchap_manager.html#update_badge">update_badge</a></li><li><a href="module-Tchap-tchap_manager.html#url">url</a></li><li><a href="module-Tchap-tchap_manager.html#wait_something">wait_something</a></li></ul></div></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html">ACheckBox</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Abstract/Checkbox~ACheckBox_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#_p_$checkbox">_p_$checkbox</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#check">check</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#disable">disable</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#enable">enable</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#get">get</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#is_checked">is_checked</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#toggle">toggle</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#uncheck">uncheck</a></li><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#value">value</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Visio_Abstract_Checkbox-ACheckBox.html#event:_p_on_change">_p_on_change</a></li></ul></div></li><li><a href="module-Visio_Audio-AudioVisualizer.html">AudioVisualizer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Audio~AudioVisualizer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Audio-AudioVisualizer.html#audioContext">audioContext</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#audioDatas">audioDatas</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#connectStream">connectStream</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#disposed">disposed</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#linkedDevice">linkedDevice</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#processFrame">processFrame</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Audio-AudioVisualizer.html#connectStream">connectStream</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#dispose">dispose</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#initRenderLoop">initRenderLoop</a></li><li><a href="module-Visio_Audio-AudioVisualizer.html#start">start</a></li></ul></div></li><li><a href="module-Visio_Audio-MelAudioManager.html">MelAudioManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Audio~MelAudioManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Audio-MelAudioManager.html#devices">devices</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#disposed">disposed</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#started">started</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#visualElements">visualElements</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Audio-MelAudioManager.html#addButton">addButton</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#addElement">addElement</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#dispose">dispose</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#start">start</a></li><li><a href="module-Visio_Audio-MelAudioManager.html#.processFrame">processFrame</a></li></ul></div></li><li><a href="module-Visio_Audio-MelAudioStruct.html">MelAudioStruct</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Audio~MelAudioStruct_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Audio-MelAudioStruct.html#$main">$main</a></li><li><a href="module-Visio_Audio-MelAudioStruct.html#device">device</a></li><li><a href="module-Visio_Audio-MelAudioStruct.html#disposed">disposed</a></li><li><a href="module-Visio_Audio-MelAudioStruct.html#elements">elements</a></li><li><a href="module-Visio_Audio-MelAudioStruct.html#visualizer">visualizer</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Audio-MelAudioStruct.html#dispose">dispose</a></li><li><a href="module-Visio_Audio-MelAudioStruct.html#generateElements">generateElements</a></li></ul></div></li><li><a href="module-Visio_Core-Visio.html">Visio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Core~Visio_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Core-Visio.html#_call_datas">_call_datas</a></li><li><a href="module-Visio_Core-Visio.html#_token">_token</a></li><li><a href="module-Visio_Core-Visio.html#data">data</a></li><li><a href="module-Visio_Core-Visio.html#jitsii">jitsii</a></li><li><a href="module-Visio_Core-Visio.html#loader">loader</a></li><li><a href="module-Visio_Core-Visio.html#toolbar">toolbar</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Core-Visio.html#_create_toolbar">_create_toolbar</a></li><li><a href="module-Visio_Core-Visio.html#_create_ui">_create_ui</a></li><li><a href="module-Visio_Core-Visio.html#_event_on_audio_change">_event_on_audio_change</a></li><li><a href="module-Visio_Core-Visio.html#_get_jwt">_get_jwt</a></li><li><a href="module-Visio_Core-Visio.html#_init_listeners">_init_listeners</a></li><li><a href="module-Visio_Core-Visio.html#get_call_data">get_call_data</a></li><li><a href="module-Visio_Core-Visio.html#get_visio_url">get_visio_url</a></li><li><a href="module-Visio_Core-Visio.html#main">main</a></li><li><a href="module-Visio_Core-Visio.html#navigatorWarning">navigatorWarning</a></li><li><a href="module-Visio_Core-Visio.html#start">start</a></li></ul></div></li><li><a href="module-Visio_Helper.VisioFunctions.html">VisioFunctions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Helper.VisioFunctions_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Helper.VisioFunctions.html#.CheckKeyIsValid">CheckKeyIsValid</a></li><li><a href="module-Visio_Helper.VisioFunctions.html#.generateWebconfRoomName">generateWebconfRoomName</a></li></ul></div></li><li><a href="module-Visio_Helper.VisioPageManager.html">VisioPageManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Helper.VisioPageManager_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Helper.VisioPageManager.html#.ChangePage">ChangePage</a></li></ul></div></li><li><a href="module-Visio_Helper-BnumVisio.html">BnumVisio</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Helper~BnumVisio_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Helper-BnumVisio.html#getWebconfPhone">getWebconfPhone</a></li><li><a href="module-Visio_Helper-BnumVisio.html#getWebconfPhoneNumber">getWebconfPhoneNumber</a></li><li><a href="module-Visio_Helper-BnumVisio.html#getWebconfPhonePin">getWebconfPhonePin</a></li><li><a href="module-Visio_Helper-BnumVisio.html#main">main</a></li><li><a href="module-Visio_Helper-BnumVisio.html#start">start</a></li><li><a href="module-Visio_Helper-BnumVisio.html#startInstance">startInstance</a></li><li><a href="module-Visio_Helper-BnumVisio.html#voxify_url">voxify_url</a></li></ul></div></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html">JitsiAdaptor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Jitsi~JitsiAdaptor_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#_jitsi">_jitsi</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#_password">_password</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#_add_listener">_add_listener</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#_init_listeners">_init_listeners</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#change_avatar">change_avatar</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_available_devices">get_available_devices</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_current_devices">get_current_devices</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_frame">get_frame</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_micro_and_audio_devices">get_micro_and_audio_devices</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_role">get_role</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_room_infos">get_room_infos</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_rooms_info">get_rooms_info</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_user_id">get_user_id</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#get_video_devices">get_video_devices</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#hangup">hangup</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#has_password">has_password</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#initiate_private_chat">initiate_private_chat</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#is_audio_muted">is_audio_muted</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#is_moderator">is_moderator</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#is_participants_pane_open">is_participants_pane_open</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#is_video_muted">is_video_muted</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#open_virtual_background">open_virtual_background</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#resize_film_strip">resize_film_strip</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#send_message">send_message</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#set_audio_device">set_audio_device</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#set_micro_device">set_micro_device</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#set_participants_pane_state">set_participants_pane_state</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#set_password">set_password</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#set_video_device">set_video_device</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#share_screen">share_screen</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#show_notification">show_notification</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_chat">toggle_chat</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_film_strip">toggle_film_strip</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_hand">toggle_hand</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_micro">toggle_micro</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_participants_pane">toggle_participants_pane</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_tile_view">toggle_tile_view</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#toggle_video">toggle_video</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_audio_mute_status_changed">on_audio_mute_status_changed</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_chat_updated">on_chat_updated</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_film_strip_display_changed">on_film_strip_display_changed</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_mouse_move">on_mouse_move</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_password_required">on_password_required</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_raise_hand_updated">on_raise_hand_updated</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_ready_to_close">on_ready_to_close</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_share_screen_status_changed">on_share_screen_status_changed</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_tile_view_updated">on_tile_view_updated</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_video_conference_joined">on_video_conference_joined</a></li><li><a href="module-Visio_Jitsi-JitsiAdaptor.html#event:on_video_mute_status_changed">on_video_mute_status_changed</a></li></ul></div></li><li><a href="module-Visio_Loader-VisioLoader.html">VisioLoader</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Loader~VisioLoader_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Loader-VisioLoader.html#loader">loader</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Loader-VisioLoader.html#destroy">destroy</a></li><li><a href="module-Visio_Loader-VisioLoader.html#update_text">update_text</a></li></ul></div></li><li><a href="module-Visio_Pages_Index-VisioCreator.html">VisioCreator</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Pages/Index~VisioCreator_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Pages_Index-VisioCreator.html#data">data</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#locks">locks</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#view">view</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Pages_Index-VisioCreator.html#_check_validity">_check_validity</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#_disable">_disable</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#_enable">_enable</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#_on_button_click">_on_button_click</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#get_config">get_config</a></li><li><a href="module-Visio_Pages_Index-VisioCreator.html#main">main</a></li></ul></div></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html">ChannelPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Parts/Channel~ChannelPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Parts_Channel-ChannelPart.html#$field">$field</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#_p_$checkbox">_p_$checkbox</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Parts_Channel-ChannelPart.html#_on_checkbox_change">_on_checkbox_change</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#check">check</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#get">get</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#is_checked">is_checked</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#toggle">toggle</a></li><li><a href="module-Visio_Parts_Channel-ChannelPart.html#uncheck">uncheck</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Visio_Parts_Channel-ChannelPart.html#event:_p_on_change">_p_on_change</a></li></ul></div></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html">PasswordPart</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Parts/PasswordPart~PasswordPart_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#$field">$field</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#_p_$checkbox">_p_$checkbox</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#_on_checkbox_change">_on_checkbox_change</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#check">check</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#get">get</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#is_checked">is_checked</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#toggle">toggle</a></li><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#uncheck">uncheck</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Visio_Parts_PasswordPart-PasswordPart.html#event:_p_on_change">_p_on_change</a></li></ul></div></li><li><a href="module-Visio_Structures_Data-ConfigVisioData.html">ConfigVisioData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Data~ConfigVisioData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Structures_Data-ConfigVisioData.html#channel">channel</a></li><li><a href="module-Visio_Structures_Data-ConfigVisioData.html#key">key</a></li><li><a href="module-Visio_Structures_Data-ConfigVisioData.html#pass">pass</a></li><li><a href="module-Visio_Structures_Data-ConfigVisioData.html#wsp">wsp</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Structures_Data-ConfigVisioData.html#to_ajax_params">to_ajax_params</a></li></ul></div></li><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html">IntegratedVisioData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Data~IntegratedVisioData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html#channel">channel</a></li><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html#key">key</a></li><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html#pass">pass</a></li><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html#wsp">wsp</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Structures_Data-IntegratedVisioData.html#to_ajax_params">to_ajax_params</a></li></ul></div></li><li><a href="module-Visio_Structures_Data-VisioData.html">VisioData</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Data~VisioData_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Structures_Data-VisioData.html#channel">channel</a></li><li><a href="module-Visio_Structures_Data-VisioData.html#key">key</a></li><li><a href="module-Visio_Structures_Data-VisioData.html#pass">pass</a></li><li><a href="module-Visio_Structures_Data-VisioData.html#wsp">wsp</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Structures_Data-VisioData.html#to_ajax_params">to_ajax_params</a></li></ul></div></li><li><a href="module-Visio_Structures_Locks-Locks.html">Locks</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Structures/Locks~Locks_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Structures_Locks-Locks.html#channel">channel</a></li><li><a href="module-Visio_Structures_Locks-Locks.html#password">password</a></li><li><a href="module-Visio_Structures_Locks-Locks.html#room">room</a></li></ul></div></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html">ToolbarPopup</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Toolbar/Popup~ToolbarPopup_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#$content">$content</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#$popup">$popup</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#_generate_toolbar">_generate_toolbar</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#destroy">destroy</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#has_tag">has_tag</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#hide">hide</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#is_show">is_show</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#set_tag">set_tag</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#show">show</a></li><li><a href="module-Visio_Toolbar_Popup-ToolbarPopup.html#update_content">update_content</a></li></ul></div></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html">ToolbarFunctions</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Toolbar~ToolbarFunctions_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#._popup">_popup</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Action_Background">Action_Background</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Action_Phone">Action_Phone</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Action_Security">Action_Security</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Action_Url">Action_Url</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Action_Users">Action_Users</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Camera">Camera</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Camera_0">Camera_0</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Chat">Chat</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Documents">Documents</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Handup">Handup</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Hangup">Hangup</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Mic">Mic</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Mic_0">Mic_0</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Mic_0_Click">Mic_0_Click</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.More">More</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Moz">Moz</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.Share_screen">Share_screen</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#.UpdatePopupDevices">UpdatePopupDevices</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#._Action_Security_OnCheckChanged">_Action_Security_OnCheckChanged</a></li><li><a href="module-Visio_Toolbar-ToolbarFunctions.html#._Action_Security_On_Save">_Action_Security_On_Save</a></li></ul></div></li><li><a href="module-Visio_Toolbar-VisioToolbar.html">VisioToolbar</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Toolbar~VisioToolbar_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Toolbar-VisioToolbar.html#add_existing_item">add_existing_item</a></li><li><a href="module-Visio_Toolbar-VisioToolbar.html#get_button">get_button</a></li><li><a href="module-Visio_Toolbar-VisioToolbar.html#updateToolbarState">updateToolbarState</a></li><li><a href="module-Visio_Toolbar-VisioToolbar.html#updateToolbarStateFromButton">updateToolbarStateFromButton</a></li></ul></div></li><li><a href="module-Visio_Video-MelVideo.html">MelVideo</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Video~MelVideo_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Video-MelVideo.html#$parent">$parent</a></li><li><a href="module-Visio_Video-MelVideo.html#_all_devices">_all_devices</a></li><li><a href="module-Visio_Video-MelVideo.html#device">device</a></li><li><a href="module-Visio_Video-MelVideo.html#size">size</a></li><li><a href="module-Visio_Video-MelVideo.html#started">started</a></li><li><a href="module-Visio_Video-MelVideo.html#video">video</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Video-MelVideo.html#create">create</a></li><li><a href="module-Visio_Video-MelVideo.html#dispose">dispose</a></li><li><a href="module-Visio_Video-MelVideo.html#updateSize">updateSize</a></li><li><a href="module-Visio_Video-MelVideo.html#updateSizePerfect">updateSizePerfect</a></li></ul><div class="member-type">Events</div><ul class="inner"><li><a href="module-Visio_Video-MelVideo.html#event:onbeforecreate">onbeforecreate</a></li><li><a href="module-Visio_Video-MelVideo.html#event:onclick">onclick</a></li><li><a href="module-Visio_Video-MelVideo.html#event:oncreate">oncreate</a></li><li><a href="module-Visio_Video-MelVideo.html#event:ondispose">ondispose</a></li></ul></div></li><li><a href="module-Visio_Video-MelVideoManager.html">MelVideoManager</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Video~MelVideoManager_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Video-MelVideoManager.html#_devices">_devices</a></li><li><a href="module-Visio_Video-MelVideoManager.html#_videos">_videos</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_Video-MelVideoManager.html#addVideo">addVideo</a></li><li><a href="module-Visio_Video-MelVideoManager.html#click">click</a></li><li><a href="module-Visio_Video-MelVideoManager.html#count">count</a></li><li><a href="module-Visio_Video-MelVideoManager.html#create">create</a></li><li><a href="module-Visio_Video-MelVideoManager.html#dispose">dispose</a></li><li><a href="module-Visio_Video-MelVideoManager.html#oncreate">oncreate</a></li><li><a href="module-Visio_Video-MelVideoManager.html#updateSize">updateSize</a></li><li><a href="module-Visio_Video-MelVideoManager.html#updateSizePerfect">updateSizePerfect</a></li></ul></div></li><li><a href="module-Visio_View-VisioView.html">VisioView</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/View~VisioView_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_View-VisioView.html#$room">$room</a></li><li><a href="module-Visio_View-VisioView.html#linked_to">linked_to</a></li><li><a href="module-Visio_View-VisioView.html#password">password</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Visio_View-VisioView.html#value">value</a></li></ul></div></li><li><a href="module-WebComponents_Avatar-AvatarElement.html">AvatarElement</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Avatar~AvatarElement_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_Avatar-AvatarElement.html#$">$</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_email">_email</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_force">_force</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#navigator">navigator</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#onimgload">onimgload</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#onimgloaderror">onimgloaderror</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#.IsLoaded">IsLoaded</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Avatar-AvatarElement.html#_get_style_force">_get_style_force</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_on_error">_on_error</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_on_load">_on_load</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_p_main">_p_main</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#_p_start_construct">_p_start_construct</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#addClass">addClass</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#connectedCallback">connectedCallback</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#createText">createText</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#data">data</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#destroy">destroy</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#disable">disable</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#disconnectedCallback">disconnectedCallback</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#hasClass">hasClass</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#removeClass">removeClass</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#shadowEnabled">shadowEnabled</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#text">text</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#toButton">toButton</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#update_img">update_img</a></li><li><a href="module-WebComponents_Avatar-AvatarElement.html#.Create">Create</a></li></ul></div></li><li><a href="module-WebComponents_Avatar-AvatarEvent.html">AvatarEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Avatar~AvatarEvent_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Avatar-AvatarEvent.html#getReturnData">getReturnData</a></li><li><a href="module-WebComponents_Avatar-AvatarEvent.html#setReturnData">setReturnData</a></li></ul></div></li><li><a href="module-WebComponents_Avatar-AvatarLoadEvent.html">AvatarLoadEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Avatar~AvatarLoadEvent_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Avatar-AvatarLoadEvent.html#avatar">avatar</a></li><li><a href="module-WebComponents_Avatar-AvatarLoadEvent.html#getReturnData">getReturnData</a></li><li><a href="module-WebComponents_Avatar-AvatarLoadEvent.html#image">image</a></li><li><a href="module-WebComponents_Avatar-AvatarLoadEvent.html#setReturnData">setReturnData</a></li></ul></div></li><li><a href="module-WebComponents_Avatar-AvatarNotLoadEvent.html">AvatarNotLoadEvent</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Avatar~AvatarNotLoadEvent_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Avatar-AvatarNotLoadEvent.html#avatar">avatar</a></li><li><a href="module-WebComponents_Avatar-AvatarNotLoadEvent.html#getReturnData">getReturnData</a></li><li><a href="module-WebComponents_Avatar-AvatarNotLoadEvent.html#setReturnData">setReturnData</a></li><li><a href="module-WebComponents_Avatar-AvatarNotLoadEvent.html#stop">stop</a></li></ul></div></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html">BnumHtmlIcon</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Base~BnumHtmlIcon_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#$">$</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#navigator">navigator</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#.Arrow">Arrow</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#.Chevron">Chevron</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#.HTML_CLASS">HTML_CLASS</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#_p_main">_p_main</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#_p_start_construct">_p_start_construct</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#addClass">addClass</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#connectedCallback">connectedCallback</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#createText">createText</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#data">data</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#destroy">destroy</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#disable">disable</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#disconnectedCallback">disconnectedCallback</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#hasClass">hasClass</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#removeClass">removeClass</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#shadowEnabled">shadowEnabled</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#text">text</a></li><li><a href="module-WebComponents_Base-BnumHtmlIcon.html#toButton">toButton</a></li></ul></div></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html">HtmlCustomTag</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/Base~HtmlCustomTag_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_Base-HtmlCustomTag.html#$">$</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#navigator">navigator</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#._p_text_callback">_p_text_callback</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_Base-HtmlCustomTag.html#_p_main">_p_main</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#_p_start_construct">_p_start_construct</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#addClass">addClass</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#connectedCallback">connectedCallback</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#createText">createText</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#data">data</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#destroy">destroy</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#disable">disable</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#disconnectedCallback">disconnectedCallback</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#hasClass">hasClass</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#removeClass">removeClass</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#shadowEnabled">shadowEnabled</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#text">text</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#toButton">toButton</a></li><li><a href="module-WebComponents_Base-HtmlCustomTag.html#.SetTextCallback">SetTextCallback</a></li></ul></div></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html">InfiniteScrollContainer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:WebComponents/InfiniteScrollContainer~InfiniteScrollContainer_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#$">$</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_countMax">_countMax</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_scrollspace">_scrollspace</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#navigator">navigator</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#onscrolledtoend">onscrolledtoend</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#.TAG">TAG</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_get_count_max">_get_count_max</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_get_data_on_scroll">_get_data_on_scroll</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_on_scroll">_on_scroll</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_p_main">_p_main</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#_p_start_construct">_p_start_construct</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#addClass">addClass</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#connectedCallback">connectedCallback</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#createText">createText</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#data">data</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#destroy">destroy</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#disable">disable</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#disconnectedCallback">disconnectedCallback</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#hasClass">hasClass</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#removeClass">removeClass</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#shadowEnabled">shadowEnabled</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#text">text</a></li><li><a href="module-WebComponents_InfiniteScrollContainer-InfiniteScrollContainer.html#toButton">toButton</a></li></ul></div></li><li><a href="module-Workspace_Index-IndexWorkspace.html">IndexWorkspace</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Workspace/Index~IndexWorkspace_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Workspace_Index-IndexWorkspace.html#_container">_container</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_listener">_listener</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#rc_data">rc_data</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Workspace_Index-IndexWorkspace.html#_container_resize">_container_resize</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_event_button_pressed">_event_button_pressed</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_event_search_reset">_event_search_reset</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_get_count_max">_get_count_max</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_init_buttons_data">_init_buttons_data</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_mine_search">_mine_search</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_on_resize">_on_resize</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_p_$disable">_p_$disable</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_p_$enable">_p_$enable</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_public_search">_public_search</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_public_search_data">_public_search_data</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_reorder">_reorder</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_search">_search</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_search_busy">_search_busy</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_search_not_busy">_search_not_busy</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_set_blocks_listeners">_set_blocks_listeners</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#_set_listeners">_set_listeners</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#add_event_listener">add_event_listener</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#change_frame">change_frame</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#cookie_get">cookie_get</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#cookie_remove">cookie_remove</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#cookie_set">cookie_set</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#copy_to_clipboard">copy_to_clipboard</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#create_promise">create_promise</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#generate_loader">generate_loader</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#get_custom_rules">get_custom_rules</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#get_env">get_env</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#get_skin">get_skin</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#gettext">gettext</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#have_frame">have_frame</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#http_call">http_call</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#http_internal_call">http_internal_call</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#http_internal_get">http_internal_get</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#http_internal_post">http_internal_post</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#isNullOrUndefined">isNullOrUndefined</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#load">load</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#main">main</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#on_frame_loaded">on_frame_loaded</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#on_frame_refresh">on_frame_refresh</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#on_refresh">on_refresh</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#rcmail">rcmail</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#save">save</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#select">select</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#select_frame">select_frame</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#select_frame_except">select_frame_except</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#send_notification">send_notification</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#sleep">sleep</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#switch_frame">switch_frame</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#trigger_event">trigger_event</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#unload">unload</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#url">url</a></li><li><a href="module-Workspace_Index-IndexWorkspace.html#wait_something">wait_something</a></li></ul></div></li><li><a href="module-Workspace_Object-WorkspaceUsers.html">WorkspaceUsers</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Workspace/Object~WorkspaceUsers_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="module-Workspace_Object-WorkspaceUsers.html#get">get</a></li><li><a href="module-Workspace_Object-WorkspaceUsers.html#toArray">toArray</a></li></ul></div></li><li><a href="rcube_layer.html">rcube_layer</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="rcube_layer_sub"></div></li><li><a href="rcube_list_widget.html">rcube_list_widget</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="rcube_list_widget_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="rcube_list_widget.html#container">container</a></li></ul><div class="member-type">Methods</div><ul class="inner"><li><a href="rcube_list_widget.html#_rowIndex">_rowIndex</a></li><li><a href="rcube_list_widget.html#add_dragfix">add_dragfix</a></li><li><a href="rcube_list_widget.html#blur">blur</a></li><li><a href="rcube_list_widget.html#clear">clear</a></li><li><a href="rcube_list_widget.html#clear">clear</a></li><li><a href="rcube_list_widget.html#clear_selection">clear_selection</a></li><li><a href="rcube_list_widget.html#click_row">click_row</a></li><li><a href="rcube_list_widget.html#column_drag_mouse_move">column_drag_mouse_move</a></li><li><a href="rcube_list_widget.html#column_drag_mouse_up">column_drag_mouse_up</a></li><li><a href="rcube_list_widget.html#column_replace">column_replace</a></li><li><a href="rcube_list_widget.html#del_dragfix">del_dragfix</a></li><li><a href="rcube_list_widget.html#drag_column">drag_column</a></li><li><a href="rcube_list_widget.html#drag_mouse_move">drag_mouse_move</a></li><li><a href="rcube_list_widget.html#drag_mouse_up">drag_mouse_up</a></li><li><a href="rcube_list_widget.html#drag_row">drag_row</a></li><li><a href="rcube_list_widget.html#enable_checkbox_selection">enable_checkbox_selection</a></li><li><a href="rcube_list_widget.html#focus">focus</a></li><li><a href="rcube_list_widget.html#focus_noscroll">focus_noscroll</a></li><li><a href="rcube_list_widget.html#get_next_row">get_next_row</a></li><li><a href="rcube_list_widget.html#get_selection">get_selection</a></li><li><a href="rcube_list_widget.html#get_single_selection">get_single_selection</a></li><li><a href="rcube_list_widget.html#hide_column">hide_column</a></li><li><a href="rcube_list_widget.html#highlight_children">highlight_children</a></li><li><a href="rcube_list_widget.html#highlight_row">highlight_row</a></li><li><a href="rcube_list_widget.html#in_selection">in_selection</a></li><li><a href="rcube_list_widget.html#init">init</a></li><li><a href="rcube_list_widget.html#init_header">init_header</a></li><li><a href="rcube_list_widget.html#init_row">init_row</a></li><li><a href="rcube_list_widget.html#insert_checkbox">insert_checkbox</a></li><li><a href="rcube_list_widget.html#insert_row">insert_row</a></li><li><a href="rcube_list_widget.html#invert_selection">invert_selection</a></li><li><a href="rcube_list_widget.html#is_event_target">is_event_target</a></li><li><a href="rcube_list_widget.html#key_press">key_press</a></li><li><a href="rcube_list_widget.html#remove_row">remove_row</a></li><li><a href="rcube_list_widget.html#row_children">row_children</a></li><li><a href="rcube_list_widget.html#scrollto">scrollto</a></li><li><a href="rcube_list_widget.html#select">select</a></li><li><a href="rcube_list_widget.html#select_all">select_all</a></li><li><a href="rcube_list_widget.html#select_children">select_children</a></li><li><a href="rcube_list_widget.html#select_first">select_first</a></li><li><a href="rcube_list_widget.html#select_last">select_last</a></li><li><a href="rcube_list_widget.html#select_next">select_next</a></li><li><a href="rcube_list_widget.html#select_row">select_row</a></li><li><a href="rcube_list_widget.html#shift_select">shift_select</a></li><li><a href="rcube_list_widget.html#update_row">update_row</a></li><li><a href="rcube_list_widget.html#use_arrow_key">use_arrow_key</a></li></ul></div></li><li><a href="rcube_splitter.html">rcube_splitter</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="rcube_splitter_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="rcube_splitter.html#get_cookie">get_cookie</a></li><li><a href="rcube_splitter.html#resize">resize</a></li><li><a href="rcube_splitter.html#resize">resize</a></li><li><a href="rcube_splitter.html#set_cookie">set_cookie</a></li><li><a href="rcube_splitter.html#set_cookie">set_cookie</a></li><li><a href="rcube_splitter.html#~onDrag">onDrag</a></li><li><a href="rcube_splitter.html#~onDrag">onDrag</a></li><li><a href="rcube_splitter.html#~onDragAction">onDragAction</a></li><li><a href="rcube_splitter.html#~onDragStart">onDragStart</a></li><li><a href="rcube_splitter.html#~onDragStart">onDragStart</a></li><li><a href="rcube_splitter.html#~onDragStop">onDragStop</a></li><li><a href="rcube_splitter.html#~onDragStop">onDragStop</a></li><li><a href="rcube_splitter.html#~onResize">onResize</a></li><li><a href="rcube_splitter.html#~onResize">onResize</a></li></ul></div></li><li><a href="rcube_text_editor.html">rcube_text_editor</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="rcube_text_editor_sub"></div></li><li><a href="rcube_treelist_widget.html">rcube_treelist_widget</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="rcube_treelist_widget_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="rcube_treelist_widget.html#~collapse">collapse</a></li><li><a href="rcube_treelist_widget.html#~collapse_all">collapse_all</a></li><li><a href="rcube_treelist_widget.html#~dom2id">dom2id</a></li><li><a href="rcube_treelist_widget.html#~drag_end">drag_end</a></li><li><a href="rcube_treelist_widget.html#~drag_scroll">drag_scroll</a></li><li><a href="rcube_treelist_widget.html#~drag_start">drag_start</a></li><li><a href="rcube_treelist_widget.html#~draggable">draggable</a></li><li><a href="rcube_treelist_widget.html#~droppable">droppable</a></li><li><a href="rcube_treelist_widget.html#~expand">expand</a></li><li><a href="rcube_treelist_widget.html#~expand_all">expand_all</a></li><li><a href="rcube_treelist_widget.html#~focus_noscroll">focus_noscroll</a></li><li><a href="rcube_treelist_widget.html#~get_item">get_item</a></li><li><a href="rcube_treelist_widget.html#~get_node">get_node</a></li><li><a href="rcube_treelist_widget.html#~get_selection">get_selection</a></li><li><a href="rcube_treelist_widget.html#~get_state">get_state</a></li><li><a href="rcube_treelist_widget.html#~id2dom">id2dom</a></li><li><a href="rcube_treelist_widget.html#~in_selection">in_selection</a></li><li><a href="rcube_treelist_widget.html#~index_data">index_data</a></li><li><a href="rcube_treelist_widget.html#~insert">insert</a></li><li><a href="rcube_treelist_widget.html#~intersects">intersects</a></li><li><a href="rcube_treelist_widget.html#~is_search">is_search</a></li><li><a href="rcube_treelist_widget.html#~keypress">keypress</a></li><li><a href="rcube_treelist_widget.html#~remove">remove</a></li><li><a href="rcube_treelist_widget.html#~render">render</a></li><li><a href="rcube_treelist_widget.html#~render_node">render_node</a></li><li><a href="rcube_treelist_widget.html#~reset">reset</a></li><li><a href="rcube_treelist_widget.html#~reset_search">reset_search</a></li><li><a href="rcube_treelist_widget.html#~resort_node">resort_node</a></li><li><a href="rcube_treelist_widget.html#~save_state">save_state</a></li><li><a href="rcube_treelist_widget.html#~scroll_to_node">scroll_to_node</a></li><li><a href="rcube_treelist_widget.html#~search">search</a></li><li><a href="rcube_treelist_widget.html#~select">select</a></li><li><a href="rcube_treelist_widget.html#~toggle">toggle</a></li><li><a href="rcube_treelist_widget.html#~update_data">update_data</a></li><li><a href="rcube_treelist_widget.html#~update_dom">update_dom</a></li><li><a href="rcube_treelist_widget.html#~update_node">update_node</a></li><li><a href="rcube_treelist_widget.html#~walk_list">walk_list</a></li></ul></div></li><li><a href="roundcube_browser.html">roundcube_browser</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="roundcube_browser_sub"></div></li><li><a href="search.html">search</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="search_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="search.html#_addBlock">_addBlock</a></li><li><a href="search.html#_filter_action">_filter_action</a></li><li><a href="search.html#_launch_timeout">_launch_timeout</a></li><li><a href="search.html#_search">_search</a></li><li><a href="search.html#_showDatas">_showDatas</a></li><li><a href="search.html#count">count</a></li><li><a href="search.html#filter">filter</a></li><li><a href="search.html#init">init</a></li><li><a href="search.html#order">order</a></li><li><a href="search.html#research">research</a></li><li><a href="search.html#setup">setup</a></li></ul></div></li><li><a href="searchBlock.html">searchBlock</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="searchBlock_sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Mixins</h3><ul><li><a href="module-Visio_Configs-VisioConfigs.html">VisioConfigs</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Configs~VisioConfigs_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Configs-VisioConfigs.html#.url">url</a></li><li><a href="module-Visio_Configs-VisioConfigs.html#.voxify">voxify</a></li></ul></div></li><li><a href="module-Visio_Configs-VoxifyConfig.html">VoxifyConfig</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="module:Visio/Configs~VoxifyConfig_sub"><div class="member-type">Members</div><ul class="inner"><li><a href="module-Visio_Configs-VoxifyConfig.html#.indicatif">indicatif</a></li><li><a href="module-Visio_Configs-VoxifyConfig.html#.url">url</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Externals</h3><ul><li><a href="external-_jQuery_.html">jQuery</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="external:_jQuery__sub"></div></li><li><a href="external-_moment_.html">moment</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="external:_moment__sub"></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li class="hidden"><a href="global.html#Bounding">Bounding</a></li><li><a href="global.html#CLASS_AVATAR">CLASS_AVATAR</a></li><li><a href="global.html#COLOR_BLACK">COLOR_BLACK</a></li><li><a href="global.html#COLOR_WHITE">COLOR_WHITE</a></li><li class="hidden"><a href="global.html#CalendarLoaderWrapper">CalendarLoaderWrapper</a></li><li class="hidden"><a href="global.html#ChatStatus">ChatStatus</a></li><li><a href="global.html#EFileType">EFileType</a></li><li><a href="global.html#EIconPositions">EIconPositions</a></li><li class="hidden"><a href="global.html#Edges">Edges</a></li><li><a href="global.html#Enum%25C3%25A9ration">Enumration</a></li><li class="hidden"><a href="global.html#EventClickCallback">EventClickCallback</a></li><li class="hidden"><a href="global.html#EventHoverCallback">EventHoverCallback</a></li><li class="hidden"><a href="global.html#EventMouseEnterCallback">EventMouseEnterCallback</a></li><li class="hidden"><a href="global.html#EventMouseLeaveCallback">EventMouseLeaveCallback</a></li><li class="hidden"><a href="global.html#EventSourceCallback">EventSourceCallback</a></li><li class="hidden"><a href="global.html#FrameManagerNoModuleHelper">FrameManagerNoModuleHelper</a></li><li class="hidden"><a href="global.html#FullCalendarEvent">FullCalendarEvent</a></li><li class="hidden"><a href="global.html#FullCalendarResource">FullCalendarResource</a></li><li><a href="global.html#GOOGIE_CUR_LANG">GOOGIE_CUR_LANG</a></li><li class="hidden"><a href="global.html#HasCallback">HasCallback</a></li><li class="hidden"><a href="global.html#Key">Key</a></li><li class="hidden"><a href="global.html#ListenerSetterAfterFunction">ListenerSetterAfterFunction</a></li><li class="hidden"><a href="global.html#ListenerSetterBeforeFunction">ListenerSetterBeforeFunction</a></li><li class="hidden"><a href="global.html#ListenersSetter">ListenersSetter</a></li><li class="hidden"><a href="global.html#LoadFrameManagerCallback">LoadFrameManagerCallback</a></li><li class="hidden"><a href="global.html#MelNotification">MelNotification</a></li><li class="hidden"><a href="global.html#MelPromiseCallback">MelPromiseCallback</a></li><li><a href="global.html#Mode">Mode</a></li><li><a href="global.html#Nextcloud">Nextcloud</a></li><li><a href="global.html#Nombres">Nombres</a></li><li class="hidden"><a href="global.html#OnAfterSwitchCallback">OnAfterSwitchCallback</a></li><li class="hidden"><a href="global.html#OnBeforeSwitchCallback">OnBeforeSwitchCallback</a></li><li><a href="global.html#PDFFindBar">PDFFindBar</a></li><li><a href="global.html#PDFFindController">PDFFindController</a></li><li><a href="global.html#PageManager">PageManager</a></li><li><a href="global.html#Plugin">Plugin</a></li><li class="hidden"><a href="global.html#ResourceConfigObject">ResourceConfigObject</a></li><li><a href="global.html#RoundriveCreate">RoundriveCreate</a></li><li><a href="global.html#SELECTOR_CLASS_ROUND_CALENDAR">SELECTOR_CLASS_ROUND_CALENDAR</a></li><li><a href="global.html#STYLE_AVATAR">STYLE_AVATAR</a></li><li class="hidden"><a href="global.html#ServiceChannel">ServiceChannel</a></li><li class="hidden"><a href="global.html#ServiceTchapChannel">ServiceTchapChannel</a></li><li class="hidden"><a href="global.html#SwitchFrameCallback">SwitchFrameCallback</a></li><li><a href="global.html#TextLayerBuilder">TextLayerBuilder</a></li><li><a href="global.html#Tri">Tri</a></li><li class="hidden"><a href="global.html#Tt">Tt</a></li><li><a href="global.html#URL">URL</a></li><li><a href="global.html#ViewHistory">ViewHistory</a></li><li class="hidden"><a href="global.html#WaitCallback">WaitCallback</a></li><li class="hidden"><a href="global.html#WaitCallbackAsync">WaitCallbackAsync</a></li><li class="hidden"><a href="global.html#WorkspaceDataService">WorkspaceDataService</a></li><li><a href="global.html#_on_mention_update">_on_mention_update</a></li><li><a href="global.html#api_notifications">api_notifications</a></li><li><a href="global.html#audio_alarms">audio_alarms</a></li><li><a href="global.html#base_color">base_color</a></li><li><a href="global.html#base_text_color">base_text_color</a></li><li><a href="global.html#callback">callback</a></li><li><a href="global.html#cancelModifyComment">cancelModifyComment</a></li><li><a href="global.html#checkAllIdentities">checkAllIdentities</a></li><li><a href="global.html#checkOneIdentity">checkOneIdentity</a></li><li class="hidden"><a href="global.html#chip">chip</a></li><li><a href="global.html#command_parapheur">command_parapheur</a></li><li><a href="global.html#componentToHex">componentToHex</a></li><li><a href="global.html#copy_signature">copy_signature</a></li><li><a href="global.html#createImage">createImage</a></li><li><a href="global.html#createLogo">createLogo</a></li><li><a href="global.html#createLogoType">createLogoType</a></li><li><a href="global.html#current_desktop_notification">current_desktop_notification</a></li><li><a href="global.html#date2ISO8601">date2ISO8601</a></li><li><a href="global.html#date2unixtime">date2unixtime</a></li><li><a href="global.html#datetimepickerFactory">datetimepickerFactory</a></li><li><a href="global.html#default_note_uid">default_note_uid</a></li><li><a href="global.html#delay">delay</a></li><li><a href="global.html#deleteComment">deleteComment</a></li><li><a href="global.html#dialog">dialog</a></li><li><a href="global.html#dismiss_alarm">dismiss_alarm</a></li><li><a href="global.html#displayComments">displayComments</a></li><li><a href="global.html#display_alarms">display_alarms</a></li><li><a href="global.html#docReady">docReady</a></li><li><a href="global.html#download">download</a></li><li><a href="global.html#download_signature_outlook_htm">download_signature_outlook_htm</a></li><li><a href="global.html#download_signature_outlook_zip">download_signature_outlook_zip</a></li><li><a href="global.html#download_signature_thunderbird">download_signature_thunderbird</a></li><li><a href="global.html#eMessageType">eMessageType</a></li><li><a href="global.html#enum_tooltip_mode">enum_tooltip_mode</a></li><li><a href="global.html#enum_tooltip_position">enum_tooltip_position</a></li><li><a href="global.html#ev_calendar_url">ev_calendar_url</a></li><li><a href="global.html#event_date_text">event_date_text</a></li><li><a href="global.html#fluxhtml">fluxhtml</a></li><li><a href="global.html#fluxrss">fluxrss</a></li><li><a href="global.html#folder_collapse">folder_collapse</a></li><li><a href="global.html#folder_collapse_unified">folder_collapse_unified</a></li><li><a href="global.html#folder_count">folder_count</a></li><li><a href="global.html#folder_count_unified">folder_count_unified</a></li><li><a href="global.html#folder_expand">folder_expand</a></li><li><a href="global.html#formatPhoneNumber">formatPhoneNumber</a></li><li><a href="global.html#format_datetime">format_datetime</a></li><li><a href="global.html#format_time">format_time</a></li><li><a href="global.html#fromunixtime">fromunixtime</a></li><li><a href="global.html#getCommentByPost">getCommentByPost</a></li><li><a href="global.html#getOutputScale">getOutputScale</a></li><li><a href="global.html#getPDFFileNameFromURL">getPDFFileNameFromURL</a></li><li><a href="global.html#getSignatureHTML">getSignatureHTML</a></li><li><a href="global.html#getTime">getTime</a></li><li><a href="global.html#get_organizer">get_organizer</a></li><li><a href="global.html#has_attendees">has_attendees</a></li><li><a href="global.html#has_permission">has_permission</a></li><li><a href="global.html#imgError">imgError</a></li><li><a href="global.html#init_recurrence_edit">init_recurrence_edit</a></li><li><a href="global.html#init_time_autocomplete">init_time_autocomplete</a></li><li><a href="global.html#isAsync">isAsync</a></li><li><a href="global.html#is_attendee">is_attendee</a></li><li><a href="global.html#is_internal_organizer">is_internal_organizer</a></li><li><a href="global.html#is_organizer">is_organizer</a></li><li><a href="global.html#libkolab_audittrail">libkolab_audittrail</a></li><li><a href="global.html#loader">loader</a></li><li><a href="global.html#m_mp_Create">m_mp_Create</a></li><li><a href="global.html#m_mp_CreateDocumentIconContract">m_mp_CreateDocumentIconContract</a></li><li><a href="global.html#m_mp_CreateEvent">m_mp_CreateEvent</a></li><li><a href="global.html#m_mp_CreateEvent_inpage">m_mp_CreateEvent_inpage</a></li><li><a href="global.html#m_mp_CreateOrOpenFrame">m_mp_CreateOrOpenFrame</a></li><li><a href="global.html#m_mp_Help">m_mp_Help</a></li><li><a href="global.html#m_mp_InitializeDocument">m_mp_InitializeDocument</a></li><li><a href="global.html#m_mp_NotificationFilter">m_mp_NotificationFilter</a></li><li><a href="global.html#m_mp_NotificationGetDate">m_mp_NotificationGetDate</a></li><li><a href="global.html#m_mp_NotificationGetElement">m_mp_NotificationGetElement</a></li><li><a href="global.html#m_mp_NotificationProcess">m_mp_NotificationProcess</a></li><li><a href="global.html#m_mp_NotificationProcessAfterAction">m_mp_NotificationProcessAfterAction</a></li><li><a href="global.html#m_mp_NotificationRefresh">m_mp_NotificationRefresh</a></li><li><a href="global.html#m_mp_NotificationRun">m_mp_NotificationRun</a></li><li><a href="global.html#m_mp_NotificationSettings">m_mp_NotificationSettings</a></li><li><a href="global.html#m_mp_NotificationStartup">m_mp_NotificationStartup</a></li><li><a href="global.html#m_mp_NotificationsAction">m_mp_NotificationsAction</a></li><li><a href="global.html#m_mp_NotificationsAppendFilters">m_mp_NotificationsAppendFilters</a></li><li><a href="global.html#m_mp_NotificationsAppendToPanel">m_mp_NotificationsAppendToPanel</a></li><li><a href="global.html#m_mp_NotificationsClean">m_mp_NotificationsClean</a></li><li><a href="global.html#m_mp_NotificationsDelete">m_mp_NotificationsDelete</a></li><li><a href="global.html#m_mp_NotificationsGet">m_mp_NotificationsGet</a></li><li><a href="global.html#m_mp_NotificationsMerge">m_mp_NotificationsMerge</a></li><li><a href="global.html#m_mp_NotificationsRefreshUnread">m_mp_NotificationsRefreshUnread</a></li><li><a href="global.html#m_mp_NotificationsSet">m_mp_NotificationsSet</a></li><li><a href="global.html#m_mp_NotificationsShowUnread">m_mp_NotificationsShowUnread</a></li><li><a href="global.html#m_mp_NotificationsSort">m_mp_NotificationsSort</a></li><li><a href="global.html#m_mp_OpenTask">m_mp_OpenTask</a></li><li><a href="global.html#m_mp_RizomoRefreshNotifications">m_mp_RizomoRefreshNotifications</a></li><li><a href="global.html#m_mp_ShowDesktopNotification">m_mp_ShowDesktopNotification</a></li><li><a href="global.html#m_mp_ShowNotification">m_mp_ShowNotification</a></li><li><a href="global.html#m_mp_ToggleGroupOptionsUser">m_mp_ToggleGroupOptionsUser</a></li><li><a href="global.html#m_mp_UpdateCreateDoc">m_mp_UpdateCreateDoc</a></li><li><a href="global.html#m_mp_action_from_storage">m_mp_action_from_storage</a></li><li><a href="global.html#m_mp_anchor_ariane">m_mp_anchor_ariane</a></li><li><a href="global.html#m_mp_close_ariane">m_mp_close_ariane</a></li><li><a href="global.html#m_mp_full_screen_ariane">m_mp_full_screen_ariane</a></li><li><a href="global.html#m_mp_get_all_hashtag">m_mp_get_all_hashtag</a></li><li><a href="global.html#m_mp_help_video">m_mp_help_video</a></li><li><a href="global.html#m_mp_set_storage">m_mp_set_storage</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#mel_metapage">mel_metapage</a></li><li><a href="global.html#mel_shortcuts_press">mel_shortcuts_press</a></li><li><a href="global.html#mm_s_Action">mm_s_Action</a></li><li><a href="global.html#mm_s_AfficheResults">mm_s_AfficheResults</a></li><li><a href="global.html#mm_s_CreateOrUpdateFrame">mm_s_CreateOrUpdateFrame</a></li><li><a href="global.html#mm_s_OnClick">mm_s_OnClick</a></li><li><a href="global.html#mm_s_bodyClick">mm_s_bodyClick</a></li><li><a href="global.html#mm_s_extend">mm_s_extend</a></li><li><a href="global.html#modify_signature">modify_signature</a></li><li><a href="global.html#multi_thread_http_request">multi_thread_http_request</a></li><li><a href="global.html#noContextMenuHandler">noContextMenuHandler</a></li><li><a href="global.html#onInputChange">onInputChange</a></li><li><a href="global.html#onLoaded">onLoaded</a></li><li><a href="global.html#open_dialog">open_dialog</a></li><li><a href="global.html#parseISO8601">parseISO8601</a></li><li><a href="global.html#parse_datetime">parse_datetime</a></li><li><a href="global.html#plugin_text">plugin_text</a></li><li><a href="global.html#quote_html">quote_html</a></li><li><a href="global.html#rcm_tb_label_insert">rcm_tb_label_insert</a></li><li><a href="global.html#rcm_tb_label_submenu">rcm_tb_label_submenu</a></li><li><a href="global.html#rcmail_scroller">rcmail_scroller</a></li><li><a href="global.html#rcube_event_engine">rcube_event_engine</a></li><li><a href="global.html#rcube_init_settings_tabs">rcube_init_settings_tabs</a></li><li><a href="global.html#rcube_libcalendaring">rcube_libcalendaring</a></li><li><a href="global.html#rcube_mail_ui">rcube_mail_ui</a></li><li><a href="global.html#rcube_scroller">rcube_scroller</a></li><li><a href="global.html#rcube_tasklist">rcube_tasklist</a></li><li><a href="global.html#rcube_tasklist_ui">rcube_tasklist_ui</a></li><li><a href="global.html#rcube_webmail">rcube_webmail</a></li><li><a href="global.html#rgbToHex">rgbToHex</a></li><li><a href="global.html#saveComment">saveComment</a></li><li><a href="global.html#saveReply">saveReply</a></li><li><a href="global.html#save_option">save_option</a></li><li><a href="global.html#save_response">save_response</a></li><li><a href="global.html#scrollIntoView">scrollIntoView</a></li><li><a href="global.html#send_francetransfert_message">send_francetransfert_message</a></li><li><a href="global.html#send_melanissimo_message">send_melanissimo_message</a></li><li><a href="global.html#send_with_francetransfert">send_with_francetransfert</a></li><li><a href="global.html#send_with_melanissimo">send_with_melanissimo</a></li><li><a href="global.html#serialize_recurrence">serialize_recurrence</a></li><li><a href="global.html#set_recurrence_edit">set_recurrence_edit</a></li><li><a href="global.html#set_title">set_title</a></li><li><a href="global.html#settings_da_set_email_recup">settings_da_set_email_recup</a></li><li><a href="global.html#show_password_change">show_password_change</a></li><li><a href="global.html#show_rcube_manage_labels">show_rcube_manage_labels</a></li><li><a href="global.html#snooze_dropdown">snooze_dropdown</a></li><li><a href="global.html#tasklist_options_menu">tasklist_options_menu</a></li><li><a href="global.html#text2html">text2html</a></li><li><a href="global.html#text_color">text_color</a></li><li><a href="global.html#toggleModifyComment">toggleModifyComment</a></li><li><a href="global.html#trigger">trigger</a></li><li><a href="global.html#unlock_saving">unlock_saving</a></li><li><a href="global.html#use_signature">use_signature</a></li><li><a href="global.html#validate_message">validate_message</a></li><li><a href="global.html#value">value</a></li><li><a href="global.html#wait">wait</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Roundcube Webmail Client Script
 *
 * This file is part of the Roundcube Webmail client
 *
 * @licstart  The following is the entire license notice for the
 * JavaScript code in this file.
 *
 * Copyright (C) The Roundcube Dev Team
 * Copyright (C) Kolab Systems AG
 *
 * The JavaScript code in this page is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in this file.
 *
 * @author Thomas Bruederli &lt;roundcube@gmail.com>
 * @author Aleksander 'A.L.E.C' Machniak &lt;alec@alec.pl>
 * @author Charles McNulty &lt;charles@charlesmcnulty.com>
 *
 * @requires jquery.js, common.js, list.js
 */

function rcube_webmail()
{
  this.labels = {};
  this.buttons = {};
  this.buttons_sel = {};
  this.gui_objects = {};
  this.gui_containers = {};
  this.commands = {};
  this.command_handlers = {};
  this.onloads = [];
  this.messages = {};
  this.group2expand = {};
  this.http_request_jobs = {};
  this.menu_stack = [];
  this.menu_buttons = {};
  this.entity_selectors = [];
  this.image_style = {};
  this.uploads = {};

  // webmail client settings
  this.dblclick_time = 500;
  this.message_time = 5000;
  this.preview_delay_select = 400;
  this.preview_delay_click  = 60;
  this.identifier_expr = /[^0-9a-z_-]/gi;
  this.uploadTimeout = 0; // 0 = no timeout | ajax call timeout for loading attachment


  // environment defaults
  this.env = {
    attachments: {},
    request_timeout: 180,  // seconds
    draft_autosave: 0,     // seconds
    comm_path: './',
    recipients_separator: ',', // @deprecated
    recipients_delimiter: ', ', // @deprecated
    popup_width: 1150,
    popup_width_small: 900,
    thread_padding: '15px'
  };

  // create protected reference to myself
  this.ref = 'rcmail';
  var ref = this;

  // set jQuery ajax options
  $.ajaxSetup({
    cache: false,
    timeout: this.env.request_timeout * 1000,
    error: function(request, status, err){ ref.http_error(request, status, err); },
    beforeSend: function(xmlhttp){ 
      //PAMELA
      if (window.disable_x_roundcube === true) return;
      else xmlhttp.setRequestHeader('X-Roundcube-Request', ref.env.request_token);
     }

  });

  // unload fix
  $(window).on('beforeunload', function() { ref.unload = true; });

  // set environment variable(s)
  this.set_env = function(p, value)
  {
    if (p != null &amp;&amp; typeof p === 'object' &amp;&amp; !value)
      for (var n in p)
        this.env[n] = p[n];
    else
      this.env[p] = value;
  };

  // add a localized label to the client environment
  this.add_label = function(p, value)
  {
    if (typeof p == 'string')
      this.labels[p] = value;
    else if (typeof p == 'object')
      $.extend(this.labels, p);
  };

  // add a button to the button list
  this.register_button = function(command, id, type, act, sel, over)
  {
    var button_prop = {id:id, type:type};

    if (act) button_prop.act = act;
    if (sel) button_prop.sel = sel;
    if (over) button_prop.over = over;

    if (!this.buttons[command])
      this.buttons[command] = [];

    this.buttons[command].push(button_prop);

    if (this.loaded) {
      this.init_button(command, button_prop);
      this.set_button(command, (this.commands[command] ? 'act' : 'pas'));
    }
  };

  // register a button with popup menu, to set its state according to the state of all commands in the menu
  this.register_menu_button = function(button, menu_id)
  {
    if (this.menu_buttons[menu_id]) {
      this.menu_buttons[menu_id][0].push(button);
    }
    else {
      var commands = [];
      $('#' + menu_id).find('a').each(function() {
        var command, link = $(this), onclick = link.attr('onclick');

        if (onclick &amp;&amp; String(onclick).match(/rcmail\.command\(\'([^']+)/))
          command = RegExp.$1;
        else
          command = function() { return link.is('.active'); };

        commands.push(command);
      });

      if (commands.length)
        this.menu_buttons[menu_id] = [[button], commands];
    }

    this.set_menu_buttons();
  };

  // set state of a menu button according to state of all menu actions
  this.set_menu_buttons = function()
  {
    // Use timeouts to not block and set menu button states only once
    clearTimeout(this.menu_buttons_timeout);
    this.menu_buttons_timeout = setTimeout(function() {
      $.each(ref.menu_buttons, function() {
        var disabled = true;
        $.each(this[1], function() {
          var is_func = typeof(this) == 'function';
          if ((is_func &amp;&amp; this()) || (!is_func &amp;&amp; ref.commands[this])) {
            return disabled = false;
          }
        });

        $(this[0]).add($(this[0]).parent('.dropbutton'))
          .addClass(disabled ? 'disabled' : 'active')
          .removeClass(disabled ? 'active' : 'disabled');
      });
    }, 50);
  };

  // register a specific gui object
  this.gui_object = function(name, id)
  {
    this.gui_objects[name] = this.loaded ? rcube_find_object(id) : id;
  };

  // register a container object
  this.gui_container = function(name, id)
  {
    this.gui_containers[name] = id;
  };

  // add a GUI element (html node) to a specified container
  this.add_element = function(elm, container)
  {
    if (this.gui_containers[container] &amp;&amp; this.gui_containers[container].jquery)
      this.gui_containers[container].append(elm);
  };

  // register an external handler for a certain command
  this.register_command = function(command, callback, enable)
  {
    this.command_handlers[command] = callback;

    if (enable)
      this.enable_command(command, true);
  };

  // execute the given script on load
  this.add_onload = function(f)
  {
    this.onloads.push(f);
  };

  // initialize webmail client
  this.init = function()
  {
    var n;
    this.task = this.env.task;

    if (!this.env.blankpage)
      this.env.blankpage = 'about:blank';

    // find all registered gui containers
    for (n in this.gui_containers)
      this.gui_containers[n] = $('#'+this.gui_containers[n]);

    // find all registered gui objects
    for (n in this.gui_objects)
      this.gui_objects[n] = rcube_find_object(this.gui_objects[n]);

    // init registered buttons
    this.init_buttons();

    // tell parent window that this frame is loaded
    if (this.is_framed()) {
      parent.rcmail.unlock_frame();
    }

    // enable general commands
    this.enable_command('close', 'logout', 'mail', 'addressbook', 'settings', 'save-pref',
      'compose', 'undo', 'about', 'switch-task', 'menu-open', 'menu-close', 'menu-save', true);

    // set active task button
    this.set_button(this.task, 'sel');

    if (this.env.permaurl)
      this.enable_command('permaurl', 'extwin', true);

    switch (this.task) {

      case 'mail':
        // enable mail commands
        this.enable_command('list', 'checkmail', 'add-contact', 'search', 'reset-search', 'collapse-folder', 'import-messages', true);

        if (this.gui_objects.messagelist) {
          // setup message list cols
          this.msglist_setup(this.env.layout);

          this.env.widescreen_list_template = [
            {className: 'threads', cells: ['threads']},
            // PAMELA - Ajout de la priorit dans l'affichage des mails 
            {className: 'subject', cells: ['fromto', 'date', 'size', 'status', 'subject', 'priority']},
            {className: 'flags', cells: ['flag', 'attachment']}
          ];

          this.message_list = new rcube_list_widget(this.gui_objects.messagelist, {
            multiselect:true, multiexpand:true, draggable:true, keyboard:true,
            column_movable:this.env.col_movable, dblclick_time:this.dblclick_time
            });
          this.message_list
            .addEventListener('initrow', function(o) { ref.init_message_row(o); })
            .addEventListener('dblclick', function(o) { ref.msglist_dbl_click(o); })
            .addEventListener('keypress', function(o) { ref.msglist_keypress(o); })
            .addEventListener('select', function(o) { ref.msglist_select(o); })
            .addEventListener('dragstart', function(o) { ref.drag_start(o); })
            .addEventListener('dragmove', function(e) { ref.drag_move(e); })
            .addEventListener('dragend', function(e) { ref.drag_end(e); })
            .addEventListener('expandcollapse', function(o) { ref.msglist_expand(o); })
            .addEventListener('column_replace', function(o) { ref.msglist_set_coltypes(o); })
            .init();

          //Pamela - Rendre le drag'n'drop possible pour les messages dans une frame.
          if (parent !== window)
          {
            setTimeout(() => {
              this.message_list.draggable = true;
            }, 111);
          }

          // TODO: this should go into the list-widget code
          $(this.message_list.thead).on('click', 'a.sortcol', function(e){
            return ref.command('sort', $(this).attr('rel'), this);
          });

          this.enable_command('toggle_status', 'toggle_flag', 'sort', true);
          this.enable_command('set-listmode', this.env.threads &amp;&amp; !this.is_multifolder_listing());

          // load messages
          var searchfilter = $(this.gui_objects.search_filter).val();
          if (searchfilter &amp;&amp; searchfilter != 'ALL')
            this.filter_mailbox(searchfilter);
          else
            this.command('list');

          $(this.gui_objects.qsearchbox).val(this.env.search_text).focusin(function() { ref.message_list.blur(); });
        }

        this.set_button_titles();

        this.env.message_commands = ['show', 'reply', 'reply-all', 'reply-list',
          'move', 'copy', 'delete', 'open', 'mark', 'edit', 'viewsource', 'bounce',
          'print', 'load-attachment', 'download-attachment', 'show-headers', 'hide-headers', 'download',
          'forward', 'forward-inline', 'forward-attachment', 'change-format'];

        if (this.env.action == 'show' || this.env.action == 'preview') {
          this.enable_command(this.env.message_commands, this.env.uid);
          this.enable_command('reply-list', this.env.list_post);

          if (this.env.action == 'show') {
            this.http_request('pagenav', {_uid: this.env.uid, _mbox: this.env.mailbox, _search: this.env.search_request},
              this.display_message('', 'loading'));
          }

          if (this.env.mail_read_time > 0)
            setTimeout(function() {
              ref.http_post('mark', {_uid: ref.env.uid, _flag: 'read', _mbox: ref.env.mailbox, _quiet: 1});
            }, this.env.mail_read_time * 1000);

          if (this.env.blockedobjects) {
            $(this.gui_objects.remoteobjectsmsg).show();
            this.enable_command('load-remote', true);
          }

          // make preview/message frame visible
          if (this.env.action == 'preview' &amp;&amp; this.is_framed()) {
            this.enable_command('compose', 'add-contact', false);
            parent.rcmail.show_contentframe(true);
          }

          if ($.inArray('flagged', this.env.message_flags) >= 0) {
            $(document.body).addClass('status-flagged');
          }

          // initialize drag-n-drop on attachments, so they can e.g.
          // be dropped into mail compose attachments in another window
          if (this.gui_objects.attachments)
            $('li > a', this.gui_objects.attachments).not('.drop').on('dragstart', function(e) {
              var n, href = this.href, dt = e.originalEvent.dataTransfer;
              if (dt) {
                // inject username to the uri
                href = href.replace(/^https?:\/\//, function(m) { return m + urlencode(ref.env.username) + '@'});
                // cleanup the node to get filename without the size test
                n = $(this).clone();
                n.children().remove();

                dt.setData('roundcube-uri', href);
                dt.setData('roundcube-name', n.text().trim());
              }
            });

            this.check_mailvelope(this.env.action);
        }
        else if (this.env.action == 'compose') {
          this.env.address_group_stack = [];
          this.env.compose_commands = ['send-attachment', 'remove-attachment', 'send', 'cancel',
            'toggle-editor', 'list-addresses', 'pushgroup', 'search', 'reset-search', 'extwin',
            'insert-response', 'save-response', 'menu-open', 'menu-close', 'load-attachment',
            'download-attachment', 'open-attachment', 'rename-attachment'];

          if (this.env.drafts_mailbox)
            this.env.compose_commands.push('savedraft')

          this.enable_command(this.env.compose_commands, true);

          // add more commands (not enabled)
          $.merge(this.env.compose_commands, ['add-recipient', 'firstpage', 'previouspage', 'nextpage', 'lastpage']);

          if (window.googie) {
            this.env.editor_config.spellchecker = googie;
            this.env.editor_config.spellcheck_observer = function(s) { ref.spellcheck_state(); };

            this.env.compose_commands.push('spellcheck')
            this.enable_command('spellcheck', true);
          }

          // initialize HTML editor
          this.editor_init(this.env.editor_config, this.env.composebody);

          // init canned response functions
          if (this.gui_objects.responseslist) {
            $('a.insertresponse', this.gui_objects.responseslist)
              .attr('unselectable', 'on')
              .mousedown(function(e) { return rcube_event.cancel(e); })
              .on('mouseup keypress', function(e) {
                if (e.type == 'mouseup' || rcube_event.get_keycode(e) == 13) {
                  ref.command('insert-response', $(this).attr('rel'));
                  $(document.body).trigger('mouseup');  // hides the menu
                  return rcube_event.cancel(e);
                }
              });

            // avoid textarea loosing focus when hitting the save-response button/link
            $.each(this.buttons['save-response'] || [], function (i, v) {
              $('#' + v.id).mousedown(function(e){ return rcube_event.cancel(e); })
            });
          }

          // init message compose form
          this.init_messageform();

          this.check_mailvelope(this.env.action);
        }
        else if (this.env.action == 'bounce') {
          this.init_messageform_inputs();
          this.env.compose_commands = [];
        }
        else if (this.env.action == 'get') {
          this.enable_command('download', true);
          this.enable_command('image-scale', 'image-rotate', !!/^image\//.test(this.env.mimetype));

          // Mozilla's PDF.js viewer does not allow printing from host page (#5125)
          // to minimize user confusion we disable the Print button on Firefox &lt; 75
          this.enable_command('print', this.env.mimetype != 'application/pdf' || !bw.mz || bw.vendver >= 75);

          if (this.env.is_message) {
            this.enable_command('reply', 'reply-all', 'edit', 'viewsource',
              'forward', 'forward-inline', 'forward-attachment', 'bounce', true);
            if (this.env.list_post)
              this.enable_command('reply-list', true);
          }

          // center and scale the image in preview frame
          // TODO: Find a better way. Onload is late, also we could use embed.css
          if (this.env.mimetype.startsWith('image/'))
            $(this.gui_objects.messagepartframe).on('load', function() {
              var contents = $(this).contents();

              // do not apply styles to an error page (with no image)
              if (contents.find('img').length)
                contents.find('head').append(
                  '&lt;style type="text/css">'
                  + 'img { max-width:100%; max-height:100%; } ' // scale
                  + 'body { display:flex; align-items:center; justify-content:center; height:100%; margin:0; }' // align
                  + '&lt;/style>'
                );
            });
        }
        // show printing dialog unless decryption must be done first
        else if (this.env.action == 'print' &amp;&amp; this.env.uid) {
          this.check_mailvelope(this.env.action);
          if (!this.env.is_pgp_content &amp;&amp; !this.env.pgp_mime_part) {
            this.print_dialog();
          }
        }

        // get unread count for each mailbox
        if (this.gui_objects.mailboxlist) {
          this.env.unread_counts = {};
          this.gui_objects.folderlist = this.gui_objects.mailboxlist;
          this.http_request('getunread', {_page: this.env.current_page});
        }

        // init address book widget
        if (this.gui_objects.contactslist) {
          this.contact_list = new rcube_list_widget(this.gui_objects.contactslist,
            { multiselect:true, draggable:false, keyboard:true });
          this.contact_list
            .addEventListener('initrow', function(o) { ref.triggerEvent('insertrow', { cid:o.uid, row:o }); })
            .addEventListener('select', function(o) { ref.compose_recipient_select(o); })
            .addEventListener('dblclick', function(o) { ref.compose_add_recipient(); })
            .addEventListener('keypress', function(o) {
              if (o.key_pressed == o.ENTER_KEY) {
                if (!ref.compose_add_recipient()) {
                  // execute link action on &lt;enter> if not a recipient entry
                  if (o.last_selected &amp;&amp; String(o.last_selected).charAt(0) == 'G') {
                    $(o.rows[o.last_selected].obj).find('a').first().click();
                  }
                }
              }
            })
            .init();

          // remember last focused address field
          $('#_to,#_cc,#_bcc').focus(function() { ref.env.focused_field = this; });
        }

        if (this.gui_objects.addressbookslist) {
          this.gui_objects.folderlist = this.gui_objects.addressbookslist;
          this.enable_command('list-addresses', true);
        }

        // ask user to send MDN
        if (this.env.mdn_request &amp;&amp; this.env.uid) {
            this.mdn_request_dialog(this.env.uid, this.env.mailbox);
        }

        // detect browser capabilities
        if (!this.is_framed() &amp;&amp; !this.env.extwin)
          this.browser_capabilities_check();

        break;

      case 'addressbook':
        this.env.address_group_stack = [];

        if (this.gui_objects.folderlist)
          this.env.contactfolders = $.extend($.extend({}, this.env.address_sources), this.env.contactgroups);

        this.enable_command('add', 'import', this.env.writable_source);
        this.enable_command('list', 'listgroup', 'pushgroup', 'popgroup', 'listsearch', 'search', 'reset-search', 'advanced-search', true);

        if (this.gui_objects.contactslist) {
          this.contact_list = new rcube_list_widget(this.gui_objects.contactslist,
            {multiselect:true, draggable:this.gui_objects.folderlist?true:false, keyboard:true});
          this.contact_list
            .addEventListener('initrow', function(o) { ref.triggerEvent('insertrow', { cid:o.uid, row:o }); })
            .addEventListener('keypress', function(o) { ref.list_keypress(o); })
            .addEventListener('select', function(o) { ref.contactlist_select(o); })
            .addEventListener('dragstart', function(o) { ref.drag_start(o); })
            .addEventListener('dragmove', function(e) { ref.drag_move(e); })
            .addEventListener('dragend', function(e) { ref.drag_end(e); })
            .init();

          $(this.gui_objects.qsearchbox).focusin(function() { ref.contact_list.blur(); });

          this.update_group_commands();
          this.command('list');
        }

        if (this.gui_objects.savedsearchlist) {
          this.savedsearchlist = new rcube_treelist_widget(this.gui_objects.savedsearchlist, {
            id_prefix: 'rcmli',
            id_encode: this.html_identifier_encode,
            id_decode: this.html_identifier_decode
          });

          this.savedsearchlist.addEventListener('select', function(node) {
            ref.triggerEvent('selectfolder', { folder:node.id, prefix:'rcmli' }); });
        }

        this.set_page_buttons();

        if (this.env.cid) {
          this.enable_command('show', 'edit', 'qrcode', true);
          // register handlers for group assignment via checkboxes
          if (this.gui_objects.editform) {
            $('input.groupmember').change(function() {
              ref.group_member_change(this.checked ? 'add' : 'del', ref.env.cid, ref.env.source, this.value);
            });
          }
        }

        if (this.gui_objects.editform) {
          this.enable_command('save', true);
          if (this.env.action == 'add' || this.env.action == 'edit' || this.env.action == 'search')
              this.init_contact_form();
        }
        else if (this.env.action == 'print') {
          this.print_dialog();
        }

        break;

      case 'settings':
        this.enable_command('show', 'save', true);

        if (this.env.action == 'identities') {
          this.enable_command('add', this.env.identities_level &lt; 2);
        }
        else if (this.env.action == 'edit-identity' || this.env.action == 'add-identity') {
          this.enable_command('save', 'edit', 'toggle-editor', true);
          this.enable_command('delete', this.env.identities_level &lt; 2);

          // initialize HTML editor
          this.editor_init(this.env.editor_config, 'rcmfd_signature');

          if (this.env.action == 'edit-identity') {
            this.check_mailvelope(this.env.action);
          }
        }
        else if (this.env.action == 'folders') {
          this.enable_command('subscribe', 'unsubscribe', 'create-folder', 'rename-folder', true);
        }
        else if (this.env.action == 'edit-folder' &amp;&amp; this.gui_objects.editform) {
          this.enable_command('save', 'folder-size', true);
          parent.rcmail.env.exists = this.env.messagecount;
          parent.rcmail.enable_command('purge', this.env.messagecount);
        }
        else if (this.env.action == 'responses') {
          this.enable_command('add', true);
        }

        if (this.gui_objects.identitieslist) {
          this.identity_list = new rcube_list_widget(this.gui_objects.identitieslist,
            {multiselect:false, draggable:false, keyboard:true});
          this.identity_list
            .addEventListener('select', function(o) { ref.identity_select(o); })
            .addEventListener('keypress', function(o) { ref.list_keypress(o); })
            .init()
            .focus();
        }
        else if (this.gui_objects.sectionslist) {
          this.sections_list = new rcube_list_widget(this.gui_objects.sectionslist, {multiselect:false, draggable:false, keyboard:true});
          this.sections_list
            .addEventListener('select', function(o) { ref.section_select(o); })
            .init()
            .focus();
        }
        else if (this.gui_objects.subscriptionlist) {
          this.init_subscription_list();
        }
        else if (this.gui_objects.responseslist) {
          this.responses_list = new rcube_list_widget(this.gui_objects.responseslist, {multiselect:false, draggable:false, keyboard:true});
          this.responses_list
            .addEventListener('select', function(o) { ref.response_select(o); })
            .addEventListener('keypress', function(o) { ref.list_keypress(o); })
            .init()
            .focus();
        }

        break;

      case 'login':
        var tz, tz_name,
            input_user = $('#rcmloginuser'),
            input_tz = $('#rcmlogintz');

        if (input_user.val() == '')
          input_user.focus();
        else
          $('#rcmloginpwd').focus();

        // detect client timezone
        if (window.jstz &amp;&amp; (tz = jstz.determine()))
          tz_name = tz.name();

        input_tz.val(tz_name ? tz_name : (new Date().getStdTimezoneOffset() / -60));

        // display 'loading' message on form submit, lock submit button
        $('form').submit(function () {
          $('[type=submit]', this).prop('disabled', true);
          ref.clear_messages();
          ref.display_message('', 'loading');
        });

        break;
    }

    // select first input field in an edit form
    if (this.gui_objects.editform)
      $("input,select,textarea", this.gui_objects.editform)
        .not(':hidden').not(':disabled').first().select().focus();

    // prevent from form submit with Enter key in file input fields
    if (bw.ie)
      $('input[type=file]').keydown(function(e) { if (e.keyCode == '13') e.preventDefault(); });

    // flag object as complete
    this.loaded = true;
    this.env.lastrefresh = new Date();

    // show message
    if (this.pending_message)
      this.display_message.apply(this, this.pending_message);

    // init treelist widget
    if (this.gui_objects.folderlist &amp;&amp; window.rcube_treelist_widget
      // some plugins may load rcube_treelist_widget and there's one case
      // when this will cause problems - addressbook widget in compose,
      // which already has been initialized using rcube_list_widget
      &amp;&amp; this.gui_objects.folderlist != this.gui_objects.addressbookslist
    ) {
      this.treelist = new rcube_treelist_widget(this.gui_objects.folderlist, {
          selectable: true,
          id_prefix: 'rcmli',
          parent_focus: true,
          id_encode: this.html_identifier_encode,
          id_decode: this.html_identifier_decode,
          check_droptarget: function(node) { return !node.virtual &amp;&amp; ref.check_droptarget(node.id) }
      });

      this.treelist
        .addEventListener('collapse', function(node) { ref.folder_collapsed(node) })
        .addEventListener('expand', function(node) { ref.folder_collapsed(node) })
        .addEventListener('beforeselect', function(node) { return !ref.busy; })
        .addEventListener('select', function(node) {
          ref.triggerEvent('selectfolder', { folder:node.id, prefix:'rcmli' });
          ref.mark_all_read_state();
        });
    }

    // activate html5 file drop feature (if browser supports it and if configured)
    if (this.gui_objects.filedrop &amp;&amp; this.env.filedrop &amp;&amp; window.FormData) {
      $(document.body).on('dragover dragleave drop', function(e) { return ref.document_drag_hover(e, e.type == 'dragover'); });
      $(this.gui_objects.filedrop).addClass('droptarget')
        .on('dragover dragleave', function(e) { return ref.file_drag_hover(e, e.type == 'dragover'); })
        .get(0).addEventListener('drop', function(e) { return ref.file_dropped(e); }, false);
    }

    // catch document (and iframe) mouse clicks
    var body_mouseup = function(e) { return ref.doc_mouse_up(e); };
    $(document.body)
      .mouseup(body_mouseup)
      .keydown(function(e) { return ref.doc_keypress(e); });

    rcube_webmail.set_iframe_events({mouseup: body_mouseup});

    // trigger init event hook
    this.triggerEvent('init', { task:this.task, action:this.env.action });

    // execute all foreign onload scripts
    // @deprecated
    for (n in this.onloads) {
      if (typeof this.onloads[n] === 'string')
        eval(this.onloads[n]);
      else if (typeof this.onloads[n] === 'function')
        this.onloads[n]();
    }

    // register menu buttons
    $('[data-popup]').each(function() { ref.register_menu_button(this, $(this).data('popup')); });

    // start keep-alive and refresh intervals
    this.start_refresh();
    this.start_keepalive();
  };

  this.log = function(msg)
  {
    if (this.env.devel_mode &amp;&amp; window.console &amp;&amp; console.log)
      console.log(msg);
  };

  /*********************************************************/
  /*********       client command interface        *********/
  /*********************************************************/

  // execute a specific command on the web client
  this.command = function(command, props, obj, event, allow_disabled)
  {
    var ret;

    if (obj &amp;&amp; obj.blur &amp;&amp; !(event &amp;&amp; rcube_event.is_keyboard(event)))
      obj.blur();

    // do nothing if interface is locked by another command
    // with exception for searching reset and menu
    if (this.busy &amp;&amp; !(command == 'reset-search' &amp;&amp; this.last_command == 'search') &amp;&amp; !command.match(/^menu-/))
      return false;

    // let the browser handle this click (shift/ctrl usually opens the link in a new window/tab)
    if ((obj &amp;&amp; obj.href &amp;&amp; String(obj.href).indexOf('#') &lt; 0) &amp;&amp; rcube_event.get_modifier(event)) {
      return true;
    }

    // command not supported or allowed
    if (!allow_disabled &amp;&amp; !this.commands[command]) {
      // pass command to parent window
      if (this.is_framed())
        parent.rcmail.command(command, props);

      return false;
    }

    // check input before leaving compose step
    if (this.task == 'mail' &amp;&amp; this.env.action == 'compose' &amp;&amp; !this.env.server_error &amp;&amp; command != 'save-pref'
      &amp;&amp; ($.inArray(command, this.env.compose_commands) &lt; 0 || command.startsWith('compose-encrypted') &amp;&amp; ref.mailvelope_editor)
      &amp;&amp; !this.compose_skip_unsavedcheck
    ) {
      if (!this.env.is_sent &amp;&amp; this.cmp_hash != this.compose_field_hash()) {
        this.confirm_dialog(this.get_label('notsentwarning'), 'discard', function() {
            // remove copy from local storage if compose screen is left intentionally
            ref.remove_compose_data(ref.env.compose_id);
            ref.compose_skip_unsavedcheck = true;
            ref.command(command, props, obj, event);
          });

        return false;
      }
    }

    this.last_command = command;
    this.command_aborted = false;

    // trigger plugin hooks
    this.triggerEvent('actionbefore', {props: props, action: command, originalEvent: event});

    if ((ret = this.triggerEvent('before' + command, props || event)) !== undefined) {
      // abort if one of the handlers returned false
      if (ret === false)
        return false;

      props = ret;
    }

    // process external commands
    if (typeof this.command_handlers[command] === 'function') {
      ret = this.command_handlers[command](props, obj, event);
    }
    else if (typeof this.command_handlers[command] === 'string') {
      ret = window[this.command_handlers[command]](props, obj, event);
    }
    // process internal commands
    else {
      ret = this.command_handler(command, props, obj, event);
    }

    if (!this.command_aborted &amp;&amp; this.triggerEvent('after' + command, props) === false)
      ret = false;

    this.triggerEvent('actionafter', {props: props, action: command, aborted: this.command_aborted, ret: ret, originalEvent: event});

    if (ret === false)
      return false;

    if ((obj &amp;&amp; ret !== true) || this.command_aborted === true)
      return false;

    return true;
  };

  // execute a specific known command
  this.command_handler = function(command, props, obj, event)
  {
    var uid, cid, url, flag;

    // process internal command
    switch (command) {

      // commands to switch task
      case 'logout':
      case 'mail':
      case 'addressbook':
      case 'settings':
        this.switch_task(command);
        break;

      case 'about':
        this.redirect('?_task=settings&amp;_action=about', false);
        break;

      case 'permaurl':
        if (obj &amp;&amp; obj.href &amp;&amp; obj.target)
          return true;
        if (this.env.permaurl)
          parent.location.href = this.env.permaurl;
        break;

      case 'extwin':
        if (this.env.action == 'compose') {
          var form = this.gui_objects.messageform,
            win = this.open_window('');

          if (win) {
            this.save_compose_form_local();
            this.compose_skip_unsavedcheck = true;
            $("[name='_action']", form).val('compose');
            form.action = this.url('mail/compose', { _id: this.env.compose_id, _extwin: 1 });
            form.target = win.name;
            form.submit();
          }
        }
        else {
          this.open_window(this.env.permaurl, true);
        }
        break;

      case 'change-format':
        url = this.env.permaurl + '&amp;_format=' + props;

        if (this.env.action == 'preview')
          url = url.replace(/_action=show/, '_action=preview') + '&amp;_framed=1';
        if (this.env.extwin)
          url += '&amp;_extwin=1';

        location.href = url;
        break;

      case 'menu-open':
        if (props &amp;&amp; props.menu == 'attachmentmenu') {
          var mimetype = this.env.attachments[props.id];
          if (mimetype &amp;&amp; mimetype.mimetype) // in compose format is different
            mimetype = mimetype.mimetype;
          this.enable_command('open-attachment', mimetype &amp;&amp; this.env.mimetypes &amp;&amp; $.inArray(mimetype, this.env.mimetypes) >= 0);
        }
        this.show_menu(props, props.show || undefined, event);
        break;

      case 'menu-close':
        this.hide_menu(props, event);
        break;

      case 'menu-save':
        this.triggerEvent(command, {props:props, originalEvent:event});
        return false;

      case 'open':
        if (uid = this.get_single_uid()) {
          obj.href = this.url('show', this.params_from_uid(uid, {_extwin: 1}));
          return true;
        }
        break;

      case 'close':
        if (this.env.extwin)
          window.close();
        break;

      case 'list':
        if (props &amp;&amp; props != '') {
          this.reset_qsearch(true);
        }
        if (this.env.action == 'compose' &amp;&amp; this.env.extwin) {
          window.close();
        }
        else if (this.task == 'mail') {
          this.list_mailbox(props, props ? 1 : '');
          this.set_button_titles();
        }
        else if (this.task == 'addressbook')
          this.list_contacts(props);
        break;

      case 'set-listmode':
        this.set_list_options(null, undefined, undefined, props == 'threads' ? 1 : 0);
        break;

      case 'sort':
        var sort_order = this.env.sort_order,
          sort_col = !this.env.disabled_sort_col ? props : this.env.sort_col;

        if (!this.env.disabled_sort_order)
          sort_order = this.env.sort_col == sort_col &amp;&amp; sort_order == 'ASC' ? 'DESC' : 'ASC';

        // set table header and update env
        this.set_list_sorting(sort_col, sort_order);

        // reload message list
        this.list_mailbox('', '', sort_col+'_'+sort_order);
        break;

      case 'nextpage':
        this.list_page('next');
        break;

      case 'lastpage':
        this.list_page('last');
        break;

      case 'previouspage':
        this.list_page('prev');
        break;

      case 'firstpage':
        this.list_page('first');
        break;

      case 'expunge':
        if (this.env.exists)
          this.expunge_mailbox(this.env.mailbox);
        break;

      case 'purge':
      case 'empty-mailbox':
        if (this.env.exists)
          this.purge_mailbox(this.env.mailbox);
        break;

      // common commands used in multiple tasks
      case 'show':
        if (this.task == 'mail') {
          uid = this.get_single_uid();
          if (uid &amp;&amp; (!this.env.uid || uid != this.env.uid)) {
            var mbox = this.get_message_mailbox(uid);
            if (mbox == this.env.drafts_mailbox)
              this.open_compose_step({_draft_uid: uid, _mbox: mbox});
            else
              this.show_message(uid);
          }
        }
        else if (this.task == 'addressbook') {
          cid = props ? props : this.get_single_cid();
          if (cid &amp;&amp; !(this.env.action == 'show' &amp;&amp; cid == this.env.cid))
            this.load_contact(cid, 'show');
        }
        else if (this.task == 'settings') {
          this.goto_url('settings/' + props, {_framed: 0});
        }
        break;

      case 'add':
        if (this.task == 'addressbook')
          this.load_contact(0, 'add');
        else if (this.task == 'settings' &amp;&amp; this.env.action == 'responses')
          this.load_response(0, 'add-response');
        else if (this.task == 'settings')
          this.load_identity(0, 'add-identity');
        break;

      case 'edit':
        if (this.task == 'addressbook' &amp;&amp; (cid = this.get_single_cid()))
          this.load_contact(cid, 'edit');
        else if (this.task == 'mail' &amp;&amp; (uid = this.get_single_uid())) {
          url = { _mbox: this.get_message_mailbox(uid) };
          url[url._mbox == this.env.drafts_mailbox &amp;&amp; props != 'new' ? '_draft_uid' : '_uid'] = uid;
          this.open_compose_step(url);
        }
        break;

      case 'save':
        var input, form = this.gui_objects.editform;
        if (form) {
          // user prefs
          if ((input = $("[name='_pagesize']", form)) &amp;&amp; input.length &amp;&amp; isNaN(parseInt(input.val()))) {
            this.alert_dialog(this.get_label('nopagesizewarning'), function() {
              input.focus();
            });
            break;
          }
          // contacts/identities
          else {
            // reload form
            if (props == 'reload') {
              form.action += '&amp;_reload=1';
            }
            else if (this.task == 'settings' &amp;&amp; (this.env.identities_level % 2) == 0  &amp;&amp;
              (input = $("[name='_email']", form)) &amp;&amp; input.length &amp;&amp; !rcube_check_email(input.val())
            ) {
              this.alert_dialog(this.get_label('noemailwarning'), function() {
                input.focus();
              });
              break;
            }
          }

          // add selected source (on the list)
          if (parent.rcmail &amp;&amp; parent.rcmail.env.source)
            form.action = this.add_url(form.action, '_orig_source', parent.rcmail.env.source);

          form.submit();
        }
        break;

      case 'delete':
        // mail task
        if (this.task == 'mail')
          this.delete_messages(event);
        // addressbook task
        else if (this.task == 'addressbook')
          this.delete_contacts();
        // settings: canned response
        else if (this.task == 'settings' &amp;&amp; this.env.action == 'responses')
          this.delete_response();
        // settings: user identities
        else if (this.task == 'settings')
          this.delete_identity();
        break;

      // mail task commands
      case 'move':
      case 'moveto': // deprecated
        if (this.task == 'mail')
          this.move_messages(props, event);
        else if (this.task == 'addressbook')
          this.move_contacts(props, event);
        break;

      case 'copy':
        if (this.task == 'mail')
          this.copy_messages(props, event);
        else if (this.task == 'addressbook')
          this.copy_contacts(props, event);
        break;

      case 'mark':
        if (props)
          this.mark_message(props);
        break;

      case 'toggle_status':
      case 'toggle_flag':
        flag = command == 'toggle_flag' ? 'flagged' : 'read';

        if (uid = props) {
          // toggle flagged/unflagged
          if (flag == 'flagged') {
            if (this.message_list.rows[uid].flagged)
              flag = 'unflagged';
          }
          // toggle read/unread
          else if (this.message_list.rows[uid].deleted)
            flag = 'undelete';
          else if (!this.message_list.rows[uid].unread)
            flag = 'unread';

          this.mark_message(flag, uid);
        }

        break;

      case 'add-contact':
        this.add_contact(props);
        break;

      case 'load-remote':
        if (this.env.uid) {
          if (props &amp;&amp; this.env.sender) {
            this.add_contact(this.env.sender, true, props);
            break;
          }

          this.show_message(this.env.uid, true, this.env.action == 'preview');
        }
        break;

      case 'load-attachment':
      case 'open-attachment':
      case 'download-attachment':
        var params, mimetype = this.env.attachments[props];

        if (this.env.action == 'compose') {
          params = {_file: props, _id: this.env.compose_id};
          mimetype = mimetype ? mimetype.mimetype : '';
        }
        else {
          params = {_mbox: this.env.mailbox, _uid: this.env.uid, _part: props};
        }

        // open attachment in frame if it's of a supported mimetype
        if (command != 'download-attachment' &amp;&amp; mimetype &amp;&amp; this.env.mimetypes &amp;&amp; $.inArray(mimetype, this.env.mimetypes) >= 0) {
          // Note: We disable _framed for proper X-Frame-Options:deny support (#6688)
          if (this.open_window(this.url('get', $.extend({_frame: 1, _framed: 0}, params))))
            break;
        }

        params._download = 1;

        // prevent from page unload warning in compose
        this.compose_skip_unsavedcheck = 1;
        this.goto_url('get', params, false, true);
        this.compose_skip_unsavedcheck = 0;

        break;

      case 'select-all':
        this.select_all_mode = props ? false : true;
        this.dummy_select = true; // prevent msg opening if there's only one msg on the list
        var list = this[this.task == 'addressbook' ? 'contact_list' : 'message_list'];
        if (props == 'invert')
          list.invert_selection();
        else
          list.select_all(props == 'page' ? '' : props);
        this.dummy_select = null;
        break;

      case 'select-none':
        this.select_all_mode = false;
        this[this.task == 'addressbook' ? 'contact_list' : 'message_list'].clear_selection();
        break;

      case 'expand-all':
        this.env.autoexpand_threads = 1;
        this.message_list.expand_all();
        break;

      case 'expand-unread':
        this.env.autoexpand_threads = 2;
        this.message_list.collapse_all();
        this.expand_unread();
        break;

      case 'collapse-all':
        this.env.autoexpand_threads = 0;
        this.message_list.collapse_all();
        break;

      case 'nextmessage':
        if (this.env.next_uid)
          this.show_message(this.env.next_uid, false, this.env.action == 'preview');
        break;

      case 'lastmessage':
        if (this.env.last_uid)
          this.show_message(this.env.last_uid);
        break;

      case 'previousmessage':
        if (this.env.prev_uid)
          this.show_message(this.env.prev_uid, false, this.env.action == 'preview');
        break;

      case 'firstmessage':
        if (this.env.first_uid)
          this.show_message(this.env.first_uid);
        break;

      case 'compose':
        url = {};

        if (this.task == 'mail') {
          url = {_mbox: this.env.mailbox, _search: this.env.search_request};
          if (props)
            url._to = props;
        }
        // modify url if we're in addressbook
        else if (this.task == 'addressbook') {
          // switch to mail compose step directly
          if (props &amp;&amp; props.indexOf('@') > 0) {
            url._to = props;
          }
          else {
            var a_cids = [];
            // use contact id passed as command parameter
            if (props)
              a_cids.push(props);
            // get selected contacts
            else if (this.contact_list)
              a_cids = this.contact_list.get_selection();

            if (a_cids.length) {
              this.http_post('mailto', { _cid: a_cids.join(','), _source: this.env.source }, true);
              break;
            }
            else if (this.env.group &amp;&amp; this.env.pagecount) {
              this.http_post('mailto', { _gid: this.env.group, _source: this.env.source }, true);
              break;
            }
          }
        }
        else if (props &amp;&amp; typeof props == 'string') {
          url._to = props;
        }
        else if (props &amp;&amp; typeof props == 'object') {
          $.extend(url, props);
        }

        this.open_compose_step(url);
        break;

      case 'spellcheck':
        if (this.spellcheck_state()) {
          this.editor.spellcheck_stop();
        }
        else {
          this.editor.spellcheck_start();
        }
        break;

      case 'savedraft':
        // Reset the auto-save timer
        clearTimeout(this.save_timer);

        // compose form did not change (and draft wasn't saved already)
        if (this.env.draft_id &amp;&amp; this.cmp_hash == this.compose_field_hash()) {
          this.auto_save_start();
          break;
        }

        this.submit_messageform(true);
        break;

      case 'send':
        if (!props.nocheck &amp;&amp; !this.env.is_sent &amp;&amp; !this.check_compose_input(command))
          break;

        // Reset the auto-save timer
        clearTimeout(this.save_timer);

        this.submit_messageform();
        break;

      case 'send-attachment':
        // Reset the auto-save timer
        clearTimeout(this.save_timer);

        if (!(flag = this.upload_file(props || this.gui_objects.uploadform, 'upload'))) {
          if (flag !== false)
            this.alert_dialog(this.get_label('selectimportfile'));
          aborted = true;
        }
        break;

      case 'insert-sig':
        this.change_identity($("[name='_from']")[0], true);
        break;

      case 'list-addresses':
        this.list_contacts(props);
        this.enable_command('add-recipient', false);
        break;

      case 'add-recipient':
        this.compose_add_recipient(props);
        break;

      case 'reply-all':
      case 'reply-list':
      case 'reply':
        if (uid = this.get_single_uid()) {
          url = {_reply_uid: uid, _mbox: this.get_message_mailbox(uid), _search: this.env.search_request};
          if (command == 'reply-all')
            // do reply-list, when list is detected and popup menu wasn't used
            url._all = (!props &amp;&amp; this.env.reply_all_mode == 1 &amp;&amp; this.commands['reply-list'] ? 'list' : 'all');
          else if (command == 'reply-list')
            url._all = 'list';

          this.open_compose_step(url);
        }
        break;

      case 'forward-attachment':
      case 'forward-inline':
      case 'forward':
        var uids = this.env.uid ? [this.env.uid] : (this.message_list ? this.message_list.get_selection() : []);
        if (uids.length) {
          url = { _forward_uid: this.uids_to_list(uids), _mbox: this.env.mailbox, _search: this.env.search_request };
          if (command == 'forward-attachment' || (!props &amp;&amp; this.env.forward_attachment) || uids.length > 1)
            url._attachment = 1;
          this.open_compose_step(url);
        }
        break;

      case 'print':
        if (this.task == 'addressbook') {
          if (uid = this.get_single_cid()) {
            url = '&amp;_action=print&amp;_cid=' + uid;
            if (this.env.source)
              url += '&amp;_source=' + urlencode(this.env.source);
            this.open_window(this.env.comm_path + url, true, true);
          }
        }
        else if (this.env.action == 'get' &amp;&amp; !this.env.is_message) {
          this.gui_objects.messagepartframe.contentWindow.print();
        }
        else if (uid = this.get_single_uid()) {
          url = this.url('print', this.params_from_uid(uid, {_safe: this.env.safemode ? 1 : 0}));
          if (this.open_window(url, true, true)) {
            if (this.env.action != 'show' &amp;&amp; this.env.action != 'get')
              this.mark_message('read', uid);
          }
        }
        break;

      case 'viewsource':
        if (uid = this.get_single_uid())
          this.open_window(this.url('viewsource', this.params_from_uid(uid)), true, true);
        break;

      case 'download':
        if (this.env.action == 'get') {
          location.href = this.secure_url(location.href.replace(/_frame=/, '_download='));
        }
        else if (uid = this.get_single_uid()) {
          this.goto_url('viewsource', this.params_from_uid(uid, {_save: 1}), false, true);
        }
        break;

      // quicksearch
      case 'search':
        return this.qsearch(props);

      // reset quicksearch
      case 'reset-search':
        var n, s = this.env.search_request || this.env.qsearch;

        this.reset_qsearch(true);

        if (s &amp;&amp; this.env.action == 'compose') {
          if (this.contact_list)
            this.list_contacts_clear();
        }
        else if (s &amp;&amp; this.env.mailbox) {
          this.list_mailbox(this.env.mailbox, 1);
        }
        else if (s &amp;&amp; this.task == 'addressbook') {
          this.env.source = this.env.last_source || '';
          this.env.group = this.env.last_group || '';
          this.list_contacts(this.env.source, this.env.group, 1);
        }
        break;

      case 'pushgroup':
        // add group ID and current search to stack
        var group = {
          id: props.id,
          search_request: this.env.search_request,
          page: this.env.current_page,
          search: this.env.search_request &amp;&amp; this.gui_objects.qsearchbox ? this.gui_objects.qsearchbox.value : null
        };

        this.env.address_group_stack.push(group);
        if (obj &amp;&amp; event)
          rcube_event.cancel(event);

        // FIXME: no break?

      case 'listgroup':
        this.reset_qsearch();
        this.list_contacts(props.source, props.id, 1, group);
        break;

      case 'popgroup':
        if (this.env.address_group_stack.length) {
          var old = this.env.address_group_stack.pop();
          this.reset_qsearch();

          if (old.search_request) {
            // this code is executed when going back to the search result
            if (old.search &amp;&amp; this.gui_objects.qsearchbox)
              $(this.gui_objects.qsearchbox).val(old.search);
            this.env.search_request = old.search_request;
            this.list_contacts_remote(null, null, this.env.current_page = old.page);
          }
          else
            this.list_contacts(props.source, this.env.address_group_stack[this.env.address_group_stack.length-1].id);
        }
        break;

      case 'import-messages':
        var form = props || this.gui_objects.importform,
          importlock = this.set_busy(true, 'importwait');

        if (!(flag = this.upload_file(form, 'import', importlock))) {
          this.set_busy(false, null, importlock);
          if (flag !== false)
            this.alert_dialog(this.get_label('selectimportfile'));
          this.command_aborted = true;
        }
        break;

      case 'import':
        var dialog = $('&lt;iframe>').attr('src', this.url('import', {_framed: 1, _target: this.env.source})),
          import_func = function(e) {
            var win = dialog[0].contentWindow,
              form = null;

            if (win.rcmail.gui_objects.importformmap)
              form = win.rcmail.gui_objects.importformmap;
            else
              form = win.rcmail.gui_objects.importform;

            if (form) {
              var lock, file = win.$('#rcmimportfile')[0];
              if (file &amp;&amp; !file.value) {
                win.rcmail.alert_dialog(win.rcmail.get_label('selectimportfile'));
                return;
              }

              lock = win.rcmail.set_busy(true, 'importwait');
              $('[name="_unlock"]', form).val(lock);
              form.submit();
              win.rcmail.lock_form(form, true);
              // disable Import button
              $(e.target).attr('disabled', true).next().focus();
            }
          },
          close_func = function(event, ui) {
            $(this).remove();
            if (ref.import_state == 'reload')
              ref.command('list');
          };

        this.import_state = null;
        this.import_dialog = this.simple_dialog(dialog, this.gettext('importcontacts'), import_func, {
          close: close_func,
          button: 'import',
          width: 500,
          height: 300
        });

        break;

      case 'export':
        if (this.contact_list.rowcount > 0) {
          this.goto_url('export', { _source: this.env.source, _gid: this.env.group, _search: this.env.search_request }, false, true);
        }
        break;

      case 'export-selected':
        if (this.contact_list.rowcount > 0) {
          this.goto_url('export', { _source: this.env.source, _gid: this.env.group, _cid: this.contact_list.get_selection().join(',') }, false, true);
        }
        break;

      case 'upload-photo':
        this.upload_contact_photo(props || this.gui_objects.uploadform);
        break;

      case 'delete-photo':
        this.replace_contact_photo('-del-');
        break;

      case 'undo':
        this.http_request('undo', '', this.display_message('', 'loading'));
        break;

      // unified command call (command name == function name)
      default:
        var func = command.replace(/-/g, '_');
        if (this[func] &amp;&amp; typeof this[func] === 'function') {
          return this[func](props, obj, event);
        }
    }
  };

  // set command(s) enabled or disabled
  this.enable_command = function()
  {
    var i, n, args = Array.prototype.slice.call(arguments),
      enable = args.pop(), cmd;

    for (n=0; n&lt;args.length; n++) {
      cmd = args[n];
      // argument of type array
      if (typeof cmd === 'string') {
        this.commands[cmd] = enable;
        this.set_button(cmd, (enable ? 'act' : 'pas'));
        this.triggerEvent('enable-command', {command: cmd, status: enable});
      }
      // push array elements into commands array
      else {
        for (i in cmd)
          args.push(cmd[i]);
      }
    }

    this.set_menu_buttons();
  };

  this.command_enabled = function(cmd)
  {
    return this.commands[cmd];
  };

  // lock/unlock interface
  this.set_busy = function(a, message, id)
  {
    if (a &amp;&amp; message) {
      var msg = this.get_label(message);
      if (msg == message)
        msg = 'Loading...';

      id = this.display_message(msg, 'loading');
    }
    else if (!a &amp;&amp; id) {
      this.hide_message(id);
    }

    this.busy = a;

    if (this.gui_objects.editform)
      this.lock_form(this.gui_objects.editform, a);

    return id;
  };

  // return a localized string
  this.get_label = function(name, domain)
  {
    if (domain &amp;&amp; this.labels[domain+'.'+name])
      return this.labels[domain+'.'+name];
    else if (this.labels[name])
      return this.labels[name];
    else
      return name;
  };

  // alias for convenience reasons
  this.gettext = this.get_label;

  // switch to another application task
  this.switch_task = function(task)
  {
    var action, path;

    if ((path = task.split('/')).length == 2) {
      task = path[0];
      action = path[1];
    }

    if (this.task === task &amp;&amp; task != 'mail')
      return;

    var url = this.get_task_url(task);

    if (action)
      url += '&amp;_action=' + action;

    if (task == 'mail')
      url += '&amp;_mbox=INBOX';
    else if (task == 'logout') {
      url = this.secure_url(url);
      this.clear_compose_data();
    }

    this.redirect(url);
  };

  this.get_task_url = function(task, url)
  {
    if (!url)
      url = this.env.comm_path;

    if (url.match(/[?&amp;]_task=[a-zA-Z0-9_-]+/))
        return url.replace(/_task=[a-zA-Z0-9_-]+/, '_task=' + task);
    else
        return url.replace(/\?.*$/, '') + '?_task=' + task;
  };

  this.reload = function(delay)
  {
    if (this.is_framed())
      parent.rcmail.reload(delay);
    else if (delay)
      setTimeout(function() { ref.reload(); }, delay);
    else if (window.location)
      location.href = this.url('', {_extwin: this.env.extwin});
  };

  // Add variable to GET string, replace old value if exists
  this.add_url = function(url, name, value)
  {
    var urldata, datax, hash = '';

    value = urlencode(value);

    if (/(#[a-z0-9_-]*)$/.test(url)) {
      hash = RegExp.$1;
      url = url.substr(0, url.length - hash.length);
    }

    if (/(\?.*)$/.test(url)) {
      urldata = RegExp.$1;
      datax = RegExp('((\\?|&amp;)'+RegExp.escape(name)+'=[^&amp;]*)');

      if (datax.test(urldata))
        urldata = urldata.replace(datax, RegExp.$2 + name + '=' + value);
      else
        urldata += '&amp;' + name + '=' + value;

      return url.replace(/(\?.*)$/, urldata) + hash;
    }

    return url + '?' + name + '=' + value + hash;
  };

  // append CSRF protection token to the given url
  this.secure_url = function(url)
  {
    return this.add_url(url, '_token', this.env.request_token);
  },

  this.is_framed = function()
  {
    return this.env.framed &amp;&amp; parent.rcmail &amp;&amp; parent.rcmail != this &amp;&amp; typeof parent.rcmail.command == 'function';
  };

  this.save_pref = function(prop)
  {
    var request = {_name: prop.name, _value: prop.value};

    if (prop.session)
      request._session = prop.session;
    if (prop.env)
      this.env[prop.env] = prop.value;

    this.http_post('save-pref', request);
  };

  this.html_identifier = function(str, encode)
  {
    return encode ? this.html_identifier_encode(str) : String(str).replace(this.identifier_expr, '_');
  };

  this.html_identifier_encode = function(str)
  {
    return Base64.encode(String(str)).replace(/=+$/, '').replace(/\+/g, '-').replace(/\//g, '_');
  };

  this.html_identifier_decode = function(str)
  {
    str = String(str).replace(/-/g, '+').replace(/_/g, '/');

    while (str.length % 4) str += '=';

    return Base64.decode(str);
  };


  /*********************************************************/
  /*********        event handling methods         *********/
  /*********************************************************/

  this.drag_menu = function(e, target)
  {
    var modkey = rcube_event.get_modifier(e),
      menu = this.gui_objects.dragmenu;

    if (menu &amp;&amp; modkey == SHIFT_KEY &amp;&amp; this.commands['copy']) {
      var pos = rcube_event.get_mouse_pos(e);
      this.env.drag_target = target;
      this.show_menu(this.gui_objects.dragmenu.id, true, e);
      $(menu).css({top: (pos.y-10)+'px', left: (pos.x-10)+'px'});
      return true;
    }

    return false;
  };

  this.drag_menu_action = function(action)
  {
    var menu = this.gui_objects.dragmenu;
    if (menu) {
      $(menu).hide();
    }

    this.command(action, this.env.drag_target);
    this.env.drag_target = null;
  };

  this.drag_start = function(list)
  {
    this.drag_active = true;

    if (this.preview_timer)
      clearTimeout(this.preview_timer);

    // prepare treelist widget for dragging interactions
    if (this.treelist)
      this.treelist.drag_start();
  };

  this.drag_end = function(e)
  {
    var list, model;

    if (this.treelist)
      this.treelist.drag_end();

    // execute drag &amp; drop action when mouse was released
    if (list = this.message_list)
      model = this.env.mailboxes;
    else if (list = this.contact_list)
      model = this.env.contactfolders;

    // Note: we accept only mouse events to ignore dragging aborts with ESC key (#6623)
    if (this.drag_active &amp;&amp; model &amp;&amp; this.env.last_folder_target &amp;&amp; !rcube_event.is_keyboard(e)) {
      var target = model[this.env.last_folder_target];
      list.draglayer.hide();

      if (this.contact_list) {
        if (!this.contacts_drag_menu(e, target))
          this.command('move', target);
      }
      else if (!this.drag_menu(e, target))
        this.command('move', target);
    }

    this.drag_active = false;
    this.env.last_folder_target = null;
  };

  this.drag_move = function(e)
  {
    if (this.gui_objects.folderlist) {
      var drag_target, oldclass,
        layerclass = 'draglayernormal',
        mouse = rcube_event.get_mouse_pos(e);

      if (this.contact_list &amp;&amp; this.contact_list.draglayer)
        oldclass = this.contact_list.draglayer.attr('class');

      // mouse intersects a valid drop target on the treelist
      if (this.treelist &amp;&amp; (drag_target = this.treelist.intersects(mouse, true))) {
        this.env.last_folder_target = drag_target;
        layerclass = 'draglayer' + (this.check_droptarget(drag_target) > 1 ? 'copy' : 'normal');
      }
      else {
        // Clear target, otherwise drag end will trigger move into last valid droptarget
        this.env.last_folder_target = null;
      }

      if (layerclass != oldclass &amp;&amp; this.contact_list &amp;&amp; this.contact_list.draglayer)
        this.contact_list.draglayer.attr('class', layerclass);
    }
  };

  this.collapse_folder = function(name)
  {
    if (this.treelist)
      this.treelist.toggle(name);
  };

  this.folder_collapsed = function(node)
  {
    if (this.folder_collapsed_timer)
      clearTimeout(this.folder_collapsed_timer);

    var prefname = this.env.task == 'addressbook' ? 'collapsed_abooks' : 'collapsed_folders',
      old = this.env[prefname];

    if (node.collapsed) {
      this.env[prefname] = this.env[prefname] + '&amp;'+urlencode(node.id)+'&amp;';

      // select the folder if one of its children is currently selected
      // don't select if it's virtual (#1488346)
      if (!node.virtual &amp;&amp; this.env.mailbox &amp;&amp; this.env.mailbox.startsWith(node.id + this.env.delimiter))
        this.command('list', node.id);
    }
    else {
      var reg = new RegExp('&amp;'+urlencode(node.id)+'&amp;');
      this.env[prefname] = this.env[prefname].replace(reg, '');
    }

    if (!this.drag_active) {
      if (old !== this.env[prefname])
        this.folder_collapsed_timer = setTimeout(function() { ref.command('save-pref', { name: prefname, value: ref.env[prefname] }); }, 10);

      if (this.env.unread_counts)
        this.set_unread_count_display(node.id, false);
    }
  };

  // global mouse-click handler to cleanup some UI elements
  this.doc_mouse_up = function(e)
  {
    var list, id, target = rcube_event.get_target(e);

    // ignore event if jquery UI dialog is open
    if ($(target).closest('.ui-dialog, .ui-widget-overlay').length)
      return;

    // remove focus from list widgets
    if (window.rcube_list_widget &amp;&amp; rcube_list_widget._instances.length) {
      $.each(rcube_list_widget._instances, function(i,list) {
        if (list &amp;&amp; !rcube_mouse_is_over(e, list.list.parentNode))
          list.blur();
      });
    }

    // reset 'pressed' buttons
    if (this.buttons_sel) {
      for (id in this.buttons_sel)
        if (typeof id !== 'function')
          this.button_out(this.buttons_sel[id], id);
      this.buttons_sel = {};
    }

    // reset popup menus; delayed to have updated menu_stack data
    setTimeout(function(e) {
      var obj, skip, config, id, i, parents = $(target).parents();
      for (i = ref.menu_stack.length - 1; i >= 0; i--) {
        id = ref.menu_stack[i];
        obj = $('#' + id);

        if (obj.is(':visible')
          &amp;&amp; target != obj.data('opener')
          &amp;&amp; target != obj.get(0)  // check if scroll bar was clicked (#1489832)
          &amp;&amp; !parents.is(obj.data('opener'))
          &amp;&amp; id != skip
          &amp;&amp; (obj.attr('data-editable') != 'true' || !$(target).parents('#' + id).length)
          &amp;&amp; (obj.attr('data-sticky') != 'true' || !rcube_mouse_is_over(e, obj.get(0)))
        ) {
          ref.hide_menu(id, e);
        }
        skip = obj.data('parent');
      }
    }, 10, e);
  };

  // global keypress event handler
  this.doc_keypress = function(e)
  {
    // Helper method to move focus to the next/prev active menu item
    var focus_menu_item = function(dir) {
      var obj, item, mod = dir &lt; 0 ? 'prevAll' : 'nextAll', limit = dir &lt; 0 ? 'last' : 'first';
      if (ref.focused_menu &amp;&amp; (obj = $('#'+ref.focused_menu))) {
        item = obj.find(':focus').closest('li')[mod]().has(':not([aria-disabled=true])').find('a,input')[limit]();
        if (!item.length)
          item = obj.find(':focus').closest('ul')[mod]().has(':not([aria-disabled=true])').find('a,input')[limit]();
        return item.focus().length;
      }

      return 0;
    };

    var target = e.target || {},
      keyCode = rcube_event.get_keycode(e);

    if (e.keyCode != 27 &amp;&amp; (!this.menu_keyboard_active || target.nodeName == 'TEXTAREA' || target.nodeName == 'SELECT')) {
      return true;
    }

    switch (keyCode) {
      case 38:
      case 40:
      case 63232: // "up", in safari keypress
      case 63233: // "down", in safari keypress
        focus_menu_item(keyCode == 38 || keyCode == 63232 ? -1 : 1);
        return rcube_event.cancel(e);

      case 9:   // tab
        if (this.focused_menu) {
          var mod = rcube_event.get_modifier(e);
          if (!focus_menu_item(mod == SHIFT_KEY ? -1 : 1)) {
            this.hide_menu(this.focused_menu, e);
          }
        }
        return rcube_event.cancel(e);

      case 27:  // esc
        if (this.menu_stack.length)
          this.hide_menu(this.menu_stack[this.menu_stack.length-1], e);
        break;
    }

    return true;
  }

  // Common handler for a keypress event on a list widget
  this.list_keypress = function(list, conf)
  {
    if (list.modkey == CONTROL_KEY)
      return;

    if (list.key_pressed == list.DELETE_KEY || list.key_pressed == list.BACKSPACE_KEY)
      this.command(conf &amp;&amp; conf.del ? conf.del : 'delete');
    else if (list.key_pressed == 33)
      this.command(conf &amp;&amp; conf.prev ? conf.prev : 'previouspage');
    else if (list.key_pressed == 34)
      this.command(conf &amp;&amp; conf.next ? conf.next : 'nextpage');
  };

  // Handler for a keypress event on a messages list widget
  this.msglist_keypress = function(list)
  {
    // On Enter open the message in list layout mode (no preview frame)
    if (list.key_pressed == list.ENTER_KEY &amp;&amp; !this.env.contentframe)
      this.command('show');
    else
      this.list_keypress(list);
  };

  this.msglist_select = function(list)
  {
    if (this.preview_timer)
      clearTimeout(this.preview_timer);

    var isDraft = false,
      selected = list.get_single_selection(),
      selection = list.get_selection(false),
      selected_count = selection.length;

    this.enable_command(this.env.message_commands, selected != null);

    // Find out whether any of the selected messages comes from the Drafts folder
    if (selected_count > 0) {
      if (!this.env.multifolder_listing) {
        isDraft = this.env.mailbox == this.env.drafts_mailbox
      }
      else {
        $.each(selection, function(i, v) {
          if (ref.get_message_mailbox(v) == ref.env.drafts_mailbox) {
            isDraft = true;
            return false;
          }
        });
      }
    }

    // Disable some actions enabled above
    if (selected) {
      if (isDraft) {
        this.enable_command('reply', 'reply-all', 'reply-list', 'forward', 'forward-inline',
          'forward-attachment', 'bounce', false);
      }
      else {
        var msg = this.env.messages[selected];
        if (!msg.ml)
          this.enable_command('reply-list', false);
      }
    }

    // Multi-message commands
    this.enable_command('delete', 'move', 'copy', 'mark', selected_count > 0);
    this.enable_command('forward', 'forward-attachment', !isDraft &amp;&amp; selected_count > 0);

    // reset all-pages-selection
    if (selected || (selected_count &amp;&amp; selected_count != list.rowcount))
      this.select_all_mode = false;

    // start timer for message preview (wait for double click)
    if (selected &amp;&amp; this.env.contentframe &amp;&amp; !list.multi_selecting &amp;&amp; !this.dummy_select) {
      // try to be responsive and try not to overload the server when user is pressing up/down key repeatedly
      var now = new Date().getTime(),
        time_diff = now - (this._last_msglist_select_time || 0),
        preview_pane_delay = this.preview_delay_click;

      // user is selecting messages repeatedly, wait until this ends (use larger delay)
      if (time_diff &lt; this.preview_delay_select) {
        preview_pane_delay = this.preview_delay_select;
        if (this.preview_timer) {
          clearTimeout(this.preview_timer);
        }
        if (this.env.contentframe) {
          this.show_contentframe(false);
        }
      }

      this._last_msglist_select_time = now;
      this.preview_timer = setTimeout(function() { ref.msglist_get_preview(); }, preview_pane_delay);
    }
    else if (this.env.contentframe) {
      this.show_contentframe(false);
    }
  };

  this.msglist_dbl_click = function(list)
  {
    if (this.preview_timer)
      clearTimeout(this.preview_timer);

    var mbox, uid = list.get_single_selection();

    // TODO: Here we should just use this.command('show') but we can't
    // because at this point this.busy=true (set by msglist_get_preview())

    if (uid) {
      mbox = this.get_message_mailbox(uid);
      if (mbox == this.env.drafts_mailbox)
        this.open_compose_step({_draft_uid: uid, _mbox: mbox});
      else
        this.show_message(uid);
    }
  };

  this.msglist_get_preview = function()
  {
    var uid = this.get_single_uid();
    if (uid &amp;&amp; this.env.contentframe &amp;&amp; !this.drag_active)
      this.show_message(uid, false, true);
    else if (this.env.contentframe)
      this.show_contentframe(false);
  };

  this.msglist_expand = function(row)
  {
    if (this.env.messages[row.uid])
      this.env.messages[row.uid].expanded = row.expanded;
    $(row.obj)[row.expanded?'addClass':'removeClass']('expanded');
  };

  this.msglist_set_coltypes = function(list)
  {
    var i, found, name, cols = list.thead.rows[0].cells;

    this.env.listcols = [];

    for (i=0; i&lt;cols.length; i++)
      if (cols[i].id &amp;&amp; cols[i].id.startsWith('rcm')) {
        name = cols[i].id.slice(3);
        this.env.listcols.push(name);
      }

    // update message list setup
    this.msglist_setup(this.env.layout);

    if ((found = $.inArray('flag', this.env.listcols)) >= 0)
      this.env.flagged_col = found;

    if ((found = $.inArray('subject', this.env.listcols)) >= 0)
      this.env.subject_col = found;

    this.command('save-pref', { name: 'list_cols', value: this.env.listcols, session: 'list_attrib/columns' });
  };

  this.msglist_setup = function(layout)
  {
    var ret, listcols;

    // allow plugins or skins to override default list layout
    if (ret = this.triggerEvent('msglist_layout', layout))
      layout = ret;

    listcols = this.env[layout == 'widescreen' ? 'listcols_widescreen' : 'listcols'];

    if (layout == 'widescreen' &amp;&amp; !this.env.threading)
      listcols = $.grep(listcols, function(value) { return value != 'threads'; });

    // set env vars for message list
    this.env.msglist_layout = layout;
    this.env.msglist_cols = listcols;

    // Set sort-* class on the list element
    var list = this.gui_objects.messagelist,
      classes = list.className.split(' ').filter(function(v) { return !v.startsWith('sort-'); });

    classes.push('sort-' + (this.env.sort_col || 'none'));
    list.className = classes.join(' ');
  };

  this.check_droptarget = function(id)
  {
    switch (this.task) {
      case 'mail':
        return (this.env.mailboxes[id]
            &amp;&amp; !this.env.mailboxes[id].virtual
            &amp;&amp; (this.env.mailboxes[id].id != this.env.mailbox || this.is_multifolder_listing())) ? 1 : 0;

      case 'addressbook':
        var target;
        if (id != this.env.source &amp;&amp; (target = this.env.contactfolders[id])) {
          // droptarget is a group
          if (target.type == 'group') {
            if (target.id != this.env.group &amp;&amp; !this.env.contactfolders[target.source].readonly) {
              var is_other = this.env.selection_sources.length > 1 || $.inArray(target.source, this.env.selection_sources) == -1;
              return !is_other || this.commands.move ? 1 : 2;
            }
          }
          // droptarget is a (writable) addressbook and it's not the source
          else if (!target.readonly &amp;&amp; (this.env.selection_sources.length > 1 || $.inArray(id, this.env.selection_sources) == -1)) {
            return this.commands.move ? 1 : 2;
          }
        }
    }

    return 0;
  };

  // open popup window
  this.open_window = function(url, small, toolbar)
  {
    var wname = 'rcmextwin' + new Date().getTime();

    url += (url.match(/\?/) ? '&amp;' : '?') + '_extwin=1';

    if (this.env.standard_windows)
      var extwin = window.open(url, wname);
    else {
      var win = this.is_framed() ? parent.window : window,
        page = $(win),
        page_width = page.width(),
        page_height = bw.mz ? $('body', win).height() : page.height(),
        w = Math.min(small ? this.env.popup_width_small : this.env.popup_width, page_width),
        h = page_height, // always use same height
        l = (win.screenLeft || win.screenX) + 20,
        t = (win.screenTop || win.screenY) + 20,
        extwin = window.open(url, wname,
          'width='+w+',height='+h+',top='+t+',left='+l+',resizable=yes,location=no,scrollbars=yes'
          +(toolbar ? ',toolbar=yes,menubar=yes,status=yes' : ',toolbar=no,menubar=no,status=no'));
    }

    // detect popup blocker (#1489618)
    // don't care this might not work with all browsers
    if (!extwin || extwin.closed) {
      this.display_message('windowopenerror', 'warning');
      return;
    }

    // write loading... message to empty windows
    if (!url &amp;&amp; extwin.document) {
      extwin.document.write('&lt;html>&lt;body>' + this.get_label('loading') + '&lt;/body>&lt;/html>');
    }

    // allow plugins to grab the window reference (#1489413)
    this.triggerEvent('openwindow', { url:url, handle:extwin });

    // focus window, delayed to bring to front
    setTimeout(function() { extwin &amp;&amp; extwin.focus(); }, 10);

    return extwin;
  };


  /*********************************************************/
  /*********     (message) list functionality      *********/
  /*********************************************************/

  this.init_message_row = function(row)
  {
    var i, fn = {}, uid = row.uid,
      status_icon = (this.env.status_col != null ? 'status' : 'msg') + 'icn' + row.id;

    if (uid &amp;&amp; this.env.messages[uid])
      $.extend(row, this.env.messages[uid]);

    // set eventhandler to status icon
    if (row.icon = document.getElementById(status_icon)) {
      fn.icon = function(e) { ref.command('toggle_status', uid); };
    }

    // save message icon position too
    if (this.env.status_col != null)
      row.msgicon = document.getElementById('msgicn'+row.id);
    else
      row.msgicon = row.icon;

    // set eventhandler to flag icon
    if (this.env.flagged_col != null &amp;&amp; (row.flagicon = document.getElementById('flagicn'+row.id))) {
      fn.flagicon = function(e) { ref.command('toggle_flag', uid); };
    }

    // set event handler to thread expand/collapse icon
    if (!row.depth &amp;&amp; row.has_children &amp;&amp; (row.expando = document.getElementById('rcmexpando'+row.id))) {
      fn.expando = function(e) { ref.expand_message_row(e, uid); };
    }

    // attach events
    $.each(fn, function(i, f) {
      row[i].onclick = function(e) { f(e); return rcube_event.cancel(e); };
      if (bw.touch &amp;&amp; row[i].addEventListener) {
        row[i].addEventListener('touchend', function(e) {
          if (e.changedTouches.length == 1) {
            f(e);
            return rcube_event.cancel(e);
          }
        }, false);
      }
    });

    this.triggerEvent('insertrow', { uid:uid, row:row });
  };

  // create a table row in the message list
  this.add_message_row = function(uid, cols, flags, attop)
  {
    if (!this.gui_objects.messagelist || !this.message_list)
      return false;

    // Prevent from adding messages from different folder (#1487752)
    if (flags.mbox != this.env.mailbox &amp;&amp; !flags.skip_mbox_check)
      return false;

    // When deleting messages fast it may happen that the same message
    // from the next page could be added many times, we prevent this here
    if (this.message_list.rows[uid])
      return false;

    if (!this.env.messages[uid])
      this.env.messages[uid] = {};

    // merge flags over local message object
    $.extend(this.env.messages[uid], {
      deleted: flags.deleted?1:0,
      replied: flags.answered?1:0,
      unread: !flags.seen?1:0,
      forwarded: flags.forwarded?1:0,
      flagged: flags.flagged?1:0,
      has_children: flags.has_children?1:0,
      depth: flags.depth?flags.depth:0,
      unread_children: flags.unread_children || 0,
      flagged_children: flags.flagged_children || 0,
      parent_uid: flags.parent_uid || 0,
      selected: this.select_all_mode || this.message_list.in_selection(uid),
      ml: flags.ml?1:0,
      ctype: flags.ctype,
      mbox: flags.mbox,
      // flags from plugins
      flags: flags.extra_flags
    });

    var c, n, col, html, css_class, label, status_class = '', status_label = '',
      tree = '', expando = '',
      list = this.message_list,
      rows = list.rows,
      message = this.env.messages[uid],
      msg_id = this.html_identifier(uid,true),
      row_class = 'message'
        + (!flags.seen ? ' unread' : '')
        + (flags.deleted ? ' deleted' : '')
        + (flags.flagged ? ' flagged' : '')
        + (message.selected ? ' selected' : ''),
      row = { cols:[], style:{}, id:'rcmrow'+msg_id, uid:uid },
      layout = this.env.msglist_layout,
      listcols = this.env.msglist_cols;

    // widescreen layout does not have a separate status column
    if (layout == 'widescreen')
      this.env.status_col = null;
    else if ((n = $.inArray('status', listcols)) >= 0)
      this.env.status_col = n;

    // message status icons
    css_class = 'msgicon';
    if (this.env.status_col === null) {
      css_class += ' status';
      if (flags.deleted) {
        status_class += ' deleted';
        status_label += this.get_label('deleted') + ' ';
      }
      else if (!flags.seen) {
        status_class += ' unread';
        status_label += this.get_label('unread') + ' ';
      }
      else if (flags.unread_children > 0) {
        status_class += ' unreadchildren';
      }
    }
    if (flags.answered) {
      status_class += ' replied';
      status_label += this.get_label('replied') + ' ';
    }
    if (flags.forwarded) {
      status_class += ' forwarded';
      status_label += this.get_label('forwarded') + ' ';
    }

    // update selection
    if (message.selected &amp;&amp; !list.in_selection(uid))
      list.selection.push(uid);

    // threads
    if (this.env.threading) {
      if (message.depth) {
        // This assumes that div width is hardcoded to 15px,
        tree += '&lt;span id="rcmtab' + msg_id + '" class="branch" style="width:' + (message.depth * 15) + 'px;">&amp;nbsp;&amp;nbsp;&lt;/span>';

        if ((rows[message.parent_uid] &amp;&amp; rows[message.parent_uid].expanded === false)
          || ((this.env.autoexpand_threads == 0 || this.env.autoexpand_threads == 2) &amp;&amp;
            (!rows[message.parent_uid] || !rows[message.parent_uid].expanded))
        ) {
          row.style.display = 'none';
          message.expanded = false;
        }
        else
          message.expanded = true;

        row_class += ' thread expanded';
      }
      else if (message.has_children) {
        if (message.expanded === undefined &amp;&amp; (this.env.autoexpand_threads == 1 || (this.env.autoexpand_threads == 2 &amp;&amp; message.unread_children))) {
          message.expanded = true;
        }

        expando = '&lt;div id="rcmexpando' + row.id + '" class="' + (message.expanded ? 'expanded' : 'collapsed') + '">&amp;nbsp;&amp;nbsp;&lt;/div>';
        row_class += ' thread' + (message.expanded ? ' expanded' : '');
      }

      if (flags.unread_children &amp;&amp; flags.seen &amp;&amp; !message.expanded)
        row_class += ' unroot';

      if (flags.flagged_children &amp;&amp; !message.expanded)
        row_class += ' flaggedroot';
    }

    tree += '&lt;span id="msgicn'+row.id+'" class="'+css_class+status_class+'" title="'+status_label+'">&lt;/span>';
    row.className = row_class;

    // build subject link
    if (cols.subject) {
      var action  = flags.mbox == this.env.drafts_mailbox ? 'compose' : 'show',
        uid_param = flags.mbox == this.env.drafts_mailbox ? '_draft_uid' : '_uid',
        query = { _mbox: flags.mbox };
      query[uid_param] = uid;
      cols.subject = '&lt;a href="' + this.url(action, query) + '" onclick="return rcube_event.keyboard_only(event)"' +
        ' onmouseover="rcube_webmail.long_subject_title(this,'+(message.depth+1)+')" tabindex="-1">&lt;span>'+cols.subject+'&lt;/span>&lt;/a>';
    }

    // add each submitted col
    for (n in listcols) {
      c = listcols[n];
      col = {className: String(c).toLowerCase(), events:{}};

      if (this.env.coltypes[c] &amp;&amp; this.env.coltypes[c].hidden) {
        col.className += ' hidden';
      }

      if (c == 'flag') {
        css_class = (flags.flagged ? 'flagged' : 'unflagged');
        label = this.get_label(css_class);
        html = '&lt;span id="flagicn'+row.id+'" class="'+css_class+'" title="'+label+'">&lt;/span>';
      }
      else if (c == 'attachment') {
        label = this.get_label('withattachment');
        if (flags.attachmentClass)
          html = '&lt;span class="'+flags.attachmentClass+'" title="'+label+'">&lt;/span>';
        else if (flags.ctype == 'multipart/report')
          html = '&lt;span class="report">&lt;/span>';
        else if (flags.ctype == 'multipart/encrypted' || flags.ctype == 'application/pkcs7-mime')
          html = '&lt;span class="encrypted">&lt;/span>';
        else if (flags.hasattachment || (!flags.hasnoattachment &amp;&amp; /application\/|multipart\/(m|signed)/.test(flags.ctype)))
          html = '&lt;span class="attachment" title="'+label+'">&lt;/span>';
        else
          html = '&amp;nbsp;';
      }
      else if (c == 'status') {
        label = '';
        if (flags.deleted) {
          css_class = 'deleted';
          label = this.get_label('deleted');
        }
        else if (!flags.seen) {
          css_class = 'unread';
          label = this.get_label('unread');
        }
        else if (flags.unread_children > 0) {
          css_class = 'unreadchildren';
        }
        else
          css_class = 'msgicon';
        html = '&lt;span id="statusicn'+row.id+'" class="'+css_class+status_class+'" title="'+label+'">&lt;/span>';
      }
      else if (c == 'threads')
        html = expando;
      else if (c == "fromto")//PAMELA
      {
        html = tree + cols[c];
      }
      else if (c == 'subject') {
        html = cols[c];
      }
      else if (c == 'priority') {
        if (flags.prio > 0 &amp;&amp; flags.prio &lt; 6) {
          label = this.get_label('priority') + ' ' + flags.prio;
          html = '&lt;span class="prio'+flags.prio+'" title="'+label+'">&lt;/span>';
        }
        else
          html = '&amp;nbsp;';
      }
      else if (c == 'folder') {
        html = '&lt;span onmouseover="rcube_webmail.long_subject_title(this)">' + cols[c] + '&lt;span>';
      }
      else
        html = cols[c];

      // PAMELA
      col.innerHTML = rcmail.triggerEvent('rcmail.addrow.update_html', {html, uid, cols, flags, attop, c}) || html;;
      row.cols.push(col);
    }

    if (layout == 'widescreen')
      row = this.widescreen_message_row(row, uid, message);

    list.insert_row(row, attop);

    // remove 'old' row
    if (attop &amp;&amp; this.env.pagesize &amp;&amp; list.rowcount > this.env.pagesize) {
      var uid = list.get_last_row();
      list.remove_row(uid);
      list.clear_selection(uid);
    }
  };

  // Converts standard message list record into "widescreen" (3-column) layout
  this.widescreen_message_row = function(row, uid, message)
  {
    var domrow = document.createElement('tr');

    domrow.id = row.id;
    domrow.uid = row.uid;
    domrow.className = row.className;
    if (row.style) $.extend(domrow.style, row.style);

    $.each(this.env.widescreen_list_template, function() {
      if (!ref.env.threading &amp;&amp; this.className == 'threads')
        return;

      var i, n, e, col, domcol,
        domcell = document.createElement('td');

      if (this.className) domcell.className = this.className;

      for (i=0; this.cells &amp;&amp; i &lt; this.cells.length; i++) {
        for (n=0; row.cols &amp;&amp; n &lt; row.cols.length; n++) {
          if (this.cells[i] == row.cols[n].className) {
            col = row.cols[n];
            domcol = document.createElement('span');
            domcol.className = this.cells[i];
            if (this.className == 'subject' &amp;&amp; domcol.className != 'subject')
              domcol.className += ' skip-on-drag';
            if (col.innerHTML)
              domcol.innerHTML = col.innerHTML;
            domcell.appendChild(domcol);
            break;
          }
        }
      }

      domrow.appendChild(domcell);
    });

    if (this.env.threading &amp;&amp; message.depth) {
      n = this.calculate_thread_padding(message.depth);
      $('td.subject', domrow).attr('style', 'padding-left:' + n + ' !important');
      $('span.branch', domrow).remove();
    }

    return domrow;
  };

  this.calculate_thread_padding = function(level)
  {
     ref.env.thread_padding.match(/^([0-9.]+)(.+)/);
     return (Math.min(6, level) * parseFloat(RegExp.$1)) + RegExp.$2;
  };

  this.set_list_sorting = function(sort_col, sort_order)
  {
    var sort_old = this.env.sort_col == 'arrival' ? 'date' : this.env.sort_col,
      sort_new = sort_col == 'arrival' ? 'date' : sort_col;

    // set table header class
    $('#rcm' + sort_old).removeClass('sorted' + this.env.sort_order.toUpperCase());
    if (sort_new)
      $('#rcm' + sort_new).addClass('sorted' + sort_order);

    // if sorting by 'arrival' is selected, click on date column should not switch to 'date'
    $('#rcmdate > a').prop('rel', sort_col == 'arrival' ? 'arrival' : 'date');

    this.env.sort_col = sort_col;
    this.env.sort_order = sort_order;
  };

  this.set_list_options = function(cols, sort_col, sort_order, threads, layout)
  {
    var update, post_data = {};

    if (sort_col === undefined)
      sort_col = this.env.sort_col;
    if (!sort_order)
      sort_order = this.env.sort_order;

    if (this.env.sort_col != sort_col || this.env.sort_order != sort_order) {
      update = 1;
      this.set_list_sorting(sort_col, sort_order);
    }

    if (this.env.threading != threads) {
      update = 1;
      post_data._threads = threads;
    }

    if (layout &amp;&amp; this.env.layout != layout) {
      this.triggerEvent('layout-change', {old_layout: this.env.layout, new_layout: layout});
      update = 1;
      this.env.layout = post_data._layout = layout;

      // update message list setup
      this.msglist_setup(this.env.layout);
    }

    if (cols &amp;&amp; cols.length) {
      // make sure new columns are added at the end of the list
      var i, idx, name, newcols = [], oldcols = this.env.listcols;

      for (i=0; i&lt;oldcols.length; i++) {
        name = oldcols[i];
        idx = $.inArray(name, cols);
        if (idx != -1) {
          newcols.push(name);
          delete cols[idx];
        }
      }
      for (i=0; i&lt;cols.length; i++)
        if (cols[i])
          newcols.push(cols[i]);

      if (newcols.join() != oldcols.join()) {
        update = 1;
        post_data._cols = newcols.join(',');
      }
    }

    if (update)
      this.list_mailbox('', '', sort_col+'_'+sort_order, post_data);
  };

  // when user double-clicks on a row
  this.show_message = function(id, safe, preview)
  {
    if (!id)
      return;

    var win, target = window,
      url = this.params_from_uid(id, {_caps: this.browser_capabilities()});

    if (preview &amp;&amp; (win = this.get_frame_window(this.env.contentframe))) {
      target = win;
      url._framed = 1;
    }

    if (safe)
      url._safe = 1;

    // also send search request to get the right messages
    if (this.env.search_request)
      url._search = this.env.search_request;

    if (this.env.extwin)
      url._extwin = 1;

    url = this.url(preview ? 'preview': 'show', url);

    if (preview)
      this.preview_id = id;

    if (preview &amp;&amp; String(target.location.href).indexOf(url) >= 0) {
      this.show_contentframe(true);
    }
    else {
      if (!preview &amp;&amp; this.env.message_extwin &amp;&amp; !this.env.extwin)
        this.open_window(url, true);
      else {
        // "Allow remote resources" reloads the page, we remove this request from the history,
        // so Back button works as expected, i.e. ignores the reload request (#6620)
        if (safe &amp;&amp; document.referrer &amp;&amp; window.history.replaceState)
          window.history.replaceState({}, '', document.referrer);

        this.location_href(url, target, true);
      }
    }
  };

  // update message status and unread counter after marking a message as read
  this.set_unread_message = function(id, folder)
  {
    var self = this;

    // find window with messages list
    if (!self.message_list)
      self = self.opener();

    if (!self &amp;&amp; window.parent)
      self = parent.rcmail;

    if (!self || !self.message_list)
      return;

    // this may fail in multifolder mode
    if (self.set_message(id, 'unread', false) === false)
      self.set_message(id + '-' + folder, 'unread', false);

    if (self.env.unread_counts[folder] > 0) {
      self.env.unread_counts[folder] -= 1;
      self.set_unread_count(folder, self.env.unread_counts[folder], folder == 'INBOX' &amp;&amp; !self.is_multifolder_listing());
    }
  };

  this.show_contentframe = function(show)
  {
    var frame, win, name = this.env.contentframe;

    if (frame = this.get_frame_element(name)) {
      if (!show &amp;&amp; (win = this.get_frame_window(name))) {
        if (win.location.href.indexOf(this.env.blankpage) &lt; 0) {
          if (win.stop)
            win.stop();
          else // IE
            win.document.execCommand('Stop');

          win.location.href = this.env.blankpage;
        }
      }
      else if (!bw.safari &amp;&amp; !bw.konq)
        $(frame)[show ? 'show' : 'hide']();
    }

    if (!show) {
      this.unlock_frame();
      delete this.preview_id;
    }
  };

  this.get_frame_element = function(id)
  {
    var frame;

    if (id &amp;&amp; (frame = document.getElementById(id)))
      return frame;
  };

  this.get_frame_window = function(id)
  {
    var frame = this.get_frame_element(id);

    if (frame &amp;&amp; frame.name &amp;&amp; window.frames)
      return window.frames[frame.name];
  };

  this.lock_frame = function(target)
  {
    var rc = this.is_framed() ? parent.rcmail : this;

    if (!rc.env.frame_lock)
      rc.env.frame_lock = rc.set_busy(true, 'loading');

    if (target.frameElement)
      $(target.frameElement).on('load.lock', function(e) {
        rc.unlock_frame();
        $(this).off('load.lock');
      });
  };

  this.unlock_frame = function()
  {
    if (this.env.frame_lock) {
      this.set_busy(false, null, this.env.frame_lock);
      this.env.frame_lock = null;
    }
  };

  // list a specific page
  this.list_page = function(page)
  {
    if (page == 'next')
      page = this.env.current_page+1;
    else if (page == 'last')
      page = this.env.pagecount;
    else if (page == 'prev' &amp;&amp; this.env.current_page > 1)
      page = this.env.current_page-1;
    else if (page == 'first' &amp;&amp; this.env.current_page > 1)
      page = 1;

    if (page > 0 &amp;&amp; page &lt;= this.env.pagecount) {
      this.env.current_page = page;

      if (this.task == 'addressbook' || this.contact_list)
        this.list_contacts(this.env.source, this.env.group, page);
      else if (this.task == 'mail')
        this.list_mailbox(this.env.mailbox, page);
    }
  };

  // sends request to check for recent messages
  this.checkmail = function()
  {
    var lock = this.set_busy(true, 'checkingmail'),
      params = this.check_recent_params();

    this.http_post('check-recent', params, lock);
  };

  // list messages of a specific mailbox using filter
  this.filter_mailbox = function(filter)
  {
    if (this.filter_disabled)
      return;

    var params = this.search_params(false, filter),
      lock = this.set_busy(true, 'searching');

    this.clear_message_list();

    // reset vars
    this.env.current_page = 1;
    this.env.search_filter = filter;
    this.http_request('search', params, lock);
    this.update_state({_mbox: params._mbox, _filter: filter, _scope: params._scope});
  };

  // reload the current message listing
  this.refresh_list = function()
  {
    this.list_mailbox(this.env.mailbox, this.env.current_page || 1, null, { _clear:1 }, true);
    if (this.message_list)
      this.message_list.clear_selection();
  };

  // list messages of a specific mailbox
  this.list_mailbox = function(mbox, page, sort, url, update_only)
  {
    var win, target = window;

    if (typeof url != 'object')
      url = {};

    if (!mbox)
      mbox = this.env.mailbox ? this.env.mailbox : 'INBOX';

    // add sort to url if set
    if (sort)
      url._sort = sort;

    // folder change, reset page, search scope, etc.
    if (this.env.mailbox != mbox) {
      page = 1;
      this.env.current_page = page;
      this.env.search_scope = 'base';
      this.select_all_mode = false;
      this.reset_search_filter();
    }
    // also send search request to get the right messages
    else if (this.env.search_request)
      url._search = this.env.search_request;

    if (!update_only) {
      // unselect selected messages and clear the list and message data
      this.clear_message_list();

      if (mbox != this.env.mailbox || (mbox == this.env.mailbox &amp;&amp; !page &amp;&amp; !sort))
        url._refresh = 1;

      this.select_folder(mbox, '', true);
      this.unmark_folder(mbox, 'recent', '', true);
      this.env.mailbox = mbox;
    }

    // load message list remotely
    if (this.gui_objects.messagelist) {
      this.list_mailbox_remote(mbox, page, url);
      return;
    }

    if (win = this.get_frame_window(this.env.contentframe)) {
      target = win;
      url._framed = 1;
    }

    if (this.env.uid)
      url._uid = this.env.uid;

    if (page)
      url._page = page;

    // load message list to target frame/window
    if (mbox) {
      url._mbox = mbox;
      this.set_busy(true, 'loading');
      this.location_href(url, target);
    }
  };

  this.clear_message_list = function()
  {
    this.env.messages = {};

    this.show_contentframe(false);
    if (this.message_list)
      this.message_list.clear(true);
  };

  // send remote request to load message list
  this.list_mailbox_remote = function(mbox, page, url)
  {
    var lock = this.set_busy(true, 'loading');

    if (typeof url != 'object')
      url = {};

    url._layout = this.env.layout
    url._mbox = mbox;
    url._page = page;

    this.http_request('list', url, lock);
    this.update_state({ _mbox: mbox, _page: (page &amp;&amp; page > 1 ? page : null) });
  };

  // removes messages that doesn't exists from list selection array
  this.update_selection = function()
  {
    var list = this.message_list,
      selected = list.selection,
      rows = list.rows,
      i, selection = [];

    for (i in selected)
      if (rows[selected[i]])
        selection.push(selected[i]);

    list.selection = selection;

    // reset preview frame, if currently previewed message is not selected (has been removed)
    try {
      var win = this.get_frame_window(this.env.contentframe),
        id = win.rcmail.env.uid;

      if (id &amp;&amp; !list.in_selection(id))
        this.show_contentframe(false);
    }
    catch (e) {};
  };

  // expand all threads with unread children
  this.expand_unread = function()
  {
    var r, tbody = this.message_list.tbody,
      new_row = tbody.firstChild;

    while (new_row) {
      if (new_row.nodeType == 1 &amp;&amp; (r = this.message_list.rows[new_row.uid]) &amp;&amp; r.unread_children) {
        this.message_list.expand_all(r);
        this.set_unread_children(r.uid);
      }

      new_row = new_row.nextSibling;
    }

    return false;
  };

  // thread expanding/collapsing handler
  this.expand_message_row = function(e, uid)
  {
    var row = this.message_list.rows[uid];

    // handle unread_children/flagged_children mark
    row.expanded = !row.expanded;
    this.set_unread_children(uid);
    this.set_flagged_children(uid);
    row.expanded = !row.expanded;

    this.message_list.expand_row(e, uid);
  };

  // message list expanding
  this.expand_threads = function()
  {
    if (!this.env.threading || !this.env.autoexpand_threads || !this.message_list)
      return;

    switch (this.env.autoexpand_threads) {
      case 2: this.expand_unread(); break;
      case 1: this.message_list.expand_all(); break;
    }
  };

  // Initializes threads indicators/expanders after list update
  this.init_threads = function(roots, mbox)
  {
    // #1487752
    if (mbox &amp;&amp; mbox != this.env.mailbox)
      return false;

    for (var n=0, len=roots.length; n&lt;len; n++)
      this.add_tree_icons(roots[n]);
    this.expand_threads();
  };

  // adds threads tree icons to the list (or specified thread)
  this.add_tree_icons = function(root)
  {
    var i, l, r, n, len, pos, tmp = [], uid = [],
      row, rows = this.message_list.rows;

    if (root)
      row = rows[root] ? rows[root].obj : null;
    else
      row = this.message_list.tbody.firstChild;

    while (row) {
      if (row.nodeType == 1 &amp;&amp; (r = rows[row.uid])) {
        if (r.depth) {
          for (i=tmp.length-1; i>=0; i--) {
            len = tmp[i].length;
            if (len > r.depth) {
              pos = len - r.depth;
              if (!(tmp[i][pos] &amp; 2))
                tmp[i][pos] = tmp[i][pos] ? tmp[i][pos]+2 : 2;
            }
            else if (len == r.depth) {
              if (!(tmp[i][0] &amp; 2))
                tmp[i][0] += 2;
            }
            if (r.depth > len)
              break;
          }

          tmp.push(new Array(r.depth));
          tmp[tmp.length-1][0] = 1;
          uid.push(r.uid);
        }
        else {
          if (tmp.length) {
            for (i in tmp) {
              this.set_tree_icons(uid[i], tmp[i]);
            }
            tmp = [];
            uid = [];
          }
          if (root &amp;&amp; row != rows[root].obj)
            break;
        }
      }
      row = row.nextSibling;
    }

    if (tmp.length) {
      for (i in tmp) {
        this.set_tree_icons(uid[i], tmp[i]);
      }
    }
  };

  // adds tree icons to specified message row
  this.set_tree_icons = function(uid, tree)
  {
    var i, divs = [], html = '', len = tree.length;

    for (i=0; i&lt;len; i++) {
      if (tree[i] > 2)
        divs.push({'class': 'l3', width: 15});
      else if (tree[i] > 1)
        divs.push({'class': 'l2', width: 15});
      else if (tree[i] > 0)
        divs.push({'class': 'l1', width: 15});
      // separator div
      else if (divs.length &amp;&amp; !divs[divs.length-1]['class'])
        divs[divs.length-1].width += 15;
      else
        divs.push({'class': null, width: 15});
    }

    for (i=divs.length-1; i>=0; i--) {
      if (divs[i]['class'])
        html += '&lt;div class="tree '+divs[i]['class']+'" />';
      else
        html += '&lt;div style="width:'+divs[i].width+'px" />';
    }

    if (html)
      $('#rcmtab'+this.html_identifier(uid, true)).html(html);
  };

  // update parent in a thread
  this.update_thread_root = function(uid, flag)
  {
    if (!this.env.threading)
      return;

    var root = this.message_list.find_root(uid);

    if (uid == root)
      return;

    var p = this.message_list.rows[root];

    if (flag == 'read' &amp;&amp; p.unread_children) {
      p.unread_children--;
    }
    else if (flag == 'unread' &amp;&amp; p.has_children) {
      // unread_children may be undefined
      p.unread_children = (p.unread_children || 0) + 1;
    }
    else if (flag == 'unflagged' &amp;&amp; p.flagged_children) {
      p.flagged_children--;
    }
    else if (flag == 'flagged' &amp;&amp; p.has_children) {
      p.flagged_children = (p.flagged_children || 0) + 1;
    }
    else {
      return;
    }

    this.set_message_icon(root);
    this.set_unread_children(root);
    this.set_flagged_children(root);
  };

  // update thread indicators for all messages in a thread below the specified message
  // return number of removed/added root level messages
  this.update_thread = function(uid)
  {
    if (!this.env.threading || !this.message_list.rows[uid])
      return 0;

    var r, parent, count = 0,
      list = this.message_list,
      rows = list.rows,
      row = rows[uid],
      depth = rows[uid].depth,
      roots = [];

    if (!row.depth) // root message: decrease roots count
      count--;

    // update unread_children for thread root
    if (row.depth &amp;&amp; row.unread) {
      parent = list.find_root(uid);
      rows[parent].unread_children--;
      this.set_unread_children(parent);
    }

    // update unread_children for thread root
    if (row.depth &amp;&amp; row.flagged) {
      parent = list.find_root(uid);
      rows[parent].flagged_children--;
      this.set_flagged_children(parent);
    }

    parent = row.parent_uid;

    // children
    row = row.obj.nextSibling;
    while (row) {
      if (row.nodeType == 1 &amp;&amp; (r = rows[row.uid])) {
        if (!r.depth || r.depth &lt;= depth)
          break;

        r.depth--; // move left
        // reset width and clear the content of a tab, icons will be added later
        $('#rcmtab'+r.id).width(r.depth * 15).html('');
        if (!r.depth) { // a new root
          count++; // increase roots count
          r.parent_uid = 0;
          if (r.has_children) {
            // replace 'leaf' with 'collapsed'
            $('#' + r.id + ' .leaf').first()
              .attr('id', 'rcmexpando' + r.id)
              .attr('class', (r.obj.style.display != 'none' ? 'expanded' : 'collapsed'))
              .mousedown({uid: r.uid}, function(e) {
                return ref.expand_message_row(e, e.data.uid);
              });

            r.unread_children = 0;
            roots.push(r);
          }
          // show if it was hidden
          if (r.obj.style.display == 'none')
            $(r.obj).show();
        }
        else {
          if (r.depth == depth)
            r.parent_uid = parent;
          if (r.unread &amp;&amp; roots.length)
            roots[roots.length-1].unread_children++;
        }
      }
      row = row.nextSibling;
    }

    // update unread_children/flagged_children for roots
    for (r=0; r&lt;roots.length; r++) {
      this.set_unread_children(roots[r].uid);
      this.set_flagged_children(roots[r].uid);
    }

    return count;
  };

  this.delete_excessive_thread_rows = function()
  {
    var rows = this.message_list.rows,
      tbody = this.message_list.tbody,
      row = tbody.firstChild,
      cnt = this.env.pagesize + 1;

    while (row) {
      if (row.nodeType == 1 &amp;&amp; (r = rows[row.uid])) {
        if (!r.depth &amp;&amp; cnt)
          cnt--;

        if (!cnt)
          this.message_list.remove_row(row.uid);
      }
      row = row.nextSibling;
    }
  };

  // set message icon
  this.set_message_icon = function(uid)
  {
    var css_class, label = '',
      row = this.message_list.rows[uid];

    if (!row)
      return false;

    if (row.icon) {
      css_class = 'msgicon';
      if (row.deleted) {
        css_class += ' deleted';
        label += this.get_label('deleted') + ' ';
      }
      else if (row.unread) {
        css_class += ' unread';
        label += this.get_label('unread') + ' ';
      }
      else if (row.unread_children)
        css_class += ' unreadchildren';
      if (row.msgicon == row.icon) {
        if (row.replied) {
          css_class += ' replied';
          label += this.get_label('replied') + ' ';
        }
        if (row.forwarded) {
          css_class += ' forwarded';
          label += this.get_label('forwarded') + ' ';
        }
        css_class += ' status';
      }

      $(row.icon).attr({'class': css_class, title: label});
    }

    if (row.msgicon &amp;&amp; row.msgicon != row.icon) {
      label = '';
      css_class = 'msgicon';
      if (!row.unread &amp;&amp; row.unread_children) {
        css_class += ' unreadchildren';
      }
      if (row.replied) {
        css_class += ' replied';
        label += this.get_label('replied') + ' ';
      }
      if (row.forwarded) {
        css_class += ' forwarded';
        label += this.get_label('forwarded') + ' ';
      }

      $(row.msgicon).attr({'class': css_class, title: label});
    }

    if (row.flagicon) {
      css_class = (row.flagged ? 'flagged' : 'unflagged');
      label = this.get_label(css_class);
      $(row.flagicon).attr('class', css_class)
        .attr({'aria-label': label, title: label});
    }
  };

  // set message status
  this.set_message_status = function(uid, flag, status)
  {
    var row = this.message_list.rows[uid];

    if (!row)
      return false;

    if (flag == 'unread') {
      if (row.unread != status)
        this.update_thread_root(uid, status ? 'unread' : 'read');
    }
    else if (flag == 'flagged') {
      this.update_thread_root(uid, status ? 'flagged' : 'unflagged');
    }

    if ($.inArray(flag, ['unread', 'deleted', 'replied', 'forwarded', 'flagged']) > -1)
      row[flag] = status;
  };

  // set message row status, class and icon
  this.set_message = function(uid, flag, status)
  {
    var row = this.message_list &amp;&amp; this.message_list.rows[uid];

    if (!row)
      return false;

    if (flag)
      this.set_message_status(uid, flag, status);

    if ($.inArray(flag, ['unread', 'deleted', 'flagged']) > -1)
      $(row.obj)[row[flag] ? 'addClass' : 'removeClass'](flag);

    this.set_unread_children(uid);
    this.set_message_icon(uid);
  };

  // sets unroot (unread_children) class of parent row
  this.set_unread_children = function(uid)
  {
    var row = this.message_list.rows[uid];

    if (row.parent_uid)
      return;

    var enable = !row.unread &amp;&amp; row.unread_children &amp;&amp; !row.expanded;
    $(row.obj)[enable ? 'addClass' : 'removeClass']('unroot');
  };

  // sets flaggedroot (flagged_children) class of parent row
  this.set_flagged_children = function(uid)
  {
    var row = this.message_list.rows[uid];

    if (row.parent_uid)
      return;

    var enable = row.flagged_children &amp;&amp; !row.expanded;
    $(row.obj)[enable ? 'addClass' : 'removeClass']('flaggedroot');
  };

  // copy selected messages to the specified mailbox
  this.copy_messages = function(mbox, event, uids)
  {
    if (mbox &amp;&amp; typeof mbox === 'object') {
      if (mbox.uids) uids = mbox.uids;
      mbox = mbox.id;
    }
    else if (!mbox) {
      uids = this.env.uid ? [this.env.uid] : this.message_list.get_selection();
      return this.folder_selector(event, function(folder, obj) {
        ref.command('copy', {id: folder, uids: uids}, obj, event, true);
      });
    }

    // exit if current or no mailbox specified
    if (!mbox || mbox == this.env.mailbox)
      return;

    var post_data = this.selection_post_data({_target_mbox: mbox, _uid: uids});

    // exit if selection is empty
    if (!post_data._uid)
      return;

    // send request to server
    this.http_post('copy', post_data, this.display_message('copyingmessage', 'loading'));
  };

  // move selected messages to the specified mailbox
  this.move_messages = function(mbox, event, uids)
  {
    if (mbox &amp;&amp; typeof mbox === 'object') {
      if (mbox.uids) uids = mbox.uids;
      mbox = mbox.id;
    }
    else if (!mbox) {
      uids = this.env.uid ? [this.env.uid] : this.message_list.get_selection();
      return this.folder_selector(event, function(folder, obj) {
        ref.command('move', {id: folder, uids: uids}, obj, event, true);
      });
    }

    // exit if current or no mailbox specified
    if (!mbox || (mbox == this.env.mailbox &amp;&amp; !this.is_multifolder_listing()))
      return;

    var lock = false, post_data = this.selection_post_data({_target_mbox: mbox, _uid: uids});

    // exit if selection is empty
    if (!post_data._uid)
      return;

    // show wait message
    if (this.env.action == 'show')
      lock = this.set_busy(true, 'movingmessage');

    // Hide message command buttons until a message is selected
    this.enable_command(this.env.message_commands, false);

    this.with_selected_messages('move', post_data, lock);

    if (this.env.action != 'show')
      this.show_contentframe(false);
  };

  // delete selected messages from the current mailbox
  this.delete_messages = function(event)
  {
    var list = this.message_list, trash = this.env.trash_mailbox;

    // if config is set to flag for deletion
    if (this.env.flag_for_deletion) {
      this.mark_message('delete');
      return false;
    }
    // if there isn't a defined trash mailbox or we are in it
    else if (!trash || this.env.mailbox == trash)
      this.permanently_remove_messages();
    // we're in Junk folder and delete_junk is enabled
    else if (this.env.delete_junk &amp;&amp; this.env.junk_mailbox &amp;&amp; this.env.mailbox == this.env.junk_mailbox)
      this.permanently_remove_messages();
    // if there is a trash mailbox defined and we're not currently in it
    else {
      // if shift was pressed delete it immediately
      if ((list &amp;&amp; list.modkey == SHIFT_KEY) || (event &amp;&amp; rcube_event.get_modifier(event) == SHIFT_KEY)) {
        this.confirm_dialog(this.get_label('deletemessagesconfirm'), 'delete', function() {
            ref.permanently_remove_messages();
          });
      }
      else
        this.move_messages(trash);
    }

    return true;
  };

  // delete the selected messages permanently
  this.permanently_remove_messages = function()
  {
    var post_data = this.selection_post_data();

    // exit if selection is empty
    if (!post_data._uid)
      return;

    this.with_selected_messages('delete', post_data);
    this.show_contentframe(false);
  };

  // Send a specific move/delete request with UIDs of all selected messages
  this.with_selected_messages = function(action, post_data, lock, http_action)
  {
    var count = 0, msg,
      remove = (action == 'delete' || !this.is_multifolder_listing());

    // update the list (remove rows, clear selection)
    if (this.message_list) {
      var n, len, id, root, roots = [],
        selection = post_data._uid,
        display_next = this.check_display_next();

      if (selection === '*')
        selection = this.message_list.get_selection();
      else if (typeof selection == 'string')
        selection = selection.split(',');

      for (n=0, len=selection.length; n&lt;len; n++) {
        id = selection[n];

        if (this.env.threading) {
          count += this.update_thread(id);
          root = this.message_list.find_root(id);
          if (root != id &amp;&amp; $.inArray(root, roots) &lt; 0) {
            roots.push(root);
          }
        }

        if (remove)
          this.message_list.remove_row(id, display_next &amp;&amp; n == selection.length-1);
      }

      // make sure there are no selected rows
      if (!display_next &amp;&amp; remove)
        this.message_list.clear_selection();

      // update thread tree icons
      for (n=0, len=roots.length; n&lt;len; n++) {
        this.add_tree_icons(roots[n]);
      }
    }

    if (count &lt; 0)
      post_data._count = (count*-1);
    // remove threads from the end of the list
    else if (count > 0 &amp;&amp; remove)
      this.delete_excessive_thread_rows();

    if (!remove)
      post_data._refresh = 1;

    if (!lock) {
      msg = action == 'move' ? 'movingmessage' : 'deletingmessage';
      lock = this.display_message(msg, 'loading');
    }

    // send request to server
    this.http_post(http_action || action, post_data, lock);
  };

  // build post data for message delete/move/copy/flag requests
  this.selection_post_data = function(data)
  {
    if (typeof(data) != 'object')
      data = {};

    if (!data._uid)
      data._uid = this.env.uid ? [this.env.uid] : this.message_list.get_selection();

    data._mbox = this.env.mailbox;
    data._uid = this.uids_to_list(data._uid);

    if (this.env.action)
      data._from = this.env.action;

    // also send search request to get the right messages
    if (this.env.search_request)
      data._search = this.env.search_request;

    if (this.env.display_next &amp;&amp; this.env.next_uid)
      data._next_uid = this.env.next_uid;

    return data;
  };

  this.check_display_next = function()
  {
    return this.env.display_next &amp;&amp; (this.preview_id || !this.env.contentframe);
  };

  // set a specific flag to one or more messages
  this.mark_message = function(flag, uid)
  {
    var a_uids = [], r_uids = [], len, n, id,
      list = this.message_list;

    if (uid)
      a_uids[0] = uid;
    else if (this.env.uid)
      a_uids[0] = this.env.uid;
    else if (list)
      a_uids = list.get_selection();

    if (!list)
      r_uids = a_uids;
    else {
      list.focus();
      for (n=0, len=a_uids.length; n&lt;len; n++) {
        id = a_uids[n];
        if ((flag == 'read' &amp;&amp; list.rows[id].unread)
            || (flag == 'unread' &amp;&amp; !list.rows[id].unread)
            || (flag == 'delete' &amp;&amp; !list.rows[id].deleted)
            || (flag == 'undelete' &amp;&amp; list.rows[id].deleted)
            || (flag == 'flagged' &amp;&amp; !list.rows[id].flagged)
            || (flag == 'unflagged' &amp;&amp; list.rows[id].flagged))
        {
          r_uids.push(id);
        }
      }
    }

    // nothing to do
    if (!r_uids.length &amp;&amp; !this.select_all_mode)
      return;

    switch (flag) {
        case 'read':
        case 'unread':
          this.toggle_read_status(flag, r_uids);
          break;
        case 'delete':
        case 'undelete':
          this.toggle_delete_status(r_uids);
          break;
        case 'flagged':
        case 'unflagged':
          this.toggle_flagged_status(flag, a_uids);
          break;
    }
  };

  // set class to read/unread
  this.toggle_read_status = function(flag, a_uids)
  {
    var i, len = a_uids.length,
      post_data = this.selection_post_data({_uid: a_uids, _flag: flag}),
      lock = this.display_message('markingmessage', 'loading');

    // mark all message rows as read/unread
    for (i=0; i&lt;len; i++)
      this.set_message(a_uids[i], 'unread', (flag == 'unread' ? true : false));

    this.http_post('mark', post_data, lock);
  };

  // set image to flagged or unflagged
  this.toggle_flagged_status = function(flag, a_uids)
  {
    var i, len = a_uids.length,
      win = this.env.contentframe ? this.get_frame_window(this.env.contentframe) : window,
      post_data = this.selection_post_data({_uid: a_uids, _flag: flag}),
      lock = this.display_message('markingmessage', 'loading');

    // mark all message rows as flagged/unflagged
    for (i=0; i&lt;len; i++)
      this.set_message(a_uids[i], 'flagged', (flag == 'flagged' ? true : false));

    if (this.env.action == 'show' || $.inArray(this.preview_id, a_uids) >= 0)
      $(win.document.body)[flag == 'flagged' ? 'addClass' : 'removeClass']('status-flagged');

    this.http_post('mark', post_data, lock);
  };

  // mark all message rows as deleted/undeleted
  this.toggle_delete_status = function(a_uids)
  {
    var i, uid, all_deleted = true,
      len = a_uids.length,
      rows = this.message_list ? this.message_list.rows : {};

    if (len == 1) {
      if (!this.message_list || (rows[a_uids[0]] &amp;&amp; !rows[a_uids[0]].deleted))
        this.flag_as_deleted(a_uids);
      else
        this.flag_as_undeleted(a_uids);

      return true;
    }

    for (i=0; i&lt;len; i++) {
      uid = a_uids[i];
      if (rows[uid] &amp;&amp; !rows[uid].deleted) {
        all_deleted = false;
        break;
      }
    }

    if (all_deleted)
      this.flag_as_undeleted(a_uids);
    else
      this.flag_as_deleted(a_uids);

    return true;
  };

  this.flag_as_undeleted = function(a_uids)
  {
    var i, len = a_uids.length,
      post_data = this.selection_post_data({_uid: a_uids, _flag: 'undelete'}),
      lock = this.display_message('markingmessage', 'loading');

    for (i=0; i&lt;len; i++)
      this.set_message(a_uids[i], 'deleted', false);

    this.http_post('mark', post_data, lock);
  };

  this.flag_as_deleted = function(a_uids)
  {
    var r_uids = [],
      post_data = this.selection_post_data({_uid: a_uids, _flag: 'delete'}),
      lock = this.display_message('markingmessage', 'loading'),
      list = this.message_list,
      rows = list ? list.rows : {},
      count = 0,
      display_next = this.check_display_next();

    for (var i=0, len=a_uids.length; i&lt;len; i++) {
      uid = a_uids[i];
      if (rows[uid]) {
        if (rows[uid].unread)
          r_uids[r_uids.length] = uid;

        if (this.env.skip_deleted) {
          count += this.update_thread(uid);
          list.remove_row(uid, display_next &amp;&amp; i == list.get_selection(false).length-1);
        }
        else
          this.set_message(uid, 'deleted', true);
      }
    }

    // make sure there are no selected rows
    if (this.env.skip_deleted &amp;&amp; list) {
      if (!display_next || !list.rowcount)
        list.clear_selection();
      if (count &lt; 0)
        post_data._count = (count*-1);
      else if (count > 0)
        // remove threads from the end of the list
        this.delete_excessive_thread_rows();
    }

    // set of messages to mark as seen
    if (r_uids.length)
      post_data._ruid = this.uids_to_list(r_uids);

    if (this.env.skip_deleted &amp;&amp; this.env.display_next &amp;&amp; this.env.next_uid)
      post_data._next_uid = this.env.next_uid;

    this.http_post('mark', post_data, lock);
  };

  // flag as read without mark request (called from backend)
  // argument should be a coma-separated list of uids
  this.flag_deleted_as_read = function(uids)
  {
    var uid, i, len,
      rows = this.message_list ? this.message_list.rows : {};

    if (typeof uids == 'string')
      uids = uids.split(',');

    for (i=0, len=uids.length; i&lt;len; i++) {
      uid = uids[i];
      if (rows[uid])
        this.set_message(uid, 'unread', false);
    }
  };

  // Converts array of message UIDs to comma-separated list for use in URL
  // with select_all mode checking
  this.uids_to_list = function(uids)
  {
    if (this.select_all_mode)
      return '*';

    // multi-folder list of uids cannot be passed as a string (#6845)
    if ($.isArray(uids) &amp;&amp; (uids.length == 1 || String(uids[0]).indexOf('-') == -1))
      uids = uids.join(',');

    return uids;
  };

  // Sets title of the delete button
  this.set_button_titles = function()
  {
    var label = 'deletemessage';

    if (!this.env.flag_for_deletion
      &amp;&amp; this.env.trash_mailbox &amp;&amp; this.env.mailbox != this.env.trash_mailbox
      &amp;&amp; (!this.env.delete_junk || !this.env.junk_mailbox || this.env.mailbox != this.env.junk_mailbox)
    )
      label = 'movemessagetotrash';

    this.set_alttext('delete', label);
  };

  // Initialize input element for list page jump
  this.init_pagejumper = function(element)
  {
    $(element).addClass('rcpagejumper')
      .on('focus', function(e) {
        // create and display popup with page selection
        var i, html = '';

        for (i = 1; i &lt;= ref.env.pagecount; i++)
          html += '&lt;li>' + i + '&lt;/li>';

        html = '&lt;ul class="toolbarmenu menu">' + html + '&lt;/ul>';

        if (!ref.pagejump) {
          ref.pagejump = $('&lt;div id="pagejump-selector" class="popupmenu">&lt;/div>')
            .appendTo(document.body)
            .on('click', 'li', function() {
              if (!ref.busy)
                $(element).val($(this).text()).change();
            });
        }

        if (ref.pagejump.data('count') != i)
          ref.pagejump.html(html);

        ref.pagejump.attr('rel', '#' + this.id).data('count', i);

        // display page selector
        ref.show_menu('pagejump-selector', true, e);
        $(this).keydown();
      })
      // keyboard navigation
      .on('keydown keyup click', function(e) {
        var current, selector = $('#pagejump-selector'),
          ul = $('ul', selector),
          list = $('li', ul),
          height = ul.height(),
          p = parseInt(this.value);

        if (e.which != 27 &amp;&amp; e.which != 9 &amp;&amp; e.which != 13 &amp;&amp; !selector.is(':visible'))
          return ref.show_menu('pagejump-selector', true, e);

        if (e.type == 'keydown') {
          // arrow-down
          if (e.which == 40) {
            if (list.length > p)
              this.value = (p += 1);
          }
          // arrow-up
          else if (e.which == 38) {
            if (p > 1 &amp;&amp; list.length > p - 1)
              this.value = (p -= 1);
          }
          // enter
          else if (e.which == 13) {
            return $(this).change();
          }
          // esc, tab
          else if (e.which == 27 || e.which == 9) {
            ref.hide_menu('pagejump-selector', e);
            return $(element).val(ref.env.current_page);
          }
        }

        $('li.selected', ul).removeClass('selected');

        if ((current = $(list[p - 1])).length) {
          current.addClass('selected');
          $('#pagejump-selector').scrollTop(((ul.height() / list.length) * (p - 1)) - selector.height() / 2);
        }
      })
      .on('change', function(e) {
        // go to specified page
        var p = parseInt(this.value);
        if (p &amp;&amp; p != ref.env.current_page &amp;&amp; !ref.busy) {
          ref.hide_menu('pagejump-selector', e);
          ref.list_page(p);
        }
      });
  };

  // Update page-jumper state on list updates
  this.update_pagejumper = function()
  {
    $('input.rcpagejumper').val(this.env.current_page).prop('disabled', this.env.pagecount &lt; 2);
  };

  // check for mailvelope API
  this.check_mailvelope = function(action)
  {
    if (window.mailvelope) {
      this.mailvelope_load(action);
    }
    else {
      $(window).on('mailvelope', function() {
        ref.mailvelope_load(action);
      });
    }
  };

  // Load Mailvelope functionality (and initialize keyring if needed)
  this.mailvelope_load = function(action)
  {
    var keyring = this.env.mailvelope_main_keyring ? undefined : this.env.user_id,
      fn = function(kr) {
        ref.mailvelope_keyring = kr;
        ref.mailvelope_init(action, kr);
      };

    mailvelope.getVersion().then(function(v) {
      mailvelope.VERSION = v;
      mailvelope.VERSION_MAJOR = Math.floor(parseFloat(v));
      return mailvelope.getKeyring(keyring);
    }).then(fn, function(err) {
      if (keyring) {
        // attempt to create a new keyring for this app/user
        mailvelope.createKeyring(keyring).then(fn, function(err) {
          console.error(err);
        });
      } else {
        console.error(err);
      }
    });
  };

  // Initializes Mailvelope editor or display container
  this.mailvelope_init = function(action, keyring)
  {
    if (!window.mailvelope)
      return;

    if (action == 'show' || action == 'preview' || action == 'print') {
      // decrypt text body
      if (this.env.is_pgp_content) {
        var data = $(this.env.is_pgp_content).text();
        ref.mailvelope_display_container(this.env.is_pgp_content, data, keyring);
      }
      // load pgp/mime message and pass it to the mailvelope display container
      else if (this.env.pgp_mime_part) {
        var msgid = this.display_message('loadingdata', 'loading'),
          selector = this.env.pgp_mime_container;

        $.ajax({
          type: 'GET',
          url: this.url('get', { '_mbox': this.env.mailbox, '_uid': this.env.uid, '_part': this.env.pgp_mime_part }),
          error: function(o, status, err) {
            ref.http_error(o, status, err, msgid);
          },
          success: function(data) {
            ref.mailvelope_display_container(selector, data, keyring, msgid);
          }
        });
      }
    }
    else if (action == 'compose') {
      this.env.compose_commands.push('compose-encrypted');

      var sign_supported = mailvelope.VERSION_MAJOR >= 2;
      var is_html = $('[name="_is_html"]').val() > 0;

      if (sign_supported)
        this.env.compose_commands.push('compose-encrypted-signed');

      if (this.env.pgp_mime_message) {
        // fetch PGP/Mime part and open load into Mailvelope editor
        var lock = this.set_busy(true, this.get_label('loadingdata'));

        $.ajax({
          type: 'GET',
          url: this.url('get', this.env.pgp_mime_message),
          error: function(o, status, err) {
            ref.http_error(o, status, err, lock);
            ref.enable_command('compose-encrypted', !is_html);
            if (sign_supported)
              ref.enable_command('compose-encrypted-signed', !is_html);
          },
          success: function(data) {
            ref.set_busy(false, null, lock);

            if (is_html) {
              ref.command('toggle-editor', {html: false, noconvert: true});
              $('#' + ref.env.composebody).val('');
            }

            ref.compose_encrypted({ quotedMail: data });
            ref.enable_command('compose-encrypted', true);
            ref.enable_command('compose-encrypted-signed', false);
          }
        });
      }
      else {
        // enable encrypted compose toggle
        this.enable_command('compose-encrypted', !is_html);
        if (sign_supported)
          this.enable_command('compose-encrypted-signed', !is_html);
      }

      // make sure to disable encryption button after toggling editor into HTML mode
      this.addEventListener('actionafter', function(args) {
        if (args.ret &amp;&amp; args.action == 'toggle-editor') {
          ref.enable_command('compose-encrypted', !args.props.html);
        if (sign_supported)
          ref.enable_command('compose-encrypted-signed', !args.props.html);
        }
      });
    } else if (action == 'edit-identity') {
      ref.mailvelope_identity_keygen();
    }
  };

  // handler for the 'compose-encrypted-signed' command
  this.compose_encrypted_signed = function(props)
  {
    props = props || {};
    props.signMsg = true;
    this.compose_encrypted(props);
  };

  // handler for the 'compose-encrypted' command
  this.compose_encrypted = function(props)
  {
    var options, container = $('#' + this.env.composebody).parent();

    // remove Mailvelope editor if active
    if (ref.mailvelope_editor) {
      ref.mailvelope_editor = null;
      ref.set_button('compose-encrypted', 'act');

      container.removeClass('mailvelope').find('iframe:not([aria-hidden=true])').remove();
      $('#' + ref.env.composebody).show();
      $("[name='_pgpmime']").remove();

      // re-enable commands that operate on the compose body
      ref.enable_command('toggle-editor', 'insert-response', 'save-response', true);
      ref.enable_command('spellcheck', !!window.googie);
      ref.enable_command('insert-sig', !!(ref.env.signatures &amp;&amp; ref.env.identity &amp;&amp; ref.env.signatures[ref.env.identity]));

      ref.triggerEvent('compose-encrypted', { active:false });
    }
    // embed Mailvelope editor container
    else {
      if (this.spellcheck_state())
        this.editor.spellcheck_stop();

      if (props.quotedMail) {
        options = { quotedMail: props.quotedMail, quotedMailIndent: false };
      }
      else {
        options = { predefinedText: $('#' + this.env.composebody).val() };
      }

      if (props.signMsg) {
        options.signMsg = props.signMsg;
      }

      if (this.env.compose_mode == 'reply') {
        options.quotedMailIndent = true;
        options.quotedMailHeader = this.env.compose_reply_header;
      }

      mailvelope.createEditorContainer('#' + container.attr('id'), ref.mailvelope_keyring, options).then(function(editor) {
        ref.mailvelope_editor = editor;
        ref.set_button('compose-encrypted', 'sel');

        container.addClass('mailvelope');
        $('#' + ref.env.composebody).hide();

        // disable commands that operate on the compose body
        ref.enable_command('spellcheck', 'insert-sig', 'toggle-editor', 'insert-response', 'save-response', false);
        ref.triggerEvent('compose-encrypted', { active:true });

        if (!$.isEmptyObject(ref.env.attachments)) {
          // notify user if losing attachments
          if (ref.env.compose_mode != 'draft'
            || Object.keys(ref.env.attachments).length != 1
            || ref.env.attachments[Object.keys(ref.env.attachments)[0]].name != 'encrypted.asc'
          ) {
            ref.alert_dialog(ref.get_label('encryptnoattachments'));
          }

          $.each(ref.env.attachments, function(name, attach) {
            ref.remove_from_attachment_list(name);
          });
        }
      }, function(err) {
        console.error(err);
        console.log(options);
      });
    }
  };

  // callback to replace the message body with the full armored
  this.mailvelope_submit_messageform = function(draft, saveonly)
  {
    // get recipients
    var recipients = [];
    $.each(['to', 'cc', 'bcc'], function(i,field) {
      var pos, rcpt, val = $('[name="_' + field + '"]').val().trim();
      while (val.length &amp;&amp; rcube_check_email(val, true)) {
        rcpt = RegExp.$2.replace(/^&lt;+/, '').replace(/>+$/, '');
        recipients.push(rcpt);
        val = val.substr(val.indexOf(rcpt) + rcpt.length + 1).replace(/^\s*,\s*/, '');
      }
    });

    // check if we have keys for all recipients
    var isvalid = recipients.length > 0;
    ref.mailvelope_keyring.validKeyForAddress(recipients).then(function(status) {
      var missing_keys = [];
      $.each(status, function(k,v) {
        if (v === false) {
          isvalid = false;
          missing_keys.push(k);
        }
      });

      // list recipients with missing keys
      if (!isvalid &amp;&amp; missing_keys.length) {
        // display dialog with missing keys
        ref.simple_dialog(
          ref.get_label('nopubkeyfor').replace('$email', missing_keys.join(', ')) +
            '&lt;p>' + ref.get_label('searchpubkeyservers') + '&lt;/p>',
          'encryptedsendialog',
          function() {
            ref.mailvelope_search_pubkeys(missing_keys, function() {
              return true; // close dialog
            });
          },
          {button: 'search'}
        );
        return false;
      }

      if (!isvalid) {
        if (!recipients.length) {
          ref.alert_dialog(ref.get_label('norecipientwarning'), function() {
            $("[name='_to']").focus();
          });
        }
        return false;
      }

      // add sender identity to recipients to be able to decrypt our very own message
      var senders = [], selected_sender = ref.env.identities[$("[name='_from'] option:selected").val()];
      $.each(ref.env.identities, function(k, sender) {
        senders.push(sender.email);
      });

      ref.mailvelope_keyring.validKeyForAddress(senders).then(function(status) {
        valid_sender = null;
        $.each(status, function(k,v) {
          if (v !== false) {
            valid_sender = k;
            if (valid_sender == selected_sender) {
              return false;  // break
            }
          }
        });

        if (!valid_sender) {
          if (!confirm(ref.get_label('nopubkeyforsender'))) {
            return false;
          }
        }

        recipients.push(valid_sender);

        ref.mailvelope_editor.encrypt(recipients).then(function(armored) {
          // all checks passed, send message
          var form = ref.gui_objects.messageform,
            hidden = $("[name='_pgpmime']", form),
            msgid = ref.set_busy(true, draft || saveonly ? 'savingmessage' : 'sendingmessage');

          form.target = ref.get_save_target(msgid);
          form._draft.value = draft ? '1' : '';
          form.action = ref.add_url(form.action, '_unlock', msgid);
          form.action = ref.add_url(form.action, '_framed', 1);

          if (saveonly) {
            form.action = ref.add_url(form.action, '_saveonly', 1);
          }

          // send pgp content via hidden field
          if (!hidden.length) {
            hidden = $('&lt;input type="hidden" name="_pgpmime">').appendTo(form);
          }
          hidden.val(armored);

          form.submit();

        }, function(err) {
          console.log(err);
        });  // mailvelope_editor.encrypt()

      }, function(err) {
        console.error(err);
      });  // mailvelope_keyring.validKeyForAddress(senders)

    }, function(err) {
      console.error(err);
    });  // mailvelope_keyring.validKeyForAddress(recipients)

    return false;
  };

  // wrapper for the mailvelope.createDisplayContainer API call
  this.mailvelope_display_container = function(selector, data, keyring, msgid)
  {
    var error_handler = function(error) {
      // remove mailvelope frame with the error message
      $(selector + ' > iframe').remove();
      ref.hide_message(msgid);
      ref.display_message(error.message, 'error');
    };

    mailvelope.createDisplayContainer(selector, data, keyring, { senderAddress: this.env.sender }).then(function(status) {
      if (status.error &amp;&amp; status.error.message) {
        return error_handler(status.error);
      }

      ref.hide_message(msgid);
      $(selector).children().not('iframe').hide();
      $(ref.gui_objects.messagebody).addClass('mailvelope');

      // on success we can remove encrypted part from the attachments list
      if (ref.env.pgp_mime_part)
        $('#attach' + ref.env.pgp_mime_part).remove();

      setTimeout(function() { $(window).resize(); }, 10);
    }, error_handler);
  };

  // subroutine to query keyservers for public keys
  this.mailvelope_search_pubkeys = function(emails, resolve, import_handler)
  {
    // query with publickey.js
    var deferred = [],
      pk = new PublicKey(this.env.keyservers),
      lock = ref.display_message('', 'loading');

    $.each(emails, function(i, email) {
      var d = $.Deferred();
      pk.search(email, function(results, errorCode) {
        if (errorCode !== null) {
          // rejecting would make all fail
          // d.reject(email);
          d.resolve([email]);
        }
        else {
          d.resolve([email].concat(results));
        }
      });
      deferred.push(d);
    });

    $.when.apply($, deferred).then(function() {
      var missing_keys = [],
        key_selection = [];

      // analyze results of all queries
      $.each(arguments, function(i, result) {
        var email = result.shift();
        if (!result.length) {
          missing_keys.push(email);
        }
        else {
          key_selection = key_selection.concat(result);
        }
      });

      ref.hide_message(lock);
      resolve(true);

      // show key import dialog
      if (key_selection.length) {
        ref.mailvelope_key_import_dialog(key_selection, import_handler);
      }
      // some keys could not be found
      if (missing_keys.length) {
        ref.display_message(ref.get_label('nopubkeyfor').replace('$email', missing_keys.join(', ')), 'warning');
      }
    }).fail(function() {
      console.error('Pubkey lookup failed with', arguments);
      ref.hide_message(lock);
      ref.display_message('pubkeysearcherror', 'error');
      resolve(false);
    });
  };

  // list the given public keys in a dialog with options to import
  // them into the local Mailvelope keyring
  this.mailvelope_key_import_dialog = function(candidates, import_handler)
  {
    var ul = $('&lt;div>').addClass('listing pgpkeyimport');

    $.each(candidates, function(i, keyrec) {
      var li = $('&lt;div>').addClass('key');

      if (keyrec.revoked)  li.addClass('revoked');
      if (keyrec.disabled) li.addClass('disabled');
      if (keyrec.expired)  li.addClass('expired');

      li.append($('&lt;label>').addClass('keyid').text(ref.get_label('keyid')));
      li.append($('&lt;a>').text(keyrec.keyid.substr(-8).toUpperCase())
        .attr({href: keyrec.info, target: '_blank', tabindex: '-1'}));

      li.append($('&lt;label>').addClass('keylen').text(ref.get_label('keylength')));
      li.append($('&lt;span>').text(keyrec.keylen));

      if (keyrec.expirationdate) {
        li.append($('&lt;label>').addClass('keyexpired').text(ref.get_label('keyexpired')));
        li.append($('&lt;span>').text(new Date(keyrec.expirationdate * 1000).toDateString()));
      }

      if (keyrec.revoked) {
        li.append($('&lt;span>').addClass('keyrevoked').text(ref.get_label('keyrevoked')));
      }

      var ul_ = $('&lt;ul>').addClass('uids');
      $.each(keyrec.uids, function(j, uid) {
        var li_ = $('&lt;li>').addClass('uid');
        if (uid.revoked)  li_.addClass('revoked');
        if (uid.disabled) li_.addClass('disabled');
        if (uid.expired)  li_.addClass('expired');

        ul_.append(li_.text(uid.uid));
      });

      li.append(ul_);
      li.append($('&lt;button>')
        .attr('rel', keyrec.keyid)
        .text(ref.get_label('import'))
        .addClass('button import importkey')
        .prop('disabled', keyrec.revoked || keyrec.disabled || keyrec.expired));

      ul.append(li);
    });

    // display dialog with missing keys
    ref.simple_dialog(
      $('&lt;div>')
        .append($('&lt;p>').html(ref.get_label('encryptpubkeysfound')))
        .append(ul),
      ref.get_label('importpubkeys'),
      null,
      {cancel_label: 'close', cancel_button: 'close'}
    );

    // delegate handler for import button clicks
    ul.on('click', 'button.importkey', function() {
      var btn = $(this),
        keyid = btn.attr('rel'),
        pk = new PublicKey(ref.env.keyservers),
        lock = ref.display_message('', 'loading');

        // fetch from keyserver and import to Mailvelope keyring
        pk.get(keyid, function(armored, errorCode) {
          ref.hide_message(lock);

          if (errorCode) {
            ref.display_message('keyservererror', 'error');
            return;
          }

          if (import_handler) {
            import_handler(armored);
            return;
          }

          // import to keyring
          ref.mailvelope_keyring.importPublicKey(armored).then(function(status) {
            if (status === 'REJECTED') {
              // ref.alert_dialog(ref.get_label('Key import was rejected'));
            }
            else {
              var $key = keyid.substr(-8).toUpperCase();
              btn.closest('.key').fadeOut();
              ref.display_message(ref.get_label('keyimportsuccess').replace('$key', $key), 'confirmation');
            }
          }, function(err) {
            console.log(err);
          });
        });
    });
  };

  // enable key management for identity
  this.mailvelope_identity_keygen = function()
  {
    var container = $(this.gui_objects.editform).find('.identity-encryption').first();
    var identity_email = $(this.gui_objects.editform).find('.ff_email').val().trim();

    if (!container.length || !identity_email || !this.mailvelope_keyring.createKeyGenContainer)
      return;

    var key_fingerprint;
    this.mailvelope_keyring.validKeyForAddress([identity_email])
      .then(function(keys) {
        var private_keys = [];

        if (keys &amp;&amp; keys[identity_email] &amp;&amp; Array.isArray(keys[identity_email].keys)) {
          var checks = [];
          for (var j=0; j &lt; keys[identity_email].keys.length; j++) {
            checks.push((function(key) {
              return ref.mailvelope_keyring.hasPrivateKey(key.fingerprint)
                .then(function(found) {
                  if (found) {
                    private_keys.push(key);
                  }
                });
            })(keys[identity_email].keys[j]));
          }
          return Promise.all(checks)
            .then(function() {
              return private_keys;
            });
        }

        return private_keys;
      }).then(function(private_keys) {
        var content = container.find('.identity-encryption-block').empty();
        if (private_keys &amp;&amp; private_keys.length) {
          // show private key information
          $('&lt;p>').text(ref.get_label('encryptionprivkeysinmailvelope').replace('$nr', private_keys.length)).appendTo(content);
          var ul = $('&lt;ul>').addClass('keylist').appendTo(content);
          $.each(private_keys, function(i, key) {
            $('&lt;li>').appendTo(ul)
              .append($('&lt;strong>').addClass('fingerprint').text(String(key.fingerprint).toUpperCase()))
              .append($('&lt;span>').addClass('identity').text('&lt;' + identity_email + '> '));
          });
        } else {
          $('&lt;p>').text(ref.get_label('encryptionnoprivkeysinmailvelope')).appendTo(content);
        }

        // show button to create a new key
        $('&lt;button>')
          .attr('type', 'button')
          .addClass('button create')
          .text(ref.get_label('encryptioncreatekey'))
          .appendTo(content)
          .on('click', function() { ref.mailvelope_show_keygen_container(content, identity_email); });
        $('&lt;span>').addClass('space').html('&amp;nbsp;').appendTo(content);
        $('&lt;button>')
          .attr('type', 'button')
          .addClass('button settings')
          .text(ref.get_label('openmailvelopesettings'))
          .appendTo(content)
          .on('click', function() { ref.mailvelope_keyring.openSettings(); });

        container.show();
        ref.triggerEvent('identity-encryption-show', { container: container });
      })
      .catch(function(err) {
        console.error('Mailvelope keyring error', err);
      })
  };

  // start pgp key generation using Mailvelope
  this.mailvelope_show_keygen_container = function(container, identity_email)
  {
    var cid = new Date().getTime();
    var user_id = {email: identity_email, fullName: $(ref.gui_objects.editform).find('.ff_name').val().trim()};
    var options = {userIds: [user_id], keySize: this.env.mailvelope_keysize};

    $('&lt;div>').attr('id', 'mailvelope-keygen-container-' + cid)
      .css({height: '245px', marginBottom: '10px'})
      .appendTo(container.empty());

    this.mailvelope_keyring.createKeyGenContainer('#mailvelope-keygen-container-' + cid, options)
      .then(function(generator) {
        if (generator instanceof Error) {
          throw generator;
        }

        // append button to start key generation
        $('&lt;button>')
          .attr('type', 'button')
          .addClass('button mainaction generate')
          .text(ref.get_label('generate'))
          .appendTo(container)
          .on('click', function() {
            var btn = $(this).prop('disabled', true);
            generator.generate()
              .then(function(result) {
                if (typeof result === 'string' &amp;&amp; result.indexOf('BEGIN PGP') > 0) {
                  ref.display_message(ref.get_label('keypaircreatesuccess').replace('$identity', identity_email), 'confirmation');
                  // reset keygen view
                  ref.mailvelope_identity_keygen();
                }
              })
              .catch(function(err) {
                ref.display_message(err.message || 'errortitle', 'error');
                btn.prop('disabled', false);
            });
          });

        $('&lt;span>').addClass('space').html('&amp;nbsp;').appendTo(container);

        $('&lt;button>')
          .attr('type', 'button')
          .addClass('button cancel')
          .text(ref.get_label('cancel'))
          .appendTo(container)
          .on('click', function() { ref.mailvelope_identity_keygen(); });

        ref.triggerEvent('identity-encryption-update', { container: container });
      })
      .catch(function(err) {
        ref.display_message('errortitle', 'error');
        // start over
        ref.mailvelope_identity_keygen();
      });
  };

  this.mdn_request_dialog = function(uid, mailbox)
  {
    var props = {
        action: 'mark',
        data: { _uid: uid, _mbox: mailbox, _flag: 'mdnsent' }
      },
      buttons = [
        {
          text: this.get_label('send'),
          'class': 'mainaction send',
          click: function(e, ui, dialog) {
            props.action = 'sendmdn';
            (ref.is_framed() ? parent.$ : $)(dialog || this).dialog('close');
          }
        },
        {
          text: this.get_label('ignore'),
          'class': 'cancel',
          click: function(e, ui, dialog) {
            (ref.is_framed() ? parent.$ : $)(dialog || this).dialog('close');
          }
        }
      ],
      mdn_func = function(event, ui) {
        ref.http_post(props.action, props.data);
        // from default close function
        $(this).remove();
      };

    if (this.env.mdn_request_save) {
      buttons.unshift({
        text: this.get_label('sendalwaysto').replace('$email', this.env.mdn_request_sender.mailto),
        'class': 'mainaction send',
        click: function(e, ui, dialog) {
          props.data._save = ref.env.mdn_request_save;
          props.data._address = ref.env.mdn_request_sender.string;
          $(e.target).next().click();
        }
      });
    }

    this.show_popup_dialog(this.get_label('mdnrequest'), this.get_label('sendreceipt'), buttons, { close: mdn_func });
  };


  /*********************************************************/
  /*********       mailbox folders methods         *********/
  /*********************************************************/

  this.expunge_mailbox = function(mbox)
  {
    var lock, post_data = {_mbox: mbox};

    // lock interface if it's the active mailbox
    if (mbox == this.env.mailbox) {
      lock = this.set_busy(true, 'loading');
      post_data._reload = 1;
      if (this.env.search_request)
        post_data._search = this.env.search_request;
    }

    // send request to server
    this.http_post('expunge', post_data, lock);
  };

  this.purge_mailbox = function(mbox)
  {
    this.confirm_dialog(this.get_label('purgefolderconfirm'), 'delete', function() {
        var lock, post_data = {_mbox: mbox};

        // lock interface if it's the active mailbox
        if (mbox == ref.env.mailbox) {
           lock = ref.set_busy(true, 'loading');
           post_data._reload = 1;
        }

        // send request to server
        ref.http_post('purge', post_data, lock);
      });

    return false;
  };

  // Mark all messages as read in:
  //   - selected folder (mode=cur)
  //   - selected folder and its subfolders (mode=sub)
  //   - all folders (mode=all)
  this.mark_all_read = function(mbox, mode)
  {
    var state, content, nodes = [],
      list = this.message_list,
      folder = mbox || this.env.mailbox,
      post_data = {_uid: '*', _flag: 'read', _mbox: folder, _folders: mode};

    if (typeof mode != 'string') {
      state = this.mark_all_read_state(folder);
      if (!state)
        return;

      if (state > 1) {
        // build content of the dialog
        $.each({cur: 1, sub: 2, all: 4}, function(i, v) {
          var id = 'readallmode' + i,
            label = $('&lt;label>').attr('for', id).text(ref.get_label('folders-' + i)),
            input = $('&lt;input>').attr({type: 'radio', value: i, name: 'mode', id: id, disabled: !(state &amp; v)});

          nodes.push($('&lt;li>').append([input, label]));
        });

        content = $('&lt;ul class="proplist">').append(nodes);
        $('input:not([disabled])', content).first().attr('checked', true);

        this.simple_dialog(content, this.get_label('markallread'),
          function() {
            ref.mark_all_read(folder, $('input:checked', content).val());
            return true;
          },
          {button: 'mark', button_class: 'save'}
        );

        return;
      }

      post_data._folders = 'cur'; // only current folder has unread messages
    }

    // mark messages on the list
    $.each(list ? list.rows : [], function(uid, row) {
      if (!row.unread)
        return;

      var mbox = ref.env.messages[uid].mbox;
      if (mode == 'all' || mbox == ref.env.mailbox
          || (mode == 'sub' &amp;&amp; mbox.startsWith(ref.env.mailbox + ref.env.delimiter))
      ) {
        ref.set_message(uid, 'unread', false);
      }
    });

    // send the request
    this.http_post('mark', post_data, this.display_message('markingmessage', 'loading'));
  };

  // Enable/disable mark-all-read action depending on folders state
  this.mark_all_read_state = function(mbox)
  {
    var state = 0,
      li = this.treelist.get_item(mbox || this.env.mailbox),
      folder_item = $(li).is('.unread') ? 1 : 0,
      subfolder_items = $('li.unread', li).length,
      all_items = $('li.unread', ref.gui_objects.folderlist).length;

    state += folder_item;
    state += subfolder_items ? 2 : 0;
    state += all_items > folder_item + subfolder_items ? 4 : 0;

    this.enable_command('mark-all-read', state > 0);

    return state;
  };

  // Display "bounce message" dialog
  this.bounce = function(props, obj, event)
  {
    // get message uid and folder
    var uid = this.get_single_uid(),
      url = this.url('bounce', {_framed: 1, _uid: uid, _mbox: this.get_message_mailbox(uid)}),
      dialog = $('&lt;iframe>').attr('src', url),
      get_form = function() {
        var rc = $('iframe', dialog)[0].contentWindow.rcmail;
        return {rc: rc, form: rc.gui_objects.messageform};
      },
      post_func = function() {
        var post = {}, form = get_form();

        $.each($(form.form).serializeArray(), function() { post[this.name] = this.value; });

        post._uid = form.rc.env.uid;
        post._mbox = form.rc.env.mailbox;
        delete post._action;
        delete post._task;

        if (post._to || post._cc || post._bcc) {
          ref.http_post('bounce', post, ref.set_busy(true, 'sendingmessage'));
          dialog.dialog('close');
        }
      },
      submit_func = function() {
        var form = get_form();

        if (typeof form.form != 'object')
          return false;

        if (!form.rc.check_compose_address_fields(post_func, form.form))
          return false;

        return post_func();
      };

    this.hide_menu('forwardmenu', event);

    dialog = this.simple_dialog(dialog, this.gettext('bouncemsg'), submit_func, {
      button: 'bounce',
      width: 400,
      height: 300
    });

    return true;
  };


  /*********************************************************/
  /*********        message compose methods        *********/
  /*********************************************************/

  this.open_compose_step = function(p)
  {
    var url = this.url('mail/compose', p);

    // open new compose window
    if (this.env.compose_extwin &amp;&amp; !this.env.extwin) {
      this.open_window(url);
    }
    else {
      this.redirect(url);
      if (this.env.extwin)
        window.resizeTo(Math.max(this.env.popup_width, $(window).width()), $(window).height() + 24);
    }
  };

  // init message compose form: set focus and eventhandlers
  this.init_messageform = function()
  {
    if (!this.gui_objects.messageform)
      return false;

    var elem, pos,
      input_from = $("[name='_from']"),
      input_to = $("[name='_to']"),
      input_subject = $("[name='_subject']"),
      input_message = $("[name='_message']").get(0),
      html_mode = $("[name='_is_html']").val() == '1',
      opener_rc = this.opener();

    // close compose step in opener
    if (opener_rc &amp;&amp; opener_rc.env.action == 'compose') {
      setTimeout(function() {
        if (opener.history.length > 1)
          opener.history.back();
        else
          opener_rc.redirect(opener_rc.get_task_url('mail'));
      }, 100);
      this.env.opened_extwin = true;
    }

    if (!html_mode) {
      // On Back button Chrome will overwrite textarea with old content
      // causing e.g. the same signature is added twice (#5809)
      if (input_message.value &amp;&amp; input_message.defaultValue !== undefined)
        input_message.value = input_message.defaultValue;

      pos = this.env.top_posting &amp;&amp; this.env.compose_mode ? 0 : input_message.value.length;

      // add signature according to selected identity
      // if we have HTML editor, signature is added in a callback
      if (input_from.prop('type') == 'select-one') {
        // for some reason the caret initially is not at pos=0 in Firefox 51 (#5628)
        this.set_caret_pos(input_message, 0);
        this.change_identity(input_from[0]);
      }

      // set initial cursor position
      this.set_caret_pos(input_message, pos);

      // scroll to the bottom of the textarea (#1490114)
      if (pos) {
        $(input_message).scrollTop(input_message.scrollHeight);
      }
    }

    // check for locally stored compose data
    if (this.env.save_localstorage)
      this.compose_restore_dialog(0, html_mode)

    if (input_to.val() == '')
      elem = input_to;
    else if (input_subject.val() == '')
      elem = input_subject;
    else if (input_message)
      elem = input_message;

    this.env.compose_focus_elem = this.init_messageform_inputs(elem);

    // get summary of all field values
    this.compose_field_hash(true);

    // start the auto-save timer
    this.auto_save_start();
  };

  // init autocomplete events on compose form inputs
  this.init_messageform_inputs = function(focused)
  {
    var i,
      input_to = $("[name='_to']"),
      ac_fields = ['cc', 'bcc', 'replyto', 'followupto'];

    // init live search events
    this.init_address_input_events(input_to);
    for (i in ac_fields) {
      this.init_address_input_events($("[name='_"+ac_fields[i]+"']"));
    }

    if (!focused)
      focused = input_to;

    // focus first empty element (and return it)
    return $(focused).focus().get(0);
  };

  this.compose_restore_dialog = function(j, html_mode)
  {
    var i, key, formdata, index = this.local_storage_get_item('compose.index', []);

    var show_next = function(i) {
      if (++i &lt; index.length)
        ref.compose_restore_dialog(i, html_mode)
    }

    for (i = j || 0; i &lt; index.length; i++) {
      key = index[i];
      formdata = this.local_storage_get_item('compose.' + key, null, true);
      if (!formdata) {
        continue;
      }
      // restore saved copy of current compose_id
      if (formdata.changed &amp;&amp; key == this.env.compose_id) {
        this.restore_compose_form(key, html_mode);
        break;
      }
      // skip records from 'other' drafts
      if (this.env.draft_id &amp;&amp; formdata.draft_id &amp;&amp; formdata.draft_id != this.env.draft_id) {
        continue;
      }
      // skip records on reply
      if (this.env.reply_msgid &amp;&amp; formdata.reply_msgid != this.env.reply_msgid) {
        continue;
      }
      // show dialog asking to restore the message
      if (formdata.changed &amp;&amp; formdata.session != this.env.session_id) {
        this.show_popup_dialog(
          this.get_label('restoresavedcomposedata')
            .replace('$date', new Date(formdata.changed).toLocaleString())
            .replace('$subject', formdata._subject)
            .replace(/\n/g, '&lt;br/>'),
          this.get_label('restoremessage'),
          [{
            text: this.get_label('restore'),
            'class': 'mainaction restore',
            click: function(){
              ref.restore_compose_form(key, html_mode);
              ref.remove_compose_data(key);  // remove old copy
              ref.save_compose_form_local();  // save under current compose_id
              $(this).dialog('close');
            }
          },
          {
            text: this.get_label('delete'),
            'class': 'delete',
            click: function(){
              ref.remove_compose_data(key);
              $(this).dialog('close');
              show_next(i);
            }
          },
          {
            text: this.get_label('ignore'),
            'class': 'cancel',
            click: function(){
              $(this).dialog('close');
              show_next(i);
            }
          }]
        );
        break;
      }
    }
  }

  this.init_address_input_events = function(obj, props)
  {
    // configure parallel autocompletion
    if (!props &amp;&amp; this.env.autocomplete_threads > 0) {
      props = {
        threads: this.env.autocomplete_threads,
        sources: this.env.autocomplete_sources
      };
    }

    obj.keydown(function(e) { return ref.ksearch_keydown(e, this, props); })
      .attr({autocomplete: 'off', 'aria-autocomplete': 'list', 'aria-expanded': 'false', role: 'combobox'});

    var callback = function(e) {
      if (ref.ksearch_pane &amp;&amp; e.target === ref.ksearch_pane.get(0)) {
        return;
      }
      ref.ksearch_hide();
    };

    // hide the popup on any click
    $(document).on('click', callback);
    // and on scroll (that cannot be jQuery.on())
    document.addEventListener('scroll', callback, true);
  };

  this.submit_messageform = function(draft, saveonly)
  {
    var form = this.gui_objects.messageform;

    if (!form)
      return;

    // the message has been sent but not saved, ask the user what to do
    if (!saveonly &amp;&amp; this.env.is_sent) {
      return this.simple_dialog(this.get_label('messageissent'), '', // TODO: dialog title
        function() {
          ref.submit_messageform(false, true);
          return true;
        }
      );
    }

    // delegate sending to Mailvelope routine
    if (this.mailvelope_editor) {
      return this.mailvelope_submit_messageform(draft, saveonly);
    }

    // all checks passed, send message
    var msgid = this.set_busy(true, draft || saveonly ? 'savingmessage' : 'sendingmessage'),
      lang = this.spellcheck_lang(),
      files = [];

    // send files list
    $('li', this.gui_objects.attachmentlist).each(function() { files.push(this.id.replace(/^rcmfile/, '')); });
    $('[name="_attachments"]', form).val(files.join());

    form.target = this.get_save_target(msgid);
    form._draft.value = draft ? '1' : '';
    form.action = this.add_url(form.action, '_unlock', msgid);
    form.action = this.add_url(form.action, '_framed', 1);

    if (lang)
        form.action = this.add_url(form.action, '_lang', lang);
    if (saveonly)
      form.action = this.add_url(form.action, '_saveonly', 1);

    // register timer to notify about connection timeout
    this.submit_timer = setTimeout(function() {
      ref.set_busy(false, null, msgid);
      ref.display_message('requesttimedout', 'error');
    }, this.env.request_timeout * 1000);

    form.submit();
  };

  this.compose_recipient_select = function(list)
  {
    var id, n, recipients = 0, selection = list.get_selection();
    for (n=0; n &lt; selection.length; n++) {
      id = selection[n];
      if (this.env.contactdata[id])
        recipients++;
    }
    this.enable_command('add-recipient', recipients);
  };

  this.compose_add_recipient = function(field)
  {
    // find last focused field name
    if (!field) {
      field = $(this.env.focused_field).filter(':visible');
      field = field.length ? field.attr('id').replace('_', '') : 'to';
    }

    var recipients = [], input = $('#_' + field), selection = this.contact_list.get_selection();

    if (this.contact_list &amp;&amp; selection.length) {
      var data, name, n, id;
      for (n = 0; n &lt; selection.length; n++) {
        if ((id = selection[n]) &amp;&amp; (data = this.env.contactdata[id])) {
          name = data.name || data

          // group is added, expand it
          if (id.charAt(0) == 'E' &amp;&amp; input.length) {
            // We wrap the group name with invisible markers to prevent from problems with group expanding (#7569)
            name = '\u200b' + name + '\u200b';
            var gid = id.substr(1);
            this.group2expand[gid] = {name: name, input: input.get(0)};
            this.http_request('group-expand', {_source: data.source || this.env.source, _gid: gid}, false);
          }

          recipients.push(name);
        }
      }
    }

    if (recipients.length &amp;&amp; input.length) {
      var oldval = input.val();
      if (oldval &amp;&amp; !/[,;]\s*$/.test(oldval))
        oldval += ', ';
      input.val(oldval + recipients.join(', ') + ', ').change();
      this.triggerEvent('add-recipient', { field:field, recipients:recipients });
    }

    return recipients.length;
  };

  // checks the input fields before sending a message
  this.check_compose_input = function(cmd)
  {
    var key,
      input_subject = $("[name='_subject']");

    // check if all files has been uploaded
    for (key in this.env.attachments) {
      if (typeof this.env.attachments[key] === 'object' &amp;&amp; !this.env.attachments[key].complete) {
        this.alert_dialog(this.get_label('notuploadedwarning'));
        return false;
      }
    }

    // display localized warning for missing subject
    if (!this.env.nosubject_warned &amp;&amp; input_subject.val() == '') {
      var dialog,
        prompt_value = $('&lt;input>').attr({type: 'text', size: 40, 'data-submit': 'true'}),
        myprompt = $('&lt;div class="prompt">')
          .append($('&lt;p class="message">').text(this.get_label('nosubjectwarning')))
          .append(prompt_value),
        save_func = function() {
          input_subject.val(prompt_value.val());
          dialog.dialog('close');
          if (ref.check_compose_input(cmd))
            ref.command(cmd, { nocheck:true });  // repeat command which triggered this
        };

      dialog = this.show_popup_dialog(
        myprompt,
        this.get_label('nosubjecttitle'),
        [{
            text: this.get_label('sendmessage'),
            'class': 'mainaction send',
            click: function() { save_func(); }
          }, {
            text: this.get_label('cancel'),
            'class': 'cancel',
            click: function() {
              input_subject.focus();
              dialog.dialog('close');
            }
          }],
        {dialogClass: 'warning'}
      );

      this.env.nosubject_warned = true;
      return false;
    }

    // check for empty body (only possible if not mailvelope encrypted)
    if (!this.mailvelope_editor &amp;&amp; !this.editor.get_content() &amp;&amp; !confirm(this.get_label('nobodywarning'))) {
      this.editor.focus();
      return false;
    }

    if (!this.check_compose_address_fields(cmd))
      return false;

    // move body from html editor to textarea (just to be sure, #1485860)
    this.editor.save();

    return true;
  };

  this.check_compose_address_fields = function(cmd, form)
  {
    if (!form)
      form = window.document;

    // check input fields
    var key, recipients, dialog,
      limit = this.env.max_disclosed_recipients,
      input_to = $("[name='_to']", form),
      input_cc = $("[name='_cc']", form),
      input_bcc = $("[name='_bcc']", form),
      input_from = $("[name='_from']", form),
      get_recipients = function(fields) {
        fields = $.map(fields, function(v) {
          v = v.val().trim();
          return v.length ? v : null;
        });
        return fields.join(',').replace(/^[\s,;]+/, '').replace(/[\s,;]+$/, '');
      };

    // check sender (if have no identities)
    if (input_from.prop('type') == 'text' &amp;&amp; !rcube_check_email(input_from.val(), true)) {
      this.alert_dialog(this.get_label('nosenderwarning'), function() {
        input_from.focus();
      });
      return false;
    }

    // check for empty recipient
    if (!rcube_check_email(get_recipients([input_to, input_cc, input_bcc]), true)) {
      this.alert_dialog(this.get_label('norecipientwarning'), function() {
        input_to.focus();
      });
      return false;
    }

    // check disclosed recipients limit
    if (limit &amp;&amp; !this.env.disclosed_recipients_warned
      &amp;&amp; rcube_check_email(recipients = get_recipients([input_to, input_cc]), true, true) > limit
    ) {
      var save_func = function(move_to_bcc) {
          if (move_to_bcc) {
            var bcc = input_bcc.val();
            input_bcc.val((bcc ? (bcc + ', ') : '') + recipients).change();
            input_to.val('').change();
            input_cc.val('').change();
          }

          dialog.dialog('close');

          if (typeof cmd == 'function')
            cmd();
          else if (cmd)
            ref.command(cmd, { nocheck:true });  // repeat command which triggered this
        };

      dialog = this.show_popup_dialog(
        this.get_label('disclosedrecipwarning'),
        this.get_label('disclosedreciptitle'),
        [{
            text: this.get_label('sendmessage'),
            click: function() { save_func(false); },
            'class': 'mainaction'
          }, {
            text: this.get_label('bccinstead'),
            click: function() { save_func(true); }
          }, {
            text: this.get_label('cancel'),
            click: function() { dialog.dialog('close'); },
            'class': 'cancel'
          }],
        {dialogClass: 'warning'}
      );

      this.env.disclosed_recipients_warned = true;
      return false;
    }

    return true;
  };

  this.toggle_editor = function(props, obj, e)
  {
    // @todo: this should work also with many editors on page
    var mode, result = this.editor.toggle(props.html, props.noconvert || false),
      control = $('#' + this.editor.id).data('control') || $(e ? e.target : []);

    if (result)
      mode = props.html ? 'html' : 'plain';
    else
      mode = props.html ? 'plain' : 'html';

    // update internal format flag
    $("[name='_is_html']").val(mode == 'html' ? 1 : 0);

    if (control.is('[type=checkbox]'))
      control.prop('checked', mode == 'html');
    else
      control.val(mode);

    return result;
  };

  // Inserts a predefined response to the compose editor
  this.insert_response = function(key)
  {
    this.editor.replace(this.env.textresponses[key]);
    this.display_message('responseinserted', 'confirmation');
  };

  /**
   * Open the dialog to save a new canned response
   */
  this.save_response = function()
  {
    // show dialog to enter a name and to modify the text to be saved
    var buttons = {}, text = this.editor.get_content({selection: true, format: 'text', nosig: true}),
      html = '&lt;form class="propform">' +
      '&lt;div class="prop block">&lt;label for="ffresponsename">' + this.get_label('responsename') + '&lt;/label>' +
      '&lt;input type="text" name="name" id="ffresponsename" size="40" />&lt;/div>' +
      '&lt;div class="prop block">&lt;label for="ffresponsetext">' + this.get_label('responsetext') + '&lt;/label>' +
      '&lt;textarea name="text" id="ffresponsetext" cols="40" rows="8">&lt;/textarea>&lt;/div>' +
      '&lt;/form>';

    buttons[this.get_label('save')] = function(e) {
      var name = $('#ffresponsename').val(),
        text = $('#ffresponsetext').val();

      if (!text) {
        $('#ffresponsetext').select();
        return false;
      }
      if (!name)
        name = text.replace(/[\r\n]+/g, ' ').substring(0,40);

      var lock = ref.display_message('savingresponse', 'loading');
      ref.http_post('settings/responses', { _insert:1, _name:name, _text:text }, lock);
      $(this).dialog('close');
    };

    buttons[this.get_label('cancel')] = function() {
      $(this).dialog('close');
    };

    this.show_popup_dialog(html, this.get_label('newresponse'), buttons, {button_classes: ['mainaction save', 'cancel']});

    $('#ffresponsetext').val(text);
    $('#ffresponsename').select();
  };

  this.add_response_item = function(response)
  {
    var key = response.key;
    this.env.textresponses[key] = response;

    // append to responses list
    if (this.gui_objects.responseslist) {
      var li = $('&lt;li>').appendTo(this.gui_objects.responseslist);
      $('&lt;a>').addClass('insertresponse active')
        .attr({href: '#', rel: key, tabindex: '0'})
        .html(this.quote_html(response.name))
        .appendTo(li)
        .mousedown(function(e) {
          return rcube_event.cancel(e);
        })
        .on('mouseup keypress', function(e) {
          if (e.type == 'mouseup' || rcube_event.get_keycode(e) == 13) {
            ref.command('insert-response', $(this).attr('rel'));
            $(document.body).trigger('mouseup');  // hides the menu
            return rcube_event.cancel(e);
          }
        });

      // remove the placeholder item if its there
      $(this.gui_objects.responseslist).find('li > a.insertresponse.placeholder').parent().remove();
    }
  };

  this.edit_responses = function()
  {
    // TODO: implement inline editing of responses
  };

  this.delete_response = function(key)
  {
    if (!key &amp;&amp; this.responses_list) {
      var selection = this.responses_list.get_selection();
      key = selection[0];
    }

    // submit delete request
    if (key) {
      this.confirm_dialog(this.get_label('deleteresponseconfirm'), 'delete', function() {
          ref.http_post('settings/delete-response', { _key: key }, false);
        });
    }
  };

  // updates spellchecker buttons on state change
  this.spellcheck_state = function()
  {
    var active = this.editor.spellcheck_state();

    $.each(this.buttons.spellcheck || [], function(i, v) {
      $('#' + v.id)[active ? 'addClass' : 'removeClass']('selected');
    });

    return active;
  };

  // get selected language
  this.spellcheck_lang = function()
  {
    return this.editor.get_language();
  };

  this.spellcheck_lang_set = function(lang)
  {
    this.editor.set_language(lang);
  };

  // resume spellchecking, highlight provided misspellings without new ajax request
  this.spellcheck_resume = function(data)
  {
    this.editor.spellcheck_resume(data);
  };

  this.set_draft_id = function(id)
  {
    if (id &amp;&amp; id != this.env.draft_id) {
      var filter = {task: 'mail', action: ''},
        rc = this.opener(false, filter) || this.opener(true, filter);

      // refresh the drafts folder in the opener window
      if (rc &amp;&amp; rc.env.mailbox == this.env.drafts_mailbox)
        rc.command('checkmail');

      this.env.draft_id = id;
      $("[name='_draft_saveid']").val(id);
    }

    // always remove local copy upon saving as draft
    this.remove_compose_data(this.env.compose_id);
    this.compose_skip_unsavedcheck = false;
  };

  // Create (attach) 'savetarget' iframe before use
  this.get_save_target = function(unlock)
  {
    // Removing the frame on load/error to workaround issues with window history
    this.dummy_iframe('savetarget', 'about:blank')
      .on('load error', function() {
        // catch invalid/error response from server and unlock the UI (#7494, #7488, #7522)
        if (unlock &amp;&amp; $(this).contents().find('meta[name="generator"][content="Roundcube"]').length == 0) {
          ref.iframe_loaded(unlock);
          ref.display_message('connerror', 'error');
        }

        $(this).remove();
      });

    return 'savetarget';
  };

  this.auto_save_start = function()
  {
    if (this.env.draft_autosave) {
      this.save_timer = setTimeout(function() {
          ref.command("savedraft");
      }, this.env.draft_autosave * 1000);
    }

    // save compose form content to local storage every 5 seconds
    if (!this.local_save_timer &amp;&amp; window.localStorage &amp;&amp; this.env.save_localstorage) {
      // track typing activity and only save on changes
      this.compose_type_activity = this.compose_type_activity_last = 0;
      $(document).keypress(function(e) { ref.compose_type_activity++; });

      this.local_save_timer = setInterval(function(){
        if (ref.compose_type_activity > ref.compose_type_activity_last) {
          ref.save_compose_form_local();
          ref.compose_type_activity_last = ref.compose_type_activity;
        }
      }, 5000);

      $(window).on('unload', function() {
        // remove copy from local storage if compose screen is left after warning
        if (!ref.env.server_error)
          ref.remove_compose_data(ref.env.compose_id);
      });
    }

    // check for unsaved changes before leaving the compose page
    if (!window.onbeforeunload) {
      window.onbeforeunload = function() {
        if (!ref.compose_skip_unsavedcheck &amp;&amp; ref.cmp_hash != ref.compose_field_hash()) {
          return ref.get_label('notsentwarning');
        }
      };
    }

    // Unlock interface now that saving is complete
    this.busy = false;
  };

  this.compose_field_hash = function(save)
  {
    // check input fields
    var i, id, val, str = '', hash_fields = ['to', 'cc', 'bcc', 'subject'];

    for (i=0; i&lt;hash_fields.length; i++)
      if (val = $('[name="_' + hash_fields[i] + '"]').val())
        str += val + ':';

    str += this.editor.get_content({refresh: false});

    for (id in this.env.attachments)
      str += id;

    // we can't detect changes in the Mailvelope editor so assume it changed
    if (this.mailvelope_editor) {
      str += ';' + new Date().getTime();
    }

    if (save)
      this.cmp_hash = str;

    return str;
  };

  // store the contents of the compose form to localstorage
  this.save_compose_form_local = function()
  {
    // feature is disabled
    if (!this.env.save_localstorage)
      return;

    var formdata = { session:this.env.session_id, changed:new Date().getTime() },
      ed, empty = true;

    // get fresh content from editor
    this.editor.save();

    if (this.env.draft_id) {
      formdata.draft_id = this.env.draft_id;
    }
    if (this.env.reply_msgid) {
      formdata.reply_msgid = this.env.reply_msgid;
    }

    $('input, select, textarea', this.gui_objects.messageform).each(function(i, elem) {
      switch (elem.tagName.toLowerCase()) {
        case 'input':
          if (elem.type == 'button' || elem.type == 'submit' || (elem.type == 'hidden' &amp;&amp; elem.name != '_is_html')) {
            break;
          }
          formdata[elem.name] = elem.type != 'checkbox' || elem.checked ? $(elem).val() : '';

          if (formdata[elem.name] != '' &amp;&amp; elem.type != 'hidden')
            empty = false;
          break;

        case 'select':
          formdata[elem.name] = $('option:checked', elem).val();
          break;

        default:
          formdata[elem.name] = $(elem).val();
          if (formdata[elem.name] != '')
            empty = false;
      }
    });

    if (!empty) {
      var index = this.local_storage_get_item('compose.index', []),
        key = this.env.compose_id;

      if ($.inArray(key, index) &lt; 0) {
        index.push(key);
      }

      this.local_storage_set_item('compose.' + key, formdata, true);
      this.local_storage_set_item('compose.index', index);
    }
  };

  // write stored compose data back to form
  this.restore_compose_form = function(key, html_mode)
  {
    var ed, formdata = this.local_storage_get_item('compose.' + key, true);

    if (formdata &amp;&amp; typeof formdata == 'object') {
      $.each(formdata, function(k, value) {
        if (k[0] == '_') {
          var elem = $("[name=" + k + "]");
          if (elem[0] &amp;&amp; elem[0].type == 'checkbox') {
            elem.prop('checked', value != '');
          }
          else {
            elem.val(value).change();
          }
        }
      });

      // initialize HTML editor
      if ((formdata._is_html == '1' &amp;&amp; !html_mode) || (formdata._is_html != '1' &amp;&amp; html_mode)) {
        this.command('toggle-editor', {id: this.env.composebody, html: !html_mode, noconvert: true});
      }
    }
  };

  // remove stored compose data from localStorage
  this.remove_compose_data = function(key)
  {
    var index = this.local_storage_get_item('compose.index', []);

    if ($.inArray(key, index) >= 0) {
      this.local_storage_remove_item('compose.' + key);
      this.local_storage_set_item('compose.index', $.grep(index, function(val,i) { return val != key; }));
    }
  };

  // clear all stored compose data of this user
  this.clear_compose_data = function()
  {
    var i, index = this.local_storage_get_item('compose.index', []);

    for (i=0; i &lt; index.length; i++) {
      this.local_storage_remove_item('compose.' + index[i]);
    }

    this.local_storage_remove_item('compose.index');
  };

  this.change_identity = function(obj, show)
  {
    if (!obj || !obj.options)
      return false;

    var id = $(obj).val(),
      got_sig = this.env.signatures &amp;&amp; this.env.signatures[id],
      sig = this.env.identity,
      show_sig = show ? show : this.env.show_sig;

    // enable manual signature insert
    if (got_sig) {
      this.enable_command('insert-sig', true);
      this.env.compose_commands.push('insert-sig');
      got_sig = true;
    }
    else
      this.enable_command('insert-sig', false);

    // first function execution
    if (!this.env.identities_initialized) {
      this.env.identities_initialized = true;
      if (this.env.show_sig_later)
        this.env.show_sig = true;
      if (this.env.opened_extwin)
        return;
    }

    // update reply-to/bcc fields with addresses defined in identities
    $.each(['replyto', 'bcc'], function() {
      var rx, key = this,
        old_val = sig &amp;&amp; ref.env.identities[sig] ? ref.env.identities[sig][key] : '',
        new_val = id &amp;&amp; ref.env.identities[id] ? ref.env.identities[id][key] : '',
        input = $('[name="_'+key+'"]'), input_val = input.val();

      // remove old address(es)
      if (old_val &amp;&amp; input_val) {
        rx = new RegExp('\\s*' + RegExp.escape(old_val) + '\\s*');
        input_val = input_val.replace(rx, '');
      }

      // cleanup
      input_val = String(input_val).replace(/[,;]\s*[,;]/g, ',').replace(/^[\s,;]+/, '');

      // add new address(es)
      if (new_val &amp;&amp; input_val.indexOf(new_val) == -1 &amp;&amp; input_val.indexOf(new_val.replace(/"/g, '')) == -1) {
        if (input_val) {
          input_val = input_val.replace(/[,;\s]+$/, '') + ', ';
        }

        input_val += new_val + ', ';
      }

      if (old_val || new_val)
        input.val(input_val).change();
    });

    if (this.editor)
      this.editor.change_signature(id, show_sig);

    if (show &amp;&amp; got_sig)
      this.display_message('siginserted', 'confirmation');

    this.env.identity = id;
    this.triggerEvent('change_identity');

    return true;
  };

  // Open file selection dialog for defined upload form
  // Works only on click and only with smart-upload forms
  this.upload_input = function(name)
  {
    $('#' + name + ' input[type="file"]').click();
  };

  // upload (attachment) file
  this.upload_file = function(form, action, lock)
  {
    if (form) {
      var fname, files = [];
      $('input', form).each(function() {
        if (this.files) {
          fname = this.name;
          for (var i=0; i &lt; this.files.length; i++)
            files.push(this.files[i]);
        }
      });

      return this.file_upload(files, {_id: this.env.compose_id || ''}, {
        name: fname,
        action: action,
        lock: lock
      });
    }
  };

  // add file name to attachment list
  // called from upload page
  this.add2attachment_list = function(name, att, upload_id)
  {
    if (upload_id)
      this.triggerEvent('fileuploaded', {name: name, attachment: att, id: upload_id});

    if (upload_id &amp;&amp; this.env.attachments[upload_id])
      delete this.env.attachments[upload_id];

    this.env.attachments[name] = att;

    if (!this.gui_objects.attachmentlist)
      return false;

    var label, indicator, li = $('&lt;li>');

    if (!att.complete &amp;&amp; att.html.indexOf('&lt;') &lt; 0)
      att.html = '&lt;span class="uploading">' + att.html + '&lt;/span>';

    if (!att.complete &amp;&amp; this.env.loadingicon)
      att.html = '&lt;img src="'+this.env.loadingicon+'" alt="" class="uploading" />' + att.html;

    if (!att.complete) {
      label = this.get_label('cancel');
      att.html = '&lt;a title="'+label+'" onclick="return rcmail.cancel_attachment_upload(\''+name+'\');" href="#cancelupload" class="cancelupload">'
        + (this.env.cancelicon ? '&lt;img src="'+this.env.cancelicon+'" alt="'+label+'" />' : '&lt;span class="inner">' + label + '&lt;/span>') + '&lt;/a>' + att.html;
    }

    li.attr('id', name).addClass(att.classname).html(att.html)
      .find('.attachment-name').on('mouseover', function() { rcube_webmail.long_subject_title_ex(this); });

    // replace indicator's li
    if (upload_id &amp;&amp; (indicator = document.getElementById(upload_id))) {
      li.replaceAll(indicator);
    }
    else { // add new li
      li.appendTo(this.gui_objects.attachmentlist);
    }

    // set tabindex attribute
    var tabindex = $(this.gui_objects.attachmentlist).attr('data-tabindex') || '0';
    li.find('a').attr('tabindex', tabindex);

    this.triggerEvent('fileappended', {name: name, attachment: att, id: upload_id, item: li});

    return true;
  };

  this.remove_from_attachment_list = function(name)
  {
    delete this.env.attachments[name];
    $('#'+name).remove();
  };

  this.remove_attachment = function(name)
  {
    if (name &amp;&amp; this.env.attachments[name])
      this.http_post('remove-attachment', { _id:this.env.compose_id, _file:name });

    return false;
  };

  this.cancel_attachment_upload = function(name)
  {
    if (!name || !this.uploads[name])
      return false;

    this.remove_from_attachment_list(name);
    this.uploads[name].abort();
    return false;
  };

  // rename uploaded attachment (in compose)
  this.rename_attachment = function(id)
  {
    var attachment = this.env.attachments[id];

    if (!attachment)
      return;

    var input = $('&lt;input>').attr({type: 'text', size: 50}).val(attachment.name),
      content = $('&lt;label>').text(this.get_label('namex')).append(input);

    this.simple_dialog(content, 'attachmentrename', function() {
        var name;
        if ((name = input.val()) &amp;&amp; name != attachment.name) {
          ref.http_post('rename-attachment', {_id: ref.env.compose_id, _file: id, _name: name},
          ref.set_busy(true, 'loading'));
          return true;
        }
      }
    );
  };

  // update attachments list with the new name
  this.rename_attachment_handler = function(id, name)
  {
    var attachment = this.env.attachments[id];

    if (!attachment || !name)
      return;

    attachment.name = name;

    $('#' + id + ' .attachment-name').text(name).attr('title', '');
  };

  // send remote request to add a new contact
  this.add_contact = function(value, reload, source)
  {
    if (value)
      this.http_post('addcontact', {_address: value, _reload: reload, _source: source});
  };

  // send remote request to search mail or contacts
  this.qsearch = function(value)
  {
    // Note: Some plugins would like to do search without value,
    // so we keep value != '' check to allow that use-case. Which means
    // e.g. that qsearch() with no argument will execute the search.
    if (value != '' || $(this.gui_objects.qsearchbox).val() || $(this.gui_objects.search_interval).val()) {
      var r, lock = this.set_busy(true, 'searching'),
        url = this.search_params(value),
        action = this.env.action == 'compose' &amp;&amp; this.contact_list ? 'search-contacts' : 'search';

      if (this.message_list)
        this.clear_message_list();
      else if (this.contact_list)
        this.list_contacts_clear();

      if (this.env.source)
        url._source = this.env.source;
      if (this.env.group)
        url._gid = this.env.group;

      // reset vars
      this.env.current_page = 1;

      r = this.http_request(action, url, lock);

      this.env.qsearch = {lock: lock, request: r};
      this.enable_command('set-listmode', this.env.threads &amp;&amp; (this.env.search_scope || 'base') == 'base');

      return true;
    }

    return false;
  };

  this.continue_search = function(request_id)
  {
    var lock = this.set_busy(true, 'stillsearching');

    setTimeout(function() {
      var url = ref.search_params();
      url._continue = request_id;
      ref.env.qsearch = { lock: lock, request: ref.http_request('search', url, lock) };
    }, 100);
  };

  // build URL params for search
  this.search_params = function(search, filter)
  {
    var n, url = {}, mods_arr = [],
      mods = this.env.search_mods,
      scope = this.env.search_scope || 'base',
      mbox = this.env.mailbox;

    if (!filter &amp;&amp; this.gui_objects.search_filter)
      filter = this.gui_objects.search_filter.value;

    if (!search &amp;&amp; this.gui_objects.qsearchbox)
      search = this.gui_objects.qsearchbox.value;

    if (this.gui_objects.search_interval)
      url._interval = $(this.gui_objects.search_interval).val();

    if (search) {
      url._q = search;

      if (mods &amp;&amp; this.message_list)
        mods = mods[mbox] || mods['*'];

      if (mods) {
        for (n in mods)
          mods_arr.push(n);
        url._headers = mods_arr.join(',');
      }
    }

    url._layout = this.env.layout;
    url._filter = filter;
    url._scope = scope;
    url._mbox = mbox;

    return url;
  };

  // reset search filter
  this.reset_search_filter = function()
  {
    this.filter_disabled = true;
    if (this.gui_objects.search_filter)
      $(this.gui_objects.search_filter).val('ALL').change();
    this.filter_disabled = false;
  };

  // reset quick-search form
  this.reset_qsearch = function(all)
  {
    if (this.gui_objects.qsearchbox)
      this.gui_objects.qsearchbox.value = '';

    if (this.gui_objects.search_interval)
      $(this.gui_objects.search_interval).val('');

    if (this.env.qsearch)
      this.abort_request(this.env.qsearch);

    if (all) {
      this.env.search_scope = 'base';
      this.reset_search_filter();
    }

    this.env.qsearch = null;
    this.env.search_request = null;
    this.env.search_id = null;
    this.select_all_mode = false;

    this.enable_command('set-listmode', this.env.threads);
  };

  this.set_searchscope = function(scope)
  {
    this.env.search_scope = scope;
  };

  this.set_searchinterval = function(interval)
  {
    this.env.search_interval = interval;
  };

  this.set_searchmods = function(mods)
  {
    var mbox = this.env.mailbox,
      scope = this.env.search_scope || 'base';

    if (!this.env.search_mods)
      this.env.search_mods = {};

    if (mbox)
      this.env.search_mods[mbox] = mods;

    // MANTIS 0005913: Problme pour une recherche dans tous les dossiers
    if (mbox != '*')
      this.env.search_mods['*'] = mods;
  };

  this.is_multifolder_listing = function()
  {
    return this.env.multifolder_listing !== undefined ? this.env.multifolder_listing :
      (this.env.search_request &amp;&amp; (this.env.search_scope || 'base') != 'base');
  };

  // action executed after mail is sent
  this.sent_successfully = function(type, msg, folders, save_error)
  {
    this.display_message(msg, type);
    this.compose_skip_unsavedcheck = true;

    if (this.env.extwin) {
      if (!save_error)
        this.lock_form(this.gui_objects.messageform);

      var filter = {task: 'mail', action: ''},
        rc = this.opener(false, filter) || this.opener(true, filter);

      if (rc) {
        rc.display_message(msg, type);
        // refresh the folder where sent message was saved or replied message comes from
        if (folders &amp;&amp; $.inArray(rc.env.mailbox, folders) >= 0) {
          rc.command('checkmail');
        }
      }

      if (!save_error)
        setTimeout(function() { window.close(); }, 1000);
    }
    else if (!save_error) {
      // before redirect we need to wait some time for Chrome (#1486177)
      setTimeout(function() { ref.list_mailbox(); }, 500);
    }

    if (save_error)
      this.env.is_sent = true;
  };

  this.image_rotate = function()
  {
    var curr = this.image_style ? (this.image_style.rotate || 0) : 0;

    this.image_style.rotate = curr > 180 ? 0 : curr + 90;
    this.apply_image_style();
  };

  this.image_scale = function(prop)
  {
    var curr = this.image_style ? (this.image_style.scale || 1) : 1;

    this.image_style.scale = Math.max(0.1, curr + 0.1 * (prop == '-' ? -1 : 1));
    this.apply_image_style();
  };

  this.apply_image_style = function()
  {
    var style = [],
      head = $(this.gui_objects.messagepartframe).contents().find('head');

    $('#image-style', head).remove();

    $.each({scale: '', rotate: 'deg'}, function(i, v) {
      var val = ref.image_style[i];
      if (val)
        style.push(i + '(' + val + v + ')');
    });

    if (style)
      head.append($('&lt;style id="image-style">').text('img { transform: ' + style.join(' ') + '}'));
  };

  // Update import dialog state
  this.import_state_set = function(state)
  {
    if (this.import_dialog) {
      this.import_state = state;

      var button = $(this.import_dialog).parent().find('.ui-dialog-buttonset > button').first();

      if (state != 'error') {
        // replace Import/Cancel buttons with Close button
        button.hide();
        button.next().text(this.gettext('close')).focus();
      }
      else {
        // activate the Import button
        button.prop('disabled', false);
      }
    }
  };


  /*********************************************************/
  /*********     keyboard live-search methods      *********/
  /*********************************************************/

  // handler for keyboard events on address-fields
  this.ksearch_keydown = function(e, obj, props)
  {
    if (this.ksearch_timer)
      clearTimeout(this.ksearch_timer);

    var key = rcube_event.get_keycode(e);

    switch (key) {
      case 38:  // arrow up
      case 40:  // arrow down
        if (!this.ksearch_visible())
          return;

        var dir = key == 38 ? 1 : 0,
          highlight = this.ksearch_pane.find('li.selected')[0];

        if (!highlight)
          highlight = this.ksearch_pane.__ul.firstChild;

        if (highlight)
          this.ksearch_select(dir ? highlight.previousSibling : highlight.nextSibling);

        return rcube_event.cancel(e);

      case 9:   // tab
        if (rcube_event.get_modifier(e) == SHIFT_KEY || !this.ksearch_visible()) {
          this.ksearch_hide();
          return;
        }

      case 13:  // enter
        if (!this.ksearch_visible())
          return false;

        // insert selected address and hide ksearch pane
        this.insert_recipient(this.ksearch_selected);
        this.ksearch_hide();

        // Don't cancel on Tab, we want to jump to the next field (#5659)
        return key == 9 ? null : rcube_event.cancel(e);

      case 27:  // escape
        this.ksearch_hide();
        return;

      case 37:  // left
      case 39:  // right
        return;
    }

    // start timer
    this.ksearch_timer = setTimeout(function() { ref.ksearch_get_results(props); }, 200);
    this.ksearch_input = obj;

    return true;
  };

  this.ksearch_visible = function()
  {
    return this.ksearch_selected !== null &amp;&amp; this.ksearch_selected !== undefined &amp;&amp; this.ksearch_value;
  };

  this.ksearch_select = function(node)
  {
    if (this.ksearch_pane &amp;&amp; node) {
      this.ksearch_pane.find('li.selected').removeClass('selected').removeAttr('aria-selected');
    }

    if (node) {
      $(node).addClass('selected').attr('aria-selected', 'true');
      this.ksearch_selected = node._rcm_id;
      $(this.ksearch_input).attr('aria-activedescendant', 'rcmkSearchItem' + this.ksearch_selected);
    }
  };

  this.insert_recipient = function(id)
  {
    if (id === null || !this.env.contacts[id] || !this.ksearch_input)
      return;

    var trigger = false, insert = '', delim = ', ',
      contact = this.env.contacts[id];

    this.ksearch_destroy();

    // insert all members of a group
    if (typeof contact === 'object' &amp;&amp; contact.type == 'group' &amp;&amp; !contact.email &amp;&amp; contact.id) {
      // We wrap the group name with invisible markers to prevent from problems with group expanding (#7569)
      var name = '\u200b' + contact.name + '\u200b';
      insert = name + delim;
      this.group2expand[contact.id] = {name: name, input: this.ksearch_input};
      this.http_request('mail/group-expand', {_source: contact.source, _gid: contact.id}, false);
    }
    else if (typeof contact === 'object' &amp;&amp; contact.name) {
      insert = contact.name + delim;
      trigger = true;
    }
    else if (typeof contact === 'string') {
      insert = contact + delim;
      trigger = true;
    }

    this.ksearch_input_replace(this.ksearch_value, insert, null, trigger);

    if (trigger) {
      this.triggerEvent('autocomplete_insert', {
          field: this.ksearch_input,
          insert: insert,
          data: contact,
          search: this.ksearch_value_last,
          result_type: 'person'
      });

      this.ksearch_value_last = null;
      this.compose_type_activity++;
    }
  };

  this.replace_group_recipients = function(id, recipients)
  {
    var data = this.group2expand[id];

    if (data) {
      this.ksearch_input_replace(data.name, recipients, data.input);

      this.triggerEvent('autocomplete_insert', {
          field: data.input,
          insert: recipients,
          data: data,
          search: this.ksearch_value_last,
          result_type: 'group'
      });

      this.ksearch_value_last = null;
      this.group2expand[id] = null;
      this.compose_type_activity++;
    }
  };

  // address search processor
  this.ksearch_get_results = function(props)
  {
    if (this.ksearch_pane &amp;&amp; this.ksearch_pane.is(":visible"))
      this.ksearch_pane.hide();

    // get string from cursor position back to the last comma or semicolon
    var q = this.ksearch_input_get(),
      min = this.env.autocomplete_min_length,
      data = this.ksearch_data;

    // trim query string
    q = q.trim();

    // Don't (re-)search if the last results are still active
    if (q == this.ksearch_value)
      return;

    this.ksearch_destroy();

    if (q.length &amp;&amp; q.length &lt; min) {
      if (!this.ksearch_info) {
        this.ksearch_info = this.display_message(this.get_label('autocompletechars').replace('$min', min));
      }
      return;
    }

    var old_value = this.ksearch_value;
    this.ksearch_value = q;
    this.ksearch_value_last = q;   // Group expansion clears ksearch_value before calling autocomplete_insert trigger, therefore store it in separate variable for later consumption.

    // ...string is empty
    if (!q.length)
      return;

    // ...new search value contains old one and previous search was not finished or its result was empty
    if (old_value &amp;&amp; old_value.length &amp;&amp; q.startsWith(old_value) &amp;&amp; (!data || data.num &lt;= 0) &amp;&amp; this.env.contacts &amp;&amp; !this.env.contacts.length)
      return;

    var sources = props &amp;&amp; props.sources ? props.sources : [''];
    var reqid = this.multi_thread_http_request({
      items: sources,
      threads: props &amp;&amp; props.threads ? props.threads : 1,
      action:  props &amp;&amp; props.action ? props.action : 'mail/autocomplete',
      postdata: { _search:q, _source:'%s' },
      lock: this.display_message('searching', 'loading')
    });

    this.ksearch_data = { id:reqid, sources:sources.slice(), num:sources.length };
  };

  this.ksearch_query_results = function(results, search, reqid)
  {
    // trigger multi-thread http response callback
    this.multi_thread_http_response(results, reqid);

    // search stopped in meantime?
    if (!this.ksearch_value)
      return;

    // ignore this outdated search response
    if (this.ksearch_input &amp;&amp; search != this.ksearch_value)
      return;

    // display search results
    var i, id, len, ul, text, type, init,
      is_framed = this.is_framed(),
      value = this.ksearch_value,
      maxlen = this.env.autocomplete_max ? this.env.autocomplete_max : 15;

    // create results pane if not present
    if (!this.ksearch_pane) {
      ul = $('&lt;ul>');
      this.ksearch_pane = $('&lt;div>')
        .attr({id: 'rcmKSearchpane', role: 'listbox', 'class': 'select-menu inline'})
        .css({position: 'absolute', 'z-index': 30000})
        .append(ul)
        .appendTo(is_framed ? parent.document.body : document.body);

      this.ksearch_pane.__ul = ul[0];
      this.triggerEvent('autocomplete_create', {obj: this.ksearch_pane});
    }

    ul = this.ksearch_pane.__ul;

    // remove all search results or add to existing list if parallel search
    if (reqid &amp;&amp; this.ksearch_pane.data('reqid') == reqid) {
      maxlen -= ul.childNodes.length;
    }
    else {
      this.ksearch_pane.data('reqid', reqid);
      init = 1;
      // reset content
      ul.innerHTML = '';
      this.env.contacts = [];

      // Calculate the results pane position and size
      // Elastic: On small screen we use the width/position of the whole .ac-input element (input's parent)
      var is_composite_input = $('html').is('.layout-small,.layout-phone') &amp;&amp; $(this.ksearch_input).parents('.ac-input').length == 1,
        input = is_composite_input ? $(this.ksearch_input).parents('.ac-input')[0] : $(this.ksearch_input)[0],
        pos = $(input).offset();

      // ... consider scroll position
      pos.left -= $(document.documentElement).scrollLeft();
      pos.top -= $(document.documentElement).scrollTop();

      // ... consider iframe position
      if (is_framed) {
        try {
          parent.$('iframe').each(function() {
            if (this.contentWindow == window) {
              var offset = $(this).offset();
              pos.left += offset.left;
              pos.top += offset.top;
            }
          });
        }
        catch(e) {}
      }

      var w = $(is_framed ? parent : window).width(),
        input_width = $(input).outerWidth(),
        left = w - pos.left > 200 ? pos.left : w - 200,
        top = (pos.top + input.offsetHeight + 1),
        //PAMELA - Changement de la taille de l'input pour les grands crans
        width = $(input).outerWidth() >= 400 ? $(input).outerWidth() : Math.min(400, w - left);

      this.ksearch_pane.css({
        left: (is_composite_input ? pos.left : left) + 'px',
        top: top + 'px',
        maxWidth: (is_composite_input ? input_width : width) + 'px',
        minWidth: '200px',
        width: is_composite_input ? (input_width + 'px') : 'auto',
        display: 'none'
      });
    }

    // add each result line to list
    if (results &amp;&amp; (len = results.length)) {
      for (i=0; i &lt; len &amp;&amp; maxlen > 0; i++) {
        text = typeof results[i] === 'object' ? (results[i].display || results[i].name) : results[i];
        type = typeof results[i] === 'object' ? results[i].type : '';
        id = i + this.env.contacts.length;
        if (this.env.contacts.length &amp;&amp; this.env.autocomplete_clean_duplicates) {
          if (this.env.contacts.find(contact => contact.name == text || contact.display == text)) {
            continue;
          }
        }
        $('&lt;li>').attr({id: 'rcmkSearchItem' + id, role: 'option'})
          .html('&lt;i class="icon">&lt;/i>' + this.quote_html(text.replace(new RegExp('('+RegExp.escape(value)+')', 'ig'), '##$1%%')).replace(/##([^%]+)%%/g, '&lt;b>$1&lt;/b>'))
          .addClass(type || '')
          .appendTo(ul)
          .mouseover(function() { ref.ksearch_select(this); })
          .mouseup(function() { ref.ksearch_click(this); })
          .get(0)._rcm_id = id;
        maxlen -= 1;
      }
    }

    if (ul.childNodes.length) {
      // set the right aria-* attributes to the input field
      $(this.ksearch_input)
        .attr({'aria-haspopup': 'true', 'aria-expanded': 'true', 'aria-owns': 'rcmKSearchpane'});

      this.ksearch_pane.show();

      // select the first
      if (!this.env.contacts.length) {
        this.ksearch_select($('li', ul)[0]);
      }
    }

    if (len)
      this.env.contacts = this.env.contacts.concat(results);

    if (this.ksearch_data.id == reqid)
      this.ksearch_data.num--;
  };

  // Getter for input value
  // returns a string from the last comma to current cursor position
  this.ksearch_input_get = function()
  {
    if (!this.ksearch_input)
      return '';

    var cp = this.get_caret_pos(this.ksearch_input);

    return this.ksearch_input.value.substr(0, cp).split(/[,;]/).pop();
  };

  // Setter for input value
  // replaces 'from' string with 'to' and sets cursor position at the end
  this.ksearch_input_replace = function(from, to, input, trigger)
  {
    if (!this.ksearch_input &amp;&amp; !input)
      return;

    if (!input)
      input = this.ksearch_input;

    var cpos = this.get_caret_pos(input),
      p = input.value.lastIndexOf(from, cpos),
      pre = input.value.substring(0, p),
      end = input.value.substring(p + from.length, input.value.length);

    input.value = pre + to + end;

    // set caret to insert pos
    this.set_caret_pos(input, cpos + to.length - from.length);

    // run onchange action on the element
    $(input).trigger('change', [true, trigger]);
  };

  this.ksearch_click = function(node)
  {
    if (this.ksearch_input)
      this.ksearch_input.focus();

    this.insert_recipient(node._rcm_id);
    this.ksearch_hide();
  };

  this.ksearch_blur = function()
  {
    if (this.ksearch_timer)
      clearTimeout(this.ksearch_timer);

    this.ksearch_input = null;
    this.ksearch_hide();
  };

  this.ksearch_hide = function()
  {
    this.ksearch_selected = null;
    this.ksearch_value = '';

    if (this.ksearch_pane)
      this.ksearch_pane.hide();

    $(this.ksearch_input)
      .attr({'aria-haspopup': 'false', 'aria-expanded': 'false'})
      .removeAttr('aria-activedescendant')
      .removeAttr('aria-owns');

    this.ksearch_destroy();
  };

  // Clears autocomplete data/requests
  this.ksearch_destroy = function()
  {
    if (this.ksearch_data)
      this.multi_thread_request_abort(this.ksearch_data.id);

    if (this.ksearch_info)
      this.hide_message(this.ksearch_info);

    if (this.ksearch_msg)
      this.hide_message(this.ksearch_msg);

    this.ksearch_data = null;
    this.ksearch_info = null;
    this.ksearch_msg = null;
  };


  /*********************************************************/
  /*********         address book methods          *********/
  /*********************************************************/

  this.contactlist_select = function(list)
  {
    if (this.preview_timer)
      clearTimeout(this.preview_timer);

    var id, targets,
      groupcount = 0,
      writable = false,
      deletable = false,
      copy_writable = false,
      selected = list.get_selection().length,
      source = this.env.source ? this.env.address_sources[this.env.source] : null;

    // we don't have dblclick handler here, so use 50 instead of this.dblclick_time
    if (this.env.contentframe &amp;&amp; !list.multi_selecting &amp;&amp; (id = list.get_single_selection()))
      this.preview_timer = setTimeout(function() { ref.load_contact(id, 'show'); }, this.preview_delay_click);
    else if (this.env.contentframe)
      this.show_contentframe(false);

    if (selected) {
      list.draggable = false;

      // no source = search result, we'll need to detect if any of
      // selected contacts are in writable addressbook to enable edit/delete
      // we'll also need to know sources used in selection for copy
      // and group-addmember operations (drag&amp;drop)
      this.env.selection_sources = [];

      if (source) {
        this.env.selection_sources.push(this.env.source);
      }

      $.each(list.get_selection(), function(i, v) {
        var book, sid, contact = list.data[v];
        if (!source) {
          sid = String(v).replace(/^[^-]+-/, '');
          book = sid ? ref.env.address_sources[sid] : null;

          if (book) {
            writable = writable || (!book.readonly &amp;&amp; !contact.readonly);
            deletable = deletable || book.deletable === true;
            ref.env.selection_sources.push(sid);
          }
        }
        else {
          writable = writable || (!source.readonly &amp;&amp; !contact.readonly);
          deletable = deletable || source.deletable === true;
        }

        if (contact._type != 'group')
          list.draggable = true;
      });

      this.env.selection_sources = $.unique(this.env.selection_sources);

      if (source &amp;&amp; source.groups)
        $.each(this.env.contactgroups, function() { if (this.source === ref.env.source) groupcount++; });

      targets = $.map(this.env.address_sources, function(v, i) { return v.readonly ? null : i; });
      copy_writable = $.grep(targets, function(v) { return jQuery.inArray(v, ref.env.selection_sources) &lt; 0; }).length > 0;
    }

    // if a group is currently selected, and there is at least one contact selected
    // we can enable the group-remove-selected command
    this.enable_command('group-assign-selected', groupcount > 0 &amp;&amp; writable);
    this.enable_command('group-remove-selected', this.env.group &amp;&amp; writable);
    this.enable_command('print', 'qrcode', selected == 1);
    this.enable_command('export-selected', selected > 0);
    this.enable_command('edit', id &amp;&amp; writable);
    this.enable_command('delete', 'move', writable || deletable);
    this.enable_command('copy', copy_writable);

    return false;
  };

  this.list_contacts = function(src, group, page, search)
  {
    var win, folder, index = -1, url = {},
      refresh = src === undefined &amp;&amp; group === undefined &amp;&amp; page === undefined,
      target = window;

    if (!src)
      src = this.env.source;

    if (refresh)
      group = this.env.group;

    if (src != this.env.source) {
      page = this.env.current_page = 1;
      this.reset_qsearch();
    }
    else if (!refresh &amp;&amp; group != this.env.group)
      page = this.env.current_page = 1;

    if (this.env.search_id)
      folder = 'S'+this.env.search_id;
    else if (!this.env.search_request)
      folder = group ? 'G'+src+group : src;

    this.env.source = this.env.last_source = src;
    this.env.group = this.env.last_group = group;

    // truncate groups listing stack
    $.each(this.env.address_group_stack, function(i, v) {
      if (ref.env.group == v.id) {
        index = i;
        return false;
      }
    });

    this.env.address_group_stack = index &lt; 0 ? [] : this.env.address_group_stack.slice(0, index);

    // remove cached contact group selector
    this.destroy_entity_selector('contactgroup-selector');

    // make sure the current group is on top of the stack
    if (this.env.group) {
      if (!search) search = {};
      search.id = this.env.group;
      this.env.address_group_stack.push(search);

      // mark the first group on the stack as selected in the directory list
      folder = 'G'+src+this.env.address_group_stack[0].id;
    }
    else if (this.gui_objects.addresslist_title) {
        $(this.gui_objects.addresslist_title).text(this.get_label('contacts'));
    }

    if (!this.env.search_id)
      this.select_folder(folder, '', true);

    // load contacts remotely
    if (this.gui_objects.contactslist) {
      this.list_contacts_remote(src, group, page);
      return;
    }

    if (win = this.get_frame_window(this.env.contentframe)) {
      target = win;
      url._framed = 1;
    }

    if (group)
      url._gid = group;
    if (page)
      url._page = page;
    if (src)
      url._source = src;

    // also send search request to get the correct listing
    if (this.env.search_request)
      url._search = this.env.search_request;

    this.set_busy(true, 'loading');
    this.location_href(url, target);
  };

  // send remote request to load contacts list
  this.list_contacts_remote = function(src, group, page)
  {
    // clear message list first
    this.list_contacts_clear();

    // send request to server
    var url = {}, lock = this.set_busy(true, 'loading');

    if (src)
      url._source = src;
    if (page)
      url._page = page;
    if (group)
      url._gid = group;

    this.env.source = src;
    this.env.group = group;

    // also send search request to get the right records
    if (this.env.search_request)
      url._search = this.env.search_request;

    this.http_request(this.env.task == 'mail' ? 'list-contacts' : 'list', url, lock);

    if (this.env.task != 'mail')
      this.update_state({_source: src, _page: page &amp;&amp; page > 1 ? page : null, _gid: group});
  };

  this.list_contacts_clear = function()
  {
    this.contact_list.data = {};
    this.contact_list.clear(true);
    this.show_contentframe(false);
    this.enable_command('delete', 'move', 'copy', 'print', false);
  };

  this.set_group_prop = function(prop)
  {
    if (this.gui_objects.addresslist_title) {
      var boxtitle = $(this.gui_objects.addresslist_title).html('');  // clear contents

      // add link to pop back to parent group
      if (this.env.address_group_stack.length > 1
        || (this.env.address_group_stack.length == 1 &amp;&amp; this.env.address_group_stack[0].search_request)
      ) {
        var link = $('&lt;a href="#list">...&lt;/a>')
          .attr({title: this.get_label('uponelevel'), 'class': 'poplink'})
          .click(function() { return ref.command('popgroup', '', this); });

        boxtitle.append(link).append('&amp;nbsp;&amp;raquo;&amp;nbsp;');
      }

      boxtitle.append($('&lt;span>').text(prop ? prop.name : this.get_label('contacts')));
    }
  };

  // load contact record
  this.load_contact = function(cid, action, framed)
  {
    var win, url = {}, target = window,
      rec = this.contact_list ? this.contact_list.data[cid] : null;

    if (win = this.get_frame_window(this.env.contentframe)) {
      url._framed = 1;
      target = win;
      this.show_contentframe(true);

      // load dummy content, unselect selected row(s)
      if (!cid)
        this.contact_list.clear_selection();

      this.enable_command('export-selected', 'print', rec &amp;&amp; rec._type != 'group');
    }
    else if (framed)
      return false;

    if (action &amp;&amp; (cid || action == 'add') &amp;&amp; !this.drag_active) {
      if (this.env.group)
        url._gid = this.env.group;

      if (this.env.search_request)
        url._search = this.env.search_request;

      if (cid)
        url._cid = this.preview_id = cid;

      url._action = action;
      url._source = this.env.source;

      this.location_href(url, target, true);
    }

    return true;
  };

  // add/delete member to/from the group
  this.group_member_change = function(what, cid, source, gid)
  {
    if (what != 'add')
      what = 'del';

    var lock = this.display_message(what == 'add' ? 'addingmember' : 'removingmember', 'loading'),
      post_data = {_cid: cid, _source: source, _gid: gid};

    this.http_post('group-'+what+'members', post_data, lock);
  };

  this.contacts_drag_menu = function(e, to)
  {
    var dest = to.type == 'group' ? to.source : to.id,
      source = this.env.source;

    if (!this.env.address_sources[dest] || this.env.address_sources[dest].readonly)
      return true;

    // search result may contain contacts from many sources, but if there is only one...
    if (source == '' &amp;&amp; this.env.selection_sources.length == 1)
      source = this.env.selection_sources[0];

    if (to.type == 'group' &amp;&amp; dest == source) {
      var cid = this.contact_list.get_selection().join(',');
      this.group_member_change('add', cid, dest, to.id);
      return true;
    }
    // move action is not possible, "redirect" to copy if menu wasn't requested
    else if (!this.commands.move &amp;&amp; rcube_event.get_modifier(e) != SHIFT_KEY) {
      this.copy_contacts(to);
      return true;
    }

    return this.drag_menu(e, to);
  };

  // copy contact(s) to the specified target (group or directory)
  this.copy_contacts = function(to, event, cid)
  {
    if (!to) {
      cid = this.contact_list.get_selection();
      return this.addressbook_selector(event, function(to, obj) {
          var to = $(obj).data('source') ? ref.env.contactgroups['G' + $(obj).data('source') + $(obj).data('gid')] : ref.env.address_sources[to];
          ref.copy_contacts(to, null, cid);
        });
    }

    var dest = to.type == 'group' ? to.source : to.id,
      source = this.env.source,
      group = this.env.group ? this.env.group : '';

    cid = cid ? cid.join(',') : this.contact_list.get_selection().join(',');

    if (!cid || !this.env.address_sources[dest] || this.env.address_sources[dest].readonly)
      return;

    // search result may contain contacts from many sources, but if there is only one...
    if (source == '' &amp;&amp; this.env.selection_sources.length == 1)
      source = this.env.selection_sources[0];

    // target is a group
    if (to.type == 'group') {
      if (dest == source)
        return;

      var lock = this.display_message('copyingcontact', 'loading'),
        post_data = {_cid: cid, _source: this.env.source, _to: dest, _togid: to.id, _gid: group};

      this.http_post('copy', post_data, lock);
    }
    // target is an addressbook
    else if (to.id != source) {
      var lock = this.display_message('copyingcontact', 'loading'),
        post_data = {_cid: cid, _source: this.env.source, _to: to.id, _gid: group};

      this.http_post('copy', post_data, lock);
    }
  };

  // move contact(s) to the specified target (group or directory)
  this.move_contacts = function(to, event, cid)
  {
    if (!to) {
      cid = this.contact_list.get_selection();
      return this.addressbook_selector(event, function(to, obj) {
          var to = $(obj).data('source') ? ref.env.contactgroups['G' + $(obj).data('source') + $(obj).data('gid')] : ref.env.address_sources[to];
          ref.move_contacts(to, null, cid);
        });
    }

    var dest = to.type == 'group' ? to.source : to.id,
      source = this.env.source,
      group = this.env.group ? this.env.group : '';

    if (!this.env.address_sources[dest] || this.env.address_sources[dest].readonly)
      return;

    if (!cid)
      cid = this.contact_list.get_selection();

    // search result may contain contacts from many sources, but if there is only one...
    if (source == '' &amp;&amp; this.env.selection_sources.length == 1)
      source = this.env.selection_sources[0];

    if (to.type == 'group') {
      if (dest == source)
        return;

      this._with_selected_contacts('move', {_to: dest, _togid: to.id, _cid: cid});
    }
    // target is an addressbook
    else if (to.id != source)
      this._with_selected_contacts('move', {_to: to.id, _cid: cid});
  };

  // delete contact(s)
  this.delete_contacts = function()
  {
    var undelete = this.env.source &amp;&amp; this.env.address_sources[this.env.source].undelete;

    if (undelete) {
      this._with_selected_contacts('delete', {_cid: this.contact_list.get_selection()});
    }
    else {
      var cid = this.contact_list.get_selection();
      this.confirm_dialog(this.get_label('deletecontactconfirm'), 'delete', function() {
        ref._with_selected_contacts('delete', {_cid: cid});
      });
    }
  };

  this._with_selected_contacts = function(action, post_data)
  {
    var selection = post_data._cid;

    // exit if no contact specified or if selection is empty
    if (!selection.length &amp;&amp; !this.env.cid)
      return;

    var n, a_cids = [],
      label = action == 'delete' ? 'contactdeleting' : 'movingcontact',
      lock = this.display_message(label, 'loading'),
      display_next = this.check_display_next();

    if (this.env.cid)
      a_cids.push(this.env.cid);
    else {
      for (n=0; n&lt;selection.length; n++) {
        id = selection[n];
        a_cids.push(id);
        this.contact_list.remove_row(id, display_next &amp;&amp; n == selection.length-1);
      }

      if (!display_next)
        this.contact_list.clear_selection();
    }

    if (!post_data)
      post_data = {};

    post_data._source = this.env.source;
    post_data._from = this.env.action;
    post_data._cid = a_cids.join(',');

    if (this.env.group)
      post_data._gid = this.env.group;

    // also send search request to get the right records from the next page
    if (this.env.search_request)
      post_data._search = this.env.search_request;

    // send request to server
    this.http_post(action, post_data, lock)

    return true;
  };

  // update a contact record in the list
  this.update_contact_row = function(cid, cols_arr, newcid, source, data)
  {
    var list = this.contact_list;

    cid = this.html_identifier(cid);

    // when in searching mode, concat cid with the source name
    if (!list.rows[cid]) {
      cid = cid + '-' + source;
      if (newcid)
        newcid = newcid + '-' + source;
    }

    list.update_row(cid, cols_arr, newcid, true);
    list.data[cid] = data;
  };

  // add row to contacts list
  this.add_contact_row = function(cid, cols, classes, data)
  {
    if (!this.gui_objects.contactslist)
      return false;

    var c, col, list = this.contact_list,
      row = { cols:[] };

    row.id = 'rcmrow' + this.html_identifier(cid);
    row.className = 'contact ' + (classes || '');

    if (list.in_selection(cid))
      row.className += ' selected';

    // add each submitted col
    for (c in cols) {
      col = {};
      col.className = String(c).toLowerCase();
      col.innerHTML = cols[c];
      row.cols.push(col);
    }

    // store data in list member
    list.data[cid] = data;
    list.insert_row(row);

    this.enable_command('export', list.rowcount > 0);
  };

  this.init_contact_form = function()
  {
    var col;

    if (this.env.coltypes) {
      this.set_photo_actions($('#ff_photo').val());
      for (col in this.env.coltypes)
        this.init_edit_field(col, null);
    }

    $('.contactfieldgroup .row a.deletebutton').click(function() {
      ref.delete_edit_field(this);
      return false;
    });

    $('select.addfieldmenu').change(function() {
      ref.insert_edit_field($(this).val(), $(this).attr('rel'), this);
      this.selectedIndex = 0;
    });

    // enable date pickers on date fields
    if ($.datepicker &amp;&amp; this.env.date_format) {
      $.datepicker.setDefaults({
        dateFormat: this.env.date_format,
        changeMonth: true,
        changeYear: true,
        yearRange: '-120:+10',
        showOtherMonths: true,
        selectOtherMonths: true
      });
      $('input.datepicker').datepicker();
    }

    // Submit search form on Enter
    if (this.env.action == 'search')
      $(this.gui_objects.editform).append($('&lt;input type="submit">').hide())
        .submit(function() { $('input.mainaction').click(); return false; });
  };

  // group creation dialog
  this.group_create = function()
  {
    var input = $('&lt;input>').attr({type: 'text', 'data-submit': 'true'}),
      content = $('&lt;label>').text(this.get_label('namex')).append(input),
      source = this.env.source;

    this.simple_dialog(content, 'newgroup', function() {
        var name;
        if (name = input.val()) {
          ref.http_post('group-create', {_source: source, _name: name},
            ref.set_busy(true, 'loading'));
          return true;
        }
      });
  };

  // group rename dialog
  this.group_rename = function()
  {
    if (!this.env.group)
      return;

    var group_name = this.env.contactgroups['G' + this.env.source + this.env.group].name,
      input = $('&lt;input>').attr({type: 'text', 'data-submit': 'true'}).val(group_name),
      content = $('&lt;label>').text(this.get_label('namex')).append(input),
      source = this.env.source,
      group = this.env.group;

    this.simple_dialog(content, 'grouprename', function() {
        var name;
        if ((name = input.val()) &amp;&amp; name != group_name) {
          ref.http_post('group-rename', {_source: source, _gid: group, _name: name},
          ref.set_busy(true, 'loading'));
          return true;
        }
      });
  };

  this.group_delete = function()
  {
    if (this.env.group) {
      var group = this.env.group;
      this.confirm_dialog(this.get_label('deletegroupconfirm'), 'delete', function() {
          var lock = ref.set_busy(true, 'groupdeleting');
          ref.http_post('group-delete', {_source: ref.env.source, _gid: group}, lock);
        });
    }
  };

  // callback from server upon group-delete command
  this.remove_group_item = function(prop)
  {
    var key = 'G' + prop.source + prop.id;

    if (this.treelist.remove(key)) {
      // make sure there is no cached address book or contact group selectors
      this.destroy_entity_selector('addressbook-selector');
      this.destroy_entity_selector('contactgroup-selector');

      this.triggerEvent('group_delete', { source:prop.source, id:prop.id });
      delete this.env.contactfolders[key];
      delete this.env.contactgroups[key];
    }

    if (prop.source == this.env.source &amp;&amp; prop.id == this.env.group)
      this.list_contacts(prop.source, 0);
  };

  //assign selected contacts to a group
  this.group_assign_selected = function(props, obj, event)
  {
    var cid = ref.contact_list.get_selection();
    var source = ref.env.source;
    this.contactgroup_selector(event, function(to) { ref.group_member_change('add', cid, source, to); });
  };

  //remove selected contacts from current active group
  this.group_remove_selected = function()
  {
    this.http_post('group-delmembers', {_cid: this.contact_list.get_selection(),
      _source: this.env.source, _gid: this.env.group});
  };

  //callback after deleting contact(s) from current group
  this.remove_group_contacts = function(props)
  {
    if (this.env.group !== undefined &amp;&amp; (this.env.group === props.gid)) {
      var n, selection = this.contact_list.get_selection(),
        display_next= this.check_display_next();

      for (n=0; n&lt;selection.length; n++) {
        id = selection[n];
        this.contact_list.remove_row(id, display_next &amp;&amp; n == selection.length-1);
      }

      if (!display_next)
        this.contact_list.clear_selection();
    }
  };

  // callback for creating a new contact group
  this.insert_contact_group = function(prop)
  {
    prop.type = 'group';

    var key = 'G'+prop.source+prop.id,
      link = $('&lt;a>').attr({href: '#', rel: prop.source + ':' + prop.id})
        .click(function() { return ref.command('listgroup', prop, this); })
        .text(prop.name);

    this.env.contactfolders[key] = this.env.contactgroups[key] = prop;
    this.treelist.insert({ id:key, html:link, classes:['contactgroup'] }, prop.source, 'contactgroup');

    // make sure there is no cached address book or contact group selectors
    this.destroy_entity_selector('addressbook-selector');
    this.destroy_entity_selector('contactgroup-selector');

    this.triggerEvent('group_insert', { id:prop.id, source:prop.source, name:prop.name, li:this.treelist.get_item(key) });
  };

  // callback for renaming a contact group
  this.update_contact_group = function(prop)
  {
    var key = 'G'+prop.source+prop.id,
      newnode = {};

    // group ID has changed, replace link node and identifiers
    if (prop.newid) {
      var newkey = 'G'+prop.source+prop.newid,
        newprop = $.extend({}, prop);

      this.env.contactfolders[newkey] = this.env.contactfolders[key];
      this.env.contactfolders[newkey].id = prop.newid;
      this.env.group = prop.newid;

      delete this.env.contactfolders[key];
      delete this.env.contactgroups[key];

      newprop.id = prop.newid;
      newprop.type = 'group';

      newnode.id = newkey;
      newnode.html = $('&lt;a>').attr({href: '#', rel: prop.source + ':' + prop.newid})
        .click(function() { return ref.command('listgroup', newprop, this); })
        .text(prop.name);
    }
    // update displayed group name
    else {
      $(this.treelist.get_item(key)).children().first().text(prop.name);
      this.env.contactfolders[key].name = this.env.contactgroups[key].name = prop.name;

      if (prop.source == this.env.source &amp;&amp; prop.id == this.env.group)
        this.set_group_prop(prop);
    }

    // update list node and re-sort it
    this.treelist.update(key, newnode, true);

    // make sure there is no cached address book or contact group selectors
    this.destroy_entity_selector('addressbook-selector');
    this.destroy_entity_selector('contactgroup-selector');

    this.triggerEvent('group_update', { id:prop.id, source:prop.source, name:prop.name, li:this.treelist.get_item(key), newid:prop.newid });
  };

  this.update_group_commands = function()
  {
    var source = this.env.source != '' ? this.env.address_sources[this.env.source] : null,
      supported = source &amp;&amp; source.groups &amp;&amp; !source.readonly;

    this.enable_command('group-create', supported);
    this.enable_command('group-rename', 'group-delete', supported &amp;&amp; this.env.group);
  };

  this.init_edit_field = function(col, elem)
  {
    var label = this.env.coltypes[col].label;

    if (!elem)
      elem = $('.ff_' + col);

    if (label &amp;&amp; !$('label[for="ff_' + col + '"]').length)
      elem.placeholder(label);
  };

  this.insert_edit_field = function(col, section, menu)
  {
    // just make pre-defined input field visible
    var elem = $('#ff_' + col);
    if (elem.length) {
      $('label[for="ff_' + col + '"]').parent().show();
      elem.show().focus();
      $(menu).children('option[value="' + col + '"]').prop('disabled', true);
    }
    else {
      var lastelem = $('.ff_' + col),
        appendcontainer = $('#contactsection'+section+' .contactcontroller'+col);

      if (!appendcontainer.length) {
        var sect = $('#contactsection'+section),
          lastgroup = $('.contactfieldgroup', sect).last();
        appendcontainer = $('&lt;fieldset>').addClass('contactfieldgroup contactcontroller'+col);
        if (lastgroup.length)
          appendcontainer.insertAfter(lastgroup);
        else
          sect.prepend(appendcontainer);
      }

      if (appendcontainer.get(0).nodeName == 'FIELDSET') {
        var label, input,
          colprop = this.env.coltypes[col],
          name_suffix = colprop.limit != 1 ? '[]' : '',
          compact = $(menu).data('compact') ? true : false,
          input_id = 'ff_' + col + (colprop.count || 0),
          row = $('&lt;div>').addClass('row input-group'),
          cell = $('&lt;div>').addClass('contactfieldcontent ' + colprop.type);

        // Field label
        if (colprop.subtypes_select) {
          label = $(colprop.subtypes_select);
          if (!compact)
            label = $('&lt;div>').addClass('contactfieldlabel label').append(label);
          else
            label.addClass('input-group-prepend');
        }
        else {
          label = $('&lt;label>').addClass('contactfieldlabel label input-group-text')
            .attr('for', input_id).text(colprop.label);

          if (compact)
            label = $('&lt;span class="input-group-prepend">').append(label);
        }

        // Field input
        if (colprop.type == 'text' || colprop.type == 'date') {
          input = $('&lt;input>')
            .addClass('form-control ff_' + col)
            .attr({type: 'text', name: '_'+col+name_suffix, size: colprop.size, id: input_id});

          this.init_edit_field(col, input);

          if (colprop.type == 'date' &amp;&amp; $.datepicker)
            input.addClass('datepicker').datepicker();
        }
        else if (colprop.type == 'textarea') {
          input = $('&lt;textarea>')
            .addClass('form-control ff_' + col)
            .attr({ name: '_' + col + name_suffix, cols: colprop.size, rows: colprop.rows, id: input_id });

          this.init_edit_field(col, input);
        }
        else if (colprop.type == 'composite') {
          var i, childcol, cp, first, templ, cols = [], suffices = [], content = cell;

          row.addClass('composite');

          if (compact)
            content = $('&lt;div class="content input-group-text">');

          // read template for composite field order
          if (templ = this.env[col + '_template']) {
            for (i=0; i &lt; templ.length; i++) {
              cols.push(templ[i][1]);
              suffices.push(templ[i][2]);
            }
          }
          else {  // list fields according to appearance in colprop
            for (childcol in colprop.childs)
              cols.push(childcol);
          }

          for (i=0; i &lt; cols.length; i++) {
            childcol = cols[i];
            cp = colprop.childs[childcol];
            input = $('&lt;input>')
              .addClass('form-control ff_' + childcol)
              .attr({ type: 'text', name: '_' + childcol + name_suffix, size: cp.size })
              .appendTo(content);

            if (!compact)
              content.append(suffices[i] || " ");

            this.init_edit_field(childcol, input);
            if (!first) first = input;
          }

          if (compact)
            input = content;
          else
            input = first;  // set focus to the first of this composite fields
        }
        else if (colprop.type == 'select') {
          input = $('&lt;select>')
            .addClass('custom-select ff_' + col)
            .attr({ name: '_' + col + name_suffix, id: input_id });

          var options = input.attr('options');
          options[options.length] = new Option('---', '');
          if (colprop.options)
            $.each(colprop.options, function(i, val) { options[options.length] = new Option(val, i); });
        }

        if (input) {
          var delbutton = $('&lt;a href="#del">&lt;/a>')
            .addClass('contactfieldbutton deletebutton input-group-text icon delete')
            .attr({title: this.get_label('delete'), rel: col})
            .html(this.env.delbutton)
            .click(function() { ref.delete_edit_field(this); return false; });

          row.append(label);

          if (!compact) {
            if (colprop.type != 'composite')
              cell.append(input);
            row.append(cell.append(delbutton));
          }
          else {
            row.append(input).append(delbutton);
            delbutton.wrap('&lt;span class="input-group-append">');
          }

          row.appendTo(appendcontainer.show());

          if (input.is('div'))
            input.find('input').first().focus();
          else
            input.first().focus();

          // disable option if limit reached
          if (!colprop.count) colprop.count = 0;
          if (++colprop.count == colprop.limit &amp;&amp; colprop.limit)
            $(menu).children('option[value="' + col + '"]').prop('disabled', true);

          this.triggerEvent('insert-edit-field', input);
        }
      }
    }
  };

  this.delete_edit_field = function(elem)
  {
    var col = $(elem).attr('rel'),
      colprop = this.env.coltypes[col],
      input_group = $(elem).parents('div.row'),
      fieldset = $(elem).parents('fieldset.contactfieldgroup'),
      addmenu = fieldset.parent().find('select.addfieldmenu');

    // just clear input but don't hide the last field
    if (--colprop.count &lt;= 0 &amp;&amp; colprop.visible)
      input_group.find('input').val('').blur();
    else {
      input_group.remove();
      // hide entire fieldset if no more rows
      if (!fieldset.children('div.row').length)
        fieldset.hide();
    }

    // enable option in add-field selector or insert it if necessary
    if (addmenu.length) {
      var option = addmenu.children('option[value="'+col+'"]');
      if (option.length)
        option.prop('disabled', false);
      else
        option = $('&lt;option>').attr('value', col).html(colprop.label).appendTo(addmenu);
      addmenu.show();
    }
  };

  this.upload_contact_photo = function(form)
  {
    if (form &amp;&amp; form.elements._photo.value) {
      this.async_upload_form(form, 'upload-photo', function(e) {
        ref.set_busy(false, null, ref.file_upload_id);
      });

      // display upload indicator
      this.file_upload_id = this.set_busy(true, 'uploading');
    }
  };

  this.replace_contact_photo = function(id)
  {
    var img_src = id == '-del-' ? this.env.photo_placeholder :
      this.env.comm_path + '&amp;_action=photo&amp;_source=' + this.env.source + '&amp;_cid=' + (this.env.cid || 0) + '&amp;_photo=' + id;

    this.set_photo_actions(id);
    $(this.gui_objects.contactphoto).children('img').attr('src', img_src);
  };

  this.photo_upload_end = function()
  {
    this.set_busy(false, null, this.file_upload_id);
    delete this.file_upload_id;
  };

  this.set_photo_actions = function(id)
  {
    var n, buttons = this.buttons['upload-photo'];
    for (n=0; buttons &amp;&amp; n &lt; buttons.length; n++)
      $('a#'+buttons[n].id).html(this.get_label(id == '-del-' ? 'addphoto' : 'replacephoto'));

    $('#ff_photo').val(id);
    this.enable_command('upload-photo', this.env.coltypes.photo ? true : false);
    this.enable_command('delete-photo', this.env.coltypes.photo &amp;&amp; id != '-del-');
  };

  // load advanced search page
  this.advanced_search = function()
  {
    var dialog = $('&lt;iframe>').attr('src', this.url('search', {_form: 1, _framed: 1})),
      search_func = function() {
        var valid = false, form = {_adv: 1};

        $.each($(dialog[0].contentWindow.rcmail.gui_objects.editform).serializeArray(), function() {
          if (this.name.match(/^_search/) &amp;&amp; this.value != '') {
            form[this.name] = this.value;
            valid = true;
          }
        });

        if (valid) {
          ref.http_post('search', form, ref.set_busy(true, 'searching'));
          return true;
        }
      };

    this.simple_dialog(dialog, this.gettext('advsearch'), search_func, {
      button: 'search',
      width: 600,
      height: 500
    });

    return true;
  };

  // unselect directory/group
  this.unselect_directory = function()
  {
    this.select_folder('');
    this.enable_command('search-delete', false);
  };

  // callback for creating a new saved search record
  this.insert_saved_search = function(name, id)
  {
    var key = 'S'+id,
      link = $('&lt;a>').attr({href: '#', rel: id})
        .click(function() { return ref.command('listsearch', id, this); })
        .html(name),
      prop = { name:name, id:id };

    this.savedsearchlist.insert({ id:key, html:link, classes:['contactsearch'] }, null, 'contactsearch');
    this.select_folder(key,'',true);
    this.enable_command('search-delete', true);
    this.env.search_id = id;

    this.triggerEvent('abook_search_insert', prop);
  };

  // creates a dialog for saved search
  this.search_create = function()
  {
    var input = $('&lt;input>').attr('type', 'text'),
      content = $('&lt;label>').text(this.get_label('namex')).append(input);

    this.simple_dialog(content, 'searchsave',
      function() {
        var name;
        if (name = input.val()) {
          ref.http_post('search-create', {_search: ref.env.search_request, /* PAMELA - Search contacts by source */_source: rcmail.env.source, _name: name},
            ref.set_busy(true, 'loading'));
          return true;
        }
      }
    );
  };

  this.search_delete = function()
  {
    if (this.env.search_request) {
      var lock = this.set_busy(true, 'savedsearchdeleting');
      this.http_post('search-delete', {_sid: this.env.search_id}, lock);
    }
  };

  // callback from server upon search-delete command
  this.remove_search_item = function(id)
  {
    if (this.savedsearchlist.remove('S' + id)) {
      this.triggerEvent('search_delete', {id: id});
    }

    this.env.search_id = null;
    this.env.search_request = null;
    this.list_contacts_clear();
    this.reset_qsearch();
    this.enable_command('search-delete', 'search-create', false);
  };

  this.listsearch = function(id)
  {
    var lock = this.set_busy(true, 'searching');

    if (this.contact_list) {
      this.list_contacts_clear();
    }

    this.reset_qsearch();

    if (this.savedsearchlist) {
      this.treelist.select('');
      this.savedsearchlist.select('S'+id);
    }
    else
      this.select_folder('S'+id, '', true);

    // reset vars
    this.env.current_page = 1;
    this.http_request('search', {_sid: id}, lock);
  };

  // display a dialog with QR code image
  this.qrcode = function()
  {
    var title = this.get_label('qrcode'),
      options = {button: false, cancel_button: 'close', width: 300, height: 300},
      img = new Image(300, 300);

    img.src = this.url('addressbook/qrcode', {_source: this.env.source, _cid: this.get_single_cid()});

    return this.simple_dialog(img, title, null, options);
  };


  /*********************************************************/
  /*********        user settings methods          *********/
  /*********************************************************/

  // preferences section select and load options frame
  this.section_select = function(list)
  {
    var win, id = list.get_single_selection();

    if (id &amp;&amp; (win = this.get_frame_window(this.env.contentframe))) {
      this.location_href({_action: 'edit-prefs', _section: id, _framed: 1}, win, true);
    }
  };

  this.response_select = function(list)
  {
    var id = list.get_single_selection();

    this.enable_command('delete', !!id &amp;&amp; $.inArray(id, this.env.readonly_responses) &lt; 0);

    if (id) {
      this.load_response(id, 'edit-response');
    }
  };

  // load response record
  this.load_response = function(id, action)
  {
    var win;

    if (win = this.get_frame_window(this.env.contentframe)) {
      if (id || action == 'add-response') {
        if (!id)
          this.responses_list.clear_selection();

        this.location_href({_action: action, _key: id, _framed: 1}, win, true);
      }
    }
  };

  this.identity_select = function(list)
  {
    var id = list.get_single_selection();

    this.enable_command('delete', !!id &amp;&amp; list.rowcount > 1 &amp;&amp; this.env.identities_level &lt; 2);

    if (id) {
      this.load_identity(id, 'edit-identity');
    }
  };

  // load identity record
  this.load_identity = function(id, action)
  {
    var win;

    if (win = this.get_frame_window(this.env.contentframe)) {
      if (id || action == 'add-identity') {
        if (!id)
          this.identity_list.clear_selection();

        this.location_href({_action: action, _iid: id, _framed: 1}, win, true);
      }
    }
  };

  this.delete_identity = function(id)
  {
    // exit if no identity is specified or if selection is empty
    var selection = this.identity_list.get_selection();
    if (!(selection.length || this.env.iid))
      return;

    if (!id)
      id = this.env.iid ? this.env.iid : selection[0];

    // submit request with appended token
    if (id) {
      this.confirm_dialog(this.get_label('deleteidentityconfirm'), 'delete', function() {
          ref.http_post('settings/delete-identity', { _iid: id }, true);
        });
    }
  };

  this.update_identity_row = function(id, name, add)
  {
    var list = this.identity_list,
      rid = this.html_identifier(id);

    if (add) {
      list.insert_row({ id:'rcmrow'+rid, cols:[ { className:'mail', innerHTML:name } ] });
      list.select(rid);
    }
    else {
      list.update_row(rid, [ name ]);
    }
  };

  this.update_response_row = function(response, oldkey)
  {
    var list = this.responses_list;

    if (list &amp;&amp; oldkey) {
      list.update_row(oldkey, [ response.name ], response.key, true);
    }
    else if (list) {
      list.insert_row({ id:'rcmrow'+response.key, cols:[ { className:'name', innerHTML:response.name } ] });
      list.select(response.key);
    }
  };

  this.remove_response = function(key)
  {
    var frame;

    if (this.env.textresponses) {
      delete this.env.textresponses[key];
    }

    if (this.responses_list) {
      this.responses_list.remove_row(key);
      this.show_contentframe(false);
    }

    this.enable_command('delete', false);
  };

  this.remove_identity = function(id)
  {
    var frame, list = this.identity_list,
      rid = this.html_identifier(id);

    if (list &amp;&amp; id) {
      list.remove_row(rid);
      this.show_contentframe(false);
    }

    this.enable_command('delete', false);
  };


  /*********************************************************/
  /*********        folder manager methods         *********/
  /*********************************************************/

  this.init_subscription_list = function()
  {
    var delim = RegExp.escape(this.env.delimiter);

    this.last_sub_rx = RegExp('['+delim+']?[^'+delim+']+$');

    this.subscription_list = new rcube_treelist_widget(this.gui_objects.subscriptionlist, {
        selectable: true,
        tabexit: false,
        parent_focus: true,
        id_prefix: 'rcmli',
        id_encode: this.html_identifier_encode,
        id_decode: this.html_identifier_decode,
        searchbox: '#foldersearch'
    });

    this.subscription_list
      .addEventListener('select', function(node) { ref.subscription_select(node.id); })
      .addEventListener('collapse', function(node) { ref.folder_collapsed(node) })
      .addEventListener('expand', function(node) { ref.folder_collapsed(node) })
      .addEventListener('search', function(p) { if (p.query) ref.subscription_select(); })
      .draggable({cancel: 'li.mailbox.root,input,div.treetoggle,.custom-control'})
      .droppable({
        // @todo: find better way, accept callback is executed for every folder
        // on the list when dragging starts (and stops), this is slow, but
        // I didn't find a method to check droptarget on over event
        accept: function(node) {
          if (!node.is('.mailbox'))
            return false;

          var source_folder = ref.folder_id2name(node.attr('id')),
            dest_folder = ref.folder_id2name(this.id),
            source = ref.env.subscriptionrows[source_folder],
            dest = ref.env.subscriptionrows[dest_folder];

          return source &amp;&amp; !source[2]
            &amp;&amp; dest_folder != source_folder.replace(ref.last_sub_rx, '')
            &amp;&amp; !dest_folder.startsWith(source_folder + ref.env.delimiter);
        },
        drop: function(e, ui) {
          var source = ref.folder_id2name(ui.draggable.attr('id')),
            dest = ref.folder_id2name(this.id);

          ref.subscription_move_folder(source, dest);
        }
      });
  };

  this.folder_id2name = function(id)
  {
    return id ? ref.html_identifier_decode(id.replace(/^rcmli/, '')) : null;
  };

  this.subscription_select = function(id)
  {
    var folder;

    if (id &amp;&amp; id != '*' &amp;&amp; (folder = this.env.subscriptionrows[id])) {
      this.env.mailbox = id;
      this.show_folder(id);
      this.enable_command('delete-folder', !folder[2]);
    }
    else {
      this.env.mailbox = null;
      this.show_contentframe(false);
      this.enable_command('delete-folder', 'purge', false);
    }
  };

  this.subscription_move_folder = function(from, to)
  {
    if (from &amp;&amp; to !== null &amp;&amp; from != to &amp;&amp; to != from.replace(this.last_sub_rx, '')) {
      var path = from.split(this.env.delimiter),
        basename = path.pop(),
        newname = to === '' || to === '*' ? basename : to + this.env.delimiter + basename;

      if (newname != from) {
        this.confirm_dialog(this.get_label('movefolderconfirm'), 'move', function() {
          ref.http_post('rename-folder', {_folder_oldname: from, _folder_newname: newname},
            ref.set_busy(true, 'foldermoving'));
        }, {button_class: 'save move'});
      }
    }
  };

  // tell server to create and subscribe a new mailbox
  this.create_folder = function()
  {
    this.show_folder('', this.env.mailbox);
  };

  // delete a specific mailbox with all its messages
  this.delete_folder = function(name)
  {
    if (!name)
      name = this.env.mailbox;

    if (name) {
      this.confirm_dialog(this.get_label('deletefolderconfirm'), 'delete', function() {
          ref.http_post('delete-folder', {_mbox: name}, ref.set_busy(true, 'folderdeleting'));
        });
    }
  };

  // Add folder row to the table and initialize it
  this.add_folder_row = function (id, name, display_name, is_protected, subscribed, class_name, refrow, subfolders)
  {
    if (!this.gui_objects.subscriptionlist)
      return false;

    // reset searching
    if (this.subscription_list.is_search()) {
      this.subscription_select();
      this.subscription_list.reset_search();
    }

    // disable drag-n-drop temporarily
    // some skins disable dragging in mobile mode, so we have to check if it is still draggable
    if (this.subscription_list.is_draggable())
      this.subscription_list.draggable('destroy').droppable('destroy');

    var row, n, tmp, tmp_name, rowid, collator, pos, p, parent = '',
      folders = [], list = [], slist = [],
      list_element = $(this.gui_objects.subscriptionlist);
      row = refrow ? refrow : $($('li', list_element).get(1)).clone(true);

    if (!row.length) {
      // Refresh page if we don't have a table row to clone
      this.goto_url('folders');
      return false;
    }

    // set ID, reset css class
    row.attr({id: 'rcmli' + this.html_identifier_encode(id), 'class': class_name});

    if (!refrow || !refrow.length) {
      // remove old data, subfolders and toggle
      $('ul,div.treetoggle', row).remove();
      row.removeData('filtered');
    }

    // set folder name
    $('a', row).first().text(display_name).removeAttr('title');

    // update subscription checkbox
    $('input[name="_subscribed[]"]', row).first().val(id)
      .prop({checked: subscribed ? true : false, disabled: is_protected ? true : false});

    // add to folder/row-ID map
    this.env.subscriptionrows[id] = [name, display_name, false];

    // copy folders data to an array for sorting
    $.each(this.env.subscriptionrows, function(k, v) { v[3] = k; folders.push(v); });

    try {
      // use collator if supported (FF29, IE11, Opera15, Chrome24)
      collator = new Intl.Collator(this.env.locale.replace('_', '-'));
    }
    catch (e) {};

    // sort folders
    folders.sort(function(a, b) {
      var i, f1, f2,
        path1 = a[0].split(ref.env.delimiter),
        path2 = b[0].split(ref.env.delimiter),
        len = path1.length;

      for (i=0; i&lt;len; i++) {
        f1 = path1[i];
        f2 = path2[i];

        if (f1 !== f2) {
          if (f2 === undefined)
            return 1;
          if (collator)
            return collator.compare(f1, f2);
          else
            return f1 &lt; f2 ? -1 : 1;
        }
        else if (i == len-1) {
          return -1
        }
      }
    });

    for (n in folders) {
      p = folders[n][3];
      // protected folder
      if (folders[n][2]) {
        tmp_name = p + this.env.delimiter;
        // prefix namespace cannot have subfolders (#1488349)
        if (tmp_name == this.env.prefix_ns)
          continue;
        slist.push(p);
        tmp = tmp_name;
      }
      // protected folder's child
      else if (tmp &amp;&amp; p.startsWith(tmp))
        slist.push(p);
      // other
      else {
        list.push(p);
        tmp = null;
      }
    }

    // check if subfolder of a protected folder
    for (n=0; n&lt;slist.length; n++) {
      if (id.startsWith(slist[n] + this.env.delimiter))
        rowid = slist[n];
    }

    // find folder position after sorting
    for (n=0; !rowid &amp;&amp; n&lt;list.length; n++) {
      if (n &amp;&amp; list[n] == id)
        rowid = list[n-1];
    }

    // add row to the table
    if (rowid &amp;&amp; (n = this.subscription_list.get_item(rowid, true))) {
      // find parent folder
      if (pos = id.lastIndexOf(this.env.delimiter)) {
        parent = id.substring(0, pos);
        parent = this.subscription_list.get_item(parent, true);

        // add required tree elements to the parent if not already there
        if (!$('div.treetoggle', parent).length) {
          $('&lt;div>&amp;nbsp;&lt;/div>').addClass('treetoggle collapsed').appendTo(parent);
        }
        if (!$('ul', parent).length) {
          $('&lt;ul>').css('display', 'none').appendTo(parent);
        }
      }

      if (parent &amp;&amp; n == parent) {
        $('ul', parent).first().append(row);
      }
      else {
        while (p = $(n).parent().parent().get(0)) {
          if (parent &amp;&amp; p == parent)
            break;
          if (!$(p).is('li.mailbox'))
            break;
          n = p;
        }

        $(n).after(row);
      }
    }
    else {
      list_element.append(row);
    }

    // add subfolders
    $.extend(this.env.subscriptionrows, subfolders || {});

    // update list widget
    this.subscription_list.reset(true);
    this.subscription_select();

    // expand parent
    if (parent) {
      this.subscription_list.expand(this.folder_id2name(parent.id));
    }

    row = row.show().get(0);
    if (row.scrollIntoView)
      row.scrollIntoView(false);

    // Let skins to do their magic, e.g. Elastic will fix pretty checkbox
    if (!refrow)
      this.triggerEvent('clonerow', {row: row, id: id});

    return row;
  };

  // replace an existing table row with a new folder line (with subfolders)
  this.replace_folder_row = function(oldid, id, name, display_name, is_protected, class_name)
  {
    if (!this.gui_objects.subscriptionlist) {
      if (this.is_framed()) {
        // @FIXME: for some reason this 'parent' variable need to be prefixed with 'window.'
        return window.parent.rcmail.replace_folder_row(oldid, id, name, display_name, is_protected, class_name);
      }

      return false;
    }

    // reset searching
    if (this.subscription_list.is_search()) {
      this.subscription_select();
      this.subscription_list.reset_search();
    }

    var subfolders = {},
      row = this.subscription_list.get_item(oldid, true),
      parent = $(row).parent(),
      old_folder = this.env.subscriptionrows[oldid],
      prefix_len_id = oldid.length,
      prefix_len_name = old_folder[0].length,
      subscribed = $('input[name="_subscribed[]"]', row).first().prop('checked');

    // no renaming, only update class_name
    if (oldid == id) {
      $(row).attr('class', class_name || '');
      return;
    }

    // update subfolders
    $('li', row).each(function() {
      var fname = ref.folder_id2name(this.id),
        folder = ref.env.subscriptionrows[fname],
        newid = id + fname.slice(prefix_len_id);

      this.id = 'rcmli' + ref.html_identifier_encode(newid);
      $('input[name="_subscribed[]"]', this).first().val(newid);
      folder[0] = name + folder[0].slice(prefix_len_name);

      subfolders[newid] = folder;
      delete ref.env.subscriptionrows[fname];
    });

    // get row off the list
    row = $(row).detach();

    delete this.env.subscriptionrows[oldid];

    // remove parent list/toggle elements if not needed
    if (parent.get(0) != this.gui_objects.subscriptionlist &amp;&amp; !$('li', parent).length) {
      $('ul,div.treetoggle', parent.parent()).remove();
    }

    // move the existing table row
    this.add_folder_row(id, name, display_name, is_protected, subscribed, class_name, row, subfolders);
  };

  // remove the table row of a specific mailbox from the table
  this.remove_folder_row = function(folder)
  {
    // reset searching
    if (this.subscription_list.is_search()) {
      this.subscription_select();
      this.subscription_list.reset_search();
    }

    var list = [], row = this.subscription_list.get_item(folder, true);

    // get subfolders if any
    $('li', row).each(function() { list.push(ref.folder_id2name(this.id)); });

    // remove folder row (and subfolders)
    this.subscription_list.remove(folder);

    // update local list variable
    list.push(folder);
    $.each(list, function(i, v) { delete ref.env.subscriptionrows[v]; });
  };

  this.subscribe = function(folder)
  {
    this.change_subscription_state(folder, true);
  };

  this.unsubscribe = function(folder)
  {
    this.change_subscription_state(folder, false);
  };

  this.change_subscription_state = function(folder, state)
  {
    if (folder) {
      var prefix = state ? '' : 'un',
        lock = this.display_message('folder' + prefix + 'subscribing', 'loading');

      this.http_post(prefix + 'subscribe', {_mbox: folder}, lock);

      // in case this was a list of search results, update also the main list
      $(this.gui_objects.subscriptionlist).find('input[value="' + folder + '"]').prop('checked', state);
    }
  };


  // when user select a folder in manager
  this.show_folder = function(folder, path, force)
  {
    var win, target = window,
      action = folder === '' ? 'add' : 'edit',
      url = '&amp;_action=' + action + '-folder&amp;_mbox=' + urlencode(folder);

    if (path)
      url += '&amp;_path='+urlencode(path);

    if (win = this.get_frame_window(this.env.contentframe)) {
      target = win;
      url += '&amp;_framed=1';
    }

    if (String(target.location.href).indexOf(url) >= 0 &amp;&amp; !force)
      this.show_contentframe(true);
    else
      this.location_href(this.env.comm_path+url, target, true);
  };

  // disables subscription checkbox (for protected folder)
  this.disable_subscription = function(folder)
  {
    var row = this.subscription_list.get_item(folder, true);
    if (row)
      $('input[name="_subscribed[]"]', row).first().prop('disabled', true);
  };

  // resets state of subscription checkbox (e.g. on error)
  this.reset_subscription = function(folder, state)
  {
    var row = this.subscription_list.get_item(folder, true);
    if (row)
      $('input[name="_subscribed[]"]', row).first().prop('checked', state);
  };

  this.folder_size = function(folder)
  {
    var lock = this.set_busy(true, 'loading');
    this.http_post('folder-size', {_mbox: folder}, lock);
  };

  this.folder_size_update = function(size)
  {
    $('#folder-size').replaceWith(size);
  };

  // filter folders by namespace
  this.folder_filter = function(prefix)
  {
    this.subscription_list.reset_search();

    this.subscription_list.container.children('li').each(function() {
      var i, folder = ref.folder_id2name(this.id);
      // show all folders
      if (prefix == '---') {
      }
      // got namespace prefix
      else if (prefix) {
        if (folder !== prefix) {
          $(this).data('filtered', true).hide();
          return
        }
      }
      // no namespace prefix, filter out all other namespaces
      else {
        // first get all namespace roots
        for (i in ref.env.ns_roots) {
          if (folder === ref.env.ns_roots[i]) {
            $(this).data('filtered', true).hide();
            return;
          }
        }
      }

      $(this).removeData('filtered').show();
    });
  };

  /*********************************************************/
  /*********           GUI functionality           *********/
  /*********************************************************/

  this.init_button = function(cmd, prop)
  {
    var elm = document.getElementById(prop.id);
    if (!elm)
      return;

    var preload = false;
    if (prop.type == 'image') {
      elm = elm.parentNode;
      preload = true;
    }

    elm._command = cmd;
    elm._id = prop.id;
    if (prop.sel) {
      elm.onmousedown = function(e) { return ref.button_sel(this._command, this._id); };
      elm.onmouseup = function(e) { return ref.button_out(this._command, this._id); };
      if (preload)
        new Image().src = prop.sel;
    }
    if (prop.over) {
      elm.onmouseover = function(e) { return ref.button_over(this._command, this._id); };
      elm.onmouseout = function(e) { return ref.button_out(this._command, this._id); };
      if (preload)
        new Image().src = prop.over;
    }
  };

  // set event handlers on registered buttons
  this.init_buttons = function()
  {
    for (var cmd in this.buttons) {
      if (typeof cmd !== 'string')
        continue;

      for (var i=0; i&lt;this.buttons[cmd].length; i++) {
        this.init_button(cmd, this.buttons[cmd][i]);
      }
    }
  };

  // set button to a specific state
  this.set_button = function(command, state)
  {
    var n, button, obj, a_buttons = this.buttons[command],
      len = a_buttons ? a_buttons.length : 0;

    for (n=0; n&lt;len; n++) {
      button = a_buttons[n];
      obj = document.getElementById(button.id);

      if (!obj || button.status === state)
        continue;

      // get default/passive setting of the button
      if (button.type == 'image' &amp;&amp; !button.status) {
        button.pas = obj._original_src ? obj._original_src : obj.src;
        // respect PNG fix on IE browsers
        if (obj.runtimeStyle &amp;&amp; obj.runtimeStyle.filter &amp;&amp; obj.runtimeStyle.filter.match(/src=['"]([^'"]+)['"]/))
          button.pas = RegExp.$1;
      }
      else if (!button.status)
        button.pas = String(obj.className);

      button.status = state;

      // set image according to button state
      if (button.type == 'image' &amp;&amp; button[state]) {
        obj.src = button[state];
      }
      // set class name according to button state
      else if (button[state] !== undefined) {
        obj.className = button[state];
      }

      // disable/enable input buttons
      if (button.type == 'input' || button.type == 'button') {
        obj.disabled = state == 'pas';
      }
      else {
        $(obj).attr({
          tabindex: state == 'pas' || state == 'sel' ? '-1' : ($(obj).attr('data-tabindex') || '0'),
          'aria-disabled': state == 'pas' || state == 'sel' ? 'true' : 'false'
        });
      }
    }
  };

  // display a specific alttext
  this.set_alttext = function(command, label)
  {
    var n, button, obj, link, label,
      a_buttons = this.buttons[command],
      len = a_buttons ? a_buttons.length : 0;

    for (n=0; n&lt;len; n++) {
      button = a_buttons[n];
      obj = document.getElementById(button.id);
      label = this.get_label(label);

      if (obj &amp;&amp; button.type == 'image') {
        obj.setAttribute('alt', label);
        if ((link = obj.parentNode) &amp;&amp; link.tagName.toLowerCase() == 'a')
          link.setAttribute('title', label);
      }
      else if (obj)
        obj.setAttribute('title', label);
    }
  };

  // mouse over button
  this.button_over = function(command, id)
  {
    this.button_event(command, id, 'over');
  };

  // mouse down on button
  this.button_sel = function(command, id)
  {
    this.button_event(command, id, 'sel');
  };

  // mouse out of button
  this.button_out = function(command, id)
  {
    this.button_event(command, id, 'act');
  };

  // event of button
  this.button_event = function(command, id, event)
  {
    var n, button, obj, a_buttons = this.buttons[command],
      len = a_buttons ? a_buttons.length : 0;

    for (n=0; n&lt;len; n++) {
      button = a_buttons[n];
      if (button.id == id &amp;&amp; button.status == 'act') {
        if (button[event] &amp;&amp; (obj = document.getElementById(button.id))) {
          obj[button.type == 'image' ? 'src' : 'className'] = button[event];
        }

        if (event == 'sel') {
          this.buttons_sel[id] = command;
        }
      }
    }
  };

  // write to the document/window title
  this.set_pagetitle = function(title)
  {
    if (title &amp;&amp; document.title)
      document.title = title;
  };

  // display a system message, list of types in common.css (below #message definition)
  this.display_message = function(msg, type, timeout, key)
  {
    if (msg &amp;&amp; msg.length &amp;&amp; /^[a-z._]+$/.test(msg))
      msg = this.get_label(msg);

    // pass command to parent window
    if (this.is_framed())
      return parent.rcmail.display_message(msg, type, timeout);

    if (!this.gui_objects.message) {
      // save message in order to display after page loaded
      if (type != 'loading')
        this.pending_message = [msg, type, timeout, key];
      return 1;
    }

    if (!type)
      type = 'notice';
    else if (type == 'loading') {
      if (!key)
        key = 'loading';
      if (!timeout)
        timeout = this.env.request_timeout * 1000;
      if (!msg)
        msg = this.get_label('loading');
    }

    if (!key)
      key = this.html_identifier(msg);

    var date = new Date(),
      id = type + date.getTime();

    if (!timeout) {
      switch (type) {
        case 'error':
        case 'warning':
          timeout = this.message_time * 2;
          break;

        case 'uploading':
          timeout = 0;
          break;

        default:
          timeout = this.message_time;
      }
    }

    // The same message is already displayed
    if (this.messages[key]) {
      // replace label
      if (this.messages[key].obj)
        $('div.content', this.messages[key].obj).html(msg);
      // store label in stack
      if (type == 'loading') {
        this.messages[key].labels.push({'id': id, 'msg': msg});
      }
      // add element and set timeout
      this.messages[key].elements.push(id);
      setTimeout(function() { ref.hide_message(id, type == 'loading'); }, timeout);
      return id;
    }

    // create DOM object and display it
    var obj = $('&lt;div>').addClass(type + ' content').html(msg).data('key', key),
      cont = $(this.gui_objects.message).append(obj).show();

    this.messages[key] = {'obj': obj, 'elements': [id]};

    if (type == 'loading') {
      this.messages[key].labels = [{'id': id, 'msg': msg}];
    }
    else if (type != 'uploading') {
      obj.click(function() { return ref.hide_message(obj); })
        .attr('role', 'alert');
    }

    this.triggerEvent('message', { message:msg, type:type, timeout:timeout, object:obj });

    if (timeout > 0)
      setTimeout(function() { ref.hide_message(id, type != 'loading'); }, timeout);

    return id;
  };

  // make a message to disappear
  this.hide_message = function(obj, fade)
  {
    // pass command to parent window
    if (this.is_framed())
      return parent.rcmail.hide_message(obj, fade);

    if (!this.gui_objects.message)
      return;

    var k, n, i, o, m = this.messages;

    // Hide message by object, don't use for 'loading'!
    if (typeof obj === 'object') {
      o = $(obj);
      k = o.data('key');
      this.hide_message_object(o, fade);
      if (m[k])
        delete m[k];
    }
    // Hide message by id
    else {
      for (k in m) {
        for (n in m[k].elements) {
          if (m[k] &amp;&amp; m[k].elements[n] == obj) {
            m[k].elements.splice(n, 1);
            // hide DOM element if last instance is removed
            if (!m[k].elements.length) {
              this.hide_message_object(m[k].obj, fade);
              delete m[k];
            }
            // set pending action label for 'loading' message
            else if (k == 'loading') {
              for (i in m[k].labels) {
                if (m[k].labels[i].id == obj) {
                  delete m[k].labels[i];
                }
                else {
                  o = m[k].labels[i].msg;
                  $('div.content', m[k].obj).html(o);
                }
              }
            }
          }
        }
      }
    }
  };

  // hide message object and remove from the DOM
  this.hide_message_object = function(o, fade)
  {
    if (fade)
      o.fadeOut(600, function() { $(this).remove(); });
    else
      o.hide().remove();
  };

  // remove all messages immediately
  this.clear_messages = function()
  {
    // pass command to parent window
    if (this.is_framed())
      return parent.rcmail.clear_messages();

    var k, n, m = this.messages;

    for (k in m)
      for (n in m[k].elements)
        if (m[k].obj)
          this.hide_message_object(m[k].obj);

    this.messages = {};
  };

  // display uploading message with progress indicator
  // data should contain: name, total, current, percent, text
  this.display_progress = function(data)
  {
    if (!data || !data.name)
      return;

    var msg = this.messages['progress' + data.name];

    if (!data.label)
      data.label = this.get_label('uploadingmany');

    if (!msg) {
      if (!data.percent || data.percent &lt; 100)
        this.display_message(data.label, 'uploading', 0, 'progress' + data.name);
      return;
    }

    if (!data.total || data.percent >= 100) {
      this.hide_message(msg.obj);
      return;
    }

    if (data.text)
      data.label += ' ' + data.text;

    msg.obj.text(data.label);
  };

  // open a jquery UI dialog with the given content
  this.show_popup_dialog = function(content, title, buttons, options)
  {
    // forward call to parent window
    if (this.is_framed()) {
      return parent.rcmail.show_popup_dialog(content, title, buttons, options);
    }

    var popup = $('&lt;div class="popup">');

    if (typeof content == 'object') {
      popup.append(content);
      if ($(content).is('iframe'))
        popup.addClass('iframe');
    }
    else
      popup.html(content);

    // assign special classes to dialog buttons
    var i = 0, fn = function(button, classes, idx) {
        if (typeof button == 'function') {
          button = {
            click: button,
            text: idx,
            'class': classes
          };
        }
        else {
          buttons['class'] = classes;
        }

        return button;
      };

    if (options &amp;&amp; options.button_classes)
      $.each(buttons, function(idx, button) {
        var cl = options.button_classes[i];
        if (cl)
          buttons[idx] = fn(button, cl, idx);
        i++;
      });

    options = $.extend({
        title: title,
        buttons: buttons,
        modal: true,
        resizable: true,
        width: 500,
        close: function(event, ui) { $(this).remove(); }
      }, options || {});

    popup.dialog(options);

    if (options.width)
      popup.width(options.width);
    if (options.height)
      popup.height(options.height);

    var dialog = popup.parent();

    if (!options.noresize) {
      // resize and center popup
      var win = $(window), w = win.width(), h = win.height(),
        width = popup.width(),
        height = options.height || (popup[0].scrollHeight + 20),
        titlebar_height = $('.ui-dialog-titlebar', dialog).outerHeight() || 0,
        buttonpane_height = $('.ui-dialog-buttonpane', dialog).outerHeight() || 0,
        padding = (parseInt(dialog.css('padding-top')) + parseInt(popup.css('padding-top'))) * 2;

      popup.dialog('option', {
        height: Math.min(h - 40, height + titlebar_height + buttonpane_height + padding + 2),
        width: Math.min(w - 20, width + 28)
      });
    }
    else {
      popup.css('width', 'auto');
    }

    // Don't propagate keyboard events to the UI below the dialog (#6055)
    dialog.on('keydown keyup', function(e) { e.stopPropagation(); });

    // Add Enter key handler to the input, click the 'mainaction' button
    dialog.find('input[data-submit]').on('keydown', function(e) {
      if (e.which == 13) {
        dialog.find('.ui-dialog-buttonpane button.mainaction').click();
      }
    });

    this.triggerEvent('dialog-open', {obj: popup});

    return popup;
  };

  // show_popup_dialog() wrapper for simple dialogs with action and Cancel buttons
  this.simple_dialog = function(content, title, action_func, options)
  {
    if (!options)
      options = {};

    var title = this.get_label(title),
      save_label = options.button || 'save',
      save_class = options.button_class || save_label.replace(/^[^\.]+\./i, ''),
      cancel_label = options.cancel_button || 'cancel',
      cancel_class = options.cancel_class || cancel_label.replace(/^[^\.]+\./i, ''),
      close_func = function(e, ui, dialog) {
        (ref.is_framed() ? parent.$ : $)(dialog || this).dialog('close');
        if (options.cancel_func) options.cancel_func(e, ref);
      },
      buttons = [{
        text: this.get_label(cancel_label),
        'class': cancel_class.replace(/close/i, 'cancel'),
        click: close_func
      }];

    if (!action_func)
      buttons[0]['class'] += ' mainaction';
    else
      buttons.unshift({
        text: this.get_label(save_label),
        'class': 'mainaction ' + save_class,
        click: function(e, ui) { if (action_func(e, ref)) close_func(e, ui, this); }
      });

    return this.show_popup_dialog(content, title, buttons, options);
  };

  // show_popup_dialog() wrapper for alert() type dialogs
  this.alert_dialog = function(content, action, options)
  {
    options = $.extend(options || {}, {
        cancel_button: 'ok',
        cancel_class: 'save',
        cancel_func: action,
        noresize: true
      });

    return this.simple_dialog(content, options.title || 'alerttitle', null, options);
  };

  // simple_dialog() wrapper for confirm() type dialogs
  this.confirm_dialog = function(content, button_label, action, options)
  {
    var action_func = function(e, ref) { action(e, ref); return true; };

    options = $.extend(options || {}, {
        button: button_label || 'continue',
        noresize: true
      });

    return this.simple_dialog(content, options.title || 'confirmationtitle', action_func, options);
  };

  // enable/disable buttons for page shifting
  this.set_page_buttons = function()
  {
    this.enable_command('nextpage', 'lastpage', this.env.pagecount > this.env.current_page);
    this.enable_command('previouspage', 'firstpage', this.env.current_page > 1);

    this.update_pagejumper();
  };

  // mark a mailbox as selected and set environment variable
  this.select_folder = function(name, prefix, encode)
  {
    if (this.savedsearchlist) {
      this.savedsearchlist.select('');
    }

    if (this.treelist) {
      this.treelist.select(name);
    }
    else if (this.gui_objects.folderlist) {
      $('li.selected', this.gui_objects.folderlist).removeClass('selected');
      $(this.get_folder_li(name, prefix, encode)).addClass('selected');

      // trigger event hook
      this.triggerEvent('selectfolder', { folder:name, prefix:prefix });
    }
  };

  // adds a class to selected folder
  this.mark_folder = function(name, class_name, prefix, encode)
  {
    $(this.get_folder_li(name, prefix, encode)).addClass(class_name);
    this.triggerEvent('markfolder', {folder: name, mark: class_name, status: true});
  };

  // adds a class to selected folder
  this.unmark_folder = function(name, class_name, prefix, encode)
  {
    $(this.get_folder_li(name, prefix, encode)).removeClass(class_name);
    this.triggerEvent('markfolder', {folder: name, mark: class_name, status: false});
  };

  // helper method to find a folder list item
  this.get_folder_li = function(name, prefix, encode)
  {
    if (!prefix)
      prefix = 'rcmli';

    if (this.gui_objects.folderlist) {
      name = this.html_identifier(name, encode);
      return document.getElementById(prefix+name);
    }
  };

  // for reordering column array (Konqueror workaround)
  // and for setting some message list global variables
  this.set_message_coltypes = function(cols, repl, smart_col)
  {
    // update list mode columns list
    this.env.listcols = cols;

    // reset message list cols
    this.msglist_setup(this.env.layout);

    var list = this.message_list,
      thead = list ? list.thead : null,
      repl, cell, col, c, n, len, tr,
      listcols = this.env.msglist_cols;

    if (!this.env.coltypes)
      this.env.coltypes = {};

    // replace old column headers
    if (thead) {
      if (repl) {
        thead.innerHTML = '';
        tr = document.createElement('tr');

        for (n in listcols) {
          c = listcols[n];
          cell = document.createElement('th');
          cell.innerHTML = repl[c].html || '';
          if (repl[c].id) cell.id = repl[c].id;
          if (repl[c].className) cell.className = repl[c].className;
          tr.appendChild(cell);
        }

        if (list.checkbox_selection)
          list.insert_checkbox(tr, 'thead');

        thead.appendChild(tr);
      }

      for (n = 0, len = listcols.length; n &lt; len; n++) {
        col = listcols[list.checkbox_selection ? n-1 : n];
        if ((cell = thead.rows[0].cells[n]) &amp;&amp; (col == 'from' || col == 'to' || col == 'fromto')) {
          $(cell).attr('rel', col).find('span,a').text(this.get_label(col == 'fromto' ? smart_col : col));
        }
      }
    }

    this.env.subject_col = null;
    this.env.flagged_col = null;
    this.env.status_col = null;

    if (this.env.coltypes.folder)
      this.env.coltypes.folder.hidden = !(this.env.search_request || this.env.search_id) || this.env.search_scope == 'base';

    if ((n = $.inArray('subject', listcols)) >= 0) {
      this.env.subject_col = n;
      if (list)
        list.subject_col = n;
    }
    if ((n = $.inArray('flag', listcols)) >= 0)
      this.env.flagged_col = n;
    if ((n = $.inArray('status', listcols)) >= 0)
      this.env.status_col = n;

    if (list) {
      list.hide_column('folder', (this.env.coltypes.folder &amp;&amp; this.env.coltypes.folder.hidden) || $.inArray('folder', listcols) &lt; 0);
      list.init_header();
    }
  };

  // replace content of row count display
  this.set_rowcount = function(text, mbox)
  {
    // #1487752
    if (mbox &amp;&amp; mbox != this.env.mailbox)
      return false;

    $(this.gui_objects.countdisplay).html(text);

    // update page navigation buttons
    this.set_page_buttons();
  };

  // replace content of mailboxname display
  this.set_mailboxname = function(content)
  {
    if (this.gui_objects.mailboxname &amp;&amp; content)
      this.gui_objects.mailboxname.innerHTML = content;
  };

  // replace content of quota display
  this.set_quota = function(content)
  {
    if (this.gui_objects.quotadisplay &amp;&amp; content &amp;&amp; content.type == 'text')
      $(this.gui_objects.quotadisplay).text((content.percent||0) + '%').attr('title', content.title || '');

    this.triggerEvent('setquota', content);
    this.env.quota_content = content;
  };

  // update trash folder state
  this.set_trash_count = function(count)
  {
    this[(count ? 'un' : '') + 'mark_folder'](this.env.trash_mailbox, 'empty', '', true);
  };

  // update the mailboxlist
  this.set_unread_count = function(mbox, count, set_title, mark)
  {
    if (!this.gui_objects.mailboxlist)
      return false;

    this.env.unread_counts[mbox] = count;
    this.set_unread_count_display(mbox, set_title);

    if (mark)
      this.mark_folder(mbox, mark, '', true);
    else if (!count)
      this.unmark_folder(mbox, 'recent', '', true);

    this.mark_all_read_state();
  };

  // update the mailbox count display
  this.set_unread_count_display = function(mbox, set_title)
  {
    var reg, link, text_obj, item, mycount, childcount, div;

    if (item = this.get_folder_li(mbox, '', true)) {
      mycount = this.env.unread_counts[mbox] ? this.env.unread_counts[mbox] : 0;
      link = $(item).children('a').eq(0);
      text_obj = link.children('span.unreadcount');
      if (!text_obj.length &amp;&amp; mycount)
        text_obj = $('&lt;span>').addClass('unreadcount skip-content').appendTo(link);
      reg = /\s+\([0-9]+\)$/i;

      childcount = 0;
      if ((div = item.getElementsByTagName('div')[0]) &amp;&amp;
          div.className.match(/collapsed/)) {
        // add children's counters
        for (var k in this.env.unread_counts)
          if (k.startsWith(mbox + this.env.delimiter))
            childcount += this.env.unread_counts[k];
      }

      if (mycount &amp;&amp; text_obj.length)
        text_obj.html(this.env.unreadwrap.replace(/%[sd]/, mycount));
      else if (text_obj.length)
        text_obj.remove();

      // set parent's display
      reg = new RegExp(RegExp.escape(this.env.delimiter) + '[^' + RegExp.escape(this.env.delimiter) + ']+$');
      if (mbox.match(reg))
        this.set_unread_count_display(mbox.replace(reg, ''), false);

      // set the right classes
      if ((mycount+childcount)>0)
        $(item).addClass('unread');
      else
        $(item).removeClass('unread');
    }

    // set unread count to window title
    reg = /^\([0-9]+\)\s+/i;
    if (set_title &amp;&amp; document.title) {
      var new_title = '',
        doc_title = String(document.title);

      if (mycount &amp;&amp; doc_title.match(reg))
        new_title = doc_title.replace(reg, '('+mycount+') ');
      else if (mycount)
        new_title = '('+mycount+') '+doc_title;
      else
        new_title = doc_title.replace(reg, '');

      this.set_pagetitle(new_title);
    }
  };

  // display fetched raw headers
  this.set_headers = function(content)
  {
    if (this.gui_objects.all_headers_box &amp;&amp; content)
      $(this.gui_objects.all_headers_box).html(content).show();
  };

  // display all-headers row and fetch raw message headers
  this.show_headers = function(props, elem)
  {
    if (!this.gui_objects.all_headers_row || !this.gui_objects.all_headers_box || !this.env.uid)
      return;

    $(elem).removeClass('show-headers').addClass('hide-headers');
    $(this.gui_objects.all_headers_row).show();
    elem.onclick = function() { ref.command('hide-headers', '', elem); };

    // fetch headers only once
    if (!this.gui_objects.all_headers_box.innerHTML) {
      this.http_request('headers', {_uid: this.env.uid, _mbox: this.env.mailbox},
        this.display_message('', 'loading')
      );
    }
  };

  // hide all-headers row
  this.hide_headers = function(props, elem)
  {
    if (!this.gui_objects.all_headers_row || !this.gui_objects.all_headers_box)
      return;

    $(elem).removeClass('hide-headers').addClass('show-headers');
    $(this.gui_objects.all_headers_row).hide();
    elem.onclick = function() { ref.command('show-headers', '', elem); };
  };

  // create folder selector popup
  this.folder_selector = function(event, callback)
  {
    this.entity_selector('folder-selector', callback, this.env.mailboxes_list, function(obj, a) {
      var n = 0, s = 0,
        delim = ref.env.delimiter,
        folder = ref.env.mailboxes[obj],
        id = folder.id,
        row = $('&lt;li>');

      if (folder.virtual)
        a.addClass('virtual').attr({'aria-disabled': 'true', tabindex: '-1'});
      else
        a.addClass('active').data('id', folder.id);

      if (folder['class'])
        row.addClass(folder['class']);

      // calculate/set indentation level
      while ((s = id.indexOf(delim, s)) >= 0) {
        n++; s++;
      }
      a.css('padding-left', n ? (n * 16) + 'px' : 0);

      // add folder name element
      a.append($('&lt;span>').text(folder.name));

      return row.append(a);
    }, event);
  };

  // create addressbook selector popup
  this.addressbook_selector = function(event, callback)
  {
    // build addressbook + groups list
    var combined_sources = [];

    // check we really need it before processing
    if (!this.entity_selectors['addressbook-selector']) {
      $.each(this.env.address_sources, function() {
        if (!this.readonly) {
          var source = this;
          combined_sources.push(source);

          $.each(ref.env.contactgroups, function() {
            if (source.id === this.source) {
              combined_sources.push(this);
            }
          });
        }
      });
    }

    this.entity_selector('addressbook-selector', callback, combined_sources, function(obj, a) {
      if (obj.type == 'group') {
        a.attr('rel', obj.source + ':' + obj.id)
          .addClass('contactgroup active')
          .data({source: obj.source, gid: obj.id, id: obj.source + ':' + obj.id})
          .css('padding-left', '16px');
      }
      else {
        a.addClass('addressbook active').data('id', obj.id);
      }
      a.append($('&lt;span>').text(obj.name));

      return $('&lt;li>').append(a);
    }, event);
  };

  // create contactgroup selector popup
  this.contactgroup_selector = function(event, callback)
  {
    this.entity_selector('contactgroup-selector', callback, this.env.contactgroups, function(obj, a) {
      if (ref.env.source === obj.source) {
        a.addClass('contactgroup active')
            .data({id: obj.id})
            .append($('&lt;span>').text(obj.name));

        return $('&lt;li>').append(a);
      }
    }, event);
  };

  // create selector popup (eg for folders or address books), position and display it
  this.entity_selector = function(name, click_callback, entity_list, list_callback, event)
  {
    var container = this.entity_selectors[name];

    if (!container) {
      var rows = [],
        container = $('&lt;div>').attr('id', name).addClass('popupmenu'),
        ul = $('&lt;ul>').addClass('toolbarmenu menu'),
        link = document.createElement('a');

      link.href = '#';
      link.className = 'icon';

      // loop over entity list
      $.each(entity_list, function(i) {
        var a = $(link.cloneNode(false)).attr('rel', this.id);
        rows.push(list_callback(this, a, i));
      });

      ul.append(rows).appendTo(container);

      // temporarily show element to calculate its size
      container.css({left: '-1000px', top: '-1000px'})
        .appendTo(document.body).show();

      // set max-height if the list is long
      if (rows.length > 10)
        container.css('max-height', $('li', container)[0].offsetHeight * 10 + 9);

      // register delegate event handler for folder item clicks
      container.on('click', 'a.active', function(e) {
        container.data('callback')($(this).data('id'), this);
      });

      this.entity_selectors[name] = container;
    }

    container.data('callback', click_callback);

    // position menu on the screen
    this.show_menu(name, true, event);
  };

  this.destroy_entity_selector = function(name)
  {
    $("#" + name).remove();
    delete this.entity_selectors[name];
    this.triggerEvent('destroy-entity-selector', { name: name });
  };

  /***********************************************/
  /*********    popup menu functions     *********/
  /***********************************************/

  // Show/hide a specific popup menu
  this.show_menu = function(prop, show, event)
  {
    var name = typeof prop == 'object' ? prop.menu : prop,
      obj = $('#'+name),
      ref = event &amp;&amp; event.target ? $(event.target) : $(obj.attr('rel') || '#'+name+'link'),
      keyboard = rcube_event.is_keyboard(event),
      align = obj.attr('data-align') || '',
      stack = false;

    // find "real" button element
    if (ref.get(0).tagName != 'A' &amp;&amp; ref.closest('a').length)
      ref = ref.closest('a');

    if (typeof prop == 'string')
      prop = { menu:name };

    // let plugins or skins provide the menu element
    if (!obj.length) {
      obj = this.triggerEvent('menu-get', { name:name, props:prop, originalEvent:event });
    }

    if (!obj || !obj.length) {
      // just delegate the action to subscribers
      return this.triggerEvent(show === false ? 'menu-close' : 'menu-open', { name:name, props:prop, originalEvent:event });
    }

    // move element to top for proper absolute positioning
    obj.appendTo(document.body);

    if (typeof show == 'undefined')
      show = obj.is(':visible') ? false : true;

    if (show &amp;&amp; ref.length) {
      var win = $(window),
        pos = ref.offset(),
        above = align.indexOf('bottom') >= 0;

      stack = ref.attr('role') == 'menuitem' || ref.closest('[role=menuitem]').length > 0;

      ref.offsetWidth = ref.outerWidth();
      ref.offsetHeight = ref.outerHeight();
      if (!above &amp;&amp; pos.top + ref.offsetHeight + obj.height() > win.height()) {
        above = true;
      }
      if (align.indexOf('right') >= 0) {
        pos.left = pos.left + ref.outerWidth() - obj.width();
      }
      else if (stack) {
        pos.left = pos.left + ref.offsetWidth - 5;
        pos.top -= ref.offsetHeight;
      }
      if (pos.left + obj.width() > win.width()) {
        pos.left = win.width() - obj.width() - 12;
      }
      pos.top = Math.max(0, pos.top + (above ? -obj.height() : ref.offsetHeight));
      obj.css({ left:pos.left+'px', top:pos.top+'px' });
    }

    // add menu to stack
    if (show) {
      // truncate stack down to the one containing the ref link
      for (var i = this.menu_stack.length - 1; stack &amp;&amp; i >= 0; i--) {
        if (!$(ref).parents('#'+this.menu_stack[i]).length &amp;&amp; $(event.target).parent().attr('role') != 'menuitem')
          this.hide_menu(this.menu_stack[i], event);
      }
      if (stack &amp;&amp; this.menu_stack.length) {
        obj.data('parent', $.last(this.menu_stack));
        obj.css('z-index', ($('#'+$.last(this.menu_stack)).css('z-index') || 0) + 1);
      }
      else if (!stack &amp;&amp; this.menu_stack.length) {
        this.hide_menu(this.menu_stack[0], event);
      }

      obj.show().attr('aria-hidden', 'false').data('opener', ref.attr('aria-expanded', 'true').get(0));
      this.triggerEvent('menu-open', { name:name, obj:obj, props:prop, originalEvent:event });
      this.menu_stack.push(name);

      this.menu_keyboard_active = show &amp;&amp; keyboard;
      if (this.menu_keyboard_active) {
        this.focused_menu = name;
        obj.find('a,input:not(:disabled)').not('[aria-disabled=true]').first().focus();
      }
    }
    else {  // close menu
      this.hide_menu(name, event);
    }

    return show;
  };

  // hide the given popup menu (and its children)
  this.hide_menu = function(name, event)
  {
    if (!this.menu_stack.length) {
      // delegate to subscribers
      this.triggerEvent('menu-close', { name:name, props:{ menu:name }, originalEvent:event });
      return;
    }

    var obj, keyboard = rcube_event.is_keyboard(event);
    for (var j=this.menu_stack.length-1; j >= 0; j--) {
      obj = $('#' + this.menu_stack[j]).hide().attr('aria-hidden', 'true').data('parent', false);
      this.triggerEvent('menu-close', { name:this.menu_stack[j], obj:obj, props:{ menu:this.menu_stack[j] }, originalEvent:event });
      if (this.menu_stack[j] == name) {
        j = -1;  // stop loop
        if (obj.data('opener')) {
          $(obj.data('opener')).attr('aria-expanded', 'false');
          if (keyboard)
            obj.data('opener').focus();
        }
      }
      this.menu_stack.pop();
    }

    // focus previous menu in stack
    if (this.menu_stack.length &amp;&amp; keyboard) {
      this.menu_keyboard_active = true;
      this.focused_menu = $.last(this.menu_stack);
      if (!obj || !obj.data('opener'))
        $('#'+this.focused_menu).find('a,input:not(:disabled)').not('[aria-disabled=true]').first().focus();
    }
    else {
      this.focused_menu = null;
      this.menu_keyboard_active = false;
    }
  };

  // position a menu element on the screen in relation to other object
  this.element_position = function(element, obj)
  {
    var obj = $(obj), win = $(window),
      width = obj.outerWidth(),
      height = obj.outerHeight(),
      menu_pos = obj.data('menu-pos'),
      win_height = win.height(),
      elem_height = $(element).height(),
      elem_width = $(element).width(),
      pos = obj.offset(),
      top = pos.top,
      left = pos.left + width;

    if (menu_pos == 'bottom') {
      top += height;
      left -= width;
    }
    else
      left -= 5;

    if (top + elem_height > win_height) {
      top -= elem_height - height;
      if (top &lt; 0)
        top = Math.max(0, (win_height - elem_height) / 2);
    }

    if (left + elem_width > win.width())
      left -= elem_width + width;

    element.css({left: left + 'px', top: top + 'px'});
  };

  // initialize HTML editor
  this.editor_init = function(config, id)
  {
    this.editor = new rcube_text_editor(config, id);
  };


  /********************************************************/
  /*********  html to text conversion functions   *********/
  /********************************************************/

  this.html2plain = function(html, func)
  {
    return this.format_converter(html, 'html', func);
  };

  this.plain2html = function(plain, func)
  {
    return this.format_converter(plain, 'plain', func);
  };

  this.format_converter = function(text, format, func)
  {
    // warn the user (if converted content is not empty)
    if (!text
      || (format == 'html' &amp;&amp; !(text.replace(/&lt;[^>]+>|&amp;nbsp;|\xC2\xA0|\s/g, '')).length)
      || (format != 'html' &amp;&amp; !(text.replace(/\xC2\xA0|\s/g, '')).length)
    ) {
      // without setTimeout() here, textarea is filled with initial (onload) content
      if (func)
        setTimeout(function() { func(''); }, 50);
      return true;
    }

    var confirmed = this.env.editor_warned || confirm(this.get_label('editorwarning'));

    this.env.editor_warned = true;

    if (!confirmed)
      return false;

    var url = '?_task=utils&amp;_action=' + (format == 'html' ? 'html2text' : 'text2html'),
      lock = this.set_busy(true, 'converting');

    $.ajax({ type: 'POST', url: url, data: text, contentType: 'application/octet-stream',
      error: function(o, status, err) { ref.http_error(o, status, err, lock); },
      success: function(data) {
        ref.set_busy(false, null, lock);
        if (func) func(data);
      }
    });

    return true;
  };


  /********************************************************/
  /*********        remote request methods        *********/
  /********************************************************/

  // compose a valid url with the given parameters
  this.url = function(action, query)
  {
    var querystring = typeof query === 'string' ? query : '';

    if (typeof action !== 'string')
      query = action;
    else if (!query || typeof query !== 'object')
      query = {};

    if (action)
      query._action = action;
    else if (this.env.action)
      query._action = this.env.action;

    var url = this.env.comm_path, k, param = {};

    // overwrite task name
    if (action &amp;&amp; action.match(/([a-z0-9_-]+)\/([a-z0-9-_.]+)/)) {
      query._action = RegExp.$2;
      url = url.replace(/\_task=[a-z0-9_-]+/, '_task=' + RegExp.$1);
    }

    // force _framed=0
    if (query._framed === 0) {
      url = url.replace('&amp;_framed=1', '');
      query._framed = null;
    }

    // remove undefined values
    for (k in query) {
      if (query[k] !== undefined &amp;&amp; query[k] !== null)
        param[k] = query[k];
    }

    if (param = $.param(param))
      url += (url.indexOf('?') > -1 ? '&amp;' : '?') + param;

    if (querystring)
      url += (url.indexOf('?') > -1 ? '&amp;' : '?') + querystring;

    return url;
  };

  this.redirect = function(url, lock)
  {
    if (lock !== false)
      this.set_busy(true, 'loading');

    if (this.is_framed()) {
      url = url.replace(/&amp;_framed=1/, '');
      parent.rcmail.redirect(url, lock);
    }
    else {
      if (this.env.extwin) {
        if (typeof url == 'string')
          url += (url.indexOf('?') &lt; 0 ? '?' : '&amp;') + '_extwin=1';
        else
          url._extwin = 1;
      }
      this.location_href(url, window);
    }
  };

  this.goto_url = function(action, query, lock, secure)
  {
    var url = this.url(action, query)
    if (secure) url = this.secure_url(url);
    this.redirect(url, lock);
  };

  this.location_href = function(url, target, frame)
  {
    if (frame)
      this.lock_frame(target);

    if (typeof url == 'object')
      url = this.env.comm_path + '&amp;' + $.param(url);

    // simulate real link click to force IE to send referer header
    if (bw.ie &amp;&amp; target == window)
      $('&lt;a>').attr('href', url).appendTo(document.body).get(0).click();
    else
      target.location.href = url;

    // reset keep-alive interval
    this.start_keepalive();
  };

  // update browser location to remember current view
  this.update_state = function(query)
  {
    if (window.history.replaceState)
      try {
        // This may throw security exception in Firefox (#5400)
        window.history.replaceState({}, document.title, rcmail.url('', query));
      }
      catch(e) { /* ignore */ };
  };

  // send a http request to the server
  this.http_request = function(action, data, lock, type)
  {
    if (type != 'POST')
      type = 'GET';

    if (typeof data !== 'object')
      data = rcube_parse_query(data);

    data._remote = 1;
    data._unlock = lock ? lock : 0;

    // trigger plugin hook
    var result = this.triggerEvent('request' + action, data);

    // abort if one of the handlers returned false
    if (result === false) {
      if (data._unlock)
        this.set_busy(false, null, data._unlock);
      return false;
    }
    else if (result &amp;&amp; result.getResponseHeader) {
      return result;
    }
    else if (result !== undefined) {
      data = result;
      if (data._action) {
        action = data._action;
        delete data._action;
      }
    }

    var url = this.url(action);

    // reset keep-alive interval
    this.start_keepalive();

    // send request
    return $.ajax({
      type: type, url: url, data: data, dataType: 'json',
      success: function(data) { ref.http_response(data); },
      error: function(o, status, err) { ref.http_error(o, status, err, lock, action); }
    });
  };

  // send a http GET request to the server
  this.http_get = this.http_request;

  // send a http POST request to the server
  this.http_post = function(action, data, lock)
  {
    return this.http_request(action, data, lock, 'POST');
  };

  // aborts ajax request
  this.abort_request = function(r)
  {
    if (r.request)
      r.request.abort();
    if (r.lock)
      this.set_busy(false, null, r.lock);
  };

  // handle HTTP response
  this.http_response = function(response)
  {
    if (!response)
      return;

    if (response.unlock)
      this.set_busy(false, null, response.unlock);

    this.triggerEvent('responsebefore', {response: response});
    this.triggerEvent('responsebefore'+response.action, {response: response});

    // set env vars
    if (response.env)
      this.set_env(response.env);

    var i;

    // we have labels to add
    if (typeof response.texts === 'object') {
      for (i in response.texts)
        if (typeof response.texts[i] === 'string')
          this.add_label(i, response.texts[i]);
    }

    // if we get javascript code from server -> execute it
    if (response.exec) {
      eval(response.exec);
    }

    // execute callback functions of plugins
    if (response.callbacks &amp;&amp; response.callbacks.length) {
      for (i=0; i &lt; response.callbacks.length; i++)
        this.triggerEvent(response.callbacks[i][0], response.callbacks[i][1]);
    }

    // process the response data according to the sent action
    switch (response.action) {
      case 'mark':
        // Mark the message as Seen also in the opener/parent
        if ((this.env.action == 'show' || this.env.action == 'preview') &amp;&amp; this.env.last_flag == 'SEEN')
          this.set_unread_message(this.env.uid, this.env.mailbox);
        break;

      case 'delete':
        if (this.task == 'addressbook') {
          var sid, uid = this.contact_list.get_selection(), writable = false;

          if (uid &amp;&amp; this.contact_list.rows[uid]) {
            // search results, get source ID from record ID
            if (this.env.source == '') {
              sid = String(uid).replace(/^[^-]+-/, '');
              writable = sid &amp;&amp; this.env.address_sources[sid] &amp;&amp; !this.env.address_sources[sid].readonly;
            }
            else {
              writable = !this.env.address_sources[this.env.source].readonly;
            }
          }
          this.enable_command('delete', 'edit', writable);
          this.enable_command('export', (this.contact_list &amp;&amp; this.contact_list.rowcount > 0));
          this.enable_command('export-selected', 'print', false);
        }

      case 'move':
        if (this.env.action == 'show') {
          // re-enable commands on move/delete error
          this.enable_command(this.env.message_commands, true);
          if (!this.env.list_post)
            this.enable_command('reply-list', false);
        }
        else if (this.task == 'addressbook') {
          this.triggerEvent('listupdate', { list:this.contact_list, folder:this.env.source, rowcount:this.contact_list.rowcount });
        }

      case 'purge':
      case 'expunge':
        if (this.task == 'mail') {
          if (!this.env.exists) {
            // clear preview pane content
            if (this.env.contentframe)
              this.show_contentframe(false);
            // disable commands useless when mailbox is empty
            this.enable_command(this.env.message_commands, 'purge', 'expunge',
              'select-all', 'select-none', 'expand-all', 'expand-unread', 'collapse-all', false);
          }
          if (this.message_list)
            this.triggerEvent('listupdate', { list:this.message_list, folder:this.env.mailbox, rowcount:this.message_list.rowcount });
        }
        break;

      case 'refresh':
      case 'check-recent':
        // update message flags
        $.each(this.env.recent_flags || {}, function(uid, flags) {
          ref.set_message(uid, 'deleted', flags.deleted);
          ref.set_message(uid, 'replied', flags.answered);
          ref.set_message(uid, 'unread', !flags.seen);
          ref.set_message(uid, 'forwarded', flags.forwarded);
          ref.set_message(uid, 'flagged', flags.flagged);
        });
        delete this.env.recent_flags;

      case 'getunread':
      case 'search':
        this.env.qsearch = null;
      case 'list':
        if (this.task == 'mail') {
          var is_multifolder = this.is_multifolder_listing(),
            list = this.message_list,
            uid = this.env.list_uid;

          this.enable_command('show', 'select-all', 'select-none', this.env.messagecount > 0);
          this.enable_command('expunge', 'purge', this.env.exists &amp;&amp; !is_multifolder);
          this.enable_command('import-messages', !is_multifolder);
          this.enable_command('expand-all', 'expand-unread', 'collapse-all', this.env.threading &amp;&amp; this.env.messagecount &amp;&amp; !is_multifolder);

          if (list) {
            if (response.action == 'list' || response.action == 'search') {
              // highlight message row when we're back from message page
              if (uid) {
                if (uid === 'FIRST') {
                  uid = list.get_first_row();
                }
                else if (uid === 'LAST') {
                  uid = list.get_last_row();
                }
                else if (!list.rows[uid]) {
                  uid += '-' + this.env.mailbox;
                }

                if (uid &amp;&amp; list.rows[uid]) {
                  list.select(uid);
                }

                delete this.env.list_uid;
              }

              this.enable_command('set-listmode', this.env.threads &amp;&amp; !is_multifolder);
              if (list.rowcount > 0 &amp;&amp; !$(document.activeElement).is('input,textarea'))
                list.focus();

              // trigger 'select' so all dependent actions update its state
              // e.g. plugins use this event to activate buttons (#1490647)
              list.triggerEvent('select');
            }

            if (response.action != 'getunread')
              this.triggerEvent('listupdate', { list:list, folder:this.env.mailbox, rowcount:list.rowcount });
          }
        }
        else if (this.task == 'addressbook') {
          var list = this.contact_list,
            uid = this.env.list_uid;

          this.enable_command('export', 'select-all', 'select-none', (list &amp;&amp; list.rowcount > 0));

          if (response.action == 'list' || response.action == 'search') {
            // PAMELA - Search contacts by source
            this.enable_command('search-create', response.action == 'search');
            this.enable_command('search-delete', this.env.search_id);
            this.update_group_commands();

            if (list &amp;&amp; uid) {
              if (uid === 'FIRST') {
                uid = list.get_first_row();
              }
              else if (uid === 'LAST') {
                uid = list.get_last_row();
              }

              if (uid &amp;&amp; list.rows[uid]) {
                list.select(uid);
              }

              delete this.env.list_uid;

              // trigger 'select' so all dependent actions update its state
              list.triggerEvent('select');
            }

            if (list.rowcount > 0 &amp;&amp; !$(document.activeElement).is('input,textarea'))
              list.focus();

            this.triggerEvent('listupdate', { list:list, folder:this.env.source, rowcount:list.rowcount });
          }
        }
        break;

      case 'list-contacts':
      case 'search-contacts':
        if (this.contact_list) {
          if (this.contact_list.rowcount > 0)
            this.contact_list.focus();
          this.triggerEvent('listupdate', { list:this.contact_list, rowcount:this.contact_list.rowcount });
        }
        break;
    }

    if (response.unlock)
      this.hide_message(response.unlock);

    this.triggerEvent('responseafter', {response: response});
    this.triggerEvent('responseafter'+response.action, {response: response});

    // reset keep-alive interval
    this.start_keepalive();
  };

  // handle HTTP request errors
  this.http_error = function(request, status, err, lock, action)
  {
    var errmsg = request.statusText;

    this.set_busy(false, null, lock);
    request.abort();

    // don't display error message on page unload (#1488547)
    if (this.unload)
      return;

    if (request.status &amp;&amp; errmsg)
      this.display_message(this.get_label('servererror') + ' (' + errmsg + ')', 'error');
    else if (status == 'timeout')
      this.display_message('requesttimedout', 'error');
    else if (request.status == 0 &amp;&amp; status != 'abort')
      this.display_message('connerror', 'error');

    // redirect to url specified in location header if not empty
    var location_url = request.getResponseHeader("Location");
    if (location_url &amp;&amp; this.env.action != 'compose')  // don't redirect on compose screen, contents might get lost (#1488926)
      this.redirect(location_url);

    // 403 Forbidden response (CSRF prevention) - reload the page.
    // In case there's a new valid session it will be used, otherwise
    // login form will be presented (#1488960).
    if (request.status == 403) {
      (this.is_framed() ? parent : window).location.reload();
      return;
    }

    // re-send keep-alive requests after 30 seconds
    if (action == 'keep-alive')
      setTimeout(function() { ref.keep_alive(); ref.start_keepalive(); }, 30000);
  };

  // handler for session errors detected on the server
  this.session_error = function(redirect_url)
  {
    this.env.server_error = 401;

    // save message in local storage and do not redirect
    if (this.env.action == 'compose') {
      this.save_compose_form_local();
      this.compose_skip_unsavedcheck = true;
      // stop keep-alive and refresh processes
      this.env.session_lifetime = 0;
      if (this._keepalive)
        clearInterval(this._keepalive);
      if (this._refresh)
        clearInterval(this._refresh);
    }
    else if (redirect_url) {
      setTimeout(function() { ref.redirect(redirect_url, true); }, 2000);
    }
  };

  // callback when an iframe finished loading
  this.iframe_loaded = function(unlock)
  {
    if (!unlock)
      unlock = this.env.frame_lock;

    this.set_busy(false, null, unlock);

    if (this.submit_timer)
      clearTimeout(this.submit_timer);
  };

  /**
   Send multi-threaded parallel HTTP requests to the server for a list if items.
   The string '%' in either a GET query or POST parameters will be replaced with the respective item value.
   This is the argument object expected: {
       items: ['foo','bar','gna'],      // list of items to send requests for
       action: 'task/some-action',      // Roundcube action to call
       query: { q:'%s' },               // GET query parameters
       postdata: { source:'%s' },       // POST data (sends a POST request if present)
       threads: 3,                      // max. number of concurrent requests
       onresponse: function(data){ },   // Callback function called for every response received from server
       whendone: function(alldata){ }   // Callback function called when all requests have been sent
   }
  */
  this.multi_thread_http_request = function(prop)
  {
    var i, item, reqid = new Date().getTime(),
      threads = prop.threads || 1;

    prop.reqid = reqid;
    prop.running = 0;
    prop.requests = [];
    prop.result = [];
    prop._items = $.extend([], prop.items);  // copy items

    if (!prop.lock)
      prop.lock = this.display_message('', 'loading');

    // add the request arguments to the jobs pool
    this.http_request_jobs[reqid] = prop;

    // start n threads
    for (i=0; i &lt; threads; i++) {
      item = prop._items.shift();
      if (item === undefined)
        break;

      prop.running++;
      prop.requests.push(this.multi_thread_send_request(prop, item));
    }

    return reqid;
  };

  // helper method to send an HTTP request with the given iterator value
  this.multi_thread_send_request = function(prop, item)
  {
    var k, postdata, query;

    // replace %s in post data
    if (prop.postdata) {
      postdata = {};
      for (k in prop.postdata) {
        postdata[k] = String(prop.postdata[k]).replace('%s', item);
      }
      postdata._reqid = prop.reqid;
    }
    // replace %s in query
    else if (typeof prop.query == 'string') {
      query = prop.query.replace('%s', item);
      query += '&amp;_reqid=' + prop.reqid;
    }
    else if (typeof prop.query == 'object' &amp;&amp; prop.query) {
      query = {};
      for (k in prop.query) {
        query[k] = String(prop.query[k]).replace('%s', item);
      }
      query._reqid = prop.reqid;
    }

    // send HTTP GET or POST request
    return postdata ? this.http_post(prop.action, postdata) : this.http_request(prop.action, query);
  };

  // callback function for multi-threaded http responses
  this.multi_thread_http_response = function(data, reqid)
  {
    var prop = this.http_request_jobs[reqid];
    if (!prop || prop.running &lt;= 0 || prop.cancelled)
      return;

    prop.running--;

    // trigger response callback
    if (prop.onresponse &amp;&amp; typeof prop.onresponse == 'function') {
      prop.onresponse(data);
    }

    prop.result = $.extend(prop.result, data);

    // send next request if prop.items is not yet empty
    var item = prop._items.shift();
    if (item !== undefined) {
      prop.running++;
      prop.requests.push(this.multi_thread_send_request(prop, item));
    }
    // trigger whendone callback and mark this request as done
    else if (prop.running == 0) {
      if (prop.whendone &amp;&amp; typeof prop.whendone == 'function') {
        prop.whendone(prop.result);
      }

      this.set_busy(false, '', prop.lock);

      // remove from this.http_request_jobs pool
      delete this.http_request_jobs[reqid];
    }
  };

  // abort a running multi-thread request with the given identifier
  this.multi_thread_request_abort = function(reqid)
  {
    var prop = this.http_request_jobs[reqid];
    if (prop) {
      for (var i=0; prop.running > 0 &amp;&amp; i &lt; prop.requests.length; i++) {
        if (prop.requests[i].abort)
          prop.requests[i].abort();
      }

      prop.running = 0;
      prop.cancelled = true;
      this.set_busy(false, '', prop.lock);
    }
  };

  // post the given form to a hidden iframe
  this.async_upload_form = function(form, action, onload)
  {
    // create hidden iframe
    var ts = new Date().getTime(),
      frame_name = 'rcmupload' + ts,
      frame = this.dummy_iframe(frame_name);

    // handle upload errors by parsing iframe content in onload
    frame.on('load', {ts:ts}, onload);

    $(form).attr({
        target: frame_name,
        action: this.url(action, {_id: this.env.compose_id || '', _uploadid: ts, _from: this.env.action}),
        method: 'POST',
        enctype: 'multipart/form-data'
      })
      .submit();

    return frame_name;
  };

  // create hidden iframe element
  this.dummy_iframe = function(name, src)
  {
    return $('&lt;iframe>').attr({
        name: name,
        src: src,
        style: 'width:0;height:0;visibility:hidden',
        'aria-hidden': 'true'
      })
      .appendTo(document.body);
  };

  // html5 file-drop API
  this.document_drag_hover = function(e, over)
  {
    // don't e.preventDefault() here to not block text dragging on the page (#1490619)
    $(this.gui_objects.filedrop)[(over?'addClass':'removeClass')]('active');
  };

  this.file_drag_hover = function(e, over)
  {
    e.preventDefault();
    e.stopPropagation();
    $(this.gui_objects.filedrop)[(over?'addClass':'removeClass')]('hover');
  };

  // handler when files are dropped to a designated area.
  // compose a multipart form data and submit it to the server
  this.file_dropped = function(e)
  {
    // abort event and reset UI
    this.file_drag_hover(e, false);

    // prepare multipart form data composition
    var uri,
      files = e.target.files || e.dataTransfer.files,
      args = {_id: this.env.compose_id || this.env.cid || '', _remote: 1, _from: this.env.action};

    if (!files || !files.length) {
      // Roundcube attachment, pass its uri to the backend and attach
      if (uri = e.dataTransfer.getData('roundcube-uri')) {
        var ts = 'upload' + new Date().getTime(),
          // jQuery way to escape filename (#1490530)
          content = $('&lt;span>').text(e.dataTransfer.getData('roundcube-name') || this.get_label('attaching')).html();

        args._uri = uri;
        args._uploadid = ts;

        // add to attachments list
        if (!this.add2attachment_list(ts, {name: '', html: content, classname: 'uploading', complete: false}))
          this.file_upload_id = this.set_busy(true, 'attaching');

        this.http_post(this.env.filedrop.action || 'upload', args);
      }

      return;
    }

    this.file_upload(files, args, {
      name: (this.env.filedrop.fieldname || '_file') + (this.env.filedrop.single ? '' : '[]'),
      single: this.env.filedrop.single,
      filter: this.env.filedrop.filter,
      action: ref.env.filedrop.action
    });
  };

  // Files upload using ajax
  this.file_upload = function(files, post_args, props)
  {
    if (!window.FormData || !files || !files.length)
      return false;

    var f, i, fname, size = 0, numfiles = 0,
      formdata = new FormData(),
      fieldname = props.name || '_file[]',
      limit = props.single ? 1 : files.length;
      args = $.extend({_remote: 1, _from: this.env.action}, post_args || {});

    // add files to form data
    for (i=0; numfiles &lt; limit &amp;&amp; (f = files[i]); i++) {
      // filter by file type if requested
      if (props.filter &amp;&amp; !f.type.match(new RegExp(props.filter))) {
        // TODO: show message to user
        continue;
      }

      formdata.append(fieldname, f);
      size += f.size;
      fname = f.name;
      numfiles++;
    }

    if (numfiles) {
      if (this.env.max_filesize &amp;&amp; this.env.filesizeerror &amp;&amp; size > this.env.max_filesize) {
        this.display_message(this.env.filesizeerror, 'error');
        return false;
      }

      if (this.env.max_filecount &amp;&amp; this.env.filecounterror &amp;&amp; numfiles > this.env.max_filecount) {
        this.display_message(this.env.filecounterror, 'error');
        return false;
      }

      var ts = 'upload' + new Date().getTime(),
        label = numfiles > 1 ? this.get_label('uploadingmany') : fname,
        // jQuery way to escape filename (#1490530)
        content = $('&lt;span>').text(label).html();

      // add to attachments list
      if (!this.add2attachment_list(ts, {name: '', html: content, classname: 'uploading', complete: false}) &amp;&amp; !props.lock)
        props.lock = this.file_upload_id = this.set_busy(true, 'uploading');

      args._uploadid = ts;
      args._unlock = props.lock;

      this.uploads[ts] = $.ajax({
        type: 'POST',
        dataType: 'json',
        url: this.url(props.action || 'upload', args),
        contentType: false,
        processData: false,
        timeout: this.uploadTimeout, // ajax call timeout for loading attachment
        data: formdata,
        headers: {'X-Roundcube-Request': this.env.request_token},
        xhr: function() {
          var xhr = $.ajaxSettings.xhr();
          if (xhr.upload &amp;&amp; ref.labels.uploadprogress) {
            xhr.upload.onprogress = function(e) {
              var msg = ref.file_upload_msg(e.loaded, e.total);
              if (msg) {
                $('#' + ts).find('.uploading').text(msg);
              }
            };
          }
          return xhr;
        },
        success: function(data) {
          delete ref.uploads[ts];
          ref.http_response(data);
        },
        error: function(o, status, err) {
          delete ref.uploads[ts];
          ref.remove_from_attachment_list(ts);
          ref.http_error(o, status, err, props.lock, 'attachment');
        }
      });
    }

    return true;
  };

  this.file_upload_msg = function(current, total)
  {
    if (total &amp;&amp; current &lt; total) {
      var percent = Math.round(current/total * 100),
        label = ref.get_label('uploadprogress');

      if (total >= 1073741824) {
        total = parseFloat(total/1073741824).toFixed(1) + ' ' . this.get_label('GB');
        current = parseFloat(current/1073741824).toFixed(1);
      }
      else if (total >= 1048576) {
        total = parseFloat(total/1048576).toFixed(1) + ' ' + this.get_label('MB');
        current = parseFloat(current/1048576).toFixed(1);
      }
      else if (total >= 1024) {
        total = parseInt(total/1024) + ' ' + this.get_label('KB');
        current = parseInt(current/1024);
      }
      else {
        total = total + ' ' + this.get_label('B');
      }

      return label.replace('$percent', percent + '%').replace('$current', current).replace('$total', total);
    }
  };

  // starts interval for keep-alive signal
  this.start_keepalive = function()
  {
    if (!this.env.session_lifetime || this.env.framed || this.env.extwin || this.task == 'login' || this.env.action == 'print')
      return;

    if (this._keepalive)
      clearInterval(this._keepalive);

    // use Math to prevent from an integer overflow (#5273)
    // maximum interval is 15 minutes, minimum is 30 seconds
    var interval = Math.min(1800, this.env.session_lifetime) * 0.5 * 1000;
    this._keepalive = setInterval(function() { ref.keep_alive(); }, interval &lt; 30000 ? 30000 : interval);
  };

  // starts interval for refresh signal
  this.start_refresh = function()
  {
    if (!this.env.refresh_interval || this.env.framed || this.env.extwin || this.task == 'login' || this.env.action == 'print')
      return;

    if (this._refresh)
      clearInterval(this._refresh);

    this._refresh = setInterval(function(){ ref.refresh(); }, this.env.refresh_interval * 1000);
  };

  // sends keep-alive signal
  this.keep_alive = function()
  {
    if (!this.busy)
      this.http_request('keep-alive');
  };

  // sends refresh signal
  this.refresh = function()
  {
    if (this.busy) {
      // try again after 10 seconds
      setTimeout(function() { ref.refresh(); ref.start_refresh(); }, 10000);
      return;
    }

    var params = {}, lock = this.set_busy(true, 'refreshing');

    if (this.task == 'mail' &amp;&amp; this.gui_objects.mailboxlist)
      params = this.check_recent_params();

    params._last = Math.floor(this.env.lastrefresh.getTime() / 1000);
    this.env.lastrefresh = new Date();

    // plugins should bind to 'requestrefresh' event to add own params
    this.http_post('refresh', params, lock);
  };

  // returns check-recent request parameters
  this.check_recent_params = function()
  {
    var params = {_mbox: this.env.mailbox};

    if (this.gui_objects.mailboxlist)
      params._folderlist = 1;
    if (this.gui_objects.quotadisplay)
      params._quota = 1;
    if (this.env.search_request)
      params._search = this.env.search_request;

    if (this.gui_objects.messagelist) {
      params._list = 1;

      // message uids for flag updates check
      params._uids = $.map(this.message_list.rows, function(row, uid) { return uid; }).join(',');
    }

    return params;
  };


  /********************************************************/
  /*********            helper methods            *********/
  /********************************************************/

  /**
   * Quote html entities
   */
  this.quote_html = function(str)
  {
    return String(str).replace(/&lt;/g, '&amp;lt;').replace(/>/g, '&amp;gt;').replace(/"/g, '&amp;quot;');
  };

  // get window.opener.rcmail if available
  this.opener = function(deep, filter)
  {
    var i, win = window.opener;

    // catch Error: Permission denied to access property rcmail
    try {
      if (win &amp;&amp; !win.closed &amp;&amp; win !== window) {
        // try parent of the opener window, e.g. preview frame
        if (deep &amp;&amp; (!win.rcmail || win.rcmail.env.framed) &amp;&amp; win.parent &amp;&amp; win.parent.rcmail)
          win = win.parent;

        if (win.rcmail &amp;&amp; filter)
          for (i in filter)
            if (win.rcmail.env[i] != filter[i])
              return;

        return win.rcmail;
      }
    }
    catch (e) {}
  };

  // check if we're in show mode or if we have a unique selection
  // and return the message uid
  this.get_single_uid = function()
  {
    var uid = this.env.uid || (this.message_list ? this.message_list.get_single_selection() : null);
    var result = ref.triggerEvent('get_single_uid', { uid: uid });
    return result || uid;
  };

  // same as above but for contacts
  this.get_single_cid = function()
  {
    var cid = this.env.cid || (this.contact_list ? this.contact_list.get_single_selection() : null);
    var result = ref.triggerEvent('get_single_cid', { cid: cid });
    return result || cid;
  };

  // get the IMP mailbox of the message with the given UID
  this.get_message_mailbox = function(uid)
  {
    var msg;

    if (this.env.messages &amp;&amp; uid &amp;&amp; (msg = this.env.messages[uid]) &amp;&amp; msg.mbox)
      return msg.mbox;

    if (/^[0-9]+-(.*)$/.test(uid))
      return RegExp.$1;

    return this.env.mailbox;
  };

  // build request parameters from single message id (maybe with mailbox name)
  this.params_from_uid = function(uid, params)
  {
    if (!params)
      params = {};

    params._uid = String(uid).split('-')[0];
    params._mbox = this.get_message_mailbox(uid);

    return params;
  };

  // gets cursor position
  this.get_caret_pos = function(obj)
  {
    if (obj.selectionEnd !== undefined)
      return obj.selectionEnd;

    return obj.value.length;
  };

  // moves cursor to specified position
  this.set_caret_pos = function(obj, pos)
  {
    try {
      if (obj.setSelectionRange)
        obj.setSelectionRange(pos, pos);
    }
    catch(e) {} // catch Firefox exception if obj is hidden
  };

  // get selected text from an input field
  this.get_input_selection = function(obj)
  {
    var start = 0, end = 0, normalizedValue = '';

    if (typeof obj.selectionStart == "number" &amp;&amp; typeof obj.selectionEnd == "number") {
      normalizedValue = obj.value;
      start = obj.selectionStart;
      end = obj.selectionEnd;
    }

    return {start: start, end: end, text: normalizedValue.substr(start, end-start)};
  };

  // disable/enable all fields of a form
  this.lock_form = function(form, lock)
  {
    if (!form || !form.elements)
      return;

    if (lock)
      this.disabled_form_elements = [];

    $.each(form.elements, function() {
      if (this.type == 'hidden')
        return;
      // remember which elem was disabled before lock
      if (lock &amp;&amp; this.disabled)
        ref.disabled_form_elements.push(this);
      else if (lock || $.inArray(this, ref.disabled_form_elements) &lt; 0)
        this.disabled = lock;
    });
  };

  this.mailto_handler_uri = function()
  {
    return location.href.split('?')[0] + '?_task=mail&amp;_action=compose&amp;_to=%s';
  };

  this.register_protocol_handler = function(name)
  {
    try {
      window.navigator.registerProtocolHandler('mailto', this.mailto_handler_uri(), name);
    }
    catch(e) {
      this.display_message(String(e), 'error');
    }
  };

  this.check_protocol_handler = function(name, elem)
  {
    var nav = window.navigator;

    if (!nav || (typeof nav.registerProtocolHandler != 'function')) {
      $(elem).addClass('disabled').click(function() {
        ref.display_message('nosupporterror', 'error');
        return false;
      });
    }
    else if (typeof nav.isProtocolHandlerRegistered == 'function') {
      var status = nav.isProtocolHandlerRegistered('mailto', this.mailto_handler_uri());
      if (status)
        $(elem).parent().find('.mailtoprotohandler-status').html(status);
    }
    else {
      $(elem).click(function() { ref.register_protocol_handler(name); return false; });
    }
  };

  // Checks browser capabilities e.g. PDF support, TIF support
  this.browser_capabilities_check = function()
  {
    if (!this.env.browser_capabilities)
      this.env.browser_capabilities = {};

    $.each(['pdf', 'flash', 'tiff', 'webp', 'pgpmime'], function() {
      if (ref.env.browser_capabilities[this] === undefined)
        ref.env.browser_capabilities[this] = ref[this + '_support_check']();
    });
  };

  // Returns browser capabilities string
  this.browser_capabilities = function()
  {
    if (!this.env.browser_capabilities)
      return '';

    var n, ret = [];

    for (n in this.env.browser_capabilities)
      ret.push(n + '=' + this.env.browser_capabilities[n]);

    return ret.join();
  };

  this.tiff_support_check = function()
  {
    this.image_support_check('tiff');
    return 0;
  };

  this.webp_support_check = function()
  {
    this.image_support_check('webp');
    return 0;
  };

  this.image_support_check = function(type)
  {
    setTimeout(function() {
      var img = new Image();
      img.onload = function() { ref.env.browser_capabilities[type] = 1; };
      img.onerror = function() { ref.env.browser_capabilities[type] = 0; };
      img.src = ref.assets_path('program/resources/blank.' + type);
    }, 10);
  };

  this.pdf_support_check = function()
  {
    var i, plugin = navigator.mimeTypes ? navigator.mimeTypes["application/pdf"] : {},
      plugins = navigator.plugins,
      len = plugins.length,
      regex = /Adobe Reader|PDF|Acrobat/i;

    if (plugin &amp;&amp; plugin.enabledPlugin)
        return 1;

    if ('ActiveXObject' in window) {
      try {
        if (plugin = new ActiveXObject("AcroPDF.PDF"))
          return 1;
      }
      catch (e) {}
      try {
        if (plugin = new ActiveXObject("PDF.PdfCtrl"))
          return 1;
      }
      catch (e) {}
    }

    for (i=0; i&lt;len; i++) {
      plugin = plugins[i];
      if (typeof plugin === 'string') {
        if (regex.test(plugin))
          return 1;
      }
      else if (plugin.name &amp;&amp; regex.test(plugin.name))
        return 1;
    }

    setTimeout(function() {
      $('&lt;object>').attr({
          data: ref.assets_path('program/resources/dummy.pdf'),
          type: 'application/pdf',
          style: 'position: "absolute"; top: -1000px; height: 1px; width: 1px'
        })
        .on('load error', function(e) {
          ref.env.browser_capabilities.pdf = e.type == 'load' ? 1 : 0;

          // add a short delay before attempting to remove element (#8128)
          var obj = this;
          setTimeout(function() { $(obj).remove(); }, 10);
        })
        .appendTo(document.body);
      }, 10);

    return 0;
  };

  this.flash_support_check = function()
  {
    var plugin = navigator.mimeTypes ? navigator.mimeTypes["application/x-shockwave-flash"] : {};

    if (plugin &amp;&amp; plugin.enabledPlugin)
        return 1;

    if ('ActiveXObject' in window) {
      try {
        if (plugin = new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))
          return 1;
      }
      catch (e) {}
    }

    return 0;
  };

  // check for mailvelope API
  this.pgpmime_support_check = function(action)
  {
    if (window.mailvelope)
      return 1;

    $(window).on('mailvelope', function() {
      ref.env.browser_capabilities['pgpmime'] = 1;
    });

    return 0;
  };

  this.assets_path = function(path)
  {
    if (this.env.assets_path &amp;&amp; !path.startsWith(this.env.assets_path)) {
      path = this.env.assets_path + path;
    }

    return path;
  };

  // Cookie setter
  this.set_cookie = function(name, value, expires)
  {
    if (expires === false) {
      var expires = new Date();
      expires.setYear(expires.getFullYear() + 1);
    }

    setCookie(name, value, expires, this.env.cookie_path, this.env.cookie_domain, this.env.cookie_secure);
  };

  this.get_local_storage_prefix = function()
  {
    if (!this.local_storage_prefix)
      this.local_storage_prefix = 'roundcube.' + (this.env.user_id || 'anonymous') + '.';

    return this.local_storage_prefix;
  };

  // wrapper for localStorage.getItem(key)
  this.local_storage_get_item = function(key, deflt, encrypted)
  {
    var item, result;

    // TODO: add encryption
    try {
      item = localStorage.getItem(this.get_local_storage_prefix() + key);
      result = JSON.parse(item);
    }
    catch (e) { }

    return result || deflt || null;
  };

  // wrapper for localStorage.setItem(key, data)
  this.local_storage_set_item = function(key, data, encrypted)
  {
    // try/catch to handle no localStorage support, but also error
    // in Safari-in-private-browsing-mode where localStorage exists
    // but can't be used (#1489996)
    try {
      // TODO: add encryption
      localStorage.setItem(this.get_local_storage_prefix() + key, JSON.stringify(data));
      return true;
    }
    catch (e) {
      return false;
    }
  };

  // wrapper for localStorage.removeItem(key)
  this.local_storage_remove_item = function(key)
  {
    try {
      localStorage.removeItem(this.get_local_storage_prefix() + key);
      return true;
    }
    catch (e) {
      return false;
    }
  };

  this.print_dialog = function()
  {
    // setTimeout for Safari
    setTimeout('window.print()', 10);
  };
}  // end object rcube_webmail


// some static methods
rcube_webmail.long_subject_title = function(elem, indent, text_elem)
{
  if (!elem.title) {
    var $elem = $(text_elem || elem);
    if ($elem.width() + (indent || 0) * 15 > $elem.parent().width())
      elem.title = rcube_webmail.subject_text($elem[0]);
  }
};

rcube_webmail.long_subject_title_ex = function(elem)
{
  if (!elem.title) {
    var $elem = $(elem),
      txt = $elem.text().trim(),
      indent = $('span.branch', $elem).width() || 0,
      tmp = $('&lt;span>').text(txt)
        .css({position: 'absolute', 'float': 'left', visibility: 'hidden',
          'font-size': $elem.css('font-size'), 'font-weight': $elem.css('font-weight')})
        .appendTo(document.body),
      w = tmp.width();

    tmp.remove();
    if (w + indent * 15 > $elem.width())
      elem.title = rcube_webmail.subject_text(elem);
  }
};

rcube_webmail.subject_text = function(elem)
{
  var t = $(elem).clone();
  t.find('.skip-on-drag,.skip-content,.voice').remove();
  return t.text().trim();
};

// set event handlers on all iframe elements (and their contents)
rcube_webmail.set_iframe_events = function(events)
{
  $('iframe').each(function() {
    var frame = $(this);
    $.each(events, function(event_name, event_handler) {
      frame.on('load', function(e) {
        try { $(this).contents().on(event_name, event_handler); }
        catch (e) {/* catch possible permission error in IE */ }
      });

      try { frame.contents().on(event_name, event_handler); }
      catch (e) {/* catch possible permission error in IE */ }
    });
  });
};

rcube_webmail.prototype.get_cookie = getCookie;

// copy event engine prototype
rcube_webmail.prototype.addEventListener = rcube_event_engine.prototype.addEventListener;
rcube_webmail.prototype.removeEventListener = rcube_event_engine.prototype.removeEventListener;
rcube_webmail.prototype.triggerEvent = rcube_event_engine.prototype.triggerEvent;
</code></pre>
        </article>
    </section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = '_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>
