{"version":3,"file":"ds-bnum.min.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@rotomeca/rop/dist/esm/src/interfaces/ITResult.js","../core/utils/LogEnum.ts","../node_modules/@rotomeca/rop/dist/esm/src/classes/abstracts/ATresult.js","../node_modules/@rotomeca/rop/dist/esm/src/classes/Success.js","../node_modules/@rotomeca/rop/dist/esm/src/classes/Fail.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/Risky.internal/functions.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/Risky.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/ErrorPath.internal/functions.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/ErrorPath.js","../core/utils/constants/config.ts","../core/utils/BnumConfig.ts","../node_modules/@rotomeca/utils/lib/constants.mjs","../node_modules/@rotomeca/utils/index.mjs","../core/utils/BnumDom.ts","../core/utils/ArrayUtils.ts","../components/bnum-element.ts","../core/utils/Log.ts","../node_modules/@rotomeca/document-utils/src/RotomecaCookies.ts","../node_modules/@rotomeca/document-utils/src/RotomecaMeta.ts","../node_modules/@rotomeca/document-utils/src/RotomecaScripts.ts","../node_modules/@rotomeca/document-utils/src/RotomecaStyleSheets.ts","../node_modules/@rotomeca/document-utils/src/RotomecaDocument.ts","../node_modules/@rotomeca/event/JsEvent.js","../node_modules/@rotomeca/event/index.js","../node_modules/@rotomeca/event/JsCircularEvent.js","../components/bnum-element-states.ts","../core/utils/Scheduler.ts","../core/decorators/define.ts","../core/decorators/attr.ts","../core/decorators/set-attr.ts","../core/decorators/autobind.ts","../core/decorators/event.ts","../core/decorators/self.ts","../core/decorators/light.ts","../core/decorators/updateAll.ts","../core/utils/constants/tags.ts","../components/atoms/badge/bnum-badge.ts","../core/utils/events/ElementChangedEvent.ts","../components/atoms/button/bnum-button.internal/listeners.ts","../components/atoms/button/bnum-button.internal/constants.ts","../components/atoms/button/bnum-button.internal/types.ts","../core/jsx/index.ts","../core/utils/constants/regexp.ts","../core/decorators/listener.ts","../components/atoms/icon/bnum-icon.internal/constants.ts","../components/atoms/icon/bnum-icon.internal/listeners.ts","../components/atoms/icon/bnum-icon.tsx","../core/decorators/ui.ts","../components/atoms/button/bnum-button.tsx","../node_modules/@rotomeca/rop/dist/esm/src/decorators/RiskyPath.js","../components/atoms/button/bnum-button.internal/decorators.ts","../components/atoms/danger-button/bnum-danger-button.ts","../core/utils/BnumDateUtils.ts","../components/atoms/date/bnum-date.internals/constants.ts","../core/decorators/observe.ts","../components/atoms/date/bnum-date.ts","../components/atoms/fragment/bnum-fragment.tsx","../core/decorators/defer.ts","../components/atoms/icon-button/bnum-icon-button.internal/listeners.ts","../components/atoms/helper/bnum-helper.ts","../components/atoms/icon-button/bnum-icon-button.tsx","../components/atoms/input/bnum-input.internal/constants.ts","../components/atoms/input/bnum-input.internal/template.tsx","../core/utils/constants/constants.ts","../components/atoms/input/bnum-input.internal/listeners.ts","../components/atoms/input/bnum-input.ts","../components/atoms/input-number/bnum-input-number.ts","../components/atoms/input-date/bnum-input-date.ts","../components/atoms/input-search/bnum-input-search.internal/constants.ts","../core/decorators/listen.ts","../core/utils/eventsFunctions.ts","../components/atoms/input-search/bnum-input-search.tsx","../components/atoms/input-text/bnum-input-text.ts","../components/atoms/input-time/bnum-input-time.ts","../components/atoms/primary-button/bnum-primary-button.ts","../core/decorators/property.ts","../core/utils/events/CheckedChangeEvent.ts","../core/decorators/nonstd.ts","../components/atoms/radio/bnum-radio.tsx","../components/atoms/secondary-button/bnum-secondary-button.ts","../core/decorators/schedule.ts","../components/atoms/select/bnum-select.tsx","../components/atoms/switch/bnum-switch.tsx","../components/molecules/card-item/bnum-card-item.internal/template.tsx","../components/molecules/card-item/bnum-card-item.internal/listener.ts","../components/molecules/card-item/bnum-card-item.ts","../components/molecules/card-item-agenda/card-item-agenda.internal/constants.ts","../components/molecules/card-item-agenda/bnum-card-item-agenda.tsx","../components/molecules/card-item-mail/bnum-card-item-mail.internal/listeners.ts","../components/molecules/card-item-mail/bnum-card-item-mail.internal/constants.ts","../components/molecules/card-item-mail/bnum-card-item-mail.tsx","../components/molecules/card-list/bnum-card-list.ts","../components/molecules/card-title/bnum-card-title.tsx","../components/organisms/folder-list/bnum-folder-list.tsx","../components/molecules/folder/bnum-folder.internal/constants.ts","../components/molecules/folder/bnum-folder.tsx","../components/molecules/hide/bnum-hide.ts","../components/molecules/radio-group/bnum-radio-group.tsx","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.internal/States.ts","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.tsx","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.internal/listeners.ts","../components/molecules/segmented-control/bnum-segmented-control.part/bnum-segmented-control.tsx","../components/organisms/card/card.internal/ScheduleElementAppend.ts","../components/organisms/card/card.internal/constants.ts","../components/organisms/card/bnum-card.tsx","../core/utils/utils.ts","../components/organisms/card-agenda/bnum-card-agenda.internal/constants.ts","../components/organisms/card-agenda/bnum-card-agenda.internal/listeners.ts","../components/organisms/card-agenda/bnum-card-agenda.tsx","../components/organisms/card-email/bnum-card-email.internal/constants.ts","../components/organisms/card-email/bnum-card-email.internal/listeners.ts","../components/organisms/card-email/bnum-card-email.tsx","../components/organisms/header/bnum-header.internal/constants.ts","../components/organisms/header/bnum-header.internal/listeners.ts","../components/organisms/header/bnum-header.tsx","../components/organisms/tree/bnum-tree.ts","../components/template/column/bnum-column.internal/constants.ts","../components/template/column/bnum-column.ts","../src/index.ts","../node_modules/@rotomeca/document-utils/src/RotomecaCssProperty.ts","../node_modules/@rotomeca/document-utils/src/RotomecaCssRule.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","// type: interface\n// description: Interface for a result type that can represent either a success or an error.\n/**\n * Enumeration representing the state of the result.\n */\nexport var ResultState;\n(function (ResultState) {\n    /**\n     * The result represents a successful outcome.\n     */\n    ResultState[ResultState[\"Success\"] = 0] = \"Success\";\n    /**\n     * The result represents an error outcome.\n     */\n    ResultState[ResultState[\"Error\"] = 1] = \"Error\";\n})(ResultState || (ResultState = {}));\n","export enum LogEnum {\n  TRACE = 0,\n  DEBUG = 1,\n  INFO = 2,\n  WARN = 3,\n  ERROR = 4,\n}\n","// type: class\n// description: Abstract class implementing the ITResult interface.\nimport { ResultState } from \"../../interfaces/ITResult\";\nimport { Fail, Success } from \"../internal\";\n/**\n * Abstract class representing a result that can be either a success or an error.\n */\nexport class ATresult {\n    /**\n     * Checks if the result is a success.\n     *\n     * @returns True if the result is a success, false otherwise.\n     */\n    isSuccess() {\n        return this.state() === ResultState.Success;\n    }\n    /**\n     * Checks if the result is an error.\n     *\n     * @returns True if the result is an error, false otherwise.\n     */\n    isError() {\n        return this.state() === ResultState.Error;\n    }\n    /**\n     * Creates a new Success result.\n     * @param value Optional success value.\n     * @returns A new Success instance containing the value.\n     */\n    static Ok(value) {\n        return Success.Create(value);\n    }\n    /**\n     * Creates a new Fail result.\n     * @param error Optional error value.\n     * @returns A new Fail instance containing the error.\n     */\n    static Fail(error) {\n        return Fail.Create(error ?? new Error(\"An error occurred\"));\n    }\n    /**\n     * Throw an error from an Error object or a text.\n     * @param error Error to throw\n     * @throws An Error\n     */\n    static Throw(error = undefined) {\n        const err = typeof error === 'string' ? new Error(error) : error;\n        this.Fail(err).throwIfError();\n    }\n}\n","// type: class\n// description: Class representing a successful result.\nimport { ResultState } from \"../interfaces/ITResult\";\nimport { ATresult } from \"./internal\";\n/**\n * Class representing a successful result.\n * @template TSuccess - The type of the success value.\n * @template TE - The type of the error value (default is Error).\n */\nexport class Success extends ATresult {\n    /**\n     * Creates an instance of Success.\n     * @param value The success value.\n     */\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    /**\n     * Returns the state of the result.\n     * @returns The state indicating success.\n     */\n    state() {\n        return ResultState.Success;\n    }\n    /**\n     * Matches the result with the provided matcher functions.\n     * @param matcher The matcher object containing functions for success and error cases.\n     * @returns The result of the matched function.\n     */\n    match(matcher) {\n        return matcher.Ok(this.value);\n    }\n    /**\n     * Chains the result with another operation that returns a new result.\n     * @param fn The function to apply if the result is successful.\n     * @returns The result of the chained operation.\n     */\n    andThen(fn) {\n        return fn(this.value);\n    }\n    /**\n     * Maps the success value to a new value.\n     * @param fn The function to apply to the success value.\n     * @returns A new Success instance containing the mapped value.\n     */\n    map(fn) {\n        return new Success(fn(this.value));\n    }\n    /**\n     * Maps the error value to a new error value.\n     * @param _ The function to apply to the error value.\n     * @returns A new Success instance containing the original success value.\n     */\n    mapError(_) {\n        return new Success(this.value);\n    }\n    /**\n     * Returns the success value or throws an error if the result is an error.\n     * @returns The success value.\n     */\n    throwIfError() {\n        return this.value;\n    }\n    /**\n     * Retrieves the success value or returns the provided default value if the result is an error.\n     * @param _ The value to return if the result is an error.\n     * @returns The success value if the result is a success, otherwise the default value.\n     */\n    unwrapOr(_) {\n        return this.value;\n    }\n    /**\n     * Executes the provided function if the result is an error, then returns the original result.\n     * @param _ Unused function since this is a Success.\n     * @returns The original Success result.\n     */\n    tapError(_) {\n        return this;\n    }\n    /**\n     * Executes the provided function if the result is a success, then returns the original result.\n     * @param fn A function to execute with the success value.\n     * @returns The original result.\n     */\n    tap(fn) {\n        fn(this.value);\n        return this;\n    }\n    /**\n     * Creates a new Success instance.\n     * @param value The success value.\n     * @returns A new Success instance containing the value.\n     *\n     * @template TSuccess - The type of the success value.\n     * @template TE - The type of the error value (default is Error).\n     *\n     * @static\n     */\n    static Create(value) {\n        return new Success(value);\n    }\n}\n","// type: class\n// description: Class representing a error result.\nimport { ResultState } from \"../interfaces/ITResult\";\nimport { ATresult } from \"./internal\";\n/**\n * Class representing a failed result.\n * @template TSuccess - The type of the success value.\n * @template TE - The type of the error value (default is Error).\n */\nexport class Fail extends ATresult {\n    /**\n     * Creates an instance of Fail.\n     * @param error The error value.\n     */\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    /**\n     * Returns the state of the result.\n     * @returns The state indicating failure.\n     */\n    state() {\n        return ResultState.Error;\n    }\n    /**\n     * Matches the result with the provided matcher functions.\n     * @param matcher The matcher object containing functions for success and error cases.\n     * @returns The result of the matched function.\n     */\n    match(matcher) {\n        return matcher.Err(this.error);\n    }\n    /**\n     * Chains the result with another operation that returns a new result.\n     * @param fn The function to apply if the result is successful.\n     * @returns The result of the chained operation.\n     */\n    andThen(_) {\n        return new Fail(this.error);\n    }\n    /**\n     * Maps the success value to a new value.\n     * @param fn The function to apply to the success value.\n     * @returns A new Success instance containing the mapped value.\n     */\n    map(_) {\n        return new Fail(this.error);\n    }\n    /**\n     * Maps the error value to a new error value.\n     * @param _ The function to apply to the error value.\n     * @returns A new Success instance containing the original success value.\n     */\n    mapError(fn) {\n        return new Fail(fn(this.error));\n    }\n    /**\n     * Returns the success value or throws an error if the result is an error.\n     * @throws The error value if the result is an error.\n     * @returns The success value.\n     */\n    throwIfError() {\n        throw this.error;\n    }\n    /**\n     * Retrieves the success value or returns the provided default value if the result is an error.\n     * @param defaultValue The value to return if the result is an error.\n     * @returns The success value if the result is a success, otherwise the default value.\n     */\n    unwrapOr(defaultValue) {\n        return defaultValue;\n    }\n    /**\n     * Executes the provided function if the result is an error, then returns the original result.\n     * @param fn A function to execute with the error value.\n     * @returns The original result.\n     */\n    tapError(fn) {\n        fn(this.error);\n        return this;\n    }\n    /**\n     * Executes the provided function if the result is a success, then returns the original result.\n     * @param fn A function to execute with the success value.\n     * @returns The original result.\n     */\n    tap(_) {\n        return this;\n    }\n    /**\n     * Creates a new Fail instance.\n     * @param error The error value.\n     * @returns A new Fail instance containing the error.\n     *\n     * @template TSuccess - The type of the success value.\n     * @template TE - The type of the error value (default is Error).\n     *\n     * @static\n     */\n    static Create(error) {\n        return new Fail(error);\n    }\n}\n","// type: functions\n// description: Functions to handle risky operations by converting exceptions into Result types.\nimport { ATresult, Fail, Success } from \"../../classes\";\n/**\n * Handles synchronous risky operations by converting exceptions into Result types.\n * @param this The context in which the original function is called.\n * @param original The original function to be executed.\n * @param args Arguments to be passed to the original function.\n * @returns An ATresult representing success or failure.\n */\nexport function riskySync(original, ...args) {\n    try {\n        const result = original.apply(this, args);\n        return result instanceof ATresult ? result : Success.Create(result);\n    }\n    catch (error) {\n        return error instanceof ATresult ? error : Fail.Create(error);\n    }\n}\n/**\n * Handles asynchronous risky operations by converting exceptions into Result types.\n * @param this The context in which the original function is called.\n * @param original The original function to be executed.\n * @param args Arguments to be passed to the original function.\n * @returns A Promise that resolves to an ATresult representing success or failure.\n */\nexport async function riskyAsync(original, ...args) {\n    try {\n        const result = await original.apply(this, args);\n        return result instanceof ATresult ? result : Success.Create(result);\n    }\n    catch (error) {\n        return error instanceof ATresult ? error : Fail.Create(error);\n    }\n}\n","// type: decorators\n// description: Decorators to handle risky operations by converting exceptions into Result types.\nimport { riskyAsync, riskySync } from \"./Risky.internal/functions\";\n/**\n * Decorator to handle risky operations by converting exceptions into Result types.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function Risky() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"Risky can only be applied to methods.\");\n        }\n        return (function (...args) {\n            return riskySync.call(this, originalMethod, ...args);\n        });\n    };\n}\n/**\n * Decorator to handle risky async operations by converting exceptions into Result types.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyAsync() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyAsync can only be applied to methods.\");\n        }\n        return (async function (...args) {\n            return await riskyAsync.call(this, originalMethod, ...args);\n        });\n    };\n}\n","//type: functions\n//description: Functions to handle error path operations by executing a callback on errored results.\nimport { ATresult } from \"../../classes\";\n/**\n * Handles the error path for synchronous functions by executing a callback on errored results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The error callback to be executed on errored results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the error callback.\n */\nexport function errorPathSync(original, path, ...args) {\n    const result = original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (_) => result,\n            Err: (val) => val,\n        });\n    }\n    return path(result);\n}\n/**\n * Handles the error path for asynchronous functions by executing a callback on errored results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The error callback to be executed on errored results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the error callback.\n */\nexport async function errorPathAsync(original, path, ...args) {\n    const result = await original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (_) => result,\n            Err: (val) => val,\n        });\n    }\n    return path(result);\n}\n","//type: decorators\n//description: Decorator to handle error path operations by executing a callback on errored results.\nimport { errorPathAsync, errorPathSync } from \"./ErrorPath.internal/functions\";\n/**\n * Decorator to handle error path operations by executing a callback on errored results.\n * @param fn Error path callback to be executed on errored results.\n * @returns A method decorator that wraps the original method with error path handling.\n */\nexport function ErrorPath(fn) {\n    return function (originalMethod, context) {\n        return function (...args) {\n            return errorPathSync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n/**\n * Decorator to handle error path operations by executing a callback on errored results.\n * @param fn Error path callback to be executed on errored results.\n * @returns A method decorator that wraps the original method with error path handling.\n */\nexport function ErrorPathAsync(fn) {\n    return function (originalMethod, context) {\n        return async function (...args) {\n            return errorPathAsync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n","import { LogEnum } from '../LogEnum';\n\nexport interface BnumConfigLocalKeys {\n\ttoday?: string;\n\ttomorrow?: string;\n\tday?: string;\n\tinvalid_date?: string;\n\tlast_mails?: string;\n\tno_mails?: string;\n\tlast_events?: string;\n\tno_events?: string;\n\tvalid_input?: string;\n\tinvalid_input?: string;\n\terror_field?: string;\n\tsearch_field?: string;\n\tactive_switch?: string;\n\tinactive_switch?: string;\n}\n\nexport interface BnumConfigOptions {\n\tlocal_keys?: BnumConfigLocalKeys;\n\tconsole_logging?: boolean;\n\tconsole_logging_level?: LogEnum;\n\ttag_prefix?: string;\n}\n\nexport const DEFAULT_CONFIG: BnumConfigOptions = {\n\tlocal_keys: {\n\t\ttoday: \"Aujourd'hui\",\n\t\ttomorrow: 'Demain',\n\t\tday: 'Journée',\n\t\tinvalid_date: 'Date invalide',\n\t\tlast_mails: 'Courriers récents',\n\t\tno_mails: 'Aucun courrier...',\n\t\tlast_events: 'Prochains évènements',\n\t\tno_events: 'Aucun événement...',\n\t\tvalid_input: 'Le champs est valide !',\n\t\tinvalid_input: 'Le champs est invalide !',\n\t\terror_field: 'Ce champ contient une erreur.',\n\t\tsearch_field: 'Rechercher',\n\t\tactive_switch: 'Activé',\n\t\tinactive_switch: 'Désactivé',\n\t},\n\tconsole_logging: true,\n\tconsole_logging_level: LogEnum.TRACE,\n\ttag_prefix: 'bnum',\n};\n","import { Result, Risky } from '@rotomeca/rop';\nimport { BnumConfigOptions, DEFAULT_CONFIG } from './constants/config';\n\n/**\n * Vérifie si une valeur est un objet (et pas un tableau).\n * @param item Item à vérifier\n * @returns Vrai si l'item est un objet (et pas un tableau), sinon faux.\n */\nfunction isObject(item: any): item is Record<string, any> {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\n/**\n * Fonction de fusion profonde (Deep Merge) native.\n * @param target L'objet cible (qui sera modifié).\n * @param source L'objet source (qui écrase la cible).\n * @returns L'objet cible fusionné.\n */\nfunction deepMerge<T>(target: T, source: any): T {\n  // Si l'un des deux n'est pas un objet, on retourne la source (écrasement)\n  if (!isObject(target) || !isObject(source)) {\n    return source;\n  }\n\n  const output = target as any;\n\n  Object.keys(source).forEach((key) => {\n    const targetValue = output[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      // Choix architectural : Pour les tableaux de config, on remplace souvent tout le tableau.\n      // Si tu préfères concaténer : output[key] = targetValue.concat(sourceValue);\n      output[key] = sourceValue;\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      // Récursion pour les objets imbriqués\n      output[key] = deepMerge(targetValue, sourceValue);\n    } else {\n      // Assignation directe pour les primitives\n      output[key] = sourceValue;\n    }\n  });\n\n  return output;\n}\n\n// Variable locale au module (privée) pour stocker l'état\nlet _currentConfig: BnumConfigOptions = { ...DEFAULT_CONFIG };\n\n/**\n * Gestionnaire de configuration global pour Bnum.\n */\nexport class BnumConfig {\n  /**\n   * Initialise la configuration en fusionnant les défauts avec un objet partiel.\n   * À appeler au démarrage si une config globale existe.\n   */\n  @Risky()\n  static Initialize(overrides: Partial<BnumConfigOptions>): Result<void> {\n    _currentConfig = deepMerge(_currentConfig, overrides);\n    return Result.Ok();\n  }\n\n  /**\n   * Récupère la configuration complète ou une valeur spécifique.\n   * @param key Clé optionnelle pour récupérer une sous-partie\n   */\n  static Get(): BnumConfigOptions;\n  static Get<K extends keyof BnumConfigOptions>(key: K): BnumConfigOptions[K];\n  static Get<K extends keyof BnumConfigOptions>(\n    key?: K,\n  ): BnumConfigOptions | BnumConfigOptions[K] {\n    if (key) {\n      return _currentConfig[key];\n    }\n    return _currentConfig;\n  }\n\n  /**\n   * Met à jour la configuration à la volée.\n   */\n  static Set(overrides: Partial<BnumConfigOptions>): void {\n    this.Initialize(overrides);\n    // Optionnel : Déclencher un événement global pour dire que la config a changé\n    // document.dispatchEvent(new CustomEvent('bnum:config-changed', { detail: _currentConfig }));\n  }\n\n  /**\n   * Reset la configuration aux valeurs par défaut\n   */\n  static Reset(): void {\n    _currentConfig = { ...DEFAULT_CONFIG };\n  }\n\n  /**\n   * Récupère une copie profonde de la configuration actuelle.\n   * @readonly\n   */\n  static get Clone(): BnumConfigOptions {\n    return JSON.parse(JSON.stringify(_currentConfig));\n  }\n}\n","export const EMPTY_STRING = '';\n\n","import { EMPTY_STRING } from \"./lib/constants\";\nimport Random from \"./lib/random\";\n\n//#region MiscFunctions\nexport function isNullOrUndefined(item) {\n    return item !== null || item !== undefined;\n}\n\n/**\n * Vérifie si une varible est un tableau ou quelque chose qui y ressemble\n * @param {*} item\n * @returns {bool}\n */\nexport function isArrayLike(item) {\n    return (\n      !!item &&\n      typeof item === 'object' &&\n      // eslint-disable-next-line no-prototype-builtins\n      item.hasOwnProperty('length') &&\n      typeof item.length === 'number' &&\n      item.length > 0 &&\n      item.length - 1 in item\n    );\n  }\n\nexport function Capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1)\n}\n\nexport function CapitalizeLine(line) {\n  return line.split(' ')\n          .map(Capitalize)\n          .join(' ');\n}\n//#endregion\n\nexport {EMPTY_STRING, Random};","export type Container = HTMLElement | ShadowRoot;\n\n/**\n * Type d'intersection ajoutant la méthode query au container original\n */\nexport type EnhancedContainer<T extends Container> = T & {\n  queryId<E extends HTMLElement>(id: string): E | null;\n  queryClass<E extends HTMLElement>(className: string): E | null;\n};\n\nexport class BnumDOM {\n  /**\n   * \"Caste\" un container pour lui injecter les extensions Bnum via un Proxy.\n   * C'est l'équivalent d'une méthode d'extension C# résolue à l'exécution.\n   */\n  static from<T extends Container>(container: T): EnhancedContainer<T> {\n    return new Proxy(container, {\n      get(target, prop, receiver) {\n        if (prop === 'queryId') {\n          return (id: string) => {\n            return target instanceof ShadowRoot\n              ? target.getElementById(id)\n              : target.querySelector(`#${id}`);\n          };\n        } else if (prop === 'queryClass') {\n          return (className: string) => {\n            return target instanceof ShadowRoot\n              ? target.querySelector(`.${className}`)\n              : target.getElementsByClassName(className)[0] || null;\n          };\n        }\n\n        const value = Reflect.get(target, prop, target);\n        return typeof value === 'function' ? value.bind(target) : value;\n      },\n    }) as EnhancedContainer<T>;\n  }\n}\n","/**\n * Utilitaires pour les tableaux.\n */\nexport abstract class ArrayUtils {\n\t/**\n\t * Transforme un objet d'attributs en une chaîne de caractères pour utilisation dans une balise HTML.\n\t * @param attribs Objet contenant les attributs et leurs valeurs.\n\t * @returns Chaîne de caractères représentant les attributs pour une balise HTML.\n\t */\n\tstatic toStringAttribs(attribs: Record<string, any>): string {\n\t\treturn Object.entries(attribs)\n\t\t\t.map(([key, value]) => `${key}=\"${value}\"`)\n\t\t\t.join(' ');\n\t}\n\n\t/**\n\t * Trie un tableau d'objets sur deux niveaux de dates (Descendant).\n\t * @param arr Le tableau d'objets à trier.\n\t * @param primarySelector Callback pour la date principale.\n\t * @param secondarySelector Callback pour la date secondaire (fallback).\n\t */\n\tstatic sortByDatesDescending<T>(\n\t\tarr: T[],\n\t\tprimarySelector: (item: T) => Date | number,\n\t\tsecondarySelector: (item: T) => Date | number,\n\t): T[] {\n\t\treturn [...arr].sort((a, b) => {\n\t\t\tconst dateA = this.#_getTime(primarySelector(a));\n\t\t\tconst dateB = this.#_getTime(primarySelector(b));\n\n\t\t\tif (dateB !== dateA) {\n\t\t\t\treturn dateA - dateB;\n\t\t\t}\n\n\t\t\tconst subA = this.#_getTime(secondarySelector(a));\n\t\t\tconst subB = this.#_getTime(secondarySelector(b));\n\n\t\t\treturn subA - subB;\n\t\t});\n\t}\n\n\t/**\n\t * Récupère le timestamp d'une Date ou d'un nombre.\n\t * @param value Date ou nombre représentant un timestamp.\n\t * @returns Le timestamp en millisecondes.\n\t */\n\tstatic #_getTime(value: Date | number): number {\n\t\treturn value instanceof Date ? value.getTime() : value;\n\t}\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable } from '../core/utils/types';\nimport style from './bnum-element.less';\nimport { BnumDOM, Container, EnhancedContainer } from '../core/utils/BnumDom';\nimport { ArrayUtils } from '../core/utils/ArrayUtils';\n\nexport type CustomDom = EnhancedContainer<Container>;\n\n/**\n * Type du callback déclenché lors d’un changement d’attribut HTML.\n *\n * @param name Nom de l'attribut modifié.\n * @param oldVal Ancienne valeur de l'attribut.\n * @param newVal Nouvelle valeur de l'attribut.\n */\nexport type BnumHTMLElementAttributeChangedCallback = (\n  name: string,\n  oldVal: string | null,\n  newVal: string | null,\n) => void;\n\nexport type TagCreatorConstructor = {\n  classes?: Nullable<string[]>;\n  attributes?: Nullable<Record<string, any>>;\n  data?: Nullable<Record<string, any>>;\n  child?: Nullable<HTMLElement | string>;\n};\n\n/**\n * Classe de base pour les composants bnum personnalisés.\n *\n * Fournit les méthodes de cycle de vie et de gestion des attributs pour les webcomponents.\n * Permet la gestion de données internes, d'attributs, de classes CSS, de styles, d'événements, et de rendu.\n */\nexport default abstract class BnumElement extends HTMLElement {\n  /** Données mises en mémoire, accessibles via la méthode data(). */\n  #_data: Map<string, any> | null = null;\n  #_pendingAttributes: Map<\n    string,\n    { oldVal: string | null; newVal: string | null }\n  > | null = null;\n  #_updateScheduled = false;\n\n  /** Indique si le composant a déjà été chargé une première fois. */\n  #firstLoad = false;\n\n  protected _p_styleElement: HTMLStyleElement | null = null;\n\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   * À surcharger dans les classes dérivées pour observer des attributs spécifiques.\n   */\n  static get observedAttributes(): string[] {\n    return this._p_observedAttributes();\n  }\n\n  /**\n   * Méthode interne pour définir les attributs observés.\n   * Peut être surchargée par les classes dérivées.\n   * @returns Liste des noms d'attributs à observer.\n   */\n  protected static _p_observedAttributes(): string[] {\n    return (this as any).__CONFIG_ATTRIBS_TO_OBSERVE_ ?? [];\n  }\n\n  /**\n   * Indique si le composant a été chargé au moins une fois.\n   * Utile pour différencier le premier chargement des rechargements.\n   */\n  get alreadyLoaded(): boolean {\n    return this.#firstLoad;\n  }\n\n  /**\n   * Constructeur du composant.\n   * Initialise l'event de changement d'attribut et attache un shadow DOM si nécessaire.\n   */\n  constructor() {\n    super();\n\n    if (this._p_isShadowElement())\n      this._p_attachCustomShadow() ?? this.attachShadow({ mode: 'open' });\n\n    // Supprime tout script enfant pour éviter l'exécution indésirable.\n    const script = this.querySelector('script');\n    if (script) script.remove();\n  }\n\n  /**\n   * Callback appelée lors d’un changement d’attribut observé.\n   * Déclenche l'événement interne de changement d'attribut.\n   *\n   * @param name Nom de l'attribut modifié.\n   * @param oldVal Ancienne valeur.\n   * @param newVal Nouvelle valeur.\n   */\n  attributeChangedCallback(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (this.#firstLoad) {\n      this.#_pendingAttributes ??= new Map<\n        string,\n        { oldVal: string | null; newVal: string | null }\n      >();\n\n      this.#_pendingAttributes.set(name, { oldVal, newVal });\n\n      if (!this.#_updateScheduled) {\n        this.#_updateScheduled = true;\n\n        requestAnimationFrame(() => this.#_flushUpdates());\n      }\n    }\n  }\n\n  /**\n   * Callback appelée lorsque le composant est ajouté au DOM.\n   * Déclenche le rendu du composant.\n   */\n  connectedCallback(): void {\n    if (!this.#firstLoad) {\n      this.render();\n    }\n  }\n\n  /**\n   * Callback appelée lorsque le composant est retiré du DOM.\n   * Permet de nettoyer les ressources ou événements.\n   */\n  disconnectedCallback(): void {\n    this._p_preunload();\n    this._p_detach();\n  }\n\n  /**\n   * Déclenche le rendu du composant.\n   * Appelle les hooks de préchargement, de rendu et d'attachement.\n   */\n  render(): void {\n    // Empêche de relancer le rendu complet\n    if (this.#firstLoad) return;\n\n    this._p_preload();\n\n    const container = this._p_isShadowElement() ? this.shadowRoot : this;\n    if (container) {\n      if (this._p_isShadowElement()) {\n        // On injecte le style de manière sécurisée\n        const styleStr = this._p_getStyle();\n        if (styleStr) {\n          const styleEl = document.createElement('style');\n          // .textContent est sécurisé contre l'injection XSS\n          styleEl.textContent = styleStr;\n          container.appendChild(styleEl);\n\n          this._p_styleElement = styleEl;\n        }\n\n        // On gère les feuilles de styles adoptées\n        const stylesheets = this._p_getStylesheets();\n        if (\n          stylesheets.length > 0 &&\n          'adoptedStyleSheets' in Document.prototype\n        ) {\n          (container as ShadowRoot).adoptedStyleSheets = [\n            ...(container as ShadowRoot).adoptedStyleSheets,\n            ...stylesheets,\n          ];\n        }\n      }\n\n      // Si un template est déjà défini, on l'utilise\n      const template = this._p_fromTemplate();\n      if (template) {\n        const templateContent = template.content.cloneNode(\n          true,\n        ) as DocumentFragment;\n        container.appendChild(templateContent);\n      }\n\n      // On construit le DOM interne\n      this._p_buildDOM(BnumDOM.from(container));\n    }\n\n    this._p_attach();\n    this.#firstLoad = true;\n  }\n\n  // ======================\n  // === Public helpers ===\n  // ======================\n  //#region public\n\n  /**\n   * Récupère ou définit une donnée liée à l'élément.\n   * @param name Nom de la donnée.\n   * @param options Options de récupération ou de définition.\n   * @returns La valeur de la donnée ou l'instance courante.\n   */\n  data<T>(name: string, opts?: { fromAttribute?: boolean }): T;\n  data<T>(name: string, value: T | symbol, fromAttribute?: boolean): this;\n  data<T>(\n    name: string,\n    valueOrOpts?: T | symbol | { fromAttribute?: boolean },\n    fromAttribute: boolean = false,\n  ): T | this {\n    // Cas lecture : opts est un objet ou undefined\n    if (\n      valueOrOpts === undefined ||\n      valueOrOpts === null ||\n      (typeof valueOrOpts === 'object' && !('value' in valueOrOpts))\n    ) {\n      const opts = (valueOrOpts as { fromAttribute?: boolean }) || {};\n      return this.#_getData<T>(name, opts.fromAttribute ?? false);\n    }\n\n    // Cas écriture : valueOrOpts est T ou symbol\n    return this.#_setData(name, valueOrOpts as T, fromAttribute);\n  }\n\n  /** Ajoute une ou plusieurs classes CSS à l'élément. */\n  addClass(...classNames: string[]): this {\n    this.classList.add(...classNames.flatMap((c) => c.split(' ')));\n    return this;\n  }\n\n  /** Retire une ou plusieurs classes CSS de l'élément. */\n  removeClass(...classNames: string[]): this {\n    this.classList.remove(...classNames.flatMap((c) => c.split(' ')));\n    return this;\n  }\n\n  /** Bascule une classe CSS sur l’élément. */\n  toggleClass(className: string, force?: boolean): this {\n    this.classList.toggle(className, force);\n    return this;\n  }\n\n  /** Vérifie si l’élément possède une classe CSS donnée. */\n  hasClass(className: string): boolean {\n    return this.classList.contains(className);\n  }\n\n  /**\n   * Obtient ou définit un attribut HTML.\n   * @param name Nom de l'attribut.\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur de l'attribut ou l'instance courante.\n   */\n  attr(name: string): string | null;\n  attr(name: string, value: string | boolean | number): this;\n  attr(name: string, value?: string | boolean | number): string | this | null {\n    if (value === undefined || value === null) return this.getAttribute(name);\n    this.setAttribute(\n      name,\n      typeof value === 'string' ? value : value.toString(),\n    );\n    return this;\n  }\n\n  /**\n   * Définit plusieurs attributs HTML à la fois.\n   * @param attribs Objet contenant les paires nom-valeur des attributs à définir.\n   * @returns L'instance courante pour le chaînage.\n   */\n  attrs(attribs: Record<string, string | boolean | number>): this {\n    for (const keys of Object.keys(attribs)) {\n      this.attr(keys, attribs[keys]);\n    }\n    return this;\n  }\n\n  /**\n   * Essaye de définir un attribut html\n   * @param doSomething true pour le définir\n   * @param name Nom de l'attribut\n   * @param value Nouvelle valeur\n   * @returns L'instance courante pour le chaînage.\n   */\n  condAttr(\n    doSomething: boolean,\n    name: string,\n    value: string | boolean | number,\n  ): this {\n    if (doSomething) this.attr(name, value);\n\n    return this;\n  }\n\n  /**\n   * Manipule les styles CSS de l'élément.\n   * @param prop Propriété CSS ou objet de propriétés.\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur du style ou l'instance courante.\n   */\n  css(prop: string): string;\n  css(prop: string, value: string): this;\n  css(prop: Record<string, string>): this;\n  css(prop: string | Record<string, string>, value?: string): string | this {\n    if (typeof prop === 'string') {\n      if (value === undefined) return this.style[prop as any];\n      this.style[prop as any] = value;\n    } else {\n      for (const [k, v] of Object.entries(prop)) {\n        this.style[k as any] = v;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Manipule le contenu HTML de l'élément.\n   * @param value Valeur à définir (optionnel).\n   * @returns Contenu HTML ou l'instance courante.\n   */\n  html(): string;\n  html(value: string): this;\n  html(value?: string): string | this {\n    if (value === undefined) return this.innerHTML;\n    this.innerHTML = value;\n    return this;\n  }\n\n  /**\n   * Manipule le texte de l'élément.\n   * @param value Valeur à définir (optionnel).\n   * @returns Texte ou l'instance courante.\n   */\n  text(): string;\n  text(value: string): this;\n  text(value?: string): string | this {\n    if (value === undefined) return this.textContent || '';\n    this.textContent = value;\n    return this;\n  }\n\n  /**\n   * Manipule la valeur (pour input/select/textarea).\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur ou l'instance courante.\n   */\n  val(): string | undefined;\n  val(value: string): this | undefined;\n  val(value?: string): string | this | undefined {\n    if ('value' in this) {\n      if (value === undefined) return (this as any).value;\n      (this as any).value = value;\n      return this;\n    }\n    return undefined;\n  }\n\n  /**\n   * Ajoute un écouteur d'événement sur l'élément.\n   * @param type Type d'événement.\n   * @param listener Fonction de rappel.\n   * @param options Options d'écoute.\n   * @returns L'instance courante.\n   */\n  on(\n    type: string,\n    listener: EventListener,\n    options?: boolean | AddEventListenerOptions,\n  ): this {\n    this.addEventListener(type, listener, options);\n    return this;\n  }\n\n  /**\n   * Retire un écouteur d'événement de l'élément.\n   * @param type Type d'événement.\n   * @param listener Fonction de rappel.\n   * @param options Options d'écoute.\n   * @returns L'instance courante.\n   */\n  off(\n    type: string,\n    listener: EventListener,\n    options?: boolean | EventListenerOptions,\n  ): this {\n    this.removeEventListener(type, listener, options);\n    return this;\n  }\n\n  /**\n   * Déclenche un événement personnalisé sur l'élément.\n   * @param type Type d'événement.\n   * @param detail Détail de l'événement.\n   * @returns L'instance courante.\n   */\n  trigger(type: string, detail?: any, options?: CustomEventInit): this {\n    this.dispatchEvent(new CustomEvent(type, { detail, ...options }));\n    return this;\n  }\n\n  /**\n   * Ajoute un ou plusieurs nœuds ou chaînes HTML à la fin de l'élément.\n   * @param nodes Nœuds ou chaînes HTML à ajouter.\n   * @returns L'instance courante.\n   */\n  append(...nodes: (Node | string)[]): this {\n    for (const node of nodes) {\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('beforeend', node);\n      } else {\n        this.appendChild(node);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Ajoute l'élément courant à un autre élément cible.\n   * @param target Élément cible.\n   * @returns L'instance courante.\n   */\n  appendTo(target: Element): this {\n    target?.appendChild(this);\n    return this;\n  }\n\n  /**\n   * Ajoute un ou plusieurs nœuds ou chaînes HTML au début de l'élément.\n   * @param nodes Nœuds ou chaînes HTML à ajouter.\n   * @returns L'instance courante.\n   */\n  prepend(...nodes: (Node | string)[]): this {\n    for (let i = nodes.length - 1; i >= 0; --i) {\n      const node = nodes[i];\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('afterbegin', node);\n      } else {\n        this.insertBefore(node, this.firstChild);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Ajoute l'élément courant au début d'un autre élément cible.\n   * @param target Élément cible.\n   * @returns L'instance courante.\n   */\n  prependTo(target: Element): this {\n    target?.insertBefore(this, target.firstChild);\n    return this;\n  }\n\n  /**\n   * Insère un ou plusieurs nœuds ou chaînes HTML avant l'élément courant.\n   * @param nodes Nœuds ou chaînes HTML à insérer.\n   * @returns L'instance courante.\n   */\n  before(...nodes: (Node | string)[]): this {\n    for (const node of nodes) {\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('beforebegin', node);\n      } else {\n        this.parentNode?.insertBefore(node, this);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Insère un ou plusieurs nœuds ou chaînes HTML après l'élément courant.\n   * @param nodes Nœuds ou chaînes HTML à insérer.\n   * @returns L'instance courante.\n   */\n  after(...nodes: (Node | string)[]): this {\n    for (let i = nodes.length - 1; i >= 0; --i) {\n      const node = nodes[i];\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('afterend', node);\n      } else if (this.parentNode) {\n        if (this.nextSibling) {\n          this.parentNode.insertBefore(node, this.nextSibling);\n        } else {\n          this.parentNode.appendChild(node);\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Cache l'élément en lui appliquant la classe `hidden`\n   * @returns Chaîne\n   */\n  hide() {\n    return this.addClass('hidden');\n  }\n\n  /**\n   * Affiche l'élément en lui enlevant la classe `hidden`\n   * @returns Chaîne\n   */\n  show() {\n    return this.removeClass('hidden');\n  }\n  //#endregion\n\n  // ======================\n  // === Private helpers ==\n  // ======================\n  //#region private\n\n  /**\n   * Récupère une donnée interne ou depuis un attribut data-*.\n   * @param name Nom de la donnée.\n   * @param fromAttribute Si vrai, lit depuis l'attribut data-*.\n   * @returns La valeur de la donnée.\n   */\n  #_getData<T>(name: string, fromAttribute: boolean): T {\n    let data: any = EMPTY_STRING;\n\n    if (fromAttribute) {\n      data = this.getAttribute(`data-${name}`);\n    } else {\n      if (this.hasAttribute(`data-${name}`)) {\n        data = this.#_getData<T>(name, true);\n        this.removeAttribute(`data-${name}`);\n        this._p_setData(name, data);\n      } else {\n        data = this._p_getData<T>(name);\n      }\n    }\n\n    return data;\n  }\n\n  /**\n   * Définit une donnée interne ou dans un attribut data-*.\n   * @param name Nom de la donnée.\n   * @param value Valeur à définir.\n   * @param fromAttribute Si vrai, écrit dans l'attribut data-*.\n   * @returns L'instance courante.\n   */\n  #_setData<T>(name: string, value: T, fromAttribute: boolean): this {\n    if (fromAttribute) this.setAttribute(`data-${name}`, String(value));\n    else this._p_setData(name, value);\n    return this;\n  }\n\n  /**\n   * Exécute toutes les mises à jour en attente en une seule fois.\n   */\n  #_flushUpdates(): void {\n    // On libère le verrou pour permettre de futures mises à jour\n    this.#_updateScheduled = false;\n\n    if (this.#_pendingAttributes === null) return;\n\n    if (\n      (this.constructor as any).__CONFIG_UPDATE_ALL__ ??\n      this._p_isUpdateForAllAttributes()\n    )\n      this._p_update('all', null, null);\n    else {\n      // On itère sur tous les changements accumulés\n      for (const [name, { oldVal, newVal }] of this.#_pendingAttributes) {\n        if (this._p_update(name, oldVal, newVal) === 'break') break;\n      }\n    }\n\n    // On vide la liste des modifications en attente\n    this.#_pendingAttributes.clear();\n\n    this._p_postFlush();\n  }\n  //#endregion\n\n  // ======================\n  // === Protected ========\n  // ======================\n  //#region protected\n  /**\n   * Permet d'attacher un shadowroot custom au lieu de juste `{mode:'open'}`\n   * @returns Null si pas de root custom.\n   */\n  protected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n    return null;\n  }\n\n  /**\n   * Demande une mise à jour de l'élément.\n   * La mise à jour sera effectuée lors du prochain frame via requestAnimationFrame.\n   */\n  protected _p_requestAttributeUpdate(): this {\n    if (this.#firstLoad && !this.#_updateScheduled) {\n      this.#_updateScheduled = true;\n      requestAnimationFrame(() => this.#_flushUpdates());\n    }\n\n    return this;\n  }\n\n  /**\n   * Ajoute des attributs en attente de traitement.\n   * @param name Nom de l'attribut.\n   * @param oldVal Ancienne valeur\n   * @param newVal Nouvelle valeur\n   * @returns Chaîne\n   */\n  protected _p_addPendingAttribute(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): this {\n    this.#_pendingAttributes ??= new Map<\n      string,\n      { oldVal: string | null; newVal: string | null }\n    >();\n\n    this.#_pendingAttributes.set(name, { oldVal, newVal });\n\n    return this;\n  }\n\n  /**\n   * Récupère une donnée interne.\n   * @param name Nom de la donnée.\n   * @returns Valeur de la donnée.\n   */\n  protected _p_getData<T>(name: string): T {\n    this.#_data ??= new Map<string, any>();\n\n    return this.#_data.get(name);\n  }\n\n  /**\n   * Définit une donnée interne.\n   * @param name Nom de la donnée.\n   * @param value Valeur à définir.\n   * @returns L'instance courante.\n   */\n  protected _p_setData<T>(name: string, value: T): this {\n    this.#_data ??= new Map<string, any>();\n\n    this.#_data.set(name, value);\n    return this;\n  }\n\n  /**\n   * Vérifie si une donnée interne existe.\n   * @param name Nom de la donnée.\n   * @returns Vrai si la donnée existe.\n   */\n  protected _p_hasData(name: string): boolean {\n    return this.#_data === null ? false : this.#_data.has(name);\n  }\n\n  /**\n   * Crée un élément HTML générique avec options (classes, attributs, data, enfant).\n   * @param tag Nom de la balise HTML à créer.\n   * @param options Options de création (classes, attributs, data, enfant).\n   * @returns L'élément HTML créé.\n   */\n  protected _p_createTag<T extends HTMLElement>(\n    tag: string,\n    options?: TagCreatorConstructor,\n  ): T;\n  /**\n   * Crée un élément <span> avec options.\n   * @param tag 'span'\n   * @param options Options de création.\n   * @returns L'élément HTMLSpanElement créé.\n   */\n  protected _p_createTag<HTMLSpanElement>(\n    tag: 'span',\n    options?: TagCreatorConstructor,\n  ): HTMLSpanElement;\n  /**\n   * Crée un élément <slot> avec options.\n   * @param tag 'slot'\n   * @param options Options de création.\n   * @returns L'élément HTMLSlotElement créé.\n   */\n  protected _p_createTag<HTMLSlotElement>(\n    tag: 'slot',\n    options?: TagCreatorConstructor,\n  ): HTMLSlotElement;\n  /**\n   * Crée un élément <div> avec options.\n   * @param tag 'div'\n   * @param options Options de création.\n   * @returns L'élément HTMLDivElement créé.\n   */\n  protected _p_createTag<HTMLDivElement>(\n    tag: 'div',\n    options?: TagCreatorConstructor,\n  ): HTMLDivElement;\n  /**\n   * Implémentation de la création d'un élément HTML avec options.\n   * @param tag Nom de la balise HTML à créer.\n   * @param options Options de création (classes, attributs, data, enfant).\n   * @returns L'élément HTML créé.\n   */\n  protected _p_createTag<T extends HTMLElement>(\n    tag: string,\n    options?: TagCreatorConstructor,\n  ): T {\n    const element = document.createElement(tag) as T;\n\n    if (options) {\n      const { classes, attributes, data, child } = options;\n\n      if (classes) {\n        if (attributes) attributes['class'] = classes.join(' ');\n        else element.classList.add(...classes);\n      }\n\n      if (data) {\n        for (const [dataName, dataValue] of Object.entries(data)) {\n          element.setAttribute(`data-${dataName}`, String(dataValue));\n        }\n      }\n\n      if (attributes) {\n        for (const [attrName, attrValue] of Object.entries(attributes)) {\n          element.setAttribute(attrName, String(attrValue));\n        }\n      }\n\n      if (child)\n        element.appendChild(\n          typeof child === 'string' ? document.createTextNode(child) : child,\n        );\n    }\n\n    return element;\n  }\n\n  /**\n   * Crée un élément <slot> avec nom et valeur par défaut.\n   * @param name Nom du slot (optionnel).\n   * @param defaultValue Valeur par défaut si le slot est vide (optionnel).\n   * @returns L'élément HTMLSlotElement créé.\n   */\n  protected _p_createSlot(\n    name?: string,\n    defaultValue?: HTMLElement,\n  ): HTMLSlotElement {\n    const slot = this._p_createTag<HTMLSlotElement>('slot', {\n      attributes: name ? { name } : undefined,\n      child: defaultValue || null,\n    });\n    return slot;\n  }\n\n  /**\n   * Crée plusieurs éléments <slot> selon les options fournies.\n   * @param options Liste d'options pour chaque slot.\n   * @returns Tableau d'éléments HTMLSlotElement créés.\n   */\n  protected _p_createSlots(\n    ...options: { name?: string; defaultValue?: HTMLElement }[]\n  ): HTMLSlotElement[] {\n    const slots: HTMLSlotElement[] = [];\n    for (const opt of options) {\n      slots.push(this._p_createSlot(opt.name, opt.defaultValue));\n    }\n    return slots;\n  }\n\n  /**\n   * Crée un élément <span> avec options.\n   * @param options Options de création.\n   * @returns L'élément HTMLSpanElement créé.\n   */\n  protected _p_createSpan(options?: TagCreatorConstructor): HTMLSpanElement {\n    return this._p_createTag('span', options);\n  }\n\n  /**\n   * Crée plusieurs éléments <span> selon les options fournies.\n   * @param options Liste d'options pour chaque span.\n   * @returns Tableau d'éléments HTMLSpanElement créés.\n   */\n  protected _p_createSpans(\n    ...options: (TagCreatorConstructor | null)[]\n  ): HTMLSpanElement[] {\n    const spans: HTMLSpanElement[] = [];\n    for (const opt of options) {\n      spans.push(this._p_createSpan(opt || undefined));\n    }\n    return spans;\n  }\n\n  /**\n   * Crée un élément <div> avec options.\n   * @param options Options de création.\n   * @returns L'élément HTMLDivElement créé.\n   */\n  protected _p_createDiv(options?: TagCreatorConstructor): HTMLDivElement {\n    return this._p_createTag('div', options);\n  }\n\n  /**\n   * Crée plusieurs éléments <div> selon les options fournies.\n   * @param options Liste d'options pour chaque div.\n   * @returns Tableau d'éléments HTMLDivElement créés.\n   */\n  protected _p_createDivs(\n    ...options: (TagCreatorConstructor | null)[]\n  ): HTMLDivElement[] {\n    const divs: HTMLDivElement[] = [];\n    for (const opt of options) {\n      divs.push(this._p_createDiv(opt || undefined));\n    }\n    return divs;\n  }\n\n  /**\n   * Crée un nœud de texte.\n   * @param text Texte à insérer dans le nœud.\n   * @returns Le nœud de texte créé.\n   */\n  protected _p_createTextNode(text: string): Text {\n    return document.createTextNode(text);\n  }\n\n  /**\n   * Indique si l'élément est à l'intérieur d'un ShadowRoot.\n   */\n  get _p_isInsideShadowRoot(): boolean {\n    return this.getRootNode({ composed: false }) instanceof ShadowRoot;\n  }\n\n  // ======================\n  // === Virtual methods ==\n  // ======================\n\n  /**\n   * Hook appelé après le flush des mises à jour d'attributs.\n   */\n  protected _p_postFlush(): void {}\n\n  /**\n   * Si la méthode _p_update doit être appelé une seule fois ou non.\n   * @returns `true` pour appeler _p_update une seule fois, `false` pour l'appeler à chaque changement d'attribut.\n   */\n  protected _p_isUpdateForAllAttributes(): boolean {\n    return false;\n  }\n\n  /**\n   * Retourne le style CSS à injecter dans le composant.\n   * @returns Chaîne de style CSS.\n   * @deprecated Utiliser _p_getStylesheet ou _p_getStylesheets à la place.\n   */\n  protected _p_getStyle(): string {\n    return EMPTY_STRING;\n  }\n\n  /**\n   * Retourne la liste des feuilles de style CSS à injecter dans le composant.\n   * @returns Tableau de feuilles de style CSS.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    const sheets = [BASE_STYLE];\n    const componentStyle = (this.constructor as any).__CACHE_STYLE__;\n\n    if (componentStyle)\n      sheets.push(\n        ...(Array.isArray(componentStyle) ? componentStyle : [componentStyle]),\n      );\n\n    return sheets;\n  }\n\n  /**\n   * Hook appelé avant le rendu du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_preload(): void {}\n\n  /**\n   * Hook appelé à la création de l'élément.\n   *\n   * À surcharger dans les classes dérivées, doit créer le dom via des nodes et non via innerHTML.\n   *\n   * Est appelé qu'une seule fois.\n   *\n   * @param container Le conteneur (ShadowRoot ou this) où construire le DOM.\n   */\n  protected _p_buildDOM(container: CustomDom): void {}\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return (this.constructor as any).__CACHE_TEMPLATE__ || null;\n  }\n\n  /**\n   * Hook appelé LORS D'UN CHANGEMENT d'attribut, après le premier rendu.\n   *\n   * C'est ici que doit se faire la mise à jour \"chirurgicale\" du DOM.\n   *\n   * @param name Nom de l'attribut modifié.\n   * @param oldVal Ancienne valeur.\n   * @param newVal Nouvelle valeur.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {}\n\n  /**\n   * Hook appelé après le rendu du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_attach(): void {}\n\n  /**\n   * Hook appelé avant le déchargement du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_preunload(): void {}\n\n  /**\n   * Hook appelé lors du détachement du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_detach(): void {}\n\n  /**\n   * Indique si le composant doit utiliser un Shadow DOM.\n   * À surcharger dans les classes dérivées.\n   * @returns Vrai si Shadow DOM.\n   */\n  protected _p_isShadowElement(): boolean {\n    return (this.constructor as any).__CONFIG_SHADOW__ ?? true;\n  }\n  //#endregion\n\n  // ======================\n  // === Static API =======\n  // ======================\n  //#region static\n\n  protected static _p_WriteAttributes(attrs: Record<string, string>): string {\n    if (Object.keys(attrs).length === 0) return EMPTY_STRING;\n\n    return ArrayUtils.toStringAttribs(attrs);\n  }\n\n  /**\n   * Méthode statique pour créer une instance du composant.\n   * Doit être implémentée dans les classes dérivées.\n   * @throws Erreur si non implémentée.\n   */\n  static Create(...args: any[]): BnumElement {\n    throw new Error('Create method must be implemented in derived class.');\n  }\n\n  /**\n   * Retourne le nom de la balise du composant.\n   * Doit être implémenté dans les classes dérivées.\n   * @throws Erreur si non implémenté.\n   * @readonly\n   */\n  static get TAG(): string {\n    throw new Error('TAG getter must be implemented in derived class.');\n  }\n\n  /**\n   * Construit une feuille de style CSS à partir d'une chaîne CSS.\n   * @param cssText CSS à ajouter\n   * @returns Feuille de style\n   */\n  static ConstructCSSStyleSheet(cssText: string): CSSStyleSheet {\n    const sheet = new CSSStyleSheet();\n    sheet.replaceSync(cssText);\n    return sheet;\n  }\n\n  static CreateTemplate(html: string): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = html;\n    return template;\n  }\n\n  /**\n   * Définit le composant comme élément personnalisé si ce n'est pas déjà fait.\n   */\n  static TryDefine(): void {\n    this.TryDefineElement(\n      this.TAG,\n      this as unknown as CustomElementConstructor,\n    );\n  }\n\n  /**\n   * Définit un élément personnalisé avec le tag et le constructeur donnés.\n   * @param tag Nom de la balise personnalisée.\n   * @param constructor Constructeur de l'élément.\n   */\n  static TryDefineElement(\n    tag: string,\n    constructor: CustomElementConstructor,\n  ): void {\n    if (!customElements.get(tag)) {\n      customElements.define(tag, constructor);\n    }\n  }\n\n  //#endregion\n}\n\n/**\n * Style commun à tous les BnumElement.\n */\nconst BASE_STYLE = BnumElement.ConstructCSSStyleSheet(style);\n","import { BnumConfig } from './BnumConfig';\nimport { LogEnum } from './LogEnum';\n\nexport default class Log {\n  static trace(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.TRACE\n    )\n      console.trace(`[${context}]`, ...args);\n  }\n\n  static debug(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.debug(`🔎 [${context}]`, ...args);\n  }\n\n  static info(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.INFO\n    )\n      console.info(`ℹ️ [${context}]`, ...args);\n  }\n\n  static warn(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.WARN\n    )\n      console.warn(`⚠️ [${context}]`, ...args);\n  }\n\n  static error(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.ERROR\n    )\n      console.error(`### [${context}]`, ...args);\n  }\n\n  static time(label: string): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.time(label);\n  }\n\n  static timeEnd(label: string): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.timeEnd(label);\n  }\n}\n","import { EMPTY_STRING } from \"@rotomeca/utils\";\nimport { Nullable } from \"./utils\";\n\nexport default class RotomecaCookies {\n  /**\n   * Récupère la valeur d'un cookie par son nom\n   * @param name Nom du cookie\n   * @returns Valeur du cookie ou null si absent\n   */\n  get(name: string): Nullable<string> {\n    const match = document.cookie.match(\n      new RegExp('(^| )' + name + '=([^;]+)'),\n    );\n    return match ? decodeURIComponent(match[2]) : null;\n  }\n\n  /**\n   * Définit un cookie\n   * @param name Nom du cookie\n   * @param value Valeur du cookie\n   * @param options Options : nombre de jours de validité et chemin\n   */\nset(\n    name: string,\n    value: string,\n    options: { days?: number; path?: string; secure?: boolean; sameSite?: 'Lax' | 'Strict' | 'None' } = {}\n  ): void {\n    const { \n      days, \n      path = '/', \n      secure = true, \n      sameSite = 'Lax' \n    } = options;\n\n    let expires = EMPTY_STRING;\n    if (days) {\n      const date = new Date();\n      date.setTime(date.getTime() + days * 86_400_000); \n      expires = `; expires=${date.toUTCString()}`;\n    }\n\n    // Protection contre l'injection via encodeURIComponent et attributs de sécurité\n    const cookieString = `${encodeURIComponent(name)}=${encodeURIComponent(value)}${expires}; path=${path}; SameSite=${sameSite}${secure ? '; Secure' : EMPTY_STRING}`;\n    document.cookie = cookieString;\n  }\n\n\n  /**\n   * Supprime un cookie\n   * @param name Nom du cookie à supprimer\n   */\n  delete(name: string): void {\n    this.set(name, '', { days: -1 });\n  }\n}","/**\n *  Classe pour gérer les métadonnées du document HTML (titre, balises meta).\n */\nexport default class RotomecaMeta {\n  /**\n   * Change le titre du document\n   */\n  set title(value: string) {\n    document.title = value;\n  }\n\n  /**\n   * Retourne le titre actuel du document\n   */\n  get title(): string {\n    return document.title;\n  }\n\n  /**\n   * Définit une balise meta standard (name=\"description\")\n   * @param content Contenu de la balise meta description\n   */\n  setDescription(content: string): this {\n    return this.#updateMeta('name', 'description', content);\n  }\n\n  /**\n   * Définit une balise OpenGraph (property=\"og:image\")\n   * @param property Nom de la propriété OpenGraph (ex: \"image\")\n   * @param content Valeur de la propriété\n   */\n  setOgTag(property: string, content: string): this {\n    return this.#updateMeta('property', `og:${property}`, content);\n  }\n\n  /**\n   * Méthode générique interne pour créer ou mettre à jour une balise meta\n   * @param attrKey \"name\" ou \"property\"\n   * @param attrValue Valeur de l'attribut\n   * @param content Contenu de la balise meta\n   * @private\n   */\n  #updateMeta(\n    attrKey: 'name' | 'property',\n    attrValue: string,\n    content: string,\n  ): this {\n    let tag = document.querySelector(`meta[${attrKey}=\"${attrValue}\"]`);\n\n    if (!tag) {\n      tag = document.createElement('meta');\n      tag.setAttribute(attrKey, attrValue);\n      document.head.appendChild(tag);\n    }\n\n    tag.setAttribute('content', content);\n    return this;\n  }\n}","export default class RotomecaScripts {\n  /**\n   * Cache pour ne pas charger 2 fois le même script\n   * @private\n   */\n  #_loaded: Set<string> = new Set();\n\n  /**\n   * Charge un script externe et attend qu'il soit prêt\n   * @param url URL du script à charger\n   * @param options async et defer (par défaut true)\n   * @returns Promise résolue quand le script est chargé\n   */\n  load(url: string, { async = true, defer = true } = {}): Promise<void> {\n    if (this.#_loaded.has(url)) return Promise.resolve();\n\n    // Si le script est déjà dans le DOM (ajouté manuellement)\n    if (document.querySelector(`script[src=\"${url}\"]`)) {\n      this.#_loaded.add(url);\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = url;\n      script.async = async;\n      script.defer = defer;\n\n      script.onload = () => {\n        this.#_loaded.add(url);\n        resolve();\n      };\n\n      script.onerror = () => {\n        reject(new Error(`RotomecaScripts: Failed to load script ${url}`));\n      };\n\n      document.head.appendChild(script);\n    });\n  }\n}","import { EMPTY_STRING } from \"@rotomeca/utils\";\nimport { Nullable } from \"./utils\";\nimport RotomecaCssRule from \"./RotomecaCssRule\";\n\n/**\n * Gère un ensemble de feuilles de style CSS dynamiques pour l'application.\n * Permet d'ajouter, supprimer et mettre à jour des règles CSS à la volée.\n */\nexport default class RotomecaStyleSheets {\n  /**\n   * Identifiant de la mise à jour planifiée (requestAnimationFrame).\n   * Null si aucune mise à jour n'est en attente.\n   */\n  #_pendingUpdate: Nullable<number> = null;\n  /**\n   * Indique si la feuille de style native a été montée dans le document.\n   */\n  #_mounted = false;\n  /**\n   * Registre des règles CSS, indexées par identifiant.\n   */\n  #_registry: Map<string, RotomecaCssRule> = new Map();\n  /**\n   * Map des fonctions de nettoyage des listeners pour chaque règle.\n   */\n  #_listenersDisposers: Map<string, () => void> = new Map();\n  /**\n   * Feuille de style native utilisée pour injecter les règles dans le DOM.\n   */\n  #_nativeSheet: CSSStyleSheet = new CSSStyleSheet();\n\n  /**\n   * Ajoute une règle CSS avec un identifiant spécifique.\n   * @param id Identifiant unique de la règle.\n   * @param rule Règle CSS à ajouter.\n   */\n  add(id: string, rule: RotomecaCssRule): this {\n    if (this.#_registry.has(id)) {\n      console.warn('/!\\\\[RotomecaStyleSheets/add]', `Rule with id '${id}' already exists.`);\n      return this;\n    }\n\n    rule.onUpdate.add(id, () => this.#_scheduleRender());\n\n    this.#_listenersDisposers.set(id, () => {\n      rule.onUpdate.remove(id);\n    });\n\n    this.#_registry.set(id, rule);\n\n    return this.#_scheduleRender();\n  }\n\n  /**\n   * Ajoute une règle CSS et génère automatiquement un identifiant.\n   * @param rule Règle CSS à ajouter.\n   * @returns L'identifiant généré.\n   */\n  push(rule: RotomecaCssRule): string {\n    const id = this.#_generateId();\n    void this.add(id, rule);\n    return id;\n  }\n\n  /**\n   * Ajoute plusieurs règles CSS à la feuille de style.\n   * @param rules Liste des règles à ajouter.\n   */\n  addMultiples(...rules: RotomecaCssRule[]): this {\n    for (const rule of rules) {\n      this.push(rule);\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime une règle CSS par son identifiant.\n   * @param id Identifiant de la règle à supprimer.\n   */\n  remove(id: string): this {\n    if (this.#_registry.has(id)) {\n      const disposer = this.#_listenersDisposers.get(id);\n      if (disposer) disposer();\n      this.#_listenersDisposers.delete(id);\n\n      this.#_registry.delete(id);\n      return this.#_scheduleRender();\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime toutes les règles CSS de la feuille de style.\n   */\n  clear(): this {\n    for (const disposer of this.#_listenersDisposers.values()) {\n      disposer();\n    }\n    this.#_registry.clear();\n    this.#_listenersDisposers.clear();\n    return this.#_scheduleRender();\n  }\n\n  /**\n   * Monte la feuille de style native dans le document si ce n'est pas déjà fait.\n   * @private\n   */\n  #_mount(): this {\n    if (\n      !this.#_mounted &&\n      !document.adoptedStyleSheets.includes(this.#_nativeSheet)\n    ) {\n      document.adoptedStyleSheets = [\n        ...document.adoptedStyleSheets,\n        this.#_nativeSheet,\n      ];\n      this.#_mounted = true;\n    }\n\n    return this;\n  }\n\n  /**\n   * Planifie un rendu asynchrone de la feuille de style.\n   * @private\n   */\n  #_scheduleRender(): this {\n    if (this.#_pendingUpdate) return this;\n    this.#_pendingUpdate = requestAnimationFrame(() => {\n      this.#_render();\n      this.#_pendingUpdate = null;\n    });\n    return this;\n  }\n\n  /**\n   * Génère le CSS et le remplace dans la feuille de style native.\n   * @private\n   */\n  #_render(): this {\n    if (this.#_registry.size === 0) {\n      this.#_nativeSheet.replaceSync(EMPTY_STRING);\n      return this;\n    }\n\n    const cssContent = Array.from(this.#_registry.values())\n      .map((rule) => rule.toString())\n      .join('\\n');\n\n    this.#_nativeSheet.replaceSync(cssContent);\n\n    return this.#_mount();\n  }\n\n  /**\n   * Génère un identifiant unique pour une nouvelle règle CSS.\n   * @private\n   */\n  #_generateId(): string {\n    do {\n      var id = `bnum-stylesheet-${crypto.randomUUID().substring(0, 8)}`;\n    } while (this.#_registry.has(id));\n    return id;\n  }\n}\n","import RotomecaCookies from \"./RotomecaCookies\";\nimport RotomecaMeta from \"./RotomecaMeta\";\nimport RotomecaScripts from \"./RotomecaScripts\";\nimport RotomecaStyleSheets from \"./RotomecaStyleSheets\";\nimport { Nullable } from \"./utils\";\n\n/**\n * Singleton pour accéder aux feuilles de style dynamiques de l'application.\n */\nexport default class RotomecaDocument {\n  /**\n   * Instance unique de RotomecaDocument.\n   * @private\n   */\n  static #_instance: Nullable<RotomecaDocument> = null;\n  /**\n   * Retourne l'instance unique de RotomecaDocument.\n   * @deprecated Utilisez RotomecaDocument.Instance à la place.\n   */\n  static get instance(): RotomecaDocument {\n    return this.Instance;\n  }\n\n  static get Instance(): RotomecaDocument {\n    return (this.#_instance ??= new RotomecaDocument());\n  }\n\n  /**\n   * Instance des feuilles de style dynamiques.\n   * @private\n   */\n  #_styleSheets: Nullable<RotomecaStyleSheets> = null;\n\n  /**\n   * Retourne l'ensemble des feuilles de style dynamiques.\n   */\n  get styleSheets(): RotomecaStyleSheets {\n    return (this.#_styleSheets ??= new RotomecaStyleSheets());\n  }\n\n  #_meta: Nullable<RotomecaMeta> = null;\n  /**\n   * Retourne l'objet de gestion des métadonnées du document.\n   */\n  get meta(): RotomecaMeta {\n    return (this.#_meta ??= new RotomecaMeta());\n  }\n\n  #_scripts: Nullable<RotomecaScripts> = null;\n  /**\n   * Retourne l'objet de gestion des scripts du document.\n   */\n  get scripts(): RotomecaScripts {\n    return (this.#_scripts ??= new RotomecaScripts());\n  }\n\n  #_cookies: Nullable<RotomecaCookies> = null;\n  /**\n   * Retourne l'objet de gestion des cookies du document.\n   */\n  get cookies(): RotomecaCookies {\n    return (this.#_cookies ??= new RotomecaCookies());\n  }\n\n  /**\n   * Retourne l'objet Document du navigateur.\n   */\n  get document(): Document {\n    return document;\n  }\n}","/**\n * @template T\n * @callback OnCallbackAddedCallback\n * @param {string} key\n * @param {T} callbackAdded\n * @return {void}\n */\n\n/**\n * @template T\n * @callback OnCallbackRemovedCallback\n * @param {string} key\n * @param {T} callbackRemoved\n * @return {void}\n */\n\n/**\n * @class\n * @classdesc Contient les données d'un callback. La fonction et les arguments.\n * @template T\n * @package\n */\nclass JsEventData {\n  /**\n   * T doit être une fonction\n   * @param {T} callback Fonction qui sera appelé\n   * @param {Array} args Arguments à ajouter lorsque la fonction sera appelé\n   */\n  constructor(callback, args) {\n    /**\n     * Fonction qui sera appelé\n     * @type {T}\n     */\n    this.callback = callback;\n    /**\n     * Arguments à ajouter lorsque la fonction sera appelé\n     * @type {Array}\n     */\n    this.args = args;\n  }\n}\n\n/**\n * @class\n * @classdesc Représente un évènement. On lui ajoute ou supprime des callbacks, puis on les appelle les un après les autres.\n * @template T\n */\nclass JsEvent {\n  #_onnadded;\n  #_onremoved;\n  /**\n   * Constructeur de la classe.\n   */\n  constructor() {\n    /**\n     * Liste des évènements à appeler\n     * @type {Object<string, JsEventData<T>>}\n     * @member\n     */\n    this.events = {};\n  }\n\n  /**\n   * Fire when a callback is added\n   * @type {JsEvent<OnCallbackAddedCallback<T>>}\n   * @readonly\n   * @event\n   */\n  get onadded() {\n    if (!this.#_onnadded) this.#_onnadded = new JsEvent();\n\n    return this.#_onnadded;\n  }\n\n  /**\n   * Fire when a callback is removed\n   * @type {JsEvent<OnCallbackRemovedCallback<T>>}\n   * @event\n   * @readonly\n   */\n  get onremoved() {\n    if (!this.#_onremoved) this.#_onremoved = new JsEvent();\n\n    return this.#_onremoved;\n  }\n\n  /**\n   * Ajoute un callback\n   * @param {T} event Callback qui sera appelé lors de l'appel de l'évènement\n   * @param  {...any} args Liste des arguments qui seront passé aux callback\n   * @returns {string} Clé créée\n   * @fires JsEvent.onadded\n   */\n  push(event, ...args) {\n    const key = this.#_generateKey();\n    this.add(key, event, ...args);\n    return key;\n  }\n\n  /**\n   * Ajoute un callback avec un clé qui permet de le retrouver plus tard\n   * @param {string} key Clé de l'évènement\n   * @param {T} event Callback qui sera appelé lors de l'appel de l'évènement\n   * @param  {...any} args Liste des arguments qui seront passé aux callback\n   * @fires JsEvent.onadded\n   */\n  add(key, event, ...args) {\n    this.events[key] = new JsEventData(event, args);\n    this.onadded.call(key, this.events[key]);\n  }\n\n  /**\n   * Vérifie si une clé éxiste\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return !!this.events[key];\n  }\n\n  /**\n   * Supprime un callback\n   * @param {string} key Clé\n   * @fires JsEvent.onremoved\n   */\n  remove(key) {\n    this.onremoved.call(key, this.events[key]);\n    this.events[key] = null;\n  }\n\n  /**\n   * Renvoie si il y a des évènements ou non.\n   * @returns {boolean}\n   */\n  haveEvents() {\n    return this.count() > 0;\n  }\n\n  /**\n   * Affiche le nombre d'évènements\n   * @returns {number}\n   */\n  count() {\n    return Object.keys(this.events).length;\n  }\n\n  /**\n   * Appèle les callbacks\n   * @param  {...any} params Paramètres à envoyer aux callbacks\n   * @returns {null | any | Array}\n   */\n  call(...params) {\n    let results = {};\n    const keys = Object.keys(this.events);\n\n    if (keys.length !== 0) {\n      for (let index = 0, len = keys.length; index < len; ++index) {\n        const key = keys[index];\n\n        if (this.events[key]) {\n          const { args, callback } = this.events[key];\n\n          if (callback)\n            results[key] = this.#_call_callback(\n              callback,\n              ...[...args, ...params],\n            );\n        }\n      }\n    }\n\n    switch (Object.keys(results).length) {\n      case 0:\n        return null;\n      case 1:\n        return results[Object.keys(results)[0]];\n      default:\n        return results;\n    }\n  }\n\n  /**\n   * Vide la classe\n   */\n  clear() {\n    this.events = {};\n  }\n\n    /**\n   * Lance un callback\n   * @param {T} callback Callback à appeler\n   * @param  {...any} args Paramètres à envoyer aux callbacks\n   * @returns {*}\n   * @private\n   */\n  #_call_callback(callback, ...args) {\n    return callback(...args);\n  }\n\n  /**\n   * Génère une clé pour l'évènement\n   * @private\n   * @returns {string}\n   */\n  #_generateKey() {\n    const g_key = Math.random() * (this.count() + 10);\n\n    let ae = false;\n    for (const key in this.events) {\n      if (Object.hasOwnProperty.call(this.events, key)) {\n        if (key === g_key) {\n          ae = true;\n          break;\n        }\n      }\n    }\n\n    if (ae) return this.#_generateKey();\n    else return g_key;\n  }\n}\n\nmodule.exports = JsEvent;\n","const JsEvent = require('./JsEvent');\nconst JsCircularEvent = require('./JsCircularEvent');\n\nmodule.exports = JsEvent;\nmodule.exports.JsCircularEvent = JsCircularEvent;","const JsEvent = require(\"./JsEvent\");\n\nclass JsCircularEvent extends JsEvent {\n    constructor() {\n        super();\n    }\n\n    call(param) {\n        let results = param;\n        const keys = Object.keys(this.events);\n\n        if (keys.length !== 0) {\n            for (let index = 0, len = keys.length; index < len; ++index) {\n                const key = keys[index];\n\n                if (this.events[key]) {\n                    const { args, callback } = this.events[key];\n                    results.defaultsParams = args;\n                    if (callback){\n                        results = {...results, ...this.#_call_callback(\n                        callback,\n                        results\n                        ) ?? {}};\n                    }\n                }\n            }\n        }\n\n        return results;\n    }\n\n  #_call_callback(callback, ...args) {\n    return callback(...args);\n  }\n}\n\nmodule.exports = JsCircularEvent;","import BnumElement from './bnum-element';\n\n/**\n * Classe interne étendant BnumElement pour gérer les états personnalisés via ElementInternals.\n */\nexport default abstract class BnumElementInternal extends BnumElement {\n  /**\n   * Internals de l'élément, utilisé pour accéder aux états personnalisés.\n   * @private\n   */\n  #_internal: ElementInternals = this.attachInternals();\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Retourne l'objet ElementInternals associé à l'élément.\n   * @protected\n   */\n  protected get _p_internal(): ElementInternals {\n    return this.#_internal;\n  }\n\n  /**\n   * Retourne l'ensemble des états personnalisés de l'élément.\n   * @protected\n   */\n  protected get _p_states(): CustomStateSet {\n    return this._p_internal.states;\n  }\n\n  /**\n   * Efface tous les états personnalisés de l'élément.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_clearStates(): this {\n    this._p_states.clear();\n    return this;\n  }\n\n  /**\n   * Ajoute un état personnalisé à l'élément.\n   * @param {string} state - Nom de l'état à ajouter.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_addState(state: string): this {\n    this._p_states.add(state);\n    return this;\n  }\n\n  /**\n   * Ajoute plusieurs états personnalisés à l'élément.\n   * @param {string[]} states - Liste des états à ajouter.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_addStates(...states: string[]): this {\n    for (let index = 0, len = states.length; index < len; ++index) {\n      this._p_states.add(states[index]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime un état personnalisé de l'élément.\n   * @param {string} state - Nom de l'état à supprimer.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_removeState(state: string): this {\n    this._p_states.delete(state);\n    return this;\n  }\n\n  /**\n   * Supprime plusieurs états personnalisés de l'élément.\n   * @param {string[]} states - Liste des états à supprimer.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_removeStates(states: string[]): this {\n    for (let index = 0, len = states.length; index < len; ++index) {\n      this._p_states.delete(states[index]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Vérifie si l'élément possède un état personnalisé donné.\n   * @param {string} state - Nom de l'état à vérifier.\n   * @returns {boolean}\n   * @protected\n   */\n  protected _p_hasState(state: string): boolean {\n    return this._p_states.has(state);\n  }\n}\n","import { Nullable } from './types';\n\n/**\n * Classe de gestion de planification d'exécution de callback.\n * Permet de regrouper plusieurs appels en une seule exécution lors du prochain frame.\n */\nexport class Scheduler<T> {\n\t/**\n\t * Indique si une exécution est déjà planifiée.\n\t * @private\n\t */\n\t#_started: boolean = false;\n\n\t/**\n\t * Dernière valeur planifiée pour l'exécution.\n\t * @private\n\t */\n\t#_lastValue: Nullable<T> = null;\n\n\t/**\n\t * Callback à exécuter lors de la planification.\n\t * @private\n\t */\n\t#_callback: (value: Nullable<T>) => void;\n\n\t/**\n\t * Constructeur de la classe Scheduler.\n\t * @param callback Sera appelée avec la dernière valeur planifiée lors du prochain frame.\n\t */\n\tconstructor(callback: (value: Nullable<T>) => void) {\n\t\tthis.#_callback = callback;\n\t}\n\n\t/**\n\t * Demande la planification de l'exécution de la callback avec la valeur donnée.\n\t * Si une exécution est déjà planifiée, seule la dernière valeur sera utilisée.\n\t * @param value Valeur la plus récente planifiée pour l'exécution.\n\t */\n\tpublic schedule(value: T): void {\n\t\tthis.#_lastValue = value;\n\n\t\tif (!this.#_started) {\n\t\t\tthis.#_started = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.#_callback(this.#_lastValue);\n\t\t\t\tthis.#_started = false;\n\t\t\t\tthis.#_lastValue = null;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Accesseur protégé pour obtenir la dernière valeur planifiée.\n\t */\n\tprotected get _p_value(): Nullable<T> {\n\t\treturn this.#_lastValue;\n\t}\n\n\t/**\n\t * Accesseur protégé pour définir la dernière valeur planifiée.\n\t */\n\tprotected set _p_value(value: Nullable<T>) {\n\t\tthis.#_lastValue = value;\n\t}\n\n\t/**\n\t * Appelle immédiatement la callback avec la valeur donnée, sans planification.\n\t * @param value Valeur à transmettre au callback\n\t */\n\tpublic call(value: T): void {\n\t\tthis.#_callback(value);\n\t}\n}\n\n/**\n * Variante de Scheduler pour gérer des tableaux ou des symboles de réinitialisation.\n *\n * Permet de regrouper plusieurs appels en une seule exécution lors du prochain frame.\n *\n * Si jamais une réinitialisation est demandée, le tableau sera vidé avant d'ajouter de nouveaux éléments.\n */\nexport class SchedulerArray<T> {\n\t/**\n\t * Indique si une exécution est déjà planifiée.\n\t * @private\n\t */\n\t#_started: boolean = false;\n\n\t/**\n\t * Symbole utilisé pour réinitialiser le tableau.\n\t * @private\n\t */\n\t#_resetSymbol: symbol;\n\t/**\n\t * Pile des éléments planifiés.\n\t * @private\n\t */\n\t#_stack: (T | T[] | symbol)[] = [];\n\t/**\n\t * Callback à exécuter lors de la planification.\n\t * @private\n\t */\n\t#_callback: (value: Nullable<T[] | symbol>) => void;\n\n\t/**\n\t * Constructeur de la classe SchedulerArray.\n\t * @param callback Fonction appelée lors de la planification.\n\t * @param resetSymbol Symbole utilisé pour réinitialiser le tableau.\n\t */\n\tconstructor(\n\t\tcallback: (value: Nullable<T[] | symbol>) => void,\n\t\tresetSymbol: symbol,\n\t) {\n\t\tthis.#_callback = callback;\n\t\tthis.#_resetSymbol = resetSymbol;\n\t}\n\n\t/**\n\t * Demande la planification de l'exécution de la callback avec la valeur donnée.\n\t * Peut recevoir un tableau, un élément ou un symbole de réinitialisation.\n\t * @param value Valeur la plus récente planifiée pour l'exécution.\n\t */\n\tpublic schedule(value: T[]): void;\n\tpublic schedule(value: T): void;\n\tpublic schedule(value: symbol): void;\n\tpublic schedule(value: T | symbol): void;\n\tpublic schedule(value: T[] | symbol): void;\n\tpublic schedule(value: symbol | T | T[]): void {\n\t\tthis.#_add(value);\n\n\t\tif (!this.#_started) {\n\t\t\tthis.#_started = true;\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tfor (const element of this.#_getStackItems()) {\n\t\t\t\t\tthis.#_callback(element);\n\t\t\t\t}\n\n\t\t\t\tthis.#_started = false;\n\t\t\t\tthis.#_stack.length = 0;\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Appelle immédiatement la callback avec la valeur donnée, sans planification.\n\t *\n\t * La stack en mémoire est utilisé si aucune valeur n'est fournie. Sinon, elle sera vidée avant d'ajouter la nouvelle valeur.\n\t * @param value Valeur à transmettre au callback\n\t */\n\tpublic call(value: Nullable<T | T[] | symbol>): void {\n\t\tif (value !== null) {\n\t\t\tthis.#_stack.length = 0;\n\t\t\tthis.#_add(value!);\n\t\t}\n\n\t\tfor (const element of this.#_getStackItems()) {\n\t\t\tthis.#_callback(element);\n\t\t}\n\n\t\tthis.#_stack.length = 0;\n\t}\n\n\t/**\n\t * Ajoute une valeur ou un tableau de valeurs à la pile, ou gère le symbole de réinitialisation.\n\t * @param value Valeur, tableau de valeurs ou symbole de réinitialisation à ajouter.\n\t * @returns void\n\t */\n\t#_add(value: symbol | T | T[]): void {\n\t\t// Gestion du symbole de réinitialisation\n\t\tif (value === this.#_resetSymbol) {\n\t\t\tthis.#_stack.length = 0;\n\t\t\tthis.#_stack.push(value);\n\t\t\tthis.#_stack.push([]);\n\t\t\treturn;\n\t\t}\n\n\t\t// Initialisation de la pile si vide\n\t\tif (this.#_stack.length === 0) this.#_stack.push([]);\n\n\t\t// Ajout de l'élément ou des éléments au dernier tableau de la pile\n\t\tif (Array.isArray(value)) {\n\t\t\t(this.#_stack[this.#_stack.length - 1] as T[]).push(...value);\n\t\t} else if (value !== this.#_resetSymbol) {\n\t\t\t(this.#_stack[this.#_stack.length - 1] as T[]).push(value as T);\n\t\t}\n\t}\n\n\t/**\n\t * Générateur pour obtenir les éléments de la pile un par un.\n\t *\n\t * Gère les tableaux et le symbole de réinitialisation.\n\t * @returns Générateur d'éléments de type T[] ou symbol.\n\t */\n\t*#_getStackItems(): Generator<T[] | symbol, void, unknown> {\n\t\tfor (const element of this.#_stack) {\n\t\t\tif (element === this.#_resetSymbol) {\n\t\t\t\tyield element as symbol;\n\t\t\t} else if (Array.isArray(element)) {\n\t\t\t\tyield element;\n\t\t\t} else {\n\t\t\t\tyield [element as T];\n\t\t\t}\n\t\t}\n\t}\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\n\ntype Style =\n\t| string[]\n\t| string\n\t| CSSStyleSheet\n\t| CSSStyleSheet[]\n\t| (string | CSSStyleSheet)[];\n\n/**\n * Options de configuration pour le décorateur `@Define`.\n */\nexport interface DefineOptions {\n\t/**\n\t * Le nom du tag HTML du Web Component (ex: 'bnum-button').\n\t * Si défini, il créera ou écrasera automatiquement la propriété statique `TAG` de la classe.\n\t */\n\ttag?: string;\n\n\t/**\n\t * La vue JSX ou la chaîne HTML du composant.\n\t * Sera compilée en `HTMLTemplateElement` une seule fois à l'initialisation de la classe.\n\t */\n\ttemplate?: string | Node;\n\n\t/**\n\t * Les styles CSS du composant.\n\t * Seront compilés - ou non - en `CSSStyleSheet` une seule fois à l'initialisation de la classe.\n\t */\n\tstyles?: Style;\n}\n\n/**\n * Décorateur de classe pour définir un Web Component.\n * * Il gère automatiquement :\n * 1. L'enregistrement du Custom Element via `customElements.define`.\n * 2. La création et la mise en cache du Template (Performance).\n * 3. La création et la mise en cache des Styles (Performance).\n * 4. La définition de la propriété statique `TAG` sur la classe.\n *\n * @param options Les options de configuration (tag, template, style)\n * @example\n * ```tsx\n * const VIEW = <div class=\"box\"><slot /></div>;\n * @Define({\n * tag: 'my-component',\n * template: VIEW,\n * styles: '.box { color: red; }'\n * })\n * export class MyComponent extends BnumElementInternal {\n * // Pas besoin de déclarer static get TAG(), c'est automatique !\n * }\n * ```\n */\nexport function Define(options: DefineOptions = {}) {\n\treturn function (target: Function, context: ClassDecoratorContext) {\n\t\t// Vérification de sécurité : on ne décore que des classes\n\t\tif (context.kind !== 'class') {\n\t\t\tthrow new Error('@Define ne peut être utilisé que sur une classe.');\n\t\t}\n\n\t\t// Initialisation unique au chargement de la classe (Load Time)\n\t\tcontext.addInitializer(function () {\n\t\t\tconst clazz = this as any;\n\n\t\t\t// ---------------------------------------------------------\n\t\t\t// 1. INJECTION DU STATIC TAG\n\t\t\t// ---------------------------------------------------------\n\t\t\tif (options.tag) {\n\t\t\t\t// On définit ou redéfinit la propriété statique 'TAG'\n\t\t\t\tObject.defineProperty(clazz, 'TAG', {\n\t\t\t\t\tget: () => options.tag,\n\t\t\t\t\tconfigurable: true, // Permet d'être reconfiguré si nécessaire\n\t\t\t\t\tenumerable: true,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Vérification finale pour s'assurer qu'on a un TAG valide\n\t\t\tconst finalTag = clazz.TAG;\n\t\t\tif (!finalTag) {\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`[Define] La classe ${context.name} n'a pas de TAG défini (ni via options, ni via static TAG).`,\n\t\t\t\t);\n\t\t\t\treturn; // On ne peut pas enregistrer sans tag\n\t\t\t}\n\n\t\t\t// ---------------------------------------------------------\n\t\t\t// 2. COMPILATION UNIQUE DU TEMPLATE (CACHE)\n\t\t\t// ---------------------------------------------------------\n\t\t\tif (options.template) {\n\t\t\t\tconst tpl = document.createElement('template');\n\n\t\t\t\tif (options.template instanceof Node) {\n\t\t\t\t\t// Support du JSX DOM Node\n\t\t\t\t\ttpl.content.appendChild(options.template);\n\t\t\t\t} else {\n\t\t\t\t\t// Support du JSX String ou HTML String\n\t\t\t\t\ttpl.innerHTML = String(options.template);\n\t\t\t\t}\n\n\t\t\t\t// Stockage caché sur le constructeur\n\t\t\t\tclazz.__CACHE_TEMPLATE__ = tpl;\n\t\t\t}\n\n\t\t\t// ---------------------------------------------------------\n\t\t\t// 3. COMPILATION UNIQUE DES STYLES (CACHE)\n\t\t\t// ---------------------------------------------------------\n\t\t\tif (options.styles) initStyle(clazz, options.styles);\n\n\t\t\t// ---------------------------------------------------------\n\t\t\t// 4. ENREGISTREMENT DU WEB COMPONENT\n\t\t\t// ---------------------------------------------------------\n\t\t\tif (!customElements.get(finalTag)) {\n\t\t\t\tcustomElements.define(finalTag, clazz);\n\t\t\t}\n\t\t});\n\t};\n}\n\n/**\n * Fonction qui gère le style de la classe\n *\n * @remark\n * Prend en compte les tableaux de string et les tableaux de CSSStyleSheet, mais aussi ces types la, à l'unitée.\n *\n * Voir {@link Style}\n *\n * @param clazz Classe qui contiendra le cache\n * @param styles Styles à ajouter au cache\n * @internal\n */\nfunction initStyle(clazz: { __CACHE_STYLE__: CSSStyleSheet[] }, styles: Style) {\n\tlet strStyles;\n\tconst array = Array.isArray(styles) ? styles : [styles];\n\tclazz.__CACHE_STYLE__ = [];\n\n\tfor (const style of array) {\n\t\tif (style instanceof CSSStyleSheet) clazz.__CACHE_STYLE__.push(style);\n\t\telse if (!strStyles) strStyles = style;\n\t\telse strStyles += style;\n\t}\n\n\tif (strStyles && strStyles !== EMPTY_STRING) {\n\t\tconst sheet = new CSSStyleSheet();\n\t\tsheet.replaceSync(strStyles);\n\t\tclazz.__CACHE_STYLE__.push(sheet);\n\t}\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\n\n/**\n * @Attr : Synchronise une propriété (auto-accessor) avec un attribut HTML.\n * Gère dynamiquement les types string, boolean et number.\n */\nexport function Attr(attributeName?: string) {\n\treturn function <This extends HTMLElement, Value>(\n\t\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\t\tcontext: ClassAccessorDecoratorContext<This, Value>,\n\t): ClassAccessorDecoratorResult<This, Value> {\n\t\tconst attrName = attributeName || String(context.name);\n\n\t\treturn {\n\t\t\tget(this: This): Value {\n\t\t\t\tconst val = this.getAttribute(attrName);\n\n\t\t\t\t// Logique de conversion selon la valeur de l'attribut\n\t\t\t\t// On utilise \"as unknown as Value\" pour satisfaire le compilateur\n\t\t\t\tif (val === EMPTY_STRING || val === 'true')\n\t\t\t\t\treturn true as unknown as Value;\n\t\t\t\tif (val === null) return false as unknown as Value;\n\n\t\t\t\t// Si c'est un nombre (on vérifie si la conversion est possible)\n\t\t\t\tconst num = Number(val);\n\t\t\t\tif (val !== EMPTY_STRING && !isNaN(num)) return num as unknown as Value;\n\n\t\t\t\treturn val as unknown as Value;\n\t\t\t},\n\t\t\tset(this: This, value: Value) {\n\t\t\t\tif (value === null || value === undefined || value === false) {\n\t\t\t\t\tthis.removeAttribute(attrName);\n\t\t\t\t} else {\n\t\t\t\t\t// Si c'est un booléen true, on met un attribut vide (pattern HTML standard)\n\t\t\t\t\tconst strVal = value === true ? EMPTY_STRING : String(value);\n\t\t\t\t\tthis.setAttribute(attrName, strVal);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t};\n}\ntype DataAccessortCallback = <This extends HTMLElement, Value>(\n\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\tcontext: ClassAccessorDecoratorContext<This, Value>,\n) => ClassAccessorDecoratorResult<This, Value>;\n\nexport function Data(\n\tname: string,\n\toptions: { setter?: boolean },\n): DataAccessortCallback;\nexport function Data(options: { setter?: boolean }): DataAccessortCallback;\nexport function Data(name: string): DataAccessortCallback;\nexport function Data(): DataAccessortCallback;\nexport function Data(\n\tnameOrOptions?: string | { setter?: boolean },\n\tmaybeOptions?: { setter?: boolean },\n): DataAccessortCallback {\n\t// 1. Déduction intelligente des arguments\n\tlet attributeName: string | undefined;\n\tlet setter = true;\n\n\tif (typeof nameOrOptions === 'string') {\n\t\tattributeName = nameOrOptions;\n\t\tsetter = maybeOptions?.setter ?? true;\n\t} else if (typeof nameOrOptions === 'object') {\n\t\tsetter = nameOrOptions.setter ?? true;\n\t}\n\n\treturn function <This extends HTMLElement, Value>(\n\t\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\t\tcontext: ClassAccessorDecoratorContext<This, Value>,\n\t): ClassAccessorDecoratorResult<This, Value> {\n\t\t// 2. Nettoyage du nom (ex: #_icon devient icon)\n\t\t// On enlève le # et le _ au début pour le nom de l'attribut data\n\t\tconst autoName = String(context.name).replace(/^[#_]+/, '');\n\t\tconst finalAttrName = attributeName || autoName;\n\n\t\treturn {\n\t\t\tget(this: This): Value {\n\t\t\t\tconst val =\n\t\t\t\t\ttypeof (this as any).data === 'function'\n\t\t\t\t\t\t? (this as any).data(finalAttrName)\n\t\t\t\t\t\t: this.getAttribute(`data-${finalAttrName}`);\n\n\t\t\t\tif (val === EMPTY_STRING || val === 'true')\n\t\t\t\t\treturn true as unknown as Value;\n\t\t\t\tif (val === null || val === undefined) return _target.get.call(this);\n\n\t\t\t\tconst num = Number(val);\n\t\t\t\tif (val !== EMPTY_STRING && !isNaN(num)) return num as unknown as Value;\n\n\t\t\t\treturn val as unknown as Value;\n\t\t\t},\n\t\t\tset(this: This, value: Value) {\n\t\t\t\tif (!setter) return;\n\n\t\t\t\tconst isFalsy =\n\t\t\t\t\tvalue === null || value === undefined || value === false;\n\t\t\t\tconst strVal = value === true ? EMPTY_STRING : String(value);\n\n\t\t\t\tif (typeof (this as any).data === 'function') {\n\t\t\t\t\t(this as any).data(finalAttrName, isFalsy ? null : strVal);\n\t\t\t\t} else {\n\t\t\t\t\tconst domAttrName = `data-${finalAttrName}`;\n\t\t\t\t\tif (isFalsy) this.removeAttribute(domAttrName);\n\t\t\t\t\telse this.setAttribute(domAttrName, strVal);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t};\n}\n\n/**\n * Option pour Data pour indiquer qu'un accessor ne devrait pas avoir de setter.\n *\n * @example\n * ```typescript\n * ///\n * @Data(NO_SETTER)\n * accessor #_label!: string;\n * ```\n */\nexport const NO_SETTER = { setter: false };\n","import { Nullable } from 'core/utils/types';\n\ntype Value = string | number | boolean;\ntype AttrCallback = (\n  name: string,\n  value?: Nullable<Value>,\n) => void | Nullable<string>;\ntype AttrsCallback = (attribs: Record<string, Value>) => void;\ntype MayBeBnumElement = HTMLElement & {\n  attr?: Nullable<AttrCallback>;\n  attrs?: Nullable<AttrsCallback>;\n};\n\n/**\n * @SetAttr : Ajoute un attribut avec une valeur fixe à un élément.\n * @param attributeName Nom de l'attribut à ajouter.\n * @param value Valeur de l'attribut à définir.\n * @returns Un décorateur de méthode qui ajoute l'attribut à l'élément.\n */\nexport function SetAttr(attributeName: string, value: Value) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: MayBeBnumElement, ..._args: any[]) {\n      const rtn = originalMethod.apply(this, _args);\n      _setAttribute(this, attributeName, value);\n\n      return rtn;\n    };\n  };\n}\n\n/**\n * @SetAttrs : Ajoute un attribut avec une valeur fixe à un élément.\n * @param attributeName Nom de l'attribut à ajouter.\n * @param value Valeur de l'attribut à définir.\n * @returns Un décorateur de méthode qui ajoute l'attribut à l'élément.\n */\nexport function SetAttrs(attribs: Record<string, string | boolean | number>) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: MayBeBnumElement, ..._args: any[]) {\n      if (this?.attrs) this.attrs(attribs);\n      else {\n        for (const [key, value] of Object.entries(attribs)) {\n          this.setAttribute(key, value as unknown as string);\n        }\n      }\n\n      return originalMethod.apply(this, _args);\n    };\n  };\n}\n\n/**\n * @SetAttr : Ajoute un attribut avec une valeur fixe à un élément.\n * @param attributeName Nom de l'attribut à ajouter.\n * @param value Valeur de l'attribut à définir.\n * @returns Un décorateur de méthode qui ajoute l'attribut à l'élément.\n */\nexport function InitAttr(attributeName: string, value: Value) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: MayBeBnumElement, ..._args: any[]) {\n      const rtn = originalMethod.apply(this, _args);\n\n      if (_getAttribute(this, attributeName) === null)\n        _setAttribute(this, attributeName, value);\n\n      return rtn;\n    };\n  };\n}\n\nfunction _setAttribute(\n  instance: MayBeBnumElement,\n  attributeName: string,\n  value: Value,\n): void {\n  if (instance?.attr) instance.attr(attributeName, value);\n  else instance.setAttribute(attributeName, value as unknown as string);\n}\n\nfunction _getAttribute(\n  instance: MayBeBnumElement,\n  attributeName: string,\n): Nullable<string> {\n  if (instance?.attr) return instance.attr(attributeName) as Nullable<string>;\n  else return instance.getAttribute(attributeName);\n}\n","/**\n * @Autobind : Lie automatiquement la méthode à l'instance.\n */\nexport function Autobind(\n  originalMethod: any,\n  context: ClassMethodDecoratorContext,\n) {\n  context.addInitializer(function (this: any) {\n    this[context.name] = originalMethod.bind(this);\n  });\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { Optional } from 'core/utils/types';\n\n/**\n * @Fire : Déclenche un événement personnalisé.\n * Utilise la méthode trigger() de BnumElement si elle existe (Fluent API),\n * sinon utilise le dispatchEvent standard.\n */\nexport function Fire(\n  eventName: string,\n  options: CustomEventInit = { bubbles: true, composed: true },\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: any, ...args: any[]) {\n      const result = originalMethod.apply(this, args);\n      const detail = result ?? args[0];\n\n      // Utilisation de trigger (BnumElement) ou dispatchEvent (Standard)\n      if (typeof this.trigger === 'function') {\n        this.trigger(eventName, detail, options);\n      } else {\n        this.dispatchEvent(new CustomEvent(eventName, { ...options, detail }));\n      }\n\n      return result;\n    };\n  };\n}\n\n/**\n * Interface pour les constructeurs d'événements.\n * Gère deux cas :\n * 1. La classe connaît son nom (new EventClass(options))\n * 2. Le nom est passé au décorateur (new EventClass(name, options))\n */\ntype EventConstructor<T extends CustomEvent> = new (...args: any[]) => T;\n\n/**\n * @CustomFire : Décorateur de méthode (Stage 3).\n * Déclenche un événement d'une classe spécifique lors de l'appel de la méthode.\n * * @param EventClass La classe de l'événement à instancier (doit étendre CustomEvent).\n * @param eventName Optionnel : Force un nom d'événement spécifique.\n * @param options Options d'initialisation (bubbles, composed, etc.).\n */\nexport function CustomFire<T extends CustomEvent>(\n  EventClass: EventConstructor<T>,\n  eventName?: string,\n  options: CustomEventInit = { bubbles: true, composed: true },\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: any, ...args: any[]) {\n      const result = originalMethod.apply(this, args);\n      const detail = result ?? args[0];\n      const eventInit = { ...options, detail };\n\n      const event = _____StCustomFire\n        .tryInitEvent(EventClass, eventName, eventInit)\n        .unwrapOr(new EventClass(result));\n\n      this.dispatchEvent(event);\n\n      return result;\n    };\n  };\n}\n\nabstract class _____StCustomFire {\n  @Risky()\n  static tryInitEvent<T extends CustomEvent<any>>(\n    EventClass: EventConstructor<T>,\n    eventName: Optional<string>,\n    eventInit: any,\n  ): Result<T> {\n    const event = eventName\n      ? new EventClass(eventName, eventInit)\n      : new EventClass(eventInit);\n    return Result.Ok(event);\n  }\n}\n","/**\n * @Self : Injecte la classe (le constructeur) dans la propriété.\n * Utilisable sur un champ simple : @Self _!: typeof MaClasse;\n */\nexport function Self(_value: undefined, context: ClassFieldDecoratorContext) {\n  if (context.kind !== 'field') {\n    throw new Error('@Self ne peut être utilisé que sur un champ (field).');\n  }\n\n  // On enregistre une fonction qui s'exécutera à la création de l'instance\n  context.addInitializer(function (this: any) {\n    // On assigne le constructeur à la propriété (ex: '_')\n    this[context.name] = this.constructor;\n  });\n}\n","import BnumElement from 'components/bnum-element';\n\nexport function Light() {\n  return function (target: Function, context: ClassDecoratorContext) {\n    if (context.kind !== 'class') {\n      throw new Error('@Light ne peut être utilisé que sur une classe.');\n    }\n\n    if (!(target.prototype instanceof BnumElement))\n      throw new Error(\n        '@Light ne peut être utiliser sur une classe qui hérite de BnumElement',\n      );\n\n    context.addInitializer(function () {\n      (this as any).__CONFIG_SHADOW__ = false;\n    });\n  };\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-function-type */\n/**\n * Décorateur de classe.\n * Indique que ce composant doit déclencher une mise à jour complète (`_p_update`)\n * à chaque modification d'un attribut observé.\n *  Cela évite d'avoir à surcharger manuellement `_p_isUpdateForAllAttributes`.\n * @example\n * ```tsx\n * // imports ...\n *\n * @Define({ ... })\n * @UpdateAll()\n * export class MyComponent extends BnumElementInternal { ... }\n * ```\n */\nexport function UpdateAll() {\n\treturn function (_: Function, context: ClassDecoratorContext) {\n\t\tif (context.kind !== 'class') {\n\t\t\tthrow new Error('@UpdateAll ne peut être utilisé que sur une classe.');\n\t\t}\n\n\t\tcontext.addInitializer(function () {\n\t\t\t(\n\t\t\t\tthis as unknown as { __CONFIG_UPDATE_ALL__: boolean }\n\t\t\t).__CONFIG_UPDATE_ALL__ = true;\n\t\t});\n\t};\n}\n","import { BnumConfig } from '../BnumConfig';\n\nconst TAG_PREFIX = BnumConfig.Get('tag_prefix')! as 'bnum';\n\nexport const TAG_ICON = `${TAG_PREFIX}-icon` as const;\nexport const TAG_BUTTON = `${TAG_PREFIX}-button` as const;\nexport const TAG_PRIMARY = `${TAG_PREFIX}-primary-button` as const;\nexport const TAG_SECONDARY = `${TAG_PREFIX}-secondary-button` as const;\nexport const TAG_DANGER = `${TAG_PREFIX}-danger-button` as const;\nexport const TAG_HELPER = `${TAG_PREFIX}-helper` as const;\nexport const TAG_PICTURE = `${TAG_PREFIX}-img` as const;\nexport const TAG_CARD_TITLE = `${TAG_PREFIX}-card-title` as const;\nexport const TAG_CARD = `${TAG_PREFIX}-card` as const;\nexport const TAG_CARD_EMAIL = `${TAG_PREFIX}-card-email` as const;\nexport const TAG_CARD_AGENDA = `${TAG_PREFIX}-card-agenda` as const;\nexport const TAG_CARD_ITEM = `${TAG_PREFIX}-card-item` as const;\nexport const TAG_CARD_ITEM_MAIL = `${TAG_PREFIX}-card-item-mail` as const;\nexport const TAG_CARD_ITEM_AGENDA = `${TAG_PREFIX}-card-item-agenda` as const;\nexport const TAG_CARD_LIST = `${TAG_PREFIX}-card-list` as const;\nexport const TAG_DATE = `${TAG_PREFIX}-date` as const;\nexport const TAG_ICON_BUTTON = `${TAG_PREFIX}-icon-button` as const;\nexport const TAG_COLUMN = `${TAG_PREFIX}-column` as const;\nexport const TAG_INPUT = `${TAG_PREFIX}-input` as const;\nexport const TAG_INPUT_DATE = `${TAG_INPUT}-date` as const;\nexport const TAG_INPUT_NUMBER = `${TAG_INPUT}-number` as const;\nexport const TAG_INPUT_SEARCH = `${TAG_INPUT}-search` as const;\nexport const TAG_INPUT_TEXT = `${TAG_INPUT}-text` as const;\nexport const TAG_INPUT_TIME = `${TAG_INPUT}-time` as const;\nexport const TAG_FOLDER = `${TAG_PREFIX}-folder` as const;\nexport const TAG_HIDE = `${TAG_PREFIX}-hide` as const;\nexport const TAG_FOLDER_LIST = `${TAG_PREFIX}-folder-list` as const;\nexport const TAG_HEADER = `${TAG_PREFIX}-header` as const;\nexport const TAG_SEGMENTED_ITEM = `${TAG_PREFIX}-segmented-item` as const;\nexport const TAG_SEGMENTED_CONTROL = `${TAG_PREFIX}-segmented-control` as const;\nexport const TAG_SELECT = `${TAG_PREFIX}-select` as const;\nexport const TAG_BADGE = `${TAG_PREFIX}-badge` as const;\nexport const TAG_FRAGMENT = `${TAG_PREFIX}-fragment` as const;\nexport const TAG_RADIO = `${TAG_PREFIX}-radio` as const;\nexport const TAG_RADIO_GROUP = `${TAG_PREFIX}-radio-group` as const;\nexport const TAG_TREE = `${TAG_PREFIX}-tree` as const;\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport style from './bnum-badge.less';\nimport { CustomDom } from '../../bnum-element';\nimport { Define } from '../../../core/decorators';\nimport { UpdateAll } from 'core/decorators/updateAll';\nimport { TAG_BADGE } from 'core/utils/constants/tags';\n\n//#region Types\nexport type BnumBadgeVariation = 'primary' | 'secondary' | 'danger';\n//#endregion Types\n\n//#region Global constants\nconst DATA_VALUE = 'value';\nconst DATA_VARIATION = 'variation';\n\nconst ATTR_VALUE = 'data-value';\nconst ATTR_VARIATION = 'data-variation';\nconst ATTR_CIRCLE = 'circle';\n\nconst VARIATION_PRIMARY = 'primary';\n// Not used currently\n// const VARIATION_SECONDARY = 'secondary';\n// const VARIATION_DANGER = 'danger';\n\nconst STATE_HAS_VALUE = 'has-value';\nconst STATE_NO_VALUE = 'no-value';\nconst STATE_IS_CIRCLE = 'is-circle';\nconst STATE_VARIATION_PREFIX = 'variation-';\n//#endregion Global constants\n\n/**\n * Badge d'information.\n *\n * @structure Badge classique\n * <bnum-badge data-value=\"Je suis un badge !\"></bnum-badge>\n *\n * @structure Badge avec un nombre\n * <bnum-badge data-value=\"9999\"></bnum-badge>\n *\n * @structure Arrondi forcé\n * <bnum-badge data-value=\"9999\" circle></bnum-badge>\n *\n * @structure Secondary\n * <bnum-badge data-value=\"42\" data-variation=\"secondary\" circle></bnum-badge>\n *\n * @structure Danger\n * <bnum-badge data-value=\"42\" data-variation=\"danger\" circle></bnum-badge>\n *\n * @state has-value - Le badge a une valeur.\n * @state no-value - Le badge n'a pas de valeur.\n * @state is-circle - Le badge est en mode cercle.\n * @state variation-primary - Le badge utilise la variation primaire.\n * @state variation-secondary - Le badge utilise la variation secondaire.\n * @state variation-danger - Le badge utilise la variation danger.\n *\n * @attr {string} data-value - Valeur affichée dans le badge.\n * @attr {'primary' | 'secondary' | 'danger'} (optional) (default:'primary') data-variation - Variation du badge.\n * @attr {any} (optional) circle - Indique si le badge doit être affiché en cercle.\n *\n * @cssvar {inline-block} --bnum-badge-display - Permet de surcharger la propriété CSS display du badge.\n * @cssvar {100px} --bnum-badge-border-radius - Permet de surcharger le rayon de bordure du badge.\n * @cssvar {10px} --bnum-badge-padding - Permet de surcharger le padding du badge.\n * @cssvar {100%} --bnum-badge-circle-border-radius - Permet de surcharger le rayon de bordure du badge en mode \"cercle\".\n * @cssvar {#000091} --bnum-badge-primary-color - Définit la couleur de fond du badge en variation \"primary\".\n * @cssvar {#f5f5fe} --bnum-badge-primary-text-color - Définit la couleur du texte du badge en variation \"primary\".\n * @cssvar {#ffffff} --bnum-badge-secondary-color - Définit la couleur de fond du badge en variation \"secondary\".\n * @cssvar {#000091} --bnum-badge-secondary-text-color - Définit la couleur du texte du badge en variation \"secondary\".\n * @cssvar {solid} --bnum-badge-type - Permet de surcharger le type de bordure (ex: solid, dashed) pour la variation \"secondary\".\n * @cssvar {thin} --bnum-badge-size - Permet de surcharger l’épaisseur de la bordure pour la variation \"secondary\".\n * @cssvar {#ce0500} --bnum-badge-danger-color - Définit la couleur de fond du badge en variation \"danger\".\n * @cssvar {#f5f5fe} --bnum-badge-danger-text-color - Définit la couleur du texte du badge en variation \"danger\".\n *\n */\n@Define({\n  styles: style,\n  tag: TAG_BADGE,\n})\n@UpdateAll()\nexport class HTMLBnumBadge extends BnumElementInternal {\n  //#region Private Fields\n  /**\n   * Valeur affichée dans le badge.\n   */\n  #_value: string = EMPTY_STRING;\n  /**\n   * Planificateur de mise à jour asynchrone.\n   */\n  #_updateSchduler: Nullable<Scheduler<number>> = null;\n  /**\n   * Élément span contenant la valeur du badge.\n   */\n  #_spanElement: Nullable<HTMLSpanElement> = null;\n  //#endregion Private Fields\n\n  //#region Getters/Setters\n  /**\n   * Récupère la valeur depuis l'attribut data-value.\n   */\n  get #_dataValue(): string {\n    return this.data(DATA_VALUE) || EMPTY_STRING;\n  }\n\n  /**\n   * Récupère la variation depuis l'attribut data-variation.\n   */\n  get #_dataVariation(): string {\n    return this.data(DATA_VARIATION) || VARIATION_PRIMARY;\n  }\n  /**\n   * Valeur affichée dans le badge.\n   */\n  get value(): string {\n    if (!this.alreadyLoaded) this.#_value = this.#_dataValue;\n    return this.#_value;\n  }\n\n  set value(value: string) {\n    if (!this.alreadyLoaded) this.removeAttribute(ATTR_VALUE);\n    this.#_value = value;\n\n    this.#_requestUpdate();\n  }\n\n  /**\n   * Variation de style du badge.\n   */\n  get variation(): string {\n    return this.#_dataVariation;\n  }\n\n  set variation(value: string) {\n    this.data(DATA_VARIATION, value);\n\n    this.#_requestUpdate();\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n\n    this.#_spanElement = this._p_createSpan();\n    container.appendChild(this.#_spanElement);\n\n    const force = true;\n    this.#_update(force);\n  }\n\n  /**\n   * Met à jour le composant lors d'un changement d'attribut.\n   */\n  protected _p_update(): void | Nullable<'break'> {\n    return this.#_update();\n  }\n  //#endregion Lifecycle\n\n  //#region Private Methods\n  /**\n   * Demande une mise à jour asynchrone du composant.\n   */\n  #_requestUpdate(): this {\n    (this.#_updateSchduler ??= new Scheduler<number>(() => {\n      this.#_update();\n    })).schedule(0);\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage du badge selon ses propriétés et attributs.\n   */\n  #_update(force: boolean = false): void {\n    if (!this.alreadyLoaded && !force) return;\n\n    this._p_clearStates();\n\n    const value = this.value;\n    this.#_spanElement!.textContent = value;\n\n    if (value !== EMPTY_STRING) this._p_addState(STATE_HAS_VALUE);\n    else this._p_addState(STATE_NO_VALUE);\n\n    if (this.hasAttribute(ATTR_CIRCLE)) this._p_addState(STATE_IS_CIRCLE);\n    this._p_addState(`${STATE_VARIATION_PREFIX}${this.variation}`);\n  }\n  //#endregion Private Methods\n\n  //#region Static Methods\n  /**\n   * Attributs observés pour ce composant.\n   */\n  protected static _p_observedAttributes(): string[] {\n    return [ATTR_CIRCLE];\n  }\n\n  /**\n   * Crée un badge via JavaScript.\n   * @param value Valeur à afficher\n   * @param options Options de création (cercle, variation)\n   */\n  static Create(\n    value: string,\n    {\n      circle = false,\n      variation = undefined,\n    }: {\n      circle?: boolean;\n      variation?: BnumBadgeVariation;\n    } = {},\n  ): HTMLBnumBadge {\n    const badge = document.createElement(this.TAG) as HTMLBnumBadge;\n\n    return badge\n      .attr(ATTR_VALUE, value)\n      .condAttr(circle, ATTR_CIRCLE, true)\n      .condAttr(variation !== undefined, ATTR_VARIATION, variation!);\n  }\n\n  /**\n   * Génère le HTML d'un badge.\n   * @param value Valeur à afficher\n   * @param attrs Attributs additionnels\n   */\n  static Write(value: string, attrs: Record<string, string> = {}): string {\n    const attributes = this._p_WriteAttributes(attrs);\n    return `<${this.TAG} ${ATTR_VALUE}=\"${value}\" ${attributes}></${this.TAG}>`;\n  }\n  //#endregion Static Methods\n}\n","/**\n * Événement personnalisé signalant le changement d'un élément.\n *\n * @template T Type du nouvel élément.\n * @template Y Type de l'ancien élément.\n * @template TCaller Type de l'élément ayant déclenché l'événement (doit hériter de HTMLElement).\n */\nexport default class ElementChangedEvent<T, Y, TCaller extends HTMLElement> extends CustomEvent<null> {\n  #_new: T;\n  #_old: Y;\n  #_caller: TCaller;\n\n  /**\n   * Crée une nouvelle instance d'ElementChangedEvent.\n   *\n   * @param type Le type de changement.\n   * @param newElement Le nouvel élément.\n   * @param oldElement L'ancien élément.\n   * @param caller L'élément ayant déclenché l'événement.\n   * @param initDict Options d'initialisation de l'événement.\n   */\n  constructor(\n    type: string,\n    newElement: T,\n    oldElement: Y,\n    caller: TCaller,\n    initDict: CustomEventInit<null> = {}\n  ) {\n    super(`custom:element-changed.${type}`, initDict);\n    this.#_new = newElement;\n    this.#_old = oldElement;\n    this.#_caller = caller;\n  }\n\n  /** Retourne le nouvel élément. */\n  get newElement(): T {\n    return this.#_new;\n  }\n\n  /** Retourne l'ancien élément. */\n  get oldElement(): Y {\n    return this.#_old;\n  }\n\n  /** Retourne l'élément qui a déclenché l'événement. */\n  get caller(): TCaller {\n    return this.#_caller;\n  }\n}","import ElementChangedEvent from 'core/utils/events/ElementChangedEvent';\nimport {\n  IconChangedEvent,\n  EVENT_ICON,\n  HTMLBnumButton,\n  LoadingStateChangedEvent,\n  IconPropType,\n  EVENT_ICON_PROP_CHANGED,\n  IconPropChangedEvent,\n  VariationChangedEvent,\n  EVENT_VARIATION,\n  LinkedClickEvent,\n} from '../internal';\n\nexport function OnIconChangeInitializer(\n  event: IconChangedEvent,\n  instance: HTMLBnumButton,\n) {\n  event.push((newValue, oldValue) => {\n    instance.dispatchEvent(\n      new ElementChangedEvent(EVENT_ICON, newValue, oldValue, instance),\n    );\n  });\n}\n\nexport function OnLoadingStateChangeInitializer(\n  event: LoadingStateChangedEvent,\n  instance: HTMLBnumButton,\n) {\n  event.push((instance as any)._p_onLoadingChange);\n}\n\nexport function OnIconPropChangeInitializer(\n  event: IconPropChangedEvent,\n  instance: HTMLBnumButton,\n) {\n  event.push((type: IconPropType, newValue: string) => {\n    instance.dispatchEvent(\n      new CustomEvent(EVENT_ICON_PROP_CHANGED, {\n        detail: { type, newValue },\n      }),\n    );\n  });\n}\n\nexport function OnVariationChangeInitializer(\n  event: VariationChangedEvent,\n  instance: HTMLBnumButton,\n) {\n  event.push((newValue, oldValue) => {\n    instance.dispatchEvent(\n      new ElementChangedEvent(EVENT_VARIATION, newValue, oldValue, instance),\n    );\n  });\n}\n\nexport function OnClickInitializer(\n  event: LinkedClickEvent,\n  instance: HTMLBnumButton,\n) {\n  instance.addEventListener('click', () => {\n    event.call();\n  });\n}\n","import { AttributeMapping } from './creates';\n\n// --- Component Identity ---\nexport const ICON_LOADER = 'progress_activity';\n\n// --- CSS Classes ---\nexport const CLASS_WRAPPER = 'wrapper';\nexport const CLASS_SLOT = 'slot';\nexport const CLASS_ICON = 'icon';\n\n// --- Attributes ---\nexport const ATTR_ROUNDED = 'rounded';\nexport const ATTR_LOADING = 'loading';\nexport const ATTR_DISABLED = 'disabled';\nexport const ATTR_VARIATION = 'variation'; // or 'data-variation'\nexport const ATTR_ICON = 'icon';\nexport const ATTR_ICON_POS = 'icon-pos';\nexport const ATTR_ICON_MARGIN = 'icon-margin';\nexport const ATTR_HIDE = 'hide';\nexport const ATTR_CLICK = 'click';\n\n// --- States (Internal/CSS) ---\nexport const STATE_ICON = 'icon';\nexport const STATE_WITHOUT_ICON = 'without-icon';\nexport const STATE_ROUNDED = 'rounded';\nexport const STATE_LOADING = 'loading';\nexport const STATE_DISABLED = 'disabled';\n\n// --- Events ---\nexport const EVENT_ICON = 'icon'; // Suffix\nexport const EVENT_VARIATION = 'variation'; // Suffix\nexport const EVENT_ICON_PROP_CHANGED = 'custom:icon.prop.changed';\nexport const EVENT_LOADING_STATE_CHANGED = 'custom:loading';\n\n// --- Defaults & CSS Vars ---\nexport const DEFAULT_CSS_VAR_ICON_MARGIN =\n  'var(--custom-bnum-button-icon-margin, 10px)';\nexport const ICON_PROP_POS = 'pos';\nexport const CSS_PROPERTY_ICON_MARGIN = '--bnum-button-icon-gap';\n\n// --- Logic Helpers ---\n\n// Definition for attribute mapping in Factory\nexport const BUTTON_ATTRIBUTE_MAP: ReadonlyArray<AttributeMapping> = [\n  { prop: 'rounded', attr: ATTR_ROUNDED, isBool: true },\n  { prop: 'loading', attr: ATTR_LOADING, isBool: true },\n  { prop: 'icon', attr: `data-${ATTR_ICON}` },\n  { prop: 'iconPos', attr: `data-${ATTR_ICON_POS}` },\n  { prop: 'variation', attr: `data-${ATTR_VARIATION}` },\n  { prop: 'hideOn', attr: `data-${ATTR_HIDE}` },\n  { prop: 'iconMargin', attr: `data-${ATTR_ICON_MARGIN}` },\n];\n\n// Default Options for Factory\nexport const DEFAULT_BUTTON_OPTIONS = {\n  text: '',\n  iconPos: 'right', // Assumes 'right' is default in enum\n  rounded: false,\n  loading: false,\n} as const;\n","import JsEvent from '@rotomeca/event';\nimport { HTMLBnumIcon } from 'components/atoms/icon/bnum-icon';\nimport { Nullable, ValueOf } from 'core/utils/types';\n\nexport const ButtonVariation = {\n  PRIMARY: 'primary',\n  SECONDARY: 'secondary',\n  TERTIARY: 'tertiary',\n  DANGER: 'danger',\n} as const;\n\nexport const IconPosition = {\n  LEFT: 'left',\n  RIGHT: 'right',\n} as const;\n\nexport const HideTextOnLayoutSize = {\n  SMALL: 'small',\n  TOUCH: 'touch',\n} as const;\n\n/**\n * Type représentant les variations possibles du bouton.\n */\nexport type ButtonVariation = ValueOf<typeof ButtonVariation>;\n\n/**\n * Position possible de l'icône dans le bouton.\n */\nexport type IconPosition = ValueOf<typeof IconPosition>;\n/**\n * Taille de layout sur laquelle le texte doit être caché.\n */\nexport type HideTextOnLayoutSize = ValueOf<typeof HideTextOnLayoutSize>;\n\nexport type IconChangedEvent = JsEvent<\n  (newIcon: string, oldIcon: string) => void\n>;\n\nexport type LoadingStateChangedEvent = JsEvent<(state: boolean) => void>;\n\nexport type IconPropType = 'margin' | 'pos';\n\nexport type IconPropChangedEvent = JsEvent<\n  (type: IconPropType, newValue: string) => void\n>;\n\nexport type VariationChangedEvent = JsEvent<\n  (newVariation: ButtonVariation, oldVariation: ButtonVariation) => void\n>;\n\nexport type LinkedClickEvent = JsEvent<(link: string) => void>;\n\nexport type BnumButtonUi = {\n  wrapper: HTMLDivElement;\n  icon: HTMLBnumIcon;\n};\n\nexport type BnumButtonCreateOptions = {\n  text?: string;\n  icon?: string | null;\n  iconPos?: IconPosition;\n  iconMargin?: string | null | 0;\n  variation?: ButtonVariation | null;\n  rounded?: boolean;\n  loading?: boolean;\n  hideOn?: Nullable<HideTextOnLayoutSize>;\n};\n","// core/jsx/index.ts\n\nimport { EMPTY_STRING } from '@rotomeca/utils';\n\nconst VOID_TAGS = new Set([\n  'area',\n  'base',\n  'br',\n  'col',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr',\n]);\n\nexport function h(tag: any, props: any, ...argsChildren: any[]) {\n  if (typeof tag === 'function' && 'TAG' in tag) {\n    tag = (tag as any).TAG;\n  }\n\n  if (typeof tag === 'function') {\n    const children = argsChildren.length ? argsChildren : props?.children || [];\n    return tag({ ...props, children });\n  }\n\n  let attrs = EMPTY_STRING;\n  if (props) {\n    for (const key in props) {\n      const value = props[key];\n\n      if (key === 'children' || value == null || value === false) continue;\n\n      const name = key === 'className' ? 'class' : key;\n\n      if (key === 'style' && typeof value === 'object') {\n        let styleStr = EMPTY_STRING;\n        for (const sKey in value) {\n          styleStr += `${sKey}:${value[sKey]};`;\n        }\n        attrs += ` ${name}=\"${styleStr}\"`;\n      } else if (value === true) {\n        attrs += ` ${name}`;\n      } else {\n        attrs += ` ${name}=\"${value}\"`;\n      }\n    }\n  }\n\n  const open = `<${tag}${attrs}>`;\n  if (VOID_TAGS.has(tag as string)) return open;\n\n  const rawChildren = argsChildren.length > 0 ? argsChildren : props?.children;\n  const content = renderChildren(rawChildren);\n\n  return `${open}${content}</${tag}>`;\n}\n\n// Helper récursif ultra-rapide pour les enfants\nfunction renderChildren(child: any): string {\n  if (child == null || child === false || child === true) return EMPTY_STRING;\n\n  if (Array.isArray(child)) {\n    let str = EMPTY_STRING;\n    for (let i = 0; i < child.length; i++) {\n      str += renderChildren(child[i]);\n    }\n    return str;\n  }\n\n  return String(child);\n}\n\nexport const Fragment = (props: any) => {\n  return props.children ? renderChildren(props.children) : EMPTY_STRING;\n};\n","/**\n * RegEx qui permet de vérifier si un texte possède uniquement des charactères alphanumériques.\n * @constant\n * @default /^[0-9a-zA-Z]+$/\n */\nexport const REG_ALPHANUM = /^[0-9a-zA-Z]+$/;\nexport const ISO_FORMAT_REGEX = /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/;\nexport const REG_MAILTO = /^mailto:/;\nexport const REG_MAIL_NAME_GLOBAL = /(^<|>$)/g;\nexport const REG_LIGHT_PICTURE_NAME = /(-light)\\.(([\\w\\d]+)|\\1?.+)$/;\nexport const REG_XSS_SAFE = /^[-.\\w\\s%()]+$/;\n","import JsEvent, { JsCircularEvent } from '@rotomeca/event';\nimport { Nullable } from '../utils/types';\nimport Log from 'core/utils/Log';\n\n/**\n * Clé Symbol utilisée pour stocker la Map de cache des listeners sur l'instance cible.\n * @internal\n */\nconst listenersCacheKey = Symbol('listenersCache');\n\n/**\n * Options internes passées à la fonction helper `_get`.\n * @template T Type de l'instance cible.\n * @template TCallback Type de la fonction de callback de l'événement.\n */\ntype GetListenerOptions<T, TCallback extends Function> = {\n  /** L'instance de la classe contenant l'accesseur décoré. */\n  target: T;\n  /** La clé unique identifiant la propriété de l'événement dans le cache. */\n  listenerCacheKey: symbol;\n  /** Fonction d'initialisation optionnelle exécutée à la création de l'événement. */\n  initializator?: Nullable<CallbackInitializator<TCallback, T>>;\n  /** Si true, instancie un `JsCircularEvent`. */\n  circular?: boolean;\n};\n\n/**\n * Définit la signature de la fonction d'initialisation d'un événement.\n * Permet de configurer l'événement (ex: ajouter des abonnés par défaut) lors de sa création.\n *\n * @template TCallback Signature de la fonction callback de l'événement.\n * @template This Type de l'instance de la classe parente.\n * @param event L'instance de l'événement nouvellement créée.\n * @param instance L'instance de la classe parente.\n */\nexport type CallbackInitializator<TCallback extends Function, This> = (\n  event: JsEvent<TCallback>,\n  instance: This,\n) => void;\n\n/**\n * Options de configuration pour le décorateur {@link Listener}.\n */\nexport type ListenerDefaultOptions = {\n  /**\n   * Si `true` (par défaut), l'événement n'est instancié que lors du premier accès (getter).\n   * Si `false`, l'événement est instancié immédiatement lors de l'initialisation de la classe parente.\n   * @default true\n   */\n  lazy?: boolean;\n  /**\n   * Si `true`, crée une instance de {@link JsCircularEvent} au lieu de {@link JsEvent}.\n   * Utile pour gérer les dépendances circulaires ou les topologies d'événements complexes.\n   * @default false\n   */\n  circular?: boolean;\n};\n\n/**\n * Décorateur d'accesseur automatique pour gérer des instances de `JsEvent`.\n *\n * Ce décorateur transforme un accesseur (auto-accessor) en une propriété gérée,\n * assurant une instanciation unique (Singleton par propriété) et une gestion du cache.\n * Il empêche également l'écrasement accidentel de l'événement via le setter.\n *\n * @template TCallback Signature de la fonction callback de l'événement.\n * @template This Type de l'instance de la classe parente.\n *\n * @param initializator - (Optionnel) Fonction exécutée une seule fois à la création de l'événement pour le configurer.\n * @param options - (Optionnel) Configuration du comportement du listener (lazy loading, type d'événement).\n *\n * @returns Le décorateur d'accesseur de classe conforme à la norme ES Decorators (Stage 3).\n *\n * @throws {Error} Si une tentative d'assignation (setter) est effectuée sur la propriété décorée.\n *\n * @example\n * ```ts\n * class MyComponent {\n * @Listener((evt, instance) => evt.attach(instance.handleAction), { lazy: true })\n * accessor onAction: JsEvent<(val: string) => void>;\n *\n *  private handleAction(val: string) {\n *    console.log(val);\n *  }\n * }\n * ```\n */\nexport function Listener<TCallback extends Function, This = any>(\n  initializator?: Nullable<CallbackInitializator<TCallback, This>>,\n  options?: ListenerDefaultOptions,\n) {\n  const { circular = false, lazy = true } = options ?? {};\n\n  return function (\n    _target: ClassAccessorDecoratorTarget<This, JsEvent<TCallback>>,\n    context: ClassAccessorDecoratorContext<This, JsEvent<TCallback>>,\n  ): ClassAccessorDecoratorResult<This, JsEvent<TCallback>> {\n    const methodName = String(context.name);\n    const listenerCacheKey = Symbol(`listener_${methodName}`);\n    const args = { listenerCacheKey, circular, initializator };\n\n    if (!lazy) {\n      context.addInitializer(function (this: This) {\n        _get<This, TCallback>({ target: this, ...args });\n      });\n    }\n\n    return {\n      get(this: This): JsEvent<TCallback> {\n        return _get<This, TCallback>({ target: this, ...args });\n      },\n      set(_value) {\n        throw new Error(\n          `Cannot set decorated accessor ${String(context.name)}. It is managed by the @Listener decorator.`,\n        );\n      },\n    };\n  };\n}\n\n/**\n * Helper interne pour récupérer ou créer l'instance de l'événement.\n * Imémente le principe DRY pour le chargement immédiat (eager) et différé (lazy).\n *\n * @template T Type de l'instance cible.\n * @template TCallback Type du callback de l'événement.\n * @param options Objet contenant les paramètres de récupération/création.\n * @returns L'instance de l'événement stockée dans le cache.\n * @throws {Error} Si l'initializator à échoué\n * @internal\n */\nfunction _get<T, TCallback extends Function>(\n  options: GetListenerOptions<T, TCallback>,\n): JsEvent<TCallback> {\n  const { target: self, listenerCacheKey, circular, initializator } = options;\n\n  const cache = ((self as any)[listenersCacheKey] ??= new Map<\n    Symbol,\n    JsEvent<TCallback>\n  >());\n  if (!cache.has(listenerCacheKey)) {\n    const event = circular\n      ? new JsCircularEvent<TCallback>()\n      : new JsEvent<TCallback>();\n\n    if (initializator && initializator.name !== NoInitListener.name) {\n      try {\n        initializator(event, self);\n      } catch (error) {\n        Log.error(\n          '@Listener',\n          `Failed to initialize event for ${String(listenerCacheKey)}`,\n          error,\n          options,\n        );\n\n        throw error;\n      }\n    }\n\n    cache.set(listenerCacheKey, event);\n  }\n\n  return cache.get(listenerCacheKey)!;\n}\n\n/**\n * Fonction \"No-op\" (No Operation) servant de placeholder sémantique.\n *\n * Utilisez cette fonction comme premier argument du décorateur {@link Listener}\n * lorsque vous n'avez aucune logique d'initialisation à fournir, mais que vous\n * devez passer un objet d'options en second argument.\n *\n * Cela améliore la lisibilité du code et l'intention par rapport à l'utilisation de `null` ou `() => {}`.\n *\n * @example\n * ```ts\n * class GraphNode {\n * // On souhaite activer le mode 'circular', sans logique d'initialisation spécifique.\n * @Listener(NoInitListener, { circular: true })\n * accessor links: JsEvent<LinkCallback>;\n * }\n * ```\n */\nexport function NoInitListener() {}\n","export const EVENT_ICON_CHANGED: string = 'icon';\nexport const DATA_ICON: string = 'icon';\nexport const ATTRIBUTE_DATA_ICON: string = `data-${DATA_ICON}`;\nexport const ATTRIBUTE_CLASS: string = 'class';\n","import JsEvent from '@rotomeca/event';\nimport BnumElement from 'components/bnum-element';\nimport ElementChangedEvent from 'core/utils/events/ElementChangedEvent';\nimport { EVENT_ICON_CHANGED } from './constants';\n\nexport function OnIconChangeInitializer(\n  event: JsEvent<(newIcon: string, oldIcon: string) => void>,\n  self: BnumElement,\n) {\n  event.add('default', (newIcon: string, oldIcon: string) => {\n    self.dispatchEvent(\n      new ElementChangedEvent(EVENT_ICON_CHANGED, newIcon, oldIcon, self),\n    );\n  });\n}\n","import JsEvent from '@rotomeca/event';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { TAG_ICON } from '../../../core/utils/constants/tags';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { Define, Self } from '../../../core/decorators';\nimport { Listener } from 'core/decorators/listener';\nimport { OnIconChangeInitializer } from './bnum-icon.internal/listeners';\nimport { DATA_ICON } from './bnum-icon.internal/constants';\nimport symbols from '../../../core/styles/material-symbols.css';\nimport style from './bnum-icon.less';\n\n/**\n * Classe CSS utilisée pour les icônes Material Symbols.\n */\nconst ICON_CLASS = 'material-symbols-outlined';\n\n/**\n * Feuille de style CSS pour les icônes Material Symbols.\n */\nconst SYMBOLS = BnumElement.ConstructCSSStyleSheet(\n  symbols.replaceAll(`.${ICON_CLASS}`, ':host'),\n);\n\nconst STYLE = BnumElement.ConstructCSSStyleSheet(style);\n\n/**\n * Composant personnalisé \"bnum-icon\" pour afficher une icône Material Symbol.\n *\n * Ce composant permet d'afficher une icône en utilisant le nom de l'icône Material Symbol.\n * Le nom peut être défini via le contenu du slot ou via l'attribut `data-icon`.\n *\n * @example\n * <bnum-icon>home</bnum-icon>\n * <bnum-icon data-icon=\"search\"></bnum-icon>\n *\n * @slot (default) - Nom de l'icône material symbol.\n *\n * @event {unknown} custom:element-changed:icon - Déclenché lors du changement d'icône.\n */\n@Define({ tag: TAG_ICON })\nexport class HTMLBnumIcon extends BnumElementInternal {\n  //#region Private fields\n  static #_fontPromise: Promise<void> | null = null;\n  #_updateScheduler: Nullable<Scheduler<string>> = null;\n  //#endregion Private fields\n\n  //#region Getter/setter\n  /** Référence à la classe HTMLBnumIcon */\n  @Self _!: typeof HTMLBnumIcon;\n\n  /**\n   * Événement déclenché lors du changement d'icône. (via la propriété icon)\n   */\n  @Listener(OnIconChangeInitializer, { lazy: false })\n  accessor oniconchanged!: JsEvent<(newIcon: string, oldIcon: string) => void>;\n\n  /**\n   * Obtient le nom de l'icône actuellement affichée.\n   * @returns {string} Le nom de l'icône.\n   */\n  get icon(): string {\n    const icon =\n      this.textContent?.trim?.() ||\n      (this.data(DATA_ICON) as string) ||\n      EMPTY_STRING;\n\n    return icon;\n  }\n\n  /**\n   * Définit le nom de l'icône à afficher.\n   * Déclenche l'événement oniconchanged si la valeur change.\n   * @param {string | null} value - Le nouveau nom de l'icône.\n   * @throws {Error} Si la valeur n'est pas une chaîne valide.\n   */\n  set icon(value: string | null) {\n    if (value !== null) {\n      if (typeof value === 'string' && /^[\\w-]+$/.test(value)) {\n        const oldValue = this.icon;\n        this.data(DATA_ICON, value);\n\n        this.#_requestUpdateDOM(value);\n\n        this.oniconchanged.call(value, oldValue);\n      } else {\n        throw new Error('Icon must be a valid string.');\n      }\n    }\n  }\n  //#endregion Getter/setter\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant HTMLBnumIcon.\n   * Initialise les écouteurs d'attributs et l'événement oniconchanged.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Retourne les feuilles de style à appliquer dans le Shadow DOM.\n   * @returns {CSSStyleSheet[]} Les feuilles de style.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SYMBOLS, STYLE];\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   * @param {ShadowRoot} container - Le conteneur du Shadow DOM.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    container.appendChild(this._p_createSlot());\n\n    const icon = this.data<string>(DATA_ICON);\n    if (icon) this.#_updateIcon(icon);\n\n    if (!this.hasAttribute('aria-hidden') && !this.hasAttribute('aria-label')) {\n      this.setAttribute('aria-hidden', 'true');\n\n      this.#_checkAndLoadFont();\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  async #_checkAndLoadFont() {\n    const FONT_SPEC = '24px \"Material Symbols Outlined\"';\n\n    // Optimisation : On ne lance le chargement qu'une fois globalement\n    if (!document.fonts.check(FONT_SPEC)) {\n      this._p_addState('loading');\n\n      if (!this._.#_fontPromise) {\n        this._.#_fontPromise = document.fonts.load(FONT_SPEC).then(() => {});\n      }\n\n      await this._.#_fontPromise;\n      this._p_removeState('loading');\n    }\n  }\n\n  /**\n   * Demande une mise à jour du DOM pour l'icône.\n   * @param {string} icon - Nom de l'icône.\n   * @returns {this}\n   * @private\n   */\n  #_requestUpdateDOM(icon: string): this {\n    this.#_updateScheduler ??= new Scheduler<string>(\n      (icon: Nullable<string>) => {\n        this.#_updateIcon(icon!);\n      },\n    );\n    this.#_updateScheduler.schedule(icon);\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage de l'icône.\n   * @param {string} icon - Nom de l'icône.\n   * @private\n   */\n  #_updateIcon(icon: string): void {\n    this.textContent = icon;\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * Crée une nouvelle instance de HTMLBnumIcon avec l'icône spécifiée.\n   * @param {string} icon - Le nom de l'icône à utiliser.\n   * @returns {HTMLBnumIcon} L'élément créé.\n   */\n  static Create(icon: string): HTMLBnumIcon {\n    const element = this.EMPTY;\n    element.icon = icon;\n    return element;\n  }\n\n  static Write(icon: string, attribs: Record<string, string> = {}): string {\n    return <HTMLBnumIcon data-icon={icon} {...attribs}></HTMLBnumIcon>;\n  }\n\n  /**\n   * Retourne un élément HTMLBnumIcon vide.\n   * @returns {HTMLBnumIcon}\n   */\n  static get EMPTY(): HTMLBnumIcon {\n    return document.createElement(this.TAG) as HTMLBnumIcon;\n  }\n\n  /**\n   * Retourne la classe CSS utilisée pour les icônes Material Symbols.\n   * @returns {string}\n   */\n  static get HTML_CLASS(): string {\n    return ICON_CLASS;\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'home'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get HOME(): HTMLBnumIcon {\n    return this.Create('home');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'search'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get SEARCH(): HTMLBnumIcon {\n    return this.Create('search');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'settings'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get SETTINGS(): HTMLBnumIcon {\n    return this.Create('settings');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'person'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get USER(): HTMLBnumIcon {\n    return this.Create('person');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'mail'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get MAIL(): HTMLBnumIcon {\n    return this.Create('mail');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'close'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get CLOSE(): HTMLBnumIcon {\n    return this.Create('close');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'check'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get CHECK(): HTMLBnumIcon {\n    return this.Create('check');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'warning'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get WARNING(): HTMLBnumIcon {\n    return this.Create('warning');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'info'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get INFO(): HTMLBnumIcon {\n    return this.Create('info');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'delete'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get DELETE(): HTMLBnumIcon {\n    return this.Create('delete');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'add'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get ADD(): HTMLBnumIcon {\n    return this.Create('add');\n  }\n  //#endregion Static methods\n}\n","// core/decorators/ui.ts\nexport function UI(\n  selectorMap: Record<string, string>,\n  options?: { shadowRoot?: boolean },\n) {\n  const { shadowRoot = true } = options || {};\n\n  return function <T extends HTMLElement, V extends object>(\n    target: ClassAccessorDecoratorTarget<T, V>,\n    context: ClassAccessorDecoratorContext<T, V>,\n  ) {\n    const name = String(context.name);\n    // Symbole pour stocker l'objet UI une fois créé\n    const uiCacheKey = Symbol(name);\n\n    return {\n      get(this: T): V {\n        // 1. Si l'objet UI existe déjà, on le retourne\n        if ((this as any)[uiCacheKey]) {\n          return (this as any)[uiCacheKey];\n        }\n\n        const root = shadowRoot ? this.shadowRoot || this : this;\n\n        // 2. On crée un objet vide\n        const uiObject: any = {};\n\n        // 3. On utilise un Map interne pour stocker les résultats des querySelector\n        //    pour ne pas les refaire à chaque accès (Cache granulaire)\n        const domCache = new Map<string, Element | null>();\n\n        // 4. On définit dynamiquement des getters pour chaque clé\n        for (const [key, selector] of Object.entries(selectorMap)) {\n          Object.defineProperty(uiObject, key, {\n            configurable: true,\n            enumerable: true,\n            get: () => {\n              // A. Si on a déjà cherché cet élément précis, on le rend\n              if (domCache.has(key)) {\n                return domCache.get(key);\n              }\n\n              // B. Sinon, on fait le querySelector (LAZY)\n              const element = root.querySelector(selector);\n\n              // C. On le met en cache\n              domCache.set(key, element);\n\n              return element;\n            },\n            // Permet d'écraser manuellement si besoin : this.#_ui.icon = ...\n            set: (value: Element | null) => {\n              domCache.set(key, value);\n            },\n          });\n        }\n\n        // 5. On stocke l'objet configuré sur l'instance et on le retourne\n        (this as any)[uiCacheKey] = uiObject;\n        return uiObject as V;\n      },\n    };\n  };\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { TAG_BUTTON } from '../../../core/utils/constants/tags';\nimport { REG_XSS_SAFE } from '../../../core/utils/constants/regexp';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport style from './bnum-button.less';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable, Optional } from '../../../core/utils/types';\nimport { Autobind, Define, Fire, SetAttr } from '../../../core/decorators';\nimport {\n  ButtonVariation,\n  IconPosition,\n  HideTextOnLayoutSize,\n  BnumButtonCreateOptions,\n  IconChangedEvent,\n  LoadingStateChangedEvent,\n  IconPropChangedEvent,\n  VariationChangedEvent,\n  LinkedClickEvent,\n  OnClickInitializer,\n  OnIconChangeInitializer,\n  OnIconPropChangeInitializer,\n  OnLoadingStateChangeInitializer,\n  OnVariationChangeInitializer,\n  CLASS_WRAPPER,\n  CLASS_SLOT,\n  CLASS_ICON,\n  ATTR_VARIATION,\n  ATTR_ICON,\n  ATTR_ICON_POS,\n  ICON_PROP_POS,\n  ATTR_ICON_MARGIN,\n  DEFAULT_CSS_VAR_ICON_MARGIN,\n  CSS_PROPERTY_ICON_MARGIN,\n  ATTR_HIDE,\n  STATE_ROUNDED,\n  STATE_LOADING,\n  STATE_DISABLED,\n  STATE_ICON,\n  STATE_WITHOUT_ICON,\n  ATTR_ROUNDED,\n  ATTR_LOADING,\n  ATTR_DISABLED,\n  EVENT_LOADING_STATE_CHANGED,\n  DEFAULT_BUTTON_OPTIONS,\n  BUTTON_ATTRIBUTE_MAP,\n  BnumButtonUi,\n} from './internal';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { Listener } from 'core/decorators/listener';\nimport { ErrorPath, Result, Risky, RiskyPath } from '@rotomeca/rop';\nimport Log from 'core/utils/Log';\nimport { UI } from 'core/decorators/ui';\n\n//#region External Constants\n// Constantes pour les tags des différents types de boutons\n/**\n * Icône de chargement utilisée dans le bouton.\n */\nconst ICON_LOADER = 'progress_activity';\n//#endregion External Constants\n\n//#region Template\nconst TEMPLATE = (\n  <div class={CLASS_WRAPPER}>\n    <span class={CLASS_SLOT}>\n      <slot></slot>\n    </span>\n    <HTMLBnumIcon hidden=\"true\" class={CLASS_ICON}></HTMLBnumIcon>\n  </div>\n);\n//#endregion Template\n\n//#region Documentation\n/**\n * Composant bouton principal de la bibliothèque Bnum.\n * Gère les variations, l'icône, l'état de chargement, etc.\n *\n * @structure Bouton primaire\n * <bnum-button data-variation=\"primary\">Texte du bouton</bnum-button>\n *\n * @structure Bouton secondaire\n * <bnum-button data-variation=\"secondary\">Texte du bouton</bnum-button>\n *\n * @structure Bouton danger\n * <bnum-button data-variation=\"danger\">Texte du bouton</bnum-button>\n *\n * @structure Bouton avec icône\n * <bnum-button data-icon=\"home\">Texte du bouton</bnum-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-button loading>Texte du bouton</bnum-button>\n *\n * @structure Bouton arrondi\n * <bnum-button rounded>Texte du bouton</bnum-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-button>\n *\n * @slot (default) - Contenu du bouton (texte, HTML, etc.)\n *\n * @state loading - Actif si le bouton est en état de chargement\n * @state rounded - Actif si le bouton est arrondi\n * @state disabled - Actif si le bouton est désactivé\n * @state icon - Actif si le bouton contient une icône\n * @state without-icon - Actif si le bouton ne contient pas d'icône\n * @state icon-pos-left - Actif si l'icône est positionnée à gauche\n * @state icon-pos-right - Actif si l'icône est positionnée à droite\n * @state hide-text-on-small - Actif si le texte est caché sur les petits layouts\n * @state hide-text-on-touch - Actif si le texte est caché sur les layouts tactiles\n * @state primary - Actif si le bouton est de type primaire\n * @state secondary - Actif si le bouton est de type secondaire\n * @state tertiary - Actif si le bouton est de type tertiaire\n * @state danger - Actif si le bouton est de type danger\n *\n * @attr {boolean | undefined} (optional) rounded - Rend le bouton arrondi\n * @attr {boolean | undefined} (optional) loading - Met le bouton en état de chargement et le désactive\n * @attr {boolean | undefined} (optional) disabled - Désactive le bouton\n * @attr {Optional<ButtonVariation>} (optional) (default: ButtonVariation.PRIMARY) data-variation - Variation du bouton (primary, secondary, etc.)\n * @attr {string | undefined} (optional) data-icon - Icône affichée dans le bouton\n * @attr {IconPosition | undefined} (optional) (default: IconPosition.RIGHT) data-icon-pos - Position de l'icône (gauche ou droite)\n * @attr {string | undefined} (optional) (default: var（--custom-bnum-button-icon-margin, 10px）) data-icon-margin - Marge de l'icône (gauche, droite)\n * @attr {HideTextOnLayoutSize | undefined} (optional) data-hide - Taille de layout pour cacher le texte\n *\n * @event {ElementChangedEvent} custom:element-changed.variation - Événement déclenché lors du changement de variation du bouton.\n * @event {ElementChangedEvent} custom:element-changed.icon - Événement déclenché lors du changement d'icône.\n * @event {CustomEvent<{ type: string, newValue: boolean | string }>} custom:icon.prop.changed - Événement déclenché lors du changement de propriété de l'icône.\n * @event {CustomEvent<{ state: boolean }>} custom:loading - Événement déclenché lors du changement d'état de chargement.\n *\n * @cssvar {inline-block} --bnum-button-display - Définit le type d'affichage du bouton\n * @cssvar {6px 10px} --bnum-button-padding - Définit le padding interne du bouton\n * @cssvar {0} --bnum-button-border-radius - Définit l'arrondi des coins du bouton\n * @cssvar {pointer} --bnum-button-cursor - Définit le curseur de la souris au survol du bouton\n * @cssvar {5px} --bnum-button-rounded-border-radius - Arrondi des coins pour le bouton arrondi\n * @cssvar {7.5px} --bnum-button-without-icon-padding-top - Padding top si le bouton n'a pas d'icône\n * @cssvar {7.5px} --bnum-button-without-icon-padding-bottom - Padding bottom si le bouton n'a pas d'icône\n * @cssvar {var(--bnum-color-primary)} --bnum-button-primary-background-color - Couleur de fond du bouton (état primaire)\n * @cssvar {var(--bnum-text-on-primary)} --bnum-button-primary-text-color - Couleur du texte du bouton (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-border-color)} --bnum-button-primary-border - Bordure du bouton (état primaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-primary-border-color - Couleur de la bordure (état primaire)\n * @cssvar {var(--bnum-color-primary-hover)} --bnum-button-primary-hover-background-color - Couleur de fond au survol (état primaire)\n * @cssvar {var(--bnum-text-on-primary-hover)} --bnum-button-primary-hover-text-color - Couleur du texte au survol (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-hover-border-color)} --bnum-button-primary-hover-border - Bordure au survol (état primaire)\n * @cssvar {var(--bnum-color-primary-hover)} --bnum-button-primary-hover-border-color - Couleur de la bordure au survol (état primaire)\n * @cssvar {var(--bnum-color-primary-active)} --bnum-button-primary-active-background-color - Couleur de fond lors du clic (état primaire)\n * @cssvar {var(--bnum-text-on-primary-active)} --bnum-button-primary-active-text-color - Couleur du texte lors du clic (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-active-border-color)} --bnum-button-primary-active-border - Bordure lors du clic (état primaire)\n * @cssvar {var(--bnum-color-primary-active)} --bnum-button-primary-active-border-color - Couleur de la bordure lors du clic (état primaire)\n * @cssvar {var(--bnum-color-secondary)} --bnum-button-secondary-background-color - Couleur de fond (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary)} --bnum-button-secondary-text-color - Couleur du texte (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-border-color)} --bnum-button-secondary-border - Bordure (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-border-color - Couleur de la bordure (état secondaire)\n * @cssvar {var(--bnum-color-secondary-hover)} --bnum-button-secondary-hover-background-color - Couleur de fond au survol (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary-hover)} --bnum-button-secondary-hover-text-color - Couleur du texte au survol (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-hover-border-color)} --bnum-button-secondary-hover-border - Bordure au survol (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-hover-border-color - Couleur de la bordure au survol (état secondaire)\n * @cssvar {var(--bnum-color-secondary-active)} --bnum-button-secondary-active-background-color - Couleur de fond lors du clic (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary-active)} --bnum-button-secondary-active-text-color - Couleur du texte lors du clic (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-active-border-color)} --bnum-button-secondary-active-border - Bordure lors du clic (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-active-border-color - Couleur de la bordure lors du clic (état secondaire)\n * @cssvar {var(--bnum-color-danger)} --bnum-button-danger-background-color - Couleur de fond (état danger)\n * @cssvar {var(--bnum-text-on-danger)} --bnum-button-danger-text-color - Couleur du texte (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-border-color)} --bnum-button-danger-border - Bordure (état danger)\n * @cssvar {var(--bnum-color-danger)} --bnum-button-danger-border-color - Couleur de la bordure (état danger)\n * @cssvar {var(--bnum-color-danger-hover)} --bnum-button-danger-hover-background-color - Couleur de fond au survol (état danger)\n * @cssvar {var(--bnum-text-on-danger-hover)} --bnum-button-danger-hover-text-color - Couleur du texte au survol (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-hover-border-color)} --bnum-button-danger-hover-border - Bordure au survol (état danger)\n * @cssvar {var(--bnum-color-danger-hover)} --bnum-button-danger-hover-border-color - Couleur de la bordure au survol (état danger)\n * @cssvar {var(--bnum-color-danger-active)} --bnum-button-danger-active-background-color - Couleur de fond lors du clic (état danger)\n * @cssvar {var(--bnum-text-on-danger-active)} --bnum-button-danger-active-text-color - Couleur du texte lors du clic (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-active-border-color)} --bnum-button-danger-active-border - Bordure lors du clic (état danger)\n * @cssvar {var(--bnum-color-danger-active)} --bnum-button-danger-active-border-color - Couleur de la bordure lors du clic (état danger)\n * @cssvar {0.6} --bnum-button-disabled-opacity - Opacité du bouton désactivé\n * @cssvar {none} --bnum-button-disabled-pointer-events - Gestion des événements souris pour le bouton désactivé\n * @cssvar {flex} --bnum-button-wrapper-display - Type d'affichage du wrapper interne\n * @cssvar {center} --bnum-button-wrapper-align-items - Alignement vertical du contenu du wrapper\n * @cssvar {flex} --bnum-button-icon-display - Type d'affichage de l'icône\n * @cssvar {flex} --bnum-button-loader-display - Type d'affichage du loader\n * @cssvar {0.75s} --bnum-button-spin-duration - Durée de l'animation de spin\n * @cssvar {linear} --bnum-button-spin-timing - Fonction de timing de l'animation de spin\n * @cssvar {infinite} --bnum-button-spin-iteration - Nombre d'itérations de l'animation de spin\n * @cssvar {-3px} --bnum-button-margin-bottom-text-correction - Correction basse du texte\n */\n@Define({\n  tag: TAG_BUTTON,\n  template: TEMPLATE,\n  styles: style,\n})\nexport class HTMLBnumButton extends BnumElementInternal {\n  //#endregion Component Definition\n\n  //#region Private fields\n  #_renderScheduler: Nullable<Scheduler<void>> = null;\n  #_lastClick: Nullable<string> = null;\n  //#endregion Private fields\n  //#region Getter/setter\n  /**\n   * Références UI du composant.\n   */\n  @UI({\n    wrapper: `.${CLASS_WRAPPER}`,\n    icon: `.${CLASS_ICON}`,\n  })\n  accessor #_ui!: BnumButtonUi;\n\n  /**\n   * Événement déclenché lors du changement d'état de chargement.\n   */\n  @Listener(OnLoadingStateChangeInitializer, { lazy: false })\n  accessor onloadingstatechange!: LoadingStateChangedEvent;\n  /**\n   * Événement déclenché lors du changement d'icône.\n   */\n  @Listener(OnIconChangeInitializer, { lazy: false })\n  accessor oniconchange!: IconChangedEvent;\n  /**\n   * Événement déclenché lors du changement de propriété de l'icône.\n   */\n  @Listener(OnIconPropChangeInitializer, { lazy: false })\n  accessor oniconpropchange!: IconPropChangedEvent;\n  /**\n   * Événement déclenché lors du changement de variation du bouton.\n   */\n  @Listener(OnVariationChangeInitializer, { lazy: false })\n  accessor onvariationchange!: VariationChangedEvent;\n\n  /** Événement déclenché lors du clic sur le bouton. */\n  @Listener(OnClickInitializer)\n  accessor linkedClickEvent!: LinkedClickEvent;\n\n  /**\n   * Variation du bouton (primary, secondary, etc.).\n   */\n  get variation(): ButtonVariation {\n    return (\n      (this.data(ATTR_VARIATION) as ButtonVariation) || ButtonVariation.PRIMARY\n    );\n  }\n  set variation(value: ButtonVariation) {\n    if (Object.values(ButtonVariation).includes(value)) {\n      const fromAttribute = false;\n      this.data(ATTR_VARIATION, value, fromAttribute);\n\n      if (this.alreadyLoaded) {\n        this.onvariationchange.call(value, this.variation);\n        this.#_requestUpdateDOM();\n      }\n    }\n  }\n\n  /**\n   * Icône affichée dans le bouton.\n   */\n  get icon(): Nullable<string> {\n    return (this.data(ATTR_ICON) as string) || null;\n  }\n  set icon(value: Nullable<string>) {\n    if (this.alreadyLoaded)\n      this.oniconchange.call(value || EMPTY_STRING, this.icon || EMPTY_STRING);\n\n    if (typeof value === 'string' && /^[\\w-]+$/.test(value)) {\n      const fromAttribute = false;\n      this.data(ATTR_ICON, value, fromAttribute);\n    } else {\n      this.data(ATTR_ICON, null);\n    }\n\n    if (this.alreadyLoaded) this.#_requestUpdateDOM();\n  }\n\n  /**\n   * Position de l'icône (gauche ou droite).\n   */\n  get iconPos(): IconPosition {\n    return (this.data(ATTR_ICON_POS) as IconPosition) || IconPosition.RIGHT;\n  }\n  set iconPos(value: IconPosition) {\n    if (this.alreadyLoaded) this.oniconpropchange.call(ICON_PROP_POS, value);\n\n    if (Object.values(IconPosition).includes(value)) {\n      const fromAttribute = false;\n      this.data(ATTR_ICON_POS, value, fromAttribute);\n    }\n\n    if (this.alreadyLoaded) this.#_requestUpdateDOM();\n  }\n\n  /**\n   * Marge appliquée à l'icône.\n   */\n  get iconMargin(): string {\n    return (\n      (this.data(ATTR_ICON_MARGIN) as string) || DEFAULT_CSS_VAR_ICON_MARGIN\n    );\n  }\n  set iconMargin(value: string | null) {\n    if (this.alreadyLoaded)\n      this.oniconpropchange.call('margin', value || EMPTY_STRING);\n\n    if (typeof value === 'string' && REG_XSS_SAFE.test(value)) {\n      const fromAttribute = false;\n      this.data(ATTR_ICON_MARGIN, value, fromAttribute);\n      this.style.setProperty(CSS_PROPERTY_ICON_MARGIN, value);\n    } else if (value === null) {\n      this.data(ATTR_ICON_MARGIN, value);\n      this.style.removeProperty(CSS_PROPERTY_ICON_MARGIN);\n    }\n  }\n\n  /**\n   * Taille de layout sur laquelle le texte doit être caché.\n   */\n  get hideTextOnLayoutSize(): Nullable<HideTextOnLayoutSize> {\n    const data = this.data<HideTextOnLayoutSize>(ATTR_HIDE);\n\n    if (\n      [...Object.values(HideTextOnLayoutSize), null, undefined].includes(data)\n    )\n      return data as HideTextOnLayoutSize;\n    return null;\n  }\n  //#endregion Getter/setter\n  //#region Lifecycle\n  /**\n   * Constructeur du bouton Bnum.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Construit le DOM du composant bouton.\n   * @param container - Le conteneur du Shadow DOM.\n   */\n  protected _p_buildDOM(): void {\n    if (this.data(ATTR_ICON_MARGIN)) {\n      this.style.setProperty(\n        CSS_PROPERTY_ICON_MARGIN,\n        this.data(ATTR_ICON_MARGIN),\n      );\n    }\n\n    this.#_updateDOM();\n\n    HTMLBnumButton.ToButton(this);\n  }\n\n  protected _p_update(): void {\n    if (!this.#_ui.wrapper) return;\n\n    this.#_updateDOM();\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  /**\n   * Demande une mise à jour du DOM du bouton.\n   */\n  #_requestUpdateDOM(): void {\n    this.#_renderScheduler ??= new Scheduler<void>(() => {\n      this.#_updateDOM();\n    });\n    this.#_renderScheduler.schedule();\n  }\n\n  /**\n   * Met à jour le DOM du bouton (icône, états, etc.).\n   * @private\n   */\n  #_updateDOM(): void {\n    const isLoading = this.#_isLoading();\n    const isDisabled = this.#_isDisabled();\n\n    // Reset des états\n    this._p_clearStates();\n\n    // États globaux\n    this._p_addState(this.variation);\n    this._p_addState(this.variation);\n    if (this.#_isRounded()) this._p_addState(STATE_ROUNDED);\n    if (isLoading) this._p_addState(STATE_LOADING);\n    if (isDisabled || isLoading) this._p_addState(STATE_DISABLED);\n\n    // Gestion de l'icône\n    const effectiveIcon = isLoading ? ICON_LOADER : this.icon;\n\n    if (effectiveIcon) {\n      this._p_addState(STATE_ICON);\n\n      // L'état CSS \"icon-pos-left\" déclenchera le \"flex-direction: row-reverse\"\n      this._p_addState(`icon-pos-${this.iconPos}`);\n\n      if (this.hideTextOnLayoutSize) {\n        this._p_addState(`hide-text-on-${this.hideTextOnLayoutSize}`);\n      }\n\n      // Mise à jour du composant icône enfant\n      if (this.#_ui.icon.icon !== effectiveIcon)\n        this.#_ui.icon.icon = effectiveIcon;\n\n      this.#_ui.icon.hidden = false;\n    } else {\n      this._p_addState(STATE_WITHOUT_ICON);\n      this.#_ui.icon.hidden = true;\n    }\n\n    // Accessibilité (Internals gère aria-disabled, mais tabindex doit être géré ici)\n    this._p_internal.ariaDisabled = String(isDisabled || isLoading);\n    this.tabIndex = isDisabled || isLoading ? -1 : 0;\n\n    this.#_setLinkedEvent();\n  }\n\n  /**\n   * Indique si le bouton est arrondi.\n   * @private\n   */\n  #_isRounded(): boolean {\n    return this.#_is(ATTR_ROUNDED);\n  }\n  /**\n   * Indique si le bouton est en état de chargement.\n   * @private\n   */\n  #_isLoading(): boolean {\n    return this.#_is(ATTR_LOADING);\n  }\n  /**\n   * Indique si le bouton est désactivé.\n   * @private\n   */\n  #_isDisabled(): boolean {\n    return this.#_is(ATTR_DISABLED);\n  }\n\n  /**\n   * Vérifie la présence d'un attribut et sa valeur.\n   * @private\n   * @param attr Nom de l'attribut à vérifier\n   * @returns true si l'attribut est présent et sa valeur est valide\n   */\n  #_is(attr: string): boolean {\n    return (\n      this.hasAttribute(attr) &&\n      !['false', false].includes(this.getAttribute(attr) as any)\n    );\n  }\n\n  /**\n   * Ajoute l'événement lié au clic d'un autre élément si l'attribut est présent.\n   * @returns Cette instance du bouton\n   */\n  #_setLinkedEvent(): this {\n    if (this.hasAttribute('click')) {\n      const click = this.getAttribute('click');\n\n      if (click !== this.#_lastClick) {\n        if (this.linkedClickEvent.has('click'))\n          this.linkedClickEvent.remove('click');\n\n        if (click && REG_XSS_SAFE.test(click)) {\n          this.#_lastClick = click;\n          this.linkedClickEvent.add('click', this.#_onLinkedClick, click);\n        }\n      }\n    }\n\n    return this;\n  }\n  //#endregion Private methods\n\n  //#region Event handlers\n  /**\n   * Action lors du clic lié à un autre élément.\n   * @param click Identifiant ou sélecteur CSS de l'élément à cliquer\n   */\n  @Autobind\n  @ErrorPath((e: Error) => {\n    Log.error(`${TAG_BUTTON}/_onLinkedClick`, e.message, e);\n  })\n  @RiskyPath()\n  #_onLinkedClick(click: string): void {\n    // Si c'est un id unique\n    var elementToClick = document.getElementById(click!);\n\n    if (elementToClick) elementToClick.click();\n    else {\n      // Sinon on part du principe que c'est un sélecteur CSS\n      const elements = document.querySelector(click!);\n      if (elements) (elements as HTMLElement).click();\n      else throw new Error('L\\'attribut \\'click\\' ne référence aucun élément.');\n    }\n  }\n\n  /**\n   * Gestion du changement d'état de chargement.\n   * @param state Nouvel état de chargement\n   * @returns Détail de l'événement\n   */\n  @Fire(EVENT_LOADING_STATE_CHANGED)\n  #_onLoadingChange(state: boolean): { state: boolean } {\n    return { state };\n  }\n\n  @Autobind\n  protected _p_onLoadingChange(state: boolean): { state: boolean } {\n    return this.#_onLoadingChange(state);\n  }\n  //#endregion Event handlers\n\n  //#region Public methods\n  /**\n   * Met le bouton en état de chargement.\n   * @returns L'instance du bouton\n   */\n  @SetAttr(ATTR_LOADING, true)\n  setLoading(): this {\n    return this;\n  }\n  /**\n   * Arrête l'état de chargement du bouton.\n   * @returns L'instance du bouton\n   */\n  stopLoading(): this {\n    this.removeAttribute(ATTR_LOADING);\n    return this;\n  }\n\n  /**\n   * Bascule l'état de chargement du bouton.\n   * @returns L'instance du bouton\n   */\n  toggleLoading(): this {\n    if (this.#_isLoading()) {\n      this.stopLoading();\n    } else {\n      this.setLoading();\n    }\n    return this;\n  }\n  //#endregion Public methods\n  //#region Static methods\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   */\n  static _p_observedAttributes(): string[] {\n    return [ATTR_ROUNDED, ATTR_LOADING, ATTR_DISABLED, 'click'];\n  }\n\n  /**\n   * Transforme un élément en bouton accessible (role, tabindex, etc.).\n   * @static\n   * @param element Élément HTML à transformer\n   * @returns L'élément modifié\n   */\n  static ToButton<T extends HTMLElement>(element: T): T {\n    if (!element.onkeydown) {\n      element.onkeydown = (e: KeyboardEvent) => {\n        if (\n          (e.key === ' ' || e.key === 'Enter') &&\n          e.target instanceof HTMLElement\n        ) {\n          e.target.click();\n        }\n      };\n      element.setAttribute('data-set-event', 'onkeydown');\n    }\n\n    if (\n      !element.hasAttribute('role') ||\n      element.getAttribute('role') !== 'button'\n    )\n      element.setAttribute('role', 'button');\n    if (!element.hasAttribute('tabindex'))\n      element.setAttribute('tabindex', '0');\n    return element;\n  }\n\n  /**\n   * Crée un bouton Bnum avec les options spécifiées.\n   * @static\n   * @param buttonClass Classe du bouton à instancier\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static _p_Create<T extends HTMLBnumButton>(\n    buttonClass: { TAG: string },\n    options?: Optional<BnumButtonCreateOptions>,\n  ): T {\n    const config = { ...DEFAULT_BUTTON_OPTIONS, ...options };\n\n    const node = document.createElement(buttonClass.TAG) as unknown as T;\n    node.textContent = config.text ?? EMPTY_STRING;\n\n    const finalMargin = config.iconMargin === 0 ? '0px' : config.iconMargin;\n\n    for (const { prop, attr, isBool } of BUTTON_ATTRIBUTE_MAP) {\n      const val =\n        prop === 'iconMargin'\n          ? finalMargin\n          : config[prop as keyof typeof config];\n\n      if (val === null || val === undefined) continue;\n\n      if (isBool && val === true) node.setAttribute(attr, 'true');\n      else if (!isBool && val !== EMPTY_STRING)\n        node.setAttribute(attr, String(val));\n    }\n\n    return node;\n  }\n\n  /**\n   * Crée un bouton Bnum standard.\n   * @static\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static Create(options?: Optional<BnumButtonCreateOptions>): HTMLBnumButton {\n    return this._p_Create(this, options);\n  }\n\n  /**\n   * Crée un bouton Bnum ne contenant qu'une icône.\n   * @static\n   * @param icon Nom de l'icône à afficher\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static CreateOnlyIcon(\n    icon: string,\n    {\n      variation = ButtonVariation.PRIMARY,\n      rounded = false,\n      loading = false,\n    }: {\n      variation?: ButtonVariation | null;\n      rounded?: boolean;\n      loading?: boolean;\n    } = {},\n  ): HTMLBnumButton {\n    return this.Create({\n      icon,\n      variation,\n      rounded,\n      loading,\n      iconMargin: '0px',\n    });\n  }\n  //#endregion Static methods\n}\n","// type: decorators\n// description: Decorators to handle risky operations by converting exceptions into Result types.\nimport { riskyAsync, riskySync } from \"./Risky.internal/functions\";\n/**\n * Decorator to handle risky operations by converting exceptions into Result types.\n * Use with HappyPath or ErrorPath to handle the respective paths.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyPath() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyPath can only be applied to methods.\");\n        }\n        return (function (...args) {\n            return riskySync.call(this, originalMethod, ...args);\n        });\n    };\n}\n/**\n * Decorator to handle risky async operations by converting exceptions into Result types.\n * Use with HappyPath or ErrorPath to handle the respective paths.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyPathAsync() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyPathAsync can only be applied to methods.\");\n        }\n        return (async function (...args) {\n            return await riskyAsync.call(this, originalMethod, ...args);\n        });\n    };\n}\n","import { HTMLBnumButton } from '../bnum-button';\nimport { ATTR_VARIATION } from './constants';\nimport { ButtonVariation } from './types';\n\n/**\n * Décorateur de classe permettant de définir une variation par défaut pour un composant bouton.\n * Ce décorateur étend le constructeur de la classe cible (Pattern Proxy/Mixin) pour injecter\n * automatiquement la valeur de variation dans le dataset du composant lors de son instanciation.\n * @remarks\n * Ce décorateur utilise l'API standard ECMAScript (Stage 3). Il inclut une vérification\n * `instanceof` pour s'assurer que la classe décorée hérite bien de {@link HTMLBnumButton},\n * évitant ainsi des erreurs d'exécution sur des classes incompatibles.\n * @param variation - Le type de variation à appliquer (ex: 'primary', 'secondary').\n * Doit correspondre à une valeur valide de {@link ButtonVariation}.\n * @returns Une fonction décoratrice qui retourne la classe étendue avec la logique d'injection.\n * @example\n * ```typescript\n * import { HTMLBnumButton } from '../bnum-button';\n * import { Variation } from './decorators';\n * @Variation('primary')\n * export class PrimaryButton extends HTMLBnumButton {\n * // L'attribut ATTR_VARIATION sera défini à 'primary' dès la construction.\n * }\n * ```\n */\nexport function Variation(variation: ButtonVariation) {\n  return function <T extends new (...args: any[]) => any>(\n    originalClass: T,\n    context: ClassDecoratorContext<T>,\n  ) {\n    if (context.kind !== 'class') return;\n\n    class InnerClass extends (originalClass as any) {\n      constructor(...args: any[]) {\n        super(...args);\n\n        if (this instanceof HTMLBnumButton) {\n          const fromAttribute = false;\n          this.data(ATTR_VARIATION, variation, fromAttribute);\n        }\n      }\n    }\n\n    return InnerClass as T;\n  };\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_DANGER } from '../../../core/utils/constants/tags';\nimport { ButtonVariation, HTMLBnumButton } from '../button';\nimport { Variation } from '../button/bnum-button.internal/decorators';\nimport { ATTR_VARIATION } from '../button/internal';\n\n/**\n * Bouton Bnum de type \"Danger\".\n *\n * @structure Cas standard\n * <bnum-danger-button>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton avec icône\n * <bnum-danger-button data-icon=\"home\">Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-danger-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-danger-button loading>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton arrondi\n * <bnum-danger-button rounded>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-danger-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-danger-button>\n */\n@Define({ tag: TAG_DANGER })\n@Variation(ButtonVariation.DANGER)\nexport class HTMLBnumDangerButton extends HTMLBnumButton {\n  constructor() {\n    super();\n  }\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { Nullable } from './types';\nimport { EMPTY_STRING } from '@rotomeca/utils';\n\nexport enum BnumDateLocale {\n\tFR = 'fr-FR',\n\tEN = 'en-US',\n}\n\n/**\n * Native replacements for date-fns functions to reduce bundle size.\n * Uses Intl API for localization and native Date for manipulations.\n */\nexport class BnumDateUtils {\n\t/**\n\t * Equivalent to date-fns/format.\n\t * @param date Date to format.\n\t * @param options Intl options or a simple locale string.\n\t * @param locale Locale string (e.g., 'fr-FR', 'en-US').\n\t */\n\tstatic format(\n\t\tdate: Date,\n\t\toptions: Intl.DateTimeFormatOptions = {\n\t\t\tday: '2-digit',\n\t\t\tmonth: '2-digit',\n\t\t\tyear: 'numeric',\n\t\t},\n\t\tlocale: string = 'fr-FR',\n\t): string {\n\t\treturn new Intl.DateTimeFormat(locale, options).format(date);\n\t}\n\n\t/**\n\t * Parse une chaîne de caractères en objet Date.\n\t * @param dateString La chaîne à parser (ex: \"12/08/1997\")\n\t * @param format Optionnel : le format de la chaîne (ex: \"dd/MM/yyyy\")\n\t */\n\tstatic parse(dateString: string, format?: string): Nullable<Date> {\n\t\treturn this.#_parse(dateString, format).unwrapOr(null);\n\t}\n\n\t/**\n\t * Parse une chaîne de caractères en objet Date.\n\t * @param dateString La chaîne à parser (ex: \"12/08/1997\")\n\t * @param format Optionnel : le format de la chaîne (ex: \"dd/MM/yyyy\")\n\t */\n\t@Risky()\n\tstatic #_parse(dateString: string, format?: string): Result<Nullable<Date>> {\n\t\tif (!dateString) return null as any;\n\n\t\t// 1. Si aucun format n'est fourni, on tente le parsing natif (ISO 8601)\n\t\tif (!format) {\n\t\t\tconst d = new Date(dateString);\n\t\t\treturn (this.isValid(d) ? d : null) as any;\n\t\t} else {\n\t\t\tif (['PPPP', 'PPP', 'PP', 'P'].includes(format)) {\n\t\t\t\tformat = 'dd/MM/yyyy';\n\t\t\t}\n\t\t}\n\n\t\t// On extrait les nombres de la chaîne (ignore les séparateurs comme / - :)\n\t\tconst values = dateString.match(/\\d+/g);\n\t\tconst tokens = format.match(/[a-zA-Z]+/g);\n\n\t\tif (!values || !tokens || values.length !== tokens.length) {\n\t\t\tif (values && tokens && values.length < tokens.length) {\n\t\t\t\tfor (let index = values.length; index < tokens.length; ++index) {\n\t\t\t\t\tvalues.push(\n\t\t\t\t\t\tArray.from(tokens[index])\n\t\t\t\t\t\t\t.map(() => '0')\n\t\t\t\t\t\t\t.join(EMPTY_STRING),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else return null as any;\n\t\t}\n\n\t\tlet year = new Date().getFullYear();\n\t\tlet month = 0;\n\t\tlet day = 1;\n\t\tlet hour = 0;\n\t\tlet minute = 0;\n\n\t\ttokens.forEach((token, index) => {\n\t\t\tconst val = parseInt(values[index], 10);\n\t\t\tif (token.includes('y')) year = val;\n\t\t\tif (token.includes('M')) month = val - 1; // Mois 0-11 en JS\n\t\t\tif (token.includes('d')) day = val;\n\t\t\tif (token.includes('H')) hour = val;\n\t\t\tif (token.includes('m')) minute = val;\n\t\t});\n\n\t\tconst result = new Date(year, month, day, hour, minute);\n\t\treturn (this.isValid(result) ? result : null) as any;\n\t}\n\n\t/**\n\t * Equivalent to date-fns/isValid.\n\t */\n\tstatic isValid(date: any): date is Date {\n\t\treturn date instanceof Date && !isNaN(date.getTime());\n\t}\n\n\t/**\n\t * Equivalent to date-fns/addDays (Immutable).\n\t */\n\tstatic addDays(date: Date, days: number): Date {\n\t\tconst result = new Date(date);\n\t\tresult.setDate(result.getDate() + days);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Equivalent to date-fns/addMonths (Immutable).\n\t */\n\tstatic addMonths(date: Date, months: number): Date {\n\t\tconst result = new Date(date);\n\t\tresult.setMonth(result.getMonth() + months);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Equivalent to date-fns/addYears (Immutable).\n\t */\n\tstatic addYears(date: Date, years: number): Date {\n\t\tconst result = new Date(date);\n\t\tresult.setFullYear(result.getFullYear() + years);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Convertit dynamiquement une chaîne de tokens (ex: \"dd/MM\") en options Intl.\n\t * @param pattern La chaîne de formatage.\n\t */\n\tstatic getOptionsFromToken(pattern: string): Intl.DateTimeFormatOptions {\n\t\tif (pattern.includes('PPPP')) return { dateStyle: 'full' };\n\t\tif (pattern.includes('PPP')) return { dateStyle: 'long' };\n\t\tif (pattern.includes('PP')) return { dateStyle: 'medium' };\n\t\tif (pattern.includes('P')) return { dateStyle: 'short' };\n\n\t\tconst options: Intl.DateTimeFormatOptions = {};\n\n\t\tif (pattern.includes('yyyy')) options.year = 'numeric';\n\t\telse if (pattern.includes('yy')) options.year = '2-digit';\n\n\t\tif (pattern.includes('MMMM')) options.month = 'long';\n\t\telse if (pattern.includes('MMM')) options.month = 'short';\n\t\telse if (pattern.includes('MM')) options.month = '2-digit';\n\t\telse if (pattern.includes('M')) options.month = 'numeric';\n\n\t\tif (pattern.includes('dd')) options.day = '2-digit';\n\t\telse if (pattern.includes('d')) options.day = 'numeric';\n\n\t\tif (pattern.includes('EEEE')) options.weekday = 'long';\n\t\telse if (pattern.includes('E')) options.weekday = 'short';\n\n\t\tif (pattern.includes('HH')) options.hour = '2-digit';\n\t\telse if (pattern.includes('H')) options.hour = 'numeric';\n\n\t\tif (pattern.includes('mm')) options.minute = '2-digit';\n\n\t\t// Force 24h si on demande des heures\n\t\tif (options.hour) options.hour12 = false;\n\n\t\treturn options;\n\t}\n\n\t/**\n\t * Vérifie si deux dates correspondent au même jour (ignore l'heure).\n\t * @param date Première date à comparer.\n\t * @param now Deuxième date à comparer (par défaut : Date actuelle).\n\t * @returns True si c'est le même jour.\n\t */\n\tstatic isSameDay(date: Date, now: Date = new Date()): boolean {\n\t\treturn (\n\t\t\tdate.getFullYear() === now.getFullYear() &&\n\t\t\tdate.getMonth() === now.getMonth() &&\n\t\t\tdate.getDate() === now.getDate()\n\t\t);\n\t}\n\n\t/**\n\t * Vérifie si la date fournie est aujourd'hui.\n\t */\n\tstatic isToday(date: Date): boolean {\n\t\treturn this.isSameDay(date, new Date());\n\t}\n\n\t/**\n\t * Retourne une nouvelle date fixée au début du jour (00:00:00.000).\n\t */\n\tstatic startOfDay(date: Date): Date {\n\t\tconst result = new Date(date);\n\t\tresult.setHours(0, 0, 0, 0);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Retourne une nouvelle date fixée à la fin du jour (23:59:59.999).\n\t */\n\tstatic endOfDay(date: Date): Date {\n\t\tconst result = new Date(date);\n\t\tresult.setHours(23, 59, 59, 999);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Soustrait un nombre de jours à une date (Immuable).\n\t */\n\tstatic subDays(date: Date, amount: number): Date {\n\t\treturn this.addDays(date, -amount);\n\t}\n\n\t/**\n\t * Vérifie si une date se trouve dans un intervalle donné (inclusif).\n\t * @param date Date à vérifier.\n\t * @param interval Objet contenant start et end.\n\t */\n\tstatic isWithinInterval(\n\t\tdate: Date,\n\t\tinterval: { start: Date; end: Date },\n\t): boolean {\n\t\tconst time = date.getTime();\n\t\treturn time >= interval.start.getTime() && time <= interval.end.getTime();\n\t}\n}\n","export const ATTRIBUTE_FORMAT = 'format';\nexport const ATTRIBUTE_LOCALE = 'locale';\nexport const ATTRIBUTE_DATE = 'data-date';\nexport const ATTRIBUTE_START_FORMAT = 'data-start-format';\nexport const EVENT_ATTRIBUTE_UPDATED = 'bnum-date:attribute-updated';\nexport const EVENT_ATTRIBUTE_UPDATED_FORMAT =\n  'bnum-date:attribute-updated:format';\nexport const EVENT_ATTRIBUTE_UPDATED_LOCALE =\n  'bnum-date:attribute-updated:locale';\nexport const EVENT_DATE = 'bnum-date:date';\nexport const DEFAULT_FORMAT = 'dd/MM/yyyy HH:mm';\nexport const DEFAULT_LOCALE = 'fr';\nexport const STATE_INVALID = 'invalid';\nexport const STATE_NOT_READY = 'not-ready';\n","type ObserveReturn = (\n  target: Function,\n  context: ClassDecoratorContext<abstract new (...args: any) => any>,\n) => void;\n\n/**\n * Décorateur de classe pour Web Components permettant de déclarer les attributs HTML à observer.\n *\n * Ce décorateur simplifie la définition du getter statique `observedAttributes` requis par la spécification\n * des Custom Elements. Les attributs listés déclencheront l'exécution de `attributeChangedCallback`\n * lors de leur modification dans le DOM.\n *\n * @remarks\n * Le décorateur injecte une propriété statique interne `__CONFIG_ATTRIBS_TO_OBSERVE_` sur le constructeur de la classe.\n * La classe de base est responsable de lire cette configuration pour implémenter\n * le getter `static get observedAttributes()`.\n *\n * @param attribsToObserve1 - Le nom du premier attribut à observer (obligatoire pour garantir au moins un argument).\n * @param attribsToObserve - Une liste variable (Rest parameters) des autres noms d'attributs à observer.\n *\n * @throws {Error} Si le décorateur est appliqué sur un élément autre qu'une définition de classe (`context.kind !== 'class'`).\n *\n * @example\n * ```ts\n * ///\n * @Observe('disabled', 'value', 'theme')\n * class MyCustomInput extends BnumElement {\n * attributeChangedCallback(name: string, oldValue: string | null, newValue: string | null) {\n * console.log(`L'attribut ${name} a changé de ${oldValue} à ${newValue}`);\n * }\n * }\n * ```\n */\nexport function Observe(\n  attribsToObserve1: string,\n  ...attribsToObserve: ReadonlyArray<string>\n): ObserveReturn;\nexport function Observe(attribs: ReadonlyArray<string>): ObserveReturn;\nexport function Observe(\n  attribsToObserve1: string | ReadonlyArray<string>,\n  ...attribsToObserve: ReadonlyArray<string>\n) {\n  return function (target: Function, context: ClassDecoratorContext) {\n    if (context.kind !== 'class') {\n      throw new Error('@Observe ne peut être utilisé que sur une classe.');\n    }\n\n    context.addInitializer(function () {\n      const attributesToObserve: string[] = Array.isArray(attribsToObserve1)\n        ? attribsToObserve1\n        : [attribsToObserve1, ...attribsToObserve];\n      (this as any).__CONFIG_ATTRIBS_TO_OBSERVE_ = attributesToObserve;\n    });\n  };\n}\n","import BnumElementInternal from '../../bnum-element-states';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { TAG_DATE } from '../../../core/utils/constants/tags';\nimport { JsCircularEvent } from '@rotomeca/event';\nimport { CustomDom } from '../../bnum-element';\nimport { Define, Self } from '../../../core/decorators';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from '../../../core/utils/Log';\nimport {\n  BnumDateLocale,\n  BnumDateUtils,\n} from '../../../core/utils/BnumDateUtils';\nimport {\n  ATTRIBUTE_DATE,\n  ATTRIBUTE_FORMAT,\n  ATTRIBUTE_LOCALE,\n  ATTRIBUTE_START_FORMAT,\n  DEFAULT_FORMAT,\n  DEFAULT_LOCALE,\n  EVENT_ATTRIBUTE_UPDATED,\n  EVENT_DATE,\n  STATE_INVALID,\n  STATE_NOT_READY,\n} from './bnum-date.internals/constants';\nimport { Listener, NoInitListener } from 'core/decorators/listener';\nimport { Observe } from 'core/decorators/observe';\nimport { Nullable } from 'core/utils/types';\nimport { BnumDateCreateOptions } from './bnum-date.internals/types';\n\n/**\n * Affiche une date formatée qui peut être mise à jour dynamiquement.\n *\n * /!\\ Seuls les formats de date supportés ceux par intl.DateTimeFormat.\n *\n * Vous DEVEZ utiliser les tokens suivants pour la configuration du format en html:\n *\n * - P : format court (ex: 12/08/1997)\n * - PP : format moyen (ex: 12 août 1997)\n * - PPP : format long (ex: mardi 12 août 1997)\n * - PPPP : format complet (ex: mardi 12 août 1997)\n * - yyyy : année sur 4 chiffres\n * - yy : année sur 2 chiffres\n * - M : mois numérique sans zéro initial\n * - MM : mois numérique avec zéro initial\n * - MMM : mois abrégé (ex: août)\n * - MMMM : mois complet (ex: août)\n * - d : jour du mois sans zéro initial\n * - dd : jour du mois avec zéro initial\n * - EEEE : jour de la semaine complet (ex: mardi)\n * - E : jour de la semaine abrégé (ex: mar)\n * - H : heure sans zéro initial (0-23)\n * - HH : heure avec zéro initial (00-23)\n * - mm : minutes avec zéro initial (00-59)\n *\n * Pour la locale, utilisez ceux par intl.\n *\n * A la place de `fr_FR`, vous pouvez utilisez `fr`.\n *\n * @structure Date simple\n * <bnum-date format=\"P\">1997-08-12</bnum-date>\n *\n * @structure Date avec parsing personnalisé\n * <bnum-date format=\"PPPP\" data-start-format=\"dd/MM/yyyy\">12/08/1997</bnum-date>\n *\n * @structure Date avec attribut data-date\n * <bnum-date format=\"ddMMyyyy HHmm\" data-date=\"1997-08-12T15:30:00Z\"></bnum-date>\n *\n * @structure Date en anglais\n * <bnum-date format=\"PPPP\" locale=\"en\">1997-08-12</bnum-date>\n *\n * @state invalid - Actif quand la date est invalide ou non définie\n * @state not-ready - Actif quand le composant n'est pas encore prêt\n */\n@Define({ tag: TAG_DATE })\n@Observe(ATTRIBUTE_FORMAT, ATTRIBUTE_LOCALE)\nexport class HTMLBnumDate extends BnumElementInternal {\n  //#region Constants\n  static readonly #_LOCALES: Record<string, BnumDateLocale> = {\n    fr: BnumDateLocale.FR,\n    en: BnumDateLocale.EN,\n  };\n  //#endregion Constants\n\n  //#region Private fields\n  /** Référence à la classe HTMLBnumDate */\n  @Self _!: typeof HTMLBnumDate;\n\n  /** L'objet Date (notre source de vérité) */\n  #_originalDate: Nullable<Date> = null;\n\n  /** Le format d'affichage (ex: 'PPPP') */\n  #_outputFormat: string = DEFAULT_FORMAT; // 'P' -> 12/08/1997\n\n  /** La locale (code) */\n  #_locale: string = DEFAULT_LOCALE;\n\n  /** Le format de parsing (ex: 'dd/MM/yyyy') */\n  #_startFormat: Nullable<string> = null;\n\n  /** L'élément SPAN interne qui contient le texte formaté */\n  #_outputElement: Nullable<HTMLSpanElement> = null;\n  #_renderSheduled: boolean = false;\n  //#endregion Private fields\n\n  //#region Getter/Setters\n\n  /**\n   * Événement circulaire déclenché lors du formatage de la date.\n   * Permet de personnaliser le formatage via un listener externe.\n   */\n  @Listener(NoInitListener, { circular: true })\n  accessor formatEvent!: JsCircularEvent<\n    (param: { date: string | Date }) => { date: string | Date }\n  >;\n\n  /**\n   * Définit ou obtient l'objet Date.\n   * C'est le point d'entrée principal pour JS.\n   */\n  get date(): Date | null {\n    return this.#_originalDate;\n  }\n  set date(value: Date | string | null) {\n    this.setDate(value, this.#_startFormat, true);\n  }\n\n  /** Définit ou obtient le format d'affichage. */\n  get format(): string {\n    return this.#_outputFormat;\n  }\n  set format(value: string) {\n    this.setAttribute(ATTRIBUTE_FORMAT, value);\n  }\n\n  /** Définit ou obtient la locale. */\n  get locale(): string {\n    return this.#_locale;\n  }\n  set locale(value: string) {\n    this.setAttribute(ATTRIBUTE_LOCALE, value);\n  }\n\n  public get localeElement(): BnumDateLocale {\n    return (\n      this._.#_LOCALES[this.#_locale] ||\n      this.#_locale ||\n      this._.#_LOCALES[DEFAULT_LOCALE]\n    );\n  }\n\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * Construit le DOM interne (appelé une seule fois).\n   * @param container Le ShadowRoot\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    this.#_outputElement = document.createElement('span');\n    this.#_outputElement.setAttribute('part', 'date-text'); // Permet de styler depuis l'extérieur\n    container.append(this.#_outputElement);\n  }\n\n  /**\n   * Phase de pré-chargement (avant _p_buildDOM).\n   * On lit les attributs initiaux et le textContent.\n   */\n  protected _p_preload(): void {\n    // On ajoute un listener sur `bnum-date:attribute-updated` pour trigger les propriété de manière + précises.\n    this.addEventListener(EVENT_ATTRIBUTE_UPDATED, (e) => {\n      this.trigger(\n        `${EVENT_ATTRIBUTE_UPDATED}:${(e as CustomEvent).detail.property}`,\n        (e as CustomEvent).detail,\n      );\n    });\n\n    // Lire les attributs de configuration\n    this.#_outputFormat =\n      this.getAttribute(ATTRIBUTE_FORMAT) || this.#_outputFormat;\n    this.#_locale = this.getAttribute(ATTRIBUTE_LOCALE) || this.#_locale;\n    this.#_startFormat = this.getAttribute(ATTRIBUTE_START_FORMAT) || null;\n\n    // Déterminer la date initiale (priorité à data-date)\n    const initialDateStr =\n      this.getAttribute(ATTRIBUTE_DATE) || this.textContent?.trim() || null;\n\n    // Définir la date sans déclencher de rendu (render=false)\n    if (initialDateStr) this.setDate(initialDateStr, this.#_startFormat, false);\n  }\n\n  /**\n   * Phase d'attachement (après _p_buildDOM).\n   * C'est ici qu'on fait le premier rendu.\n   */\n  protected _p_attach(): void {\n    this.#_renderDate();\n  }\n\n  /**\n   * Gère les changements d'attributs (appelé après _p_preload).\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (oldVal === newVal) return;\n\n    let needsRender = false;\n\n    switch (name) {\n      case ATTRIBUTE_FORMAT:\n        this.#_outputFormat = newVal || DEFAULT_FORMAT;\n        needsRender = true;\n        break;\n      case ATTRIBUTE_LOCALE:\n        this.#_locale = newVal || DEFAULT_LOCALE;\n        needsRender = true;\n        break;\n      case ATTRIBUTE_START_FORMAT:\n        this.#_startFormat = newVal;\n        // Pas de re-rendu, affecte seulement le prochain setDate()\n        break;\n      case ATTRIBUTE_DATE:\n        // Re-parse la date\n        this.setDate(newVal, this.#_startFormat, false);\n        needsRender = true;\n        break;\n    }\n\n    if (needsRender) {\n      this.#_renderDate();\n      // On déclenche l'événement pour la réactivité\n      this.trigger(EVENT_ATTRIBUTE_UPDATED, {\n        property: name,\n        newValue: newVal,\n        oldValue: oldVal,\n      });\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Public Methods\n  /**\n   * Définit la date à partir d'une chaîne, d'un objet Date ou null.\n   * @param dateInput La date source.\n   * @param startFormat Le format pour parser la date si c'est une chaîne.\n   * @param triggerRender Indique s'il faut rafraîchir l'affichage (par défaut: true).\n   */\n  public setDate(\n    dateInput: string | Date | null,\n    startFormat?: string | null,\n    triggerRender: boolean = true,\n  ): void {\n    const oldDate = this.#_originalDate;\n    let newDate: Date | null = null;\n\n    if (dateInput === null) {\n      newDate = null;\n    } else if (dateInput instanceof Date) {\n      newDate = dateInput;\n    } else if (typeof dateInput === 'string') {\n      if (dateInput.trim() === 'now') {\n        newDate = new Date();\n      } else {\n        const formatToUse = startFormat || this.#_startFormat;\n        if (formatToUse) {\n          // Parsing avec format spécifique\n          newDate = BnumDateUtils.parse(dateInput, formatToUse); //parse(dateInput, formatToUse, new Date());\n        } else {\n          // Parsing natif (ISO 8601, timestamps...)\n          newDate = new Date(dateInput);\n        }\n      }\n    }\n\n    // Vérification de la validité\n    if (newDate && BnumDateUtils.isValid(newDate)) {\n      this.#_originalDate = newDate;\n    } else {\n      this.#_originalDate = null;\n    }\n\n    // Déclenche le rendu et/ou l'événement si la date a changé\n    if (oldDate?.getTime() !== this.#_originalDate?.getTime()) {\n      if (triggerRender) {\n        this.#_renderDate();\n      }\n      this.trigger(EVENT_DATE, {\n        property: 'date',\n        newValue: this.#_originalDate,\n        oldValue: oldDate,\n      });\n    }\n  }\n\n  /** Récupère l'objet Date actuel. */\n  public getDate(): Date | null {\n    return this.#_originalDate;\n  }\n\n  /** Ajoute un nombre de jours à la date actuelle. */\n  public addDays(days: number): void {\n    if (!this.#_originalDate) return;\n    this.date = BnumDateUtils.addDays(this.#_originalDate, days);\n  }\n\n  /** Ajoute un nombre de mois à la date actuelle. */\n  public addMonths(months: number): void {\n    if (!this.#_originalDate) return;\n    this.date = BnumDateUtils.addMonths(this.#_originalDate, months);\n  }\n\n  /** Ajoute un nombre d'années à la date actuelle. */\n  public addYears(years: number): void {\n    if (!this.#_originalDate) return;\n    this.date = BnumDateUtils.addYears(this.#_originalDate, years);\n  }\n\n  public askRender(): void {\n    if (this.#_renderSheduled) return;\n    this.#_renderSheduled = true;\n    requestAnimationFrame(() => {\n      this.#_renderSheduled = false;\n      this.#_renderDate();\n    });\n  }\n\n  //#endregion Public Methods\n\n  //#region Private Methods\n  /**\n   * Met à jour le textContent du span interne.\n   * C'est la seule fonction qui écrit dans le DOM.\n   */\n  #_renderDate(): void {\n    this._p_clearStates();\n    if (!this.#_outputElement) {\n      this._p_addState(STATE_NOT_READY);\n      return; // Pas encore prêt\n    }\n\n    if (!this.#_originalDate) {\n      this.#_outputElement.textContent = EMPTY_STRING; // Affiche une chaîne vide si date invalide/null\n      this._p_addState(STATE_INVALID);\n      return;\n    }\n\n    // Trouve la locale, avec fallback sur 'fr'\n    const locale = this.localeElement;\n    const textContent = this.#_format(locale).match({\n      Ok: (formated) =>\n        this.formatEvent.call({ date: formated })?.date || formated,\n      Err: (e) => {\n        Log.error(\n          'HTMLBnumDate/renderDate',\n          `Erreur de formatage Intl. Format: \"${this.#_outputFormat}`,\n          '\\\\',\n          BnumDateUtils.getOptionsFromToken(this.#_outputFormat),\n          '\"',\n          e,\n        );\n\n        this._p_addState(STATE_INVALID);\n        return 'Date invalide';\n      },\n    });\n\n    this.#_outputElement.textContent = textContent;\n    this.setAttribute('aria-label', this.#_outputElement.textContent);\n  }\n\n  @Risky()\n  #_format(locale: BnumDateLocale): Result<string> {\n    if (this.#_originalDate === null) throw new Error('Date is null');\n\n    return BnumDateUtils.format(\n      this.#_originalDate,\n      BnumDateUtils.getOptionsFromToken(this.#_outputFormat),\n      locale,\n    ) as any;\n  }\n\n  //#endregion Private Methods\n\n  //#region Statics\n  /**\n   * Méthode statique pour la création (non implémentée ici,\n   * mais suit le pattern de BnumElement).\n   */\n  static Create(\n    dateInput?: string | Date,\n    options?: BnumDateCreateOptions,\n  ): HTMLBnumDate {\n    const el = (document.createElement(this.TAG) as HTMLBnumDate).condAttr(\n      options?.startFormat as unknown as boolean,\n      ATTRIBUTE_START_FORMAT,\n      options?.startFormat ?? EMPTY_STRING,\n    );\n    if (options?.format) el.format = options.format;\n    if (options?.locale) el.locale = options.locale;\n\n    if (typeof dateInput === 'string')\n      el.appendChild(document.createTextNode(dateInput));\n    else if (dateInput) el.date = dateInput;\n\n    return el;\n  }\n\n  //#endregion Statics\n}\n","import BnumElement from 'components/bnum-element';\nimport { Define, Light } from 'core/decorators';\nimport { TAG_FRAGMENT } from 'core/utils/constants/tags';\n\n/**\n * Composant Web Component utilitaire \"Fragment\".\n * * Ce composant agit comme un conteneur logique pour regrouper des éléments du DOM\n * sans introduire de boîte de rendu visuelle supplémentaire (via `display: contents` généralement défini dans le style).\n *\n * @remarks\n * Il permet de contourner la règle \"un seul élément racine\" ou de grouper des éléments\n * pour des traitements logiques (boucles, conditions) sans briser le contexte de formatage\n * CSS du parent (ex: `display: grid` ou `display: flex`).\n *\n * @example\n * ```html\n * <div class=\"grid-container\">\n * <bnum-fragment>\n * <div class=\"cell-1\">Item A</div>\n * <div class=\"cell-2\">Item B</div>\n * </bnum-fragment>\n * </div>\n * ```\n */\n@Define({ tag: TAG_FRAGMENT })\n@Light()\nexport class HTMLBnumFragment extends BnumElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tconnectedCallback(): void {\n\t\tif (this.style.display !== 'contents') this.style.display = 'contents';\n\t}\n}\n","/**\n * Factory de décorateurs pour différer l'exécution d'une méthode.\n * @internal\n */\nfunction createAsyncDecorator(\n  scheduler: (callback: () => void) => void,\n  name: string,\n) {\n  return function (target: Function, context: ClassMethodDecoratorContext) {\n    const methodName = String(context.name);\n\n    return function (this: any, ...args: any[]) {\n      // Planifie l'exécution\n      scheduler(() => {\n        try {\n          // Exécute la méthode originale avec le contexte et les arguments préservés\n          target.apply(this, args);\n        } catch (error) {\n          console.error(\n            `[${name}] Error executing deferred method '${methodName}'`,\n            error,\n          );\n        }\n      });\n    };\n  };\n}\n\n/**\n * Diffère l'exécution de la méthode à la fin de la boucle d'événements courante (Macrotask).\n * Utilise `setTimeout(..., delay)`.\n *\n * Idéal pour attendre que le parser HTML ait fini de construire le DOM (ex: Web Components).\n *\n * @param delay Délai en millisecondes (défaut: 0).\n */\nexport function Defer(delay: number = 0) {\n  return function (target: Function, context: ClassMethodDecoratorContext) {\n    return createAsyncDecorator((fn) => setTimeout(fn, delay), 'Defer')(\n      target,\n      context,\n    );\n  };\n}\n\n/**\n * Diffère l'exécution de la méthode à la fin de la stack courante, mais AVANT le prochain rendu (Microtask).\n * Utilise `queueMicrotask(...)`.\n *\n * Idéal pour des mises à jour d'état qui ne doivent pas bloquer le thread courant\n * mais doivent se produire avant que le navigateur ne peigne l'écran (évite les glitchs visuels).\n */\nexport function Microtask() {\n  return function (target: Function, context: ClassMethodDecoratorContext) {\n    return createAsyncDecorator((fn) => queueMicrotask(fn), 'Microtask')(\n      target,\n      context,\n    );\n  };\n}\n\n/**\n * Diffère l'exécution de la méthode juste avant le prochain rafraîchissement de l'écran (Paint).\n * Utilise `requestAnimationFrame(...)`.\n *\n * Idéal pour les manipulations DOM visuelles ou les animations afin de garantir la fluidité (60fps)\n * et éviter le \"Layout Thrashing\".\n */\nexport function RenderFrame() {\n  return function (target: Function, context: ClassMethodDecoratorContext) {\n    return createAsyncDecorator(\n      (fn) => requestAnimationFrame(fn),\n      'RenderFrame',\n    )(target, context);\n  };\n}\n","import JsEvent from '@rotomeca/event';\nimport BnumElement from 'components/bnum-element';\n\nexport function OnLinkedClickEventInitializer(\n  event: JsEvent<(click: string) => void>,\n  instance: BnumElement,\n) {\n  instance.addEventListener('click', () => {\n    event.call();\n  });\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport { TAG_HELPER } from '../../../core/utils/constants/tags';\nimport { Define } from '../../../core/decorators';\nimport { RenderFrame } from 'core/decorators/defer';\nimport helperStyle from './bnum-helper.less';\n\n/**\n * Constante représentant l'icône utilisée par défaut.\n */\nconst ICON = 'help' as const;\n\n/**\n * Élément web personnalisé représentant une aide contextuelle avec une icône.\n *\n * @structure Cas standard\n * <bnum-helper>Ceci est une aide contextuelle.</bnum-helper>\n */\n@Define({ tag: TAG_HELPER, styles: helperStyle })\nexport default class HTMLBnumHelper extends BnumElement {\n  /**\n   * Constructeur de l'élément HTMLBnumHelper.\n   * Initialise l'élément.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Précharge les données de l'élément.\n   * Si l'élément possède des enfants, le texte est déplacé dans l'attribut title et le contenu est vidé.\n   */\n  protected _p_preload(): void {\n    super._p_preload();\n\n    this.#_render();\n  }\n\n  /**\n   * Construit le DOM interne de l'élément.\n   * Ajoute l'icône d'aide dans le conteneur.\n   * @param container Racine du shadow DOM ou élément HTML.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n\n    container.appendChild(HTMLBnumIcon.Create(ICON));\n  }\n\n  /**\n   * Génère le rendu du composant\n   */\n  @RenderFrame()\n  #_render() {\n    if (this.hasChildNodes()) {\n      this.setAttribute('title', this.textContent ?? EMPTY_STRING);\n      this.textContent = EMPTY_STRING;\n    }\n  }\n\n  /**\n   * Crée une nouvelle instance de HTMLBnumHelper avec le texte d'aide spécifié.\n   * @param title Texte d'aide à afficher dans l'attribut title.\n   * @returns {HTMLBnumHelper} Instance du composant.\n   */\n  static Create(title: string): HTMLBnumHelper {\n    const element = document.createElement(this.TAG) as HTMLBnumHelper;\n    element.setAttribute('title', title);\n    return element;\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumButton } from '../button/bnum-button';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport { TAG_ICON_BUTTON } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport JsEvent from '@rotomeca/event';\nimport { REG_XSS_SAFE } from '../../../core/utils/constants/regexp';\nimport { Define, Self } from '../../../core/decorators';\nimport Log from '../../../core/utils/Log';\nimport { Observe } from 'core/decorators/observe';\nimport { Listener } from 'core/decorators/listener';\nimport { OnLinkedClickEventInitializer } from './bnum-icon-button.internal/listeners';\nimport style from './bnum-icon-button.less';\n\n//#region Global Constants\nconst ID_ICON = 'icon';\n//#endregion Global Constants\n\nconst TEMPLATE = (\n  <HTMLBnumIcon id={ID_ICON}>\n    <slot></slot>\n  </HTMLBnumIcon>\n);\n\n/**\n * Button contenant une icône.\n *\n * @structure Button Icon\n * <bnum-icon-button>home</bnum-icon-button>\n *\n * @structure Button Disabled\n * <bnum-icon-button disabled>home</bnum-icon-button>\n *\n * @cssvar {0.6} --bnum-button-disabled-opacity - Opacité du bouton désactivé\n * @cssvar {none} --bnum-button-disabled-pointer-events - Gestion des événements souris pour le bouton désactivé\n *\n * @slot (default) - Contenu de l'icône (nom de l'icône à afficher)\n */\n@Define({ styles: style, tag: TAG_ICON_BUTTON, template: TEMPLATE })\n@Observe('click')\nexport class HTMLBnumButtonIcon extends BnumElement {\n  //#region Private fields\n  /**\n   * Référence vers l'élément icône à l'intérieur du bouton\n   */\n  #_icon: HTMLBnumIcon | null = null;\n  #_lastClick: Nullable<string> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumButtonIcon */\n  @Self _!: typeof HTMLBnumButtonIcon;\n\n  @Listener(OnLinkedClickEventInitializer, { lazy: false })\n  accessor #_linkedClickEvent!: JsEvent<(click: string) => void>;\n\n  /**\n   * Référence vers l'élément icône à l'intérieur du bouton.\n   *\n   * Si l'icône n'a pas été mise en mémoire, elle sera cherché puis mise en mémoire.\n   */\n  get #_iconElement(): HTMLBnumIcon {\n    if (!this.#_icon) {\n      const icon =\n        this.querySelector(HTMLBnumIcon.TAG) ??\n        this.shadowRoot?.getElementById(ID_ICON);\n\n      if (!icon) this.#_throw('Icon element not found inside icon button');\n\n      this.#_icon = icon as HTMLBnumIcon;\n    }\n\n    return this.#_icon;\n  }\n\n  /**\n   * Icône affichée dans le bouton\n   */\n  get icon() {\n    return (\n      (this.#_iconElement.icon || this.#_throw('Icon is not defined')) ??\n      EMPTY_STRING\n    );\n  }\n\n  set icon(value: string) {\n    this.#_iconElement.icon = value;\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    HTMLBnumButton.ToButton(this);\n\n    if (this.title === EMPTY_STRING)\n      Log.warn(\n        this._.TAG,\n        'Icon button should have a title for accessibility purposes',\n      );\n\n    if (this.hasAttribute('click')) {\n      const click = this.getAttribute('click');\n      this.#_updateAttributeClick(click ?? EMPTY_STRING);\n    }\n  }\n\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    if (oldVal === newVal) return;\n\n    if (name === 'click') {\n      this.#_updateAttributeClick(newVal ?? EMPTY_STRING);\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  #_updateAttributeClick(val: string) {\n    if (val !== this.#_lastClick) {\n      this.#_lastClick = val;\n\n      if (this.#_linkedClickEvent.has('click'))\n        this.#_linkedClickEvent.remove('click');\n\n      if (val && REG_XSS_SAFE.test(val)) {\n        this.#_linkedClickEvent.add(\n          'click',\n          (click: string) => {\n            // Si c'est un id unique\n            var elementToClick = document.getElementById(click!);\n\n            if (elementToClick) elementToClick.click();\n            else {\n              // Sinon on part du principe que c'est un sélecteur CSS\n              const elements = document.querySelector(click!);\n              if (elements) (elements as HTMLElement).click();\n              else\n                throw new Error(\n                  `[${this._.TAG}] L'attribut 'click' ne référence aucun élément.`,\n                );\n            }\n          },\n          val,\n        );\n      }\n    }\n  }\n\n  /**\n   * Permet de lancer une erreur avec un message spécifique dans une expression inline.\n   * @param msg Message à envoyer dans l'erreur.\n   */\n  #_throw(msg: string) {\n    throw new Error(msg);\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n\n  /**\n   * Génère un bouton icône avec l'icône spécifiée.\n   * @param icon Icône à afficher dans le bouton.\n   * @returns Node créée.\n   */\n  static Create(icon: string): HTMLBnumButtonIcon {\n    const node = document.createElement(this.TAG) as HTMLBnumButtonIcon;\n    node.icon = icon;\n    return node;\n  }\n\n  /**\n   * Génère le code HTML d'un bouton icône avec l'icône spécifiée.\n   * @param icon Icône à afficher dans le bouton.\n   * @returns Code HTML créée.\n   */\n  static Write(icon: string, attrs: Record<string, string> = {}): string {\n    return <HTMLBnumButtonIcon {...attrs}>{icon}</HTMLBnumButtonIcon>;\n  }\n  //#endregion Static methods\n}\n","import { ButtonVariation } from 'components/atoms/button';\nimport { BnumConfig } from 'core/utils/BnumConfig';\n\nexport const ID_INPUT = 'bnum-input';\nexport const ID_HINT_TEXT = 'hint-text';\nexport const ID_HINT_TEXT_LABEL = 'hint-text__label';\nexport const ID_HINT_TEXT_HINT = 'hint-text__hint';\nexport const ID_INPUT_ICON = 'input__icon';\nexport const ID_INPUT_BUTTON = 'input__button';\nexport const ID_STATE = 'state';\nexport const ID_STATE_ICON = 'state__icon';\nexport const ID_SUCCESS_TEXT = 'success-text';\nexport const ID_ERROR_TEXT = 'error-text';\n\nexport const CLASS_STATE_TEXT_SUCCESS = 'state__text success';\nexport const CLASS_STATE_TEXT_ERROR = 'state__text error';\n\nexport const DEFAULT_INPUT_TYPE = 'text';\nexport const DEFAULT_BUTTON_VARIATION = ButtonVariation.PRIMARY;\n\nexport const SLOT_HINT = 'hint';\nexport const SLOT_BUTTON = 'button';\nexport const SLOT_SUCCESS = 'success';\nexport const SLOT_ERROR = 'error';\n\nexport const TEXT_VALID_INPUT =\n  BnumConfig.Get('local_keys')?.valid_input || 'Le champs est valide !';\nexport const TEXT_INVALID_INPUT =\n  BnumConfig.Get('local_keys')?.invalid_input || 'Le champs est invalide !';\nexport const TEXT_ERROR_FIELD =\n  BnumConfig.Get('local_keys')?.error_field || 'Ce champ contient une erreur.';\n\nexport const EVENT_BUTTON_CLICK = 'bnum-input:button.click';\nexport const EVENT_INPUT = 'input';\nexport const EVENT_CHANGE = 'change';\n\nexport const ATTRIBUTE_DATA_VALUE = 'data-value';\nexport const ATTRIBUTE_PLACEHOLDER = 'placeholder';\nexport const ATTRIBUTE_TYPE = 'type';\nexport const ATTRIBUTE_DISABLED = 'disabled';\nexport const ATTRIBUTE_STATE = 'state';\nexport const ATTRIBUTE_BUTTON = 'button';\nexport const ATTRIBUTE_BUTTON_ICON = 'button-icon';\nexport const ATTRIBUTE_ICON = 'icon';\nexport const ATTRIBUTE_REQUIRED = 'required';\nexport const ATTRIBUTE_READONLY = 'readonly';\nexport const ATTRIBUTE_PATTERN = 'pattern';\nexport const ATTRIBUTE_MINLENGTH = 'minlength';\nexport const ATTRIBUTE_MAXLENGTH = 'maxlength';\nexport const ATTRIBUTE_AUTOCOMPLETE = 'autocomplete';\nexport const ATTRIBUTE_INPUTMODE = 'inputmode';\nexport const ATTRIBUTE_SPELLCHECK = 'spellcheck';\nexport const ATTRIBUTE_IGNOREVALUE = 'ignorevalue';\nexport const ATTRIBUTE_NAME = 'name';\n\nexport const STATE_SUCCESS = 'success';\nexport const STATE_ERROR = 'error';\nexport const STATE_DISABLED = 'disabled';\nexport const STATE_ICON = 'icon';\nexport const STATE_BUTTON = 'button';\n/**\n * obi = Only Button Icon\n */\nexport const STATE_OBI = 'obi';\nexport const STATE_STATE = 'state';\nexport const ICON_SUCCESS = 'check_circle';\nexport const ICON_ERROR = 'cancel';\n","import { HTMLBnumFragment } from 'components/atoms/fragment/bnum-fragment';\nimport {\n\tCLASS_STATE_TEXT_ERROR,\n\tCLASS_STATE_TEXT_SUCCESS,\n\tDEFAULT_BUTTON_VARIATION,\n\tDEFAULT_INPUT_TYPE,\n\tID_ERROR_TEXT,\n\tID_HINT_TEXT,\n\tID_HINT_TEXT_HINT,\n\tID_HINT_TEXT_LABEL,\n\tID_INPUT,\n\tID_INPUT_BUTTON,\n\tID_INPUT_ICON,\n\tID_STATE,\n\tID_STATE_ICON,\n\tID_SUCCESS_TEXT,\n\tSLOT_BUTTON,\n\tSLOT_ERROR,\n\tSLOT_HINT,\n\tSLOT_SUCCESS,\n\tTEXT_INVALID_INPUT,\n\tTEXT_VALID_INPUT,\n} from './constants';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumIcon } from 'components/atoms/icon/bnum-icon';\nimport { HTMLBnumButton } from 'components/atoms/button';\n\nexport function Render(addonInner: Readonly<string> = EMPTY_STRING) {\n\treturn (\n\t\t<HTMLBnumFragment>\n\t\t\t<label id={ID_HINT_TEXT} for={ID_INPUT} class=\"label-container\">\n\t\t\t\t<span id={ID_HINT_TEXT_LABEL} class=\"label-container--label\">\n\t\t\t\t\t<slot></slot>\n\t\t\t\t</span>\n\t\t\t\t<span id={ID_HINT_TEXT_HINT} class=\"label-container--hint hint-label\">\n\t\t\t\t\t<slot name={SLOT_HINT}></slot>\n\t\t\t\t</span>\n\t\t\t</label>\n\t\t\t<div class=\"container\">\n\t\t\t\t<div class=\"addons\">\n\t\t\t\t\t<div class=\"addon__inner\">\n\t\t\t\t\t\t{addonInner}\n\t\t\t\t\t\t<HTMLBnumIcon id={ID_INPUT_ICON}></HTMLBnumIcon>\n\t\t\t\t\t\t<input class=\"input-like\" id={ID_INPUT} type={DEFAULT_INPUT_TYPE} />\n\t\t\t\t\t</div>\n\t\t\t\t\t<HTMLBnumButton\n\t\t\t\t\t\tid={ID_INPUT_BUTTON}\n\t\t\t\t\t\trounded\n\t\t\t\t\t\tdata-variation={DEFAULT_BUTTON_VARIATION}\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name={SLOT_BUTTON}></slot>\n\t\t\t\t\t</HTMLBnumButton>\n\t\t\t\t</div>\n\t\t\t\t<span id={ID_STATE} class=\"state\">\n\t\t\t\t\t<HTMLBnumIcon id={ID_STATE_ICON} />\n\t\t\t\t\t<span id={ID_SUCCESS_TEXT} class={CLASS_STATE_TEXT_SUCCESS}>\n\t\t\t\t\t\t<slot name={SLOT_SUCCESS}>${TEXT_VALID_INPUT}</slot>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span id={ID_ERROR_TEXT} class={CLASS_STATE_TEXT_ERROR}>\n\t\t\t\t\t\t<slot name={SLOT_ERROR}>{TEXT_INVALID_INPUT}</slot>\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</HTMLBnumFragment>\n\t);\n}\n","export const EVENT_DEFAULT = 'default';\n","import BnumElement from 'components/bnum-element';\nimport { EVENT_DEFAULT } from 'core/utils/constants/constants';\nimport { EVENT_BUTTON_CLICK } from './constants';\nimport { JsEventClick } from './types';\n\nexport function OnButtonClickedInitializer(\n  event: JsEventClick,\n  instance: BnumElement,\n) {\n  event.add(EVENT_DEFAULT, (clickEvent) => {\n    instance.trigger(EVENT_BUTTON_CLICK, {\n      innerEvent: clickEvent,\n    });\n  });\n}\n","import { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport style from './bnum-input.less';\nimport { Attr, Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT } from '../../../core/utils/constants/tags';\nimport { Result, Risky } from '@rotomeca/rop';\nimport { ButtonVariation } from '../button';\nimport { Render } from './bnum-input.internal/template';\nimport {\n\tATTRIBUTE_AUTOCOMPLETE,\n\tATTRIBUTE_BUTTON,\n\tATTRIBUTE_BUTTON_ICON,\n\tATTRIBUTE_DATA_VALUE,\n\tATTRIBUTE_DISABLED,\n\tATTRIBUTE_ICON,\n\tATTRIBUTE_IGNOREVALUE,\n\tATTRIBUTE_INPUTMODE,\n\tATTRIBUTE_MAXLENGTH,\n\tATTRIBUTE_MINLENGTH,\n\tATTRIBUTE_PATTERN,\n\tATTRIBUTE_PLACEHOLDER,\n\tATTRIBUTE_READONLY,\n\tATTRIBUTE_REQUIRED,\n\tATTRIBUTE_SPELLCHECK,\n\tATTRIBUTE_STATE,\n\tATTRIBUTE_TYPE,\n\tDEFAULT_BUTTON_VARIATION,\n\tDEFAULT_INPUT_TYPE,\n\tEVENT_CHANGE,\n\tEVENT_INPUT,\n\tICON_ERROR,\n\tICON_SUCCESS,\n\tID_ERROR_TEXT,\n\tID_INPUT,\n\tID_INPUT_BUTTON,\n\tID_INPUT_ICON,\n\tID_STATE_ICON,\n\tID_SUCCESS_TEXT,\n\tSLOT_BUTTON,\n\tSLOT_ERROR,\n\tSLOT_HINT,\n\tSLOT_SUCCESS,\n\tSTATE_BUTTON,\n\tSTATE_ERROR,\n\tSTATE_OBI,\n\tSTATE_STATE,\n\tSTATE_SUCCESS,\n\tTEXT_ERROR_FIELD,\n\tTEXT_INVALID_INPUT,\n\tTEXT_VALID_INPUT,\n} from './bnum-input.internal/constants';\nimport { STATE_DISABLED, STATE_ICON } from '../button/internal';\nimport { UI } from 'core/decorators/ui';\nimport {\n\tBnumInputCreateOptions,\n\tBnumInputUI,\n\tJsEventClick,\n} from './bnum-input.internal/types';\nimport { Listener } from 'core/decorators/listener';\nimport { OnButtonClickedInitializer } from './bnum-input.internal/listeners';\nimport { Observe } from 'core/decorators/observe';\nimport base from './extra/bnum-input-base.less';\nimport styleStates from './extra/bnum-input-states.less';\n\nexport const INPUT_BASE_STYLE =\n\tBnumElementInternal.ConstructCSSStyleSheet(base);\nexport const INPUT_STYLE_STATES =\n\tBnumElementInternal.ConstructCSSStyleSheet(styleStates);\n\nconst OBSERVED_ATTRIBUTES = [\n\tATTRIBUTE_DATA_VALUE,\n\tATTRIBUTE_PLACEHOLDER,\n\tATTRIBUTE_TYPE,\n\tATTRIBUTE_DISABLED,\n\tATTRIBUTE_STATE,\n\tATTRIBUTE_BUTTON,\n\tATTRIBUTE_BUTTON_ICON,\n\tATTRIBUTE_ICON,\n\tATTRIBUTE_REQUIRED,\n\tATTRIBUTE_READONLY,\n\tATTRIBUTE_PATTERN,\n\tATTRIBUTE_MINLENGTH,\n\tATTRIBUTE_MAXLENGTH,\n\tATTRIBUTE_AUTOCOMPLETE,\n\tATTRIBUTE_INPUTMODE,\n\tATTRIBUTE_SPELLCHECK,\n\t'min',\n\t'max',\n\t'step',\n] as const;\n\n/**\n * Composant Input du design system Bnum.\n * Permet de gérer un champ de saisie enrichi avec gestion d'états, d'icônes, de bouton et d'accessibilité.\n *\n * @structure Sans rien\n * <bnum-input></bnum-input>\n *\n * @structure Avec une légende\n * <bnum-input>Label du champ</bnum-input>\n *\n * @structure Avec une légende et un indice\n * <bnum-input>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input>\n *\n * @structure Avec un bouton\n * <bnum-input button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input>\n *\n * @structure En erreur\n * <bnum-input pattern=\"^[a-zA-Z0-9]+$\" data-value=\"@@@@@\">Label du champ\n * </bnum-input>\n *\n * @structure Avec un état de succès\n * <bnum-input state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input>\n *\n * @structure Avec une icône\n * <bnum-input icon=\"search\">Label du champ</bnum-input>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input>\n *\n * @structure Nombre\n * <bnum-input type=\"number\" data-value=\"42\">Label du champ</bnum-input>\n *\n * @structure Désactivé\n * <bnum-input disabled>\n *   Label du champ\n * </bnum-input>\n *\n * @structure Complet\n * <bnum-input\n *   data-value=\"Valeur initiale\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input>\n *\n * @slot (defaut) - Contenu du label principal du champ.\n * @slot hint - Contenu de l'indice d'utilisation (hint) du champ.\n * @slot success - Contenu du message de succès du champ.\n * @slot error - Contenu du message d'erreur du champ.\n * @slot button - Contenu du bouton interne (si présent).\n *\n * @state success - État de succès.\n * @state error - État d'erreur.\n * @state disabled - État désactivé.\n * @state icon - Présence d'une icône.\n * @state button - Présence d'un bouton.\n * @state obi - Bouton avec icône seulement (sans texte).\n * @state state - Présence d'un état (success / error).\n *\n * @event {MouseEvent} bnum-input:button.click - Événement déclenché au clic sur le bouton interne.\n * @event {InputEvent} input - Événement déclenché à la saisie dans le champ.\n * @event {Event} change - Événement déclenché au changement de valeur du champ.\n *\n * @attr {string} (optional) (default: undefined) data-value - Valeur initiale du champ.\n * @attr {string} (optional) (default: undefined) placeholder - Texte indicatif du champ.\n * @attr {string} (optional) (default: 'text') type - Type de l'input (text, password, email, etc.)\n * @attr {string} (optional) (default: undefined) disabled - Désactive le champ.\n * @attr {string} (optional) (default: undefined) state - État du champ (success, error, etc.).\n * @attr {string} (optional) (default: undefined) button - Présence d'un bouton interne (primary, secondary, danger, ...).\n * @attr {string} (optional) (default: undefined) button-icon - Icône du bouton interne.\n * @attr {string} (optional) (default: undefined) icon - Icône à afficher dans le champ.\n * @attr {string} (optional) (default: undefined) required - Champ requis.\n * @attr {string} (optional) (default: undefined) readonly - Champ en lecture seule.\n * @attr {string} (optional) (default: undefined) pattern - Expression régulière de validation.\n * @attr {string} (optional) (default: undefined) minlength - Longueur minimale du champ.\n * @attr {string} (optional) (default: undefined) maxlength - Longueur maximale du champ.\n * @attr {string} (optional) (default: undefined) autocomplete - Attribut autocomplete HTML.\n * @attr {string} (optional) (default: undefined) inputmode - Mode de saisie (mobile).\n * @attr {string} (optional) (default: undefined) spellcheck - Correction orthographique.\n * @attr {string} (optional) (default: undefined) ignorevalue - Attribut interne pour ignorer la synchronisation de valeur. Ne pas utiliser.\n * @attr {string} (optional) (default: undefined) name - Nom du champ (attribut HTML name).\n *\n * @cssvar {#666} --bnum-input-hint-text-color - Couleur du texte du hint.\n * @cssvar {#eee} --bnum-input-background-color - Couleur de fond de l'input.\n * @cssvar {#666} --bnum-input-color - Couleur du texte de l'input.\n * @cssvar {#3a3a3a} --bnum-input-line-color - Couleur de la ligne/bordure de l'input.\n * @cssvar {#36b37e} --bnum-input-state-success-color - Couleur de l'état de succès.\n * @cssvar {#de350b} --bnum-input-state-error-color - Couleur de l'état d'erreur.\n * @cssvar {inset 0 -2px 0 0 #3a3a3a} --bnum-input-box-shadow - Ombre portée de l'input.\n *\n */\n@Define({\n\ttag: TAG_INPUT,\n\t// eslint-disable-next-line no-restricted-syntax\n\ttemplate: Render(),\n\tstyles: [INPUT_BASE_STYLE, INPUT_STYLE_STATES, style],\n})\n@Observe(OBSERVED_ATTRIBUTES)\nexport class HTMLBnumInput extends BnumElementInternal {\n\t//#region Constants\n\tstatic readonly SYNCED_ATTRIBUTES = [\n\t\tATTRIBUTE_PATTERN,\n\t\tATTRIBUTE_MINLENGTH,\n\t\tATTRIBUTE_MAXLENGTH,\n\t\tATTRIBUTE_AUTOCOMPLETE,\n\t\tATTRIBUTE_INPUTMODE,\n\t\tATTRIBUTE_SPELLCHECK,\n\t\t'min',\n\t\t'max',\n\t\t'step',\n\t] as const;\n\t//#endregion Constants\n\n\t//#region Private fields\n\t/**\n\t * Valeur initiale (pour la réinitialisation du formulaire)\n\t */\n\t#_initValue: string = EMPTY_STRING;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t/** Référence à la classe HTMLBnumInput */\n\t@Self _!: typeof HTMLBnumInput;\n\n\t@UI({\n\t\tstateIcon: `#${ID_STATE_ICON}`,\n\t\ticon: `#${ID_INPUT_ICON}`,\n\t\tbutton: `#${ID_INPUT_BUTTON}`,\n\t\tinput: `#${ID_INPUT}`,\n\t})\n\taccessor #_ui!: BnumInputUI;\n\n\t/**\n\t * Permet d'écouter le clic sur le bouton interne.\n\t */\n\t@Listener(OnButtonClickedInitializer, { lazy: false })\n\taccessor onButtonClicked!: JsEventClick;\n\t// -- Formulaire --\n\n\t/**\n\t * Nom du champ (attribut HTML name).\n\t */\n\t@Attr() accessor name: string = EMPTY_STRING;\n\n\t/**\n\t * Valeur courante du champ de saisie.\n\t */\n\tget value(): string {\n\t\treturn (\n\t\t\tthis.#_ui.input?.value ||\n\t\t\tthis.getAttribute(ATTRIBUTE_DATA_VALUE) ||\n\t\t\tEMPTY_STRING\n\t\t);\n\t}\n\tset value(val: string) {\n\t\tif (this.#_ui.input === null) this.setAttribute(ATTRIBUTE_DATA_VALUE, val);\n\t\telse {\n\t\t\tthis.#_ui.input!.value = val;\n\t\t\tthis.#_setFormValue(val);\n\t\t}\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant.\n\t * Initialise la valeur initiale à partir de l'attribut data-value.\n\t */\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.#_initValue = this.getAttribute(ATTRIBUTE_DATA_VALUE) ?? EMPTY_STRING;\n\t}\n\n\t/**\n\t * Attache un Shadow DOM personnalisé.\n\t */\n\tprotected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n\t\treturn this.attachShadow({ mode: 'open', delegatesFocus: true });\n\t}\n\n\t/**\n\t * Construit le DOM interne et attache les écouteurs d'événements.\n\t */\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_ui.input!.addEventListener(EVENT_INPUT, e => {\n\t\t\tthis.#_inputValueChangedCallback(e);\n\t\t});\n\n\t\tthis.#_ui.input!.addEventListener(EVENT_CHANGE, e => {\n\t\t\tthis.#_inputValueChangedCallback(e);\n\t\t});\n\n\t\tthis.#_initialiseButton().#_update().#_removeValueAttribute();\n\t}\n\n\t/**\n\t * Met à jour le composant lors d'un changement d'attribut.\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tif (this.alreadyLoaded === false) return 'break';\n\n\t\tif (newVal == oldVal) return;\n\n\t\tswitch (name) {\n\t\t\tcase ATTRIBUTE_DATA_VALUE:\n\t\t\t\tif (this.attr(ATTRIBUTE_IGNOREVALUE) !== null) {\n\t\t\t\t\tthis.removeAttribute(ATTRIBUTE_IGNOREVALUE);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (newVal !== null) {\n\t\t\t\t\tthis._p_internal.setFormValue(newVal);\n\n\t\t\t\t\tif (this.#_ui.input) this.#_ui.input.value = newVal;\n\n\t\t\t\t\tthis.#_removeValueAttribute();\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Appelé après le flush du DOM pour synchroniser l'état.\n\t */\n\tprotected _p_postFlush(): void {\n\t\tthis.#_update();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t// --- Formulaire --\n\t/**\n\t * Réinitialise la valeur du champ lors d'une remise à zéro du formulaire parent.\n\t */\n\tformResetCallback(): void {\n\t\tthis.value = this.#_initValue;\n\t}\n\n\t/**\n\t * Active ou désactive le champ selon l'état du fieldset parent.\n\t */\n\tformDisabledCallback(disabled: boolean): void {\n\t\tif (disabled) this.setAttribute(ATTRIBUTE_DISABLED, 'disabled');\n\t\tthis.#_sync();\n\t}\n\n\t// -- Helper --\n\t/**\n\t * Active le bouton interne avec texte, icône et variation éventuels.\n\t * @param options Objet contenant le texte, l'icône et la variation du bouton.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tenableButton({\n\t\ttext = undefined,\n\t\ticon = undefined,\n\t\tvariation = DEFAULT_BUTTON_VARIATION,\n\t}: { text?: string; icon?: string; variation?: ButtonVariation } = {}): this {\n\t\tthis.setAttribute(ATTRIBUTE_BUTTON, variation);\n\n\t\tif (text !== undefined) {\n\t\t\tthis.querySelector(`slot[name=\"${SLOT_BUTTON}\"]`)?.remove?.();\n\t\t\tconst span = this._p_createSpan({\n\t\t\t\tchild: text,\n\t\t\t\tattributes: { slot: 'button' },\n\t\t\t});\n\t\t\tthis.appendChild(span);\n\t\t}\n\n\t\tif (icon !== undefined) {\n\t\t\tthis.setAttribute(ATTRIBUTE_BUTTON_ICON, icon);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Active uniquement l'icône du bouton interne (sans texte).\n\t * @param icon Nom de l'icône à afficher sur le bouton.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tenableButtonIconOnly(icon: string): this {\n\t\tthis.querySelector(`slot[name=\"${SLOT_BUTTON}\"]`)?.remove?.();\n\t\tthis.removeAttribute(ATTRIBUTE_BUTTON);\n\t\tthis.setAttribute(ATTRIBUTE_BUTTON_ICON, icon);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Masque le bouton interne.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\thideButton(): this {\n\t\tthis.removeAttribute(ATTRIBUTE_BUTTON);\n\t\tthis.removeAttribute(ATTRIBUTE_BUTTON_ICON);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit l'état de succès avec un message optionnel.\n\t * @param message Message de succès à afficher.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tsetSuccessState(message?: string): this {\n\t\treturn this.#_setState(SLOT_SUCCESS, message);\n\t}\n\n\t/**\n\t * Définit l'état d'erreur avec un message optionnel.\n\t * @param message Message d'erreur à afficher.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tsetErrorState(message?: string): this {\n\t\treturn this.#_setState(SLOT_ERROR, message);\n\t}\n\n\t/**\n\t * Définit une icône à afficher dans le champ.\n\t * @param icon Nom de l'icône à afficher.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tsetIcon(icon: string): this {\n\t\tthis.setAttribute(ATTRIBUTE_ICON, icon);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Supprime l'icône affichée dans le champ.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tremoveIcon(): this {\n\t\tthis.removeAttribute(ATTRIBUTE_ICON);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit un indice d'utilisation (hint) pour le champ.\n\t * @param hint Texte de l'indice à afficher.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tsetHint(hint: string): this {\n\t\tthis.removeHint();\n\t\tconst span = this._p_createSpan({\n\t\t\tchild: hint,\n\t\t\tattributes: { slot: SLOT_HINT },\n\t\t});\n\t\tthis.appendChild(span);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Supprime l'indice d'utilisation (hint) du champ.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tremoveHint(): this {\n\t\tthis.querySelector(`slot[name=\"${SLOT_HINT}\"]`)?.remove?.();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit le label principal du champ.\n\t * @param label Texte ou élément HTML à utiliser comme label.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tsetLabel(label: string | HTMLElement): this {\n\t\t// On supprime tout ce qui n'a pas l'attribut slot\n\t\tconst nodes = Array.from(this.childNodes);\n\t\tfor (const node of nodes) {\n\t\t\tif (node instanceof HTMLElement) {\n\t\t\t\tconst element = node as HTMLElement;\n\n\t\t\t\tif (!element.hasAttribute('slot')) this.removeChild(element);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof label === 'string')\n\t\t\tthis.appendChild(this._p_createTextNode(label));\n\t\telse this.appendChild(label);\n\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Supprime `data-value` et ajoute `ignorevalue` avant pour éviter les effets de bords\n\t * @returns Chaînage\n\t */\n\t#_removeValueAttribute(): this {\n\t\tthis.attr(ATTRIBUTE_IGNOREVALUE, 'true').removeAttribute(\n\t\t\tATTRIBUTE_DATA_VALUE,\n\t\t);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'état visuel et fonctionnel du composant selon ses attributs.\n\t * @private\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_update(): this {\n\t\tthis._p_clearStates();\n\n\t\tif (this.#_ui.input?.value || false) this._p_addState('value');\n\n\t\tconst btnValue = this.attr(ATTRIBUTE_BUTTON);\n\t\tif (btnValue !== null) {\n\t\t\tthis._p_addState(STATE_BUTTON);\n\t\t\tswitch (btnValue) {\n\t\t\t\tcase ButtonVariation.PRIMARY:\n\t\t\t\t\tthis.#_ui.button!.variation = ButtonVariation.PRIMARY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ButtonVariation.SECONDARY:\n\t\t\t\t\tthis.#_ui.button!.variation = ButtonVariation.SECONDARY;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ButtonVariation.DANGER:\n\t\t\t\t\tthis.#_ui.button!.variation = ButtonVariation.DANGER;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst button_icon = this.attr(ATTRIBUTE_BUTTON_ICON);\n\t\tif (button_icon !== null) {\n\t\t\tthis.#_ui.button!.icon = button_icon;\n\n\t\t\tif (!this._p_hasState(STATE_BUTTON))\n\t\t\t\tthis._p_addStates(STATE_BUTTON, STATE_OBI);\n\t\t\telse if (btnValue === EMPTY_STRING) this._p_addState(STATE_OBI);\n\t\t}\n\n\t\tconst icon = this.attr(ATTRIBUTE_ICON);\n\t\tif (icon !== null) {\n\t\t\tthis._p_addState(STATE_ICON);\n\t\t\tthis.#_ui.icon!.icon = icon;\n\t\t}\n\n\t\tif (this.attr(ATTRIBUTE_DISABLED) !== null)\n\t\t\tthis._p_addState(STATE_DISABLED);\n\n\t\treturn this.#_updateState(this.attr(ATTRIBUTE_STATE)).#_sync();\n\t}\n\n\t/**\n\t * Synchronise les propriétés et attributs de l'input interne.\n\t * Met à jour les propriétés HTML de l'input selon les attributs du composant.\n\t * @private\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_sync(): this {\n\t\tif (!this.#_ui.input) return this;\n\n\t\tconst input = this.#_ui.input;\n\n\t\t// 1. Propriétés de base\n\t\tinput.value = this.value;\n\t\tinput.type = this.getAttribute(ATTRIBUTE_TYPE) || DEFAULT_INPUT_TYPE;\n\t\tinput.placeholder =\n\t\t\tthis.getAttribute(ATTRIBUTE_PLACEHOLDER) || EMPTY_STRING;\n\n\t\t// 2. États Booléens (On utilise .disabled / .readOnly pour la réactivité JS)\n\t\tinput.disabled =\n\t\t\tthis.hasAttribute(ATTRIBUTE_DISABLED) || this._p_hasState(STATE_DISABLED);\n\t\tinput.readOnly = this.hasAttribute(ATTRIBUTE_READONLY);\n\t\tinput.required = this.hasAttribute(ATTRIBUTE_REQUIRED);\n\n\t\t// 3. Validation & UX (On utilise setAttribute pour les attributs HTML5)\n\t\tfor (const attr of this._.SYNCED_ATTRIBUTES) {\n\t\t\tthis.#_setFieldAttr(attr);\n\t\t}\n\n\t\treturn this.#_updateA11y();\n\t}\n\n\t/**\n\t * Met à jour l'accessibilité (a11y) de l'input selon l'état.\n\t * Met à jour les attributs ARIA et la validité de l'input.\n\t * @private\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_updateA11y(): this {\n\t\tif (!this.#_ui.input) return this;\n\n\t\treturn this.#_setValidity();\n\t}\n\n\t/**\n\t * Met à jour l'état visuel selon l'état passé en paramètre.\n\t * @private\n\t * @param state L'état à appliquer (success, error, etc.)\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_updateState(state: Nullable<string>): this {\n\t\tif (state !== null) {\n\t\t\tswitch (state) {\n\t\t\t\tcase STATE_SUCCESS:\n\t\t\t\t\tthis._p_addStates(STATE_STATE, STATE_SUCCESS);\n\t\t\t\t\tthis.#_ui.stateIcon!.icon = ICON_SUCCESS;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE_ERROR:\n\t\t\t\t\tthis._p_addStates(STATE_STATE, STATE_ERROR);\n\t\t\t\t\tthis.#_ui.stateIcon!.icon = ICON_ERROR;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit l'état (succès ou erreur) et le message associé.\n\t * @private\n\t * @param state Type d'état (success ou error).\n\t * @param message Message à afficher.\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_setState(\n\t\tstate: typeof SLOT_SUCCESS | typeof SLOT_ERROR,\n\t\tmessage?: string,\n\t): this {\n\t\tthis.setAttribute(ATTRIBUTE_STATE, state);\n\n\t\tif (message) {\n\t\t\tthis.querySelector(`slot[name=\"${state}\"]`)?.remove?.();\n\t\t\tconst span = this._p_createSpan({\n\t\t\t\tchild: message,\n\t\t\t\tattributes: { slot: state },\n\t\t\t});\n\t\t\tthis.appendChild(span);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour la validité de l'input et les messages d'erreur/succès.\n\t * Gère également les attributs ARIA liés à la validation.\n\t * @private\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_setValidity(): this {\n\t\tif (!this.#_ui.input) return this;\n\n\t\tconst stateAttr = this.attr(ATTRIBUTE_STATE);\n\t\tconst isManualError = stateAttr === STATE_ERROR;\n\n\t\tif (isManualError) {\n\t\t\tthis.#_internalSetValidity(\n\t\t\t\t{ customError: true },\n\t\t\t\tTEXT_ERROR_FIELD,\n\t\t\t\tthis.#_ui.input,\n\t\t\t);\n\t\t} else {\n\t\t\tthis.#_safeCheckValidity().match({\n\t\t\t\tOk: isValid => {\n\t\t\t\t\tconst isSuccess =\n\t\t\t\t\t\tisValid && this.#_ui.input!.validationMessage === EMPTY_STRING;\n\n\t\t\t\t\tif (isSuccess) {\n\t\t\t\t\t\tthis.#_internalSetValidity({});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.#_internalSetValidity(\n\t\t\t\t\t\t\tthis.#_ui.input!.validity,\n\t\t\t\t\t\t\tthis.#_ui.input!.validationMessage,\n\t\t\t\t\t\t\tthis.#_ui.input!,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn void 0;\n\t\t\t\t},\n\t\t\t\tErr: () => this.#_internalSetValidity({}), // Fallback de sécurité\n\t\t\t});\n\t\t}\n\n\t\treturn this.#_syncValidationUI(isManualError);\n\t}\n\n\t/**\n\t * Gère l'interface utilisateur de validation (messages, icônes, ARIA).\n\t * @param isManualError Si l'erreur est définie manuellement via l'attribut state.\n\t * @returns Cette instance pour chaînage.\n\t */\n\t#_syncValidationUI(isManualError: boolean): this {\n\t\tconst input = this.#_ui.input!;\n\t\tconst hasNativeError = input.validationMessage !== EMPTY_STRING;\n\t\tconst isError = isManualError || (hasNativeError && !input.validity.valid);\n\t\tconst isSuccess = !isManualError && hasNativeError && input.validity.valid;\n\t\tconst hasState = isError || isSuccess;\n\n\t\tif (hasState) {\n\t\t\tthis._p_addStates(STATE_STATE, isSuccess ? STATE_SUCCESS : STATE_ERROR);\n\n\t\t\tconst successText =\n\t\t\t\tthis.#_ui.input!.validationMessage || TEXT_VALID_INPUT;\n\t\t\tconst errorText =\n\t\t\t\tthis.#_ui.input!.validationMessage || TEXT_INVALID_INPUT;\n\t\t\tconst validationText = isSuccess ? successText : errorText;\n\t\t\tconst slotTextId = isSuccess ? ID_SUCCESS_TEXT : ID_ERROR_TEXT;\n\n\t\t\tthis.shadowRoot!.querySelector<HTMLSlotElement>(\n\t\t\t\t`#${slotTextId} slot`,\n\t\t\t)!.innerText = validationText;\n\n\t\t\tinput.setAttribute('aria-invalid', isError ? 'true' : 'false');\n\n\t\t\tconst descriptions: string[] = [];\n\t\t\tif (isError) descriptions.push(ID_ERROR_TEXT);\n\t\t\tif (isSuccess) descriptions.push(ID_SUCCESS_TEXT);\n\n\t\t\tinput.setAttribute('aria-describedby', descriptions.join(' '));\n\t\t} else {\n\t\t\tinput.removeAttribute('aria-invalid');\n\t\t\tinput.removeAttribute('aria-describedby');\n\t\t}\n\n\t\tconst finalState = isError ? STATE_ERROR : isSuccess ? STATE_SUCCESS : null;\n\t\treturn this.#_updateState(finalState);\n\t}\n\n\t/**\n\t * Initialise le bouton interne et son écouteur de clic.\n\t * Ajoute un écouteur d'événement sur le bouton si nécessaire.\n\t * @private\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\t#_initialiseButton(): this {\n\t\tif (this.#_ui.button !== null) {\n\t\t\tthis.#_ui.button.addEventListener('click', e => {\n\t\t\t\tthis.onButtonClicked.call(e);\n\t\t\t});\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Callback appelé lors d'un changement de valeur de l'input.\n\t * @private\n\t * @param e Evénement de changement de valeur.\n\t */\n\t#_inputValueChangedCallback(e: Event): void {\n\t\tthis._p_inputValueChangedCallback(e);\n\t}\n\n\t/**\n\t * Callback protégé appelé lors d'un changement de valeur de l'input.\n\t * @protected\n\t * @param e Evénement de changement de valeur.\n\t * @returns Résultat de l'opération.\n\t */\n\t@Risky()\n\tprotected _p_inputValueChangedCallback(e: Event): Result<void> {\n\t\tthis.#_setFormValue(this.#_ui.input!.value);\n\t\tthis.#_update();\n\n\t\treturn this.#_dispatchEvent(e).tapError(() => {\n\t\t\tthis.#_dispatchInputEventFallback(e);\n\t\t});\n\t}\n\n\t/**\n\t * Transfère un attribut du composant vers l'input interne si présent.\n\t * @private\n\t * @param attrName Nom de l'attribut à synchroniser.\n\t */\n\t#_setFieldAttr(attrName: string): this {\n\t\tconst val = this.getAttribute(attrName);\n\t\tif (val !== null) this.#_ui.input!.setAttribute(attrName, val);\n\t\telse this.#_ui.input!.removeAttribute(attrName);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit la valeur du formulaire interne.\n\t * @param value Valeur à définir.\n\t * @returns Résultat de l'opération.\n\t */\n\t@Risky()\n\t#_setFormValue(value: string): Result<void> {\n\t\tthis._p_internal.setFormValue(value);\n\t\treturn Result.Ok();\n\t}\n\n\t/**\n\t * Met à jour la validité interne de l'input.\n\t * @param flags Drapeaux de validité.\n\t * @param message Message de validation.\n\t * @param anchor Ancre HTML pour le message.\n\t * @returns Résultat de l'opération.\n\t */\n\t@Risky()\n\t#_internalSetValidity(\n\t\tflags?: ValidityStateFlags | undefined,\n\t\tmessage?: string | undefined,\n\t\tanchor?: HTMLElement | undefined,\n\t): Result<void> {\n\t\treturn this._p_internal.setValidity(flags, message, anchor) as any;\n\t}\n\n\t/**\n\t * Fait une vérification sécurisée de la validité de l'input.\n\t * @returns Résultat de l'opération avec la validité.\n\t */\n\t@Risky()\n\t#_safeCheckValidity(): Result<boolean> {\n\t\treturn this.#_ui.input!.checkValidity() as any;\n\t}\n\n\t/**\n\t * Effectue la dispatch de l'événement passé en paramètre.\n\t * @param e Evénement à dispatcher.\n\t * @returns Résultat de l'opération.\n\t */\n\t@Risky()\n\t#_dispatchEvent(e: Event): Result<void> {\n\t\tthis.dispatchEvent(e);\n\t\treturn Result.Ok();\n\t}\n\n\t/**\n\t * Fallback pour la dispatch des événements input/change.\n\t * @param e Evènement qui pose problème\n\t */\n\t#_dispatchInputEventFallback(e: Event): void {\n\t\tthis.dispatchEvent(\n\t\t\te.type === 'input'\n\t\t\t\t? new InputEvent('input', {\n\t\t\t\t\t\tdata: this.value,\n\t\t\t\t\t\tinputType: this.attr('type') || 'text',\n\t\t\t\t\t})\n\t\t\t\t: new Event('change'),\n\t\t);\n\t}\n\t//#endregion Private methods\n\n\t//#region Protected methods\n\tprotected _p_initialiseButton() {\n\t\treturn this.#_initialiseButton();\n\t}\n\t//#endregion Protected methods\n\n\t//#region Static methods\n\t/**\n\t * Crée une instance du composant avec les options fournies.\n\t * @param label Texte du label principal.\n\t * @param options Options d'initialisation (attributs et slots).\n\t * @returns {HTMLBnumInput} Instance du composant.\n\t */\n\tstatic Create(\n\t\tlabel: string,\n\t\toptions: BnumInputCreateOptions = {},\n\t): HTMLBnumInput {\n\t\tconst slotsMap: Partial<Record<keyof BnumInputCreateOptions, string>> = {\n\t\t\thint: SLOT_HINT,\n\t\t\tsuccess: SLOT_SUCCESS,\n\t\t\terror: SLOT_ERROR,\n\t\t\tbtnText: SLOT_BUTTON,\n\t\t};\n\t\tconst el = document.createElement(this.TAG) as HTMLBnumInput;\n\t\tel.textContent = label;\n\n\t\tfor (const [key, value] of Object.entries(options)) {\n\t\t\tif (value === undefined) continue;\n\n\t\t\tconst slotName = slotsMap[key as keyof BnumInputCreateOptions];\n\t\t\tif (slotName) this.#_CreateSlotElement(el, slotName, value);\n\t\t\telse el.setAttribute(key, value);\n\t\t}\n\n\t\treturn el;\n\t}\n\n\t/**\n\t * Helper privé statique pour créer les éléments de slot.\n\t */\n\tstatic #_CreateSlotElement(\n\t\tnode: HTMLBnumInput,\n\t\tslotName: string,\n\t\tcontent: Nullable<string>,\n\t) {\n\t\tif (content) {\n\t\t\tconst element = document.createElement('span');\n\t\t\telement.slot = slotName;\n\t\t\telement.textContent = content;\n\t\t\tnode.appendChild(element);\n\t\t}\n\t}\n\n\tstatic CreateRender(html: string = EMPTY_STRING): string {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\treturn Render(html);\n\t}\n\t//#endregion Static methods\n}\n","import { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT_NUMBER } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { ATTRIBUTE_TYPE } from '../input/bnum-input.internal/constants';\nimport { BnumInputNumericCreateOptions } from '../input/bnum-input.internal/types';\nimport style from './bnum-input-number.less';\n\nconst SHEET = HTMLBnumInput.ConstructCSSStyleSheet(style);\nconst TYPE = 'number';\n\n/**\n * Input nombre.\n *\n * @structure Sans rien\n * <bnum-input-number></bnum-input-number>\n *\n * @structure Avec une légende\n * <bnum-input-number>Label du champ</bnum-input-number>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-number>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-number>\n *\n * @structure Avec un bouton\n * <bnum-input-number button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-number>\n *\n * @structure En erreur\n * <bnum-input-number min=\"200\" data-value=\"5\">Label du champ\n * </bnum-input-number>\n *\n * @structure Avec un état de succès\n * <bnum-input-number state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-number>\n *\n * @structure Avec une icône\n * <bnum-input-number icon=\"search\">Label du champ</bnum-input-number>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-number placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-number>\n *\n * @structure Désactivé\n * <bnum-input-number disabled>\n *   Label du champ\n * </bnum-input-number>\n *\n * @structure Complet\n * <bnum-input-number\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-number>\n *\n * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n *\n */\n@Define({ tag: TAG_INPUT_NUMBER })\nexport class HTMLBnumInputNumber extends HTMLBnumInput {\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  protected _p_preload(): void {\n    this.setAttribute(ATTRIBUTE_TYPE, TYPE);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    super._p_buildDOM();\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => x !== ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns Instance du composant.\n   */\n  static Create(\n    label: string,\n    options: BnumInputNumericCreateOptions = {},\n  ): HTMLBnumInputNumber {\n    const finalOptions = {\n      type: TYPE,\n      ...options,\n    };\n    return super.Create(label, finalOptions) as HTMLBnumInputNumber;\n  }\n\n  static get AdditionnalStylesheet(): CSSStyleSheet {\n    return SHEET;\n  }\n}\n","import { Define, SetAttr } from '../../../core/decorators';\nimport { TAG_INPUT_DATE } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInputNumber } from '../input-number/bnum-input-number';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { ATTRIBUTE_TYPE } from '../input/bnum-input.internal/constants';\nimport { BnumInputNumericCreateOptions } from '../input/bnum-input.internal/types';\n\nconst TYPE = 'date';\n\n/**\n * Input de date.\n *\n * @structure Sans rien\n * <bnum-input-date></bnum-input-date>\n *\n * @structure Avec une légende\n * <bnum-input-date>Label du champ</bnum-input-date>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-date>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-date>\n *\n * @structure Avec un bouton\n * <bnum-input-date button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-date>\n *\n * @structure En erreur\n * <bnum-input-date min=\"2025-01-01\" data-value=\"2024-01-01\">Label du champ\n * </bnum-input-date>\n *\n * @structure Avec un état de succès\n * <bnum-input-date state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-date>\n *\n * @structure Avec une icône\n * <bnum-input-date icon=\"search\">Label du champ</bnum-input-date>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-date placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-date>\n *\n * @structure Désactivé\n * <bnum-input-date disabled>\n *   Label du champ\n * </bnum-input-date>\n *\n * @structure Complet\n * <bnum-input-date\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-date>\n *\n * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n *\n */\n@Define({ tag: TAG_INPUT_DATE })\nexport class HTMLBnumInputDate extends HTMLBnumInput {\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [\n      ...super._p_getStylesheets(),\n      HTMLBnumInputNumber.AdditionnalStylesheet,\n    ];\n  }\n\n  @SetAttr(ATTRIBUTE_TYPE, TYPE)\n  protected _p_preload(): void {}\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    super._p_buildDOM();\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => x !== ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns Instance du composant.\n   */\n  static Create(\n    label: string,\n    options: BnumInputNumericCreateOptions = {},\n  ): HTMLBnumInputDate {\n    const finalOptions = {\n      type: TYPE,\n      ...options,\n    };\n    return super.Create(label, finalOptions) as HTMLBnumInputDate;\n  }\n}\n","import { BnumConfig } from 'core/utils/BnumConfig';\n\nexport const ID_ACTIONS_CONTAINER = 'input-search-actions-container';\nexport const ID_CLEAR_BUTTON = 'input-clear-button';\nexport const SLOT_ACTIONS = 'actions';\nexport const EVENT_SEARCH = 'bnum-input-search:search';\nexport const EVENT_BUTTON_CLICK = 'bnum-input:button.click';\nexport const EVENT_CLEAR = 'bnum-input-search:clear';\nexport const TEXT_SEARCH_FIELD =\n  BnumConfig.Get('local_keys')?.search_field || 'Rechercher';\nexport const BUTTON_ICON = 'search';\nexport const INPUT_TYPE = 'search';\n","// type: decorator\n\nimport { delegate } from '../utils/eventsFunctions';\nimport Log from '../utils/Log';\nimport { Nullable } from '../utils/types';\n\n/**\n * Décorateur pour attacher automatiquement un écouteur d'événement.\n * La méthode décorée doit retourner la fonction de callback.\n *  @param eventName Nom de l'événement à écouter (ex: 'click')\n *  @param option Sélecteur CSS pour le délégateur (optionnel)\n */\nexport function Listen(\n  eventName: string,\n  { selector = null }: { selector?: Nullable<string> } = {},\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') {\n      throw new Error('@Listen ne peut être utilisé que sur des méthodes.');\n    }\n\n    // On ajoute un initialiseur qui s'exécutera à la création de chaque instance\n    context.addInitializer(function (this: any) {\n      const handler = originalMethod.call(this);\n\n      if (typeof handler === 'function') {\n        const boundHandler = handler.bind(this);\n\n        if (selector) delegate(this, eventName, selector, boundHandler);\n        else this.addEventListener(eventName, boundHandler);\n      } else {\n        Log.warn(\n          '@Listen',\n          `La méthode \"${String(context.name)}\" n'a pas renvoyé de fonction pour l'événement \"${eventName}\".`,\n        );\n      }\n    });\n  };\n}\n","// type: functions\n// descriptions: Fonctions utilitaires pour la gestion des événements DOM\n\n/**\n * Délègue un événement à un sélecteur spécifique à partir d'une cible.\n * @param  target Élément sur lequel écouter l'événement\n * @param  event Nom de l'événement (ex: 'click')\n * @param  selector Sélecteur CSS pour filtrer la cible\n * @param  callback Fonction appelée lors de l'événement\n */\nexport function delegate<T extends HTMLElement>(\n  target: T,\n  event: string,\n  selector: string,\n  callback: (e: CustomEvent) => void,\n): void {\n  target.addEventListener(event, (e: Event) => {\n    if (!(e.target instanceof HTMLElement)) return;\n\n    // On cherche l'élément correspondant au sélecteur le plus proche\n    const element = e.target.closest(selector);\n\n    // On vérifie que l'élément trouvé est bien à l'intérieur de notre \"target\"\n    if (element && target.contains(element)) {\n      callback(\n        new CustomEvent(event, {\n          detail: { innerEvent: e, target: element },\n        }),\n      );\n    }\n  });\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport { HTMLBnumButtonIcon } from '../icon-button/bnum-icon-button';\nimport style from './bnum-input-search.less';\nimport {\n  Autobind,\n  Define,\n  Fire,\n  InitAttr,\n  SetAttr,\n} from '../../../core/decorators';\nimport { TAG_INPUT_SEARCH } from '../../../core/utils/constants/tags';\nimport { Render } from '../input/bnum-input.internal/template';\nimport {\n  ATTRIBUTE_BUTTON,\n  ATTRIBUTE_BUTTON_ICON,\n  ATTRIBUTE_DISABLED,\n  ATTRIBUTE_PLACEHOLDER,\n  ATTRIBUTE_TYPE,\n  ID_INPUT_BUTTON,\n} from '../input/bnum-input.internal/constants';\nimport {\n  BUTTON_ICON,\n  EVENT_CLEAR,\n  EVENT_SEARCH,\n  ID_ACTIONS_CONTAINER,\n  ID_CLEAR_BUTTON,\n  INPUT_TYPE,\n  SLOT_ACTIONS,\n} from './bnum-input-search.internal/constants';\nimport { UI } from 'core/decorators/ui';\nimport { Listen } from 'core/decorators/listen';\nimport { Result, Risky } from '@rotomeca/rop';\nimport { BnumInputSearchCreateOptions } from './bnum-input-search.internal/types';\n\nconst SHEET = HTMLBnumInput.ConstructCSSStyleSheet(style);\n\n//#region Template\nconst TEMPLATE = (\n  <div id={ID_ACTIONS_CONTAINER}>\n    <HTMLBnumButtonIcon id={ID_CLEAR_BUTTON}>close</HTMLBnumButtonIcon>\n    <slot name={SLOT_ACTIONS}></slot>\n  </div>\n);\n//#endregion Template\n/**\n * Composant d'input de recherche.\n *\n * Utilise le composant de base `bnum-input` avec des configurations spécifiques pour la recherche.\n *\n * @structure Basique\n * <bnum-input-search>Label de recherche</bnum-input-search>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-search>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-search>\n *\n * @structure Désactivé\n * <bnum-input-search disabled placeholder=\"Recherche désactivée\">\n *   Label du champ\n * </bnum-input-search>\n *\n * @structure Avec des boutons custom\n * <bnum-input-search placeholder=\"Recherche avec des boutons\">\n *   Label du champ\n *   <bnum-icon-button slot=\"actions\">filter_list</bnum-icon-button>\n *\n * </bnum-input-search>\n *\n * @slot button - Contenu du bouton de recherche (texte ou icône). (Inutilisé)\n * @slot actions - Contenu des actions personnalisées à droite du champ de recherche.\n *\n * @event {CustomEvent<{ value: string; name: string; caller: HTMLBnumInputSearch }>} bnum-input-search:search - Événement déclenché au clic par le bouton interne ou à la validation par la touche \"Entrée\". Envoie la valeur actuelle de l'input de recherche.\n * @event {MouseEvent} bnum-input:button.click - Événement déclenché au clic sur le bouton interne.\n * @event {CustomEvent<{ caller: HTMLBnumInputSearch }>} bnum-input-search:clear - Événement déclenché lors du clic sur le bouton de vidage du champ de recherche.\n *\n * @attr {string} (default: 'search') button-icon - Icône du bouton interne. Ne pas modifier, toujours 'search' pour ce composant.\n * @attr {string} (default: 'text') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'text' pour ce composant.\n * @attr {undefined} (default: undefined) button - Attribut pour afficher le bouton interne. Ne pas modifier, toujours présent pour ce composant.\n */\n@Define({ template: Render(TEMPLATE), tag: TAG_INPUT_SEARCH })\nexport class HTMLBnumInputSearch extends HTMLBnumInput {\n  //#region Private fields\n  @UI({\n    emptyButton: `#${ID_ACTIONS_CONTAINER} ${HTMLBnumButtonIcon.TAG}`,\n  })\n  accessor #_ui!: {\n    emptyButton: HTMLBnumButtonIcon;\n  };\n  //#endregion Private fields\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant de recherche.\n   */\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Précharge les attributs spécifiques à l'input de recherche.\n   * Définit le placeholder et l'icône du bouton si non présents.\n   */\n  @SetAttr(ATTRIBUTE_BUTTON_ICON, 'search')\n  @InitAttr(\n    ATTRIBUTE_PLACEHOLDER,\n    BnumConfig.Get('local_keys')?.search_field || 'Rechercher',\n  )\n  protected _p_preload(): void {}\n\n  protected _p_buildDOM(): void {\n    super._p_buildDOM();\n\n    this.#_ui.emptyButton!.addEventListener('click', () => {\n      this.value = EMPTY_STRING;\n      this._p_inputValueChangedCallback(new Event('input'));\n      this.#_triggerEventSearch();\n      this.trigger(EVENT_CLEAR, { caller: this });\n    });\n  }\n\n  /**\n   * Attache les événements nécessaires au composant.\n   * Supprime les attributs inutiles et gère les événements de recherche.\n   */\n  protected _p_attach(): void {\n    super._p_attach();\n\n    this.removeAttribute(ATTRIBUTE_BUTTON);\n    this.removeAttribute(ATTRIBUTE_BUTTON_ICON);\n\n    this.onButtonClicked.add(EVENT_DEFAULT, this.#_triggerEventSearch);\n\n    this.#_onKeyDown();\n  }\n\n  @Risky()\n  protected _p_inputValueChangedCallback(e: Event): Result<void> {\n    this.removeAttribute(ATTRIBUTE_BUTTON);\n    this.setAttribute(ATTRIBUTE_BUTTON_ICON, BUTTON_ICON);\n\n    const result = super._p_inputValueChangedCallback?.(e);\n\n    this.removeAttribute(ATTRIBUTE_BUTTON);\n\n    return result;\n  }\n\n  /**\n   * Nettoie les attributs après le rendu du composant.\n   */\n  protected _p_postFlush(): void {\n    this.removeAttribute(ATTRIBUTE_BUTTON);\n    this.setAttribute(ATTRIBUTE_BUTTON_ICON, BUTTON_ICON);\n    super._p_postFlush();\n    this.removeAttribute(ATTRIBUTE_BUTTON);\n  }\n  //#endregion Lifecycle\n  //#region Public Methods\n  /**\n   * Désactive le bouton de recherche.\n   */\n  disableSearchButton(): this {\n    (this._p_isShadowElement() === false ? this : this.shadowRoot!)\n      .querySelector(`#${ID_INPUT_BUTTON}`)\n      ?.setAttribute(ATTRIBUTE_DISABLED, ATTRIBUTE_DISABLED);\n    return this;\n  }\n\n  /**\n   * Active le bouton de recherche.\n   */\n  enableSearchButton(): this {\n    (this._p_isShadowElement() === false ? this : this.shadowRoot!)\n      .querySelector(`#${ID_INPUT_BUTTON}`)\n      ?.removeAttribute(ATTRIBUTE_DISABLED);\n    return this;\n  }\n  //#endregion Public Methods\n  //#region Private Methods\n\n  /**\n   * Déclenche l'événement de recherche avec la valeur actuelle de l'input.\n   * @private\n   */\n  @Autobind\n  @Fire(EVENT_SEARCH)\n  #_triggerEventSearch() {\n    return {\n      value: this.value,\n      name: this.name,\n      caller: this,\n    };\n  }\n\n  @Listen('keydown')\n  #_onKeyDown() {\n    return (e: KeyboardEvent) => {\n      if (e.key === 'Enter') {\n        this.#_triggerEventSearch();\n      }\n    };\n  }\n  //#endregion Private Methods\n  //#region Static Methods\n  /**\n   * Retourne la liste des attributs observés, en excluant ceux spécifiques à la recherche.\n   * @inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => {\n      switch (x) {\n        case ATTRIBUTE_TYPE:\n        case ATTRIBUTE_BUTTON:\n        case ATTRIBUTE_BUTTON_ICON:\n          return false;\n\n        default:\n          return true;\n      }\n    });\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInput} Instance du composant.\n   */\n  static Create(\n    label: string,\n    options: BnumInputSearchCreateOptions = {},\n  ): HTMLBnumInputSearch {\n    const finalOptions = {\n      type: INPUT_TYPE,\n      ...options,\n    };\n    return super.Create(label, finalOptions) as HTMLBnumInputSearch;\n  }\n  //#endregion Static Methods\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_INPUT_TEXT } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { ATTRIBUTE_TYPE } from '../input/bnum-input.internal/constants';\nimport { BnumInputCreateOptions } from '../input/bnum-input.internal/types';\n\nconst TYPE_TEXT = 'text';\n\ntype BnumInputTextCreateOption = Omit<\n  BnumInputCreateOptions,\n  'text' | 'min' | 'max' | 'step'\n>;\n\n/**\n * Input texte.\n *\n * @structure Sans rien\n * <bnum-input-text></bnum-input-text>\n *\n * @structure Avec une légende\n * <bnum-input-text>Label du champ</bnum-input-text>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-text>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-text>\n *\n * @structure Avec un bouton\n * <bnum-input-text button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-text>\n *\n * @structure En erreur\n * <bnum-input-text pattern=\"^[a-zA-Z0-9]+$\" data-value=\"@@@@@\">Label du champ\n * </bnum-input-text>\n *\n * @structure Avec un état de succès\n * <bnum-input-text state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-text>\n *\n * @structure Avec une icône\n * <bnum-input-text icon=\"search\">Label du champ</bnum-input-text>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-text placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-text>\n *\n * @structure Désactivé\n * <bnum-input-text disabled>\n *   Label du champ\n * </bnum-input-text>\n *\n * @structure Complet\n * <bnum-input-text\n *   data-value=\"Valeur initiale\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-text>\n *\n * @attr {string} (optional) (default: 'text') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'text' pour ce composant.\n *\n */\n@Define({ tag: TAG_INPUT_TEXT })\nexport class HTMLBnumInputText extends HTMLBnumInput {\n  constructor() {\n    super();\n  }\n\n  protected _p_preload(): void {\n    super._p_preload();\n    this.setAttribute(ATTRIBUTE_TYPE, TYPE_TEXT);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    super._p_buildDOM();\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => x !== ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns  Instance du composant.\n   */\n  static Create(label: string, options: BnumInputTextCreateOption = {}) {\n    const finalOptions = {\n      type: TYPE_TEXT,\n      ...options,\n    };\n    return super.Create(label, finalOptions) as HTMLBnumInputText;\n  }\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_INPUT_TIME } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInputNumber } from '../input-number/bnum-input-number';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { ATTRIBUTE_TYPE } from '../input/bnum-input.internal/constants';\nimport { BnumInputNumericCreateOptions } from '../input/bnum-input.internal/types';\n\nconst TYPE = 'time';\n\n/**\n * Input de temps.\n *\n * @structure Sans rien\n * <bnum-input-time></bnum-input-time>\n *\n * @structure Avec une légende\n * <bnum-input-time>Label du champ</bnum-input-time>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-time>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-time>\n *\n * @structure Avec un bouton\n * <bnum-input-time button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-time>\n *\n * @structure En erreur\n * <bnum-input-time min=\"05:00\" data-value=\"04:00\">Label du champ\n * </bnum-input-time>\n *\n * @structure Avec un état de succès\n * <bnum-input-time state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-time>\n *\n * @structure Avec une icône\n * <bnum-input-time icon=\"search\">Label du champ</bnum-input-time>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-time placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-time>\n *\n * @structure Désactivé\n * <bnum-input-time disabled>\n *   Label du champ\n * </bnum-input-time>\n *\n * @structure Complet\n * <bnum-input-time\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-time>\n *\n * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n *\n */\n@Define({ tag: TAG_INPUT_TIME })\nexport class HTMLBnumInputTime extends HTMLBnumInput {\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [\n      ...super._p_getStylesheets(),\n      HTMLBnumInputNumber.AdditionnalStylesheet,\n    ];\n  }\n\n  protected _p_preload(): void {\n    this.setAttribute(ATTRIBUTE_TYPE, TYPE);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    super._p_buildDOM();\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => x !== ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInputTime} Instance du composant.\n   */\n  static Create(\n    label: string,\n    options: BnumInputNumericCreateOptions = {},\n  ): HTMLBnumInputNumber {\n    const finalOptions = {\n      type: TYPE,\n      ...options,\n    };\n    return super.Create(label, finalOptions) as HTMLBnumInputNumber;\n  }\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_PRIMARY } from '../../../core/utils/constants/tags';\nimport { ButtonVariation } from '../button';\nimport { HTMLBnumButton } from '../button/bnum-button';\nimport { Variation } from '../button/bnum-button.internal/decorators';\n\n/**\n * Bouton Bnum de type \"Primary\".\n *\n * @structure Cas standard\n * <bnum-primary-button>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton avec icône\n * <bnum-primary-button data-icon=\"home\">Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-primary-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-primary-button loading>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton arrondi\n * <bnum-primary-button rounded>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-primary-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-primary-button>\n */\n@Define({\n  tag: TAG_PRIMARY,\n})\n@Variation(ButtonVariation.PRIMARY)\nexport class HTMLBnumPrimaryButton extends HTMLBnumButton {\n  constructor() {\n    super();\n  }\n}\n","import { ValueOf } from 'core/utils/types';\n\nexport const PropertyMode = {\n  default: 'rw',\n  readonly: 'readonly',\n  init: 'init',\n} as const;\nexport type PropertyMode = ValueOf<typeof PropertyMode>;\n\nexport interface PropertyOptions {\n  /**\n   * Mode d'accès au setter :\n   * - 'rw' (Read/Write) : Comportement par défaut { get; set; }\n   * - 'readonly' : Setter désactivé après initialisation { get; }\n   * - 'init' : Assignable une seule fois (ou null -> value) { get; init; }\n   * @default 'rw'\n   */\n  mode?: PropertyMode;\n\n  /**\n   * Déclenche _p_update() lors du changement de valeur ?\n   * @default false\n   */\n  reactive?: boolean;\n}\n\n/**\n * @Property Gère la réactivité et les droits d'accès des Auto-Accessors.\n * Simule les comportements C# { get; set; }, { get; init; } et { get; }.\n */\nexport function Property(options: PropertyOptions = {}) {\n  const { mode = PropertyMode.default, reactive = false } = options;\n\n  return function <This extends any, Value>(\n    target: ClassAccessorDecoratorTarget<This, Value>,\n    context: ClassAccessorDecoratorContext<This, Value>,\n  ): ClassAccessorDecoratorResult<This, Value> {\n    const name = String(context.name);\n\n    return {\n      // Init: Appelé lors de l'initialisation de la classe (ex: accessor x = 10)\n      init(initialValue: Value): Value {\n        return initialValue;\n      },\n\n      // Get: Lecture standard via le backing field natif\n      get(this: This): Value {\n        return target.get.call(this);\n      },\n\n      // Set: Logique de protection et réactivité\n      set(this: This, newValue: Value) {\n        const oldValue = target.get.call(this);\n\n        // 1. Gestion des Modes (Runtime Security)\n        if (mode === 'readonly') {\n          // Note: L'initialisation via \"accessor x = val\" passe par init(), pas set().\n          // Donc ici, c'est une tentative de modification ultérieure.\n          throw new Error(`[Property] '${name}' is ReadOnly ({ get; }).`);\n        }\n\n        if (mode === 'init') {\n          // Pattern { get; init; }\n          // On autorise si la valeur actuelle est undefined/null (premier set)\n          // Ou si on est techniquement encore dans la phase de construction (dur à détecter parfaitement en JS pur sans état,\n          // mais on suppose que si oldValue existe, c'est trop tard).\n          if (oldValue !== undefined && oldValue !== null) {\n            throw new Error(\n              `[Property] '${name}' is InitOnly ({ get; init; }).`,\n            );\n          }\n        }\n\n        // 2. Optimisation : Pas de changement, pas d'event\n        if (oldValue === newValue) return;\n\n        // 3. Mise à jour du backing field natif\n        target.set.call(this, newValue);\n\n        // 4. Réactivité (Appel du moteur de rendu Bnum)\n        if (reactive && typeof (this as any)._p_update === 'function') {\n          (this as any)._p_update();\n        }\n      },\n    };\n  };\n}\n","import BnumElement from 'components/bnum-element';\nimport { Nullable } from '../types';\nimport { Property, PropertyMode } from 'core/decorators/property';\n\nexport type CheckedChangeEventConstructorOption<\n\tTValue,\n\tTDetails,\n\tTCaller extends HTMLElement,\n> = {\n\tvalue: TValue;\n\tchecked: boolean;\n\tname: string;\n\tcaller: TCaller;\n\tdetails?: Nullable<TDetails>;\n};\n\nexport class CheckedChangeEvent<\n\tTValue,\n\tTDetails,\n\tTCaller extends BnumElement,\n> extends CustomEvent<TDetails> {\n\t@Property({ mode: PropertyMode.init }) accessor value!: TValue;\n\t@Property({ mode: PropertyMode.init }) accessor name!: string;\n\t@Property({ mode: PropertyMode.init }) accessor checked!: boolean;\n\t@Property({ mode: PropertyMode.init }) accessor caller!: TCaller;\n\n\tconstructor(\n\t\toptions: CheckedChangeEventConstructorOption<TValue, TDetails, TCaller>,\n\t) {\n\t\tsuper(\n\t\t\t`${(options.caller.constructor as any).TAG}:change`,\n\t\t\toptions.details ?? { bubbles: true, cancelable: true },\n\t\t);\n\n\t\tthis.value = options.value;\n\t\tthis.name = options.name;\n\t\tthis.checked = options.checked;\n\t\tthis.caller = options.caller;\n\t}\n}\n","import Log from '../utils/Log';\n\n// On définit un type qui regroupe tous les endroits où on peut poser le décorateur\ntype GenericContext =\n  | ClassDecoratorContext\n  | ClassMethodDecoratorContext\n  | ClassGetterDecoratorContext\n  | ClassSetterDecoratorContext\n  | ClassFieldDecoratorContext\n  | ClassAccessorDecoratorContext;\n\nexport function NonStd(reason?: string, fatal: boolean = false) {\n  // On accepte 'any' pour la value (car ça peut être une classe, une fonction, undefined pour un champ...)\n  // On utilise notre type GenericContext\n  return function (value: any, context: GenericContext) {\n    // On construit un message propre selon le type (classe, méthode, field...)\n    const typeLabel =\n      {\n        class: 'La classe',\n        method: 'La méthode',\n        getter: 'Le getter',\n        setter: 'Le setter',\n        field: 'Le champ',\n        accessor: 'L\\'accesseur',\n      }[context.kind] || 'L\\'élément';\n\n    const name = String(context.name);\n    const message = `${typeLabel} '${name}' est non standard${reason ? ` : ${reason}` : ''}.`;\n\n    // addInitializer fonctionne partout !\n    // - Pour une classe : s'exécute à la définition de la classe.\n    // - Pour un membre (méthode/champ) : s'exécute à la création de l'instance.\n    context.addInitializer(function () {\n      if (fatal) {\n        throw new Error(message);\n      } else {\n        Log.warn(name, message);\n      }\n    });\n  };\n}\n","import BnumElementInternal from 'components/bnum-element-states';\nimport { HTMLBnumFragment } from '../fragment/bnum-fragment';\nimport { Attr, CustomFire, Data, Define, SetAttr } from 'core/decorators';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable, Optional } from 'core/utils/types';\nimport { UI } from 'core/decorators/ui';\nimport {\n\tCheckedChangeEvent,\n\tCheckedChangeEventConstructorOption,\n} from 'core/utils/events/CheckedChangeEvent';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from 'core/utils/Log';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { INPUT_BASE_STYLE } from '../input/bnum-input';\nimport style from './bnum-radio.less';\nimport { Listener } from 'core/decorators/listener';\nimport JsEvent from '@rotomeca/event';\nimport { TAG_RADIO } from 'core/utils/constants/tags';\n\n//#region Utilities\n\n/**\n * Vérifie si une valeur est null ou undefined.\n *\n * @template T - Le type de la valeur à vérifier\n * @param newVal - La valeur à tester\n * @returns `true` si la valeur est null ou undefined, `false` sinon\n *\n * @example\n * ```ts\n * isNullOrUndefined(null); // true\n * isNullOrUndefined(undefined); // true\n * isNullOrUndefined(\"test\"); // false\n * ```\n */\nfunction isNullOrUndefined<T>(newVal: Optional<Nullable<T>>) {\n\treturn newVal === null || newVal === undefined;\n}\n\n/**\n * Vérifie si une clé correspond à une clé valide d'actions.\n *\n * @param key - La clé à vérifier\n * @returns `true` si la clé fait partie des actions disponibles, `false` sinon\n *\n * @remarks\n * Les clés valides sont : 'checked', 'value', 'name', 'disabled'\n */\nfunction isOnActionKey(key: string): key is keyof OnActionsOptions {\n\treturn ['checked', 'value', 'name', 'disabled'].includes(key);\n}\n\n/**\n * Ajoute un listener sur l'instance qui active l'évènement\n * @param event Evènement qui est initialisé\n * @param instance Elément qui contient l'évènement\n */\nfunction onStateChangeInitializer(\n\tevent: OnChangeEvent,\n\tinstance: HTMLBnumRadio,\n) {\n\tinstance.addEventListener('bnum-radio:change', (e: Event) =>\n\t\tevent.call(e as BnumRadioCheckedChangeEvent),\n\t);\n}\n\n//#endregion Utilities\n\n//#region Internals Types\n\n/**\n * Paramètres passés à un callback d'action.\n *\n * @remarks\n * Utilisé pour transmettre le nom et la valeur d'un attribut lors d'une mise à jour.\n */\ntype OnActionParam = {\n\t/** Le nom de l'attribut concerné */\n\tname: string;\n\t/** La valeur de l'attribut (peut être null) */\n\tval: Nullable<string>;\n};\n\n/**\n * Signature d'un callback d'action.\n *\n * @param option - Les paramètres de l'action\n * @returns Les paramètres modifiés après traitement\n *\n * @remarks\n * Permet d'intercepter et de modifier les paramètres avant qu'ils ne soient appliqués.\n */\ntype OnActionCallback = (option: OnActionParam) => OnActionParam;\n\n/**\n * Options de callbacks pour les différentes actions possibles.\n *\n * @remarks\n * Chaque propriété correspond à un attribut qui peut être intercepté lors d'une mise à jour.\n */\ntype OnActionsOptions = {\n\t/** Callback exécuté lors de la modification de l'attribut 'checked' */\n\tchecked?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'value' */\n\tvalue?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'name' */\n\tname?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'disabled' */\n\tdisabled?: OnActionCallback;\n};\n\n/**\n * Détails additionnels pour l'événement de changement de l'état coché.\n */\ntype CheckedChangeEventDetails = {\n\t/** L'événement natif sous-jacent */\n\tinner: Event;\n\t/** Indique si l'événement peut se propager */\n\tbubbles: boolean;\n\t/** Indique si l'événement peut être annulé */\n\tcancelable: boolean;\n};\n\n/**\n * Options de construction pour l'événement de changement d'état coché du radio.\n *\n * @remarks\n * Spécialisation du type générique {@link CheckedChangeEventConstructorOption} pour le composant radio.\n */\ntype BnumRadioCheckedChangeEventConstructorOption =\n\tCheckedChangeEventConstructorOption<\n\t\tstring,\n\t\tCheckedChangeEventDetails,\n\t\tHTMLBnumRadio\n\t>;\n\n/**\n * Événement personnalisé déclenché lors du changement d'état d'un bouton radio.\n *\n * @remarks\n * Cet événement encapsule les informations sur le changement d'état (coché/décoché)\n * d'un élément radio personnalisé.\n */\nexport class BnumRadioCheckedChangeEvent extends CheckedChangeEvent<\n\tstring,\n\tCheckedChangeEventDetails,\n\tHTMLBnumRadio\n> {}\n\n/**\n * Interface définissant les références aux éléments UI du composant radio.\n *\n * @remarks\n * Utilisé par le décorateur {@link UI} pour injecter les références typées\n * aux éléments du Shadow DOM. Ces références permettent d'interagir avec\n * l'input natif et les slots de contenu.\n */\ntype BnumRadioUi = {\n\t/** L'élément input radio natif */\n\tinput: HTMLInputElement;\n\t/** Le slot contenant la légende principale du radio */\n\tslotLegend: HTMLSlotElement;\n\t/** Le slot contenant l'indice/aide du radio */\n\tslotHint: HTMLSlotElement;\n};\n\ntype OnChangeCallback = (ev: BnumRadioCheckedChangeEvent) => void;\ntype OnChangeEvent = JsEvent<OnChangeCallback>;\n//#endregion Internals Types\n\n//#region Global Constants\n\n/**\n * Identifiant de l'élément input radio interne.\n * @internal\n */\nconst ID_INPUT = 'radio';\n\n/**\n * Nom de l'attribut 'checked'.\n * @internal\n */\nconst ATTRIBUTE_CHECKED = 'checked';\n\n/**\n * Nom de l'attribut 'value'.\n * @internal\n */\nconst ATTRIBUTE_VALUE = 'value';\n\n/**\n * Nom de l'événement 'change'.\n * @internal\n */\nconst EVENT_CHANGE = 'bnum-radio:change';\n\n/**\n * Liste des attributs synchronisés entre l'élément hôte et l'input interne.\n *\n * @remarks\n * Ces attributs sont automatiquement propagés de l'élément personnalisé vers l'input natif.\n * @internal\n */\nconst SYNCED_ATTRIBUTES = ['name', 'checked', 'value', 'disabled'];\n\n/**\n * Template HTML du composant radio.\n *\n * @remarks\n * Structure DOM utilisée pour créer le shadow DOM du composant.\n * Comprend un input radio natif et un label avec des slots pour le contenu et l'indice.\n * @internal\n */\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<input type=\"radio\" id={ID_INPUT} class=\"radio\" />\n\t\t<label part=\"label\" for=\"radio\" class=\"radio__label\">\n\t\t\t<span class=\"radio__label--legend\">\n\t\t\t\t<slot id=\"legend\"></slot>\n\t\t\t</span>\n\t\t\t<span class=\"radio--hint label-container--hint\">\n\t\t\t\t<slot id=\"hint\" name=\"hint\"></slot>\n\t\t\t</span>\n\t\t</label>\n\t</HTMLBnumFragment>\n);\n\n//#endregion Global Constants\n\n/**\n * Composant personnalisé représentant un bouton radio avec support de formulaire.\n *\n * @remarks\n * Ce composant Web étend {@link BnumElementInternal} et fournit un bouton radio personnalisé\n * avec support complet des formulaires HTML, gestion d'état et accessibilité.\n *\n * Le composant utilise le Shadow DOM pour encapsuler son style et sa structure,\n * et synchronise automatiquement ses attributs avec un input radio natif sous-jacent.\n *\n * @example\n * Structure simple :\n * ```html\n * <bnum-radio name=\"rotomeca\" value=\"valeur 1\">\n *   Mon élément\n * </bnum-radio>\n * ```\n *\n * @example\n * Structure avec indice :\n * ```html\n * <bnum-radio name=\"rotomeca\" value=\"valeur 2\">\n *   Mon élément\n *   <span slot=\"hint\">Indice !</span>\n * </bnum-radio>\n * ```\n *\n * @fires BnumRadioCheckedChangeEvent - Déclenché lorsque l'état coché du radio change\n *\n * @public\n *\n * @structure Structure simple\n * <bnum-radio name=\"rotomeca\" value=\"valeur 1\">\n *   Mon élément\n * </bnum-radio>\n *\n * @structure Structure avec indice\n * <bnum-radio name=\"rotomeca\" value=\"valeur 2\">\n *   Mon élément\n *   <span slot=\"hint\">Indice !</span>\n * </bnum-radio>\n *\n * @structure Disabled\n * <bnum-radio name=\"radio\" value=\"valeur x\" data-legend=\"Mon élément\" data-hint=\"Indice !\" checked disabled></bnum-radio>\n *\n * @slot (default) - Légende de l'élément\n * @slot hint - Aide supplémentaire dans la légende\n *\n * @event {CustomEvent<{ inner: BnumRadioCheckedChangeEvent }>} bnum-radio:change - Lorsque l'élément change d'état\n *\n * @attr {string} value - Valeur de l'élément\n * @attr {string} name - Nom de l'élément, permet de gérer les interactions des radio ayant le même nom\n * @attr {'disabled' | '' | undefined} (optional) disabled - Désactive l'élément\n * @attr {'' | undefined} (optional) checked - Si l'élément est actif ou non\n * @attr {string | undefined} (optional) data-legend - Label de l'élément. Est écraser si un slot est défini.\n * @attr {string | undefined} (optional) data-hint - Aide supplémentaire pour le label. Est écraser si un slot est défini.\n *\n * @cssvar {#000091} --bnum-radio-color - Couleur du radio\n * @cssvar {1rem} --bnum-radio-font-size - Taille du label principal\n * @cssvar {1px} --bnum-radio-border-size - Taille du countour du radio\n * @cssvar {50%} --bnum-radio-border-radius - \"border-radius\" de l'élément\n */\n@Define({\n\ttemplate: TEMPLATE,\n\ttag: TAG_RADIO,\n\tstyles: [INPUT_BASE_STYLE, style],\n})\nexport class HTMLBnumRadio extends BnumElementInternal {\n\t//#region Constants\n\t/**\n\t * Indique que ce composant peut être associé à un formulaire.\n\t *\n\t * @remarks\n\t * Permet au composant de participer au cycle de vie des formulaires HTML,\n\t * notamment la soumission et la validation.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals#instance_properties | ElementInternals}\n\t */\n\tstatic readonly formAssociated = true;\n\t//#endregion Constants\n\n\t//#region Getters/Setters\n\t/**\n\t * Références aux éléments du DOM interne.\n\t *\n\t * @remarks\n\t * Injecté automatiquement par le décorateur {@link UI}.\n\t * Fournit un accès typé à l'input radio natif et aux slots de contenu.\n\t *\n\t * @internal\n\t */\n\t@UI({\n\t\tinput: `#${ID_INPUT}`,\n\t\tslotLegend: '#legend',\n\t\tslotHint: '#hint',\n\t})\n\taccessor #_ui!: BnumRadioUi;\n\n\t/**\n\t * Le nom du groupe de boutons radio.\n\t *\n\t * @remarks\n\t * Les boutons radio partageant le même nom forment un groupe mutuellement exclusif.\n\t * Un seul bouton peut être sélectionné à la fois dans un groupe.\n\t *\n\t * @defaultValue Chaîne vide\n\t */\n\t@Attr() accessor name: string = EMPTY_STRING;\n\n\t/**\n\t * La valeur associée au bouton radio.\n\t *\n\t * @remarks\n\t * Cette valeur est envoyée lors de la soumission du formulaire si le radio est coché.\n\t *\n\t * @defaultValue Chaîne vide\n\t */\n\t@Attr() accessor value: string = EMPTY_STRING;\n\n\t/**\n\t * Indique si le bouton radio est coché.\n\t *\n\t * @remarks\n\t * Contrôle l'état de sélection du bouton radio.\n\t *\n\t * @defaultValue `true`\n\t */\n\t@Attr() accessor checked: boolean = true;\n\n\t/**\n\t * Indique si le bouton radio est désactivé.\n\t *\n\t * @remarks\n\t * Un bouton radio désactivé ne peut pas être sélectionné ni recevoir le focus.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor disabled: boolean = false;\n\n\t/**\n\t * Texte de la légende principale du bouton radio.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel qui sera affiché comme label principal du radio.\n\t * Cette propriété est en lecture seule (pas de setter) et est initialisée\n\t * lors de la construction du composant.\n\t *\n\t * @defaultValue Chaîne vide\n\t * @internal\n\t */\n\t@Data({ setter: false }) accessor #_legend: string = EMPTY_STRING;\n\n\t/**\n\t * Appelé lorsque l'état de l'élément change\n\t */\n\t@Listener(onStateChangeInitializer) accessor onstatechange!: OnChangeEvent;\n\n\t/**\n\t * Texte de l'indice/aide du bouton radio.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel qui sera affiché comme information complémentaire.\n\t * Cette propriété est en lecture seule (pas de setter) et est initialisée\n\t * lors de la construction du composant.\n\t *\n\t * @defaultValue Chaîne vide\n\t * @internal\n\t */\n\t@Data({ setter: false }) accessor #_hint: string = EMPTY_STRING;\n\n\t/**\n\t * Récupère l'input radio interne.\n\t *\n\t * @remarks\n\t * Permet d'accéder à l'input radio natif pour des opérations spécifiques.\n\t *\n\t * @returns L'input radio interne\n\t */\n\tget internalCheckbox(): HTMLInputElement {\n\t\treturn this.#_ui.input;\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant HTMLBnumRadio.\n\t *\n\t * @remarks\n\t * Initialise l'instance du composant en appelant le constructeur parent.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Attache un Shadow DOM au composant.\n\t *\n\t * @returns La racine du Shadow DOM créée\n\t *\n\t * @remarks\n\t * Configure le Shadow DOM en mode 'open' avec délégation du focus.\n\t * Cela permet au focus de se déplacer automatiquement vers l'input interne.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n\t\treturn this.attachShadow({ mode: 'open', delegatesFocus: true });\n\t}\n\n\t/**\n\t * Construit le DOM du composant après son attachement.\n\t *\n\t * @remarks\n\t * Configure le rôle ARIA, initialise les écouteurs d'événements,\n\t * initialise le contenu des slots et synchronise l'état initial avec les attributs.\n\t *\n\t * @protected\n\t * @override\n\t */\n\t@SetAttr('role', 'radio')\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_setupListeners().#_init().#_sync();\n\t}\n\n\t/**\n\t * Gère la mise à jour d'un attribut observé.\n\t *\n\t * @param name - Le nom de l'attribut modifié\n\t * @param oldVal - L'ancienne valeur de l'attribut\n\t * @param newVal - La nouvelle valeur de l'attribut\n\t *\n\t * @remarks\n\t * Cette méthode est appelée automatiquement lorsqu'un attribut observé change.\n\t * Elle détermine si une mise à jour est nécessaire et la déclenche si besoin.\n\t *\n\t * Pour l'attribut 'checked', compare l'état booléen plutôt que la chaîne.\n\t * Pour l'attribut 'value', compare avec la valeur de l'input interne.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tlet needUpdate = oldVal !== newVal;\n\n\t\tif (name === ATTRIBUTE_CHECKED) {\n\t\t\tconst isChecked = this.#_ui.input.checked;\n\t\t\tconst willBeChecked = newVal !== null && newVal !== 'false';\n\t\t\tneedUpdate = isChecked !== willBeChecked;\n\t\t} else if (name === ATTRIBUTE_VALUE) {\n\t\t\tneedUpdate = this.#_ui.input.value !== newVal;\n\t\t}\n\n\t\tif (needUpdate) {\n\t\t\tthis.#_update(name, newVal, {\n\t\t\t\tchecked: this.#_onUpdateChecked.bind(this),\n\t\t\t}).tapError(error =>\n\t\t\t\tLog.error('HTMLBnumRadio/_p_update', error.message, error),\n\t\t\t);\n\t\t}\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Update l'état du radio et déclenche l'événement bnum-radio:change\n\t * @param checked - L'état à appliquer\n\t */\n\tupdateCheckAndFire(checked: boolean) {\n\t\tthis.internalCheckbox.checked = checked;\n\t\tthis.#_fireChange(new Event('change', { bubbles: true, composed: true }));\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Initialise le contenu des slots avec les valeurs de légende et d'indice.\n\t *\n\t * @returns L'instance courante pour chaînage de méthodes\n\t *\n\t * @remarks\n\t * Cette méthode remplit les slots du Shadow DOM avec le contenu textuel\n\t * stocké dans les propriétés privées `#_legend` et `#_hint`.\n\t * Elle n'affecte les slots que si les valeurs correspondantes sont définies.\n\t *\n\t * @private\n\t */\n\t#_init() {\n\t\tconst legend = this.#_legend;\n\t\tconst hint = this.#_hint;\n\n\t\tconst hasLegend = !!legend;\n\t\tconst hasHint = !!hint;\n\n\t\tif (hasLegend) this.#_ui.slotLegend.innerText = legend;\n\n\t\tif (hasHint) this.#_ui.slotHint.innerText = hint;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Callback exécuté lors de la mise à jour de l'attribut 'checked'.\n\t *\n\t * @param options - Les paramètres de l'action contenant le nom et la valeur\n\t * @returns Les paramètres modifiés après traitement\n\t *\n\t * @remarks\n\t * Met à jour l'état coché de l'input interne, l'attribut ARIA et la valeur du formulaire.\n\t * Si le radio n'est pas coché, la valeur est définie à null pour le formulaire.\n\t *\n\t * @private\n\t */\n\t#_onUpdateChecked(options: OnActionParam) {\n\t\tconst { val: newVal } = options;\n\t\tconst isChecked = !(isNullOrUndefined(newVal) || newVal === 'false');\n\t\tconst input = this.#_ui.input;\n\n\t\tif (input.checked !== isChecked) {\n\t\t\tinput.checked = isChecked;\n\t\t}\n\n\t\tthis._p_internal.ariaChecked = String(isChecked);\n\n\t\tthis.#_setFormValue(isChecked ? this.value : null);\n\n\t\tif (!isChecked) options.val = null;\n\n\t\treturn options;\n\t}\n\n\t/**\n\t * Met à jour un attribut de l'input interne avec gestion des callbacks.\n\t *\n\t * @param name - Le nom de l'attribut à mettre à jour\n\t * @param newVal - La nouvelle valeur de l'attribut\n\t * @param onactions - Callbacks optionnels à exécuter avant la mise à jour\n\t * @returns Un {@link Result} indiquant le succès ou l'échec de l'opération\n\t *\n\t * @remarks\n\t * Si un callback est défini pour l'attribut concerné, il est exécuté avant la mise à jour.\n\t * Le callback peut modifier le nom et la valeur avant leur application.\n\t *\n\t * Si la nouvelle valeur est null ou undefined, l'attribut est supprimé de l'input.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_update(\n\t\tname: string,\n\t\tnewVal: Nullable<string>,\n\t\tonactions?: OnActionsOptions,\n\t): Result<void> {\n\t\tif (onactions && isOnActionKey(name)) {\n\t\t\tconst callback = onactions[name as keyof OnActionsOptions];\n\n\t\t\tif (callback) {\n\t\t\t\tconst plugin = callback({\n\t\t\t\t\tname,\n\t\t\t\t\tval: newVal,\n\t\t\t\t});\n\n\t\t\t\tif (plugin) {\n\t\t\t\t\tname = plugin.name;\n\t\t\t\t\tnewVal = plugin.val;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isNullOrUndefined(newVal)) this.#_ui.input.removeAttribute(name);\n\t\telse this.#_ui.input.setAttribute(name, newVal!);\n\n\t\treturn Result.Ok();\n\t}\n\n\t/**\n\t * Configure l'écouteur d'événement pour les changements de l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Écoute l'événement 'change' de l'input natif et déclenche l'événement personnalisé.\n\t *\n\t * @private\n\t */\n\t#_handleInnerChange() {\n\t\tthis.#_ui.input.addEventListener('change', ev => {\n\t\t\tthis.#_fireChange(ev);\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Déclenche l'événement personnalisé de changement d'état.\n\t *\n\t * @param ev - L'événement natif ayant déclenché le changement\n\t * @returns Les options de construction de l'événement personnalisé\n\t *\n\t * @remarks\n\t * Stoppe la propagation de l'événement natif, met à jour l'état interne,\n\t * puis construit et déclenche un {@link BnumRadioCheckedChangeEvent}.\n\t *\n\t * Le décorateur {@link CustomFire} gère automatiquement la création et le dispatch\n\t * de l'événement à partir des options retournées.\n\t *\n\t * @fires BnumRadioCheckedChangeEvent\n\t * @private\n\t */\n\t@CustomFire(BnumRadioCheckedChangeEvent)\n\t#_fireChange(ev: Event) {\n\t\tev.stopPropagation();\n\t\tthis.#_updateInternal();\n\t\tconst details: CheckedChangeEventDetails = {\n\t\t\tinner: ev,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t};\n\t\tconst options: BnumRadioCheckedChangeEventConstructorOption = {\n\t\t\tvalue: this.value,\n\t\t\tchecked: this.checked,\n\t\t\tname: this.name,\n\t\t\tcaller: this,\n\t\t\tdetails,\n\t\t};\n\t\treturn options;\n\t}\n\n\t/**\n\t * Met à jour l'état interne du composant à partir de l'input natif.\n\t *\n\t * @remarks\n\t * Synchronise les propriétés `checked` et `value` du composant\n\t * avec celles de l'input interne, et met à jour l'attribut ARIA correspondant.\n\t *\n\t * @private\n\t */\n\t#_updateInternal() {\n\t\tconst input = this.#_ui.input;\n\t\tthis.checked = !!input.checked;\n\t\tthis._p_internal.ariaChecked = this.checked as unknown as string;\n\t\tthis.value = input.value;\n\t}\n\n\t/**\n\t * Configure tous les écouteurs d'événements du composant.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Actuellement configure uniquement l'écouteur de changement de l'input interne.\n\t *\n\t * @private\n\t */\n\t#_setupListeners() {\n\t\tthis.#_handleInnerChange();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Synchronise les attributs entre l'élément hôte et l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Parcourt tous les {@link SYNCED_ATTRIBUTES} et applique leurs valeurs à l'input.\n\t *\n\t * Cas particulier : si l'attribut 'checked' n'est pas présent mais que la propriété\n\t * `checked` est à `true`, l'attribut est défini explicitement.\n\t *\n\t * @private\n\t */\n\t#_sync() {\n\t\tfor (const attr of SYNCED_ATTRIBUTES) {\n\t\t\tif (this.hasAttribute(attr)) {\n\t\t\t\tthis._p_update(attr, null, this.getAttribute(attr));\n\t\t\t} else {\n\t\t\t\tif (attr === ATTRIBUTE_CHECKED && this.checked) {\n\t\t\t\t\tthis._p_update(ATTRIBUTE_CHECKED, null, 'true');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit la valeur du composant dans le formulaire parent.\n\t *\n\t * @param value - La valeur à définir (null si le radio n'est pas coché)\n\t * @returns Un {@link Result} indiquant le succès de l'opération\n\t *\n\t * @remarks\n\t * Utilise l'API ElementInternals pour intégrer le composant dans le système de formulaires.\n\t * La valeur est null lorsque le radio n'est pas coché, et correspond à la propriété\n\t * `value` lorsqu'il est coché.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_setFormValue(value: Nullable<string>): Result<void> {\n\t\tthis._p_internal.setFormValue(value);\n\t\treturn Result.Ok();\n\t}\n\t//#endregion Private methods\n\n\t//#region Static\n\t/**\n\t * Retourne la liste des attributs observés par le composant.\n\t *\n\t * @returns Un tableau contenant tous les noms d'attributs observés\n\t *\n\t * @remarks\n\t * Combine les attributs observés du parent avec les {@link SYNCED_ATTRIBUTES} spécifiques\n\t * à ce composant. Les changements de ces attributs déclencheront {@link _p_update}.\n\t *\n\t * @protected\n\t * @static\n\t * @override\n\t * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n\t * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n\t */\n\t@NonStd('Deprecated')\n\tprotected static _p_observedAttributes(): string[] {\n\t\treturn [...super._p_observedAttributes(), ...SYNCED_ATTRIBUTES];\n\t}\n\n\t/**\n\t * Retourne le nom de l'événement 'change'.\n\t *\n\t * @returns Le nom de l'événement 'change'\n\t */\n\tpublic static get EVENT_CHANGE(): typeof EVENT_CHANGE {\n\t\treturn EVENT_CHANGE;\n\t}\n\t//#endregion Static\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_SECONDARY } from '../../../core/utils/constants/tags';\nimport { ButtonVariation } from '../button';\nimport { HTMLBnumButton } from '../button/bnum-button';\nimport { Variation } from '../button/bnum-button.internal/decorators';\n\n/**\n * Bouton Bnum de type \"Secondary\".\n *\n * @structure Cas standard\n * <bnum-secondary-button>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton avec icône\n * <bnum-secondary-button data-icon=\"home\">Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-secondary-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-secondary-button loading>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton arrondi\n * <bnum-secondary-button rounded>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-secondary-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-secondary-button>\n */\n@Define({tag: TAG_SECONDARY})\n@Variation(ButtonVariation.SECONDARY)\nexport class HTMLBnumSecondaryButton extends HTMLBnumButton {\n  constructor() {\n    super();\n  }\n}\n","import { Scheduler } from 'core/utils/Scheduler';\nimport { Optional } from 'core/utils/types';\n\nconst schedulersKey = Symbol('schedulers');\n\n/**\n * Décorateur permettant de planifier l'exécution d'une méthode via un {@link Scheduler}.\n *\n * Ce décorateur modifie le comportement de la méthode cible pour qu'elle agisse comme un initialiseur de `Scheduler`.\n * La méthode originale ne sera appelée qu'une seule fois par instance de classe pour configurer le callback du `Scheduler`.\n * Les appels subséquents à la méthode décorée déclencheront la planification (`schedule`) sur l'instance de `Scheduler` mise en cache,\n * en passant le premier argument de l'appel comme valeur à planifier.\n *\n * Le `Scheduler` utilise généralement `requestAnimationFrame` pour différer et regrouper l'exécution,\n * ce qui est utile pour des mises à jour d'interface ou des opérations coûteuses qui peuvent être regroupées.\n *\n * @returns Une fonction décoratrice de méthode.\n *\n * @example\n * ```typescript\n * class Composant {\n *   @Schedule()\n *   protected onUpdate(initValue: number) {\n *     // Cette méthode retourne le callback exécuté par le Scheduler.\n *     // Elle est appelée une seule fois à la première exécution.\n *     return (val: number | null) => {\n *       console.log('Valeur traitée :', val);\n *     };\n *   }\n *\n *   trigger() {\n *     this.onUpdate(1); // Initialise le scheduler et planifie 1\n *     this.onUpdate(2); // Planifie 2 (l'exécution réelle se fera plus tard avec la dernière valeur)\n *   }\n * }\n * ```\n */\nexport function Schedule() {\n\treturn function (target: Function, context: ClassMethodDecoratorContext) {\n\t\tconst sKey = Symbol(String(context.name));\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tconst caches = (this[schedulersKey] ??= new Map<\n\t\t\t\tsymbol,\n\t\t\t\tScheduler<any>\n\t\t\t>()) as Map<symbol, Scheduler<any>>;\n\t\t\tlet scheduler: Optional<Scheduler<any>>;\n\t\t\tif (caches.has(sKey)) scheduler = caches.get(sKey);\n\t\t\telse scheduler = new Scheduler(target.bind(this, ...args));\n\n\t\t\tif (scheduler) scheduler.schedule(args[0]);\n\t\t};\n\t};\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { EMPTY_STRING, isNullOrUndefined } from '@rotomeca/utils';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { Attr, Autobind, Data, Define, Fire } from 'core/decorators';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { Schedule } from 'core/decorators/schedule';\nimport { UI } from 'core/decorators/ui';\nimport { UpdateAll } from 'core/decorators/updateAll';\nimport Log from 'core/utils/Log';\nimport { Nullable } from 'core/utils/types';\nimport { INPUT_BASE_STYLE } from '../input/bnum-input';\nimport style from './bnum-select.less';\nimport { TAG_SELECT } from 'core/utils/constants/tags';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\n\n//#region Types\n/**\n * Interface pour la récupération des données Ui de `HTMLBnumSelect`\n */\nexport interface BnumSelectUi {\n  /**\n   * slot du label\n   */\n  slotLabel: HTMLSlotElement;\n  /**\n   * slot de l'indice\n   */\n  slotHint: HTMLSlotElement;\n  /**\n   * select interne\n   */\n  select: HTMLSelectElement;\n}\n\ntype Value = string | number | boolean;\n\n/**\n * Item qui sert à la création d'une option pour {@link HTMLBnumSelect.addOption}\n */\nexport type BnumSelectAddOptionObject = {\n  /**\n   * Valeur de l'option dans l'attribut `value`\n   */\n  value: Nullable<Value>;\n  /**\n   * Texte de l'option. Si {@link BnumSelectAddOptionObject.value} est null ou pas défini, ça sera la valeur de l'option.\n   */\n  text: string;\n  /**\n   * Si vrai, l'option sera ajouté avant les autres options.\n   */\n  prepend?: boolean;\n};\n\n//#endregon Types\n\n//#region Global Constants\nconst SYNCED_ATTRIBUTES = [\n  'autocomplete',\n  'autofocus',\n  'disabled',\n  'form',\n  'multiple',\n  'required',\n  'size',\n  'name',\n  'value',\n];\n\nconst TEMPLATE = (\n  <div class=\"bnum-select__container\">\n    <label\n      id=\"select-label\"\n      class=\"bnum-select__container__label label-container\"\n      for=\"select\"\n    >\n      <span class=\"bnum-select__container__label--legend label-container--label\">\n        <slot name=\"label\"></slot>\n      </span>\n      <span class=\"bnum-select__container__label--hint label-container--hint\">\n        <slot name=\"hint\"></slot>\n      </span>\n    </label>\n    <div class=\"select-container\">\n      <select\n        id=\"select\"\n        class=\"bnum-select__container__select input-like\"\n      ></select>\n      <HTMLBnumIcon data-icon=\"keyboard_arrow_down\" class=\"icon-arrow-down\" />\n    </div>\n  </div>\n);\n//#endregion Global Constants\n\n/**\n * @structure Defaut\n * <bnum-select>\n *   <span slot=\"label\">Un select</span>\n *   <option value=\"none\" selected disabled>Choisissez une option</option>\n *   <option value=\"a\">a</option>\n *   <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @structure Avec des optgroup\n * <bnum-select>\n *   <span slot=\"label\">Un select</span>\n *   <optgroup label=\"yolo\">\n *   <option value=\"none\" selected disabled>Choisissez une option</option>\n *   <option value=\"a\">a</option>\n *   <option value=\"b\">b</option>\n *   </optgroup>\n *   <optgroup label=\"swag\">\n *   <option value=\"c\">c</option>\n *   <option value=\"d\">d</option>\n *   <option value=\"e\">e</option>\n *   </optgroup>\n * </bnum-select>\n *\n * @structure Avec des data\n * <bnum-select data-legend=\"Legende data\" data-hint=\"Indice !\" data-default-value=\"none\" data-default-text=\"Choisissez un option\">\n * <option value=\"a\">a</option>\n * <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @structure Sans légendes\n * <bnum-select no-legend data-legend=\"Legende data\" data-hint=\"Indice !\" data-default-value=\"none\" data-default-text=\"Choisissez un option\">\n * <option value=\"a\">a</option>\n * <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @slot label - Légende du select\n * @slot hint - Légende additionnel\n *\n * @attr {undefined | boolean} (optional) no-legend - Cache visuellement la légende. (Ne dispence pas d'en mettre une.)\n * @attr {undefined | string} (optional) name - Nom de l'élément\n * @attr {undefined | string} (optional) data-legend - Texte de la légende. Est écrasé si le slot est défini.\n * @attr {undefined | string} (optional) data-hint - Texte additionnel de la légende. Est écrasé si le slot est défini.\n * @attr {undefined | string} (optional) data-default-value - Génère une option par défaut avec cette valeur.\n * @attr {undefined | string} (optional) data-default-text - Génère une option par défaut avec ce texte.\n *\n * @event {CustomEvent<{innerEvent: Event, caller: HTMLBnumSelect}>} change - Lorsque le select change de valeur.\n */\n@Define({\n  tag: TAG_SELECT,\n  template: TEMPLATE,\n  styles: [INPUT_BASE_STYLE, style],\n})\n@UpdateAll()\nexport class HTMLBnumSelect extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Required to participate in HTMLFormElement\n   */\n  static readonly formAssociated = true;\n  //#endregion Constants\n\n  //#region Private fields\n  #_observer: Nullable<MutationObserver> = null;\n  #_initValue: Nullable<string> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /**\n   * Elements d'interface interne\n   */\n  @UI({\n    slotLabel: '#select-label slot[name=\"label\"]',\n    slotHint: '#select-label slot[name=\"hint\"]',\n    select: '#select',\n  })\n  accessor #_ui!: BnumSelectUi;\n\n  /**\n   * Récupère l'information du data-legend.\n   *\n   * @remark\n   * `data-legend` correspond à la légende affiché par défaut.\n   */\n  @Data({ setter: false }) accessor #_legend: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-hint.\n   *\n   * @remark\n   * `data-hint` correspond à l'indice affiché par défaut.\n   */\n  @Data({ setter: false }) accessor #_hint: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-default-value.\n   *\n   * @remark\n   * `data-default-value` génère un élément `<option value=\"${this.#_defaultValue}\" selected disabled>${this.#_defaultText}</option>`\n   */\n  @Data('default-value', { setter: false })\n  accessor #_defaultValue: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-default-text.\n   *\n   * @remark\n   * `data-default-text` génère un élément `<option value=\"${this.#_defaultValue}\" selected disabled>${this.#_defaultText}</option>`\n   */\n  @Data('default-text', { setter: false })\n  accessor #_defaultText: Nullable<string> = null;\n\n  /**\n   * Nom de l'input\n   */\n  @Attr() accessor name: string = EMPTY_STRING;\n  /**\n   * Si l'attribut `no-legend` est actif, la légende ne s'affichera pas (seulement pour les lecteurs d'écrans).\n   */\n  @Attr('no-legend') accessor noLegend: boolean = true;\n\n  /**\n   * Valeur du select\n   */\n  get value() {\n    return this.#_ui.select.value;\n  }\n  set value(value: string) {\n    this.#_setFormValue(value);\n    this.#_ui.select.value = value;\n  }\n\n  /**\n   * Tout les options disponibles\n   */\n  get options(): ReadonlyArray<HTMLOptionElement> {\n    return Array.from((this.shadowRoot || this).querySelectorAll('option'));\n  }\n\n  /**\n   * Select dans le shadow-root\n   */\n  get select(): HTMLSelectElement {\n    return this.#_ui.select;\n  }\n\n  /**\n   * Récupère les options et optgroup du light-dom.\n   */\n  get #_lightOptions() {\n    return Array.from(\n      this.querySelectorAll(':scope > option, :scope > optgroup'),\n    );\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n    this.#_tryInitValue({ ignoreSelectedValue: true }).tapError((error) => {\n      Log.error(\n        'HTMLBnumSelectElement',\n        'Impossible d\\'initialiser la valeur par défaut !',\n        error,\n      );\n    });\n  }\n\n  /**\n   * Callback appelée lorsque le composant est ajouté au DOM.\n   *\n   * Déclenche le rendu du composant.\n   *\n   * @override Pour pouvoir ajouter un observer et observer le light-dom.\n   */\n  connectedCallback(): void {\n    super.connectedCallback();\n    (this.#_observer ??= new MutationObserver(this.#_obserse)).observe(this, {\n      childList: true,\n    });\n  }\n\n  /**\n   * On attache un shadow-dom custom pour pouvoir déléger le focus.\n   * @returns ShadowRoot ouvert avec le focus délégué.\n   */\n  protected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n    return this.attachShadow({ mode: 'open', delegatesFocus: true });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_preload(): void {\n    this.#_setDefault();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    this.#_moveOptions();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_attach(): void {\n    this.#_tryInitValue().match({\n      Ok: () => {\n        this.#_setDataLegend().#_setDataHint().#_initListeners().#_sync();\n\n        if (!this.#_hasLegend) {\n          Log.warn('HTMLBnumSelect', 'Vous devez mettre un libellé !');\n        }\n      },\n      Err: (error) => {\n        Log.error(\n          'HTMLBnumSelect',\n          'Impossible d\\'initialiser la valeur du select !',\n          error,\n          this,\n        );\n      },\n    });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_detach(): void {\n    this.#_observer?.disconnect?.();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_update(): void | Nullable<'break'> {\n    this.#_sync();\n  }\n  //#endregion Lifecycle\n\n  //#region Publics Methods\n\n  /**\n   * Ajoute un groupe d'option\n   * @param group Groupe à ajouter\n   * @returns Le groupe ajouté au shadow-dom\n   */\n  addOptGroup(group: HTMLOptGroupElement): HTMLOptGroupElement {\n    this.appendChild(group);\n    return group;\n  }\n\n  /**\n   * Ajoute une option dans le select\n   * @param option Element html à ajouter\n   * @param param1 Paramètres optionnels\n   * @returns Chaîne\n   */\n  addOption(\n    option: HTMLOptionElement,\n    { prepend }?: { prepend?: boolean },\n  ): this;\n  /**\n   * Ajoute une option dans le select à partir d'un objet\n   * @param item option à ajouter à partir d'un objet js.\n   * @returns Option créée\n   */\n  addOption(item: BnumSelectAddOptionObject): HTMLOptionElement;\n  /**\n   * Ajoute une option dans le select\n   * @param opt Option à ajouter\n   * @param param1\n   * @returns Chaîne ou option créée\n   */\n  addOption(\n    opt: HTMLOptionElement | BnumSelectAddOptionObject,\n    { prepend = false }: { prepend?: boolean } = {},\n  ): HTMLOptionElement | this {\n    let returnElement: HTMLOptionElement | this;\n    let option: HTMLOptionElement;\n\n    if (opt instanceof HTMLOptionElement) {\n      option = opt;\n      returnElement = this;\n    } else {\n      option = document.createElement('option');\n\n      if (opt.value !== null && opt.value !== undefined)\n        option.value = String(opt.value);\n\n      option.text = opt.text;\n      prepend = prepend || opt.prepend || false;\n      returnElement = option;\n    }\n\n    if (prepend) this.prepend(option);\n    else this.appendChild(option);\n\n    return returnElement;\n  }\n\n  // --- Formulaire --\n  /**\n   * Réinitialise la valeur du champ lors d'une remise à zéro du formulaire parent.\n   */\n  formResetCallback(): void {\n    this.value = this.#_defaultValue ?? EMPTY_STRING;\n  }\n\n  /**\n   * Active ou désactive le champ selon l'état du fieldset parent.\n   */\n  formDisabledCallback(disabled: boolean): void {\n    if (disabled) this.setAttribute('disabled', 'disabled');\n    this.#_sync();\n  }\n  //#endregion Publics Methods\n\n  //#region Private methods\n  #_initListeners() {\n    return this.#_onInnerSelect();\n  }\n\n  @Autobind\n  #_obserse(mutations: MutationRecord[]) {\n    const hasOptionMutation = mutations.some((m) =>\n      Array.from(m.addedNodes).some(\n        (n) =>\n          n instanceof HTMLOptionElement || n instanceof HTMLOptGroupElement,\n      ),\n    );\n\n    if (hasOptionMutation) {\n      this.#_scheduleMoveOptions();\n    }\n  }\n\n  @Schedule()\n  #_scheduleMoveOptions() {\n    this.#_moveOptions();\n  }\n\n  #_moveOptions() {\n    this.#_ui.select.append(...this.#_lightOptions);\n    return this;\n  }\n\n  #_setDataLegend() {\n    return this.#_setLabelPart(this.#_legend, this.#_ui.slotLabel);\n  }\n\n  #_setDataHint() {\n    return this.#_setLabelPart(this.#_hint, this.#_ui.slotHint);\n  }\n\n  #_setLabelPart(what: Nullable<string>, slot: HTMLSlotElement) {\n    if (what) slot.appendChild(this._p_createTextNode(what));\n    return this;\n  }\n\n  #_hasLegend() {\n    const hasLabel =\n      this.querySelectorAll('[slot=\"label\"]').length > 0 || this.#_legend;\n    const hasHint =\n      this.querySelectorAll('[slot=\"hint\"]').length > 0 || this.#_hint;\n    return hasLabel || hasHint;\n  }\n\n  #_setDefault() {\n    const value = this.#_defaultValue;\n    const text = this.#_defaultText;\n\n    if (value || text) {\n      const effectiveValue = value || text;\n      const effectiveText = text || value;\n      const createdOption = this.addOption({\n        value: effectiveValue,\n        text: effectiveText!,\n        prepend: true,\n      });\n      createdOption.setAttribute('selected', 'true');\n      createdOption.setAttribute('disabled', 'disabled');\n    }\n\n    return this;\n  }\n\n  #_sync() {\n    const select = this.#_ui.select;\n    for (const attr of SYNCED_ATTRIBUTES) {\n      if (this.hasAttribute(attr))\n        select.setAttribute(attr, this.getAttribute(attr)!);\n      else if (select.hasAttribute(attr)) select.removeAttribute(attr);\n    }\n  }\n\n  @Risky()\n  #_tryInitValue({\n    ignoreSelectedValue = false,\n  }: { ignoreSelectedValue?: boolean } = {}): Result<void> {\n    if (isNullOrUndefined(this.#_initValue))\n      this.#_initValue =\n        this.#_defaultValue ?? (ignoreSelectedValue ? null : this.value);\n\n    return Result.Ok();\n  }\n\n  @Risky()\n  #_setFormValue(value: string): Result<void> {\n    this._p_internal.setFormValue(value);\n    return Result.Ok();\n  }\n\n  @Autobind\n  @Fire('change')\n  #_fireSelect(event: Event) {\n    return { innerEvent: event, caller: this };\n  }\n\n  #_onInnerSelect() {\n    this.#_ui.select.addEventListener('change', this.#_fireSelect);\n    return this;\n  }\n  //#endregion Private methods\n\n  //#region Static\n  /**\n   * Méthode interne pour définir les attributs observés.\n   * @returns Attributs à observer\n   * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n   * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n   */\n  @NonStd('Deprecated')\n  protected static _p_observedAttributes(): string[] {\n    return [...super._p_observedAttributes(), ...SYNCED_ATTRIBUTES];\n  }\n  //#endregion Static\n}\n","import BnumElementInternal from 'components/bnum-element-states';\nimport { HTMLBnumFragment } from '../fragment/bnum-fragment';\nimport { Attr, Data, Define, Fire } from 'core/decorators';\nimport { UI } from 'core/decorators/ui';\nimport {\n\tBasicDetail,\n\tMayBe,\n\tNullable,\n\tOptional,\n\tValueOf,\n} from 'core/utils/types';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport { Result, Risky } from '@rotomeca/rop';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport Log from 'core/utils/Log';\nimport { INPUT_BASE_STYLE, INPUT_STYLE_STATES } from '../input/bnum-input';\nimport style from './bnum-switch.less';\nimport { Listener } from 'core/decorators/listener';\nimport JsEvent from '@rotomeca/event';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { BnumConfig } from 'core/utils/BnumConfig';\n\n//#region Utilities\n\n/**\n * Initialise l'écouteur d'événement `change` sur l'instance du checkbox.\n *\n * @remarks\n * Ajoute un listener natif `change` sur l'élément hôte et appelle le callback\n * de l'événement personnalisé {@link OnCheckedChangeEvent} lorsqu'il y a des abonnés.\n *\n * @param event - L'événement personnalisé à déclencher\n * @param instance - L'instance du composant {@link HTMLBnumSwitch}\n *\n * @internal\n */\nfunction OnCheckedChangeInitializer(\n\tevent: OnCheckedChangeEvent,\n\tinstance: HTMLBnumSwitch,\n) {\n\tinstance.addEventListener(EVENT_CHANGE, (e: Event) => {\n\t\tif (event.haveEvents()) event.call(e);\n\t});\n}\n\n//#endregion Utilities\n\n//#region Internal Types\n\n/**\n * Interface définissant les références aux éléments UI du composant checkbox.\n *\n * @remarks\n * Utilisé par le décorateur {@link UI} pour injecter les références typées\n * aux éléments du Shadow DOM. Ces références permettent d'interagir avec\n * l'input natif, les slots et les éléments d'état.\n */\ntype BnumSwitchUi = {\n\t/** L'élément input checkbox natif */\n\tinput: HTMLInputElement;\n\t/** Le span affichant le texte lorsque le checkbox est activé */\n\ttextActive: HTMLSpanElement;\n\t/** Le span affichant le texte lorsque le checkbox est désactivé */\n\ttextInactive: HTMLSpanElement;\n\t/** Le slot contenant la légende principale du checkbox */\n\tslotLegend: HTMLSlotElement;\n\t/** Le slot contenant l'indice/aide du checkbox */\n\tslotHint: HTMLSlotElement;\n\t/** Le span affichant le texte de validité */\n\tvalidityText: HTMLSpanElement;\n\t/** L'icône d'état du checkbox */\n\ticon: HTMLBnumIcon;\n};\n\n/**\n * Détails de l'événement de changement d'état du checkbox.\n *\n * @remarks\n * Contient l'événement natif sous-jacent et la référence à l'instance du composant.\n */\ntype BnumSwitchDetail = BasicDetail<HTMLBnumSwitch, Event>;\n\n/**\n * Événement personnalisé déclenché lors du changement d'état du checkbox.\n */\ntype BnumSwitchChangeCustomEvent = CustomEvent<BnumSwitchDetail>;\n\n/**\n * Signature du callback exécuté lors du changement d'état coché.\n *\n * @param event - L'événement personnalisé contenant les détails du changement\n */\ntype OnCheckedChangeCallback = (event: BnumSwitchChangeCustomEvent) => void;\n\n/**\n * Type d'événement personnalisé pour le changement d'état coché.\n */\ntype OnCheckedChangeEvent = JsEvent<OnCheckedChangeCallback>;\n\n//#endregion Internal Types\n\n//#region Global Constants\n\n/**\n * Icônes utilisées pour les états du checkbox.\n *\n * @remarks\n * Associe chaque état de validation à une icône Material Icons correspondante.\n *\n * @internal\n */\nconst BnumSwitchIcon = {\n\tSUCCESS: 'check_circle',\n\tERROR: 'cancel',\n} as const;\n\n/**\n * Type des valeurs d'icônes possibles pour le checkbox.\n */\ntype BnumSwitchIcon = ValueOf<typeof BnumSwitchIcon>;\n\n/**\n * Nom de l'attribut 'checked'.\n * @internal\n */\nconst ATTRIBUTE_CHECKED = 'checked';\n\n/**\n * Nom de l'attribut 'helper'.\n * @internal\n */\nconst ATTRIBUTE_HELPER = 'helper';\n\n/**\n * Nom de l'événement 'change'.\n * @internal\n */\nconst EVENT_CHANGE = 'change';\n\n/**\n * Tag utilisé pour les messages de log du composant.\n * @internal\n */\nconst LOG_TAG = 'BnumCheckbox';\n\n/**\n * Message d'avertissement affiché lorsqu'aucun label n'est trouvé.\n * @internal\n */\nconst WARN_NO_LABEL = \"Aucun texte de description ou d'aide n'a été trouvé\";\n\n/**\n * Message de validité par défaut lorsqu'aucun message natif n'est disponible.\n * @internal\n */\nconst DEFAULT_VALIDITY_MESSAGE = 'Certaines conditions ne sont pas satisfaites';\n\n/**\n * Nom de l'état interne 'state'.\n * @internal\n */\nconst STATE_STATE = 'state';\n\n/**\n * Nom de l'état interne 'error'.\n * @internal\n */\nconst STATE_ERROR = 'error';\n\n/**\n * Nom de l'attribut ARIA 'aria-checked'.\n * @internal\n */\nconst ARIA_CHECKED = 'aria-checked';\n\n/**\n * Nom de l'attribut ARIA 'aria-required'.\n * @internal\n */\nconst ARIA_REQUIRED = 'aria-required';\n\n/**\n * Nom de l'attribut ARIA 'aria-disabled'.\n * @internal\n */\nconst ARIA_DISABLED = 'aria-disabled';\n\n/**\n * Nom de l'attribut ARIA 'aria-invalid'.\n * @internal\n */\nconst ARIA_INVALID = 'aria-invalid';\n\n/**\n * Nom de l'attribut ARIA 'aria-describedby'.\n * @internal\n */\nconst ARIA_DESCRIBEDBY = 'aria-describedby';\n\n/**\n * Identifiant du slot d'indice.\n * @internal\n */\nconst ID_HINT = 'hint';\n\n/**\n * Identifiant de l'élément affichant le texte de validité.\n * @internal\n */\nconst ID_VALIDITY_TEXT = 'validity-text';\n\n/**\n * Valeur booléenne 'true' sous forme de chaîne.\n * @internal\n */\nconst ARIA_TRUE = 'true';\n\n/**\n * Texte par défaut pour l'état actif.\n * @internal\n */\nconst TEXT_ACTIVE_DEFAULT =\n\tBnumConfig.Get('local_keys')?.active_switch ?? 'Activé';\n\n/**\n * Texte par défaut pour l'état inactif.\n * @internal\n */\nconst TEXT_INACTIVE_DEFAULT =\n\tBnumConfig.Get('local_keys')?.inactive_switch ?? 'Désactivé';\n\n/**\n * Liste des attributs synchronisés entre l'élément hôte et l'input interne.\n *\n * @remarks\n * Ces attributs sont automatiquement propagés de l'élément personnalisé vers l'input natif.\n * @internal\n */\nconst SYNCED_ATTRIBUTES = ['name', 'checked', 'value', 'disabled', 'required'];\n\n//#endregion Global Constants\n\n//#region Template\n\n/**\n * Template HTML du composant checkbox.\n *\n * @remarks\n * Structure DOM utilisée pour créer le shadow DOM du composant.\n * Comprend un input checkbox natif configuré en rôle `switch`, un label\n * avec des slots pour le contenu actif/inactif, et une zone d'état de validation.\n *\n * @internal\n */\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<input id=\"native-input\" type=\"checkbox\" role=\"switch\" />\n\t\t<label\n\t\t\tclass=\"checkbox__label label-container hint-label\"\n\t\t\tfor=\"native-input\"\n\t\t>\n\t\t\t<span class=\"checkbox__label--legend label-container--label \">\n\t\t\t\t<slot id=\"legend\"></slot>\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tid=\"active-text\"\n\t\t\t\tclass=\"checkbox__label__desc checkbox__label__desc--ok label-container--hint\"\n\t\t\t>\n\t\t\t\t<slot name=\"activeText\">{TEXT_ACTIVE_DEFAULT}</slot>\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tid=\"inactive-text\"\n\t\t\t\tclass=\"checkbox__label__desc checkbox__label__desc--no label-container--hint\"\n\t\t\t>\n\t\t\t\t<slot name=\"inactiveText\">{TEXT_INACTIVE_DEFAULT}</slot>\n\t\t\t</span>\n\t\t</label>\n\t\t<span class=\"checkbox__label--hint hint-label label-container--hint\">\n\t\t\t<slot id={ID_HINT} name={ID_HINT}></slot>\n\t\t</span>\n\t\t<div class=\"checkbox__state state\">\n\t\t\t<HTMLBnumIcon id=\"icon\" />\n\t\t\t<span id={ID_VALIDITY_TEXT}></span>\n\t\t</div>\n\t</HTMLBnumFragment>\n);\n\n//#endregion Template\n\n/**\n * Composant personnalisé représentant un checkbox avec support de formulaire.\n *\n * @remarks\n * Ce composant Web étend {@link BnumElementInternal} et fournit un checkbox personnalisé\n * avec support complet des formulaires HTML, gestion d'état, validation et accessibilité.\n *\n * Le composant utilise le Shadow DOM pour encapsuler son style et sa structure,\n * et synchronise automatiquement ses attributs avec un input checkbox natif sous-jacent.\n * Il fonctionne en mode `switch` (interrupteur on/off) avec des textes configurables\n * pour les états actif et inactif.\n *\n * @example\n * Structure simple :\n * ```html\n * <bnum-switch>Click me !</bnum-switch>\n * ```\n *\n * @example\n * Structure avec indice :\n * ```html\n * <bnum-switch>Click me !<span slot=\"hint\">Indice</span></bnum-switch>\n * ```\n *\n * @example\n * Structure required avec helper :\n * ```html\n * <bnum-switch helper required>Click me !<span slot=\"hint\">Indice</span></bnum-switch>\n * ```\n *\n * @fires CustomEvent<BnumCheckBoxDetail> - Déclenché lorsque l'état coché du checkbox change\n *\n * @public\n *\n * @structure Classique\n * <bnum-switch>Click me !</bnum-switch>\n *\n * @structure Avec indice\n * <bnum-switch checked>Click me !<span slot=\"hint\">Indice</span></bnum-switch>\n *\n * @structure Requis\n * <bnum-switch required>Click me !<span slot=\"hint\">Indice</span></bnum-switch>\n *\n * @structure Avec un texte d'aide\n * <bnum-switch helper>Click me !<span slot=\"hint\">Indice</span></bnum-switch>\n *\n * @slot (default) - Légende de l'élément\n * @slot activeText - Texte affiché lorsque le checkbox est activé\n * @slot inactiveText - Texte affiché lorsque le checkbox est désactivé\n * @slot hint - Aide supplémentaire dans la légende\n *\n * @event {CustomEvent<BnumCheckBoxDetail>} change - Lorsque l'élément change d'état\n *\n * @attr {boolean} (optional) (default: false) checked - Si l'élément est coché ou non\n * @attr {string} (optional) name - Nom de l'élément pour les formulaires\n * @attr {string} (optional) (default: 'on') value - Valeur de l'élément\n * @attr {boolean} (optional) (default: false) disabled - Désactive l'élément\n * @attr {boolean} (optional) (default: false) required - Rend le champ obligatoire\n * @attr {boolean} (optional) (default: false) helper - Active le mode d'aide visuelle\n *\n * @state error - Lorsque la validation échoue\n * @state helper - Lorsque l'attribut helper est actif\n *\n * @cssvar {#000091} --bnum-switch-color - Couleur du checkbox\n * @cssvar {white} --bnum-switch-background-color - Couleur de fond du checkbox\n * @cssvar {#de350b} --bnum-input-state-error-color - Couleur de l'erreur\n */\n@Define({\n\ttag: 'bnum-switch',\n\ttemplate: TEMPLATE,\n\tstyles: [INPUT_BASE_STYLE, INPUT_STYLE_STATES, style],\n})\nexport class HTMLBnumSwitch extends BnumElementInternal {\n\t//#region Private Fields\n\n\t/**\n\t * État initial du checkbox lors du chargement.\n\t *\n\t * @remarks\n\t * Stocké lors du préchargement pour pouvoir restaurer l'état initial\n\t * lors d'un reset du formulaire via {@link formResetCallback}.\n\t *\n\t * @internal\n\t */\n\t#_initState!: boolean;\n\n\t/**\n\t * Références aux éléments du DOM interne.\n\t *\n\t * @remarks\n\t * Injecté automatiquement par le décorateur {@link UI}.\n\t * Fournit un accès typé à l'input checkbox natif, aux slots de contenu\n\t * et aux éléments d'état de validation.\n\t *\n\t * @internal\n\t */\n\t@UI({\n\t\tinput: '#native-input',\n\t\ttextActive: '#active-text',\n\t\ttextInactive: '#inactive-text',\n\t\tslotLegend: '#legend',\n\t\tslotHint: `#${ID_HINT}`,\n\t\tvalidityText: `#${ID_VALIDITY_TEXT}`,\n\t\ticon: '#icon',\n\t})\n\taccessor #_ui!: Readonly<BnumSwitchUi>;\n\n\t//#endregion Private Fields\n\n\t//#region Public Fields\n\n\t/**\n\t * Indique si le checkbox est coché.\n\t *\n\t * @remarks\n\t * Contrôle l'état de sélection du checkbox.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor checked = false;\n\n\t/**\n\t * Le nom du checkbox pour les formulaires.\n\t *\n\t * @remarks\n\t * Permet d'identifier le champ lors de la soumission du formulaire.\n\t *\n\t * @defaultValue `undefined`\n\t */\n\t@Attr() accessor name: Optional<string> = undefined;\n\n\t/**\n\t * La valeur associée au checkbox.\n\t *\n\t * @remarks\n\t * Cette valeur est envoyée lors de la soumission du formulaire si le checkbox est coché.\n\t *\n\t * @defaultValue `'on'`\n\t */\n\t@Attr() accessor value: string = 'on';\n\n\t/**\n\t * Indique si le checkbox est désactivé.\n\t *\n\t * @remarks\n\t * Un checkbox désactivé ne peut pas être sélectionné ni recevoir le focus.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor disabled = false;\n\n\t/**\n\t * Indique si le checkbox est obligatoire.\n\t *\n\t * @remarks\n\t * Un checkbox obligatoire doit être coché pour que le formulaire soit valide.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor required = false;\n\n\t/**\n\t * Active le mode d'aide visuelle.\n\t *\n\t * @remarks\n\t * Lorsque activé, ajoute l'état `helper` au composant pour un rendu visuel spécifique.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor helper = false;\n\n\t/**\n\t * Texte de la légende principale du checkbox.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel provenant de l'attribut `data-legend`.\n\t * Utilisé pour initialiser le slot de légende si défini.\n\t *\n\t * @defaultValue `undefined`\n\t * @internal\n\t */\n\t@Data() accessor #_legend: Optional<string> = undefined;\n\n\t/**\n\t * Texte de l'indice/aide du checkbox.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel provenant de l'attribut `data-hint`.\n\t * Utilisé pour initialiser le slot d'indice si défini.\n\t *\n\t * @defaultValue `undefined`\n\t * @internal\n\t */\n\t@Data() accessor #_hint: Optional<string> = undefined;\n\n\t/**\n\t * Événement personnalisé déclenché lors du changement d'état coché.\n\t *\n\t * @remarks\n\t * Initialisé par {@link OnCheckedChangeInitializer} via le décorateur {@link Listener}.\n\t * Permet de s'abonner aux changements d'état du checkbox.\n\t */\n\t@Listener(OnCheckedChangeInitializer)\n\taccessor oncheckedchange!: OnCheckedChangeEvent;\n\n\t//#endregion Public Fields\n\n\t//#region Lifecycle\n\n\t/**\n\t * Constructeur du composant HTMLBnumCheckbox.\n\t *\n\t * @remarks\n\t * Initialise l'instance du composant en appelant le constructeur parent.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Précharge l'état initial du checkbox.\n\t *\n\t * @remarks\n\t * Sauvegarde l'état coché initial pour permettre la restauration\n\t * lors d'un reset de formulaire.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_preload(): void {\n\t\tthis.#_initState = !!(this.checked || false);\n\t}\n\n\t/**\n\t * Attache le composant au DOM et initialise son comportement.\n\t *\n\t * @remarks\n\t * Initialise les données des slots, synchronise les attributs avec l'input natif,\n\t * vérifie la présence d'un label et gère l'état d'erreur initial.\n\t * Ajoute l'état `helper` si l'attribut correspondant est défini.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_attach(): void {\n\t\tthis.#_init().#_sync().#_checkLabel().#_ifOnErrorSet();\n\n\t\tif (this.helper) this._p_addState(ATTRIBUTE_HELPER);\n\t}\n\n\t/**\n\t * Gère la mise à jour d'un attribut observé.\n\t *\n\t * @param name - Le nom de l'attribut modifié\n\t * @param oldVal - L'ancienne valeur de l'attribut\n\t * @param newVal - La nouvelle valeur de l'attribut\n\t * @returns `void` ou `'break'` pour interrompre le traitement\n\t *\n\t * @remarks\n\t * Cette méthode est appelée automatiquement lorsqu'un attribut observé change.\n\t * Elle traite spécifiquement les attributs `checked` et `helper`,\n\t * et délègue les autres attributs à l'input natif.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tif (newVal === EMPTY_STRING) newVal = ARIA_TRUE;\n\n\t\tif (oldVal === newVal) return;\n\n\t\tswitch (name) {\n\t\t\tcase ATTRIBUTE_CHECKED:\n\t\t\t\tif (this.#_ui.input.checked !== this.checked) {\n\t\t\t\t\tthis.#_ui.input.checked = this.checked;\n\t\t\t\t\tthis.#_ui.input.setAttribute(ARIA_CHECKED, String(this.checked));\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase ATTRIBUTE_HELPER:\n\t\t\t\tif (newVal) this._p_addState(ATTRIBUTE_HELPER);\n\t\t\t\telse this._p_removeState(ATTRIBUTE_HELPER);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (newVal) this.#_ui.input.setAttribute(name, newVal);\n\t\t\t\telse this.#_ui.input.removeAttribute(name);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Effectue les opérations post-flush du composant.\n\t *\n\t * @remarks\n\t * Vérifie l'état d'erreur et resynchronise les attributs après un flush.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_postFlush(): void {\n\t\tthis.#_ifOnErrorSet().#_sync();\n\t}\n\n\t/**\n\t * Callback de réinitialisation du formulaire.\n\t *\n\t * @remarks\n\t * Restaure l'état coché initial du checkbox lorsque le formulaire est réinitialisé.\n\t */\n\tformResetCallback(): void {\n\t\tthis.checked = this.#_initState;\n\t}\n\n\t/**\n\t * Active ou désactive le champ selon l'état du fieldset parent.\n\t *\n\t * @param disabled - `true` pour désactiver, `false` pour activer\n\t */\n\tformDisabledCallback(disabled: boolean): void {\n\t\tthis.disabled = disabled;\n\t}\n\n\t/**\n\t * Met à jour l'état coché du checkbox et déclenche l'événement de changement.\n\t *\n\t * @param checked - L'état coché à définir\n\t *\n\t * @remarks\n\t * Cette méthode est utilisée en interne pour mettre à jour l'état coché\n\t * et déclencher l'événement de changement correspondant.\n\t */\n\tupdateCheckedAndFire(checked: boolean): void {\n\t\tthis.checked = checked;\n\t\tthis.#_change(new Event('change'));\n\t}\n\n\t//#endregion Lifecycle\n\n\t//#region Public Methods\n\n\t/**\n\t * Vérifie la validité du checkbox sans afficher de message.\n\t *\n\t * @returns `true` si le checkbox est valide, `false` sinon\n\t *\n\t * @remarks\n\t * Délègue la vérification à l'input natif sous-jacent.\n\t * En cas d'erreur, retourne `true` par défaut.\n\t */\n\tcheckValidity(): boolean {\n\t\treturn this.#_checkValidity().unwrapOr(true);\n\t}\n\n\t/**\n\t * Vérifie la validité du checkbox et affiche le message de validation.\n\t *\n\t * @returns `true` si le checkbox est valide, `false` sinon\n\t *\n\t * @remarks\n\t * Délègue la vérification à l'input natif sous-jacent et déclenche\n\t * l'affichage du message de validation natif si invalide.\n\t * En cas d'erreur, retourne `true` par défaut.\n\t */\n\treportValidity(): boolean {\n\t\treturn this.#_reportValidity().unwrapOr(true);\n\t}\n\n\t//#endregion Public Methods\n\n\t//#region Private Methods\n\n\t/**\n\t * Vérifie la validité de l'input natif sans rapport.\n\t *\n\t * @returns Un {@link Result} contenant le résultat de la vérification\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_checkValidity(): Result<boolean> {\n\t\treturn this.#_ui.input.checkValidity() as unknown as Result<boolean>;\n\t}\n\n\t/**\n\t * Vérifie la validité de l'input natif avec rapport.\n\t *\n\t * @returns Un {@link Result} contenant le résultat de la vérification\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_reportValidity(): Result<boolean> {\n\t\treturn this.#_ui.input.reportValidity() as unknown as Result<boolean>;\n\t}\n\n\t/**\n\t * Initialise les données internes du composant.\n\t *\n\t * @returns L'instance courante pour chaînage de méthodes\n\t *\n\t * @remarks\n\t * Initialise les données des slots de légende et d'indice,\n\t * puis configure les écouteurs d'événements.\n\t *\n\t * @private\n\t */\n\t#_init() {\n\t\treturn this.#_initDataLegend().#_initDataHint().#_setListeners();\n\t}\n\n\t/**\n\t * Initialise le slot de légende avec la donnée correspondante.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @private\n\t */\n\t#_initDataLegend() {\n\t\treturn this.#_initData(this.#_legend, this.#_ui.slotLegend);\n\t}\n\n\t/**\n\t * Initialise le slot d'indice avec la donnée correspondante.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @private\n\t */\n\t#_initDataHint() {\n\t\treturn this.#_initData(this.#_hint, this.#_ui.slotHint);\n\t}\n\n\t/**\n\t * Initialise un slot avec une donnée textuelle.\n\t *\n\t * @param data - La donnée textuelle à insérer dans le slot\n\t * @param slot - Le slot cible dans lequel insérer la donnée\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * N'affecte le slot que si la donnée est définie et non vide.\n\t *\n\t * @private\n\t */\n\t#_initData(data: MayBe<string>, slot: HTMLSlotElement): this {\n\t\tif (data) slot.textContent = data;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Configure tous les écouteurs d'événements du composant.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Actuellement configure uniquement l'écouteur de changement de l'input interne.\n\t *\n\t * @private\n\t */\n\t#_setListeners() {\n\t\treturn this.#_listenChange();\n\t}\n\n\t/**\n\t * Configure l'écouteur d'événement pour les changements de l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Écoute l'événement `change` de l'input natif et déclenche\n\t * la méthode {@link #_change} pour propager le changement.\n\t *\n\t * @private\n\t */\n\t#_listenChange() {\n\t\tthis.#_ui.input.addEventListener(EVENT_CHANGE, e => {\n\t\t\tthis.#_change(e);\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Traite le changement d'état du checkbox et déclenche l'événement personnalisé.\n\t *\n\t * @param event - L'événement natif de changement\n\t * @returns Les détails de l'événement contenant la référence à l'instance\n\t *\n\t * @remarks\n\t * Met à jour la propriété `checked` à partir de l'input natif,\n\t * puis retourne les détails nécessaires au décorateur {@link Fire}\n\t * pour dispatcher l'événement `change`.\n\t *\n\t * @fires CustomEvent<BnumCheckBoxDetail>\n\t * @private\n\t */\n\t@Fire(EVENT_CHANGE)\n\t#_change(event: Event): BnumSwitchDetail {\n\t\tthis.checked = this.#_ui.input.checked;\n\t\treturn { inner: event, caller: this };\n\t}\n\n\t/**\n\t * Vérifie et applique l'état d'erreur si nécessaire.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Si la validation échoue, applique l'état d'erreur via {@link #_setOnError}.\n\t * Si la validation réussit et que l'état d'erreur est actif,\n\t * le supprime et réinitialise la validité.\n\t *\n\t * @private\n\t */\n\t#_ifOnErrorSet() {\n\t\tif (!this.checkValidity()) {\n\t\t\tthis.#_setOnError();\n\t\t} else if (this._p_hasState(STATE_ERROR)) {\n\t\t\tthis._p_removeStates([STATE_STATE, STATE_ERROR]).#_setValidity();\n\t\t\tthis.#_ui.input.removeAttribute(ARIA_INVALID);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Applique l'état d'erreur au composant.\n\t *\n\t * @remarks\n\t * Configure l'icône d'erreur, met à jour le texte de validité,\n\t * ajoute les états internes `state` et `error`, et positionne\n\t * l'attribut ARIA `aria-invalid` à `true`.\n\t *\n\t * Si le texte de validation natif n'est pas disponible, utilise\n\t * le message par défaut {@link DEFAULT_VALIDITY_MESSAGE}.\n\t *\n\t * @private\n\t */\n\t#_setOnError() {\n\t\tif (this.#_ui.icon.icon !== BnumSwitchIcon.ERROR)\n\t\t\tthis.#_ui.icon.icon = BnumSwitchIcon.ERROR;\n\t\tthis.#_setText()\n\t\t\t.tapError(() => {\n\t\t\t\tthis.#_ui.validityText.textContent = DEFAULT_VALIDITY_MESSAGE;\n\t\t\t})\n\t\t\t.andThen(() => this.#_setInternalError());\n\t\tthis._p_addStates(STATE_STATE, STATE_ERROR);\n\t\tthis.#_ui.input.setAttribute(ARIA_INVALID, ARIA_TRUE);\n\t}\n\n\t/**\n\t * Met à jour le texte de validité à partir du message natif de l'input.\n\t *\n\t * @returns Un {@link Result} indiquant le succès de l'opération\n\t *\n\t * @remarks\n\t * Ne met à jour le texte que si il diffère du message de validation courant.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_setText(): Result<void> {\n\t\tif (\n\t\t\tthis.#_ui.validityText.textContent !== this.#_ui.input.validationMessage\n\t\t)\n\t\t\tthis.#_ui.validityText.textContent = this.#_ui.input.validationMessage;\n\t\treturn null as unknown as Result<void>;\n\t}\n\n\t/**\n\t * Propage l'état de validité de l'input natif vers les internals du composant.\n\t *\n\t * @returns Un {@link Result} indiquant le succès de l'opération\n\t *\n\t * @remarks\n\t * Utilise l'API `ElementInternals.setValidity` pour synchroniser\n\t * la validité du composant avec celle de l'input natif sous-jacent.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_setInternalError(): Result<void> {\n\t\tif (!this.checkValidity()) {\n\t\t\tthis._p_internal.setValidity(\n\t\t\t\tthis.#_ui.input.validity,\n\t\t\t\tthis.#_ui.input.validationMessage,\n\t\t\t\tthis.#_ui.input,\n\t\t\t);\n\t\t}\n\n\t\treturn null as unknown as Result<void>;\n\t}\n\n\t/**\n\t * Réinitialise la validité du composant.\n\t *\n\t * @returns Un {@link Result} indiquant le succès de l'opération\n\t *\n\t * @remarks\n\t * Supprime l'état d'erreur des internals lorsque le checkbox redevient valide.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_setValidity(): Result<void> {\n\t\tif (this.checkValidity()) {\n\t\t\tthis._p_internal.setValidity({});\n\t\t}\n\n\t\treturn null as unknown as Result<void>;\n\t}\n\n\t/**\n\t * Synchronise les attributs entre l'élément hôte et l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Parcourt tous les {@link SYNCED_ATTRIBUTES} et applique leurs valeurs à l'input.\n\t * Cas particulier : l'attribut `checked` est traité en tant que propriété booléenne.\n\t * Après la synchronisation des attributs, met à jour les attributs ARIA.\n\t *\n\t * @private\n\t */\n\t#_sync() {\n\t\tfor (const attr of SYNCED_ATTRIBUTES) {\n\t\t\tif (attr === ATTRIBUTE_CHECKED) {\n\t\t\t\tthis.#_ui.input.checked = this.checked;\n\t\t\t} else {\n\t\t\t\tif (this.hasAttribute(attr)) {\n\t\t\t\t\tthis.#_ui.input.setAttribute(attr, this.getAttribute(attr)!);\n\t\t\t\t} else this.#_ui.input.removeAttribute(attr);\n\t\t\t}\n\t\t}\n\n\t\tthis.#_syncAria();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Synchronise les attributs ARIA du composant avec l'input interne.\n\t *\n\t * @remarks\n\t * Met à jour les attributs `aria-checked`, `aria-required`, `aria-disabled`\n\t * et `aria-describedby` en fonction de l'état courant du composant.\n\t *\n\t * L'attribut `aria-describedby` est composé dynamiquement à partir\n\t * des éléments d'aide et de validité présents.\n\t *\n\t * @private\n\t */\n\t#_syncAria() {\n\t\tconst input = this.#_ui.input;\n\n\t\tinput.setAttribute(ARIA_CHECKED, String(this.checked));\n\n\t\tif (this.required) input.setAttribute(ARIA_REQUIRED, ARIA_TRUE);\n\t\telse input.removeAttribute(ARIA_REQUIRED);\n\n\t\tif (this.disabled) input.setAttribute(ARIA_DISABLED, ARIA_TRUE);\n\t\telse input.removeAttribute(ARIA_DISABLED);\n\n\t\tconst descriptions: string[] = [];\n\n\t\tif (this.#_ui.slotHint.assignedNodes().length > 0)\n\t\t\tdescriptions.push(ID_HINT);\n\n\t\tif (this.#_ui.validityText.textContent) descriptions.push(ID_VALIDITY_TEXT);\n\n\t\tif (descriptions.length > 0)\n\t\t\tinput.setAttribute(ARIA_DESCRIBEDBY, descriptions.join(' '));\n\t\telse input.removeAttribute(ARIA_DESCRIBEDBY);\n\t}\n\n\t/**\n\t * Vérifie la présence d'un label accessible et affiche un avertissement sinon.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Vérifie si une légende ou un indice est disponible pour le composant.\n\t * Si aucun texte accessible n'est trouvé, émet un avertissement dans la console.\n\t *\n\t * @private\n\t */\n\t#_checkLabel() {\n\t\tconst hasLabel = this.#_verifyLabel();\n\n\t\tif (!hasLabel) {\n\t\t\tLog.warn(LOG_TAG, WARN_NO_LABEL);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Vérifie si au moins une source de label est disponible.\n\t *\n\t * @returns `true` si une légende ou un indice existe, `false` sinon\n\t *\n\t * @private\n\t */\n\t#_verifyLabel() {\n\t\treturn this.#_verifyLegend() || this.#_verifyHint();\n\t}\n\n\t/**\n\t * Vérifie la présence d'une légende.\n\t *\n\t * @returns `true` si une légende est définie ou si des éléments enfants existent\n\t *\n\t * @private\n\t */\n\t#_verifyLegend() {\n\t\treturn this.#_verifyData(this.#_legend);\n\t}\n\n\t/**\n\t * Vérifie la présence d'un indice.\n\t *\n\t * @returns `true` si un indice est défini ou si des éléments slottés existent\n\t *\n\t * @private\n\t */\n\t#_verifyHint() {\n\t\treturn this.#_verifyData(this.#_hint, ID_HINT);\n\t}\n\n\t/**\n\t * Vérifie la disponibilité d'une donnée ou d'éléments enfants associés.\n\t *\n\t * @param data - La donnée textuelle à vérifier\n\t * @param slotName - Le nom du slot à inspecter (null pour le slot par défaut)\n\t * @returns `true` si la donnée est définie ou si des éléments enfants existent\n\t *\n\t * @private\n\t */\n\t#_verifyData(data: MayBe<string>, slotName: MayBe<string> = null) {\n\t\tconst hasData = !!data;\n\t\tconst hasElements = this.#_verifyElements(slotName);\n\t\treturn hasData || hasElements;\n\t}\n\n\t/**\n\t * Vérifie la présence d'éléments enfants dans un slot donné.\n\t *\n\t * @param slotName - Le nom du slot à inspecter (null pour les enfants sans slot)\n\t * @returns `true` si au moins un élément est trouvé\n\t *\n\t * @private\n\t */\n\t#_verifyElements(slotName: MayBe<string>) {\n\t\tconst iterator = this.#_getVerifyElements(slotName);\n\t\treturn !iterator.next().done;\n\t}\n\n\t/**\n\t * Générateur produisant les éléments enfants d'un slot donné.\n\t *\n\t * @param slotName - Le nom du slot à inspecter (null pour les enfants sans slot)\n\t * @yields Les éléments enfants correspondant au critère de slot\n\t *\n\t * @remarks\n\t * Si un nom de slot est fourni, retourne les éléments ayant l'attribut `slot` correspondant.\n\t * Sinon, retourne les éléments enfants sans attribut `slot` et les nœuds texte non vides.\n\t *\n\t * @private\n\t */\n\t*#_getVerifyElements(slotName: MayBe<string>) {\n\t\tif (slotName)\n\t\t\tyield* Array.from(this.querySelectorAll(`[slot=\"${slotName}\"]`));\n\t\telse {\n\t\t\tconst nodes = [...Array.from(this.childNodes)];\n\t\t\tfor (const node of nodes) {\n\t\t\t\tif (node instanceof HTMLElement) {\n\t\t\t\t\tif (!node.hasAttribute('slot')) yield node;\n\t\t\t\t} else if (node.nodeType === Node.TEXT_NODE && node.textContent?.trim())\n\t\t\t\t\tyield node;\n\t\t\t}\n\t\t}\n\t}\n\n\t//#endregion Private Methods\n\n\t//#region Static Methods\n\n\t/**\n\t * Retourne la liste des attributs observés par le composant.\n\t *\n\t * @returns Un tableau contenant tous les noms d'attributs observés\n\t *\n\t * @remarks\n\t * Combine les attributs observés du parent avec les {@link SYNCED_ATTRIBUTES}\n\t * et l'attribut `helper` spécifiques à ce composant.\n\t * Les changements de ces attributs déclencheront {@link _p_update}.\n\t *\n\t * @protected\n\t * @static\n\t * @override\n\t * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n\t * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n\t */\n\t@NonStd('Deprecated')\n\tprotected static _p_observedAttributes(): string[] {\n\t\treturn [\n\t\t\t...super._p_observedAttributes(),\n\t\t\t...SYNCED_ATTRIBUTES,\n\t\t\tATTRIBUTE_HELPER,\n\t\t];\n\t}\n\n\t/**\n\t * Indique que ce composant peut être associé à un formulaire.\n\t *\n\t * @remarks\n\t * Permet au composant de participer au cycle de vie des formulaires HTML,\n\t * notamment la soumission, la validation et la réinitialisation.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals#instance_properties | ElementInternals}\n\t */\n\tstatic get formAssociated(): Readonly<boolean> {\n\t\treturn true;\n\t}\n\n\t//#endregion Static Methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\n\n/**\n * Options de rendu pour l'item de carte.\n */\nexport type BnumCardItemRenderOptions = {\n\t/**\n\t * Indique si le slot par défaut doit être affiché.\n\t */\n\tdefaultSlot?: boolean;\n\t/**\n\t * Nom du slot à utiliser.\n\t */\n\tslotName?: string;\n};\n\n/**\n * Rendu du template de l'item de carte.\n * @param childTemplate Le template du contenu de l'item.\n * @param options Les options de rendu.\n * @returns Le template de l'item de carte.\n */\nexport function render(\n\tchildTemplate: string,\n\toptions?: BnumCardItemRenderOptions,\n) {\n\tconst { defaultSlot = true, slotName = EMPTY_STRING } = options || {};\n\tconst attrs: Record<string, string> = { id: 'defaultslot' };\n\n\tif (slotName) attrs['name'] = slotName;\n\n\tconst slot = defaultSlot ? <slot {...attrs}></slot> : EMPTY_STRING;\n\n\treturn slot + childTemplate;\n}\n\n/**\n * Indique qu'on utilise le slot par défaut.\n */\nexport const DEFAULT = EMPTY_STRING;\n/**\n * Indique qu'on n'utilise pas le slot par défaut.\n */\nexport const NO_DEFAULT = { defaultSlot: false } as const;\n","import JsEvent from '@rotomeca/event';\nimport BnumElement from 'components/bnum-element';\nimport { ClickCallback } from 'core/utils/types';\n\n/**\n * Initialise le gestionnaire de clic pour un item de carte.\n * @param event L'événement JsEvent à déclencher.\n * @param instance L'instance de BnumElement sur laquelle écouter le clic.\n */\nexport function onItemClickedInitializer(\n\tevent: JsEvent<ClickCallback>,\n\tinstance: BnumElement,\n) {\n\tinstance.addEventListener('click', e => {\n\t\tif (event.haveEvents()) event.call(e);\n\t});\n}\n","import JsEvent from '@rotomeca/event';\nimport { TAG_CARD_ITEM } from '../../../core/utils/constants/tags';\nimport BnumElementInternal from '../../bnum-element-states';\nimport style from './bnum-card-item.less';\nimport { HTMLBnumButton } from '../../atoms/button/bnum-button';\nimport { ClickCallback } from '../../../core/utils/types';\nimport { Define, SetAttr } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { DEFAULT, render } from './bnum-card-item.internal/template';\nimport { UpdateAll } from 'core/decorators/updateAll';\nimport { Observe } from 'core/decorators/observe';\nimport { Listener } from 'core/decorators/listener';\nimport { onItemClickedInitializer } from './bnum-card-item.internal/listener';\n\n//#region Global constants\nconst ATTRIBUTE_DISABLED = 'disabled';\nconst STATE_DISABLED = 'disabled';\nconst ROLE = 'listitem';\n//#endregion Global constants\n\n/**\n * Représente un item d'une carte `<bnum-card>` qui peut être mis dans un `bnum-card-list`.\n *\n * L'élément est considéré comme un `li` d'une liste pour des raisons d'accessibilité.\n *\n * @structure Item de carte\n * <bnum-card-item><p>Contenu de l'item</p></bnum-card-item>\n *\n * @structure Désactivé\n * <bnum-card-item disabled><p>Contenu de l'item</p></bnum-card-item>\n *\n * @state disabled - Actif quand l'item est désactivé\n *\n * @slot (default) - Contenu de l'item\n *\n * @attr {boolean | 'disabled' | undefined} (optional) disabled - Indique si l'item est désactivé\n *\n * @event {MouseEvent} click - Déclenché lors du clic sur l'item\n *\n * @cssvar {100%} --bnum-card-item-width-percent - Largeur en pourcentage du composant\n * @cssvar {30px} --bnum-card-item-width-modifier - Valeur soustraite à la largeur\n * @cssvar {var(--bnum-color-surface, #f6f6f7)} --bnum-card-item-background-color - Couleur de fond normale\n * @cssvar {var(--bnum-color-surface-hover, #eaeaea)} --bnum-card-item-background-color-hover - Couleur de fond au survol\n * @cssvar {var(--bnum-color-surface-active, #dfdfdf)} --bnum-card-item-background-color-active - Couleur de fond à l'état actif\n * @cssvar {pointer} --bnum-card-item-cursor - Type de curseur\n * @cssvar {15px} --bnum-card-item-padding - Espacement interne\n * @cssvar {block} --bnum-card-item-display - Type d'affichage\n */\n@Define({ tag: TAG_CARD_ITEM, styles: style, template: render(DEFAULT) })\n@UpdateAll()\n@Observe('disabled')\nexport class HTMLBnumCardItem extends BnumElementInternal {\n\t//#region Fields\n\t/**\n\t * Slot par défaut contenant le contenu de l'item.\n\t * @protected\n\t */\n\tprotected _p_slot: HTMLSlotElement | null = null;\n\n\t/**\n\t * Événement déclenché lors du clic sur l'item.\n\t */\n\t@Listener(onItemClickedInitializer)\n\taccessor onitemclicked!: JsEvent<ClickCallback>;\n\t//#endregion Fields\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant.\n\t * Initialise l'instance de l'élément.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Construit le DOM interne du composant.\n\t * Récupère le slot par défaut.\n\t * @param container ShadowRoot ou HTMLElement contenant le DOM.\n\t * @protected\n\t */\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tthis._p_slot = container.queryId('defaultslot');\n\t}\n\n\t/**\n\t * Méthode appelée lors de l'attachement du composant au DOM.\n\t * Définit le rôle ARIA et met à jour l'état du bouton.\n\t * @protected\n\t */\n\t@SetAttr('role', ROLE)\n\tprotected _p_attach(): void {\n\t\tsuper._p_attach();\n\n\t\tHTMLBnumButton.ToButton(this)._p_update();\n\t}\n\n\t/**\n\t * Met à jour le rendu du composant.\n\t * @protected\n\t */\n\tprotected _p_update(): void {\n\t\tthis._p_render();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Protected methods\n\t/**\n\t * Gère le rendu et les états du composant.\n\t * Met à jour l'attribut `aria-disabled` et l'état visuel.\n\t * @protected\n\t */\n\tprotected _p_render() {\n\t\tthis._p_clearStates();\n\n\t\tif (this.hasAttribute(ATTRIBUTE_DISABLED)) {\n\t\t\tthis.setAttribute('aria-disabled', 'true');\n\t\t\tthis._p_addState(STATE_DISABLED);\n\t\t} else this.removeAttribute('aria-disabled');\n\t}\n\t//#endregion Protected methods\n}\n","//CLASS\nexport const CLASS_DAY = 'bnum-card-item-agenda-day';\nexport const CLASS_HORIZONTAL = 'bnum-card-item-agenda-horizontal';\nexport const CLASS_BLOCK = 'bnum-card-item-agenda-block';\nexport const CLASS_HOUR = 'bnum-card-item-agenda-hour';\nexport const CLASS_VERTICAL = 'bnum-card-item-agenda-vertical';\nexport const CLASS_TITLE = 'bnum-card-item-agenda-title';\nexport const CLASS_TITLE_OVERRIDE = 'bnum-card-item-agenda-title-override';\nexport const CLASS_LOCATION = 'bnum-card-item-agenda-location';\nexport const CLASS_LOCATION_OVERRIDE =\n\t'bnum-card-item-agenda-location-override';\nexport const CLASS_ACTION = 'bnum-card-item-agenda-action';\nexport const CLASS_ACTION_OVERRIDE = 'bnum-card-item-agenda-action-override';\nexport const CLASS_PRIVATE_ICON = 'bnum-card-item-agenda-private-icon';\nexport const CLASS_ALL_DAY = 'bnum-card-item-agenda-all-day';\n//ATTRIBUTES\nexport const ATTRIBUTE_ALL_DAY = 'all-day';\nexport const ATTRIBUTE_PRIVATE = 'private';\nexport const ATTRIBUTE_MODE = 'mode';\nexport const ATTRIBUTE_DATA_TITLE = 'data-title';\nexport const ATTRIBUTE_DATA_LOCATION = 'data-location';\nexport const ATTRIBUTE_PENDING = 'agenda_all';\n// DATA\nexport const DATA_DATE = 'date';\nexport const DATA_DATE_FORMAT = 'date-format';\nexport const DATA_START_DATE = 'start-date';\nexport const DATA_START_DATE_FORMAT = 'start-date-format';\nexport const DATA_END_DATE = 'end-date';\nexport const DATA_END_DATE_FORMAT = 'end-date-format';\nexport const DATA_TITLE = 'title';\nexport const DATA_LOCATION = 'location';\n// SLOTS\nexport const SLOT_TITLE = 'title';\nexport const SLOT_LOCATION = 'location';\nexport const SLOT_ACTION = 'action';\n// ETATS\nexport const STATE_ALL_DAY = 'all-day';\nexport const STATE_PRIVATE = 'private';\nexport const STATE_MODE_PREFIX = 'mode-';\nexport const STATE_NO_LOCATION = 'no-location';\nexport const STATE_ACTION_DEFINED = 'action';\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { JsCircularEvent } from '@rotomeca/event';\nimport { HTMLBnumDate } from '../../atoms/date/bnum-date';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { Nullable } from '../../../core/utils/types';\nimport { CapitalizeLine } from '@rotomeca/utils';\nimport { TAG_CARD_ITEM_AGENDA } from '../../../core/utils/constants/tags';\nimport style from './bnum-card-item-agenda.less';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Data, Define, NO_SETTER, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { BnumDateUtils } from '../../../core/utils/BnumDateUtils';\nimport {\n\tAgendaEvent,\n\tCreateConstructorOptions,\n\tFromEventConstructorOptions,\n\tHTMLBnumCardItemAgendaUI,\n\tOnStartDefineActionCallback,\n\tUnknownDateElement,\n} from './card-item-agenda.internal/types';\nimport { HTMLBnumFragment } from 'components/atoms';\nimport {\n\tNO_DEFAULT,\n\trender,\n} from '../card-item/bnum-card-item.internal/template';\nimport {\n\tATTRIBUTE_ALL_DAY,\n\tATTRIBUTE_DATA_LOCATION,\n\tATTRIBUTE_DATA_TITLE,\n\tATTRIBUTE_MODE,\n\tATTRIBUTE_PRIVATE,\n\tCLASS_ACTION,\n\tCLASS_ACTION_OVERRIDE,\n\tCLASS_ALL_DAY,\n\tCLASS_BLOCK,\n\tCLASS_DAY,\n\tCLASS_HORIZONTAL,\n\tCLASS_HOUR,\n\tCLASS_LOCATION,\n\tCLASS_LOCATION_OVERRIDE,\n\tCLASS_PRIVATE_ICON,\n\tCLASS_TITLE,\n\tCLASS_TITLE_OVERRIDE,\n\tCLASS_VERTICAL,\n\tSLOT_ACTION,\n\tSLOT_LOCATION,\n\tSLOT_TITLE,\n\tSTATE_ACTION_DEFINED,\n\tSTATE_ALL_DAY,\n\tSTATE_MODE_PREFIX,\n\tSTATE_NO_LOCATION,\n\tSTATE_PRIVATE,\n} from './card-item-agenda.internal/constants';\nimport { UI } from 'core/decorators/ui';\nimport { Listener, NoInitListener } from 'core/decorators/listener';\n\nexport {\n\tAgendaEvent,\n\tCreateConstructorOptions,\n\tFromEventConstructorOptions,\n\tOnStartDefineActionCallback,\n\tUnknownDateElement,\n};\n\n//#region Global Constants\nconst SHEET = HTMLBnumCardItem.ConstructCSSStyleSheet(style);\n/** Format par défaut pour la date (ex: 2024-01-01) */\nconst FORMAT_DATE_DEFAULT = 'yyyy-MM-dd';\n/** Format par défaut pour la date et l'heure (ex: 2024-01-01 08:00:00) */\nconst FORMAT_DATE_TIME_DEFAULT = 'yyyy-MM-dd HH:mm';\n/** Format par défaut pour l'heure (ex: 08:00) */\nconst FORMAT_HOUR_DEFAULT = 'HH:mm';\n/** Format pour l'heure si le jour est différent (ex: 20/11) */\nconst FORMAT_HOUR_DIFF_DAY = 'dd/MM';\n/** Texte pour \"Aujourd'hui\" (localisé) */\nconst FORMAT_TODAY = BnumConfig.Get('local_keys')!.today!;\n/** Texte pour \"Demain\" (localisé) */\nconst FORMAT_TOMORROW = BnumConfig.Get('local_keys')!.tomorrow!;\n/** Format pour la date d'événement (ex: lundi 20 novembre) */\nconst FORMAT_EVENT_DATE = 'EEEE dd MMMM';\nconst ICON_PRIVATE = 'lock';\n/** Texte affiché pour \"toute la journée\" (localisé) */\nconst TEXT_ALL_DAY = BnumConfig.Get('local_keys')!.day!;\n/** Attribut d'état interne pour la gestion du rendu différé */\nconst ATTRIBUTE_PENDING = 'agenda_all';\n/** Mode par défaut */\nconst MODE_DEFAULT = 'default';\n/** Symbole pour la réinitialisation interne */\nconst SYMBOL_RESET = Symbol('reset');\n//#endregion Global Constants\n\n//#region Template\nconst AGENDA = (\n\t<HTMLBnumFragment>\n\t\t<span class={CLASS_DAY + ' bold'}></span>\n\t\t<div class={CLASS_HORIZONTAL}>\n\t\t\t<div class={CLASS_BLOCK}>\n\t\t\t\t<span class={CLASS_HOUR + ' bold'}></span>\n\t\t\t\t<div class={CLASS_VERTICAL}>\n\t\t\t\t\t<span class={CLASS_TITLE + ' bold-500'}>\n\t\t\t\t\t\t<slot id={SLOT_TITLE} name={SLOT_TITLE}></slot>\n\t\t\t\t\t\t<div class={CLASS_TITLE_OVERRIDE} hidden></div>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class={CLASS_LOCATION}>\n\t\t\t\t\t\t<slot id={SLOT_LOCATION} name={SLOT_LOCATION}></slot>\n\t\t\t\t\t\t<div class={CLASS_LOCATION_OVERRIDE} hidden></div>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span class={CLASS_ACTION}>\n\t\t\t\t<slot id={SLOT_ACTION} name={SLOT_ACTION}></slot>\n\t\t\t\t<div class={CLASS_ACTION_OVERRIDE} hidden></div>\n\t\t\t</span>\n\t\t</div>\n\t\t<HTMLBnumIcon class={CLASS_PRIVATE_ICON} hidden>\n\t\t\t{ICON_PRIVATE}\n\t\t</HTMLBnumIcon>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n\n/**\n * Item de carte agenda\n *\n * @structure Initalisation basique\n * <bnum-card-item-agenda\n * data-date=\"2024-01-01\"\n * data-start-date=\"2024-01-01 08:00:00\"\n * data-end-date=\"2024-01-01 10:00:00\"\n * data-title=\"Réunion de projet\"\n * data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple avec des dates de départs et fin différentes du jour de base\n * <bnum-card-item-agenda\n * data-date=\"2025-11-20\"\n * data-start-date=\"2025-10-20 09:40:00\"\n * data-end-date=\"2025-12-20 10:10:00\"\n * data-title=\"Réunion de projet\"\n * data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée entière\n * <bnum-card-item-agenda all-day\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n *\n * @structure Exemple avec des slots\n * <bnum-card-item-agenda\n * data-date=\"2025-11-20\"\n * data-start-date=\"2025-11-20 09:40:00\"\n * data-end-date=\"2025-11-20 10:10:00\">\n * <span slot=\"title\">Réunion de projet avec l'équipe marketing</span>\n * <span slot=\"location\">Salle de conférence, Bâtiment A</span>\n * <bnum-primary-button slot=\"action\" rounded data-icon='video_camera_front' data-icon-margin=\"0\" onclick=\"alert('Action déclenchée !')\"></bnum-primary-button>\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée privée\n * <bnum-card-item-agenda all-day private\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée avec un mode\n * <bnum-card-item-agenda all-day mode=\"telework\"\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n * @slot title - Contenu du titre de l'événement\n * @slot location - Contenu du lieu de l'événement\n * @slot action - Contenu de l'action de l'événement (bouton etc...)\n *\n * @state no-location - Actif quand le lieu n'est pas défini\n * @state all-day - Actif quand l'événement dure toute la journée\n * @state private - Actif quand l'événement est privé\n * @state mode-X - Actif quand le mode de l'événement est défini à \"X\" (remplacer X par le mode)\n * @state action - Actif quand une action est définie pour l'événement\n *\n * @attr {boolean | string | undefined} (optional) (default: undefined) all-day - Indique si l'événement dure toute la journée\n * @attr {boolean | string | undefined} (optional) (default: undefined) private - Indique si l'événement est privé\n * @attr {string | undefined} (optional) (default: undefined) mode - Indique le mode de l'événement et permet des affichages visuels (custom ou non) en fonction de celui-ci. Créer l'état CSS `mode-X`.\n * @attr {string | undefined} (optional) (default: undefined) data-title - Titre de l'événement\n * @attr {string | undefined} (optional) (default: undefined) data-location - Lieu de l'événement\n * @attr {string | undefined} data-date - Date de base de l'événement\n * @attr {string | undefined} (optional) (default: yyyy-MM-dd) data-date-format - Format de la date de base de l'événement\n * @attr {string | undefined} data-start-date - Date de début de l'événement\n * @attr {string | undefined} (optional) (default: yyyy-MM-dd HH:mm:ss) data-start-date-format - Format de la date de début de l'événement\n * @attr {string | undefined} data-end-date - Date de fin de l'événement\n * @attr {string | undefined} (optional) (default: yyyy-MM-dd HH:mm:ss) data-end-date-format - Format de la date de fin de l'événement\n *\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-gap - Contrôle l'espacement général entre les éléments du composant.\n * @cssvar {var(--bnum-font-weight-bold, 700)} --bnum-card-item-agenda-date-bold - Poids de police pour les textes en gras (date).\n * @cssvar {var(--bnum-font-weight-medium, 500)} --bnum-card-item-agenda-date-bold-medium - Poids de police medium pour certains textes.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-padding-right-hour - Padding à droite de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-left-hour - Padding à gauche de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-top-hour - Padding en haut de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-bottom-hour - Padding en bas de l'heure.\n * @cssvar {var(--bnum-border-surface, 1px solid #E0E0E0)} --bnum-card-item-agenda-date-border-right - Bordure à droite de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-left - Bordure à gauche de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-top - Bordure en haut de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-bottom - Bordure en bas de l'heure.\n * @cssvar {var(--bnum-font-size-xs, 12px)} --bnum-card-item-agenda-location-font-size - Taille de police pour le lieu.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-private-icon-top - Position top de l'icône privée.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-private-icon-right - Position right de l'icône privée.\n * @cssvar {italic} --bnum-card-item-agenda-telework-font-style - Style de police en mode télétravail.\n * @cssvar {'\\e88a'} --bnum-card-item-agenda-telework-icon-content - Contenu de l'icône télétravail.\n * @cssvar {var(--bnum-icon-font-family, 'Material Symbols Outlined')} --bnum-card-item-agenda-telework-icon-font-family - Famille de police de l'icône télétravail.\n * @cssvar {var(--bnum-font-size-xxl, 32px)} --bnum-card-item-agenda-telework-icon-font-size - Taille de l'icône télétravail.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-telework-icon-bottom - Position bottom de l'icône télétravail.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-telework-icon-right - Position right de l'icône télétravail.\n * @cssvar {20px} --bnum-card-item-agenda-telework-action-margin-right - Marge à droite de l'action en mode télétravail.\n */\n@Define({\n\ttag: TAG_CARD_ITEM_AGENDA,\n\ttemplate: render(AGENDA, NO_DEFAULT),\n})\nexport class HTMLBnumCardItemAgenda extends HTMLBnumCardItem {\n\t//#region Private Fields\n\t#_sd: Nullable<Date> = null;\n\t#_ed: Nullable<Date> = null;\n\t#_bd: Nullable<Date> = null;\n\t#_pr: Nullable<boolean> = null;\n\t#_spanAllday: Nullable<HTMLSpanElement> = null;\n\t#_bnumDateStart: Nullable<HTMLBnumDate> = null;\n\t#_bnumDateEnd: Nullable<HTMLBnumDate> = null;\n\t#_shedulerTitle: Nullable<Scheduler<HTMLElement | string | symbol>> = null;\n\t#_shedulerLocation: Nullable<Scheduler<HTMLElement | string | symbol>> = null;\n\t#_shedulerAction: Nullable<Scheduler<HTMLElement | symbol>> = null;\n\t//#endregion\n\t//#region Public Fields\n\t//#endregion\n\t//#region Getters/Setters\n\t@UI({\n\t\tslotTitle: `#${SLOT_TITLE}`,\n\t\tslotLocation: `#${SLOT_LOCATION}`,\n\t\tslotAction: `#${SLOT_ACTION}`,\n\t\tspanDate: `.${CLASS_DAY}`,\n\t\tspanHour: `.${CLASS_HOUR}`,\n\t\toverrideTitle: `.${CLASS_TITLE_OVERRIDE}`,\n\t\toverrideLocation: `.${CLASS_LOCATION_OVERRIDE}`,\n\t\toverrideAction: `.${CLASS_ACTION_OVERRIDE}`,\n\t\tprivateIcon: `.${CLASS_PRIVATE_ICON}`,\n\t})\n\taccessor #_ui!: HTMLBnumCardItemAgendaUI;\n\n\t/**\n\t * Événement circulaire déclenché lors de la définition de l'action.\n\t * Permet de personnaliser l'action affichée dans la carte agenda.\n\t */\n\t@Listener(NoInitListener, { circular: true })\n\taccessor onstartdefineaction!: JsCircularEvent<OnStartDefineActionCallback>;\n\n\t@Data('date', NO_SETTER) accessor #_baseDate: string = EMPTY_STRING;\n\t@Data('date-format', NO_SETTER) accessor #_baseDateFormat: string =\n\t\tFORMAT_DATE_DEFAULT;\n\t@Data('start-date', NO_SETTER) accessor #_startDate: string = EMPTY_STRING;\n\t@Data('start-date-format', NO_SETTER) accessor #_startDateFormat: string =\n\t\tFORMAT_DATE_TIME_DEFAULT;\n\t@Data('end-date', NO_SETTER) accessor #_endDate: string = EMPTY_STRING;\n\t@Data('end-date-format', NO_SETTER) accessor #_endDateFormat: string =\n\t\tFORMAT_DATE_TIME_DEFAULT;\n\t@Data(NO_SETTER) accessor #_title: Nullable<string> = null;\n\t@Data(NO_SETTER) accessor #_location: Nullable<string> = null;\n\n\t/**\n\t * Indique si l'événement dure toute la journée.\n\t */\n\tget isAllDay(): boolean {\n\t\treturn this.hasAttribute(ATTRIBUTE_ALL_DAY);\n\t}\n\t/**\n\t * Date de base de l'événement (jour affiché).\n\t */\n\tget baseDate(): Date {\n\t\treturn (\n\t\t\tthis.#_bd ??\n\t\t\tBnumDateUtils.parse(this.#_baseDate, this.#_baseDateFormat) ??\n\t\t\tnew Date()\n\t\t);\n\t}\n\tset baseDate(value: Date | string) {\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = BnumDateUtils.parse(value, this.#_baseDateFormat) ?? new Date();\n\t\t}\n\t\tconst oldValue = this.#_bd;\n\t\tthis.#_bd = value;\n\t\tthis.#_bnumDateStart?.askRender?.();\n\t\tthis.#_bnumDateEnd?.askRender?.();\n\t\tthis._p_addPendingAttribute(\n\t\t\tATTRIBUTE_PENDING,\n\t\t\toldValue === null\n\t\t\t\t? null\n\t\t\t\t: BnumDateUtils.format(\n\t\t\t\t\t\toldValue,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_baseDateFormat),\n\t\t\t\t\t),\n\t\t\tBnumDateUtils.format(\n\t\t\t\tvalue,\n\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_baseDateFormat),\n\t\t\t),\n\t\t)._p_requestAttributeUpdate();\n\t}\n\t/**\n\t * Date de début de l'événement.\n\t */\n\tget startDate(): Date {\n\t\treturn (\n\t\t\tthis.#_sd ??\n\t\t\tBnumDateUtils.parse(this.#_startDate, this.#_startDateFormat) ??\n\t\t\tnew Date()\n\t\t);\n\t}\n\tset startDate(value: Date | string) {\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = BnumDateUtils.parse(value, this.#_startDateFormat) ?? new Date();\n\t\t}\n\t\tconst oldValue = this.#_sd;\n\t\tthis.#_sd = value;\n\t\tthis.#_bnumDateEnd?.askRender?.();\n\t\tthis._p_addPendingAttribute(\n\t\t\tATTRIBUTE_PENDING,\n\t\t\toldValue === null\n\t\t\t\t? null\n\t\t\t\t: BnumDateUtils.format(\n\t\t\t\t\t\toldValue,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_startDateFormat),\n\t\t\t\t\t),\n\t\t\tBnumDateUtils.format(\n\t\t\t\tvalue,\n\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_startDateFormat),\n\t\t\t),\n\t\t)._p_requestAttributeUpdate();\n\t}\n\t/**\n\t * Date de fin de l'événement.\n\t */\n\tget endDate(): Date {\n\t\treturn (\n\t\t\tthis.#_ed ??\n\t\t\tBnumDateUtils.parse(this.#_endDate, this.#_endDateFormat) ??\n\t\t\tnew Date()\n\t\t);\n\t}\n\tset endDate(value: Date | string) {\n\t\tif (typeof value === 'string') {\n\t\t\tvalue = BnumDateUtils.parse(value, this.#_endDateFormat) ?? new Date();\n\t\t}\n\t\tconst oldValue = this.#_ed;\n\t\tthis.#_ed = value;\n\t\tthis.#_bnumDateStart?.askRender?.();\n\t\tthis._p_addPendingAttribute(\n\t\t\tATTRIBUTE_PENDING,\n\t\t\toldValue === null\n\t\t\t\t? null\n\t\t\t\t: BnumDateUtils.format(\n\t\t\t\t\t\toldValue,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_endDateFormat),\n\t\t\t\t\t),\n\t\t\tBnumDateUtils.format(\n\t\t\t\tvalue,\n\t\t\t\tBnumDateUtils.getOptionsFromToken(this.#_endDateFormat),\n\t\t\t),\n\t\t)._p_requestAttributeUpdate();\n\t}\n\tget private(): boolean {\n\t\treturn this.#_pr ?? this.#_private;\n\t}\n\tset private(value: boolean) {\n\t\tconst oldValue = this.#_pr;\n\t\tthis.#_pr = value;\n\n\t\tthis._p_addPendingAttribute(\n\t\t\tATTRIBUTE_PENDING,\n\t\t\tJSON.stringify(oldValue),\n\t\t\tJSON.stringify(value),\n\t\t)._p_requestAttributeUpdate();\n\t}\n\tget #_private(): boolean {\n\t\treturn this.hasAttribute(ATTRIBUTE_PRIVATE);\n\t}\n\tget #_getMode(): string {\n\t\treturn this.getAttribute(ATTRIBUTE_MODE) || MODE_DEFAULT;\n\t}\n\t//#endregion\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t//#region Lifecycle Hooks\n\t/**\n\t * Récupère le style CSS à appliquer au composant.\n\t * @returns Chaîne de style CSS à appliquer au composant.\n\t */\n\tprotected _p_getStylesheets(): CSSStyleSheet[] {\n\t\treturn [...super._p_getStylesheets(), SHEET];\n\t}\n\n\t/**\n\t * Précharge les données nécessaires à l'initialisation du composant.\n\t */\n\tprotected _p_preload(): void {\n\t\tsuper._p_preload();\n\n\t\tthis.#_sd = this.startDate;\n\t\tthis.#_ed = this.endDate;\n\t}\n\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tsuper._p_buildDOM(container);\n\n\t\tconst dateHtml = this.#_generateDateHtml(new Date());\n\t\tthis.#_ui.spanDate.appendChild(dateHtml);\n\n\t\tthis.#_bnumDateStart = this.setHourLogic(HTMLBnumDate.Create(new Date()));\n\t\tthis.#_bnumDateEnd = this.setHourLogic(HTMLBnumDate.Create(new Date()));\n\n\t\tthis.#_spanAllday = this._p_createSpan({\n\t\t\tclasses: [CLASS_ALL_DAY],\n\t\t\tchild: TEXT_ALL_DAY,\n\t\t});\n\t\tthis.#_spanAllday.hidden = true;\n\n\t\tthis.#_ui.spanHour.append(\n\t\t\tthis.#_bnumDateStart,\n\t\t\tthis.#_bnumDateEnd,\n\t\t\tthis.#_spanAllday,\n\t\t);\n\t}\n\n\t/**\n\t * Attache le composant au DOM et initialise les valeurs par défaut.\n\t */\n\tprotected _p_attach(): void {\n\t\tsuper._p_attach();\n\n\t\tif (this._p_slot) this._p_slot.hidden = true;\n\n\t\tif (this.#_title) {\n\t\t\tconst defaultTitle: Text = document.createTextNode(this.#_title);\n\t\t\tthis.#_ui.slotTitle.appendChild(defaultTitle);\n\t\t}\n\n\t\tif (this.#_location) {\n\t\t\tconst defaultLocation: Text = document.createTextNode(this.#_location);\n\t\t\tthis.#_ui.slotLocation.appendChild(defaultLocation);\n\t\t}\n\n\t\tthis.#_renderDOM();\n\t\tthis.#_release();\n\t}\n\n\t/**\n\t * Libère les attributs data- utilisés pour l'initialisation.\n\t */\n\t#_release(): void {\n\t\tvoid this.#_startDate;\n\t\tvoid this.#_endDate;\n\t\tvoid this.#_startDateFormat;\n\t\tvoid this.#_endDateFormat;\n\t\tvoid this.#_baseDate;\n\t\tvoid this.#_baseDateFormat;\n\t}\n\n\t/**\n\t * Met à jour le rendu du composant.\n\t */\n\tprotected _p_render() {\n\t\tsuper._p_render();\n\n\t\tthis.#_renderDOM();\n\t}\n\n\t/**\n\t * Met à jour l'affichage du composant selon les données courantes.\n\t */\n\t#_renderDOM(): void {\n\t\tlet createDate = true;\n\n\t\tthis._p_addState(`${STATE_MODE_PREFIX}${this.#_getMode}`);\n\n\t\t// Gestion des slots\n\t\tif (this.#_isSlotLocationEmpty()) this._p_addState(STATE_NO_LOCATION);\n\n\t\t// Gestion de l'action\n\t\tconst eventResult = this.onstartdefineaction.call({\n\t\t\tlocation: this.#_isSlotLocationEmpty()\n\t\t\t\t? this.#_location || EMPTY_STRING\n\t\t\t\t: this.#_ui.slotLocation.textContent || EMPTY_STRING,\n\t\t\taction: undefined,\n\t\t});\n\n\t\tif (eventResult.action) {\n\t\t\tthis.updateAction(eventResult.action, { forceCall: true });\n\t\t}\n\n\t\tif (\n\t\t\teventResult.action ||\n\t\t\tthis.#_ui.overrideAction.hidden === false ||\n\t\t\t(this.#_ui.slotAction && this.#_ui.slotAction.children.length > 0)\n\t\t) {\n\t\t\tthis._p_addState(STATE_ACTION_DEFINED);\n\t\t}\n\n\t\tif (this.#_ui.spanDate && this.#_ui.spanDate.children.length > 0) {\n\t\t\tconst dateHtml: Nullable<HTMLBnumDate> = this.shadowRoot!.querySelector(\n\t\t\t\tHTMLBnumDate.TAG,\n\t\t\t);\n\n\t\t\tif (dateHtml !== null) {\n\t\t\t\tcreateDate = false;\n\t\t\t\tdateHtml.date = this.baseDate;\n\t\t\t}\n\t\t}\n\n\t\tif (createDate) {\n\t\t\tconst dateHtml: HTMLBnumDate = this.#_generateDateHtml(this.baseDate);\n\t\t\tthis.#_ui.spanDate.appendChild(dateHtml);\n\t\t}\n\n\t\t// Gestion de la date\n\t\tif (this.isAllDay) {\n\t\t\tif (this.#_bnumDateStart !== null) this.#_bnumDateStart.hidden = true;\n\t\t\tif (this.#_bnumDateEnd !== null) this.#_bnumDateEnd.hidden = true;\n\n\t\t\tif (this.#_spanAllday === null) {\n\t\t\t\tthis._p_addState(STATE_ALL_DAY);\n\t\t\t\tconst spanAllDay: HTMLSpanElement = this._p_createSpan({\n\t\t\t\t\tclasses: [CLASS_ALL_DAY],\n\t\t\t\t\tchild: TEXT_ALL_DAY,\n\t\t\t\t});\n\t\t\t\tthis.#_spanAllday = spanAllDay;\n\t\t\t\tthis.#_ui.spanHour.appendChild(spanAllDay);\n\t\t\t} else this.#_spanAllday.hidden = false;\n\t\t} else {\n\t\t\tif (this.#_spanAllday !== null) this.#_spanAllday.hidden = true;\n\n\t\t\tif (this.#_bnumDateStart === null && this.#_bnumDateEnd === null) {\n\t\t\t\tconst htmlStartDate: HTMLBnumDate = this.setHourLogic(\n\t\t\t\t\tHTMLBnumDate.Create(this.startDate),\n\t\t\t\t);\n\t\t\t\tconst htmlEndDate: HTMLBnumDate = this.setHourLogic(\n\t\t\t\t\tHTMLBnumDate.Create(this.endDate),\n\t\t\t\t);\n\n\t\t\t\tthis.#_bnumDateStart = htmlStartDate;\n\t\t\t\tthis.#_bnumDateEnd = htmlEndDate;\n\n\t\t\t\tthis.#_ui.spanHour.append(htmlStartDate, htmlEndDate);\n\t\t\t} else {\n\t\t\t\tthis.#_bnumDateStart!.hidden = false;\n\t\t\t\tthis.#_bnumDateEnd!.hidden = false;\n\t\t\t\tthis.#_bnumDateStart!.date = this.startDate;\n\t\t\t\tthis.#_bnumDateEnd!.date = this.endDate;\n\t\t\t}\n\t\t}\n\n\t\tif (this.#_private) {\n\t\t\tthis._p_addState(STATE_PRIVATE);\n\t\t\tif (this.#_ui.privateIcon === null) {\n\t\t\t\tthis.#_ui.privateIcon =\n\t\t\t\t\tHTMLBnumIcon.Create(ICON_PRIVATE).addClass(CLASS_PRIVATE_ICON);\n\t\t\t\tthis.shadowRoot!.appendChild(this.#_ui.privateIcon);\n\t\t\t} else this.#_ui.privateIcon.hidden = false;\n\t\t} else if (this.#_ui.privateIcon) this.#_ui.privateIcon.hidden = true;\n\t}\n\n\t//#endregion\n\n\t//#region Public Methods\n\t/**\n\t * Met à jour l'action affichée dans la carte agenda.\n\t * @param element Élément HTML à afficher comme action\n\t * @returns L'instance du composant\n\t */\n\tpublic updateAction(\n\t\telement: HTMLElement,\n\t\t{ forceCall = false }: { forceCall?: boolean } = {},\n\t): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerAction(element, { forceCall });\n\t}\n\n\t/**\n\t * Réinitialise l'action à sa valeur par défaut.\n\t * @returns L'instance du composant\n\t */\n\tpublic resetAction(): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerAction(SYMBOL_RESET);\n\t}\n\n\t/**\n\t * Met à jour le titre affiché dans la carte agenda.\n\t * @param element Élément HTML ou texte à afficher comme titre\n\t * @returns L'instance du composant\n\t */\n\tpublic updateTitle(element: HTMLElement): HTMLBnumCardItemAgenda;\n\tpublic updateTitle(element: string): HTMLBnumCardItemAgenda;\n\tpublic updateTitle(element: HTMLElement | string): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerTitle(element);\n\t}\n\n\t/**\n\t * Réinitialise le titre à sa valeur par défaut.\n\t * @returns L'instance du composant\n\t */\n\tpublic resetTitle(): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerTitle(SYMBOL_RESET);\n\t}\n\n\t/**\n\t * Met à jour le lieu affiché dans la carte agenda.\n\t * @param element Élément HTML ou texte à afficher comme lieu\n\t * @returns L'instance du composant\n\t */\n\tpublic updateLocation(element: HTMLElement): HTMLBnumCardItemAgenda;\n\tpublic updateLocation(element: string): HTMLBnumCardItemAgenda;\n\tpublic updateLocation(element: HTMLElement | string): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerLocation(element);\n\t}\n\n\t/**\n\t * Réinitialise le lieu à sa valeur par défaut.\n\t * @returns L'instance du composant\n\t */\n\tpublic resetLocation(): HTMLBnumCardItemAgenda {\n\t\treturn this.#_requestShedulerLocation(SYMBOL_RESET);\n\t}\n\n\t/**\n\t * Applique la logique d'affichage pour la date (aujourd'hui, demain, etc.).\n\t * @param element Instance HTMLBnumDate à formater\n\t * @returns Instance HTMLBnumDate modifiée\n\t */\n\tpublic setDateLogic(element: HTMLBnumDate): HTMLBnumDate {\n\t\telement.formatEvent.add(EVENT_DEFAULT, param => {\n\t\t\tconst now: Date = new Date();\n\t\t\tconst date: Date =\n\t\t\t\ttypeof param.date === 'string'\n\t\t\t\t\t? ((BnumDateUtils.parse(param.date, element.format) ??\n\t\t\t\t\t\t\tparam.date) as Date)\n\t\t\t\t\t: (param.date as Date);\n\n\t\t\tif (BnumDateUtils.isSameDay(date, now)) param.date = FORMAT_TODAY;\n\t\t\telse if (BnumDateUtils.isSameDay(date, BnumDateUtils.addDays(now, 1)))\n\t\t\t\tparam.date = FORMAT_TOMORROW;\n\t\t\telse\n\t\t\t\t// eslint-disable-next-line no-restricted-syntax\n\t\t\t\tparam.date = CapitalizeLine(\n\t\t\t\t\tBnumDateUtils.format(\n\t\t\t\t\t\tdate,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(FORMAT_EVENT_DATE),\n\t\t\t\t\t\telement.localeElement,\n\t\t\t\t\t),\n\t\t\t\t);\n\n\t\t\treturn param;\n\t\t});\n\n\t\treturn element;\n\t}\n\n\t/**\n\t * Applique la logique d'affichage pour l'heure (heure ou date selon le jour).\n\t * @param element Instance HTMLBnumDate à formater\n\t * @returns Instance HTMLBnumDate modifiée\n\t */\n\tpublic setHourLogic(element: HTMLBnumDate): HTMLBnumDate {\n\t\telement.formatEvent.add(EVENT_DEFAULT, (param: { date: Date | string }) => {\n\t\t\tconst date: Date =\n\t\t\t\ttypeof param.date === 'string'\n\t\t\t\t\t? ((BnumDateUtils.parse(param.date, element.format) ??\n\t\t\t\t\t\t\tparam.date) as Date)\n\t\t\t\t\t: (param.date as Date);\n\n\t\t\tif (BnumDateUtils.isSameDay(date, this.baseDate))\n\t\t\t\tparam.date = BnumDateUtils.format(\n\t\t\t\t\tdate,\n\t\t\t\t\tBnumDateUtils.getOptionsFromToken(FORMAT_HOUR_DEFAULT),\n\t\t\t\t\telement.localeElement,\n\t\t\t\t);\n\t\t\telse\n\t\t\t\tparam.date = BnumDateUtils.format(\n\t\t\t\t\tdate,\n\t\t\t\t\tBnumDateUtils.getOptionsFromToken(FORMAT_HOUR_DIFF_DAY),\n\t\t\t\t\telement.localeElement,\n\t\t\t\t);\n\t\t\treturn param;\n\t\t});\n\n\t\treturn element;\n\t}\n\t//#endregion\n\n\t//#region Private Methods\n\t#_requestShedulerAction(\n\t\telement: HTMLElement | symbol,\n\t\t{ forceCall = false }: { forceCall?: boolean } = {},\n\t): this {\n\t\tthis.#_shedulerAction ??= new Scheduler<HTMLElement | symbol>(\n\t\t\tinnerElement => this.#_updateAction(innerElement!),\n\t\t);\n\n\t\tif (forceCall) this.#_shedulerAction.call(element);\n\t\telse this.#_shedulerAction.schedule(element);\n\t\treturn this;\n\t}\n\n\t#_updateAction(element: HTMLElement | symbol): void {\n\t\tif (element === SYMBOL_RESET) {\n\t\t\tthis._p_removeState(STATE_ACTION_DEFINED);\n\t\t\tthis.#_resetItem(this.#_ui.overrideAction, this.#_ui.slotAction);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._p_addState(STATE_ACTION_DEFINED);\n\t\tthis.#_ui.overrideAction.innerHTML = EMPTY_STRING;\n\t\tthis.#_ui.overrideAction.appendChild(element as HTMLElement);\n\n\t\tthis.#_ui.slotAction.hidden = true;\n\t\tthis.#_ui.overrideAction.hidden = false;\n\t}\n\n\t#_requestShedulerTitle(element: HTMLElement | string | symbol): this {\n\t\tthis.#_shedulerTitle ??= new Scheduler<HTMLElement | string | symbol>(\n\t\t\tinnerElement => this.#_updateTitle(innerElement!),\n\t\t);\n\n\t\tthis.#_shedulerTitle.schedule(element);\n\t\treturn this;\n\t}\n\n\t#_updateTitle(element: HTMLElement | string | symbol): void {\n\t\tif (element === SYMBOL_RESET) {\n\t\t\tthis.#_resetItem(this.#_ui.overrideTitle, this.#_ui.slotTitle);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#_ui.overrideTitle.innerHTML = EMPTY_STRING;\n\n\t\tif (typeof element === 'string') {\n\t\t\tconst textNode: Text = document.createTextNode(element);\n\t\t\tthis.#_ui.overrideTitle.appendChild(textNode);\n\t\t} else {\n\t\t\tthis.#_ui.overrideTitle.appendChild(element as HTMLElement);\n\t\t}\n\n\t\tthis.#_ui.slotTitle.hidden = true;\n\t\tthis.#_ui.overrideTitle.hidden = false;\n\t}\n\n\t#_requestShedulerLocation(element: HTMLElement | string | symbol): this {\n\t\tthis.#_shedulerLocation ??= new Scheduler<HTMLElement | string | symbol>(\n\t\t\tinnerElement => this.#_updateLocation(innerElement!),\n\t\t);\n\n\t\tthis.#_shedulerLocation.schedule(element);\n\t\treturn this;\n\t}\n\n\t#_updateLocation(element: HTMLElement | string | symbol): void {\n\t\tif (element === SYMBOL_RESET) {\n\t\t\tthis.#_resetItem(this.#_ui.overrideLocation, this.#_ui.slotLocation);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#_ui.overrideLocation.innerHTML = EMPTY_STRING;\n\n\t\tif (typeof element === 'string') {\n\t\t\tconst textNode: Text = document.createTextNode(element);\n\t\t\tthis.#_ui.overrideLocation.appendChild(textNode);\n\t\t} else {\n\t\t\tthis.#_ui.overrideLocation.appendChild(element as HTMLElement);\n\t\t}\n\n\t\tthis.#_ui.slotLocation.hidden = true;\n\t\tthis.#_ui.overrideLocation.hidden = false;\n\t}\n\n\t#_resetItem(\n\t\taction: HTMLElement,\n\t\tslot: HTMLSlotElement,\n\t): HTMLBnumCardItemAgenda {\n\t\taction.innerHTML = EMPTY_STRING;\n\t\tslot.hidden = false;\n\t\taction.hidden = true;\n\n\t\treturn this;\n\t}\n\t#_slotEmpty(slot: HTMLSlotElement): boolean {\n\t\treturn slot.assignedNodes().length === 0;\n\t}\n\t#_isSlotLocationEmpty(): boolean {\n\t\treturn this.#_ui.slotLocation\n\t\t\t? this.#_slotEmpty(this.#_ui.slotLocation)\n\t\t\t: true;\n\t}\n\t#_generateDateHtml(startDate: Date): HTMLBnumDate {\n\t\treturn this.setDateLogic(HTMLBnumDate.Create(startDate));\n\t}\n\t//#endregion\n\n\t//#region Static Methods\n\t/**\n\t * Crée une nouvelle instance du composant agenda avec les paramètres donnés.\n\t * @param baseDate Date de base\n\t * @param startDate Date de début\n\t * @param endDate Date de fin\n\t * @param options Options supplémentaires (allDay, title, location, action)\n\t * @returns Instance HTMLBnumCardItemAgenda\n\t */\n\tpublic static Create(\n\t\tbaseDate: Date,\n\t\tstartDate: Date,\n\t\tendDate: Date,\n\t\t{\n\t\t\tallDay = false,\n\t\t\ttitle = null,\n\t\t\tlocation = null,\n\t\t\taction = null,\n\t\t\tisPrivate = false,\n\t\t\tmode = null,\n\t\t}: CreateConstructorOptions = {},\n\t): HTMLBnumCardItemAgenda {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumCardItemAgenda;\n\n\t\tnode.baseDate = baseDate;\n\t\tnode.startDate = startDate;\n\t\tnode.endDate = endDate;\n\n\t\tif (allDay) node.setAttribute(ATTRIBUTE_ALL_DAY, ATTRIBUTE_ALL_DAY);\n\t\tif (title) node.setAttribute(ATTRIBUTE_DATA_TITLE, title);\n\t\tif (location) node.setAttribute(ATTRIBUTE_DATA_LOCATION, location);\n\n\t\tif (isPrivate) node.setAttribute(ATTRIBUTE_PRIVATE, ATTRIBUTE_PRIVATE);\n\t\tif (mode) node.setAttribute(ATTRIBUTE_MODE, mode);\n\n\t\tif (action) {\n\t\t\tif (typeof action === 'function') node.onstartdefineaction.push(action);\n\t\t\telse\n\t\t\t\tnode.onstartdefineaction.push(param => {\n\t\t\t\t\tparam.action = action!.element;\n\t\t\t\t\tparam.action!.onclick = action!.callback;\n\t\t\t\t\treturn param;\n\t\t\t\t});\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tstatic _p_observedAttributes(): string[] {\n\t\treturn [\n\t\t\t...super._p_observedAttributes(),\n\t\t\tATTRIBUTE_ALL_DAY,\n\t\t\tATTRIBUTE_PRIVATE,\n\t\t\tATTRIBUTE_MODE,\n\t\t];\n\t}\n\n\t/**\n\t * Crée une nouvelle instance du composant agenda à partir d'un objet événement.\n\t * @param baseDate Date de base\n\t * @param agendaEvent Objet événement source\n\t * @param options Fonctions de sélection et action personnalisée\n\t * @returns Instance HTMLBnumCardItemAgenda\n\t */\n\tpublic static FromEvent(\n\t\tbaseDate: Date,\n\t\tagendaEvent: AgendaEvent,\n\t\t{\n\t\t\tstartDateSelector = null,\n\t\t\tendDateSelector = null,\n\t\t\tallDaySelector = null,\n\t\t\ttitleSelector = null,\n\t\t\tlocationSelector = null,\n\t\t\taction = null,\n\t\t}: FromEventConstructorOptions = {},\n\t): HTMLBnumCardItemAgenda {\n\t\tconst [startDate, endDate] = this.#_tryGetAgendaDates(\n\t\t\t{\n\t\t\t\tval: agendaEvent.start,\n\t\t\t\tselector: startDateSelector,\n\t\t\t},\n\t\t\t{\n\t\t\t\tval: agendaEvent.end,\n\t\t\t\tselector: endDateSelector,\n\t\t\t},\n\t\t);\n\n\t\tconst allDay: boolean =\n\t\t\tagendaEvent?.allDay ?? allDaySelector?.(agendaEvent) ?? false;\n\n\t\tconst title: string =\n\t\t\tagendaEvent?.title ?? titleSelector?.(agendaEvent) ?? EMPTY_STRING;\n\n\t\tconst location: string =\n\t\t\tagendaEvent?.location ?? locationSelector?.(agendaEvent) ?? EMPTY_STRING;\n\n\t\treturn this.Create(baseDate, startDate, endDate, {\n\t\t\tallDay: allDay,\n\t\t\ttitle: title,\n\t\t\tlocation: location,\n\t\t\taction: action,\n\t\t});\n\t}\n\n\t/**\n\t * Tente d'obtenir une date d'agenda à partir d'une valeur donnée.\n\t * @param val La valeur à analyser.\n\t * @param selector Une fonction de sélection pour extraire la date.\n\t * @returns La date d'agenda ou une date invalide.\n\t */\n\tstatic #_TryGetAgendaDate(\n\t\tval: UnknownDateElement,\n\t\tselector: Nullable<(obj: unknown) => Date>,\n\t): Date {\n\t\treturn typeof val === 'string'\n\t\t\t? new Date(val)\n\t\t\t: val?.toDate\n\t\t\t\t? val.toDate()\n\t\t\t\t: (selector?.(val) ?? new Date('Date invalide'));\n\t}\n\n\t/**\n\t * Tente d'obtenir une liste de dates d'agenda à partir des valeurs données.\n\t * @param options Options contenant les valeurs et sélecteurs.\n\t * @returns La liste des dates d'agenda.\n\t */\n\tstatic #_tryGetAgendaDates(\n\t\t...options: {\n\t\t\tval: UnknownDateElement;\n\t\t\tselector: Nullable<(obj: unknown) => Date>;\n\t\t}[]\n\t): Date[] {\n\t\treturn options.map(option =>\n\t\t\tthis.#_TryGetAgendaDate(option.val, option.selector),\n\t\t);\n\t}\n\t//#endregion\n}\n","import JsEvent from '@rotomeca/event';\nimport BnumElement from 'components/bnum-element';\nimport { EVENT_DEFAULT } from 'core/utils/constants/constants';\n\nfunction _baseInitializer<\n\tTCaller extends BnumElement,\n\tTCallback extends (sender: TCaller) => void,\n\tTEvent extends JsEvent<TCallback>,\n>(event: TEvent, instance: TCaller, eventName: string) {\n\tevent.add(EVENT_DEFAULT, ((sender: TCaller) => {\n\t\tinstance.trigger(eventName, { caller: sender });\n\t}) as TCallback);\n}\n\nexport function OnSenderChangedInitializer<\n\tTCaller extends BnumElement,\n\tTCallback extends (sender: TCaller) => void,\n\tTEvent extends JsEvent<TCallback>,\n>(event: TEvent, instance: TCaller) {\n\t_baseInitializer(event, instance, 'bnum-card-item-mail:sender-changed');\n}\n\nexport function OnSubjectChangedInitializer<\n\tTCaller extends BnumElement,\n\tTCallback extends (sender: TCaller) => void,\n\tTEvent extends JsEvent<TCallback>,\n>(event: TEvent, instance: TCaller) {\n\t_baseInitializer(event, instance, 'bnum-card-item-mail:subject-changed');\n}\n\nexport function OnDateChangedInitializer<\n\tTCaller extends BnumElement,\n\tTCallback extends (sender: TCaller) => void,\n\tTEvent extends JsEvent<TCallback>,\n>(event: TEvent, instance: TCaller) {\n\t_baseInitializer(event, instance, 'bnum-card-item-mail:date-changed');\n}\n","// events\nexport const EVENT_SENDER_CHANGED = 'bnum-card-item-mail:sender-changed';\nexport const EVENT_SUBJECT_CHANGED = 'bnum-card-item-mail:subject-changed';\nexport const EVENT_DATE_CHANGED = 'bnum-card-item-mail:date-changed';\n// classes\nexport const CLASS_MAIN_CONTENT = 'main-content';\nexport const CLASS_SENDER = 'sender';\nexport const CLASS_SUBJECT = 'subject';\nexport const CLASS_DATE = 'date';\n// ids\nexport const ID_SUBJECT_SLOT = 'subjectslot';\nexport const ID_SENDER_SLOT = 'senderslot';\nexport const ID_DATE_SLOT = 'dateslot';\nexport const ID_DATE_ELEMENT_OVERRIDE = 'date-element-override';\n// slots\nexport const SLOT_SENDER_NAME = 'sender';\nexport const SLOT_SUBJECT_NAME = 'subject';\nexport const SLOT_DATE_NAME = 'date';\n// parts\nexport const PART_SENDER_OVERRIDE = 'sender-override';\nexport const PART_SUBJECT_OVERRIDE = 'subject-override';\nexport const PART_DATE_OVERRIDE = 'date-override';\n// data\nexport const DATA_SUBJECT = 'subject';\nexport const DATA_SENDER = 'sender';\nexport const DATA_DATE = 'date';\n// attributes\nexport const ATTRIBUTE_DATA_SUBJECT = `data-${DATA_SUBJECT}`;\nexport const ATTRIBUTE_DATA_SENDER = `data-${DATA_SENDER}`;\nexport const ATTRIBUTE_DATA_DATE = `data-${DATA_DATE}`;\nexport const ATTRIBUTE_READ = 'read';\n// states\nexport const STATE_READ = 'read';\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { HTMLBnumDate } from '../../atoms/date/bnum-date';\nimport style from './bnum-card-item-mail.less';\nimport JsEvent from '@rotomeca/event';\nimport { CallbackChangedSimple, Nullable } from '../../../core/utils/types';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { TAG_CARD_ITEM_MAIL } from '../../../core/utils/constants/tags';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { BnumDateUtils } from '../../../core/utils/BnumDateUtils';\nimport {\n\tNO_DEFAULT,\n\trender,\n} from '../card-item/bnum-card-item.internal/template';\nimport { HTMLBnumFragment } from 'components/atoms';\nimport { Listener } from 'core/decorators/listener';\nimport {\n\tOnDateChangedInitializer,\n\tOnSenderChangedInitializer,\n\tOnSubjectChangedInitializer,\n} from './bnum-card-item-mail.internal/listeners';\nimport { UI } from 'core/decorators/ui';\nimport {\n\tATTRIBUTE_DATA_DATE,\n\tATTRIBUTE_DATA_SENDER,\n\tATTRIBUTE_DATA_SUBJECT,\n\tATTRIBUTE_READ,\n\tCLASS_DATE,\n\tCLASS_MAIN_CONTENT,\n\tCLASS_SENDER,\n\tCLASS_SUBJECT,\n\tDATA_DATE,\n\tDATA_SENDER,\n\tDATA_SUBJECT,\n\tEVENT_DATE_CHANGED,\n\tEVENT_SENDER_CHANGED,\n\tEVENT_SUBJECT_CHANGED,\n\tID_DATE_ELEMENT_OVERRIDE,\n\tID_DATE_SLOT,\n\tID_SENDER_SLOT,\n\tID_SUBJECT_SLOT,\n\tPART_DATE_OVERRIDE,\n\tPART_SENDER_OVERRIDE,\n\tPART_SUBJECT_OVERRIDE,\n\tSLOT_DATE_NAME,\n\tSLOT_SENDER_NAME,\n\tSLOT_SUBJECT_NAME,\n\tSTATE_READ,\n} from './bnum-card-item-mail.internal/constants';\nimport { UpdateAll } from 'core/decorators/updateAll';\n\n//#region Types\ntype ChangedEvent = JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>>;\ntype HTMLBnumCardItemMailUi = Readonly<{\n\tslotSender: HTMLSlotElement;\n\tslotDate: HTMLSlotElement;\n\tslotSubject: HTMLSlotElement;\n\toverriderSender: HTMLSlotElement;\n\toverriderSubject: HTMLSlotElement;\n\toverriderDate: HTMLSlotElement;\n}>;\n//#endregion Types\n\n//#region Global Constants\nconst SHEET = HTMLBnumCardItem.ConstructCSSStyleSheet(style);\nconst EVENTS = {\n\tCHANGED: {\n\t\tSENDER: EVENT_SENDER_CHANGED,\n\t\tSUBJECT: EVENT_SUBJECT_CHANGED,\n\t\tDATE: EVENT_DATE_CHANGED,\n\t},\n} as const;\n\n/**\n * Format d'affichage de la date pour aujourd'hui.\n */\nconst TODAY_FORMAT = 'HH:mm';\n/**\n * Format d'affichage de la date pour les autres jours.\n */\nconst OTHER_DAY_FORMAT = 'dd/MM/yyyy';\n/**\n * Format d'affichage de la date pour la semaine.\n */\nconst WEEK_FORMAT = 'E - HH:mm';\nconst SYMBOL_RESET = Symbol('reset');\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<div class={CLASS_MAIN_CONTENT}>\n\t\t\t<div class={CLASS_SENDER}>\n\t\t\t\t<slot id={ID_SENDER_SLOT} name={SLOT_SENDER_NAME}></slot>\n\t\t\t\t<span\n\t\t\t\t\tclass={PART_SENDER_OVERRIDE}\n\t\t\t\t\tpart={PART_SENDER_OVERRIDE}\n\t\t\t\t\thidden\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t\t<div class={CLASS_SUBJECT}>\n\t\t\t\t<slot id={ID_SUBJECT_SLOT} name={SLOT_SUBJECT_NAME}></slot>\n\t\t\t\t<span\n\t\t\t\t\tclass={PART_SUBJECT_OVERRIDE}\n\t\t\t\t\tpart={PART_SUBJECT_OVERRIDE}\n\t\t\t\t\thidden\n\t\t\t\t></span>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class={CLASS_DATE}>\n\t\t\t<slot id={ID_DATE_SLOT} name={SLOT_DATE_NAME}></slot>\n\t\t\t<span class={PART_DATE_OVERRIDE} part={PART_DATE_OVERRIDE} hidden>\n\t\t\t\t<HTMLBnumDate id={ID_DATE_ELEMENT_OVERRIDE}></HTMLBnumDate>\n\t\t\t</span>\n\t\t</div>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n\n/**\n * Composant HTML personnalisé représentant un élément de carte mail.\n *\n * Permet d'afficher un sujet, un expéditeur et une date, avec possibilité d'override du contenu par défaut.\n *\n * Utilise des slots pour l'intégration dans le Shadow DOM et propose des méthodes pour forcer ou réinitialiser le contenu.\n *\n * Note: En passant par `data-date` ou `.updateDate()`, le format d'affichage de la date est ajusté selon la logique métier :\n * - Si la date est aujourd'hui, seule l'heure est affichée (HH:mm).\n * - Si la date est comprise entre hier et il y a 7 jours, le jour de la semaine et l'heure sont affichés (E - HH:mm).\n * - Sinon, le format par défaut de HTMLBnumDate est utilisé.\n *\n * @structure Item de carte mail\n * <bnum-card-item-mail data-date=\"now\">\n * <span slot=\"subject\">Sujet par défaut</span>\n * <span slot=\"sender\">Expéditeur par défaut</span>\n * </bnum-card-item-mail>\n *\n * @structure Item de carte data\n * <bnum-card-item-mail data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n *\n * @structure Item de carte lue\n * <bnum-card-item-mail read data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n *\n * @state read - Actif quand le mail est marqué comme lu.\n *\n * @attr {string} (optional) data-subject - Sujet du mail.\n * @attr {string} (optional) data-sender - Expéditeur du mail.\n * @attr {string} (optional) data-date - Date du mail, optionnel, mais conseillé si vous voulez la logique de formatage automatique.\n * @attr {boolean} (optional) read - Indique si le mail est lu.\n *\n * @event {CustomElement<{ caller: HTMLBnumCardItemMail }>} bnum-card-item-mail:sender-changed - Événement déclenché lors du changement de l'expéditeur du mail.\n * @event {CustomElement<{ caller: HTMLBnumCardItemMail }>} bnum-card-item-mail:subject-changed - Événement déclenché lors du changement du sujet du mail.\n * @event {CustomElement<{ caller: HTMLBnumCardItemMail }>} bnum-card-item-mail:date-changed - Événement déclenché lors du changement de la date du mail.\n *\n * @slot (default) - N'existe pas, si vous mettez du contenu en dehors des slots, ils ne seront pas affichés.\n * @slot sender - Contenu de l'expéditeur (texte ou HTML).\n * @slot subject - Contenu du sujet (texte ou HTML).\n * @slot date - Contenu de la date. /!\\ Si vous passez par ce slot, la mécanique de formatage automatique de la date ne s'appliquera pas.\n */\n@Define({ tag: TAG_CARD_ITEM_MAIL, template: render(TEMPLATE, NO_DEFAULT) })\n@UpdateAll()\nexport class HTMLBnumCardItemMail extends HTMLBnumCardItem {\n\t//#region Private fields\n\t/**\n\t * Élément HTMLBnumDate utilisé pour override la date.\n\t */\n\t#_dateOverrideElement: HTMLBnumDate | null = null;\n\t/**\n\t * Scheduler pour la mise à jour du sujet.\n\t */\n\t#_subjectScheduler: Nullable<Scheduler<string | HTMLElement | symbol>> = null;\n\t/**\n\t * Scheduler pour la mise à jour de la date.\n\t */\n\t#_dateScheduler: Nullable<Scheduler<string | Date | HTMLBnumDate | symbol>> =\n\t\tnull;\n\t#_defaultDate: HTMLBnumDate | null = null;\n\t/**\n\t * Scheduler pour la mise à jour de l'expéditeur.\n\t */\n\t#_senderScheduler: Nullable<Scheduler<string | HTMLElement | symbol>> = null;\n\t//#endregion Private fields\n\n\t//#region Getters\n\t@UI({\n\t\tslotSender: `#${ID_SENDER_SLOT}`,\n\t\tslotDate: `#${ID_DATE_SLOT}`,\n\t\tslotSubject: `#${ID_SUBJECT_SLOT}`,\n\t\toverriderSender: `.${PART_SENDER_OVERRIDE}`,\n\t\toverriderSubject: `.${PART_SUBJECT_OVERRIDE}`,\n\t\toverriderDate: `.${PART_DATE_OVERRIDE}`,\n\t})\n\taccessor #_ui!: HTMLBnumCardItemMailUi;\n\n\t/** Référence à la classe HTMLBnumCardItemMail */\n\t@Self _!: typeof HTMLBnumCardItemMail;\n\n\t/**\n\t * Événement déclenché lors du changement du sujet du mail.\n\t * Permet d'attacher des gestionnaires personnalisés au changement de sujet.\n\t */\n\t@Listener(OnSubjectChangedInitializer)\n\taccessor onsubjectchanged!: ChangedEvent;\n\n\t/**\n\t * Événement déclenché lors du changement de l'expéditeur du mail.\n\t * Permet d'attacher des gestionnaires personnalisés au changement d'expéditeur.\n\t */\n\t@Listener(OnSenderChangedInitializer) accessor onsenderchanged!: ChangedEvent;\n\n\t/**\n\t * Événement déclenché lors du changement de la date du mail.\n\t * Permet d'attacher des gestionnaires personnalisés au changement de date.\n\t */\n\t@Listener(OnDateChangedInitializer) accessor ondatechanged!: ChangedEvent;\n\n\t/**\n\t * Retourne l'élément HTMLBnumDate pour l'override de la date.\n\t *\n\t * Initialise la variable si elle n'a pas encore été initialisée.\n\t */\n\tget #_lazyDateOverrideElement(): HTMLBnumDate {\n\t\treturn (this.#_dateOverrideElement ??= (() => {\n\t\t\tconst existingDateElement = this.#_queryById<HTMLBnumDate>(\n\t\t\t\tthis.#_ui.overriderDate,\n\t\t\t\tID_DATE_ELEMENT_OVERRIDE,\n\t\t\t);\n\n\t\t\tthis.#_configureDateElement(existingDateElement);\n\t\t\treturn existingDateElement;\n\t\t})());\n\t}\n\n\t// --- Getters pour lire les data-attributs ---\n\t/**\n\t * Retourne la date du mail, en tenant compte de l'override si présent.\n\t */\n\tget date(): Date {\n\t\treturn this.#_ui.overriderDate?.hidden === false\n\t\t\t? this.#_lazyDateOverrideElement.getDate()!\n\t\t\t: (this.#_defaultDate?.getDate?.() ?? new Date());\n\t}\n\t/**\n\t * Retourne le sujet du mail depuis l'attribut data.\n\t */\n\tget #_mailSubject(): string {\n\t\treturn this.data(DATA_SUBJECT) || EMPTY_STRING;\n\t}\n\t/**\n\t * Retourne la date du mail depuis l'attribut data.\n\t */\n\tget #_mailDate(): string {\n\t\treturn this.data(DATA_DATE) || EMPTY_STRING;\n\t}\n\t/**\n\t * Retourne l'expéditeur du mail depuis l'attribut data.\n\t */\n\tget #_mailSender(): string {\n\t\treturn this.data(DATA_SENDER) || EMPTY_STRING;\n\t}\n\t//#endregion Getters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Crée le layout du Shadow DOM (avec slots ET overrides).\n\t * @param container Le conteneur du Shadow DOM ou un élément HTML.\n\t */\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tsuper._p_buildDOM(container);\n\n\t\t// On écrase _p_slot car dans notre template, il n'y a pas de slot par défaut\n\t\tthis._p_slot = container.queryId(ID_SUBJECT_SLOT);\n\t}\n\n\t/**\n\t * Crée le contenu par défaut et l'attache aux slots.\n\t * Initialise les nœuds pour le sujedate-element-overridet, l'expéditeur et la date.\n\t */\n\tprotected _p_attach(): void {\n\t\tsuper._p_attach();\n\n\t\tif (this.#_mailSubject !== EMPTY_STRING)\n\t\t\tthis._p_slot!.appendChild(this._p_createTextNode(this.#_mailSubject));\n\n\t\t// Crée le nœud texte pour l'EXPÉDITEUR par défaut\n\t\tif (this.#_mailSender !== EMPTY_STRING)\n\t\t\tthis.#_ui.slotSender!.appendChild(\n\t\t\t\tthis._p_createTextNode(this.#_mailSender),\n\t\t\t);\n\n\t\tif (this.#_mailDate !== EMPTY_STRING) {\n\t\t\t// Crée l'élément DATE par défaut\n\t\t\tconst defaultDate = HTMLBnumDate.Create(this.#_mailDate);\n\t\t\tthis.#_configureDateElement(defaultDate); // Applique la logique\n\t\t\tthis.#_ui.slotDate!.appendChild(defaultDate);\n\t\t\tthis.#_defaultDate = defaultDate;\n\t\t}\n\t}\n\n\t/**\n\t * Retourne les stylesheets à appliquer au composant.\n\t * @returns Liste des CSSStyleSheet à appliquer.\n\t */\n\tprotected _p_getStylesheets(): CSSStyleSheet[] {\n\t\treturn [...super._p_getStylesheets(), SHEET];\n\t}\n\n\t/**\n\t * Méthode appelée lors de la mise à jour d'un attribut observé.\n\t * @param name Nom de l'attribut.\n\t * @param oldVal Ancienne valeur.\n\t * @param newVal Nouvelle valeur.\n\t */\n\tprotected _p_update(): void {\n\t\tsuper._p_update();\n\n\t\tif (this.hasAttribute(ATTRIBUTE_READ)) this._p_addState(STATE_READ);\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Force le contenu de l'expéditeur, en ignorant le slot.\n\t * @param content Contenu texte ou HTML à afficher comme expéditeur.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tupdateSender(content: string | HTMLElement): this {\n\t\treturn this.#_requestUpdateSender(content);\n\t}\n\n\t/**\n\t * Réaffiche le contenu du slot \"sender\" (annule l'override).\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tresetSender(): this {\n\t\treturn this.#_requestUpdateSender(SYMBOL_RESET);\n\t}\n\n\t/**\n\t * Force le contenu du sujet, en ignorant le slot.\n\t * @param content Contenu texte ou HTML à afficher comme sujet.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tupdateSubject(content: string | HTMLElement): this {\n\t\treturn this.#_requestUpdateSubject(content);\n\t}\n\n\t/**\n\t * Réaffiche le contenu du slot \"subject\" (annule l'override).\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tresetSubject(): this {\n\t\treturn this.#_requestUpdateSubject(SYMBOL_RESET);\n\t}\n\n\t/**\n\t * Force le contenu de la date, en ignorant le slot.\n\t * @param content Chaîne, Date ou élément HTML à afficher comme date.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tupdateDate(content: string | Date | HTMLBnumDate): this {\n\t\treturn this.#_requestUpdateDate(content);\n\t}\n\n\t/**\n\t * Réaffiche le contenu du slot \"date\" (annule l'override).\n\t * @returns L'instance courante pour chaînage.\n\t */\n\tresetDate(): this {\n\t\treturn this.#_requestUpdateDate(SYMBOL_RESET);\n\t}\n\t//#endregion Public methods\n\t//#region Private methods\n\t/**\n\t * Met à jour l'affichage de l'expéditeur (slot ou override).\n\t * @param content Contenu à afficher ou symbole de reset.\n\t */\n\t#_updateSender(content: string | HTMLElement | symbol): void {\n\t\tif (!this.#_ui.overriderSender || !this.#_ui.slotSender) return;\n\n\t\tif (content === SYMBOL_RESET) {\n\t\t\tthis.#_ui.slotSender.hidden = false;\n\t\t\tthis.#_ui.overriderSender.hidden = true;\n\t\t} else {\n\t\t\tif (typeof content === 'string')\n\t\t\t\tthis.#_ui.overriderSender.innerHTML = content;\n\t\t\telse this.#_ui.overriderSender.replaceChildren(content as HTMLElement);\n\n\t\t\t// On cache le slot, on montre l'override\n\t\t\tthis.#_ui.slotSender.hidden = true;\n\t\t\tthis.#_ui.overriderSender.hidden = false;\n\t\t}\n\n\t\tthis.onsenderchanged.call(this);\n\t}\n\n\t/**\n\t * Planifie la mise à jour de l'expéditeur.\n\t * @param content Contenu à afficher ou symbole de reset.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\t#_requestUpdateSender(content: string | HTMLElement | symbol): this {\n\t\t(this.#_senderScheduler ??= new Scheduler<string | HTMLElement | symbol>(\n\t\t\tvalue => this.#_updateSender(value!),\n\t\t)).schedule(content);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'affichage du sujet (slot ou override).\n\t * @param content Contenu à afficher ou symbole de reset.\n\t */\n\t#_updateSubject(content: string | HTMLElement | symbol): void {\n\t\tif (!this.#_ui.overriderSubject || !this.#_ui.slotSubject) return;\n\n\t\tif (content === SYMBOL_RESET) {\n\t\t\tthis.#_ui.slotSubject.hidden = false;\n\t\t\tthis.#_ui.overriderSubject.hidden = true;\n\t\t} else if (typeof content === 'string')\n\t\t\tthis.#_ui.overriderSubject.innerHTML = content;\n\t\telse this.#_ui.overriderSubject.replaceChildren(content as HTMLElement);\n\n\t\t// On cache le slot, on montre l'override\n\t\tthis.#_ui.slotSubject.hidden = true;\n\t\tthis.#_ui.overriderSubject.hidden = false;\n\n\t\tthis.onsubjectchanged.call(this);\n\t}\n\n\t/**\n\t * Planifie la mise à jour du sujet.\n\t * @param content Contenu à afficher ou symbole de reset.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\t#_requestUpdateSubject(content: string | HTMLElement | symbol): this {\n\t\t(this.#_subjectScheduler ??= new Scheduler<string | HTMLElement | symbol>(\n\t\t\tvalue => this.#_updateSubject(value!),\n\t\t)).schedule(content);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'affichage de la date (slot ou override).\n\t * @param content Contenu à afficher ou symbole de reset.\n\t */\n\t#_updateDate(content: string | Date | HTMLBnumDate | symbol): void {\n\t\tif (!this.#_ui.overriderDate || !this.#_ui.slotDate) return;\n\n\t\tif (content === SYMBOL_RESET) {\n\t\t\tthis.#_ui.slotDate.hidden = false;\n\t\t\tthis.#_ui.overriderDate.hidden = true;\n\t\t} else {\n\t\t\tif (typeof content === 'string' || content instanceof Date)\n\t\t\t\tthis.#_lazyDateOverrideElement.setDate(content);\n\t\t\telse\n\t\t\t\tthis.#_lazyDateOverrideElement.setDate(\n\t\t\t\t\t(content as HTMLBnumDate).getDate()!,\n\t\t\t\t);\n\n\t\t\tthis.#_ui.slotDate.hidden = true;\n\t\t\tthis.#_ui.overriderDate.hidden = false;\n\t\t}\n\n\t\tthis.ondatechanged.call(this);\n\t}\n\n\t/**\n\t * Planifie la mise à jour de la date.\n\t * @param content Contenu à afficher ou symbole de reset.\n\t * @returns L'instance courante pour chaînage.\n\t */\n\t#_requestUpdateDate(content: string | Date | HTMLBnumDate | symbol): this {\n\t\t(this.#_dateScheduler ??= new Scheduler<\n\t\t\tstring | Date | HTMLBnumDate | symbol\n\t\t>(value => this.#_updateDate(value!))).schedule(content);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Recherche un élément par son id dans le container donné.\n\t * @param container Container dans lequel chercher.\n\t * @param id Id de l'élément.\n\t * @returns L'élément trouvé.\n\t */\n\t#_queryById<T extends HTMLElement>(\n\t\tcontainer: ShadowRoot | HTMLElement,\n\t\tid: string,\n\t): T {\n\t\treturn container instanceof ShadowRoot\n\t\t\t? (container.getElementById(id) as T)\n\t\t\t: (container.querySelector(`#${id}`) as T);\n\t}\n\n\t/**\n\t * Configure le format d'affichage de la date selon la logique métier :\n\t * - Affiche l'heure si la date est aujourd'hui.\n\t * - Affiche le jour et l'heure si la date est comprise entre hier et il y a 7 jours.\n\t * - Sinon, conserve le format par défaut.\n\t * @param element Instance de HTMLBnumDate à configurer.\n\t */\n\t#_configureDateElement(element: HTMLBnumDate): void {\n\t\tthis._.SetDateLogique(element);\n\t}\n\n\t//#endregion Private methods\n\n\t//#region Static methods\n\t/**\n\t * Applique la logique de formatage de date à un élément HTMLBnumDate.\n\t * @param element Élément HTMLBnumDate à configurer.\n\t */\n\tstatic SetDateLogique(element: HTMLBnumDate): void {\n\t\telement.formatEvent.add(EVENT_DEFAULT, param => {\n\t\t\tconst originalDate = element.getDate();\n\t\t\tif (!originalDate) return param;\n\t\t\tif (BnumDateUtils.isToday(originalDate)) {\n\t\t\t\treturn {\n\t\t\t\t\tdate: BnumDateUtils.format(\n\t\t\t\t\t\toriginalDate,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(TODAY_FORMAT),\n\t\t\t\t\t\telement.localeElement,\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst now = new Date();\n\t\t\tconst startOfInterval = BnumDateUtils.startOfDay(\n\t\t\t\tBnumDateUtils.subDays(now, 7),\n\t\t\t);\n\t\t\tconst endOfInterval = BnumDateUtils.endOfDay(\n\t\t\t\tBnumDateUtils.subDays(now, 1),\n\t\t\t);\n\t\t\tif (\n\t\t\t\tBnumDateUtils.isWithinInterval(originalDate, {\n\t\t\t\t\tstart: startOfInterval,\n\t\t\t\t\tend: endOfInterval,\n\t\t\t\t})\n\t\t\t) {\n\t\t\t\treturn {\n\t\t\t\t\tdate: BnumDateUtils.format(\n\t\t\t\t\t\toriginalDate,\n\t\t\t\t\t\tBnumDateUtils.getOptionsFromToken(WEEK_FORMAT),\n\t\t\t\t\t\telement.localeElement,\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\tdate: BnumDateUtils.format(\n\t\t\t\t\toriginalDate,\n\t\t\t\t\tBnumDateUtils.getOptionsFromToken(OTHER_DAY_FORMAT),\n\t\t\t\t\telement.localeElement,\n\t\t\t\t), // Format par défaut si aucune condition n'est remplie\n\t\t\t};\n\t\t});\n\t}\n\n\tstatic _p_observedAttributes(): string[] {\n\t\treturn [...super._p_observedAttributes(), ATTRIBUTE_READ];\n\t}\n\n\t/**\n\t * Crée une nouvelle instance du composant avec les valeurs fournies.\n\t * @param subject Sujet du mail.\n\t * @param sender Expéditeur du mail.\n\t * @param date Date du mail\n\t * @returns Instance HTMLBnumCardItemMail.\n\t */\n\tstatic Create(\n\t\tsubject: string,\n\t\tsender: string,\n\t\tdate: string | Date,\n\t): HTMLBnumCardItemMail {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumCardItemMail;\n\n\t\tnode.attr(ATTRIBUTE_DATA_SUBJECT, subject);\n\t\tnode.attr(ATTRIBUTE_DATA_SENDER, sender);\n\n\t\tif (typeof date === 'string') node.attr(ATTRIBUTE_DATA_DATE, date);\n\t\telse node.attr(ATTRIBUTE_DATA_DATE, date.toISOString());\n\n\t\treturn node;\n\t}\n\n\tstatic get EVENTS_AVAILABLES(): Readonly<typeof EVENTS> {\n\t\treturn EVENTS;\n\t}\n\t//#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { TAG_CARD_LIST } from '../../../core/utils/constants/tags';\nimport style from './bnum-card-list.less';\nimport { Nullable } from '../../../core/utils/types';\nimport { SchedulerArray } from '../../../core/utils/Scheduler';\nimport { Define, SetAttr } from '../../../core/decorators';\n\n//#region Global Constants\nconst SYMBOL_RESET = Symbol('reset');\n//#endregion Global Constants\n\n/**\n * Composant liste de cartes Bnum.\n * Permet d'afficher une liste d'éléments de type carte.\n *\n * @structure Default\n * <bnum-card-list>\n *  <bnum-card-item></bnum-card-item>\n *  <bnum-card-item></bnum-card-item>\n *  <bnum-card-item></bnum-card-item>\n * </bnum-card-list>\n *\n * @structure Mail et agenda\n * <bnum-card-list>\n *   <bnum-card-item-mail data-date=\"now\">\n *     <span slot=\"subject\">Sujet par défaut</span>\n *     <span slot=\"sender\">Expéditeur par défaut</span>\n *   </bnum-card-item-mail>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * </bnum-card-list>\n *\n * @structure Dans une card\n * <bnum-card>\n * <bnum-card-title slot=\"title\" data-icon=\"info\">Diverses informations</bnum-card-title>\n * <bnum-card-list>\n *   <bnum-card-item-mail data-date=\"now\">\n *     <span slot=\"subject\">Sujet par défaut</span>\n *     <span slot=\"sender\">Expéditeur par défaut</span>\n *   </bnum-card-item-mail>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * </bnum-card-list>\n * </bnum-card>\n *\n * @slot (default) - Contenu de la liste de cartes (éléments HTMLBnumCardItem)\n *\n *\n */\n@Define({ tag: TAG_CARD_LIST, styles: style })\nexport class HTMLBnumCardList extends BnumElement {\n\t//#region Private fields\n\t/**\n\t * Ordonnanceur de modifications de la liste.\n\t */\n\t#_modifierScheduler: Nullable<SchedulerArray<HTMLBnumCardItem>> = null;\n\t//#endregion Private fields\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur de la liste de cartes.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Construit le DOM interne du composant.\n\t * @param container Racine du shadow DOM ou élément HTML\n\t */\n\t@SetAttr('role', 'list')\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tsuper._p_buildDOM(container);\n\t\tcontainer.appendChild(this._p_createSlot());\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Ajoute un ou plusieurs éléments de type carte à la liste.\n\t * @param nodes Éléments HTMLBnumCardItem à ajouter\n\t * @returns {this} L'instance courante\n\t */\n\tpublic add(...nodes: HTMLBnumCardItem[]): this {\n\t\treturn this.#_requestModifier(nodes);\n\t}\n\n\t/**\n\t * Vide la liste de toutes ses cartes.\n\t * @returns {this} L'instance courante\n\t */\n\tpublic clear(): this {\n\t\treturn this.#_requestModifier(SYMBOL_RESET);\n\t}\n\t//#endregion Public methods\n\t//#region  Private methods\n\t#_requestModifier(items: HTMLBnumCardItem[] | symbol): this {\n\t\t(this.#_modifierScheduler ??= new SchedulerArray<HTMLBnumCardItem>(\n\t\t\tvalues => this.#_modifier(values!),\n\t\t\tSYMBOL_RESET,\n\t\t)).schedule(items);\n\n\t\treturn this;\n\t}\n\t#_modifier(items: HTMLBnumCardItem[] | symbol): void {\n\t\tif (items === SYMBOL_RESET) {\n\t\t\tthis.innerHTML! = EMPTY_STRING;\n\t\t} else this.append(...(items as HTMLBnumCardItem[]));\n\t}\n\t//#endregion  Private methods\n\n\t//#region Static methods\n\t/**\n\t * Crée une nouvelle instance de liste de cartes avec des éléments optionnels.\n\t * @param items Tableau d'éléments HTMLBnumCardItem ou null\n\t * @returns {HTMLBnumCardList} Nouvelle instance de liste de cartes\n\t */\n\tstatic Create(items: Nullable<HTMLBnumCardItem[]> = null): HTMLBnumCardList {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumCardList;\n\n\t\tif (items && items.length > 0) {\n\t\t\tnode.add(\n\t\t\t\t...items.filter((item): item is HTMLBnumCardItem => item !== null),\n\t\t\t);\n\t\t}\n\n\t\treturn node;\n\t}\n\t//#endregion Static methods\n}\n","import style from './bnum-card-title.less';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { TAG_CARD_TITLE } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Attr, Define } from '../../../core/decorators';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { UpdateAll } from 'core/decorators/updateAll';\nimport { Observe } from 'core/decorators/observe';\nimport { UI } from 'core/decorators/ui';\nimport { Schedule } from 'core/decorators/schedule';\n\n//#region Global Constants\nconst ATTRIBUTE_URL = 'url';\nconst ATTRIBUTE_DATA_ICON = 'icon';\nconst SLOT_NAME_ICON = 'icon';\nconst CLASS_LINK = 'card-title-link';\nconst STATE_URL = 'url';\nconst STATE_WITHOUT_URL = 'without-url';\nconst CLASS_ICON_TITLE = 'card-icon-title';\nconst ID_SLOT_ICON = 'sloticon';\nconst ID_SLOT_TEXT = 'mainslot';\nconst ID_CUSTOM_BODY = 'custombody';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = (\n\t<h2>\n\t\t<a class={CLASS_LINK}>\n\t\t\t<span class=\"container\">\n\t\t\t\t<slot id={ID_SLOT_ICON} name={SLOT_NAME_ICON}></slot>\n\t\t\t\t<HTMLBnumIcon class={CLASS_ICON_TITLE} hidden></HTMLBnumIcon>\n\t\t\t</span>\n\t\t\t<span class=\"container\">\n\t\t\t\t<slot id={ID_SLOT_TEXT}></slot>\n\t\t\t\t<span id={ID_CUSTOM_BODY} hidden></span>\n\t\t\t</span>\n\t\t</a>\n\t</h2>\n);\n//#endregion Template\n\n/**\n * Composant représentant le titre d'une carte, pouvant inclure une icône et un lien.\n * Permet d'afficher un titre enrichi avec une icône et éventuellement un lien cliquable.\n *\n * @structure Cas url et icône\n * <bnum-card-title data-icon=\"labs\" url=\"https://example.com\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas icône uniquement\n * <bnum-card-title data-icon=\"labs\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas lien uniquement\n * <bnum-card-title url=\"https://example.com\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas texte seul\n * <bnum-card-title>Titre de la carte</bnum-card-title>\n *\n * @structure Cas icône via slot\n * <bnum-card-title>\n * <bnum-icon slot=\"icon\">drive_folder_upload</bnum-icon>\n * Titre de la carte\n * </bnum-card-title>\n *\n * @state url - Actif lorsque le titre contient un lien.\n * @state without-url - Actif lorsque le titre ne contient pas de lien.\n *\n * @slot (default) - Titre de la carte (texte ou HTML)\n * @slot icon - Icône personnalisée à afficher avant le titre. Note: si une icône est définie via l'attribut `data-icon` ou via la propriété `icon`, ce slot sera ignoré.\n *\n * @attr {string | null} (optional) url - URL du lien du titre de la carte\n * @attr {string | null} (optional) data-icon - Nom de l'icône (Material Symbols) à afficher avant le titre\n *\n * @cssvar {flex} --bnum-card-title-display - Définit le mode d'affichage du titre de la carte.\n * @cssvar {center} --bnum-card-title-align-items - Définit l'alignement vertical des éléments dans le titre de la carte.\n * @cssvar {var(--bnum-space-s, 10px)} --bnum-card-title-gap - Définit l'espacement entre l'icône et le texte du titre.\n */\n@Define({ tag: TAG_CARD_TITLE, styles: style, template: TEMPLATE })\n@UpdateAll()\n@Observe(ATTRIBUTE_URL)\nexport class HTMLBnumCardTitle extends BnumElementInternal {\n\t//#region Private fields\n\t#_bodyScheduler: Nullable<Scheduler<HTMLElement | string | Text>> = null;\n\t#_initBody: Nullable<HTMLElement | string | Text> = null;\n\t//#endregion Private fields\n\n\t//#region Getter/Setters\n\t@UI({\n\t\tslotIcon: `#${ID_SLOT_ICON}`,\n\t\tslotText: `#${ID_SLOT_TEXT}`,\n\t\tcustomBody: `#${ID_CUSTOM_BODY}`,\n\t\tlink: `.${CLASS_LINK}`,\n\t\ticon: `.${CLASS_ICON_TITLE}`,\n\t})\n\taccessor #_ui!: {\n\t\tslotIcon: HTMLSlotElement;\n\t\tslotText: HTMLSlotElement;\n\t\tcustomBody: HTMLSpanElement;\n\t\tlink: HTMLAnchorElement;\n\t\ticon: HTMLBnumIcon;\n\t};\n\n\t/**\n\t * URL du lien du titre de la carte.\n\t */\n\t@Attr() accessor url: Nullable<string> = null;\n\n\t/**\n\t * Obtient le nom de l'icône associée au titre de la carte.\n\t * @returns {string | null} Nom de l'icône ou null si aucune icône n'est définie\n\t */\n\tpublic get icon(): string | null {\n\t\treturn this.data(ATTRIBUTE_DATA_ICON);\n\t}\n\n\t/**\n\t * Définit le nom de l'icône associée au titre de la carte.\n\t * Met à jour le DOM pour refléter le changement.\n\t * @param {string | null} v Nom de l'icône ou null\n\t */\n\tpublic set icon(v: string | null) {\n\t\tif (this.alreadyLoaded) {\n\t\t\tthis._p_setData(ATTRIBUTE_DATA_ICON, v).#_updateDOM();\n\t\t} else {\n\t\t\tconst fromAttribute = true;\n\t\t\tthis.data(ATTRIBUTE_DATA_ICON, v, fromAttribute);\n\t\t}\n\t}\n\t//#endregion Getter/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant HTMLBnumCardTitle.\n\t * Initialise le composant sans ajouter d'éléments DOM.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Construit le DOM du composant dans le conteneur donné.\n\t *\n\t * Ajoute l'icône, le texte et le lien selon les propriétés définies.\n\t */\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_updateDOM();\n\n\t\tif (this.#_initBody) {\n\t\t\tthis.#_updateBody(this.#_initBody);\n\t\t\tthis.#_initBody = null;\n\t\t}\n\t}\n\n\t/**\n\t * Méthode appelée lors de la mise à jour d'un attribut observé.\n\t * Met à jour le DOM du composant.\n\t */\n\tprotected _p_update(): void {\n\t\tif (this.alreadyLoaded) this.#_updateDOM();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Met à jour le DOM du composant selon les propriétés actuelles.\n\t * Affiche ou masque l'icône et met à jour le lien si nécessaire.\n\t * @private\n\t */\n\t@Schedule()\n\t#_updateDOM(): void {\n\t\tconst url = this.url;\n\t\tconst icon = this.icon;\n\n\t\tthis._p_clearStates();\n\n\t\tif (icon) {\n\t\t\tthis.#_ui.icon.icon = icon;\n\t\t\tthis.#_ui.icon.hidden = false;\n\t\t\tthis.#_ui.slotIcon.hidden = true;\n\t\t} else this.#_ui.icon.hidden = true;\n\n\t\tif (url) {\n\t\t\tthis.#_ui.link.href = url;\n\t\t\tthis._p_addState(STATE_URL);\n\n\t\t\tthis.#_ui.link.removeAttribute('role');\n\t\t\tthis.#_ui.link.removeAttribute('aria-disabled');\n\t\t} else {\n\t\t\tthis.#_ui.link.removeAttribute('href');\n\t\t\tthis._p_addState(STATE_WITHOUT_URL);\n\t\t}\n\t}\n\n\t/**\n\t * Met à jour le corps du titre de la carte.\n\t * @param element Elément HTML, texte ou nœud Text à insérer dans le titre\n\t * @private\n\t */\n\t#_updateBody(element: HTMLElement | string | Text): void {\n\t\tthis.#_ui.customBody.hidden = false;\n\t\tthis.#_ui.slotText.hidden = true;\n\n\t\tif (typeof element === 'string') this.#_ui.customBody.textContent = element;\n\t\telse this.#_ui.customBody.appendChild(element);\n\t}\n\t//#endregion Private methods\n\n\t//#region Public methods\n\n\t/**\n\t * Met à jour le contenu du titre de la carte.\n\t * Remplace le texte ou ajoute un élément HTML comme corps du titre.\n\t * @param {HTMLElement | string | Text} element Le contenu à insérer (texte, élément ou nœud Text)\n\t * @returns {HTMLBnumCardTitle} Retourne l'instance pour chaînage\n\t */\n\tpublic updateBody(\n\t\telement: HTMLElement | string | Text,\n\t\t{ force = false } = {},\n\t): HTMLBnumCardTitle {\n\t\tthis.#_bodyScheduler ??= new Scheduler<HTMLElement | string | Text>(\n\t\t\t(el: Nullable<HTMLElement | string | Text>) => {\n\t\t\t\tthis.#_updateBody(el!);\n\t\t\t},\n\t\t);\n\n\t\tif (!this.alreadyLoaded) this.#_initBody = element;\n\t\telse if (force) this.#_bodyScheduler.call(element);\n\t\telse this.#_bodyScheduler.schedule(element);\n\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Static methods\n\t/**\n\t * Crée dynamiquement une instance du composant HTMLBnumCardTitle.\n\t * Permet d'initialiser le titre avec un texte, une icône et/ou un lien.\n\t * @param {HTMLElement | string | Text} text Le contenu du titre (élément, texte ou chaîne)\n\t * @param {{ icon?: string | null; link?: string | null }} options Options pour l'icône et le lien\n\t * @returns {HTMLBnumCardTitle} Instance du composant configurée\n\t */\n\tpublic static Create(\n\t\ttext: HTMLElement | string | Text,\n\t\t{\n\t\t\ticon = null,\n\t\t\tlink = null,\n\t\t}: { icon?: string | null; link?: string | null },\n\t): HTMLBnumCardTitle {\n\t\tconst node: HTMLBnumCardTitle = document.createElement(\n\t\t\tthis.TAG,\n\t\t) as HTMLBnumCardTitle;\n\t\tif (icon) node.icon = icon;\n\t\tif (link) node.url = link;\n\n\t\treturn node.updateBody(text, { force: true });\n\t}\n\n\t/**\n\t * Génère le HTML d'un titre de carte avec icône et lien optionnels.\n\t * Utile pour créer dynamiquement le composant dans une chaîne HTML.\n\t * @param {string | null} icon Icône à afficher\n\t * @param {string} text Texte du titre\n\t * @param {string | null} link URL du lien\n\t * @returns {string} HTML généré\n\t */\n\tpublic static Generate(\n\t\ticon: string | null,\n\t\ttext: string,\n\t\tlink: string | null,\n\t): string {\n\t\tconst data: Record<string, string> = {};\n\n\t\tif (icon) data['data-icon'] = icon;\n\t\tif (link) data.url = link;\n\n\t\tif (data.url || data['data-icon'])\n\t\t\treturn <HTMLBnumCardTitle {...data}>{text}</HTMLBnumCardTitle>;\n\t\telse return <HTMLBnumCardTitle>{text}</HTMLBnumCardTitle>;\n\t}\n\n\t//#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement from '../../bnum-element';\nimport { Define, Light, SetAttr } from '../../../core/decorators';\nimport { TAG_FOLDER_LIST } from '../../../core/utils/constants/tags';\n\n/**\n * Représente un élément personnalisé de type liste de dossiers (Folder List) pour l'interface Bnum.\n * Cet élément utilise le tag HTML défini par `TAG_FOLDER_LIST` et est rendu dans le Light DOM (pas de Shadow DOM).\n */\n@Define({ tag: TAG_FOLDER_LIST })\n@Light()\nexport class HTMLBnumFolderList extends BnumElement {\n\t/**\n\t * Initialise une nouvelle instance du composant `HTMLBnumFolderList`.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Méthode de préchargement interne du composant.\n\t * Le décorateur `@SetAttr` applique automatiquement l'attribut HTML `role=\"group\"`\n\t * à l'élément lors de son cycle de vie.\n\t * @protected\n\t * @returns\n\t */\n\t@SetAttr('role', 'group')\n\tprotected _p_preload(): void {}\n\n\t/**\n\t * Génère et retourne la structure JSX/TSX (ou chaîne de caractères) du composant `HTMLBnumFolderList`.\n\t * * @static\n\t * @param  content Le contenu (texte ou éléments enfants) à insérer à l'intérieur de la balise.\n\t * @param  attrs Un dictionnaire (clé-valeur) représentant les attributs HTML à appliquer au composant.\n\t * @returns L'élément rendu\n\t */\n\tstatic Write(\n\t\tcontent: string = EMPTY_STRING,\n\t\tattrs: Record<string, string> = {},\n\t): string {\n\t\tif (attrs && Object.keys(attrs).length > 0)\n\t\t\treturn <HTMLBnumFolderList {...attrs}>{content}</HTMLBnumFolderList>;\n\t\telse return <HTMLBnumFolderList>{content}</HTMLBnumFolderList>;\n\t}\n}\n","//type: consts\n\n// Attributes\nexport const ATTR_IS_COLLAPSED = 'is-collapsed';\nexport const ATTR_IS_VIRTUAL = 'is-virtual';\nexport const ATTR_IS_SELECTED = 'is-selected';\nexport const ATTR_UNREAD = 'unread';\nexport const ATTR_LEVEL = 'level';\nexport const ATTR_LABEL = 'label';\nexport const ATTR_ICON = 'icon';\nexport const ATTR_ROLE = 'role';\nexport const ATTR_TITLE = 'title';\n\n// Events\nexport const EVENT_CLICK = 'click';\nexport const EVENT_UNREAD_CHANGED = 'bnum-folder:unread-changed';\nexport const EVENT_SELECT = 'bnum-folder:select';\nexport const EVENT_TOGGLE = 'bnum-folder:toggle';\n\n// Classes\nexport const CLASS_CONTAINER = 'bal-container';\nexport const CLASS_TITLE = 'bal-container__title';\nexport const CLASS_TITLE_ICON = 'bal-container__title__icon';\nexport const CLASS_TITLE_NAME = 'bal-container__title__name';\nexport const CLASS_LEFT = 'bal-container__left';\nexport const CLASS_LEFT_BADGE = 'bal-container__left__badge';\nexport const CLASS_TOGGLE = 'bal-container__toggle';\nexport const CLASS_SUB_FOLDERS = 'bal-sub-folders';\nexport const CLASS_FLEX = 'flex';\nexport const CLASS_IS_CUMULATIVE = 'is-cumulative';\n\n// IDs\nexport const ID_NAME = 'bal-name';\n\n// States\nexport const STATE_NO_SUBFOLDERS = 'no-subfolders';\nexport const STATE_TRIPLE_DIGIT = 'triple-digit-unread';\nexport const STATE_DOUBLE_DIGIT = 'double-digit-unread';\nexport const STATE_SINGLE_DIGIT = 'single-digit-unread';\nexport const STATE_NO_UNREAD = 'no-unread';\n\n// Values & Configs\nexport const VAL_MIN_UNREAD = 0;\nexport const VAL_MAX_UNREAD = 99;\nexport const VAL_TRUE = 'true';\nexport const VAL_FALSE = 'false';\nexport const VAL_99_PLUS = `${VAL_MAX_UNREAD}+`;\nexport const VAL_ZERO = '0';\nexport const VAL_ROLE_TREEITEM = 'treeitem';\nexport const ARIA_EXPANDED = 'aria-expanded';\nexport const ARIA_SELECTED = 'aria-selected';\nexport const CSS_VAR_LEVEL = '--internal-bnum-folder-level';\n\n// Icons\nexport const ICON_SQUARE = 'square';\nexport const ICON_ARROW_DOWN = 'keyboard_arrow_down';\nexport const ICON_ARROW_UP = 'keyboard_arrow_up';\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable } from '../../../core/utils/types';\nimport { HTMLBnumBadge } from '../../atoms/badge/bnum-badge';\nimport { HTMLBnumButtonIcon } from '../../atoms/icon-button/bnum-icon-button';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { HTMLBnumFolderList } from '../../organisms/folder-list/bnum-folder-list';\nimport style from './bnum-folder.less';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { TAG_FOLDER } from '../../../core/utils/constants/tags';\nimport { UI } from 'core/decorators/ui';\nimport * as CONST from './bnum-folder.internal/constants';\nimport { HTMLBnumFragment } from 'components/atoms';\nimport { Observe } from 'core/decorators/observe';\n\n/**\n * Structure de données pour l'événement personnalisé de changement de statut \"non-lu\".\n */\ninterface UnreadChangedEventDetail {\n\tunread: number;\n\tcaller: HTMLBnumFolder;\n}\n\n/**\n * Interface représentant le cache des éléments du DOM interne (Shadow Root).\n * Permet un accès rapide sans requêter le DOM à chaque fois.\n */\ndeclare type Ui = {\n\tname: HTMLLinkElement;\n\ticon: HTMLBnumIcon;\n\ttoggle: HTMLBnumButtonIcon;\n\tbadge: HTMLBnumBadge;\n\tcontainer: HTMLElement;\n};\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<div class=\"bal-container\">\n\t\t\t<div class=\"bal-container__title\">\n\t\t\t\t<HTMLBnumIcon class=\"bal-container__title__icon\">square</HTMLBnumIcon>\n\t\t\t\t<a tabindex=\"-1\" id=\"bal-name\" class=\"bal-container__title__name\"></a>\n\t\t\t</div>\n\t\t\t<div class=\"bal-container__left\">\n\t\t\t\t<HTMLBnumBadge circle class=\"bal-container__left__badge\">\n\t\t\t\t\t0\n\t\t\t\t</HTMLBnumBadge>\n\t\t\t\t<HTMLBnumButtonIcon tabindex=\"-1\" class=\"bal-container__toggle flex\">\n\t\t\t\t\tkeyboard_arrow_down\n\t\t\t\t</HTMLBnumButtonIcon>\n\t\t\t</div>\n\t\t</div>\n\t\t<HTMLBnumFolderList class=\"bal-sub-folders\">\n\t\t\t<slot name=\"folders\"></slot>\n\t\t</HTMLBnumFolderList>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n\n/**\n * Composant Web Component représentant un dossier dans une structure arborescente.\n * Gère l'affichage hiérarchique, les badges de notification (non-lus), la sélection et l'état d'expansion.\n *\n * @structure Base\n * <bnum-folder\n * folder-id=\"identifiant-unique-du-dossier\"\n * id=\"rcmliINBOX\"\n * label=\"Dossier Racine\"\n * unread=\"5\"\n * icon=\"folder\"\n * level=\"0\"\n * is-virtual=\"false\"\n * is-collapsed=\"true\"\n * is-selected=\"false\"\n * >\n * </bnum-folder>\n *\n * @structure Avec de sous-dossiers\n * <bnum-tree id=\"rcmliTREE\">\n * <bnum-folder\n * folder-id=\"identifiant-unique-du-dossier\"\n * id=\"rcmliINBOX\"\n * label=\"Dossier Racine\"\n * unread=\"17\"\n * icon=\"folder\"\n * level=\"0\"\n * is-virtual=\"true\"\n * is-collapsed=\"true\"\n * is-selected=\"false\"\n * >\n *  <bnum-folder\n *  slot=\"folders\"\n *  folder-id=\"identifiant-unique-du-dossier-sub\"\n *  id=\"rcmliSUBFOLDER\"\n *  label=\"Dossier enfant\"\n *  unread=\"17\"\n *  icon=\"folder\"\n *  level=\"1\"\n *  is-virtual=\"false\"\n *  is-collapsed=\"true\"\n *  is-selected=\"false\"\n *  >\n *  </bnum-folder>\n *  <bnum-folder\n *  slot=\"folders\"\n *  folder-id=\"identifiant-unique-du-dossier-sub2\"\n *  id=\"rcmliSUBFOLDER\"\n *  label=\"Dossier enfant 2\"\n *  unread=\"0\"\n *  icon=\"folder\"\n *  level=\"1\"\n *  is-virtual=\"false\"\n *  is-collapsed=\"true\"\n *  is-selected=\"false\"\n *  >\n *   <bnum-folder\n *   slot=\"folders\"\n *   folder-id=\"identifiant-unique-du-dossier--sub-sub2\"\n *   id=\"rcmliSUBFOLDERSUB\"\n *   label=\"Dossier enfant enfant\"\n *   unread=\"0\"\n *   icon=\"folder\"\n *   level=\"2\"\n *   is-virtual=\"false\"\n *   is-collapsed=\"true\"\n *   is-selected=\"false\"\n *   >\n *   </bnum-folder>\n *  </bnum-folder>\n * </bnum-folder>\n * </bnum-tree>\n *\n *\n * @slot folders - Slot pour insérer des sous-dossiers (`bnum-folder`).\n *\n * @state no-subfolders - Indique que le dossier n'a pas de sous-dossiers.\n * @state triple-digit-unread - Indique que le compteur de non-lu est à 3 chiffres (99+).\n * @state double-digit-unread - Indique que le compteur de non-lu est à 2 chiffres (10-99).\n * @state single-digit-unread - Indique que le compteur de non-lu est à 1 chiffre (1-9).\n *\n * @extends BnumElementInternal\n * @fires bnum-folder:unread-changed - Lorsqu'un compteur de non-lu est mis à jour.\n * @fires bnum-folder:select - Lorsque le dossier est sélectionné.\n * @fires bnum-folder:toggle - Lorsque le dossier est plié ou déplié.\n *\n * @attr {boolean} (default: true) is-collapsed - Indique si le dossier est visuellement replié.\n * @attr {boolean} (default: true) is-virtual - Indique si le dossier est virtuel.\n * @attr {boolean} (default: false) is-selected - Indique si le dossier est sélectionné.\n * @attr {number} (default: 0) unread - Nombre d'éléments non lus dans le dossier.\n * @attr {number} (default: 0) level - Niveau de profondeur du dossier dans l'arborescence.\n * @attr {string} (default: /) label - Libellé (nom) du dossier.\n * @attr {string} (default: /) icon - Nom de l'icône à afficher pour le dossier.\n *\n * @event {MouseEvent} click - Déclenché lorsque le dossier est cliqué.\n * @event {UnreadChangedEventDetail} bnum-folder:unread-changed - Événement custom pour le changement de non-lu\n * @event {CustomEvent<{ caller: HTMLBnumFolder; innerEvent?: Event }>} bnum-folder:select - Événement custom pour la sélection du dossier\n * @event {CustomEvent<{ caller: HTMLBnumFolder; innerEvent?: Event; collapsed: boolean }>} bnum-folder:toggle - Événement custom pour le pliage ou dépliage du dossier\n *\n * @cssvar {0.5em} --bnum-folder-indentation-base - Unité de base pour le calcul du décalage (padding-left) par niveau de profondeur.\n * @cssvar {0} --internal-bnum-folder-level - Variable interne (pilotée par JS) indiquant le niveau de profondeur actuel.\n * @cssvar {Calculated} --bnum-folder-indentation - Valeur finale du padding-left (base * level).\n * @cssvar {block} --bnum-folder-display - Type d'affichage du composant host.\n * @cssvar {100%} --bnum-folder-width - Largeur du composant host.\n * @cssvar {10px 15px} --bnum-folder-title-padding - Espacement interne du conteneur flex (Standard : 10px vertical, 15px horizontal).\n * @cssvar {10px} --bnum-folder-gap - Espace entre l'icône, le titre et les badges.\n * @cssvar {125px} --bnum-folder-text-ellipisis-max-width - Largeur maximale du libellé avant troncation.\n * @cssvar {inherit} --bnum-folder-icon-color - Couleur de l'icône du dossier.\n * @cssvar {5px} --bnum-badge-padding - Padding interne pour réduire la taille du badge (calcul de la taille).\n * @cssvar {#2e2eff} --bnum-color-primary-active - Couleur de fond du badge en mode cumulatif (Blue Thunder Active).\n * @cssvar {solid 1px #ddd} --bnum-border-in-column - Bordure inférieure appliquée aux dossiers de niveau 0.\n * @cssvar {15px 15px} --bnum-folder-bal-title-padding - Padding spécifique pour les dossiers racines (15px vertical, 15px horizontal).\n * @cssvar {#c1c1fb} --bnum-color-list-hover - Couleur de fond au survol d'un dossier interactif (Blue List Hover).\n * @cssvar {#e3e3fd} --bnum-color-list - Couleur de fond d'un dossier sélectionné (Blue List).\n * @cssvar {#adadf9} --bnum-color-list-drag - Couleur de fond lors du dragover (Blue List Active).\n */\n@Define({ styles: style, template: TEMPLATE, tag: TAG_FOLDER })\n@Observe(\n\tCONST.ATTR_LABEL,\n\tCONST.ATTR_UNREAD,\n\tCONST.ATTR_ICON,\n\tCONST.ATTR_IS_COLLAPSED,\n\tCONST.ATTR_LEVEL,\n\tCONST.ATTR_IS_SELECTED,\n)\nexport class HTMLBnumFolder extends BnumElementInternal {\n\t//#region Private fields\n\t/**\n\t * Compteur interne des éléments non lus propres à ce dossier (hors enfants).\n\t * @private\n\t * @type {number}\n\t */\n\t#_selfUnread: number = 0;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t/** Référence à la classe HTMLBnumFolder */\n\t@Self _!: typeof HTMLBnumFolder;\n\n\t/**\n\t * Cache pour les éléments internes du Shadow DOM.\n\t * Initialisé lors de `_p_buildDOM`.\n\t * @private\n\t * @type {Ui}\n\t */\n\t@UI({\n\t\tname: `#${CONST.ID_NAME}`,\n\t\ticon: `.${CONST.CLASS_TITLE_ICON}`,\n\t\ttoggle: `.${CONST.CLASS_TOGGLE}`,\n\t\tbadge: `.${CONST.CLASS_LEFT_BADGE}`,\n\t\tcontainer: `.${CONST.CLASS_CONTAINER}`,\n\t})\n\taccessor #_ui!: Ui;\n\n\t/**\n\t * Indique si le dossier est visuellement replié.\n\t * @returns {boolean} `true` si l'attribut `is-collapsed` est à 'true'.\n\t */\n\tget collapsed(): boolean {\n\t\treturn this.getAttribute(CONST.ATTR_IS_COLLAPSED) === CONST.VAL_TRUE;\n\t}\n\n\t/**\n\t * Récupère la liste des classes CSS appliquées à l'élément hôte.\n\t * @returns {string[]} Un tableau des classes.\n\t */\n\tget classes(): string[] {\n\t\treturn Array.from(this.classList);\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Construit le DOM et initialise les références UI et les écouteurs d'événements internes.\n\t * @protected\n\t * @param container - Le conteneur racine.\n\t */\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tsuper._p_buildDOM(container);\n\n\t\tthis.#_ui.container.addEventListener(CONST.EVENT_CLICK, (e: Event) => {\n\t\t\tthis.select(e);\n\t\t});\n\n\t\tthis.#_ui.toggle.addEventListener(CONST.EVENT_CLICK, (e: Event) => {\n\t\t\tthis.toggle(e);\n\t\t});\n\t}\n\n\t/**\n\t * Appelé lorsque le composant est attaché au DOM.\n\t * Initialise les états par défaut et les écouteurs globaux.\n\t * @protected\n\t */\n\tprotected _p_attach(): void {\n\t\tsuper._p_attach();\n\n\t\tif (this.childElementCount === 0) {\n\t\t\tthis._p_addState(CONST.STATE_NO_SUBFOLDERS);\n\t\t} else {\n\t\t\tthis.addEventListener(\n\t\t\t\tCONST.EVENT_UNREAD_CHANGED,\n\t\t\t\tthis.#_onChildUnreadChanged.bind(this),\n\t\t\t);\n\t\t}\n\n\t\tif (this.hasAttribute(CONST.ATTR_IS_COLLAPSED) === false) {\n\t\t\tthis.setAttribute(CONST.ATTR_IS_COLLAPSED, CONST.VAL_TRUE);\n\t\t}\n\n\t\tthis.addEventListener(CONST.EVENT_SELECT, this.#_onFolderSelect.bind(this));\n\n\t\t// Initialisation des valeurs visuelles basées sur les attributs initiaux\n\t\tthis.attr(CONST.ATTR_ROLE, CONST.VAL_ROLE_TREEITEM)\n\t\t\t.#_updateIcon(this.attr(CONST.ATTR_ICON) ?? EMPTY_STRING)\n\t\t\t.#_updateLabel(this.attr(CONST.ATTR_LABEL) ?? EMPTY_STRING)\n\t\t\t.#_updateLevel(\n\t\t\t\tthis.attr(CONST.ATTR_LEVEL) ? +this.attr(CONST.ATTR_LEVEL)! : 0,\n\t\t\t)\n\t\t\t.#_updateSelected(this.attr(CONST.ATTR_IS_SELECTED) === CONST.VAL_TRUE)\n\t\t\t.#_updateIsCollapsed(\n\t\t\t\tthis.attr(CONST.ATTR_IS_COLLAPSED) === CONST.VAL_TRUE,\n\t\t\t)\n\t\t\t.#_updateUnread(\n\t\t\t\tthis.attr(CONST.ATTR_UNREAD)\n\t\t\t\t\t? +this.attr(CONST.ATTR_UNREAD)!\n\t\t\t\t\t: CONST.VAL_MIN_UNREAD,\n\t\t\t);\n\t}\n\n\t/**\n\t * Gère la mise à jour des attributs observés.\n\t * @protected\n\t * @param {string} name - Nom de l'attribut modifié.\n\t * @param {string | null} oldVal - Ancienne valeur.\n\t * @param {string | null} newVal - Nouvelle valeur.\n\t * @returns {void | Nullable<'break'>} Peut retourner 'break' pour arrêter la propagation.\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tif (name === CONST.ATTR_UNREAD) {\n\t\t\t// On gère les dissonances visuels (badge value vs attribute value)\n\t\t\toldVal = this.#_ui.badge?.value ?? oldVal;\n\n\t\t\t// Optimisation: Evite les updates de DOM coûteux si déjà en 99+\n\t\t\tif (this.#_shouldSkipUnreadUpdate(oldVal, newVal)) return;\n\t\t}\n\n\t\tif (oldVal === newVal) return;\n\n\t\tswitch (name) {\n\t\t\tcase CONST.ATTR_LABEL:\n\t\t\t\tthis.#_updateLabel(newVal ?? EMPTY_STRING);\n\t\t\t\tbreak;\n\t\t\tcase CONST.ATTR_UNREAD:\n\t\t\t\tthis.#_updateUnread(newVal ? +newVal : 0);\n\t\t\t\tbreak;\n\n\t\t\tcase CONST.ATTR_ICON:\n\t\t\t\tthis.#_updateIcon(newVal ?? EMPTY_STRING);\n\t\t\t\tbreak;\n\n\t\t\tcase CONST.ATTR_IS_COLLAPSED:\n\t\t\t\tthis.#_updateIsCollapsed(newVal === CONST.VAL_TRUE);\n\t\t\t\tthis.#_refreshDisplay();\n\t\t\t\tbreak;\n\n\t\t\tcase CONST.ATTR_LEVEL:\n\t\t\t\tthis.#_updateLevel(newVal ? +newVal : 0);\n\t\t\t\tbreak;\n\n\t\t\tcase CONST.ATTR_IS_SELECTED:\n\t\t\t\tthis.#_updateSelected(newVal === CONST.VAL_TRUE);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t//#endregion Lifecycle\n\n\t//#region Event handlers\n\t/**\n\t * Gestionnaire d'événement pour le changement de statut \"non-lu\" des enfants.\n\t * Déclenche un rafraîchissement de l'affichage cumulatif si nécessaire.\n\t * @private\n\t * @param {Event} e - L'événement custom `UnreadChangedEventDetail`.\n\t */\n\t#_onChildUnreadChanged(e: Event): void {\n\t\tconst detail = (e as CustomEvent<UnreadChangedEventDetail>).detail;\n\n\t\t// Protection contre les boucles infinies (self-trigger)\n\t\tif (detail?.caller === this) return;\n\n\t\tthis.#_refreshDisplay();\n\t}\n\n\t/**\n\t * Intercepte la sélection pour empêcher l'action sur les dossiers virtuels.\n\t * @private\n\t * @param {Event} e - L'événement de sélection.\n\t */\n\t#_onFolderSelect(e: Event): void {\n\t\tif (this.getAttribute(CONST.ATTR_IS_VIRTUAL) === CONST.VAL_TRUE) {\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\t//#endregion Event handlers\n\n\t//#region Private methods\n\t/**\n\t * Détermine si la mise à jour visuelle du badge doit être sautée (ex: 99+ vers 100).\n\t * @private\n\t * @param {string | null} oldVal - Ancienne valeur.\n\t * @param {string | null} newVal - Nouvelle valeur.\n\t * @returns {boolean} True si la mise à jour doit être ignorée.\n\t */\n\t#_shouldSkipUnreadUpdate(\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): boolean {\n\t\tconst oldNum = oldVal ? +oldVal : CONST.VAL_MIN_UNREAD;\n\t\tconst newNum = newVal ? +newVal : CONST.VAL_MIN_UNREAD;\n\n\t\treturn oldNum > CONST.VAL_MAX_UNREAD && newNum > CONST.VAL_MAX_UNREAD;\n\t}\n\n\t/**\n\t * Calcule le total des éléments non lus (Soi-même + tous les descendants).\n\t * @private\n\t * @returns {number} Le total calculé.\n\t */\n\t#_getTotalUnread(): number {\n\t\tlet total = this.#_selfUnread;\n\t\tconst descendants = this.getElementsByTagName(this._.TAG);\n\n\t\tfor (let i = 0, len = descendants.length; i < len; i++) {\n\t\t\tconst val = descendants[i].getAttribute(CONST.ATTR_UNREAD);\n\t\t\tif (val) total += +val;\n\t\t}\n\n\t\treturn total;\n\t}\n\n\t/**\n\t * Met à jour uniquement l'élément visuel (Badge) en fonction de l'état (plié/déplié).\n\t * Si plié, affiche le cumulatif. Si déplié, affiche le score propre.\n\t * @private\n\t */\n\t#_refreshDisplay(): void {\n\t\tif (!this.#_ui.badge) return;\n\n\t\tconst isCollapsed = this.collapsed;\n\t\tconst hasChildren = this.children.length > 0;\n\n\t\tconst displayValue =\n\t\t\tisCollapsed && hasChildren ? this.#_getTotalUnread() : this.#_selfUnread;\n\n\t\tthis.#_applyBadgeState(displayValue, isCollapsed);\n\t}\n\n\t/**\n\t * Applique l'état visuel et la valeur au badge.\n\t * @private\n\t * @param {number} value - La valeur numérique à afficher.\n\t * @param {boolean} isCollapsed - Si le dossier parent est replié (pour le style cumulatif).\n\t */\n\t#_applyBadgeState(value: number, isCollapsed: boolean): void {\n\t\tconst badge = this.#_ui.badge!;\n\t\tlet state = CONST.STATE_NO_UNREAD;\n\t\tlet text = EMPTY_STRING;\n\n\t\tif (value > CONST.VAL_MAX_UNREAD) {\n\t\t\ttext = CONST.VAL_99_PLUS;\n\t\t\tstate = CONST.STATE_TRIPLE_DIGIT;\n\t\t} else if (value > 0) {\n\t\t\ttext = value.toString();\n\t\t\tstate = value > 9 ? CONST.STATE_DOUBLE_DIGIT : CONST.STATE_SINGLE_DIGIT;\n\t\t}\n\n\t\tif (badge.value !== text) badge.value = text;\n\n\t\tthis._p_addState(state);\n\n\t\tconst isCumulative = value !== this.#_selfUnread && isCollapsed;\n\n\t\tif (badge.classList.contains(CONST.CLASS_IS_CUMULATIVE) !== isCumulative) {\n\t\t\tbadge.classList.toggle(CONST.CLASS_IS_CUMULATIVE, isCumulative);\n\t\t}\n\t}\n\n\t/**\n\t * Met à jour le libellé du dossier dans le DOM.\n\t * @private\n\t * @param {string} label - Nouveau libellé.\n\t * @returns {this}\n\t */\n\t#_updateLabel(label: string): this {\n\t\tif (this.#_ui.name) {\n\t\t\tthis.#_ui.name.textContent = label;\n\t\t\tthis.#_ui.name.title = label;\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour la valeur interne 'non-lu' et propage l'événement.\n\t * @private\n\t * @param {number} unread - Nouvelle valeur.\n\t * @returns {this}\n\t */\n\t#_updateUnread(unread: number): this {\n\t\tthis.#_selfUnread = unread;\n\t\tthis.#_refreshDisplay();\n\n\t\tif (this.alreadyLoaded) {\n\t\t\tthis.trigger(\n\t\t\t\tCONST.EVENT_UNREAD_CHANGED,\n\t\t\t\t{\n\t\t\t\t\tunread: unread,\n\t\t\t\t\tcaller: this,\n\t\t\t\t},\n\t\t\t\t{ bubbles: true, composed: true },\n\t\t\t);\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'icône de toggle et l'attribut ARIA.\n\t * @private\n\t * @param {boolean} isCollapsed - État plié.\n\t * @returns {this}\n\t */\n\t#_updateIsCollapsed(isCollapsed: boolean): this {\n\t\tif (this.#_ui.toggle) {\n\t\t\tthis.#_ui.toggle.icon = isCollapsed\n\t\t\t\t? CONST.ICON_ARROW_DOWN\n\t\t\t\t: CONST.ICON_ARROW_UP;\n\t\t}\n\n\t\tthis.setAttribute(CONST.ARIA_EXPANDED, String(!isCollapsed));\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'icône principale du dossier.\n\t * @private\n\t * @param {string} icon - Nom de l'icône.\n\t * @returns {this}\n\t */\n\t#_updateIcon(icon: string): this {\n\t\tif (this.#_ui.icon) {\n\t\t\tthis.#_ui.icon.icon = icon;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour le niveau d'indentation via CSS Variable.\n\t * @private\n\t * @param {number} level - Niveau de profondeur (clamped 0-10).\n\t * @returns {this}\n\t */\n\t#_updateLevel(level: number): this {\n\t\tconst levelClamped = Math.max(0, Math.min(level, 10));\n\t\tthis.style.setProperty(CONST.CSS_VAR_LEVEL, levelClamped.toString());\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'attribut ARIA de sélection.\n\t * @private\n\t * @param {boolean} isSelected - État sélectionné.\n\t * @returns {this}\n\t */\n\t#_updateSelected(isSelected: boolean): this {\n\t\treturn this.attr(CONST.ARIA_SELECTED, isSelected.toString());\n\t}\n\t//#endregion Private methods\n\n\t//#region Public methods\n\t/**\n\t * Bascule l'état plié/déplié du dossier.\n\t * Met à jour l'attribut DOM et déclenche l'événement `EVENT_TOGGLE`.\n\t * @public\n\t * @param {Event} [innerEvent] - L'événement déclencheur originel (optionnel).\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\ttoggle(innerEvent?: Event): this {\n\t\tinnerEvent?.stopPropagation?.();\n\t\tconst isCollapsed =\n\t\t\tthis.getAttribute(CONST.ATTR_IS_COLLAPSED) === CONST.VAL_TRUE;\n\t\tthis.setAttribute(\n\t\t\tCONST.ATTR_IS_COLLAPSED,\n\t\t\tisCollapsed ? CONST.VAL_FALSE : CONST.VAL_TRUE,\n\t\t);\n\n\t\tthis.trigger(CONST.EVENT_TOGGLE, {\n\t\t\tinnerEvent,\n\t\t\tcaller: this,\n\t\t\tcollapsed: !isCollapsed,\n\t\t});\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sélectionne le dossier.\n\t * Déclenche l'événement `EVENT_SELECT`.\n\t * @public\n\t * @param {Event} [innerEvent] - L'événement déclencheur originel (optionnel).\n\t * @returns {this} L'instance courante pour chaînage.\n\t */\n\tselect(innerEvent?: Event): this {\n\t\tthis.trigger(CONST.EVENT_SELECT, {\n\t\t\tinnerEvent,\n\t\t\tcaller: this,\n\t\t});\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Static methods\n\t/**\n\t * Génère la chaîne HTML statique pour ce composant (SSR / Helper).\n\t * @static\n\t * @param {Object} props - Propriétés de construction.\n\t * @param {Record<string, string>} [props.attributes={}] - Attributs HTML.\n\t * @param {string[]} [props.children=[]] - Contenu enfant.\n\t * @returns {string} Le HTML sous forme de chaîne.\n\t */\n\tstatic Write({\n\t\tattributes = {},\n\t\tchildren = [],\n\t}: {\n\t\tattributes?: Record<string, string>;\n\t\tchildren?: string[];\n\t} = {}): string {\n\t\tconst childrenString = children.join(EMPTY_STRING);\n\n\t\tif (attributes && Object.keys(attributes).length > 0)\n\t\t\treturn <HTMLBnumFolder {...attributes}>{childrenString}</HTMLBnumFolder>;\n\t\telse return <HTMLBnumFolder>{childrenString}</HTMLBnumFolder>;\n\t}\n\n\t//#region Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Autobind, Define, Light, SetAttr } from '../../../core/decorators';\nimport { TAG_HIDE } from '../../../core/utils/constants/tags';\nimport { Nullable, ValueOf } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { Observe } from 'core/decorators/observe';\nimport { UpdateAll } from 'core/decorators/updateAll';\n\n/**\n * Liste des points de rupture (breakpoints) gérés par le composant.\n */\nexport const BREAKPOINTS = {\n\t/** Mobile */\n\tphone: 480,\n\t/** Tablette portrait */\n\tsmall: 768,\n\t/** Tablette paysage / Ordinateurs portables tactiles */\n\ttouch: 1024,\n\t/** Bureau */\n\tnormal: 1200,\n} as const;\n\n/**\n * Type représentant les valeurs des points de rupture.\n */\nexport type BREAKPOINTS = ValueOf<typeof BREAKPOINTS>;\n\n/**\n * Liste des modes de masquage.\n */\nexport const MODES = {\n\t/** En dessous du breakpoint */\n\tDOWN: 'down',\n\t/** Au-dessus du breakpoint */\n\tUP: 'up',\n} as const;\n\n/**\n * Type représentant les modes de masquage.\n */\nexport type MODES = ValueOf<typeof MODES>;\n\n//#region Global constants\nconst ATTRIBUTE_BREAKPOINT = 'breakpoint';\nconst ATTRIBUTE_MODE = 'mode';\n//#endregion Global constants\n\n/**\n * Composant BnumHide.\n * Permet de cacher son contenu selon des points de rupture (breakpoints) définis.\n *\n * @structure Base\n * <bnum-hide breakpoint=\"small\" mode=\"down\">Bonjour</bnum-hide>\n *\n * @attr {'phone' | 'small' | 'touch' | 'normal'} (default:'touch') breakpoint - Le point de rupture à partir duquel cacher l'élément.\n * @attr {'up' | 'down'} (optional) (default:'down') mode - Sens du masquage : 'up' pour cacher au-dessus du breakpoint, 'down' en-dessous.\n */\n@Define({ tag: TAG_HIDE })\n@Light()\n@Observe(ATTRIBUTE_BREAKPOINT, ATTRIBUTE_MODE)\n@UpdateAll()\nexport class HTMLBnumHide extends BnumElementInternal {\n\t//#region Private fields\n\t/**\n\t * Liste de requêtes média pour le suivi du breakpoint.\n\t */\n\t#_mediaQueryList: Nullable<MediaQueryList> = null;\n\n\t/**\n\t * Référence liée de la fonction de gestion du changement de média pour l'abonnement/désabonnement.\n\t */\n\t#_boundHandleChange: (e: MediaQueryListEvent | MediaQueryList) => void;\n\t//#endregion Private fields\n\n\t//#region Lifecycle\n\t/**\n\t * Initialise une nouvelle instance du composant.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t\tthis.#_boundHandleChange = this.#_handleChange;\n\t}\n\n\t/**\n\t * Appelé lorsque le composant est inséré dans le DOM.\n\t */\n\tconnectedCallback(): void {\n\t\tsuper.connectedCallback?.();\n\t\tthis.#_setupListener();\n\t}\n\n\t/**\n\t * Appelé lorsque le composant est retiré du DOM.\n\t */\n\tdisconnectedCallback(): void {\n\t\tthis.#_removeListener();\n\t\tsuper.disconnectedCallback?.();\n\t}\n\n\t/**\n\t * Met à jour le composant lors d'un changement d'état ou d'attribut.\n\t */\n\tprotected _p_update(): void | Nullable<'break'> {\n\t\tthis.#_setupListener();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Configure l'écouteur `matchMedia` en fonction des attributs actuels.\n\t */\n\t#_setupListener(): void {\n\t\tthis.#_removeListener();\n\n\t\tconst breakpointKey: keyof typeof BREAKPOINTS = (this.getAttribute(\n\t\t\tATTRIBUTE_BREAKPOINT,\n\t\t) || 'touch') as keyof typeof BREAKPOINTS;\n\t\tconst mode: MODES = (this.getAttribute(ATTRIBUTE_MODE) ||\n\t\t\tMODES.DOWN) as MODES;\n\n\t\tconst width = BREAKPOINTS[breakpointKey];\n\n\t\tif (!width) {\n\t\t\tconsole.warn(\n\t\t\t\t`[${TAG_HIDE}] Breakpoint inconnu : ${breakpointKey}. Utilisez: ${Object.keys(BREAKPOINTS).join(', ')}`,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst query =\n\t\t\tmode === MODES.UP\n\t\t\t\t? `(min-width: ${width}px)`\n\t\t\t\t: `(max-width: ${width - 0.02}px)`;\n\n\t\tthis.#_mediaQueryList = window.matchMedia(query);\n\n\t\tthis.#_handleChange(this.#_mediaQueryList);\n\n\t\tthis.#_mediaQueryList.addEventListener('change', this.#_boundHandleChange);\n\t}\n\n\t/**\n\t * Supprime l'écouteur des requêtes média.\n\t */\n\t#_removeListener(): void {\n\t\tif (this.#_mediaQueryList) {\n\t\t\tthis.#_mediaQueryList.removeEventListener(\n\t\t\t\t'change',\n\t\t\t\tthis.#_boundHandleChange,\n\t\t\t);\n\t\t\tthis.#_mediaQueryList = null;\n\t\t}\n\t}\n\n\t/**\n\t * Réagit au changement de statut de la requête média.\n\t * Si la requête correspond, l'élément est caché.\n\t *\n\t * @param mq Objet MediaQueryList ou événement associé.\n\t */\n\t@Autobind\n\t#_handleChange(mq: MediaQueryList | MediaQueryListEvent): void {\n\t\tconst shouldHide = mq.matches;\n\n\t\tif (shouldHide) this.#_hide();\n\t\telse this.#_show();\n\t}\n\n\t/**\n\t * Cache l'élément en ajoutant l'attribut `hidden` et en forçant le style CSS.\n\t */\n\t@SetAttr('hidden', EMPTY_STRING)\n\t#_hide() {\n\t\tthis.style.display = 'none';\n\t\tthis.ariaHidden = 'true';\n\t}\n\n\t/**\n\t * Affiche l'élément en retirant l'attribut `hidden` et les styles forcés.\n\t */\n\t#_show() {\n\t\tthis.removeAttribute('hidden');\n\t\tthis.style.removeProperty('display');\n\t\tthis.ariaHidden = 'false';\n\t}\n\t//#endregion Private methods\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport {\n\tBnumRadioCheckedChangeEvent,\n\tHTMLBnumFragment,\n\tHTMLBnumRadio,\n\tINPUT_BASE_STYLE,\n} from 'components/atoms';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { Attr, Autobind, Data, Define, Fire, NO_SETTER } from 'core/decorators';\nimport { Listen } from 'core/decorators/listen';\nimport { Schedule } from 'core/decorators/schedule';\nimport { UI } from 'core/decorators/ui';\nimport Log from 'core/utils/Log';\nimport { Nullable, Optional } from 'core/utils/types';\nimport style from './bnum-radio-group.less';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { TAG_RADIO_GROUP } from 'core/utils/constants/tags';\n\n//#region Types\n/**\n * Interface définissant les éléments UI internes du groupe de boutons radio.\n */\ntype BnumRadioGroupUi = {\n\tgroup: HTMLDivElement;\n\tlegend: HTMLSlotElement;\n\thint: HTMLSlotElement;\n};\n\ntype BnumRadioGroupEvents = {\n\t[EVENT_CHANGE]: typeof EVENT_CHANGE;\n};\n//#endregion Types\n\n//#region Global constants\n// eslint-disable-next-line quotes\nconst DEFAULT_LABEL = \"Perdu dans l'arbre\";\nconst DEFAULT_HINT = EMPTY_STRING;\nconst ID_GROUP = 'group';\nconst ID_LEGEND = 'legend';\nconst ID_HINT = 'hint';\nconst DATA_INLINE = 'inline';\nconst STATE_INLINE = DATA_INLINE;\nconst ATTR_NAME = 'name';\nconst EVENT_CHANGE = 'change';\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<div class=\"group__label label-container\" id=\"label\">\n\t\t\t<div class=\"group__label--legend label-container--label\">\n\t\t\t\t<slot id={ID_LEGEND} name=\"legend\">\n\t\t\t\t\t{DEFAULT_LABEL}\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<div class=\"group__label--hint label-container--hint\">\n\t\t\t\t<slot id={ID_HINT} name=\"hint\">\n\t\t\t\t\t{DEFAULT_HINT}\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tid={ID_GROUP}\n\t\t\trole=\"radiogroup\"\n\t\t\tclass=\"group__label__group\"\n\t\t\taria-describedby=\"label\"\n\t\t>\n\t\t\t<slot></slot>\n\t\t</div>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n\n/**\n * Composant `bnum-radio-group`\n *\n * Ce composant représente un groupe de boutons radio. Il gère la sélection unique parmi ses enfants `bnum-radio`,\n * la navigation au clavier, et l'accessibilité (via `role=\"radiogroup\"`).\n *\n * @structure Structure de base\n * <bnum-radio-group id=\"groupe1\" name=\"choix\" data-label=\"Faites un choix\" data-hint=\"Indice !\">\n *   <bnum-radio value=\"1\">Choix 1</bnum-radio>\n *   <bnum-radio value=\"2\">Choix 2</bnum-radio>\n * </bnum-radio-group>\n *\n * @structure Structure en ligne (inline)\n * <bnum-radio-group id=\"groupe2\" name=\"inline\" data-inline=\"true\" data-label=\"Choix en ligne\">\n *   <bnum-radio value=\"A\">Choix A</bnum-radio>\n *   <bnum-radio value=\"B\">Choix B</bnum-radio>\n * </bnum-radio-group>\n *\n * @slot legend - Description du groupe\n * @slot hint - Indice ou aide pour le groupe\n * @slot (default) - Boutons radio\n *\n * @state inline - Indique si le groupe doit afficher ses options en ligne\n *\n * @attr {string} name - Le nom du groupe de boutons radio. Cet attribut est appliqué à tous les boutons radio enfants pour assurer qu'ils appartiennent au même groupe logique.\n * @attr {string} data-label - Le libellé du groupe.\n * @attr {string} data-hint - L'indice ou l'aide pour le groupe.\n *\n * @event {CustomEvent<{inner:BnumRadioCheckedChangeEvent, caller: HTMLBnumRadioGroup}>} change - Lorsque la valeur change\n *\n * @cssvar {15px} --bnum-radio-group-gap - Espacement entre les boutons radio\n * @cssvar {#666} --bnum-input-hint-text-color - Couleur du texte d'indice ou d'aide\n */\n@Define({\n\ttag: TAG_RADIO_GROUP,\n\ttemplate: TEMPLATE,\n\tstyles: [INPUT_BASE_STYLE, style],\n})\nexport class HTMLBnumRadioGroup extends BnumElementInternal {\n\t//#region Private fields\n\t/**\n\t * Instance de MutationObserver pour surveiller les changements dans les enfants du groupe.\n\t * @private\n\t */\n\t#_observer: Nullable<MutationObserver> = null;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t/**\n\t * Références aux éléments du DOM interne.\n\t * @private\n\t */\n\t@UI({\n\t\tgroup: `#${ID_GROUP}`,\n\t\tlegend: `#${ID_LEGEND}`,\n\t\thint: `#${ID_HINT}`,\n\t})\n\taccessor #_ui!: BnumRadioGroupUi;\n\n\t/**\n\t * Le nom du groupe de boutons radio.\n\t * Cet attribut est appliqué à tous les boutons radio enfants pour assurer qu'ils appartiennent au même groupe logique.\n\t */\n\t@Attr() accessor name: string = EMPTY_STRING;\n\n\t/**\n\t * Le libellé du groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_label: string = EMPTY_STRING;\n\n\t/**\n\t * Le texte d'indice ou d'aide pour le groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_hint: string = EMPTY_STRING;\n\n\t/**\n\t * La valeur initiale sélectionnée du groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_value: Nullable<string> = null;\n\n\t/**\n\t * Indique si le groupe doit afficher ses options en ligne (horizontalement).\n\t *\n\t * @returns {boolean} `true` si le mode inline est activé, sinon `false`.\n\t */\n\tget inline(): boolean {\n\t\treturn this.data(DATA_INLINE);\n\t}\n\n\t/**\n\t * Définit si le groupe doit afficher ses options en ligne.\n\t *\n\t * @param {boolean} value - La nouvelle valeur pour le mode inline.\n\t */\n\tset inline(value: boolean) {\n\t\tthis.data(DATA_INLINE, value).#_setInlineState();\n\t}\n\n\t/**\n\t * Récupère la liste de tous les éléments `bnum-radio` enfants directs du groupe.\n\t *\n\t * @returns {HTMLBnumRadio[]} Un tableau contenant les éléments `HTMLBnumRadio`.\n\t */\n\tget radios(): HTMLBnumRadio[] {\n\t\treturn Array.from(this.querySelectorAll<HTMLBnumRadio>(HTMLBnumRadio.TAG));\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Appelée lorsque le composant est inséré dans le DOM.\n\t * Initialise l'observateur de mutations pour détecter l'ajout ou la suppression de boutons radio.\n\t */\n\tconnectedCallback(): void {\n\t\tsuper.connectedCallback();\n\t\t(this.#_observer ??= new MutationObserver(e => this.#_obserse(e))).observe(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tchildList: true,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * Méthode protégée pour construire le DOM initial.\n\t * @protected\n\t */\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_init();\n\t}\n\n\t/**\n\t * Méthode protégée appelée lorsqu'un attribut observé change.\n\t *\n\t * @param {string} name - Le nom de l'attribut modifié.\n\t * @param {string | null} oldVal - L'ancienne valeur de l'attribut.\n\t * @param {string | null} newVal - La nouvelle valeur de l'attribut.\n\t * @returns {void | Nullable<'break'>}\n\t * @protected\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tif (name === ATTR_NAME && oldVal !== newVal) {\n\t\t\tthis.#_setName();\n\t\t}\n\t}\n\n\t/**\n\t * Appelée lorsque le composant est retiré du DOM.\n\t * Nettoie l'observateur de mutations.\n\t * @protected\n\t */\n\tprotected _p_detach(): void {\n\t\tthis.#_observer?.disconnect?.();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Initialise le composant.\n\t * Configure les écouteurs, les données par défaut, la valeur par défaut et les états.\n\t * @private\n\t */\n\t#_init() {\n\t\treturn this.#_setListeners()\n\t\t\t.#_setDefaultData()\n\t\t\t.#_setDefaultValue()\n\t\t\t.#_initStates();\n\t}\n\n\t/**\n\t * Propage le nom du groupe à tous les boutons radio enfants.\n\t * @private\n\t */\n\t#_setName() {\n\t\tfor (const radio of this.radios) {\n\t\t\tradio.name = this.name;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Initialise le libellé (légende) du groupe dans le slot correspondant.\n\t * @private\n\t */\n\t#_setLegend() {\n\t\treturn this.#_initData(this.#_label, this.#_ui.legend);\n\t}\n\n\t/**\n\t * Initialise l'indice (hint) du groupe dans le slot correspondant.\n\t * @private\n\t */\n\t#_setHint() {\n\t\treturn this.#_initData(this.#_hint, this.#_ui.hint);\n\t}\n\n\t/**\n\t * Helper pour initialiser le contenu textuel d'un slot si des données sont fournies.\n\t * @private\n\t */\n\t#_initData(data: Optional<Nullable<string>>, slot: HTMLSlotElement): this {\n\t\tif (data) slot.textContent = data;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Initialise les états visuels du composant (ex: inline).\n\t * @private\n\t */\n\t#_initStates() {\n\t\treturn this.#_initInline();\n\t}\n\n\t/**\n\t * Applique l'état initial pour le mode inline.\n\t * @private\n\t */\n\t#_initInline() {\n\t\tif (this.inline) this.#_setInlineState();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit les données par défaut (nom, légende, indice).\n\t * @private\n\t */\n\t#_setDefaultData() {\n\t\treturn this.#_setName().#_setLegend().#_setHint();\n\t}\n\n\t/**\n\t * Définit la sélection initiale basée sur la valeur par défaut.\n\t * Si la valeur par défaut ne correspond à aucun radio, enregistre une erreur ou sélectionne le premier par défaut.\n\t * @private\n\t */\n\t#_setDefaultValue() {\n\t\tthis.#_setDefaultRadioFromValue().match({\n\t\t\tOk: () => this.#_setDefaultRadio(),\n\t\t\tErr: e => Log.error(this.constructor.name, e.message, e),\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Tente de définir le bouton radio sélectionné en fonction de `_value`.\n\t * @returns {Result<void>} Résultat de l'opération.\n\t * @private\n\t */\n\t@Risky()\n\t#_setDefaultRadioFromValue(): Result<void> {\n\t\tconst value = this.#_value;\n\n\t\tif (!value) return Result.Ok();\n\n\t\tconst radio = this.radios.find(r => r.value === value);\n\t\tif (radio) {\n\t\t\tthis.#_check(radio);\n\t\t\treturn Result.Ok();\n\t\t}\n\n\t\tthrow new Error(`Aucun radio trouvé avec la valeur \"${value}\"`);\n\t}\n\n\t/**\n\t * Sélectionne le premier bouton radio par défaut si aucun n'est déjà sélectionné.\n\t * @private\n\t */\n\t#_setDefaultRadio(): void {\n\t\tif (this.radios.length > 0 && !this.radios.find(x => x.checked)) {\n\t\t\tthis.#_check(this.radios[0]);\n\t\t}\n\t}\n\n\t/**\n\t * Configure les écouteurs d'événements pour le changement de radio et la navigation clavier.\n\t * @private\n\t */\n\t#_setListeners(): this {\n\t\tthis.#_listenRadioChange();\n\t\tthis.#_handleKeyboardNavigation();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Écoute l'événement de changement d'un bouton radio enfant.\n\t * @private\n\t */\n\t@Listen(HTMLBnumRadio.EVENT_CHANGE, { selector: HTMLBnumRadio.TAG })\n\t#_listenRadioChange() {\n\t\treturn this.#_handleRadioChange;\n\t}\n\n\t/**\n\t * Gère la navigation au clavier (flèches directionnelles) entre les boutons radio.\n\t * @private\n\t */\n\t@Listen('keydown')\n\t#_handleKeyboardNavigation() {\n\t\treturn (e: KeyboardEvent) => {\n\t\t\tconst isRTL = getComputedStyle(this).direction === 'rtl';\n\t\t\tconst KEY_NEXT = ['ArrowDown', isRTL ? 'ArrowLeft' : 'ArrowRight'];\n\t\t\tconst KEY_PREV = ['ArrowUp', isRTL ? 'ArrowRight' : 'ArrowLeft'];\n\t\t\tconst ALL_KEYS = [...KEY_NEXT, ...KEY_PREV];\n\n\t\t\tif (!ALL_KEYS.includes(e.key)) return;\n\n\t\t\te.preventDefault();\n\n\t\t\tconst radios = this.radios;\n\t\t\tif (radios.length === 0) return;\n\n\t\t\tconst currentRadio = radios.find(r => r.checked);\n\t\t\tconst currentIndex = currentRadio ? radios.indexOf(currentRadio) : -1;\n\t\t\tconst direction = KEY_PREV.includes(e.key) ? -1 : 1;\n\n\t\t\tconst nextIndex =\n\t\t\t\t(currentIndex + direction + radios.length) % radios.length;\n\n\t\t\tconst targetRadio = radios[nextIndex];\n\n\t\t\tif (targetRadio) {\n\t\t\t\tthis.#_check(targetRadio, { fire: true });\n\t\t\t\ttargetRadio.internalCheckbox.focus();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Gère le changement d'état d'un bouton radio.\n\t * Assure qu'un seul radio est sélectionné à la fois.\n\t *\n\t * @param {CustomEvent} e - L'événement de changement.\n\t * @private\n\t */\n\t@Autobind\n\t#_handleRadioChange(\n\t\te: CustomEvent<{ innerEvent: BnumRadioCheckedChangeEvent }>,\n\t) {\n\t\te.stopPropagation();\n\t\tconst { innerEvent: inner } = e.detail;\n\n\t\tif (inner.checked) this.#_check(inner.caller).#_fireChange(inner);\n\t}\n\n\t/**\n\t * Notifie les écouteurs externes qu'un changement de sélection a eu lieu.\n\t *\n\t * @param {BnumRadioCheckedChangeEvent} e - L'événement interne du radio.\n\t * @returns L'événement formaté.\n\t * @private\n\t */\n\t@Fire('change')\n\t#_fireChange(e: BnumRadioCheckedChangeEvent) {\n\t\treturn { inner: e, caller: this };\n\t}\n\n\t/**\n\t * Marque un bouton radio comme sélectionné et désélectionne les autres.\n\t * Met à jour les attributs `tabindex` pour la navigation clavier.\n\t *\n\t * @param {HTMLBnumRadio} radio - Le bouton radio à sélectionner.\n\t * @param {object} options - Options supplémentaires.\n\t * @param {boolean} [options.fire=false] - Si `true`, déclenche l'événement de changement sur le radio.\n\t * @private\n\t */\n\t#_check(\n\t\tradio: HTMLBnumRadio,\n\t\t{ fire = false }: { fire?: boolean } = {},\n\t): this {\n\t\tfor (const r of this.radios) {\n\t\t\tif (r !== radio) {\n\t\t\t\tr.checked = false;\n\t\t\t\tthis.#_stopFocus(r);\n\t\t\t}\n\t\t}\n\n\t\tif (fire) radio.updateCheckAndFire(true);\n\t\telse radio.checked = true;\n\n\t\tthis.#_canFocus(radio);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Fonction de rappel pour l'observateur de mutations.\n\t * Détecte si de nouveaux boutons radio sont ajoutés et planifie leur initialisation.\n\t * @private\n\t */\n\t#_obserse(mutations: MutationRecord[]) {\n\t\tconst hasOptionMutation = mutations.some(m =>\n\t\t\tArray.from(m.addedNodes).some(n => n instanceof HTMLBnumRadio),\n\t\t);\n\n\t\tif (hasOptionMutation) {\n\t\t\tthis.#_scheduleSetupRadios();\n\t\t}\n\t}\n\n\t/**\n\t * Planifie la configuration des radios (utilisé lors de mutations dynamiques).\n\t * @private\n\t */\n\t@Schedule()\n\t#_scheduleSetupRadios() {\n\t\tthis.#_setupRadios();\n\t}\n\n\t/**\n\t * Configure l'état initial des boutons radio (nom, sélection, focus).\n\t * @private\n\t */\n\t#_setupRadios() {\n\t\tlet hasChecked = false;\n\t\tfor (const radio of this.radios) {\n\t\t\tif (radio.name !== this.name) radio.name = this.name;\n\t\t\tif (radio.checked) {\n\t\t\t\tif (!hasChecked) {\n\t\t\t\t\thasChecked = true;\n\t\t\t\t\tthis.#_canFocus(radio);\n\t\t\t\t} else {\n\t\t\t\t\tradio.checked = false;\n\t\t\t\t\tthis.#_stopFocus(radio);\n\t\t\t\t}\n\t\t\t} else this.#_stopFocus(radio);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Autorise le focus sur le radio.\n\t * @param radio Bouton radio concerné.\n\t * @returns Chaîne\n\t */\n\t#_canFocus(radio: Readonly<HTMLBnumRadio>) {\n\t\tradio.setAttribute('tabindex', '0');\n\t\treturn this;\n\t}\n\n\t/**\n\t * Retire le focus du radio.\n\t * @param radio Bouton radio concerné.\n\t * @returns Chaîne\n\t */\n\t#_stopFocus(radio: Readonly<HTMLBnumRadio>) {\n\t\tradio.setAttribute('tabindex', '-1');\n\t\treturn this;\n\t}\n\n\t/**\n\t * Applique ou retire l'état visuel \"inline\" sur le composant.\n\t * @private\n\t */\n\t#_setInlineState() {\n\t\tif (this.inline) this._p_addState(STATE_INLINE);\n\t\telse this._p_removeState(STATE_INLINE);\n\t}\n\t//#endregion Private methods\n\n\t//#region Static\n\t/**\n\t * Liste des attributs observés par le composant.\n\t * @returns {string[]} Liste des noms d'attributs.\n\t * @protected\n\t * @static\n\t * @override\n\t * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n\t * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n\t */\n\t@NonStd('Deprecated')\n\tprotected static _p_observedAttributes(): string[] {\n\t\treturn [ATTR_NAME];\n\t}\n\n\t/**\n\t * Evènements disponibles pour ce composant.\n\t * @readonly\n\t */\n\tstatic get EVENTS(): Readonly<BnumRadioGroupEvents> {\n\t\treturn {\n\t\t\t[EVENT_CHANGE]: EVENT_CHANGE,\n\t\t};\n\t}\n\t//#endregion Static\n}\n","//type: enum\n//description: États internes pour bnum-segmented-item\n\n/**\n * États possibles pour l'élément bnum-segmented-item.\n */\nexport enum States {\n  SELECTED = 'selected',\n  DISABLED = 'disabled',\n  ICON = 'icon',\n}\n","// type: Webcomposant\n// description: Segmented Item component for segmented control\n\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumIcon } from '../../../atoms/icon/bnum-icon';\nimport BnumElementInternal from '../../../bnum-element-states';\nimport { Nullable } from '../../../../core/utils/types';\nimport {\n  Attr,\n  Data,\n  Define,\n  Fire,\n  SetAttr,\n  SetAttrs,\n} from '../../../../core/decorators';\nimport { UI } from '../../../../core/decorators/ui';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from '../../../../core/utils/Log';\nimport { Listen } from '../../../../core/decorators/listen';\nimport { Listener } from '../../../../core/decorators/listener';\nimport JsEvent from '@rotomeca/event';\nimport {\n  BnumSegmentedItemUI,\n  CallSelectArg,\n  EventSelectArgs,\n  OnSelectCallback,\n  OnSelectListenerInitializer,\n  SegmentedItemCreateOptions,\n} from './bnum-segmented-item.internal';\nimport { States } from './bnum-segmented-item.internal/States';\nimport style from './bnum-segmented-item.less';\nimport { TAG_SEGMENTED_ITEM } from '../../../../core/utils/constants/tags';\nimport { UpdateAll } from 'core/decorators/updateAll';\n\n//#region Global constants\n// --- FLAT CONSTANTS ---\n\n// Ids\nconst ID_ICON = 'icon';\nconst ID_CONTAINER = 'container';\nconst ID_LABEL = 'label';\n\n// Selectors\nconst SEL_ICON = `#${ID_ICON}` as const;\nconst SEL_CONTAINER = `#${ID_CONTAINER}` as const;\nconst SEL_LABEL = `#${ID_LABEL}` as const;\n\n// Events\nconst EVT_SELECTED = 'bnum-segmented-item:selected';\nconst EVT_ERROR = 'bnum-segmented-item:error';\n\n// Attributes\nconst ATTR_SELECTED = 'selected';\nconst ATTR_DISABLED = 'disabled';\n\n// States\nconst STATE_SELECTED = States.SELECTED as 'selected';\nconst STATE_DISABLED = States.DISABLED as 'disabled';\nconst STATE_ICON = States.ICON as 'icon';\n\n// --- PUBLIC OBJECTS ---\n\n/**\n * Evènements non-conventionnels\n */\nconst EVENTS = {\n  SELECTED: EVT_SELECTED,\n  ERROR: EVT_ERROR,\n} as const;\n//#endregion Global constants\n\n//#region Template\n\nconst TEMPLATE = (\n  <div class=\"segmented-item__container\" id={ID_CONTAINER}>\n    <HTMLBnumIcon class=\"segmented-item__container__icon\" id={ID_ICON} />\n    <span class=\"segmented-item__container__label\" id={ID_LABEL}>\n      <slot></slot>\n    </span>\n  </div>\n);\n//#endregion Template\n\n/**\n * Composant représentant un item individuel au sein d'un contrôle segmenté.\n * * @structure Defaut\n * <bnum-segmented-item value=\"item1\" data-icon=\"home\">Item 1</bnum-segmented-item>\n *\n * @structure Selected\n * <bnum-segmented-item value=\"item1\" selected data-icon=\"home\">Item 1</bnum-segmented-item>\n *\n * @structure Disabled\n * <bnum-segmented-item value=\"item1\" disabled data-icon=\"home\">Item 1</bnum-segmented-item>\n * \n * @slot default - Le contenu textuel (label) de l'élément.\n * \n * @state selected - quand l'élément est sélectionné.\n * @state disabled - quand l'élément est désactivé.\n * @state icon - quand une icône est définie via data-icon.\n * \n * @attr {boolean} (optional) (default: false) disabled - Indique si l'item est désactivé. \n * @attr {boolean} (optional) (default: false) selected - Indique si l'item est sélectionné.\n\n */\n@Define({\n  tag: TAG_SEGMENTED_ITEM,\n  styles: style,\n  template: TEMPLATE,\n})\n@UpdateAll()\nexport class HTMLBnumSegmentedItem extends BnumElementInternal {\n  //#region Private Fields\n  /** Références aux éléments du Shadow DOM. */\n  @UI({\n    icon: SEL_ICON,\n    label: SEL_LABEL,\n    container: SEL_CONTAINER,\n  })\n  accessor #_ui!: BnumSegmentedItemUI;\n  //#endregion Private Fields\n\n  //#region Getters/Setters\n  /** @attr {boolean} (optional) (default: false) selected - État de sélection. */\n  @Attr() accessor selected: boolean = false;\n\n  /** @attr {boolean} (optional) (default: false) disabled - État désactivé. */\n  @Attr() accessor disabled: boolean = false;\n\n  /** @attr {string} (optional) (default: '') data-icon - Nom de l'icône à afficher. */\n  @Data({ setter: false }) accessor #_icon: string = EMPTY_STRING;\n\n  /** Instance JsEvent pour la souscription aux changements de sélection. */\n  @Listener(OnSelectListenerInitializer)\n  accessor onSelected!: JsEvent<OnSelectCallback>;\n\n  /** @attr {string} value - Valeur technique de l'item. */\n  get value(): string {\n    return this.getAttribute('value') || this.innerText || EMPTY_STRING;\n  }\n  set value(value: string) {\n    this.setAttribute('value', value);\n  }\n\n  /** Récupère le nom de l'icône actuelle. */\n  get icon(): string {\n    return this.#_icon;\n  }\n\n  /** Définit une nouvelle icône et met à jour le DOM. */\n  set icon(value: string) {\n    this.#_icon = value;\n    this.#_updateIcon(value);\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /** Initialise le DOM et les écouteurs. */\n  @SetAttr('role', 'radio')\n  protected _p_buildDOM(): void {\n    this.#_updateDom().match({\n      Ok: () => this.#_setListeners(),\n      Err: (error) => this.#_dispatchError(error),\n    });\n  }\n\n  /** Gère la mise à jour des attributs. */\n  protected _p_update(\n    _: string,\n    __: string | null,\n    ___: string | null,\n  ): void | Nullable<'break'> {\n    this.#_updateDom().tapError((error) => this.#_dispatchError(error));\n  }\n\n  //#endregion Lifecycle\n\n  //#region Public Methods\n  /**\n   * Met à jour le texte du label via textContent.\n   * @param text Nouveau texte.\n   */\n  @Risky()\n  updateLabel(text: string): Result<void> {\n    return this.#_verifyUi().tap(() => {\n      this.textContent = text;\n    });\n  }\n\n  /**\n   * Vérifie si l'élément possède un état spécifique.\n   * @param state État à vérifier.\n   */\n  @Risky()\n  is(state: States): Result<boolean> {\n    var result;\n\n    switch (state) {\n      case States.SELECTED:\n        result = this.hasAttribute(ATTR_SELECTED);\n        break;\n\n      case States.DISABLED:\n        result = this.hasAttribute(ATTR_DISABLED);\n        break;\n\n      case States.ICON:\n        result = this.#_icon !== EMPTY_STRING;\n        break;\n\n      default:\n        throw new Error(`State \"${state}\" is not recognized.`);\n    }\n\n    return Result.Ok(result);\n  }\n\n  /**\n   * Désactive l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  disable(): this {\n    this.disabled = true;\n    return this;\n  }\n\n  /**\n   * Active l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  enable(): this {\n    this.disabled = false;\n    return this;\n  }\n\n  /**\n   * Sélectionne l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  select(): this {\n    this.selected = true;\n    return this;\n  }\n\n  /**\n   * Désélectionne l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  unselect(): this {\n    this.selected = false;\n    return this;\n  }\n\n  /**\n   * Met à jour la valeur technique de l'élément.\n   * @param value Nouvelle valeur.\n   * @returns Cette instance pour le chaînage.\n   */\n  updateValue(value: string): this {\n    this.value = value;\n    return this;\n  }\n\n  /**\n   * Déclenche manuellement la logique de sélection.\n   *\n   * /!\\ Ne modifie pas l'état sélectionné de l'élément.\n   * @param options Options incluant l'événement parent.\n   */\n  callSelect({ parentEvent = null }: CallSelectArg = {}): void {\n    const args: EventSelectArgs = {\n      parentEvent,\n      caller: this,\n      value: this.value,\n    };\n    this.onSelected.call(args);\n  }\n  //#endregion Public Methods\n\n  //#region Private Methods\n  /** Synchronise l'ensemble du DOM avec les états internes. */\n  @Risky()\n  #_updateDom(): Result<void> {\n    return this.#_verifyUi()\n      .tap(() => this.#_clearStates())\n      .tap(() => this.#_updateSelected())\n      .tap(() => this.#_updateDisabled())\n      .andThen(() => this.#_setIcon());\n  }\n\n  /** Vérifie la disponibilité des éléments UI du Shadow DOM. */\n  @Risky()\n  #_verifyUi(): Result<void> {\n    if (!this.#_ui.icon || !this.#_ui.label || !this.#_ui.container) {\n      Log.error('HTMLBnumSegmentedItem', 'UI not correctly initialized');\n      throw new Error('UI not correctly initialized');\n    }\n    return Result.Ok();\n  }\n\n  /** Configure l'icône et active l'état associé. */\n  @Risky()\n  #_setIcon() {\n    return this.#_updateIcon(this.#_icon).tap(() => {\n      this._p_addState(STATE_ICON);\n    });\n  }\n\n  /** Met à jour la propriété icon du webcomponent bnum-icon interne. */\n  @Risky()\n  #_updateIcon(icon: string): Result<void> {\n    return this.#_verifyUi().tap(() => {\n      this.#_ui.icon!.icon = icon;\n    });\n  }\n\n  /** Réinitialise tous les états CSS custom. */\n  #_clearStates() {\n    this._p_clearStates();\n    return this;\n  }\n\n  /** Met à jour l'UI en fonction de l'attribut selected. */\n  #_updateSelected() {\n    if (this.hasAttribute(ATTR_SELECTED)) this.#_select();\n    else this.#_unselect();\n\n    return this;\n  }\n\n  /** Met à jour l'UI en fonction de l'attribut disabled. */\n  #_updateDisabled() {\n    if (this.hasAttribute(ATTR_DISABLED)) this.#_disable();\n    else this.#_enable();\n\n    return this;\n  }\n\n  /** Active l'état désactivé. */\n  @SetAttrs({ 'aria-disabled': 'true', tabindex: '-1' })\n  #_disable() {\n    this._p_addState(STATE_DISABLED);\n  }\n\n  /** Désactive l'état désactivé. */\n  @SetAttr('aria-disabled', 'false')\n  #_enable() {\n    if (!this.hasAttribute(ATTR_SELECTED)) this.#_unselect();\n  }\n\n  /** Applique les attributs et états de sélection. */\n  @SetAttrs({\n    'aria-checked': 'true',\n    tabindex: '0',\n  })\n  #_select() {\n    this._p_addState(STATE_SELECTED);\n  }\n\n  /** Retire les attributs et états de sélection. */\n  @SetAttrs({\n    'aria-checked': 'false',\n    tabindex: '-1',\n  })\n  #_unselect() {}\n\n  /** Filtre le clic si l'item est désactivé ou déjà sélectionné. */\n  #_onClickDisabled(e: Event) {\n    const canBeClicked = !this.disabled && !this.selected;\n    if (canBeClicked) return this.callSelect({ parentEvent: e });\n  }\n\n  /** Émet l'événement d'erreur. */\n  @Fire(EVT_ERROR)\n  #_dispatchError(error: Error) {\n    return { error, caller: this };\n  }\n\n  /** Émet l'événement de sélection. */\n  @Fire(EVT_SELECTED)\n  #_onclick(e: Event) {\n    return { event: e, caller: this, value: this.value };\n  }\n\n  /** Gère l'accessibilité clavier (Entrée/Espace). */\n  #_onKeyDown(e: KeyboardEvent) {\n    const canBeClicked = !this.disabled && !this.selected;\n    const isEnterOrSpace = e.key === 'Enter' || e.key === ' ';\n    if (canBeClicked && isEnterOrSpace) {\n      e.preventDefault();\n      return this.click();\n    }\n  }\n\n  /** Initialise les écouteurs via décorateur @Listen. */\n  #_setListeners() {\n    this.#_listenClick();\n    this.#_listenKeyDown();\n  }\n\n  /**\n   * Ecoute les clics sur l'élément.\n   * @returns Action à faire lors d'un clic.\n   */\n  @Listen('click')\n  #_listenClick() {\n    return this.#_onClickDisabled;\n  }\n\n  /**\n   * Ecoute les événements clavier sur l'élément.\n   * @returns Action à faire lors d'un keydown.\n   */\n  @Listen('keydown')\n  #_listenKeyDown() {\n    return this.#_onKeyDown;\n  }\n\n  //#endregion Private Methods\n\n  //#region Protected Methods\n  /**\n   * Déclencheur interne pour le pont avec l'initialiseur de Listener.\n   * @internal\n   */\n  protected _p_onSelectedTrigger(e: Event): void {\n    this.#_onclick(e);\n  }\n  //#endregion Protected Methods\n\n  //#region Static Methods\n  protected static _p_observedAttributes(): string[] {\n    return [...super._p_observedAttributes(), ATTR_SELECTED, ATTR_DISABLED];\n  }\n\n  /**\n   * Crée un élément segmented-item.\n   * @param value Valeur technique de l'item.\n   * @param options Options de création.\n   * @returns L'élément créé.\n   */\n  static Create(\n    value: string,\n    options?: SegmentedItemCreateOptions,\n  ): HTMLBnumSegmentedItem {\n    const node = document.createElement(this.TAG) as HTMLBnumSegmentedItem;\n\n    if (options?.onSelect)\n      node.addEventListener(EVT_SELECTED, (e: any) => options.onSelect!(e));\n\n    if (options?.OnError)\n      node.addEventListener(EVT_ERROR, (e: any) =>\n        options.OnError!(e.error, e.caller),\n      );\n\n    if (options?.label) node.textContent = options.label;\n\n    return node\n      .attr('value', value)\n      .condAttr(\n        options?.iconName as unknown as boolean,\n        'data-icon',\n        options!.iconName!,\n      )\n      .condAttr(options?.selected as boolean, ATTR_SELECTED, true)\n      .condAttr(options?.disabled as boolean, ATTR_DISABLED, true);\n  }\n\n  /**\n   * Accès aux états disponibles pour cet élément.\n   */\n  static get States() {\n    return States;\n  }\n\n  /**\n   * Accès aux évènements non-conventionnels de cet élément.\n   */\n  static get Events() {\n    return EVENTS;\n  }\n  //#endregion Static Methods\n}\n","// type: functions\n// description: Fonctions pour initialiser les listeners internes\n\nimport JsEvent from '@rotomeca/event';\nimport {\n  EventSelectArgs,\n  HTMLBnumSegmentedItem,\n  OnSelectCallback,\n} from '../bnum-segmented-item.internal';\n\n/**\n * Interface mapping the protected members needed for internal wiring.\n */\ninterface BnumSegmentedItemInternal {\n  _p_onSelectedTrigger(event: Event): void;\n}\n\nexport function OnSelectListenerInitializer(\n  listener: JsEvent<OnSelectCallback>,\n  instance: HTMLBnumSegmentedItem,\n): void {\n  listener.add('default', (args: EventSelectArgs) => {\n    (instance as unknown as BnumSegmentedItemInternal)._p_onSelectedTrigger(\n      args.parentEvent ?? new Event('click'),\n    );\n  });\n}\n","import { HTMLBnumSegmentedItem } from '../bnum-segmented-item.part';\nimport { Listen } from '../../../../core/decorators/listen';\nimport BnumElementInternal from '../../../bnum-element-states';\nimport { Data, Define, Fire, SetAttr } from '../../../../core/decorators';\nimport { Nullable } from '../../../../core/utils/types';\nimport Log from '../../../../core/utils/Log';\nimport style from './bnum-segmented-control.less';\nimport { TAG_SEGMENTED_CONTROL } from 'core/utils/constants/tags';\n\n//#region Global constants\nconst SELECTOR_SELECTED = '[selected]';\nconst STATE_NO_LEGEND = 'no-legend';\nconst EVENT_CHANGE = 'bnum-segmented-control:change';\nconst EVENT_ERROR = 'bnum-segmented-control:error';\nconst TAG_SEGMENTED_ITEM = HTMLBnumSegmentedItem.TAG;\n\n/**\n * Énumération des événements émis par le contrôle segmenté.\n *\n * @remarks\n * - `CHANGE` : déclenché lors de la sélection d'un item\n * - `ERROR` : déclenché en cas d'erreur interne\n *\n * @example\n * ```typescript\n * control.addEventListener(\n *   HTMLBnumSegmentedControl.Events.CHANGE,\n *   (e) => console.log('Sélection:', e.detail.value)\n * );\n * ```\n */\nconst EVENTS = {\n\tCHANGE: EVENT_CHANGE,\n\tERROR: EVENT_ERROR,\n} as const;\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<div id=\"container\">\n\t\t<label class=\"bnum-segmented-control__legend\">\n\t\t\t<slot></slot>\n\t\t</label>\n\t\t<div class=\"bnum-segmented-control__items\">\n\t\t\t{' '}\n\t\t\t<slot name=\"items\"></slot>\n\t\t</div>\n\t</div>\n);\n//#endregion Template\n\n/**\n * Élément de contrôle segmenté (groupe de boutons radio).\n *\n * @structure Sans icône\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" value=\"option2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @structure Avec icône\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" data-icon=\"add\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"remove\" value=\"option2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @structure Avec 3 segments\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_agenda\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_array\" value=\"option2\">Option 2</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_carousel\" value=\"option3\">Option 3</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @description\n * Composant permettant de présenter plusieurs options mutuellement exclusives\n * sous la forme d'un groupe de contrôles segmentés.\n *\n * @remarks\n * - Respecte le pattern WAI-ARIA \"Radio Group\"\n * - Support complet de la navigation au clavier (flèches, boucle cyclique)\n * - Support de la directionnalité RTL (arabe, hébreu, etc.)\n * - La sélection suit le focus pour l'accessibilité\n *\n * @example\n * ```html\n * <bnum-segmented-control>\n *    Choisir une option\n *    <bnum-segmented-item slot=\"items\" selected value=\"opt1\">Option 1</bnum-segmented-item>\n *    <bnum-segmented-item slot=\"items\" value=\"opt2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n * ```\n *\n * @example\n * ```typescript\n * const control = HTMLBnumSegmentedControl.Create('Ma légende');\n * control.addEventListener('bnum-segmented-control:change', (e) => {\n *   console.log('Valeur sélectionnée:', e.detail.value);\n * });\n * ```\n *\n * @event {CustomEvent} bnum-segmented-control:change - Émis lors de la sélection d'un item. Détail : `{value: string, item: HTMLBnumSegmentedItem, caller: HTMLBnumSegmentedControl}`\n * @event {CustomEvent} bnum-segmented-control:error - Émis en cas d'erreur interne. Détail : `{error: Error, caller: HTMLBnumSegmentedControl}`\n *\n * @see {@link HTMLBnumSegmentedItem}\n */\n@Define({\n\ttag: TAG_SEGMENTED_CONTROL,\n\tstyles: style,\n\ttemplate: TEMPLATE,\n})\nexport class HTMLBnumSegmentedControl extends BnumElementInternal {\n\t//#region Getters/Setters\n\t/**\n\t * Contrôle l'affichage de la légende du contrôle segmenté.\n\t *\n\t * @remarks\n\t * - `true` : affiche la légende (défaut)\n\t * - `false` : masque la légende via la classe `no-legend`\n\t *\n\t * @decorator `@Data()`\n\t * @default true\n\t */\n\t@Data() accessor #_legend: boolean = true;\n\n\t/**\n\t * Récupère l'élément actuellement sélectionné dans le contrôle.\n\t *\n\t * @remarks\n\t * Retourne `null` si aucun élément n'est sélectionné.\n\t *\n\t * @readonly\n\t * @returns {Nullable<HTMLBnumSegmentedItem>} L'item sélectionné ou null.\n\t */\n\tget selected(): Nullable<HTMLBnumSegmentedItem> {\n\t\treturn this.querySelector(SELECTOR_SELECTED);\n\t}\n\n\t/**\n\t * Récupère la valeur de l'élément actuellement sélectionné.\n\t *\n\t * @remarks\n\t * La valeur provient de l'attribut `value` de l'item sélectionné.\n\t * Retourne `null` si aucun élément n'est sélectionné.\n\t *\n\t * @readonly\n\t * @returns {Nullable<string>} La valeur de l'item sélectionné ou null.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = document.querySelector('bnum-segmented-control');\n\t * console.log(control.currentValue); // \"option1\"\n\t * ```\n\t */\n\tget currentValue(): Nullable<string> {\n\t\treturn this.selected?.value || null;\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Initialise le DOM et configure le composant.\n\t *\n\t * @remarks\n\t * Définit l'attribut `role=\"radiogroup\"` et initialise :\n\t * - L'affichage/masquage de la légende\n\t * - Les écouteurs d'événements clavier\n\t * - Les écouteurs de sélection d'items\n\t *\n\t * @protected\n\t * @decorator `@SetAttr('role', 'radiogroup')`\n\t */\n\t@SetAttr('role', 'radiogroup')\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_initLegendVisibility().#_setListeners().#_initSelectedItem();\n\t}\n\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Gère l'affichage de la légende en fonction de l'attribut `data-legend`.\n\t *\n\t * @remarks\n\t * Si `legend` est `false`, ajoute l'état CSS `no-legend` au composant.\n\t *\n\t * @private\n\t * @returns L'instance courante pour le chaînage de méthodes.\n\t */\n\t#_initLegendVisibility(): this {\n\t\tif (!(this.#_legend ?? true)) this._p_addState(STATE_NO_LEGEND);\n\t\treturn this;\n\t}\n\n\t/**\n   * Initialise la sélection du premier item par défaut.\n   *\n   * @description\n   * Si aucun item n'est déjà sélectionné, sélectionne automatiquement\n   * le premier item du contrôle segmenté.\n   *\n   * @remarks\n   * - Garantit qu'au moins un item est toujours sélectionné\n   * - Déclenche l'événement `bnum-segmented-control:change` via `click()`\n   * - Utile pour initialiser le state du composant au chargement\n\n   * @returns L'instance courante pour le chaînage de méthodes.\n   */\n\t#_initSelectedItem(): this {\n\t\tif (!this.selected) {\n\t\t\tconst firstItem = this.querySelector(\n\t\t\t\tTAG_SEGMENTED_ITEM,\n\t\t\t) as Nullable<HTMLBnumSegmentedItem>;\n\t\t\tif (firstItem) firstItem.click();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Enregistre les écouteurs d'événements du composant.\n\t *\n\t * @remarks\n\t * Configure :\n\t * - La navigation au clavier (flèches, boucle cyclique)\n\t * - La sélection d'items\n\t *\n\t * @private\n\t * @returns L'instance courante pour le chaînage de méthodes.\n\t */\n\t#_setListeners(): this {\n\t\tthis.#_onItemSelected();\n\t\tthis.#_handleKeyboardNavigation();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gère la navigation au clavier au sein du groupe (accessibilité).\n\t *\n\t * @description\n\t * Intercepte les touches fléchées pour déplacer le focus et la sélection :\n\t * - **Flèche bas / Flèche droite (LTR)** : sélectionne l'item suivant\n\t * - **Flèche haut / Flèche gauche (LTR)** : sélectionne l'item précédent\n\t * - **Support RTL** : les flèches droite/gauche sont inversées\n\t * - **Comportement cyclique** : la dernière option ramène à la première\n\t *\n\t * @remarks\n\t * Respecte le pattern WAI-ARIA \"Radio Group\" où la sélection suit le focus.\n\t * Prévient le scroll natif de la page lors de la navigation.\n\t *\n\t * @private\n\t * @decorator `@Listen('keydown')`\n\t * @returns Fonction de gestion de l'événement clavier.\n\t */\n\t@Listen('keydown')\n\t#_handleKeyboardNavigation(): Function {\n\t\treturn (e: KeyboardEvent) => {\n\t\t\t// Définition des touches de navigation\n\t\t\t// Support RTL : si la page est en arabe/hébreu, Gauche/Droite sont inversés\n\t\t\tconst isRTL = getComputedStyle(this).direction === 'rtl';\n\t\t\tconst KEY_NEXT = ['ArrowDown', isRTL ? 'ArrowLeft' : 'ArrowRight'];\n\t\t\tconst KEY_PREV = ['ArrowUp', isRTL ? 'ArrowRight' : 'ArrowLeft'];\n\t\t\tconst ALL_KEYS = [...KEY_NEXT, ...KEY_PREV];\n\n\t\t\t// Ignorer les touches non concernées\n\t\t\tif (!ALL_KEYS.includes(e.key)) return;\n\n\t\t\t// Prévenir le scroll natif de la page\n\t\t\te.preventDefault();\n\n\t\t\t// Récupération des items\n\t\t\tconst items = Array.from(\n\t\t\t\tthis.querySelectorAll(TAG_SEGMENTED_ITEM),\n\t\t\t) as HTMLBnumSegmentedItem[];\n\n\t\t\tif (items.length === 0) return;\n\n\t\t\t// Calcul du nouvel index (Logique cyclique)\n\t\t\tconst currentItem = this.selected as HTMLBnumSegmentedItem;\n\t\t\t// Si rien n'est sélectionné, on part de -1 (donc next sera 0)\n\t\t\tconst currentIndex = currentItem ? items.indexOf(currentItem) : -1;\n\t\t\tconst direction = KEY_PREV.includes(e.key) ? -1 : 1;\n\n\t\t\t// Formule mathématique pour le \"wrap-around\" (boucle fin -> début)\n\t\t\tconst nextIndex =\n\t\t\t\t(currentIndex + direction + items.length) % items.length;\n\n\t\t\tconst targetItem = items[nextIndex];\n\n\t\t\tif (targetItem) {\n\t\t\t\ttargetItem.focus();\n\t\t\t\ttargetItem.click();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Enregistre l'écouteur pour l'événement de sélection d'un item.\n\t *\n\t * @remarks\n\t * Déclenche {@link #_onItemSelectedAction} lorsqu'un item emet l'événement\n\t * `HTMLBnumSegmentedItem.Events.SELECTED`.\n\t *\n\t * @private\n\t * @decorator `@Listen(HTMLBnumSegmentedItem.Events.SELECTED, { selector: TAG_SEGMENTED_ITEM })`\n\t * @returns Fonction de gestion de la sélection d'item.\n\t */\n\t@Listen(HTMLBnumSegmentedItem.Events.SELECTED, {\n\t\tselector: TAG_SEGMENTED_ITEM,\n\t})\n\t#_onItemSelected(): Function {\n\t\treturn this.#_onItemSelectedAction;\n\t}\n\n\t/**\n\t * Traite la sélection d'un item du contrôle segmenté.\n\t *\n\t * @description\n\t * Désélectionne tous les items existants et sélectionne le nouvel item.\n\t * Émet l'événement `bnum-segmented-control:change` avec les détails.\n\t *\n\t * @remarks\n\t * - Valide que la cible de l'événement existe\n\t * - Lève une erreur si la cible est manquante\n\t * - Garantit qu'un seul item est sélectionné à la fois\n\t *\n\t * @private\n\t * @decorator `@Fire('bnum-segmented-control:change')`\n\t * @param e - Événement de sélection d'item depuis `HTMLBnumSegmentedItem`.\n\t * @returns Détails de l'événement émis : `{value: string, item: HTMLBnumSegmentedItem, caller: HTMLBnumSegmentedControl}`\n\t *\n\t * @fires bnum-segmented-control:change\n\t *\n\t * @example\n\t * ```typescript\n\t * control.addEventListener('bnum-segmented-control:change', (e) => {\n\t *   console.log('Item sélectionné:', e.detail.item);\n\t *   console.log('Valeur:', e.detail.value);\n\t * });\n\t * ```\n\t */\n\t@Fire(EVENT_CHANGE)\n\t#_onItemSelectedAction(\n\t\te: CustomEvent<{\n\t\t\tinnerEvent: Nullable<Event>;\n\t\t\ttarget: Nullable<HTMLBnumSegmentedItem>;\n\t\t}>,\n\t) {\n\t\tconst { target } = e.detail;\n\n\t\tif (!target) {\n\t\t\tthis.#_onError(\n\t\t\t\tnew Error(\"Élément cible manquant dans l'événement sélectionné.\"),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#_unselectAllItems();\n\t\tthis.#_selectItem(target!);\n\n\t\treturn { value: target?.value, item: target, caller: this };\n\t}\n\n\t/**\n\t * Traite les erreurs internes du composant.\n\t *\n\t * @remarks\n\t * - Enregistre l'erreur dans les logs\n\t * - Émet l'événement `bnum-segmented-control:error`\n\t * - Peut être déclenché lors de la sélection d'items invalides\n\t *\n\t * @private\n\t * @decorator `@Fire('bnum-segmented-control:error')`\n\t * @param error - L'erreur survenue.\n\t * @returns Détails de l'événement d'erreur : `{error: Error, caller: HTMLBnumSegmentedControl}`\n\t *\n\t * @fires bnum-segmented-control:error\n\t *\n\t * @example\n\t * ```typescript\n\t * control.addEventListener('bnum-segmented-control:error', (e) => {\n\t *   console.error('Erreur dans le contrôle:', e.detail.error);\n\t * });\n\t * ```\n\t */\n\t@Fire(EVENT_ERROR)\n\t#_onError(error: Error) {\n\t\tLog.error('HTMLBnumSegmentedControl', 'Une erreur est survenue', error);\n\t\treturn { error, caller: this };\n\t}\n\n\t/**\n\t * Désélectionne tous les items du contrôle segmenté.\n\t *\n\t * @remarks\n\t * Supprime l'attribut `selected` de tous les items, indépendamment de leur\n\t * état actuel.\n\t *\n\t * @private\n\t */\n\t#_unselectAllItems(): void {\n\t\tconst items = this.querySelectorAll(TAG_SEGMENTED_ITEM);\n\n\t\tif (items.length > 0) {\n\t\t\tfor (const element of Array.from(items)) {\n\t\t\t\telement.removeAttribute('selected');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sélectionne un item spécifique du contrôle segmenté.\n\t *\n\t * @remarks\n\t * Ajoute l'attribut `selected=\"true\"` à l'item fourni.\n\t * Doit être appelé après {@link #_unselectAllItems} pour respecter\n\t * le comportement de sélection unique.\n\t *\n\t * @private\n\t * @param item - L'item à sélectionner.\n\t */\n\t#_selectItem(item: HTMLBnumSegmentedItem): void {\n\t\titem.setAttribute('selected', 'true');\n\t}\n\t//#region Private methods\n\n\t//#region Static methods\n\t/**\n\t * Crée un nouveau contrôle segmenté avec une légende.\n\t *\n\t * @remarks\n\t * Fabrique statique pour créer rapidement un contrôle segmenté vide.\n\t * Les items doivent être ajoutés manuellement après la création.\n\t *\n\t * @static\n\t * @param legend - La légende du contrôle segmenté.\n\t * @returns L'élément de contrôle segmenté créé.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = HTMLBnumSegmentedControl.Create('Choisir une option');\n\t * document.body.appendChild(control);\n\t * ```\n\t */\n\tstatic Create(legend: string): HTMLBnumSegmentedControl {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumSegmentedControl;\n\t\tnode.textContent = legend;\n\t\treturn node;\n\t}\n\n\t/**\n\t * Récupère l'énumération des événements du composant.\n\t *\n\t * @remarks\n\t * Contient les noms des événements personnalisés émis par le composant.\n\t * Utiliser ces constantes plutôt que des chaînes de caractères brutes\n\t * pour éviter les erreurs typographiques.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = document.querySelector('bnum-segmented-control');\n\t *\n\t * // Bonne pratique : utiliser Events\n\t * control.addEventListener(\n\t *   HTMLBnumSegmentedControl.Events.CHANGE,\n\t *   (e) => console.log('Changement:', e.detail)\n\t * );\n\t *\n\t * // À éviter : chaîne brute\n\t * control.addEventListener('bnum-segmented-control:change', (e) => {});\n\t * ```\n\t */\n\tstatic get Events() {\n\t\treturn EVENTS;\n\t}\n\n\t//#endregion Static methods\n}\n","//type: class\n\nimport { Nullable } from 'core/utils/types';\n\n/**\n * Élément à ajouter dans un slot avec un nom de slot optionnel.\n */\nexport class ScheduleElementAppend {\n\t#_element: Element;\n\t#_slot: Nullable<string>;\n\n\t/**\n\t * Constructeur de la classe ScheduleElementAppend.\n\t * @param element Element à ajouter\n\t * @param slot Dans quel slot (null pour le slot principal)\n\t */\n\tconstructor(element: Element, slot: Nullable<string> = null) {\n\t\tthis.#_element = element;\n\t\tthis.#_slot = slot;\n\t}\n\n\t/**\n\t * Retourne l'élément à ajouter.\n\t */\n\tget element(): Element {\n\t\treturn this.#_element;\n\t}\n\n\t/**\n\t * Retourne le nom du slot où ajouter l'élément.\n\t */\n\tget slot(): Nullable<string> {\n\t\treturn this.#_slot;\n\t}\n}\n","export const STATE_CLICKABLE = 'clickable';\nexport const STATE_LOADING = 'loading';\n\nexport const CSS_CLASS_TITLE = 'card-title';\nexport const CSS_CLASS_BODY = 'card-body';\nexport const CSS_CLASS_LOADING = 'card-loading';\n\nexport const SLOT_TITLE = 'title';\n\nexport const DATA_TITLE_ICON = 'title-icon';\nexport const DATA_TITLE_TEXT = 'title-text';\nexport const DATA_TITLE_LINK = 'title-link';\n\nexport const EVENT_LOADING = 'bnum-card:loading';\nexport const EVENT_CLICK = 'bnum-card:click';\n\nexport const ICON_SPINNER = 'progress_activity';\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { TAG_CARD } from '../../../core/utils/constants/tags';\nimport { removeButtonRole, setButtonRole } from '../../../core/utils/utils';\nimport style from './bnum-card.less';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Data, Define, NO_SETTER } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { TitleData } from './card.internal/TitleData';\nimport { ScheduleElementAppend } from './card.internal/ScheduleElementAppend';\nimport { HTMLBnumFragment } from 'components/atoms';\nimport {\n\tCSS_CLASS_BODY,\n\tCSS_CLASS_LOADING,\n\tCSS_CLASS_TITLE,\n\tDATA_TITLE_ICON,\n\tDATA_TITLE_LINK,\n\tDATA_TITLE_TEXT,\n\tEVENT_CLICK,\n\tEVENT_LOADING,\n\tICON_SPINNER,\n\tSLOT_TITLE,\n\tSTATE_CLICKABLE,\n\tSTATE_LOADING,\n} from './card.internal/constants';\nimport { Observe } from 'core/decorators/observe';\nimport { Listen } from 'core/decorators/listen';\n\nexport { HTMLBnumCardElement };\n\n// #region Global constants\nconst SYMBOL_RESET = Symbol('reset');\n// #endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<div class={CSS_CLASS_TITLE}>\n\t\t\t<slot name={SLOT_TITLE}></slot>\n\t\t</div>\n\t\t<div class={CSS_CLASS_BODY}>\n\t\t\t<slot id=\"mainslot\"></slot>\n\t\t</div>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n/**\n * Élément HTML représentant une carte personnalisée Bnum.\n *\n * Liste des slots :\n * - title : Contenu du titre de la carte. Si aucun contenu n'est fourni, un titre par défaut sera généré à partir des attributs de données.\n * - (slot par défaut) : Contenu du corps de la carte.\n *\n * Liste des data :\n * - title-icon : Icône du titre de la carte.\n * - title-text : Texte du titre de la carte.\n * - title-link : Lien du titre de la carte.\n *\n * /!\\ Les data servent à définir un titre par défaut, si le slot \"title\" est vide ou pas défini.\n *\n * Liste des attributs :\n * - clickable : Rend la carte cliquable.\n * - loading : Indique si la carte est en état de chargement.\n *\n * Évènements personnalisés :\n * - bnum-card:loading : Déclenché lorsque l'état de chargement de la carte change.\n * - bnum-card:click : Déclenché lorsqu'un clic est effectué sur une carte cliquable.\n *\n * @structure Cas standard\n * <bnum-card>\n * <span slot=\"title\">Titre de la carte</span>\n * <span>Contenu principal.</span>\n * </bnum-card>\n *\n * @structure Carte cliquable\n * <bnum-card clickable>\n * <span slot=\"title\">Carte cliquable</span>\n * <span>Cliquez n'importe où.</span>\n * </bnum-card>\n *\n * @structure Carte avec titre par défaut (via data-attrs)\n * <bnum-card\n * data-title-text=\"Titre généré\"\n * data-title-icon=\"info\"\n * >\n * <span>Le slot \"title\" est vide.</span>\n * </bnum-card>\n *\n * @structure Carte avec un chargement\n * <bnum-card loading>\n * <bnum-card-title slot=\"title\" data-icon=\"info\">Titre en cours de chargement...</bnum-card-title>\n * <span>Chargement</span>\n * </bnum-card>\n *\n * @state clickable - Est actif lorsque la carte est cliquable.\n * @state loading - Est actif lorsque la carte est en état de chargement.\n *\n * @slot title - Contenu du titre de la carte. Si aucun contenu n'est fourni, un titre par défaut sera généré.\n * @slot (default) - Contenu du corps de la carte. Masqué si l'état `loading` est actif.\n *\n * @cssvar {block} --bnum-card-display - Définit le type d'affichage du composant.\n * @cssvar {var(--bnum-space-m, 15px)} --bnum-card-padding - Définit le padding interne de la carte.\n * @cssvar {auto} --bnum-card-width - Définit la largeur de la carte.\n * @cssvar {auto} --bnum-card-height - Définit la hauteur de la carte.\n * @cssvar {var(--bnum-color-surface, #f6f6f7)} --bnum-card-background-color - Couleur de fond de la carte.\n * @cssvar {var(--bnum-color-surface-hover, #eaeaea)} --bnum-card-background-color-hover - Couleur de fond au survol.\n * @cssvar {var(--bnum-color-surface-active, #dfdfdf)} --bnum-card-background-color-active - Couleur de fond à l'état actif.\n * @cssvar {pointer} --bnum-card-clickable-cursor - Curseur utilisé lorsque la carte est cliquable.\n * @cssvar {var(--bnum-card-loader-animation-rotate360, var(--bnum-animation-rotate360, rotate360 1s linear infinite))} --bnum-card-loader-animation-rotate360 - Animation appliquée au loader (spinner).\n *\n */\n@Define({\n\ttag: TAG_CARD,\n\tstyles: style,\n\ttemplate: TEMPLATE,\n})\n@Observe(STATE_CLICKABLE, STATE_LOADING)\nclass HTMLBnumCardElement extends BnumElementInternal {\n\t//#region Private fields\n\t/**\n\t * Élément HTML utilisé pour afficher l'indicateur de chargement (spinner).\n\t * @private\n\t */\n\t#_loadingElement: HTMLElement | null = null;\n\n\t/**\n\t * Planificateur responsable des mises à jour asynchrones du corps de la carte.\n\t * @private\n\t */\n\t#_scheduleBody: Nullable<Scheduler<Element | symbol>> = null;\n\n\t/**\n\t * Planificateur responsable des mises à jour asynchrones du titre de la carte.\n\t * @private\n\t */\n\t#_scheduleTitle: Nullable<Scheduler<Element | symbol>> = null;\n\n\t/**\n\t * Planificateur responsable de l'ajout asynchrone d'éléments au sein de la carte.\n\t * @private\n\t */\n\t#_scheduleAppend: Nullable<Scheduler<ScheduleElementAppend>> = null;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\n\t/**\n\t * Icône du titre récupérée depuis les attributs de données du composant (`data-title-icon`).\n\t * @private\n\t */\n\t@Data(DATA_TITLE_ICON, NO_SETTER) private accessor _titleIcon: string =\n\t\tEMPTY_STRING;\n\n\t/**\n\t * Texte du titre récupéré depuis les attributs de données du composant (`data-title-text`).\n\t * @private\n\t */\n\t@Data(DATA_TITLE_TEXT, NO_SETTER) private accessor _titleText: string =\n\t\tEMPTY_STRING;\n\n\t/**\n\t * Lien du titre récupéré depuis les attributs de données du composant (`data-title-link`).\n\t * @private\n\t */\n\t@Data(DATA_TITLE_LINK, NO_SETTER) private accessor _titleLink: string =\n\t\tEMPTY_STRING;\n\n\t/**\n\t * Retourne les données du titre agrégées sous forme d'un objet `TitleData`.\n\t * @returns Un objet encapsulant l'icône, le texte, le lien et la validité du titre.\n\t * @private\n\t */\n\tprivate get _titleData(): TitleData {\n\t\treturn {\n\t\t\ticon: this._titleIcon,\n\t\t\ttext: this._titleText,\n\t\t\tlink: this._titleLink,\n\t\t\thas: () => {\n\t\t\t\treturn this._titleText !== null && this._titleText !== undefined;\n\t\t\t},\n\t\t};\n\t}\n\n\t/**\n\t * Indique si la carte est actuellement en état de chargement.\n\t * Si vrai, la carte affiche un spinner, masque le corps et désactive ses évènements pointer.\n\t * @returns `true` si la carte charge, sinon `false`.\n\t */\n\tget loading(): boolean {\n\t\treturn this.hasAttribute(STATE_LOADING);\n\t}\n\n\t/**\n\t * Définit l'état de chargement de la carte.\n\t * @param value - `true` pour activer le chargement, `false` pour le désactiver.\n\t */\n\tset loading(value: boolean) {\n\t\tif (value) {\n\t\t\tthis.setAttribute(STATE_LOADING, STATE_LOADING);\n\t\t} else {\n\t\t\tthis.removeAttribute(STATE_LOADING);\n\t\t}\n\t}\n\n\t/**\n\t * Indique si la carte est configurée pour être cliquable et interactive.\n\t * @returns `true` si la carte est cliquable, sinon `false`.\n\t */\n\tpublic get clickable(): boolean {\n\t\treturn this.hasAttribute(STATE_CLICKABLE);\n\t}\n\n\t/**\n\t * Définit si la carte doit être cliquable ou non, ajustant son rôle pour l'accessibilité.\n\t * @param value - `true` pour la rendre cliquable, `false` sinon.\n\t */\n\tpublic set clickable(value: boolean) {\n\t\tif (value) {\n\t\t\tthis.setAttribute(STATE_CLICKABLE, STATE_CLICKABLE);\n\t\t\tsetButtonRole(this);\n\t\t} else {\n\t\t\tthis.removeAttribute(STATE_CLICKABLE);\n\t\t\tremoveButtonRole(this);\n\t\t}\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Initialise une nouvelle instance de `HTMLBnumCardElement`.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Étape de pré-chargement du cycle de vie du composant.\n\t * Met en place les écouteurs d'évènements initiaux.\n\t * @protected\n\t */\n\tprotected _p_preload(): void {\n\t\tthis.#_listenClick();\n\t}\n\n\t/**\n\t * Construit et insère les éléments du DOM interne de la carte.\n\t * @param container - Le conteneur cible (Shadow Root ou HTMLElement) où créer le DOM.\n\t * @protected\n\t */\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\tconst titleData = this._titleData;\n\n\t\tif (titleData.has()) {\n\t\t\tHTMLBnumCardTitle.Create(titleData.text || EMPTY_STRING, {\n\t\t\t\ticon: titleData.icon || null,\n\t\t\t\tlink: titleData.link || null,\n\t\t\t}).appendTo(container.querySelector(`slot[name=\"${SLOT_TITLE}\"]`)!);\n\t\t}\n\n\t\tthis.#_updateDOM();\n\t}\n\n\t/**\n\t * Méthode appelée lors de la modification d'un attribut observé.\n\t * @param name - Le nom de l'attribut ayant changé.\n\t * @param oldVal - La valeur précédente de l'attribut.\n\t * @param newVal - La nouvelle valeur de l'attribut.\n\t * @protected\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void {\n\t\tif (name === STATE_LOADING) {\n\t\t\tthis.trigger(EVENT_LOADING, {\n\t\t\t\toldValue: oldVal,\n\t\t\t\tnewValue: newVal,\n\t\t\t\tcaller: this,\n\t\t\t});\n\t\t}\n\n\t\tthis.#_updateDOM();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Synchronise l'affichage du DOM avec l'état interne actuel du composant.\n\t * @private\n\t */\n\t#_updateDOM(): void {\n\t\tthis._p_clearStates();\n\n\t\tif (this.clickable) this._p_addState(STATE_CLICKABLE);\n\n\t\tif (this.loading) {\n\t\t\tthis._p_addState(STATE_LOADING);\n\n\t\t\tif (!this.#_loadingElement) {\n\t\t\t\tconst div = this.shadowRoot!.querySelector<HTMLElement>(\n\t\t\t\t\t`.${CSS_CLASS_BODY}`,\n\t\t\t\t)!;\n\t\t\t\tdiv.appendChild(this.#_getLoading());\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Instancie et retourne l'élément HTML servant d'indicateur de chargement (spinner).\n\t * @returns Le conteneur HTML du spinner.\n\t * @private\n\t */\n\t#_getLoading(): HTMLElement {\n\t\tif (!this.#_loadingElement) {\n\t\t\tconst loadingDiv = document.createElement('div');\n\t\t\tloadingDiv.classList.add(CSS_CLASS_LOADING);\n\n\t\t\tconst spinner = HTMLBnumIcon.Create(ICON_SPINNER).addClass('loader');\n\t\t\tloadingDiv.appendChild(spinner);\n\n\t\t\tthis.#_loadingElement = loadingDiv;\n\t\t}\n\n\t\treturn this.#_loadingElement;\n\t}\n\n\t/**\n\t * Attache un écouteur sur l'évènement `click` du composant.\n\t * @returns La fonction associée à la gestion du clic.\n\t * @private\n\t */\n\t@Listen('click')\n\t#_listenClick() {\n\t\treturn this.#_handleClick;\n\t}\n\n\t/**\n\t * Traite l'évènement de clic sur la carte si celle-ci est cliquable.\n\t * @param event - L'évènement déclenché par l'utilisateur.\n\t * @private\n\t */\n\t#_handleClick(event: MouseEvent): void {\n\t\tif (this.clickable) {\n\t\t\tthis.trigger(EVENT_CLICK, { originalEvent: event });\n\t\t}\n\t}\n\n\t/**\n\t * Demande une mise à jour ou la réinitialisation du titre via le planificateur.\n\t * @param element - Le nouvel élément titre ou le symbole indiquant une réinitialisation.\n\t * @private\n\t */\n\t#_requestUpdateTitle(element: Element | symbol): void {\n\t\tthis.#_scheduleTitle ??= new Scheduler<Element | symbol>(el =>\n\t\t\tthis.#_updateOrResetTitle(el!),\n\t\t);\n\t\tthis.#_scheduleTitle.schedule(element);\n\t}\n\n\t/**\n\t * Oriente le composant vers une mise à jour ou une réinitialisation du titre.\n\t * @param element - Le nouvel élément ou le symbole de réinitialisation.\n\t * @private\n\t */\n\t#_updateOrResetTitle(element: Element | symbol): void {\n\t\tif (element === SYMBOL_RESET) this.#_resetTitle();\n\t\telse this.#_updateTitle(element as Element);\n\t}\n\n\t/**\n\t * Met à jour le DOM pour remplacer le contenu actuel du slot de titre par le nouvel élément.\n\t * @param element - L'élément à insérer dans le slot de titre.\n\t * @private\n\t */\n\t#_updateTitle(element: Element): void {\n\t\telement.setAttribute('slot', SLOT_TITLE);\n\t\tconst oldTitles = this.querySelectorAll(`[slot=\"${SLOT_TITLE}\"]`);\n\t\toldTitles.forEach(node => node.remove());\n\t\tthis.appendChild(element);\n\t}\n\n\t/**\n\t * Supprime tous les éléments enfants rattachés au slot de titre.\n\t * @private\n\t */\n\t#_resetTitle(): void {\n\t\tconst nodes = this.querySelectorAll(`[slot=\"${SLOT_TITLE}\"]`);\n\t\tnodes.forEach(node => node.remove());\n\t}\n\n\t/**\n\t * Demande une mise à jour ou la réinitialisation du corps de la carte via le planificateur.\n\t * @param element - Le nouvel élément de corps ou le symbole indiquant une réinitialisation.\n\t * @private\n\t */\n\t#_requestUpdateBody(element: Element | symbol): void {\n\t\tthis.#_scheduleBody ??= new Scheduler<Element | symbol>(el =>\n\t\t\tthis.#_updateOrResetBody(el!),\n\t\t);\n\t\tthis.#_scheduleBody.schedule(element);\n\t}\n\n\t/**\n\t * Oriente le composant vers une mise à jour ou une réinitialisation du corps.\n\t * @param element - Le nouvel élément ou le symbole de réinitialisation.\n\t * @private\n\t */\n\t#_updateOrResetBody(element: Element | symbol): void {\n\t\tif (element === SYMBOL_RESET) this.#_resetBody();\n\t\telse this.#_updateBody(element as Element);\n\t}\n\n\t/**\n\t * Met à jour le DOM pour remplacer le contenu du corps de la carte par le nouvel élément.\n\t * @param element - L'élément à insérer dans le corps de la carte.\n\t * @private\n\t */\n\t#_updateBody(element: Element): void {\n\t\telement.removeAttribute('slot');\n\n\t\tconst oldBodyNodes = Array.from(this.childNodes).filter(\n\t\t\tnode =>\n\t\t\t\t(node.nodeType === Node.ELEMENT_NODE &&\n\t\t\t\t\t(node as Element).getAttribute('slot') !== SLOT_TITLE) ||\n\t\t\t\t(node.nodeType === Node.TEXT_NODE &&\n\t\t\t\t\tnode.textContent?.trim() !== EMPTY_STRING),\n\t\t);\n\n\t\toldBodyNodes.forEach(node => node.remove());\n\n\t\tthis.appendChild(element);\n\t}\n\n\t/**\n\t * Supprime tous les éléments enfants appartenant au corps (hors slot de titre).\n\t * @private\n\t */\n\t#_resetBody(): void {\n\t\tconst nodes = Array.from(this.childNodes).filter(\n\t\t\tnode =>\n\t\t\t\t(node.nodeType === Node.ELEMENT_NODE &&\n\t\t\t\t\t(node as Element).getAttribute('slot') !== SLOT_TITLE) ||\n\t\t\t\t(node.nodeType === Node.TEXT_NODE &&\n\t\t\t\t\tnode.textContent?.trim() !== EMPTY_STRING),\n\t\t);\n\n\t\tnodes.forEach(node => node.remove());\n\t}\n\n\t/**\n\t * Demande l'ajout d'un élément supplémentaire dans la carte via le planificateur.\n\t * @param appended - Données de l'élément planifié à ajouter.\n\t * @private\n\t */\n\t#_requestAppendElement(appended: ScheduleElementAppend): void {\n\t\tthis.#_scheduleAppend ??= new Scheduler<ScheduleElementAppend>(el =>\n\t\t\tthis.#_appendElement(el!),\n\t\t);\n\t\tthis.#_scheduleAppend.schedule(appended);\n\t}\n\n\t/**\n\t * Ajoute physiquement un élément planifié au sein de la carte.\n\t * @param appended - Données de l'élément contenant l'élément et son slot potentiel.\n\t * @private\n\t */\n\t#_appendElement(appended: ScheduleElementAppend): void {\n\t\tif (appended.slot) appended.element.setAttribute('slot', appended.slot);\n\t\telse appended.element.removeAttribute('slot');\n\n\t\tthis.appendChild(appended.element);\n\t}\n\t//#endregion Private methods\n\n\t//#region Public methods\n\t/**\n\t * Remplace intégralement le contenu du slot \"title\" par l'élément fourni.\n\t * @param element - Le nouvel élément à insérer comme titre.\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tupdateTitle(element: Element): HTMLBnumCardElement {\n\t\tthis.#_requestUpdateTitle(element);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Remplace intégralement le contenu du corps principal (slot par défaut) par l'élément fourni.\n\t * @param element - Le nouvel élément à insérer dans le corps.\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tupdateBody(element: Element): HTMLBnumCardElement {\n\t\tthis.#_requestUpdateBody(element);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Supprime tous les éléments actuellement insérés dans le slot \"title\".\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tpublic clearTitle(): HTMLBnumCardElement {\n\t\tthis.#_requestUpdateTitle(SYMBOL_RESET);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Supprime tous les éléments actuellement insérés dans le corps principal (hors slot \"title\").\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tpublic clearBody(): HTMLBnumCardElement {\n\t\tthis.#_requestUpdateBody(SYMBOL_RESET);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Ajoute un nouvel élément au sein du slot \"title\", préservant les éléments déjà présents.\n\t * @param element - L'élément à ajouter au titre.\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tpublic appendToTitle(element: Element): HTMLBnumCardElement {\n\t\tthis.#_requestAppendElement(new ScheduleElementAppend(element, SLOT_TITLE));\n\t\treturn this;\n\t}\n\n\t/**\n\t * Ajoute un nouvel élément au sein du corps de la carte, préservant les éléments déjà présents.\n\t * @param element - L'élément à ajouter au corps.\n\t * @returns L'instance courante pour le chaînage d'appels.\n\t */\n\tpublic appendToBody(element: Element): HTMLBnumCardElement {\n\t\tthis.#_requestAppendElement(new ScheduleElementAppend(element));\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Static properties\n\n\t/**\n\t * Instancie une nouvelle `HTMLBnumCardElement` initialisée avec les options spécifiées.\n\t *\n\t * @param options - Objet de configuration de la carte.\n\t * @param options.title - Élément pour le titre de la carte (optionnel).\n\t * @param options.body - Élément pour le corps de la carte (optionnel).\n\t * @param options.clickable - Indique si la carte est cliquable (défaut: `false`).\n\t * @param options.loading - Indique si la carte est en état de chargement (défaut: `false`).\n\t * @returns Une nouvelle instance configurée de l'élément HTML.\n\t */\n\tpublic static override Create({\n\t\ttitle = null,\n\t\tbody = null,\n\t\tclickable = false,\n\t\tloading = false,\n\t}: {\n\t\ttitle?: Nullable<HTMLBnumCardTitle>;\n\t\tbody?: Nullable<Element>;\n\t\tclickable?: boolean;\n\t\tloading?: boolean;\n\t} = {}): HTMLBnumCardElement {\n\t\tconst card = document.createElement(this.TAG) as HTMLBnumCardElement;\n\n\t\tif (title) card.updateTitle(title);\n\t\tif (body) card.updateBody(body);\n\n\t\tif (clickable) card.setAttribute(STATE_CLICKABLE, STATE_CLICKABLE);\n\n\t\tif (loading) card.setAttribute(STATE_LOADING, STATE_LOADING);\n\n\t\treturn card;\n\t}\n\t//#endregion Static properties\n}\n","import BnumElement from '../../components/bnum-element';\nimport { HTMLBnumButton } from '../../components/atoms/button/bnum-button';\n\n/**\n * Définit le rôle du bouton sur l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié en bouton.\n */\nexport { setButtonRole, removeButtonRole };\n\n/**\n * Définit le rôle du bouton sur l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié en bouton.\n */\nfunction setButtonRole(element: BnumElement): BnumElement {\n  return HTMLBnumButton.ToButton(element);\n}\n\n/**\n * Supprime le rôle du bouton et les attributs associés de l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié sans rôle de bouton.\n */\nfunction removeButtonRole(element: BnumElement): BnumElement {\n  if (element.getAttribute('data-set-event') === 'onkeydown') {\n    element.removeAttribute('data-set-event');\n    element.onkeydown = null;\n  }\n\n  element.removeAttribute('role');\n  element.removeAttribute('tabindex');\n\n  return element;\n}\n","/**\n * ID du titre de la carte.\n */\nexport const ID_CARD_TITLE = 'bnum-card-title';\n\n/**\n * ID de l'élément affiché quand il n'y a pas d'événements.\n */\nexport const ID_CARD_ITEM_NO_ELEMENTS = 'no-elements';\n\n/**\n * Nom de l'événement déclenché lorsque les éléments changent.\n */\nexport const CHANGE_EVENT = 'bnum-card-agenda:change';\n\n/**\n * Clé de données pour l'URL.\n */\nexport const DATA_URL = 'url';\n\n/**\n * Attribut pour l'URL des données.\n */\nexport const ATTRIBUTE_DATA_URL = `data-${DATA_URL}`;\n\n/**\n * Attribut pour l'état de chargement.\n */\nexport const ATTRIBUTE_LOADING = 'loading';\n","import BnumElement from 'components/bnum-element';\nimport { OnElementChangedEvent } from './types';\nimport { EVENT_DEFAULT } from 'core/utils/constants/constants';\nimport { CHANGE_EVENT } from './constants';\n\nexport function onElementChangedInitializer(\n\tevent: OnElementChangedEvent,\n\tinstance: BnumElement,\n) {\n\tevent.add(EVENT_DEFAULT, data => {\n\t\tinstance.trigger(CHANGE_EVENT, { detail: data });\n\t});\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumCardElement } from '../card/bnum-card';\nimport { Nullable } from '../../../core/utils/types';\nimport style from './bnum-card-agenda.less';\nimport { HTMLBnumCardList } from '../../molecules/card-list/bnum-card-list';\nimport { HTMLBnumCardItem } from '../../molecules/card-item/bnum-card-item';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport { TAG_CARD_AGENDA } from '../../../core/utils/constants/tags';\nimport { HTMLBnumCardItemAgenda } from '../../molecules/card-item-agenda/bnum-card-item-agenda';\nimport { Attr, Data, Define } from '../../../core/decorators';\nimport { ArrayUtils } from '../../../core/utils/ArrayUtils';\nimport {\n\tATTRIBUTE_DATA_URL,\n\tATTRIBUTE_LOADING,\n\tID_CARD_ITEM_NO_ELEMENTS,\n\tID_CARD_TITLE,\n} from './bnum-card-agenda.internal/constants';\nimport { Listener } from 'core/decorators/listener';\nimport { onElementChangedInitializer } from './bnum-card-agenda.internal/listeners';\nimport { OnElementChangedEvent } from './bnum-card-agenda.internal/types';\nimport { UI } from 'core/decorators/ui';\nimport { RenderFrame } from 'core/decorators/defer';\nimport { Observe } from 'core/decorators/observe';\n\n//#region Global constants\nconst TEXT_LAST_EVENTS = BnumConfig.Get('local_keys')!.last_events!;\nconst TEXT_NO_EVENTS = BnumConfig.Get('local_keys')!.no_events!;\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumCardElement>\n\t\t<HTMLBnumCardTitle id={ID_CARD_TITLE} slot=\"title\" data-icon=\"today\">\n\t\t\t{TEXT_LAST_EVENTS}\n\t\t</HTMLBnumCardTitle>\n\t\t<HTMLBnumCardList>\n\t\t\t<slot></slot>\n\t\t\t<HTMLBnumCardItem id={ID_CARD_ITEM_NO_ELEMENTS} disabled hidden>\n\t\t\t\t{TEXT_NO_EVENTS}\n\t\t\t</HTMLBnumCardItem>\n\t\t</HTMLBnumCardList>\n\t</HTMLBnumCardElement>\n);\n//#endregion Template\n\n/**\n * Organisme qui permet d'afficher simplement une liste d'évènements dans une carte.\n *\n * @structure Avec des éléments\n * <bnum-card-agenda>\n * <bnum-card-item-agenda\n *    data-date=\"2024-01-01\"\n *    data-start-date=\"2024-01-01 08:00:00\"\n *    data-end-date=\"2024-01-01 10:00:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * <bnum-card-item-agenda all-day\n *    data-date=\"2025-11-21\"\n *    data-title=\"Télétravail\"\n *    data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n * </bnum-card-agenda>\n *\n * @structure Sans éléments\n * <bnum-card-agenda>\n * </bnum-card-agenda>\n *\n * @structure Avec une url\n * <bnum-card-agenda data-url=\"#\">\n * </bnum-card-agenda>\n *\n * @slot (default) - Contenu des éléments de type HTMLBnumCardItemAgenda.\n *\n * @attr {string | undefined} (optional) data-url - Ajoute une url au titre. Ne rien mettre pour que l'option \"url\" du titre ne s'active pas.\n * @attr {string | undefined} (optional) loading - Si présent, affiche le mode loading.\n *\n * @event {CustomEvent<HTMLBnumCardItemAgenda[]>} bnum-card-agenda:change - Déclenché lorsque les éléments changent (ajout/suppression).\n *\n * @cssvar {block} --bnum-card-agenda - Définit le display du composant. Par défaut à \"block\".\n */\n@Define({ tag: TAG_CARD_AGENDA, styles: style, template: TEMPLATE })\n@Observe(ATTRIBUTE_LOADING)\nexport class HTMLBnumCardAgenda extends BnumElement {\n\t//#region Private fields\n\t#_isSorting: boolean = false;\n\t#_card: Nullable<HTMLBnumCardElement> = null;\n\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t@UI({\n\t\tcardTitle: `#${ID_CARD_TITLE}`,\n\t\tslot: 'slot',\n\t\tnoElements: `#${ID_CARD_ITEM_NO_ELEMENTS}`,\n\t})\n\taccessor #_ui!: {\n\t\tcardTitle: HTMLBnumCardTitle;\n\t\tslot: HTMLSlotElement;\n\t\tnoElements: HTMLBnumCardItem;\n\t};\n\n\t/**\n\t * Déclenché lorsque les éléments changent (ajout/suppression).\n\t */\n\t@Listener(onElementChangedInitializer)\n\taccessor onElementChanged!: OnElementChangedEvent;\n\n\t@Attr()\n\taccessor loading: boolean = false;\n\n\t@Data() accessor #_url: string = EMPTY_STRING;\n\n\tget #_cardPart(): HTMLBnumCardElement {\n\t\tif (this.#_card === null) {\n\t\t\tthis.#_card =\n\t\t\t\tthis.querySelector?.(HTMLBnumCardElement.TAG) ??\n\t\t\t\tthis.shadowRoot?.querySelector?.(HTMLBnumCardElement.TAG) ??\n\t\t\t\tnull;\n\t\t}\n\t\treturn this.#_card!;\n\t}\n\t//#endregion Getters/Setters\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tprotected _p_attach(): void {\n\t\tif (this.#_url !== EMPTY_STRING) this.#_ui.cardTitle.url = this.#_url;\n\n\t\t// On écoute les changements dans le slot (Items statiques ou ajoutés via JS)\n\t\tthis.#_ui.slot.addEventListener(\n\t\t\t'slotchange',\n\t\t\tthis.#_handleSlotChange.bind(this),\n\t\t);\n\n\t\tthis.#_handleSlotChange();\n\t}\n\n\tprotected _p_update(\n\t\tname: string,\n\t\t_: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tswitch (name) {\n\t\t\tcase ATTRIBUTE_LOADING:\n\t\t\t\tif (newVal === null) this.#_cardPart.removeAttribute(ATTRIBUTE_LOADING);\n\t\t\t\telse\n\t\t\t\t\tthis.#_cardPart.setAttribute(\n\t\t\t\t\t\tATTRIBUTE_LOADING,\n\t\t\t\t\t\tnewVal ?? EMPTY_STRING,\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Ajoute des éléments.\n\t *\n\t * Note: On ajoute simplement au Light DOM. Le slotchange détectera l'ajout et déclenchera le tri.\n\t * @param content Elements à ajouter\n\t */\n\tpublic add(...content: HTMLBnumCardItemAgenda[]): this {\n\t\tthis.append(...content);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Vide le composant.\n\t */\n\tpublic clear(): this {\n\t\tthis.innerHTML = EMPTY_STRING; // Vide le Light DOM\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Gère le tri des éléments.\n\t * Utilise requestAnimationFrame pour ne pas bloquer le thread si beaucoup d'items.\n\t */\n\t#_handleSlotChange(): void {\n\t\tif (this.#_isSorting) return;\n\n\t\tthis.#_sortChildren();\n\t}\n\n\t/**\n\t * Tri les éléments enfants de la liste par date décroissante.\n\t */\n\t@RenderFrame()\n\t#_sortChildren(): void {\n\t\t// Récupérer les éléments assignés au slot\n\t\tconst elements = this.#_ui.slot.assignedElements() as HTMLElement[];\n\n\t\t// Filtrer pour être sûr de ne trier que des événements (sécurité)\n\t\tconst agendaItems = elements.filter(el =>\n\t\t\tel.tagName.toLowerCase().includes(HTMLBnumCardItemAgenda.TAG),\n\t\t) as HTMLBnumCardItemAgenda[];\n\n\t\tif (agendaItems.length === 0) {\n\t\t\tthis.#_ui.noElements.hidden = false;\n\t\t\tthis.#_ui.slot.hidden = true;\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.#_ui.noElements.hidden = true;\n\t\t\tthis.#_ui.slot.hidden = false;\n\t\t}\n\n\t\tif (agendaItems.length < 2) return; // Pas besoin de trier\n\n\t\t// 2. Vérifier si un tri est nécessaire (optimisation)\n\t\tlet isSorted = true;\n\t\tfor (let i = 0; i < agendaItems.length - 1; i++) {\n\t\t\tif (this.#_getDate(agendaItems[i]) < this.#_getDate(agendaItems[i + 1])) {\n\t\t\t\tisSorted = false;\n\t\t\t\tbreak;\n\t\t\t} else if (\n\t\t\t\tthis.#_getDate(agendaItems[i]) === this.#_getDate(agendaItems[i + 1])\n\t\t\t) {\n\t\t\t\t// Même date de base, on regardmailItemse la date de début\n\t\t\t\tif (\n\t\t\t\t\tthis.#_getStartDate(agendaItems[i]) <\n\t\t\t\t\tthis.#_getStartDate(agendaItems[i + 1])\n\t\t\t\t) {\n\t\t\t\t\tisSorted = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (isSorted) return;\n\n\t\tthis.#_isSorting = true; // Verrouiller pour éviter que le déplacement ne relance slotchange\n\n\t\t// Réinsérer dans l'ordre via un Fragment (1 seul Reflow)\n\t\tconst fragment = document.createDocumentFragment();\n\t\tconst sortedItems = ArrayUtils.sortByDatesDescending(\n\t\t\tagendaItems,\n\t\t\tx => this.#_getDate(x),\n\t\t\tx => this.#_getStartDate(x),\n\t\t);\n\n\t\tfragment.append(...sortedItems);\n\t\tthis.appendChild(fragment); // Déplace les éléments existants, ne les recrée pas.\n\n\t\t// Notifier le changement\n\t\tthis.onElementChanged.call(agendaItems);\n\n\t\t// Déverrouiller après que le microtask de mutation soit passé\n\t\tsetTimeout(() => {\n\t\t\tthis.#_isSorting = false;\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Helper pour parser la date de manière robuste\n\t */\n\t#_getDate(item: HTMLBnumCardItemAgenda): number {\n\t\treturn item.baseDate.getTime();\n\t}\n\n\t/**\n\t * Helper pour parser la date de manière robuste\n\t */\n\t#_getStartDate(item: HTMLBnumCardItemAgenda): number {\n\t\treturn item.isAllDay ? this.#_getDate(item) : item.startDate.getTime();\n\t}\n\t//#endregion Private methods\n\n\t//#region Static methods\n\t/**\n\t * Méthode statique pour créer une instance du composant.\n\t * @param param0 Options de création\n\t * @param param0.contents Contenus initiaux à ajouter\n\t * @param param0.url URL du titre\n\t * @returns Nouvelle node HTMLBnumCardAgenda\n\t */\n\tstatic Create({\n\t\tcontents = [],\n\t\turl = EMPTY_STRING,\n\t}: {\n\t\tcontents?: HTMLBnumCardItemAgenda[];\n\t\turl?: string;\n\t} = {}): HTMLBnumCardAgenda {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumCardAgenda;\n\n\t\tif (url !== EMPTY_STRING) node.setAttribute(ATTRIBUTE_DATA_URL, url);\n\t\tif (contents.length > 0) node.add(...contents);\n\n\t\treturn node;\n\t}\n\n\t//#endregion Static methods\n}\n","/**\n * ID du titre de la carte.\n */\nexport const ID_CARD_TITLE = 'bnum-card-title';\n\n/**\n * ID de l'élément affiché quand il n'y a pas de mails.\n */\nexport const ID_CARD_ITEM_NO_ELEMENTS = 'no-elements';\n\n/**\n * Nom de l'événement déclenché lorsque les éléments changent (ajout/suppression).\n */\nexport const CHANGE_EVENT = 'bnum-card-email:change';\n\n/**\n * Clé de données pour l'URL.\n */\nexport const DATA_URL = 'url';\n\n/**\n * Attribut pour l'URL des données.\n */\nexport const ATTRIBUTE_DATA_URL = `data-${DATA_URL}`;\n\n/**\n * Attribut pour l'état de chargement.\n */\nexport const ATTRIBUTE_LOADING = 'loading';\n","import BnumElement from '../../../bnum-element';\nimport { OnElementChangedEvent } from './types';\nimport { EVENT_DEFAULT } from '../../../../core/utils/constants/constants';\nimport { CHANGE_EVENT } from './constants';\n\nexport function onElementChangedInitializer(\n\tevent: OnElementChangedEvent,\n\tinstance: BnumElement,\n) {\n\tevent.add(EVENT_DEFAULT, data => {\n\t\tinstance.trigger(CHANGE_EVENT, { detail: data });\n\t});\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumCardElement } from '../card/bnum-card';\nimport { HTMLBnumCardItemMail } from '../../molecules/card-item-mail/bnum-card-item-mail';\nimport { Nullable } from '../../../core/utils/types';\nimport style from './bnum-card-email.less';\nimport { HTMLBnumCardList } from '../../molecules/card-list/bnum-card-list';\nimport { HTMLBnumCardItem } from '../../molecules/card-item/bnum-card-item';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport { TAG_CARD_EMAIL } from '../../../core/utils/constants/tags';\nimport { Attr, Data, Define } from '../../../core/decorators';\nimport { Observe } from '../../../core/decorators/observe';\nimport { Listener } from '../../../core/decorators/listener';\nimport {\n\tATTRIBUTE_DATA_URL,\n\tATTRIBUTE_LOADING,\n\tID_CARD_ITEM_NO_ELEMENTS,\n\tID_CARD_TITLE,\n} from './bnum-card-email.internal/constants';\nimport { onElementChangedInitializer } from './bnum-card-email.internal/listeners';\nimport {\n\tHTMLBnumCardEmailUi,\n\tOnElementChangedEvent,\n} from './bnum-card-email.internal/types';\nimport { ATTRIBUTE_DATA_DATE } from 'components/molecules/card-item-mail/bnum-card-item-mail.internal/constants';\nimport { UI } from 'core/decorators/ui';\nimport { RenderFrame } from 'core/decorators/defer';\n\n//#region Global constants\nconst TEXT_LAST_MAILS = BnumConfig.Get('local_keys')!.last_mails!;\nconst TEXT_NO_MAILS = BnumConfig.Get('local_keys')!.no_mails!;\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumCardElement>\n\t\t<HTMLBnumCardTitle id={ID_CARD_TITLE} slot=\"title\" data-icon=\"mail\">\n\t\t\t{TEXT_LAST_MAILS}\n\t\t</HTMLBnumCardTitle>\n\t\t<HTMLBnumCardList>\n\t\t\t<slot></slot>\n\t\t\t<HTMLBnumCardItem id={ID_CARD_ITEM_NO_ELEMENTS} disabled hidden>\n\t\t\t\t{TEXT_NO_MAILS}\n\t\t\t</HTMLBnumCardItem>\n\t\t</HTMLBnumCardList>\n\t</HTMLBnumCardElement>\n);\n//#endregion Template\n\n/**\n * Organisme qui permet d'afficher simplement une liste de mails dans une carte.\n *\n * @structure Avec des éléments\n * <bnum-card-email>\n * <bnum-card-item-mail data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n * <bnum-card-item-mail read data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n * <bnum-card-item-mail data-date=\"now\">\n * <span slot=\"subject\">Sujet par défaut</span>\n * <span slot=\"sender\">Expéditeur par défaut</span>\n * </bnum-card-item-mail>\n * </bnum-card-email>\n *\n * @structure Sans éléments\n * <bnum-card-email>\n * </bnum-card-email>\n *\n * @structure Avec une url\n * <bnum-card-email data-url=\"#\">\n * </bnum-card-email>\n *\n * @slot (default) - Contenu des éléments de type HTMLBnumCardItemMail.\n *\n * @attr {string | undefined} (optional) data-url - Ajoute une url au titre. Ne rien mettre pour que l'option \"url\" du titre ne s'active pas.\n * @attr {string | undefined} (optional) loading - Si présent, affiche le mode loading.\n *\n * @event {CustomEvent<HTMLBnumCardItemMail[]>} bnum-card-email:change - Déclenché lorsque les éléments changent (ajout/suppression).\n *\n * @cssvar {block} --bnum-card-email-display - Définit le display du composant. Par défaut à \"block\".\n */\n@Define({ tag: TAG_CARD_EMAIL, styles: style, template: TEMPLATE })\n@Observe(ATTRIBUTE_LOADING)\nexport class HTMLBnumCardEmail extends BnumElement {\n\t//#region Private fields\n\t#_isSorting: boolean = false;\n\t#_card: Nullable<HTMLBnumCardElement> = null;\n\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t@UI({\n\t\tcardTitle: `#${ID_CARD_TITLE}`,\n\t\tslot: 'slot',\n\t\tnoElements: `#${ID_CARD_ITEM_NO_ELEMENTS}`,\n\t})\n\taccessor #_ui!: HTMLBnumCardEmailUi;\n\n\t/**\n\t * Déclenché lorsque les éléments changent (ajout/suppression).\n\t */\n\t@Listener(onElementChangedInitializer)\n\taccessor onElementChanged!: OnElementChangedEvent;\n\n\t@Attr()\n\taccessor loading: boolean = false;\n\n\t@Data() accessor #_url: string = EMPTY_STRING;\n\n\tget #_cardPart(): HTMLBnumCardElement {\n\t\tif (this.#_card === null) {\n\t\t\tthis.#_card =\n\t\t\t\tthis.querySelector?.(HTMLBnumCardElement.TAG) ??\n\t\t\t\tthis.shadowRoot?.querySelector?.(HTMLBnumCardElement.TAG) ??\n\t\t\t\tnull;\n\t\t}\n\t\treturn this.#_card!;\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tprotected _p_attach(): void {\n\t\tif (this.#_url !== EMPTY_STRING) this.#_ui.cardTitle.url = this.#_url;\n\n\t\t// On écoute les changements dans le slot (Items statiques ou ajoutés via JS)\n\t\tthis.#_ui.slot.addEventListener(\n\t\t\t'slotchange',\n\t\t\tthis.#_handleSlotChange.bind(this),\n\t\t);\n\n\t\tthis.#_handleSlotChange();\n\t}\n\n\tprotected _p_update(\n\t\tname: string,\n\t\t_: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tswitch (name) {\n\t\t\tcase ATTRIBUTE_LOADING:\n\t\t\t\tif (newVal === null) this.#_cardPart.removeAttribute(ATTRIBUTE_LOADING);\n\t\t\t\telse\n\t\t\t\t\tthis.#_cardPart.setAttribute(\n\t\t\t\t\t\tATTRIBUTE_LOADING,\n\t\t\t\t\t\tnewVal ?? EMPTY_STRING,\n\t\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Ajoute des éléments.\n\t *\n\t * Note: On ajoute simplement au Light DOM. Le slotchange détectera l'ajout et déclenchera le tri.\n\t * @param content Elements à ajouter\n\t */\n\tpublic add(...content: HTMLBnumCardItemMail[]): this {\n\t\tthis.append(...content);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Vide le composant.\n\t */\n\tpublic clear(): this {\n\t\tthis.innerHTML = EMPTY_STRING; // Vide le Light DOM\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Gère le tri des éléments.\n\t * Utilise requestAnimationFrame pour ne pas bloquer le thread si beaucoup d'items.\n\t */\n\t#_handleSlotChange(): void {\n\t\tif (this.#_isSorting) return;\n\n\t\tthis.#_sortChildren();\n\t}\n\n\t/**\n\t * Tri les éléments enfants de la liste par date décroissante.\n\t */\n\t@RenderFrame()\n\t#_sortChildren(): void {\n\t\t// 1. Récupérer les éléments assignés au slot (Uniquement les Nodes Elements, pas le texte)\n\t\tconst elements = this.#_ui.slot.assignedElements() as HTMLElement[];\n\n\t\t// Filtrer pour être sûr de ne trier que des mails (sécurité)\n\t\tconst mailItems = elements.filter(el =>\n\t\t\tel.tagName.toLowerCase().includes(HTMLBnumCardItemMail.TAG),\n\t\t) as HTMLBnumCardItemMail[];\n\n\t\tif (mailItems.length === 0) {\n\t\t\tthis.#_ui.noElements.hidden = false;\n\t\t\tthis.#_ui.slot.hidden = true;\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis.#_ui.noElements.hidden = true;\n\t\t\tthis.#_ui.slot.hidden = false;\n\t\t}\n\n\t\tif (mailItems.length < 2) return; // Pas besoin de trier\n\n\t\t// 2. Vérifier si un tri est nécessaire (optimisation)\n\t\tlet isSorted = true;\n\t\tfor (let i = 0; i < mailItems.length - 1; i++) {\n\t\t\tif (this.#_getDate(mailItems[i]) < this.#_getDate(mailItems[i + 1])) {\n\t\t\t\tisSorted = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (isSorted) return;\n\n\t\t// 3. Trier en mémoire\n\t\tthis.#_isSorting = true; // Verrouiller pour éviter que le déplacement ne relance slotchange\n\n\t\tmailItems.sort((a, b) => {\n\t\t\t// Tri décroissant (le plus récent en haut)\n\t\t\treturn this.#_getDate(b) - this.#_getDate(a);\n\t\t});\n\n\t\t// 4. Réinsérer dans l'ordre via un Fragment (1 seul Reflow)\n\t\tconst fragment = document.createDocumentFragment();\n\t\tmailItems.forEach(item => fragment.appendChild(item));\n\t\tthis.appendChild(fragment); // Déplace les éléments existants, ne les recrée pas.\n\n\t\t// Notifier le changement\n\t\tthis.onElementChanged.call(mailItems);\n\n\t\t// Déverrouiller après que le microtask de mutation soit passé\n\t\tsetTimeout(() => {\n\t\t\tthis.#_isSorting = false;\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Helper pour parser la date de manière robuste\n\t */\n\t#_getDate(item: HTMLBnumCardItemMail): number {\n\t\tconst dateStr = item.getAttribute(ATTRIBUTE_DATA_DATE);\n\t\tif (!dateStr) return item.date.getTime();\n\t\tif (dateStr === 'now') return Date.now();\n\t\treturn new Date(dateStr).getTime();\n\t}\n\t//#endregion Private methods\n\n\t//#region Static methods\n\t/**\n\t * Méthode statique pour créer une instance du composant.\n\t * @param param0 Options de création\n\t * @param param0.contents Contenus initiaux à ajouter\n\t * @param param0.url URL du titre\n\t * @returns Nouvelle node HTMLBnumCardEmail\n\t */\n\tstatic Create({\n\t\tcontents = [],\n\t\turl = EMPTY_STRING,\n\t}: {\n\t\tcontents?: HTMLBnumCardItemMail[];\n\t\turl?: string;\n\t} = {}): HTMLBnumCardEmail {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumCardEmail;\n\n\t\tif (url !== EMPTY_STRING) node.setAttribute(ATTRIBUTE_DATA_URL, url);\n\t\tif (contents.length > 0) node.add(...contents);\n\n\t\treturn node;\n\t}\n\t//#endregion Static methods\n}\n","export const DATA_BACKGROUND = 'background';\nexport const CLASS_HEADER_CONTAINER = 'bnum-header-container';\nexport const CLASS_HEADER_LEFT = 'header-left';\nexport const CLASS_HEADER_RIGHT = 'header-right';\nexport const CLASS_HEADER_TITLE = 'header-title';\nexport const CLASS_HEADER_CUSTOM = 'header-custom';\nexport const CLASS_HEADER_MODIFIER = 'header-modifier';\nexport const PART_HEADER_CONTAINER = 'header-container';\nexport const PART_HEADER_LEFT = 'header-left';\nexport const PART_HEADER_RIGHT = 'header-right';\nexport const PART_HEADER_TITLE = 'header-title';\nexport const PART_HEADER_CUSTOM = 'header-custom';\nexport const ID_TITLE_TEXT = 'title-text';\nexport const ID_TITLE_CUSTOM = 'title-custom';\nexport const SLOT_NAME_LOGO = 'logo';\nexport const SLOT_NAME_TITLE = 'title';\nexport const SLOT_NAME_ACTIONS = 'actions';\nexport const SLOT_NAME_AVATAR = 'avatar';\nexport const EVENT_BACKGROUND_CHANGED = 'bnum-header:background.changed';\nexport const CSS_VARIABLE_BACKGROUND_IMAGE = '--bnum-header-background-image';\nexport const STATE_WITH_BACKGROUND = 'with-background';\n","import BnumElement from 'components/bnum-element';\nimport { BackgroundChangedEvent } from './types';\nimport { EVENT_DEFAULT } from 'core/utils/constants/constants';\nimport { EVENT_BACKGROUND_CHANGED } from './constants';\n\nexport function onBackgroundChangedInitializer(\n\tevent: BackgroundChangedEvent,\n\tinstance: BnumElement,\n) {\n\tevent.add(EVENT_DEFAULT, newBackground => {\n\t\tinstance.trigger(EVENT_BACKGROUND_CHANGED, { newBackground });\n\t});\n}\n","import { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport style from './bnum-header.less';\nimport { Data, Define } from '../../../core/decorators';\nimport { TAG_HEADER } from '../../../core/utils/constants/tags';\nimport {\n\tCLASS_HEADER_CONTAINER,\n\tCLASS_HEADER_CUSTOM,\n\tCLASS_HEADER_LEFT,\n\tCLASS_HEADER_MODIFIER,\n\tCLASS_HEADER_RIGHT,\n\tCLASS_HEADER_TITLE,\n\tCSS_VARIABLE_BACKGROUND_IMAGE,\n\tDATA_BACKGROUND,\n\tID_TITLE_CUSTOM,\n\tID_TITLE_TEXT,\n\tPART_HEADER_CONTAINER,\n\tPART_HEADER_CUSTOM,\n\tPART_HEADER_LEFT,\n\tPART_HEADER_RIGHT,\n\tPART_HEADER_TITLE,\n\tSLOT_NAME_ACTIONS,\n\tSLOT_NAME_AVATAR,\n\tSLOT_NAME_LOGO,\n\tSLOT_NAME_TITLE,\n\tSTATE_WITH_BACKGROUND,\n} from './bnum-header.internal/constants';\nimport { Listener } from 'core/decorators/listener';\nimport { onBackgroundChangedInitializer } from './bnum-header.internal/listeners';\nimport {\n\tBackgroundChangedEvent,\n\tHTMLBnumHeaderUi,\n} from './bnum-header.internal/types';\nimport { UI } from 'core/decorators/ui';\n\n//#region Types\ntype HTMLBnumHeaderCreateOption = {\n\tbackground?: Nullable<string>;\n};\n//#endregion Types\n\n//#region Template\nconst TEMPLATE = (\n\t<div class={CLASS_HEADER_MODIFIER}>\n\t\t<div part={PART_HEADER_CONTAINER} class={CLASS_HEADER_CONTAINER}>\n\t\t\t<div part={PART_HEADER_LEFT} class={CLASS_HEADER_LEFT}>\n\t\t\t\t<slot name={SLOT_NAME_LOGO}></slot>\n\t\t\t\t<slot name={SLOT_NAME_TITLE}></slot>\n\t\t\t\t<h1\n\t\t\t\t\tpart={PART_HEADER_TITLE}\n\t\t\t\t\tid={ID_TITLE_TEXT}\n\t\t\t\t\tclass={CLASS_HEADER_TITLE}\n\t\t\t\t\thidden\n\t\t\t\t></h1>\n\t\t\t\t<div\n\t\t\t\t\tpart={PART_HEADER_CUSTOM}\n\t\t\t\t\tid={ID_TITLE_CUSTOM}\n\t\t\t\t\tclass={CLASS_HEADER_CUSTOM}\n\t\t\t\t\thidden\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t\t<div part={PART_HEADER_RIGHT} class={CLASS_HEADER_RIGHT}>\n\t\t\t\t<slot name={SLOT_NAME_ACTIONS}></slot>\n\t\t\t\t<slot name={SLOT_NAME_AVATAR}></slot>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n);\n//#endregion Template\n\n/**\n * Composant Header du Bnum\n *\n * @structure Par défaut\n * <bnum-header>\n * <img slot=\"logo\" src=\"assets/bnumloader.svg\" alt=\"Logo du bnum\"/>\n * <h1 slot=\"title\">Accueil</h1>\n *\n * <bnum-secondary-button slot=\"actions\" data-icon=\"add\">Créer</bnum-secondary-button>\n * <bnum-icon-button slot=\"actions\">article</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">help</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">settings</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">notifications</bnum-icon-button>\n *\n * <img slot=\"avatar\" style=\"border-radius: 100%\" src=\"assets/avatar.png\" alt=\"Avatar de remplacement\"></img>\n * </bnum-header>\n *\n * @structure Avec image de fond\n * <bnum-header data-background=\"assets/headerbackground.gif\">\n * <img slot=\"logo\" src=\"assets/bnumloader.svg\" alt=\"Logo du bnum\"/>\n * <h1 slot=\"title\">Accueil</h1>\n *\n * <bnum-secondary-button slot=\"actions\" data-icon=\"add\">Créer</bnum-secondary-button>\n * <bnum-icon-button slot=\"actions\">article</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">help</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">settings</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">notifications</bnum-icon-button>\n *\n * <img slot=\"avatar\" style=\"border-radius: 100%\" src=\"assets/avatar.png\" alt=\"Avatar de remplacement\"></img>\n * </bnum-header>\n *\n * @slot logo - Slot pour le logo\n * @slot title - Slot pour le titre\n * @slot actions - Slot pour les actions\n * @slot avatar - Slot pour l'avatar\n *\n * @state with-background - Actif si une image de fond est définie\n *\n * @attr {string | undefined} (optional) data-background - Met une image de fond par défaut\n * @event {CustomEvent<{newBackground:Nullable<string>}>} bnum-header:background.changed - Événement déclenché lorsque l'image de fond change\n *\n * @cssvar {block} --bnum-header-display - Définit le type d'affichage du header\n * @cssvar {60px} --bnum-header-height - Hauteur du header\n * @cssvar {#f5f6fa} --bnum-header-background-color - Couleur de fond du header\n * @cssvar {1px solid #e5e7eb} --bnum-header-border-bottom - Bordure basse du header\n * @cssvar {8px} --bnum-header-left-gap - Espace à gauche entre les éléments du header\n * @cssvar {24px} --bnum-header-right-gap - Espace à droite entre les éléments du header\n * @cssvar {45px} --bnum-header-logo-height - Hauteur du logo dans le header\n * @cssvar {none} --bnum-header-background-image - Image de fond du header (par défaut aucune)\n * @cssvar {#ffffff} --bnum-header-with-background-color - Couleur du texte sur fond personnalisé\n * @cssvar {#ffffff} --bnum-header-main-action-border-color - Couleur de la bordure du bouton principal sur fond personnalisé\n * @cssvar {#ffffff} --bnum-header-main-action-color - Couleur du texte du bouton principal sur fond personnalisé\n * @cssvar {5px 3px} --bnum-header-background-button-padding - Padding de l'action principale\n * @cssvar {0} --bnum-header-title-margin - Marge du titre\n * @cssvar {1.25rem} --bnum-header-title-font-size - Taille de la police du titre\n */\n@Define({ tag: TAG_HEADER, styles: style, template: TEMPLATE })\nexport class HTMLBnumHeader extends BnumElementInternal {\n\t//#region Private fields\n\t// Scheduler pour éviter le layout thrashing\n\t/**\n\t * Scheduler pour la mise à jour du titre\n\t */\n\t#_scheduleUpdateTitle: Nullable<Scheduler<HTMLElement | string | null>> =\n\t\tnull;\n\t/**\n\t * Scheduler pour la mise à jour de l'image de fond\n\t */\n\t#_scheduleUpdateBackground: Nullable<Scheduler<Nullable<string>>> = null;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t@UI({\n\t\tslotTitle: `slot[name=\"${SLOT_NAME_TITLE}\"]`,\n\t\ttitleText: `#${ID_TITLE_TEXT}`,\n\t\tcustomTitleContainer: `#${ID_TITLE_CUSTOM}`,\n\t})\n\taccessor #_ui!: HTMLBnumHeaderUi;\n\n\t/**\n\t * Evènement du changement d'image de fond\n\t */\n\t@Listener(onBackgroundChangedInitializer)\n\taccessor onBackgroundChanged!: BackgroundChangedEvent;\n\n\t@Data(DATA_BACKGROUND)\n\taccessor imgBackground: Nullable<string> = null;\n\n\t/**\n\t * Scheduler pour la mise à jour de l'image de fond\n\t */\n\tget #_backgroundScheduler(): Scheduler<Nullable<string>> {\n\t\treturn (\n\t\t\tthis.#_scheduleUpdateBackground ??\n\t\t\t(this.#_scheduleUpdateBackground = new Scheduler<Nullable<string>>(val =>\n\t\t\t\tthis.#_updateBackground(val),\n\t\t\t))\n\t\t);\n\t}\n\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * @inheritdoc\n\t */\n\tprotected _p_attach(): void {\n\t\tif (this.imgBackground !== null)\n\t\t\tthis.#_backgroundScheduler.call(this.imgBackground);\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Change le titre dynamiquement.\n\t * @param content Affiche l'élément dans le conteneur dédié.\n\t */\n\tpublic setPageTitle(content: HTMLElement): this;\n\t/**\n\t * Change le titre dynamiquement.\n\t * @param text Met à jour le H1.\n\t */\n\tpublic setPageTitle(text: string): this;\n\t/**\n\t * Change le titre dynamiquement.\n\t * @param element Reset le titre pour afficher le slot par défaut.\n\t */\n\tpublic setPageTitle(element: null): this;\n\t/**\n\t * Change le titre dynamiquement.\n\t *\n\t * @param content\n\t * - String : Met à jour le H1.\n\t * - HTMLElement : Affiche l'élément dans le conteneur dédié.\n\t * - null : Affiche le slot par défaut.\n\t */\n\tpublic setPageTitle(content: HTMLElement | string | null): this {\n\t\t// Initialisation Lazy du scheduler\n\t\t(this.#_scheduleUpdateTitle ??= new Scheduler<HTMLElement | string | null>(\n\t\t\tval => this.#_applyTitleUpdate(val), // On utilise 'val' fourni par le Scheduler\n\t\t)).schedule(content);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Met à jour l'image de fond du header.\n\t * @param urlOrData Interpréte la valeur comme une URL ou une Data URL.\n\t * @returns L'instance courante pour le chaînage.\n\t */\n\tpublic updateBackground(urlOrData: string): this {\n\t\tthis.#_requestBackgroundUpdate(urlOrData);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Supprime l'image de fond du header.\n\t * @returns L'instance courante pour le chaînage.\n\t */\n\tpublic clearBackground(): this {\n\t\tthis.#_requestBackgroundUpdate(null);\n\t\treturn this;\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Exécuté par le Scheduler (au prochain frame ou microtask)\n\t * @param content Contenu à appliquer\n\t */\n\t#_applyTitleUpdate(content: Nullable<HTMLElement | string>): void {\n\t\t// Cas \"Reset\" -> On veut voir le Slot\n\t\tif (!content) {\n\t\t\tthis.#_resetVisibility(true, false, false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Cas \"String\" -> On utilise le H1 natif\n\t\tif (typeof content === 'string') {\n\t\t\t// Optimisation: ne toucher au DOM que si le texte change vraiment\n\t\t\tif (this.#_ui.titleText.textContent !== content) {\n\t\t\t\tthis.#_ui.titleText.textContent = content;\n\t\t\t}\n\t\t\tthis.#_resetVisibility(false, true, false);\n\t\t\treturn;\n\t\t}\n\n\t\t// Cas \"HTMLElement\" -> On injecte dans le conteneur custom\n\t\t// On vide proprement le conteneur avant d'ajouter le nouvel élément\n\t\tthis.#_ui.customTitleContainer.replaceChildren(content);\n\t\tthis.#_resetVisibility(false, false, true);\n\t}\n\n\t/**\n\t * Helper pour gérer la visibilité exclusive des 3 zones (Slot, H1, Custom)\n\t * Utilise l'attribut 'hidden' standard HTML5\n\t * @param showSlot Affiche le slot par défaut\n\t * @param showText Affiche le H1\n\t * @param showCustom Affiche le conteneur custom\n\t */\n\t#_resetVisibility(\n\t\tshowSlot: boolean,\n\t\tshowText: boolean,\n\t\tshowCustom: boolean,\n\t): void {\n\t\tif (this.#_ui.slotTitle) this.#_ui.slotTitle.hidden = !showSlot;\n\t\tif (this.#_ui.titleText) this.#_ui.titleText.hidden = !showText;\n\t\tif (this.#_ui.customTitleContainer)\n\t\t\tthis.#_ui.customTitleContainer.hidden = !showCustom;\n\t}\n\n\t/**\n\t * Planifie la mise à jour de l'image de fond\n\t * @param value Nouvelle URL de l'image de fond, ou null pour la supprimer\n\t */\n\t#_requestBackgroundUpdate(value: Nullable<string>): void {\n\t\tthis.#_backgroundScheduler.schedule(value);\n\t}\n\n\t/**\n\t * Met à jour l'image de fond du header\n\t * @param value Nouvelle URL de l'image de fond, ou null pour la supprimer\n\t */\n\t#_updateBackground(value: Nullable<string>): void {\n\t\tif (value) {\n\t\t\tthis.style.setProperty(CSS_VARIABLE_BACKGROUND_IMAGE, `url(${value})`);\n\t\t\tthis._p_addState(STATE_WITH_BACKGROUND);\n\t\t} else {\n\t\t\tthis.style.removeProperty(CSS_VARIABLE_BACKGROUND_IMAGE);\n\t\t\tthis._p_removeState(STATE_WITH_BACKGROUND);\n\t\t}\n\n\t\tthis.onBackgroundChanged.call(value);\n\t}\n\t//#endregion Private methods\n\n\t//#region Static methods\n\t/**\n\t * Génère un nouvel élément HTMLBnumHeader\n\t * @returns Element créé\n\t */\n\tstatic Create({\n\t\tbackground = null,\n\t}: HTMLBnumHeaderCreateOption = {}): HTMLBnumHeader {\n\t\treturn (document.createElement(this.TAG) as HTMLBnumHeader).condAttr(\n\t\t\tbackground !== null,\n\t\t\t`data-${DATA_BACKGROUND}`,\n\t\t\tbackground!,\n\t\t);\n\t}\n\t//#endregion Static methods\n}\n","import { Listen } from 'core/decorators/listen';\nimport { Define, Light, SetAttrs } from '../../../core/decorators';\nimport Log from '../../../core/utils/Log';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { HTMLBnumFolder } from '../../molecules/folder/bnum-folder';\nimport { TAG_TREE } from 'core/utils/constants/tags';\n\n//#region Global Constants\nconst ATTR_SELECTED = 'is-selected';\nconst ATTR_COLLAPSED = 'is-collapsed';\nconst ROLE_ITEM = '[role=\"treeitem\"]';\n//#endregion Global Constants\n\n/**\n * Webcomposant représentant un arbre.\n */\n@Define({ tag: TAG_TREE })\n@Light()\nexport class HTMLBnumTree extends BnumElementInternal {\n\t//#region Private Fields\n\t#_selectedItem: HTMLElement | null = null;\n\t#_focusedItem: HTMLElement | null = null;\n\t//#endregion Private Fields\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t@SetAttrs({\n\t\trole: 'tree',\n\t\ttabindex: '0',\n\t})\n\tprotected _p_attach(): void {\n\t\tsuper._p_attach();\n\n\t\tif (!this.attr('aria-label') && !this.attr('aria-labellerby')) {\n\t\t\tLog.warn(\n\t\t\t\t'HTMLBnumTree',\n\t\t\t\t\"Un arbre doit avoir un attribut aria-label ou aria-labelledby pour des raisons d'accessibilité.\",\n\t\t\t\t'Un texte par défaut a été ajouté.',\n\t\t\t);\n\n\t\t\tthis.attr('aria-label', 'Arbre perdu dans la forêt');\n\t\t}\n\n\t\tthis.#_initListeners().#_initializeRovingTabindex();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public Methods\n\t/**\n\t * Méthode publique pour sélectionner un item programmatiquement\n\t * @param item L'élément à sélectionner\n\t */\n\tpublic SelectItem(item: HTMLElement): void {\n\t\t// 1. Désélection de l'ancien (O(1))\n\t\tif (this.#_selectedItem && this.#_selectedItem !== item) {\n\t\t\tthis.#_selectedItem.setAttribute(ATTR_SELECTED, 'false');\n\t\t} else if (!this.#_selectedItem) {\n\t\t\t// Si aucun élément n'était sélectionné auparavant\n\t\t\tthis.querySelectorAll(`[${ATTR_SELECTED}=\"true\"]`).forEach(el => {\n\t\t\t\tel.setAttribute(ATTR_SELECTED, 'false');\n\t\t\t});\n\t\t}\n\t\t// 2. Sélection du nouveau\n\t\titem.setAttribute(ATTR_SELECTED, 'true');\n\t\tthis.#_selectedItem = item;\n\n\t\t// 3. Mise à jour du focus clavier (Roving Tabindex)\n\t\tthis.#_updateFocus(item);\n\n\t\t// 4. Notification pour le reste de l'application\n\t\tthis.trigger('bnum-tree:change', { item });\n\t}\n\n\t/**\n\t * Ajoute des nodes à l'arbre.\n\t *\n\t * Les nodes de type texte sont enveloppés dans un span avec le rôle treeitem.\n\t *\n\t * Les éléments HTML qui n'ont pas le rôle treeitem se voient attribuer ce rôle.\n\t * @param nodes Nodes à ajouter.\n\t * @returns L'instance courante.\n\t */\n\tappend(...nodes: (Node | string)[]): this {\n\t\tconst arrayOfNodes = [];\n\t\tfor (const node of nodes) {\n\t\t\tif (typeof node === 'string') {\n\t\t\t\tLog.warn(\n\t\t\t\t\t'HTMLBnumTree',\n\t\t\t\t\t\"L'ajout direct de texte dans un arbre n'est pas autorisé. L'élément est envellopper dans un span !.\",\n\t\t\t\t);\n\t\t\t\tarrayOfNodes.push(\n\t\t\t\t\tthis._p_createSpan({ child: node, attributes: { role: 'treeitem' } }),\n\t\t\t\t);\n\t\t\t} else if (\n\t\t\t\tnode instanceof HTMLElement &&\n\t\t\t\tnode.getAttribute('role') === 'group'\n\t\t\t) {\n\t\t\t\tarrayOfNodes.push(node);\n\t\t\t} else if (\n\t\t\t\tnode instanceof HTMLElement &&\n\t\t\t\tnode.getAttribute('role') !== 'treeitem'\n\t\t\t) {\n\t\t\t\tnode.setAttribute('role', 'treeitem');\n\t\t\t\tarrayOfNodes.push(node);\n\t\t\t}\n\t\t}\n\n\t\tsuper.append(...arrayOfNodes);\n\t\treturn this;\n\t}\n\n\t/**\n\t * Ajoute une node brute à l'arbre.\n\t * @param node Node à ajouter.\n\t * @returns Node ajoutée.\n\t */\n\tappendChild<T extends Node>(node: T): T {\n\t\treturn super.appendChild(node);\n\t}\n\t//#endregion Public Methods\n\n\t//#region Private Methods\n\t/**\n\t * Initialise le focus : seul le premier élément est tabulable.\n\t */\n\t#_initializeRovingTabindex(): void {\n\t\tconst items = this.#_getAllItems();\n\t\tif (items.length === 0) return;\n\n\t\tconst selected = items.find(i => i.getAttribute(ATTR_SELECTED) === 'true');\n\t\titems.forEach(i => i.setAttribute('tabindex', '-1'));\n\n\t\tconst initial = selected || items[0];\n\t\tinitial.setAttribute('tabindex', '0');\n\t\tthis.#_focusedItem = initial;\n\t}\n\n\t/**\n\t * Gestionnaire de sélection générique\n\t * @param e Événement de clic\n\t */\n\t#_handleSelection(e: Event): void {\n\t\t// On cherche l'élément treeitem le plus proche de la cible du clic\n\t\tconst target = (e.target as HTMLElement).closest(ROLE_ITEM) as HTMLElement;\n\n\t\tif (!target || target.getAttribute('is-virtual') === 'true') return;\n\n\t\tthis.SelectItem(target);\n\t}\n\n\t#_initListeners() {\n\t\tthis.#_listenKeyDown();\n\t\tthis.#_listenClick();\n\t\treturn this;\n\t}\n\n\t@Listen('keydown')\n\t#_listenKeyDown() {\n\t\treturn this.#_handleKeyDown;\n\t}\n\n\t#_listenClick() {\n\t\treturn this.#_handleSelection;\n\t}\n\n\t#_handleKeyDown(e: KeyboardEvent): void {\n\t\tconst current = this.#_focusedItem;\n\t\tif (!current) return;\n\n\t\tconst visibleItems = this.#_getVisibleItems();\n\t\tconst index = visibleItems.indexOf(current);\n\t\tlet next: HTMLElement | null = null;\n\n\t\tswitch (e.key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\te.preventDefault();\n\t\t\t\tnext = visibleItems[index + 1] || null;\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowUp':\n\t\t\t\te.preventDefault();\n\t\t\t\tnext = visibleItems[index - 1] || null;\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowRight':\n\t\t\t\te.preventDefault();\n\t\t\t\t// Si l'élément est repliable\n\t\t\t\tif (current.hasAttribute(ATTR_COLLAPSED)) {\n\t\t\t\t\tif (current.getAttribute(ATTR_COLLAPSED) === 'true') {\n\t\t\t\t\t\tcurrent.setAttribute(ATTR_COLLAPSED, 'false');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = visibleItems[index + 1] || null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'ArrowLeft':\n\t\t\t\te.preventDefault();\n\t\t\t\tif (current.getAttribute(ATTR_COLLAPSED) === 'false') {\n\t\t\t\t\tcurrent.setAttribute(ATTR_COLLAPSED, 'true');\n\t\t\t\t} else {\n\t\t\t\t\tconst parent = current.parentElement?.closest(\n\t\t\t\t\t\tROLE_ITEM,\n\t\t\t\t\t) as HTMLElement;\n\t\t\t\t\tif (parent) next = parent;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'Home':\n\t\t\t\te.preventDefault();\n\t\t\t\tnext = visibleItems[0];\n\t\t\t\tbreak;\n\t\t\tcase 'End':\n\t\t\t\te.preventDefault();\n\t\t\t\tnext = visibleItems[visibleItems.length - 1];\n\t\t\t\tbreak;\n\t\t\tcase 'Enter':\n\t\t\tcase ' ':\n\t\t\t\te.preventDefault();\n\t\t\t\tcurrent.click();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (next) this.#_updateFocus(next);\n\t}\n\n\t#_updateFocus(target: HTMLElement): void {\n\t\tif (this.#_focusedItem) {\n\t\t\tthis.#_focusedItem.setAttribute('tabindex', '-1');\n\t\t}\n\t\ttarget.setAttribute('tabindex', '0');\n\t\ttarget.focus();\n\t\tthis.#_focusedItem = target;\n\t}\n\n\t#_getAllItems(): HTMLElement[] {\n\t\treturn Array.from(\n\t\t\tthis.querySelectorAll(\n\t\t\t\t`${ROLE_ITEM}, bnum-tree-item, ${HTMLBnumFolder.TAG}`,\n\t\t\t),\n\t\t) as HTMLElement[];\n\t}\n\n\t#_getVisibleItems(): HTMLElement[] {\n\t\treturn this.#_getAllItems().filter(item => {\n\t\t\tlet parent = item.parentElement?.closest(ROLE_ITEM) as HTMLElement;\n\t\t\twhile (parent) {\n\t\t\t\tif (parent.getAttribute(ATTR_COLLAPSED) === 'true') return false;\n\t\t\t\tparent = parent.parentElement?.closest(ROLE_ITEM) as HTMLElement;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t}\n\t//#endregion Private Methods\n}\n","import { TAG_COLUMN } from '../../../../core/utils/constants/tags';\n\n/**\n * Nom de l'attribut pour le type de colonne.\n */\nexport const ATTR_TYPE = 'type';\n\n/**\n * Valeur par défaut pour le type de colonne.\n */\nexport const DEFAULT_COLUMN_TYPE = 'default';\n\n/**\n * Préfixe commun pour les classes CSS de la colonne.\n */\nconst CLASS_PREFIX = TAG_COLUMN;\n\n/**\n * Classe CSS pour l'en-tête de la colonne.\n */\nconst CLASS_HEADER = `${CLASS_PREFIX}__header` as const;\n\n/**\n * Classe CSS \"legacy\" pour l'en-tête (compatibilité).\n */\nconst CLASS_RC_HEADER = 'header';\n\n/**\n * Ancienne classe CSS pour l'en-tête (pour rétrocompatibilité).\n */\nconst CLASS_RC_HEADER_OLD = 'old-header' as const;\n\n/**\n * Classe CSS pour le corps de la colonne.\n */\nconst CLASS_BODY = `${CLASS_PREFIX}__body` as const;\n\n/**\n * Classe CSS pour le pied de page de la colonne.\n */\nconst CLASS_FOOTER = `${CLASS_PREFIX}__footer` as const;\n\n/**\n * Classe CSS \"legacy\" pour le pied de page (compatibilité).\n */\nconst CLASS_RC_FOOTER = 'footer';\n\n/**\n * Classe CSS indiquant qu'un élément provient d'un slot.\n */\nconst CLASS_FROM_SLOT = 'from-slot';\n\n/**\n * Préfixe pour les classes CSS de contenu.\n */\nconst CLASS_CONTENT_PREFIX = CLASS_PREFIX;\n\n/**\n * Suffixe pour les classes CSS de contenu.\n */\nconst CLASS_CONTENT_POSTFIX = 'content';\n\n/**\n * Classe CSS pour le contenu de l'en-tête.\n */\nconst CLASS_CONTENT_HEADER =\n\t`${CLASS_CONTENT_PREFIX}__header__${CLASS_CONTENT_POSTFIX}` as const;\n\n/**\n * Classe CSS pour le contenu du corps.\n */\nconst CLASS_CONTENT_BODY =\n\t`${CLASS_CONTENT_PREFIX}__body__${CLASS_CONTENT_POSTFIX}` as const;\n\n/**\n * Classe CSS pour le contenu du pied de page.\n */\nconst CLASS_CONTENT_FOOTER =\n\t`${CLASS_CONTENT_PREFIX}__footer__${CLASS_CONTENT_POSTFIX}` as const;\n\n/**\n * Nom du slot pour l'en-tête.\n */\nconst SLOT_HEADER = 'header';\n\n/**\n * Nom du slot pour le pied de page.\n */\nconst SLOT_FOOTER = 'footer';\n\n/**\n * Nom de l'attribut de données pour conserver le corps.\n */\nexport const DATA_KEEP_BODY = 'keep-body';\n\n/**\n * Regroupe les différentes classes CSS utilisées par le composant.\n */\nexport const CLASSES = {\n\tHOST: TAG_COLUMN,\n\tHEADER: {\n\t\tMAIN: CLASS_HEADER,\n\t\tRC: CLASS_RC_HEADER,\n\t\tOLD: CLASS_RC_HEADER_OLD,\n\t},\n\tBODY: CLASS_BODY,\n\tFOOTER: {\n\t\tMAIN: CLASS_FOOTER,\n\t\tRC: CLASS_RC_FOOTER,\n\t},\n\tCONTENT_PREFIX: TAG_COLUMN,\n\tFROM_SLOT: CLASS_FROM_SLOT,\n\tCONTENT: {\n\t\tHEADER: CLASS_CONTENT_HEADER,\n\t\tBODY: CLASS_CONTENT_BODY,\n\t\tFOOTER: CLASS_CONTENT_FOOTER,\n\t},\n} as const;\n\n/**\n * Regroupe les noms de slots utilisés.\n */\nexport const SLOTS = {\n\tHEADER: SLOT_HEADER,\n\tFOOTER: SLOT_FOOTER,\n} as const;\n\n/**\n * Regroupe les noms d'attributs utilisés.\n */\nexport const ATTRIBUTES = {\n\tTYPE: ATTR_TYPE,\n\tDATA: {\n\t\tKEEP_BODY: DATA_KEEP_BODY,\n\t},\n} as const;\n","import { Observe } from 'core/decorators/observe';\nimport { Define, Light } from '../../../core/decorators';\nimport { TAG_COLUMN } from '../../../core/utils/constants/tags';\nimport { Nullable, ValueOf } from '../../../core/utils/types';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport {\n\tATTRIBUTES,\n\tCLASSES,\n\tDEFAULT_COLUMN_TYPE,\n\tSLOTS,\n} from './bnum-column.internal/constants';\n\n//#region Types\n/**\n * Constantes représentant les slots possibles d'une colonne.\n */\nexport const ColumnSlot = {\n\tHEADER: 'header',\n\tFOOTER: 'footer',\n\tBODY: 'body',\n} as const;\n\n/**\n * Type représentant les slots possibles d'une colonne.\n * - 'header' : pour l'en-tête\n * - 'body' : pour le corps\n * - 'footer' : pour le pied de page\n */\nexport type ColumnSlot = ValueOf<typeof ColumnSlot>;\n//#endregion Types\n\n/**\n *  Permet de structurer une colonne avec un en-tête, un corps et un pied de page.\n *\n * @structure Colonne\n * <bnum-column>\n *  <div slot=\"header\">En-tête de la colonne</div>\n *   <div>Contenu principal de la colonne</div>\n *  <div slot=\"footer\">Pied de page de la colonne</div>\n * </bnum-column>\n *\n * @attr {string} (optional) (default: 'default') type - Le type de colonne (ex: \"sidebar\", \"main\", \"tools\")\n */\n@Define({ tag: TAG_COLUMN })\n@Light()\n@Observe(ATTRIBUTES.TYPE)\nexport class HTMLBnumColumn extends BnumElement {\n\t//#region Getters/Setters\n\t/**\n\t * Permet de définir le type de colonne (ex: \"sidebar\", \"main\", \"tools\")\n\t * Utile pour le CSS qui va définir la largeur\n\t */\n\tget type(): string {\n\t\treturn this.getAttribute(ATTRIBUTES.TYPE) || DEFAULT_COLUMN_TYPE;\n\t}\n\n\t/**\n\t * Indique si le corps de la colonne doit être conservé lors de certaines opérations.\n\t *\n\t * Rappel: data- ne sert qu'à stocker des informations avant la création du composant.\n\t */\n\tget #_keepBody(): boolean {\n\t\treturn this.data(ATTRIBUTES.DATA.KEEP_BODY) === 'true';\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region LifeCycle\n\n\t/**\n\t * Constructeur de la colonne Bnum.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Logique de rendu Light DOM\n\t * On récupère les enfants existants et on les réorganise.\n\t * @param container Le conteneur dans lequel injecter le DOM reconstruit\n\t * @protected\n\t */\n\tprotected _p_buildDOM(container: CustomDom): void {\n\t\t// Sauvegarde des enfants actuels\n\t\tconst originalChildren = Array.from(this.childNodes);\n\n\t\t// Fragment temporaire pour construire le DOM avant injection\n\t\tconst fragment = document.createDocumentFragment();\n\n\t\t// Création des conteneurs\n\t\tconst [headerContainer, bodyContainer, footerContainer] =\n\t\t\tthis._p_createDivs(\n\t\t\t\t{\n\t\t\t\t\tclasses: [CLASSES.HEADER.MAIN, CLASSES.HEADER.RC],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tclasses: [CLASSES.BODY],\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tclasses: [CLASSES.FOOTER.MAIN, CLASSES.FOOTER.RC],\n\t\t\t\t},\n\t\t\t);\n\n\t\t// Distribution des enfants (Slotting manuel)\n\t\tlet hasHeader = false;\n\t\tlet hasFooter = false;\n\n\t\tfor (const node of originalChildren) {\n\t\t\t// Si c'est un noeud texte vide, on ignore\n\t\t\tif (node.nodeType === Node.TEXT_NODE) {\n\t\t\t\tif (node.textContent?.trim()) bodyContainer.appendChild(node);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst nodeElement: Nullable<HTMLElement> =\n\t\t\t\tnode.nodeType === Node.ELEMENT_NODE ? (node as HTMLElement) : null;\n\n\t\t\tif (!nodeElement) continue;\n\n\t\t\tconst slotName = nodeElement.getAttribute\n\t\t\t\t? nodeElement.getAttribute('slot')\n\t\t\t\t: null;\n\n\t\t\tswitch (slotName) {\n\t\t\t\tcase SLOTS.HEADER:\n\t\t\t\t\tthis.#_processNode(nodeElement, CLASSES.CONTENT.HEADER);\n\t\t\t\t\theaderContainer.appendChild(node);\n\n\t\t\t\t\tif (!hasHeader) hasHeader = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase SLOTS.FOOTER:\n\t\t\t\t\tthis.#_processNode(nodeElement, CLASSES.CONTENT.FOOTER);\n\t\t\t\t\tfooterContainer.appendChild(node);\n\n\t\t\t\t\tif (!hasFooter) hasFooter = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.#_processNode(nodeElement, CLASSES.CONTENT.BODY);\n\t\t\t\t\tbodyContainer.appendChild(node);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Nettoyage du container principal\n\t\twhile (container.firstChild) {\n\t\t\tcontainer.removeChild(container.firstChild);\n\t\t}\n\n\t\t// Ajout des classes principales\n\t\tthis.classList.add(CLASSES.HOST, `${CLASSES.CONTENT_PREFIX}--${this.type}`);\n\n\t\t// Injection conditionnelle dans le DOM\n\t\tif (hasHeader) fragment.appendChild(headerContainer);\n\n\t\tif (this.#_keepBody) fragment.appendChild(bodyContainer);\n\t\telse fragment.append(...Array.from(bodyContainer.childNodes));\n\n\t\tif (hasFooter) fragment.appendChild(footerContainer);\n\n\t\tcontainer.appendChild(fragment);\n\t}\n\n\t/**\n\t * Reactivity for Type attribute change\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: Nullable<string>,\n\t\tnewVal: Nullable<string>,\n\t): void {\n\t\tif (oldVal === newVal) return;\n\n\t\tif (name === ATTRIBUTES.TYPE && this.alreadyLoaded) {\n\t\t\tif (oldVal) this.classList.remove(`${CLASSES.CONTENT_PREFIX}--${oldVal}`);\n\t\t\tif (newVal) this.classList.add(`${CLASSES.CONTENT_PREFIX}--${newVal}`);\n\t\t}\n\t}\n\n\t//#endregion LifeCycle\n\n\t//#region Méthodes privées\n\t/**\n\t * Traite un élément enfant : supprime l'attribut slot, ajoute les classes CSS nécessaires,\n\t * et gère la rétrocompatibilité des classes \"header\".\n\t * @param {HTMLElement} element L'élément à traiter\n\t * @param {string} specificClass Classe CSS spécifique à ajouter\n\t * @private\n\t */\n\t#_processNode(element: HTMLElement, specificClass: string): void {\n\t\telement.removeAttribute('slot');\n\t\telement.classList.add(specificClass, CLASSES.FROM_SLOT);\n\n\t\t// Gestion legacy \"header\" class duplication\n\t\tif (element.classList.contains(CLASSES.HEADER.RC)) {\n\t\t\telement.classList.remove(CLASSES.HEADER.RC);\n\t\t\telement.classList.add(CLASSES.HEADER.OLD);\n\t\t}\n\t}\n\t//#endregion Méthodes privées\n}\n","// #region Core & Configuration\nimport { BnumConfigOptions } from '../core/utils/constants/config';\nimport { BnumConfig } from '../core/utils/BnumConfig';\nimport BnumElement from '../components/bnum-element';\nimport Log from '../core/utils/Log';\nimport RotomecaDocument, {\n\tRotomecaCssProperty,\n\tRotomecaCssRule,\n} from '@rotomeca/document-utils';\n\n// Barrel Exports (Générés par le script)\nexport * from '../components/atoms';\nexport * from '../components/molecules';\nexport * from '../components/organisms';\nexport * from '../components/template';\n\n//#endregion Core & Configuration\n\n// #region Global Initialization\ndeclare global {\n\tinterface Window {\n\t\tDsBnumConfig?: Partial<BnumConfigOptions>;\n\t}\n}\n\nif (typeof window !== 'undefined' && window.DsBnumConfig) {\n\tBnumConfig.Initialize(window.DsBnumConfig).tapError(error => {\n\t\tLog.error(\n\t\t\t'design-system-bnum',\n\t\t\t\"Erreur lors de l'initialisation de la configuration globale :\",\n\t\t\terror,\n\t\t);\n\t});\n}\n// #endregion Global Initialization\n\n// Exports manuels spécifiques\nexport {\n\tBnumConfig as Config,\n\tBnumElement,\n\tRotomecaDocument as DsDocument,\n\tRotomecaCssProperty as DsCssProperty,\n\tRotomecaCssRule as DsCssRule,\n};\n","import JsEvent from \"@rotomeca/event\";\nimport { Action, Nullable } from \"./utils\";\nimport { EMPTY_STRING } from \"@rotomeca/utils\";\n\n/**\n * Représente une propriété CSS (nom, valeur, important).\n * Permet de notifier les changements de valeur.\n */\nexport default class RotomecaCssProperty {\n  /**\n   * Nom de la propriété CSS.\n   * @private\n   */\n  #_name: string;\n  /**\n   * Valeur de la propriété CSS.\n   * @private\n   */\n  #_value: string;\n  /**\n   * Indique si la propriété est !important.\n   * @private\n   */\n  #_important: boolean;\n\n  /**\n   * Gestionnaire d'événements pour les changements de la propriété.\n   * @private\n   */\n  #_listeners: Nullable<JsEvent<Action>> = null;\n  /**\n   * Événement déclenché lors d'une modification de la propriété.\n   */\n  public get event(): JsEvent<Action> {\n    return (this.#_listeners ??= new JsEvent<Action>());\n  }\n\n  /**\n   * @param name Nom de la propriété CSS.\n   * @param value Valeur de la propriété CSS.\n   * @param important Indique si la propriété est !important.\n   */\n  constructor(name: string, value: string, important: boolean = false) {\n    this.#_name = name;\n    this.#_value = value;\n    this.#_important = important;\n  }\n\n  /**\n   * Modifie la valeur de la propriété CSS.\n   */\n  public set value(value: string) {\n    if (this.#_value !== value) {\n      this.#_value = value;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Modifie l'état important de la propriété CSS.\n   */\n  public set important(important: boolean) {\n    if (this.#_important !== important) {\n      this.#_important = important;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Modifie le nom de la propriété CSS.\n   */\n  public set name(name: string) {\n    if (this.#_name !== name) {\n      this.#_name = name;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Retourne la valeur de la propriété CSS.\n   */\n  public get value(): string {\n    return this.#_value;\n  }\n\n  /**\n   * Retourne le nom de la propriété CSS.\n   */\n  public get name(): string {\n    return this.#_name;\n  }\n\n  /**\n   * Retourne si la propriété est !important.\n   */\n  public get important(): boolean {\n    return this.#_important;\n  }\n\n  /**\n   * Retourne la propriété CSS sous forme de chaîne.\n   */\n  toString(): string {\n    return `${this.#_name}: ${this.#_value}${this.#_important ? ' !important' : EMPTY_STRING};`;\n  }\n\n  /**\n   * Notifie les listeners qu'une modification a eu lieu.\n   * @private\n   */\n  #_notify(): void {\n    if (this.#_listeners) this.#_listeners.call();\n  }\n}","import JsEvent from \"@rotomeca/event\";\nimport RotomecaCssProperty from \"./RotomecaCssProperty\";\nimport { Action, Nullable } from \"./utils\";\n\n/**\n * Représente une règle CSS composée d'un sélecteur et de propriétés.\n * Permet d'ajouter ou de retirer dynamiquement des propriétés.\n */\nexport default class RotomecaCssRule {\n  /**\n   * Sélecteur CSS de la règle.\n   * @private\n   */\n  #_selectorText: string;\n  /**\n   * Liste des propriétés CSS associées à la règle.\n   * @private\n   */\n  #_properties: RotomecaCssProperty[];\n  /**\n   * Gestionnaire d'événements pour les changements de la règle.\n   * @private\n   */\n  #_onUpdate: Nullable<JsEvent<Action>> = null;\n\n  /**\n   * Événement déclenché lors d'une modification de la règle.\n   */\n  public get onUpdate(): JsEvent<Action> {\n    return (this.#_onUpdate ??= new JsEvent<Action>());\n  }\n  /**\n   * @param selectorText Sélecteur CSS de la règle.\n   * @param args Propriétés CSS de la règle.\n   */\n  constructor(selectorText: string, ...args: RotomecaCssProperty[]) {\n    this.#_selectorText = selectorText;\n    this.#_properties = args;\n\n    for (const prop of this.#_properties) {\n      prop.event.push(() => this.#_notifyParent());\n    }\n  }\n\n  /**\n   * Retourne le sélecteur CSS de la règle.\n   */\n  get selectorText(): string {\n    return this.#_selectorText;\n  }\n\n  /**\n   * Ajoute une propriété à la règle CSS.\n   * @param prop Propriété à ajouter.\n   */\n  public addProperty(prop: RotomecaCssProperty) {\n    this.#_properties.push(prop);\n    prop.event.push(() => this.#_notifyParent());\n    this.#_notifyParent();\n\n    return this;\n  }\n\n  /**\n   * Retourne une propriété de la règle CSS par son index.\n   * @param index Index de la propriété à récupérer.\n   */\n  public get(index: number): RotomecaCssProperty | undefined {\n    return this.#_properties[index];\n  }\n\n  /**\n   * Supprime une propriété de la règle CSS par son nom.\n   * @param propName Nom de la propriété à supprimer.\n   * @param options all: supprime toutes les occurrences si true.\n   */\n  public removeProperty(\n    propName: string,\n    { all = false }: { all?: boolean } = {},\n  ) {\n    let stop: boolean = false;\n    this.#_properties = this.#_properties.filter((prop) => {\n      if (stop) return true;\n      if (prop.name === propName) {\n        if (!all) stop = true;\n        return false;\n      }\n      return true;\n    });\n\n    this.#_notifyParent();\n    return this;\n  }\n\n  /**\n   * Retourne la règle CSS sous forme de chaîne.\n   */\n  toString(): string {\n    const props = this.#_properties\n      .map((prop) => `  ${prop.toString()}`)\n      .join('\\n');\n    return `${this.#_selectorText} {\\n${props}\\n}`;\n  }\n\n  /**\n   * Notifie les listeners parents qu'une modification a eu lieu.\n   * @private\n   */\n  #_notifyParent() {\n    if (this.#_onUpdate && this.#_onUpdate.count() > 0) this.#_onUpdate.call();\n  }\n}"],"names":["__esDecorate","ctor","descriptorIn","decorators","contextIn","initializers","extraInitializers","accept","f","TypeError","_","kind","key","target","prototype","descriptor","Object","getOwnPropertyDescriptor","name","done","i","length","context","p","access","addInitializer","push","result","get","set","init","unshift","defineProperty","__runInitializers","thisArg","value","useValue","arguments","call","__setFunctionName","prefix","description","concat","configurable","__classPrivateFieldGet","receiver","state","has","ResultState","LogEnum","SuppressedError","ATresult","isSuccess","this","Success","isError","Error","Ok","Create","Fail","error","Throw","undefined","err","throwIfError","constructor","super","match","matcher","andThen","fn","map","mapError","unwrapOr","tapError","tap","Err","defaultValue","riskySync","original","args","apply","Risky","originalMethod","errorPathSync","path","val","ErrorPath","DEFAULT_CONFIG","local_keys","today","tomorrow","day","invalid_date","last_mails","no_mails","last_events","no_events","valid_input","invalid_input","error_field","search_field","active_switch","inactive_switch","console_logging","console_logging_level","TRACE","tag_prefix","isObject","item","Array","isArray","deepMerge","source","output","keys","forEach","targetValue","sourceValue","_currentConfig","BnumConfig","_static_Initialize_decorators","static","private","obj","Initialize","metadata","_metadata","_staticExtraInitializers","overrides","Result","Get","Set","Reset","Clone","JSON","parse","stringify","EMPTY_STRING","Capitalize","word","charAt","toUpperCase","slice","BnumDOM","from","container","Proxy","prop","id","ShadowRoot","getElementById","querySelector","className","getElementsByClassName","Reflect","bind","ArrayUtils","toStringAttribs","attribs","entries","join","sortByDatesDescending","arr","primarySelector","secondarySelector","sort","a","b","dateA","_getTime","dateB","Date","getTime","BnumElement","HTMLElement","_data","_pendingAttributes","_updateScheduled","firstLoad","_p_styleElement","observedAttributes","_p_observedAttributes","__CONFIG_ATTRIBS_TO_OBSERVE_","alreadyLoaded","_p_isShadowElement","_p_attachCustomShadow","attachShadow","mode","script","remove","attributeChangedCallback","oldVal","newVal","Map","requestAnimationFrame","_flushUpdates","connectedCallback","render","disconnectedCallback","_p_preunload","_p_detach","_p_preload","shadowRoot","styleStr","_p_getStyle","styleEl","document","createElement","textContent","appendChild","stylesheets","_p_getStylesheets","Document","adoptedStyleSheets","template","_p_fromTemplate","templateContent","content","cloneNode","_p_buildDOM","_p_attach","data","valueOrOpts","fromAttribute","opts","_getData","_setData","addClass","classNames","classList","add","flatMap","c","split","removeClass","toggleClass","force","toggle","hasClass","contains","attr","getAttribute","setAttribute","toString","attrs","condAttr","doSomething","css","style","k","v","html","innerHTML","text","on","type","listener","options","addEventListener","off","removeEventListener","trigger","detail","dispatchEvent","CustomEvent","append","nodes","node","insertAdjacentHTML","appendTo","prepend","insertBefore","firstChild","prependTo","before","parentNode","after","nextSibling","hide","show","hasAttribute","removeAttribute","_p_setData","_p_getData","String","__CONFIG_UPDATE_ALL__","_p_isUpdateForAllAttributes","_p_update","clear","_p_postFlush","_p_requestAttributeUpdate","_p_addPendingAttribute","_p_hasData","_p_createTag","tag","element","classes","attributes","child","dataName","dataValue","attrName","attrValue","createTextNode","_p_createSlot","_p_createSlots","slots","opt","_p_createSpan","_p_createSpans","spans","_p_createDiv","_p_createDivs","divs","_p_createTextNode","_p_isInsideShadowRoot","getRootNode","composed","sheets","BASE_STYLE","componentStyle","__CACHE_STYLE__","__CACHE_TEMPLATE__","__CONFIG_SHADOW__","_p_WriteAttributes","TAG","ConstructCSSStyleSheet","cssText","sheet","CSSStyleSheet","replaceSync","CreateTemplate","TryDefine","TryDefineElement","customElements","define","Log","trace","console","debug","DEBUG","info","INFO","warn","WARN","ERROR","time","label","timeEnd","RotomecaCookies","cookie","RegExp","decodeURIComponent","days","secure","sameSite","expires","date","setTime","toUTCString","cookieString","encodeURIComponent","RotomecaMeta","title","setDescription","updateMeta","setOgTag","property","attrKey","head","RotomecaScripts","_loaded","load","url","async","defer","Promise","resolve","reject","src","onload","onerror","RotomecaStyleSheets","_pendingUpdate","_mounted","_registry","_listenersDisposers","_nativeSheet","rule","onUpdate","_scheduleRender","_generateId","addMultiples","rules","disposer","delete","values","_mount","includes","_render","size","cssContent","crypto","randomUUID","substring","RotomecaDocument","instance","Instance","_instance","_styleSheets","styleSheets","_meta","meta","_scripts","scripts","_cookies","cookies","JsEventData","callback","JsEvent","_onnadded","_onremoved","events","onadded","onremoved","event","_generateKey","haveEvents","count","params","results","index","len","_call_callback","g_key","Math","random","ae","hasOwnProperty","JsEvent_1","require$$0","JsCircularEvent","JsCircularEvent_1","param","defaultsParams","require$$1","eventModule","exports","BnumElementInternal","_internal","attachInternals","_p_internal","_p_states","states","_p_clearStates","_p_addState","_p_addStates","_p_removeState","_p_removeStates","_p_hasState","Scheduler","_started","_lastValue","_callback","schedule","_p_value","SchedulerArray","_resetSymbol","_stack","resetSymbol","_add","_getStackItems","Define","clazz","enumerable","finalTag","tpl","Node","styles","strStyles","array","initStyle","Attr","attributeName","_target","num","Number","isNaN","strVal","Data","nameOrOptions","maybeOptions","setter","autoName","replace","finalAttrName","isFalsy","domAttrName","NO_SETTER","SetAttr","_args","rtn","_setAttribute","SetAttrs","Autobind","Fire","eventName","bubbles","CustomFire","EventClass","eventInit","_____StCustomFire","tryInitEvent","_static_tryInitEvent_decorators","Self","_value","Light","UpdateAll","TAG_PREFIX","TAG_ICON","TAG_BUTTON","TAG_PRIMARY","TAG_SECONDARY","TAG_DANGER","TAG_HELPER","TAG_CARD_TITLE","TAG_CARD","TAG_CARD_EMAIL","TAG_CARD_AGENDA","TAG_CARD_ITEM","TAG_CARD_ITEM_MAIL","TAG_CARD_ITEM_AGENDA","TAG_CARD_LIST","TAG_DATE","TAG_ICON_BUTTON","TAG_COLUMN","TAG_INPUT","TAG_INPUT_DATE","TAG_INPUT_NUMBER","TAG_INPUT_SEARCH","TAG_INPUT_TEXT","TAG_INPUT_TIME","TAG_FOLDER","TAG_HIDE","TAG_FOLDER_LIST","TAG_HEADER","TAG_SEGMENTED_ITEM","TAG_SEGMENTED_CONTROL","TAG_SELECT","TAG_BADGE","TAG_FRAGMENT","TAG_RADIO","TAG_RADIO_GROUP","TAG_TREE","DATA_VARIATION","ATTR_VALUE","ATTR_CIRCLE","HTMLBnumBadge","_classDecorators","_classSuper","_classDescriptor","_classThis","_classExtraInitializers","_updateSchduler","_spanElement","_dataValue","_dataVariation","_requestUpdate","variation","_update","circle","Write","ElementChangedEvent","_new","_old","_caller","newElement","oldElement","caller","initDict","OnIconChangeInitializer","newValue","oldValue","EVENT_ICON","OnLoadingStateChangeInitializer","_p_onLoadingChange","OnIconPropChangeInitializer","EVENT_ICON_PROP_CHANGED","OnVariationChangeInitializer","EVENT_VARIATION","OnClickInitializer","CLASS_WRAPPER","CLASS_ICON","ATTR_ROUNDED","ATTR_LOADING","ATTR_DISABLED","ATTR_VARIATION","ATTR_ICON","ATTR_ICON_POS","ATTR_ICON_MARGIN","ATTR_HIDE","STATE_ICON","STATE_DISABLED","CSS_PROPERTY_ICON_MARGIN","BUTTON_ATTRIBUTE_MAP","isBool","DEFAULT_BUTTON_OPTIONS","iconPos","rounded","loading","ButtonVariation","PRIMARY","SECONDARY","TERTIARY","DANGER","IconPosition","LEFT","RIGHT","HideTextOnLayoutSize","SMALL","TOUCH","VOID_TAGS","h","props","argsChildren","children","sKey","open","renderChildren","str","REG_XSS_SAFE","listenersCacheKey","Symbol","Listener","initializator","circular","lazy","methodName","listenerCacheKey","_get","self","cache","NoInitListener","DATA_ICON","newIcon","oldIcon","ICON_CLASS","SYMBOLS","replaceAll","STYLE","HTMLBnumIcon","_oniconchanged_decorators","oniconchanged","_oniconchanged_initializers","_oniconchanged_extraInitializers","___decorators","___initializers","___extraInitializers","_HTMLBnumIcon__fontPromise","_updateScheduler","oniconchanged_accessor_storage","icon","trim","test","_requestUpdateDOM","_updateIcon","_checkAndLoadFont","FONT_SPEC","fonts","check","__classPrivateFieldSet","then","EMPTY","_jsx","HTML_CLASS","HOME","SEARCH","SETTINGS","USER","MAIL","CLOSE","CHECK","WARNING","DELETE","ADD","UI","selectorMap","uiCacheKey","root","uiObject","domCache","selector","TEMPLATE","_jsxs","class","hidden","HTMLBnumButton","_private__ui_decorators","wrapper","_private__onLinkedClick_decorators","e","message","_setLoading_decorators","_private__ui_descriptor","_ui_accessor_storage","_ui","_private__ui_initializers","_private__ui_extraInitializers","_onloadingstatechange_decorators","onloadingstatechange","_onloadingstatechange_initializers","_onloadingstatechange_extraInitializers","_oniconchange_decorators","oniconchange","_oniconchange_initializers","_oniconchange_extraInitializers","_oniconpropchange_decorators","oniconpropchange","_oniconpropchange_initializers","_oniconpropchange_extraInitializers","_onvariationchange_decorators","onvariationchange","_onvariationchange_initializers","_onvariationchange_extraInitializers","_linkedClickEvent_decorators","linkedClickEvent","_linkedClickEvent_initializers","_linkedClickEvent_extraInitializers","_private__onLinkedClick_descriptor","click","elementToClick","elements","_onLinkedClick","_instanceExtraInitializers","_private__onLoadingChange_descriptor","_private__onLoadingChange_decorators","_onLoadingChange","__p_onLoadingChange_decorators","setLoading","_renderScheduler","_lastClick","onloadingstatechange_accessor_storage","oniconchange_accessor_storage","oniconpropchange_accessor_storage","onvariationchange_accessor_storage","linkedClickEvent_accessor_storage","iconMargin","setProperty","removeProperty","hideTextOnLayoutSize","_updateDOM","ToButton","isLoading","_isLoading","isDisabled","_isDisabled","_isRounded","effectiveIcon","ariaDisabled","tabIndex","_setLinkedEvent","_is","stopLoading","toggleLoading","onkeydown","_p_Create","buttonClass","config","finalMargin","CreateOnlyIcon","Variation","originalClass","HTMLBnumDangerButton","BnumDateLocale","BnumDateUtils","_static_private__parse_decorators","_static_private__parse_descriptor","dateString","format","d","isValid","tokens","year","getFullYear","month","hour","minute","token","parseInt","_parse","locale","Intl","DateTimeFormat","addDays","setDate","getDate","addMonths","months","setMonth","getMonth","addYears","years","setFullYear","getOptionsFromToken","pattern","dateStyle","weekday","hour12","isSameDay","now","isToday","startOfDay","setHours","endOfDay","subDays","amount","isWithinInterval","interval","start","end","ATTRIBUTE_FORMAT","ATTRIBUTE_LOCALE","ATTRIBUTE_DATE","ATTRIBUTE_START_FORMAT","EVENT_ATTRIBUTE_UPDATED","DEFAULT_FORMAT","DEFAULT_LOCALE","STATE_INVALID","Observe","attribsToObserve1","attribsToObserve","attributesToObserve","HTMLBnumDate","_private__format_decorators","_formatEvent_decorators","formatEvent","_formatEvent_initializers","_formatEvent_extraInitializers","_private__format_descriptor","_originalDate","_outputFormat","_format","_HTMLBnumDate__LOCALES","fr","FR","en","EN","_locale","_startFormat","_outputElement","_renderSheduled","formatEvent_accessor_storage","localeElement","initialDateStr","_renderDate","needsRender","dateInput","startFormat","triggerRender","oldDate","newDate","formatToUse","askRender","formated","el","HTMLBnumFragment","display","RenderFrame","scheduler","OnLinkedClickEventInitializer","_private__render_decorators","_private__render_descriptor","hasChildNodes","ID_ICON","HTMLBnumButtonIcon","_private__linkedClickEvent_descriptor","_linkedClickEvent_accessor_storage","_private__linkedClickEvent_decorators","_linkedClickEvent","_private__linkedClickEvent_initializers","_private__linkedClickEvent_extraInitializers","_icon","_iconElement","_throw","_updateAttributeClick","msg","ID_INPUT","ID_INPUT_ICON","ID_INPUT_BUTTON","ID_STATE_ICON","ID_SUCCESS_TEXT","ID_ERROR_TEXT","DEFAULT_INPUT_TYPE","DEFAULT_BUTTON_VARIATION","SLOT_HINT","SLOT_BUTTON","SLOT_SUCCESS","SLOT_ERROR","TEXT_VALID_INPUT","TEXT_INVALID_INPUT","TEXT_ERROR_FIELD","ATTRIBUTE_DATA_VALUE","ATTRIBUTE_PLACEHOLDER","ATTRIBUTE_TYPE","ATTRIBUTE_DISABLED","ATTRIBUTE_STATE","ATTRIBUTE_BUTTON","ATTRIBUTE_BUTTON_ICON","ATTRIBUTE_ICON","ATTRIBUTE_REQUIRED","ATTRIBUTE_READONLY","ATTRIBUTE_PATTERN","ATTRIBUTE_MINLENGTH","ATTRIBUTE_MAXLENGTH","ATTRIBUTE_AUTOCOMPLETE","ATTRIBUTE_INPUTMODE","ATTRIBUTE_SPELLCHECK","ATTRIBUTE_IGNOREVALUE","STATE_SUCCESS","STATE_ERROR","STATE_BUTTON","STATE_STATE","Render","addonInner","for","EVENT_DEFAULT","OnButtonClickedInitializer","clickEvent","innerEvent","INPUT_BASE_STYLE","INPUT_STYLE_STATES","OBSERVED_ATTRIBUTES","HTMLBnumInput","slotName","slot","stateIcon","button","input","_name_decorators","__p_inputValueChangedCallback_decorators","_private__setFormValue_decorators","_private__internalSetValidity_decorators","_private__safeCheckValidity_decorators","_private__dispatchEvent_decorators","_onButtonClicked_decorators","onButtonClicked","_onButtonClicked_initializers","_onButtonClicked_extraInitializers","_name_initializers","_name_extraInitializers","_p_inputValueChangedCallback","_private__setFormValue_descriptor","setFormValue","_setFormValue","_private__internalSetValidity_descriptor","flags","anchor","setValidity","_internalSetValidity","_private__safeCheckValidity_descriptor","checkValidity","_safeCheckValidity","_private__dispatchEvent_descriptor","_dispatchEvent","_initValue","onButtonClicked_accessor_storage","name_accessor_storage","delegatesFocus","_inputValueChangedCallback","_initialiseButton","_removeValueAttribute","formResetCallback","formDisabledCallback","disabled","_sync","enableButton","span","enableButtonIconOnly","hideButton","setSuccessState","_setState","setErrorState","setIcon","removeIcon","setHint","hint","removeHint","setLabel","childNodes","removeChild","btnValue","button_icon","_updateState","placeholder","readOnly","required","SYNCED_ATTRIBUTES","_setFieldAttr","_updateA11y","_setValidity","isManualError","customError","validationMessage","validity","_syncValidationUI","hasNativeError","valid","successText","errorText","validationText","slotTextId","innerText","descriptions","finalState","_dispatchInputEventFallback","InputEvent","inputType","Event","_p_initialiseButton","slotsMap","success","btnText","_HTMLBnumInput__CreateSlotElement","CreateRender","SHEET","TYPE","HTMLBnumInputNumber","filter","x","finalOptions","AdditionnalStylesheet","HTMLBnumInputDate","__p_preload_decorators","ID_ACTIONS_CONTAINER","BUTTON_ICON","Listen","handler","boundHandler","closest","delegate","HTMLBnumInputSearch","emptyButton","_getAttribute","_private__triggerEventSearch_decorators","_private__triggerEventSearch_descriptor","_triggerEventSearch","_private__onKeyDown_descriptor","_private__onKeyDown_decorators","_onKeyDown","disableSearchButton","enableSearchButton","TYPE_TEXT","HTMLBnumInputText","HTMLBnumInputTime","HTMLBnumPrimaryButton","PropertyMode","default","readonly","Property","reactive","initialValue","CheckedChangeEvent","_value_decorators","_value_initializers","_value_extraInitializers","_checked_decorators","checked","_checked_initializers","_checked_extraInitializers","_caller_decorators","_caller_initializers","_caller_extraInitializers","value_accessor_storage","checked_accessor_storage","caller_accessor_storage","details","cancelable","NonStd","reason","fatal","typeLabel","method","getter","field","accessor","isNullOrUndefined","onStateChangeInitializer","BnumRadioCheckedChangeEvent","ATTRIBUTE_CHECKED","part","HTMLBnumRadio","slotLegend","slotHint","_disabled_decorators","_private__legend_decorators","_private__hint_decorators","__p_buildDOM_decorators","_private__update_decorators","_static__p_observedAttributes_decorators","_disabled_initializers","_disabled_extraInitializers","_private__legend_descriptor","_legend_accessor_storage","_legend","_private__legend_initializers","_private__legend_extraInitializers","_onstatechange_decorators","onstatechange","_onstatechange_initializers","_onstatechange_extraInitializers","_private__hint_descriptor","_hint_accessor_storage","_hint","_private__hint_initializers","_private__hint_extraInitializers","_private__update_descriptor","onactions","plugin","_private__fireChange_descriptor","ev","stopPropagation","_updateInternal","inner","_private__fireChange_decorators","_fireChange","disabled_accessor_storage","onstatechange_accessor_storage","internalCheckbox","_setupListeners","_init","needUpdate","_onUpdateChecked","updateCheckAndFire","legend","hasHint","isChecked","ariaChecked","_handleInnerChange","EVENT_CHANGE","HTMLBnumSecondaryButton","schedulersKey","Schedule","caches","HTMLBnumSelect","slotLabel","select","_private__scheduleMoveOptions_decorators","_private__tryInitValue_decorators","_private__fireSelect_decorators","_private__defaultValue_descriptor","_defaultValue_accessor_storage","_private__defaultValue_decorators","_defaultValue","_private__defaultValue_initializers","_private__defaultValue_extraInitializers","_private__defaultText_descriptor","_defaultText_accessor_storage","_private__defaultText_decorators","_defaultText","_private__defaultText_initializers","_private__defaultText_extraInitializers","_noLegend_decorators","noLegend","_noLegend_initializers","_noLegend_extraInitializers","_private__obserse_descriptor","mutations","some","m","addedNodes","n","HTMLOptionElement","HTMLOptGroupElement","_scheduleMoveOptions","_private__obserse_decorators","_obserse","_private__scheduleMoveOptions_descriptor","_moveOptions","_private__tryInitValue_descriptor","ignoreSelectedValue","_tryInitValue","_private__fireSelect_descriptor","_fireSelect","_observer","noLegend_accessor_storage","querySelectorAll","_lightOptions","MutationObserver","observe","childList","_setDefault","_setDataLegend","_setDataHint","_initListeners","_hasLegend","disconnect","addOptGroup","group","addOption","returnElement","option","_onInnerSelect","_setLabelPart","what","hasLabel","effectiveValue","effectiveText","createdOption","OnCheckedChangeInitializer","BnumSwitchIcon","ATTRIBUTE_HELPER","ARIA_CHECKED","ARIA_REQUIRED","ARIA_DISABLED","ARIA_INVALID","ARIA_DESCRIBEDBY","ID_HINT","ID_VALIDITY_TEXT","ARIA_TRUE","TEXT_ACTIVE_DEFAULT","TEXT_INACTIVE_DEFAULT","role","HTMLBnumSwitch","textActive","textInactive","validityText","_required_decorators","_helper_decorators","_private__checkValidity_decorators","_private__reportValidity_decorators","_private__setText_decorators","_private__setInternalError_decorators","_private__setValidity_decorators","_required_initializers","_required_extraInitializers","helper","_helper_initializers","_helper_extraInitializers","_oncheckedchange_decorators","oncheckedchange","_oncheckedchange_initializers","_oncheckedchange_extraInitializers","_private__checkValidity_descriptor","_checkValidity","_private__reportValidity_descriptor","reportValidity","_reportValidity","_private__change_descriptor","_private__change_decorators","_change","_private__setText_descriptor","_setText","_private__setInternalError_descriptor","_setInternalError","_private__setValidity_descriptor","_initState","required_accessor_storage","helper_accessor_storage","oncheckedchange_accessor_storage","_checkLabel","_ifOnErrorSet","updateCheckedAndFire","_initDataLegend","_initDataHint","_setListeners","_initData","_listenChange","_setOnError","_syncAria","assignedNodes","_verifyLabel","_verifyLegend","_verifyHint","_verifyData","hasData","hasElements","_verifyElements","_getVerifyElements","next","nodeType","TEXT_NODE","formAssociated","childTemplate","defaultSlot","DEFAULT","NO_DEFAULT","onItemClickedInitializer","HTMLBnumCardItem","__p_attach_decorators","_onitemclicked_decorators","onitemclicked","_onitemclicked_initializers","_onitemclicked_extraInitializers","_p_slot","onitemclicked_accessor_storage","queryId","_p_render","CLASS_DAY","CLASS_HOUR","CLASS_TITLE_OVERRIDE","CLASS_LOCATION_OVERRIDE","CLASS_ACTION_OVERRIDE","CLASS_PRIVATE_ICON","CLASS_ALL_DAY","ATTRIBUTE_ALL_DAY","ATTRIBUTE_PRIVATE","ATTRIBUTE_MODE","SLOT_TITLE","SLOT_LOCATION","SLOT_ACTION","STATE_ACTION_DEFINED","FORMAT_DATE_TIME_DEFAULT","FORMAT_TODAY","FORMAT_TOMORROW","ICON_PRIVATE","TEXT_ALL_DAY","ATTRIBUTE_PENDING","SYMBOL_RESET","AGENDA","CLASS_TITLE","HTMLBnumCardItemAgenda","_HTMLBnumCardItemAgenda__TryGetAgendaDate","toDate","_HTMLBnumCardItemAgenda__tryGetAgendaDates","slotTitle","slotLocation","slotAction","spanDate","spanHour","overrideTitle","overrideLocation","overrideAction","privateIcon","_private__baseDate_decorators","_private__baseDateFormat_decorators","_private__startDate_decorators","_private__startDateFormat_decorators","_private__endDate_decorators","_private__endDateFormat_decorators","_onstartdefineaction_decorators","onstartdefineaction","_onstartdefineaction_initializers","_onstartdefineaction_extraInitializers","_private__baseDate_descriptor","_baseDate_accessor_storage","_baseDate","_private__baseDate_initializers","_private__baseDate_extraInitializers","_private__baseDateFormat_descriptor","_baseDateFormat_accessor_storage","_baseDateFormat","_private__baseDateFormat_initializers","_private__baseDateFormat_extraInitializers","_private__startDate_descriptor","_startDate_accessor_storage","_startDate","_private__startDate_initializers","_private__startDate_extraInitializers","_private__startDateFormat_descriptor","_startDateFormat_accessor_storage","_startDateFormat","_private__startDateFormat_initializers","_private__startDateFormat_extraInitializers","_private__endDate_descriptor","_endDate_accessor_storage","_endDate","_private__endDate_initializers","_private__endDate_extraInitializers","_private__endDateFormat_descriptor","_endDateFormat_accessor_storage","_endDateFormat","_private__endDateFormat_initializers","_private__endDateFormat_extraInitializers","_private__title_descriptor","_title_accessor_storage","_private__title_decorators","_title","_private__title_initializers","_private__title_extraInitializers","_private__location_descriptor","_location_accessor_storage","_private__location_decorators","_location","_private__location_initializers","_private__location_extraInitializers","_sd","_ed","_bd","_pr","_spanAllday","_bnumDateStart","_bnumDateEnd","_shedulerTitle","_shedulerLocation","_shedulerAction","onstartdefineaction_accessor_storage","isAllDay","baseDate","startDate","endDate","_private","_getMode","dateHtml","_generateDateHtml","setHourLogic","defaultTitle","defaultLocation","_renderDOM","_release","createDate","_isSlotLocationEmpty","eventResult","location","action","updateAction","forceCall","spanAllDay","htmlStartDate","htmlEndDate","_requestShedulerAction","resetAction","updateTitle","_requestShedulerTitle","resetTitle","updateLocation","_requestShedulerLocation","resetLocation","setDateLogic","innerElement","_updateAction","_resetItem","_updateTitle","textNode","_updateLocation","_slotEmpty","allDay","isPrivate","onclick","FromEvent","agendaEvent","startDateSelector","endDateSelector","allDaySelector","titleSelector","locationSelector","_baseInitializer","sender","OnSenderChangedInitializer","OnSubjectChangedInitializer","OnDateChangedInitializer","ID_SUBJECT_SLOT","ID_SENDER_SLOT","ID_DATE_SLOT","ID_DATE_ELEMENT_OVERRIDE","PART_SENDER_OVERRIDE","PART_SUBJECT_OVERRIDE","PART_DATE_OVERRIDE","DATA_SUBJECT","DATA_SENDER","DATA_DATE","ATTRIBUTE_DATA_SUBJECT","ATTRIBUTE_DATA_SENDER","ATTRIBUTE_DATA_DATE","ATTRIBUTE_READ","EVENTS","CHANGED","SENDER","SUBJECT","DATE","HTMLBnumCardItemMail","slotSender","slotDate","slotSubject","overriderSender","overriderSubject","overriderDate","_onsubjectchanged_decorators","onsubjectchanged","_onsubjectchanged_initializers","_onsubjectchanged_extraInitializers","_onsenderchanged_decorators","onsenderchanged","_onsenderchanged_initializers","_onsenderchanged_extraInitializers","_ondatechanged_decorators","ondatechanged","_ondatechanged_initializers","_ondatechanged_extraInitializers","_dateOverrideElement","_subjectScheduler","_dateScheduler","_defaultDate","_senderScheduler","onsubjectchanged_accessor_storage","onsenderchanged_accessor_storage","ondatechanged_accessor_storage","_lazyDateOverrideElement","existingDateElement","_queryById","_configureDateElement","_mailSubject","_mailDate","_mailSender","defaultDate","updateSender","_requestUpdateSender","resetSender","updateSubject","_requestUpdateSubject","resetSubject","updateDate","_requestUpdateDate","resetDate","_updateSender","replaceChildren","_updateSubject","_updateDate","SetDateLogique","originalDate","startOfInterval","endOfInterval","subject","toISOString","EVENTS_AVAILABLES","HTMLBnumCardList","_modifierScheduler","_requestModifier","items","_modifier","ATTRIBUTE_DATA_ICON","CLASS_LINK","CLASS_ICON_TITLE","ID_SLOT_ICON","ID_SLOT_TEXT","ID_CUSTOM_BODY","HTMLBnumCardTitle","slotIcon","slotText","customBody","link","_url_decorators","_private__updateDOM_decorators","_url_initializers","_url_extraInitializers","_private__updateDOM_descriptor","href","_bodyScheduler","_initBody","url_accessor_storage","_updateBody","updateBody","Generate","HTMLBnumFolderList","ATTR_IS_COLLAPSED","ATTR_IS_SELECTED","ATTR_UNREAD","ATTR_LEVEL","ATTR_LABEL","EVENT_CLICK","EVENT_UNREAD_CHANGED","EVENT_SELECT","CLASS_IS_CUMULATIVE","VAL_TRUE","tabindex","HTMLBnumFolder","CONST.ATTR_LABEL","CONST.ATTR_UNREAD","CONST.ATTR_ICON","CONST.ATTR_IS_COLLAPSED","CONST.ATTR_LEVEL","CONST.ATTR_IS_SELECTED","badge","_selfUnread","collapsed","CONST.VAL_TRUE","CONST.EVENT_CLICK","childElementCount","CONST.EVENT_UNREAD_CHANGED","_onChildUnreadChanged","CONST.EVENT_SELECT","_onFolderSelect","_updateLabel","_updateLevel","_updateSelected","_updateIsCollapsed","_updateUnread","_shouldSkipUnreadUpdate","_refreshDisplay","_getTotalUnread","total","descendants","getElementsByTagName","isCollapsed","hasChildren","displayValue","_applyBadgeState","isCumulative","CONST.CLASS_IS_CUMULATIVE","unread","level","levelClamped","max","min","isSelected","childrenString","BREAKPOINTS","phone","small","touch","normal","MODES","DOWN","UP","ATTRIBUTE_BREAKPOINT","HTMLBnumHide","_private__hide_decorators","_private__handleChange_descriptor","mq","matches","_hide","_show","_private__handleChange_decorators","_handleChange","_private__hide_descriptor","ariaHidden","_mediaQueryList","_boundHandleChange","_setupListener","_removeListener","breakpointKey","width","query","window","matchMedia","DEFAULT_HINT","ID_GROUP","ID_LEGEND","DATA_INLINE","STATE_INLINE","ATTR_NAME","HTMLBnumRadioGroup","_private__setDefaultRadioFromValue_decorators","_private__listenRadioChange_decorators","_private__scheduleSetupRadios_decorators","_private__label_descriptor","_label_accessor_storage","_private__label_decorators","_label","_private__label_initializers","_private__label_extraInitializers","_private__value_descriptor","_value_accessor_storage","_private__value_decorators","_private__value_initializers","_private__value_extraInitializers","_private__setDefaultRadioFromValue_descriptor","radio","radios","find","r","_check","_setDefaultRadioFromValue","_private__listenRadioChange_descriptor","_handleRadioChange","_listenRadioChange","_private__handleKeyboardNavigation_descriptor","isRTL","getComputedStyle","direction","KEY_PREV","preventDefault","currentRadio","currentIndex","indexOf","targetRadio","fire","focus","_private__handleKeyboardNavigation_decorators","_handleKeyboardNavigation","_private__handleRadioChange_descriptor","_private__handleRadioChange_decorators","_private__scheduleSetupRadios_descriptor","_setupRadios","_scheduleSetupRadios","inline","_setInlineState","_setName","_setDefaultData","_setDefaultValue","_initStates","_setLegend","_setHint","_initInline","_setDefaultRadio","_stopFocus","_canFocus","hasChecked","EVENT_CHANGE$1","States","ID_CONTAINER","ID_LABEL","SEL_ICON","SEL_CONTAINER","SEL_LABEL","EVT_SELECTED","EVT_ERROR","ATTR_SELECTED","STATE_SELECTED","SELECTED","DISABLED","ICON","HTMLBnumSegmentedItem","_selected_decorators","_private__icon_decorators","OnSelectListenerInitializer","_updateLabel_decorators","_is_decorators","_private__updateDom_decorators","_private__verifyUi_decorators","_private__setIcon_decorators","_private__updateIcon_decorators","_private__enable_decorators","_private__select_decorators","_private__unselect_decorators","selected","_selected_initializers","_selected_extraInitializers","_private__icon_descriptor","_icon_accessor_storage","_private__icon_initializers","_private__icon_extraInitializers","_onSelected_decorators","onSelected","_onSelected_initializers","_onSelected_extraInitializers","updateLabel","is","_private__updateDom_descriptor","_verifyUi","_clearStates","_updateDisabled","_setIcon","_updateDom","_private__verifyUi_descriptor","_private__setIcon_descriptor","_private__updateIcon_descriptor","_private__disable_descriptor","_private__disable_decorators","_disable","_private__enable_descriptor","_unselect","_enable","_private__select_descriptor","_select","_private__unselect_descriptor","_private__dispatchError_descriptor","_private__dispatchError_decorators","_dispatchError","_private__onclick_descriptor","_private__onclick_decorators","_onclick","_private__listenClick_descriptor","_onClickDisabled","_private__listenClick_decorators","_listenClick","_private__listenKeyDown_descriptor","_private__listenKeyDown_decorators","_listenKeyDown","selected_accessor_storage","onSelected_accessor_storage","__","___","disable","enable","unselect","updateValue","callSelect","parentEvent","canBeClicked","isEnterOrSpace","_p_onSelectedTrigger","onSelect","OnError","iconName","Events","EVENT_ERROR","CHANGE","HTMLBnumSegmentedControl","_private__onItemSelected_decorators","currentItem","targetItem","_private__onItemSelected_descriptor","_onItemSelectedAction","_onItemSelected","_private__onItemSelectedAction_descriptor","_unselectAllItems","_selectItem","_onError","_private__onItemSelectedAction_decorators","_private__onError_descriptor","_private__onError_decorators","currentValue","_initLegendVisibility","_initSelectedItem","firstItem","ScheduleElementAppend","_element","_slot","STATE_CLICKABLE","STATE_LOADING","CSS_CLASS_BODY","HTMLBnumCardElement","__titleIcon_decorators","__titleText_decorators","__titleLink_decorators","_titleIcon","__titleIcon_initializers","__titleIcon_extraInitializers","_titleText","__titleText_initializers","__titleText_extraInitializers","_titleLink","__titleLink_initializers","__titleLink_extraInitializers","_handleClick","_loadingElement","_scheduleBody","_scheduleTitle","_scheduleAppend","_titleIcon_accessor_storage","_titleText_accessor_storage","_titleLink_accessor_storage","_titleData","clickable","removeButtonRole","titleData","_getLoading","loadingDiv","spinner","originalEvent","_requestUpdateTitle","_updateOrResetTitle","_resetTitle","_requestUpdateBody","_updateOrResetBody","_resetBody","ELEMENT_NODE","_requestAppendElement","appended","_appendElement","clearTitle","clearBody","appendToTitle","appendToBody","body","card","ID_CARD_TITLE","ID_CARD_ITEM_NO_ELEMENTS","ATTRIBUTE_LOADING","onElementChangedInitializer","TEXT_LAST_EVENTS","TEXT_NO_EVENTS","HTMLBnumCardAgenda","cardTitle","noElements","_loading_decorators","_private__url_decorators","_private__sortChildren_decorators","_onElementChanged_decorators","onElementChanged","_onElementChanged_initializers","_onElementChanged_extraInitializers","_loading_initializers","_loading_extraInitializers","_private__url_descriptor","_url_accessor_storage","_url","_private__url_initializers","_private__url_extraInitializers","_private__sortChildren_descriptor","agendaItems","assignedElements","tagName","toLowerCase","isSorted","_getDate","_getStartDate","_isSorting","fragment","createDocumentFragment","sortedItems","setTimeout","_sortChildren","_card","onElementChanged_accessor_storage","loading_accessor_storage","_cardPart","_handleSlotChange","contents","TEXT_LAST_MAILS","TEXT_NO_MAILS","HTMLBnumCardEmail","mailItems","dateStr","DATA_BACKGROUND","ID_TITLE_TEXT","ID_TITLE_CUSTOM","SLOT_NAME_TITLE","CSS_VARIABLE_BACKGROUND_IMAGE","STATE_WITH_BACKGROUND","onBackgroundChangedInitializer","newBackground","HTMLBnumHeader","titleText","customTitleContainer","_onBackgroundChanged_decorators","onBackgroundChanged","_onBackgroundChanged_initializers","_onBackgroundChanged_extraInitializers","_imgBackground_decorators","imgBackground","_imgBackground_initializers","_imgBackground_extraInitializers","_scheduleUpdateTitle","_scheduleUpdateBackground","onBackgroundChanged_accessor_storage","imgBackground_accessor_storage","_backgroundScheduler","_updateBackground","setPageTitle","_applyTitleUpdate","updateBackground","urlOrData","_requestBackgroundUpdate","clearBackground","_resetVisibility","showSlot","showText","showCustom","background","ATTR_COLLAPSED","ROLE_ITEM","HTMLBnumTree","_handleKeyDown","_selectedItem","_focusedItem","_initializeRovingTabindex","SelectItem","_updateFocus","arrayOfNodes","_getAllItems","initial","_handleSelection","current","visibleItems","_getVisibleItems","parent","parentElement","CLASS_CONTENT_POSTFIX","CLASSES","HOST","HEADER","MAIN","RC","OLD","BODY","FOOTER","CONTENT_PREFIX","FROM_SLOT","CONTENT","SLOTS","ATTRIBUTES","KEEP_BODY","HTMLBnumColumn","_keepBody","originalChildren","headerContainer","bodyContainer","footerContainer","hasHeader","hasFooter","nodeElement","_processNode","specificClass","DsBnumConfig","_name","_important","_listeners","important","_notify","_selectorText","_properties","_onUpdate","selectorText","_notifyParent","addProperty","propName","all","stop"],"mappings":"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"}