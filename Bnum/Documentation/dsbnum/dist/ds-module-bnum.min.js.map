{"version":3,"file":"ds-module-bnum.min.js","sources":["../node_modules/tslib/tslib.es6.js","../node_modules/@rotomeca/rop/dist/esm/src/interfaces/ITResult.js","../core/utils/LogEnum.ts","../node_modules/@rotomeca/rop/dist/esm/src/classes/abstracts/ATresult.js","../node_modules/@rotomeca/rop/dist/esm/src/classes/Success.js","../node_modules/@rotomeca/rop/dist/esm/src/classes/Fail.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/Risky.internal/functions.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/Risky.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/HappyPath.internal/functions.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/HappyPath.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/ErrorPath.internal/functions.js","../node_modules/@rotomeca/rop/dist/esm/src/decorators/ErrorPath.js","../core/utils/constants/config.ts","../core/utils/BnumConfig.ts","../node_modules/@rotomeca/utils/lib/constants.mjs","../node_modules/@rotomeca/utils/index.mjs","../core/utils/BnumDom.ts","../core/utils/ArrayUtils.ts","../components/bnum-element.ts","../core/utils/Log.ts","../node_modules/@rotomeca/document-utils/src/RotomecaCookies.ts","../node_modules/@rotomeca/document-utils/src/RotomecaMeta.ts","../node_modules/@rotomeca/document-utils/src/RotomecaScripts.ts","../node_modules/@rotomeca/document-utils/src/RotomecaStyleSheets.ts","../node_modules/@rotomeca/document-utils/src/RotomecaDocument.ts","../node_modules/@rotomeca/event/JsEvent.js","../node_modules/@rotomeca/event/index.js","../node_modules/@rotomeca/event/JsCircularEvent.js","../node_modules/@rotomeca/document-utils/src/RotomecaCssRule.ts","../node_modules/@rotomeca/document-utils/src/RotomecaCssProperty.ts","../components/bnum-element-states.ts","../core/utils/Scheduler.ts","../core/decorators/define.ts","../core/decorators/attr.ts","../core/decorators/set-attr.ts","../core/decorators/autobind.ts","../core/decorators/event.ts","../core/decorators/self.ts","../components/atoms/badge/bnum-badge.ts","../core/utils/constants/tags.ts","../core/utils/constants/regexp.ts","../core/utils/events/ElementChangedEvent.ts","../components/atoms/icon/bnum-icon.ts","../components/atoms/button/bnum-button.ts","../node_modules/@rotomeca/rop/dist/esm/src/decorators/RiskyPath.js","../components/atoms/danger-button/bnum-danger-button.ts","../core/decorators/nonstd.ts","../core/utils/BnumDateUtils.ts","../components/atoms/date/bnum-date.ts","../components/atoms/fragment/bnum-fragment.ts","../core/decorators/light.ts","../components/atoms/helper/bnum-helper.ts","../components/atoms/icon-button/bnum-icon-button.ts","../core/utils/constants/constants.ts","../components/atoms/input/bnum-input.ts","../components/atoms/input-number/bnum-input-number.ts","../components/atoms/input-date/bnum-input-date.ts","../components/atoms/input-search/bnum-input-search.ts","../components/atoms/input-text/bnum-input-text.ts","../components/atoms/input-time/bnum-input-time.ts","../components/atoms/primary-button/bnum-primary-button.ts","../core/jsx/index.ts","../core/decorators/ui.ts","../core/decorators/property.ts","../core/utils/events/CheckedChangeEvent.ts","../core/decorators/listener.ts","../components/atoms/radio/bnum-radio.tsx","../components/atoms/secondary-button/bnum-secondary-button.ts","../core/decorators/schedule.ts","../core/decorators/updateAll.ts","../components/atoms/select/bnum-select.tsx","../components/molecules/card-item/bnum-card-item.ts","../components/molecules/card-item-agenda/bnum-card-item-agenda.ts","../components/molecules/card-item-mail/bnum-card-item-mail.ts","../components/molecules/card-list/bnum-card-list.ts","../components/molecules/card-title/bnum-card-title.ts","../components/organisms/folder-list/bnum-folder-list.ts","../components/molecules/folder/bnum-folder.ts","../components/molecules/hide/bnum-hide.ts","../core/decorators/listen.ts","../core/utils/eventsFunctions.ts","../components/molecules/radio-group/bnum-radio-group.tsx","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.internal/States.ts","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.tsx","../components/molecules/segmented-control/bnum-segmented-item.part/bnum-segmented-item.internal/listeners.ts","../components/molecules/segmented-control/bnum-segmented-control.part/bnum-segmented-control.tsx","../components/organisms/card/bnum-card.ts","../core/utils/utils.ts","../components/organisms/card-agenda/bnum-card-agenda.ts","../components/organisms/card-email/bnum-card-email.ts","../components/organisms/header/bnum-header.ts","../components/organisms/tree/bnum-tree.ts","../components/template/column/bnum-column.ts","../src/index.ts"],"sourcesContent":["/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\r\n    function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\r\n    var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\r\n    var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\r\n    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\r\n    var _, done = false;\r\n    for (var i = decorators.length - 1; i >= 0; i--) {\r\n        var context = {};\r\n        for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\r\n        for (var p in contextIn.access) context.access[p] = contextIn.access[p];\r\n        context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\r\n        var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\r\n        if (kind === \"accessor\") {\r\n            if (result === void 0) continue;\r\n            if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\r\n            if (_ = accept(result.get)) descriptor.get = _;\r\n            if (_ = accept(result.set)) descriptor.set = _;\r\n            if (_ = accept(result.init)) initializers.unshift(_);\r\n        }\r\n        else if (_ = accept(result)) {\r\n            if (kind === \"field\") initializers.unshift(_);\r\n            else descriptor[key] = _;\r\n        }\r\n    }\r\n    if (target) Object.defineProperty(target, contextIn.name, descriptor);\r\n    done = true;\r\n};\r\n\r\nexport function __runInitializers(thisArg, initializers, value) {\r\n    var useValue = arguments.length > 2;\r\n    for (var i = 0; i < initializers.length; i++) {\r\n        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\r\n    }\r\n    return useValue ? value : void 0;\r\n};\r\n\r\nexport function __propKey(x) {\r\n    return typeof x === \"symbol\" ? x : \"\".concat(x);\r\n};\r\n\r\nexport function __setFunctionName(f, name, prefix) {\r\n    if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\r\n    return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\r\n};\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\r\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n        desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\r\n    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nvar ownKeys = function(o) {\r\n    ownKeys = Object.getOwnPropertyNames || function (o) {\r\n        var ar = [];\r\n        for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\r\n        return ar;\r\n    };\r\n    return ownKeys(o);\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n\r\nexport function __classPrivateFieldIn(state, receiver) {\r\n    if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\r\n    return typeof state === \"function\" ? receiver === state : state.has(receiver);\r\n}\r\n\r\nexport function __addDisposableResource(env, value, async) {\r\n    if (value !== null && value !== void 0) {\r\n        if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\r\n        var dispose, inner;\r\n        if (async) {\r\n            if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\r\n            dispose = value[Symbol.asyncDispose];\r\n        }\r\n        if (dispose === void 0) {\r\n            if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\r\n            dispose = value[Symbol.dispose];\r\n            if (async) inner = dispose;\r\n        }\r\n        if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\r\n        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\r\n        env.stack.push({ value: value, dispose: dispose, async: async });\r\n    }\r\n    else if (async) {\r\n        env.stack.push({ async: true });\r\n    }\r\n    return value;\r\n\r\n}\r\n\r\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\r\n\r\nexport function __disposeResources(env) {\r\n    function fail(e) {\r\n        env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\r\n        env.hasError = true;\r\n    }\r\n    var r, s = 0;\r\n    function next() {\r\n        while (r = env.stack.pop()) {\r\n            try {\r\n                if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\r\n                if (r.dispose) {\r\n                    var result = r.dispose.call(r.value);\r\n                    if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\r\n                }\r\n                else s |= 1;\r\n            }\r\n            catch (e) {\r\n                fail(e);\r\n            }\r\n        }\r\n        if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\r\n        if (env.hasError) throw env.error;\r\n    }\r\n    return next();\r\n}\r\n\r\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\r\n    if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\r\n        return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\r\n            return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\r\n        });\r\n    }\r\n    return path;\r\n}\r\n\r\nexport default {\r\n    __extends: __extends,\r\n    __assign: __assign,\r\n    __rest: __rest,\r\n    __decorate: __decorate,\r\n    __param: __param,\r\n    __esDecorate: __esDecorate,\r\n    __runInitializers: __runInitializers,\r\n    __propKey: __propKey,\r\n    __setFunctionName: __setFunctionName,\r\n    __metadata: __metadata,\r\n    __awaiter: __awaiter,\r\n    __generator: __generator,\r\n    __createBinding: __createBinding,\r\n    __exportStar: __exportStar,\r\n    __values: __values,\r\n    __read: __read,\r\n    __spread: __spread,\r\n    __spreadArrays: __spreadArrays,\r\n    __spreadArray: __spreadArray,\r\n    __await: __await,\r\n    __asyncGenerator: __asyncGenerator,\r\n    __asyncDelegator: __asyncDelegator,\r\n    __asyncValues: __asyncValues,\r\n    __makeTemplateObject: __makeTemplateObject,\r\n    __importStar: __importStar,\r\n    __importDefault: __importDefault,\r\n    __classPrivateFieldGet: __classPrivateFieldGet,\r\n    __classPrivateFieldSet: __classPrivateFieldSet,\r\n    __classPrivateFieldIn: __classPrivateFieldIn,\r\n    __addDisposableResource: __addDisposableResource,\r\n    __disposeResources: __disposeResources,\r\n    __rewriteRelativeImportExtension: __rewriteRelativeImportExtension,\r\n};\r\n","// type: interface\n// description: Interface for a result type that can represent either a success or an error.\n/**\n * Enumeration representing the state of the result.\n */\nexport var ResultState;\n(function (ResultState) {\n    /**\n     * The result represents a successful outcome.\n     */\n    ResultState[ResultState[\"Success\"] = 0] = \"Success\";\n    /**\n     * The result represents an error outcome.\n     */\n    ResultState[ResultState[\"Error\"] = 1] = \"Error\";\n})(ResultState || (ResultState = {}));\n","export enum LogEnum {\n  TRACE = 0,\n  DEBUG = 1,\n  INFO = 2,\n  WARN = 3,\n  ERROR = 4,\n}\n","// type: class\n// description: Abstract class implementing the ITResult interface.\nimport { ResultState } from \"../../interfaces/ITResult\";\nimport { Fail, Success } from \"../internal\";\n/**\n * Abstract class representing a result that can be either a success or an error.\n */\nexport class ATresult {\n    /**\n     * Checks if the result is a success.\n     *\n     * @returns True if the result is a success, false otherwise.\n     */\n    isSuccess() {\n        return this.state() === ResultState.Success;\n    }\n    /**\n     * Checks if the result is an error.\n     *\n     * @returns True if the result is an error, false otherwise.\n     */\n    isError() {\n        return this.state() === ResultState.Error;\n    }\n    /**\n     * Creates a new Success result.\n     * @param value Optional success value.\n     * @returns A new Success instance containing the value.\n     */\n    static Ok(value) {\n        return Success.Create(value);\n    }\n    /**\n     * Creates a new Fail result.\n     * @param error Optional error value.\n     * @returns A new Fail instance containing the error.\n     */\n    static Fail(error) {\n        return Fail.Create(error ?? new Error(\"An error occurred\"));\n    }\n    /**\n     * Throw an error from an Error object or a text.\n     * @param error Error to throw\n     * @throws An Error\n     */\n    static Throw(error = undefined) {\n        const err = typeof error === 'string' ? new Error(error) : error;\n        this.Fail(err).throwIfError();\n    }\n}\n","// type: class\n// description: Class representing a successful result.\nimport { ResultState } from \"../interfaces/ITResult\";\nimport { ATresult } from \"./internal\";\n/**\n * Class representing a successful result.\n * @template TSuccess - The type of the success value.\n * @template TE - The type of the error value (default is Error).\n */\nexport class Success extends ATresult {\n    /**\n     * Creates an instance of Success.\n     * @param value The success value.\n     */\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    /**\n     * Returns the state of the result.\n     * @returns The state indicating success.\n     */\n    state() {\n        return ResultState.Success;\n    }\n    /**\n     * Matches the result with the provided matcher functions.\n     * @param matcher The matcher object containing functions for success and error cases.\n     * @returns The result of the matched function.\n     */\n    match(matcher) {\n        return matcher.Ok(this.value);\n    }\n    /**\n     * Chains the result with another operation that returns a new result.\n     * @param fn The function to apply if the result is successful.\n     * @returns The result of the chained operation.\n     */\n    andThen(fn) {\n        return fn(this.value);\n    }\n    /**\n     * Maps the success value to a new value.\n     * @param fn The function to apply to the success value.\n     * @returns A new Success instance containing the mapped value.\n     */\n    map(fn) {\n        return new Success(fn(this.value));\n    }\n    /**\n     * Maps the error value to a new error value.\n     * @param _ The function to apply to the error value.\n     * @returns A new Success instance containing the original success value.\n     */\n    mapError(_) {\n        return new Success(this.value);\n    }\n    /**\n     * Returns the success value or throws an error if the result is an error.\n     * @returns The success value.\n     */\n    throwIfError() {\n        return this.value;\n    }\n    /**\n     * Retrieves the success value or returns the provided default value if the result is an error.\n     * @param _ The value to return if the result is an error.\n     * @returns The success value if the result is a success, otherwise the default value.\n     */\n    unwrapOr(_) {\n        return this.value;\n    }\n    /**\n     * Executes the provided function if the result is an error, then returns the original result.\n     * @param _ Unused function since this is a Success.\n     * @returns The original Success result.\n     */\n    tapError(_) {\n        return this;\n    }\n    /**\n     * Executes the provided function if the result is a success, then returns the original result.\n     * @param fn A function to execute with the success value.\n     * @returns The original result.\n     */\n    tap(fn) {\n        fn(this.value);\n        return this;\n    }\n    /**\n     * Creates a new Success instance.\n     * @param value The success value.\n     * @returns A new Success instance containing the value.\n     *\n     * @template TSuccess - The type of the success value.\n     * @template TE - The type of the error value (default is Error).\n     *\n     * @static\n     */\n    static Create(value) {\n        return new Success(value);\n    }\n}\n","// type: class\n// description: Class representing a error result.\nimport { ResultState } from \"../interfaces/ITResult\";\nimport { ATresult } from \"./internal\";\n/**\n * Class representing a failed result.\n * @template TSuccess - The type of the success value.\n * @template TE - The type of the error value (default is Error).\n */\nexport class Fail extends ATresult {\n    /**\n     * Creates an instance of Fail.\n     * @param error The error value.\n     */\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    /**\n     * Returns the state of the result.\n     * @returns The state indicating failure.\n     */\n    state() {\n        return ResultState.Error;\n    }\n    /**\n     * Matches the result with the provided matcher functions.\n     * @param matcher The matcher object containing functions for success and error cases.\n     * @returns The result of the matched function.\n     */\n    match(matcher) {\n        return matcher.Err(this.error);\n    }\n    /**\n     * Chains the result with another operation that returns a new result.\n     * @param fn The function to apply if the result is successful.\n     * @returns The result of the chained operation.\n     */\n    andThen(_) {\n        return new Fail(this.error);\n    }\n    /**\n     * Maps the success value to a new value.\n     * @param fn The function to apply to the success value.\n     * @returns A new Success instance containing the mapped value.\n     */\n    map(_) {\n        return new Fail(this.error);\n    }\n    /**\n     * Maps the error value to a new error value.\n     * @param _ The function to apply to the error value.\n     * @returns A new Success instance containing the original success value.\n     */\n    mapError(fn) {\n        return new Fail(fn(this.error));\n    }\n    /**\n     * Returns the success value or throws an error if the result is an error.\n     * @throws The error value if the result is an error.\n     * @returns The success value.\n     */\n    throwIfError() {\n        throw this.error;\n    }\n    /**\n     * Retrieves the success value or returns the provided default value if the result is an error.\n     * @param defaultValue The value to return if the result is an error.\n     * @returns The success value if the result is a success, otherwise the default value.\n     */\n    unwrapOr(defaultValue) {\n        return defaultValue;\n    }\n    /**\n     * Executes the provided function if the result is an error, then returns the original result.\n     * @param fn A function to execute with the error value.\n     * @returns The original result.\n     */\n    tapError(fn) {\n        fn(this.error);\n        return this;\n    }\n    /**\n     * Executes the provided function if the result is a success, then returns the original result.\n     * @param fn A function to execute with the success value.\n     * @returns The original result.\n     */\n    tap(_) {\n        return this;\n    }\n    /**\n     * Creates a new Fail instance.\n     * @param error The error value.\n     * @returns A new Fail instance containing the error.\n     *\n     * @template TSuccess - The type of the success value.\n     * @template TE - The type of the error value (default is Error).\n     *\n     * @static\n     */\n    static Create(error) {\n        return new Fail(error);\n    }\n}\n","// type: functions\n// description: Functions to handle risky operations by converting exceptions into Result types.\nimport { ATresult, Fail, Success } from \"../../classes\";\n/**\n * Handles synchronous risky operations by converting exceptions into Result types.\n * @param this The context in which the original function is called.\n * @param original The original function to be executed.\n * @param args Arguments to be passed to the original function.\n * @returns An ATresult representing success or failure.\n */\nexport function riskySync(original, ...args) {\n    try {\n        const result = original.apply(this, args);\n        return result instanceof ATresult ? result : Success.Create(result);\n    }\n    catch (error) {\n        return error instanceof ATresult ? error : Fail.Create(error);\n    }\n}\n/**\n * Handles asynchronous risky operations by converting exceptions into Result types.\n * @param this The context in which the original function is called.\n * @param original The original function to be executed.\n * @param args Arguments to be passed to the original function.\n * @returns A Promise that resolves to an ATresult representing success or failure.\n */\nexport async function riskyAsync(original, ...args) {\n    try {\n        const result = await original.apply(this, args);\n        return result instanceof ATresult ? result : Success.Create(result);\n    }\n    catch (error) {\n        return error instanceof ATresult ? error : Fail.Create(error);\n    }\n}\n","// type: decorators\n// description: Decorators to handle risky operations by converting exceptions into Result types.\nimport { riskyAsync, riskySync } from \"./Risky.internal/functions\";\n/**\n * Decorator to handle risky operations by converting exceptions into Result types.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function Risky() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"Risky can only be applied to methods.\");\n        }\n        return (function (...args) {\n            return riskySync.call(this, originalMethod, ...args);\n        });\n    };\n}\n/**\n * Decorator to handle risky async operations by converting exceptions into Result types.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyAsync() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyAsync can only be applied to methods.\");\n        }\n        return (async function (...args) {\n            return await riskyAsync.call(this, originalMethod, ...args);\n        });\n    };\n}\n","//type: functions\n//description: Functions to handle happy path operations by executing a callback on successful results.\nimport { ATresult } from \"../../classes\";\n/**\n * Handles the happy path for synchronous functions by executing a callback on successful results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The success callback to be executed on successful results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the success callback.\n */\nexport function happyPathSync(original, path, ...args) {\n    const result = original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (val) => path(val),\n            Err: (e) => result\n        });\n    }\n    return path(result);\n}\n/**\n * Handles the happy path for asynchronous functions by executing a callback on successful results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The success callback to be executed on successful results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the success callback.\n */\nexport async function happyPathASync(original, path, ...args) {\n    const result = await original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (val) => path(val),\n            Err: (e) => result\n        });\n    }\n    return path(result);\n}\n","//type: decorators\n//description: Decorator to handle error path operations by executing a callback on errored results.\nimport { happyPathASync, happyPathSync } from \"./HappyPath.internal/functions\";\n/**\n * Decorator to handle happy path operations by executing a callback on successful results.\n * @param fn A success callback to be executed on successful results.\n * @returns Returns a method decorator that wraps the original method with happy path handling.\n */\nexport function HappyPath(fn) {\n    return function (originalMethod, context) {\n        return function (...args) {\n            return happyPathSync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n/**\n * Decorator to handle happy path operations by executing a callback on successful results.\n * @param fn A success callback to be executed on successful results.\n * @returns Returns a method decorator that wraps the original method with happy path handling.\n */\nexport function HappyPathAsync(fn) {\n    return function (originalMethod, context) {\n        return async function (...args) {\n            return await happyPathASync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n","//type: functions\n//description: Functions to handle error path operations by executing a callback on errored results.\nimport { ATresult } from \"../../classes\";\n/**\n * Handles the error path for synchronous functions by executing a callback on errored results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The error callback to be executed on errored results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the error callback.\n */\nexport function errorPathSync(original, path, ...args) {\n    const result = original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (_) => result,\n            Err: (val) => val,\n        });\n    }\n    return path(result);\n}\n/**\n * Handles the error path for asynchronous functions by executing a callback on errored results.\n * @param this The context in which the original function is called.\n * @param original The original function to be wrapped.\n * @param path The error callback to be executed on errored results.\n * @param args Arguments to be passed to the original function.\n * @returns The result of the original function or the result of the error callback.\n */\nexport async function errorPathAsync(original, path, ...args) {\n    const result = await original.call(this, ...args);\n    if (result instanceof ATresult) {\n        return result.match({\n            Ok: (_) => result,\n            Err: (val) => val,\n        });\n    }\n    return path(result);\n}\n","//type: decorators\n//description: Decorator to handle error path operations by executing a callback on errored results.\nimport { errorPathAsync, errorPathSync } from \"./ErrorPath.internal/functions\";\n/**\n * Decorator to handle error path operations by executing a callback on errored results.\n * @param fn Error path callback to be executed on errored results.\n * @returns A method decorator that wraps the original method with error path handling.\n */\nexport function ErrorPath(fn) {\n    return function (originalMethod, context) {\n        return function (...args) {\n            return errorPathSync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n/**\n * Decorator to handle error path operations by executing a callback on errored results.\n * @param fn Error path callback to be executed on errored results.\n * @returns A method decorator that wraps the original method with error path handling.\n */\nexport function ErrorPathAsync(fn) {\n    return function (originalMethod, context) {\n        return async function (...args) {\n            return errorPathAsync.call(this, originalMethod, fn, ...args);\n        };\n    };\n}\n","import { LogEnum } from '../LogEnum';\n\nexport interface BnumConfigLocalKeys {\n  today?: string;\n  tomorrow?: string;\n  day?: string;\n  invalid_date?: string;\n  last_mails?: string;\n  no_mails?: string;\n  last_events?: string;\n  no_events?: string;\n  valid_input?: string;\n  invalid_input?: string;\n  error_field?: string;\n  search_field?: string;\n}\n\nexport interface BnumConfigOptions {\n  local_keys?: BnumConfigLocalKeys;\n  console_logging?: boolean;\n  console_logging_level?: LogEnum;\n  tag_prefix?: string;\n}\n\nexport const DEFAULT_CONFIG: BnumConfigOptions = {\n  local_keys: {\n    today: 'Aujourd\\'hui',\n    tomorrow: 'Demain',\n    day: 'Journée',\n    invalid_date: 'Date invalide',\n    last_mails: 'Courriers récents',\n    no_mails: 'Aucun courrier...',\n    last_events: 'Prochains évènements',\n    no_events: 'Aucun événement...',\n    valid_input: 'Le champs est valide !',\n    invalid_input: 'Le champs est invalide !',\n    error_field: 'Ce champ contient une erreur.',\n    search_field: 'Rechercher',\n  },\n  console_logging: true,\n  console_logging_level: LogEnum.TRACE,\n  tag_prefix: 'bnum',\n};\n","import { Result, Risky } from '@rotomeca/rop';\nimport { BnumConfigOptions, DEFAULT_CONFIG } from './constants/config';\n\n/**\n * Vérifie si une valeur est un objet (et pas un tableau).\n * @param item Item à vérifier\n * @returns Vrai si l'item est un objet (et pas un tableau), sinon faux.\n */\nfunction isObject(item: any): item is Record<string, any> {\n  return item && typeof item === 'object' && !Array.isArray(item);\n}\n\n/**\n * Fonction de fusion profonde (Deep Merge) native.\n * @param target L'objet cible (qui sera modifié).\n * @param source L'objet source (qui écrase la cible).\n * @returns L'objet cible fusionné.\n */\nfunction deepMerge<T>(target: T, source: any): T {\n  // Si l'un des deux n'est pas un objet, on retourne la source (écrasement)\n  if (!isObject(target) || !isObject(source)) {\n    return source;\n  }\n\n  const output = target as any;\n\n  Object.keys(source).forEach((key) => {\n    const targetValue = output[key];\n    const sourceValue = source[key];\n\n    if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n      // Choix architectural : Pour les tableaux de config, on remplace souvent tout le tableau.\n      // Si tu préfères concaténer : output[key] = targetValue.concat(sourceValue);\n      output[key] = sourceValue;\n    } else if (isObject(targetValue) && isObject(sourceValue)) {\n      // Récursion pour les objets imbriqués\n      output[key] = deepMerge(targetValue, sourceValue);\n    } else {\n      // Assignation directe pour les primitives\n      output[key] = sourceValue;\n    }\n  });\n\n  return output;\n}\n\n// Variable locale au module (privée) pour stocker l'état\nlet _currentConfig: BnumConfigOptions = { ...DEFAULT_CONFIG };\n\n/**\n * Gestionnaire de configuration global pour Bnum.\n */\nexport class BnumConfig {\n  /**\n   * Initialise la configuration en fusionnant les défauts avec un objet partiel.\n   * À appeler au démarrage si une config globale existe.\n   */\n  @Risky()\n  static Initialize(overrides: Partial<BnumConfigOptions>): Result<void> {\n    _currentConfig = deepMerge(_currentConfig, overrides);\n    return Result.Ok();\n  }\n\n  /**\n   * Récupère la configuration complète ou une valeur spécifique.\n   * @param key Clé optionnelle pour récupérer une sous-partie\n   */\n  static Get(): BnumConfigOptions;\n  static Get<K extends keyof BnumConfigOptions>(key: K): BnumConfigOptions[K];\n  static Get<K extends keyof BnumConfigOptions>(\n    key?: K,\n  ): BnumConfigOptions | BnumConfigOptions[K] {\n    if (key) {\n      return _currentConfig[key];\n    }\n    return _currentConfig;\n  }\n\n  /**\n   * Met à jour la configuration à la volée.\n   */\n  static Set(overrides: Partial<BnumConfigOptions>): void {\n    this.Initialize(overrides);\n    // Optionnel : Déclencher un événement global pour dire que la config a changé\n    // document.dispatchEvent(new CustomEvent('bnum:config-changed', { detail: _currentConfig }));\n  }\n\n  /**\n   * Reset la configuration aux valeurs par défaut\n   */\n  static Reset(): void {\n    _currentConfig = { ...DEFAULT_CONFIG };\n  }\n\n  /**\n   * Récupère une copie profonde de la configuration actuelle.\n   * @readonly\n   */\n  static get Clone(): BnumConfigOptions {\n    return JSON.parse(JSON.stringify(_currentConfig));\n  }\n}\n","export const EMPTY_STRING = '';\n\n","import { EMPTY_STRING } from \"./lib/constants\";\nimport Random from \"./lib/random\";\n\n//#region MiscFunctions\nexport function isNullOrUndefined(item) {\n    return item !== null || item !== undefined;\n}\n\n/**\n * Vérifie si une varible est un tableau ou quelque chose qui y ressemble\n * @param {*} item\n * @returns {bool}\n */\nexport function isArrayLike(item) {\n    return (\n      !!item &&\n      typeof item === 'object' &&\n      // eslint-disable-next-line no-prototype-builtins\n      item.hasOwnProperty('length') &&\n      typeof item.length === 'number' &&\n      item.length > 0 &&\n      item.length - 1 in item\n    );\n  }\n\nexport function Capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1)\n}\n\nexport function CapitalizeLine(line) {\n  return line.split(' ')\n          .map(Capitalize)\n          .join(' ');\n}\n//#endregion\n\nexport {EMPTY_STRING, Random};","export type Container = HTMLElement | ShadowRoot;\n\n/**\n * Type d'intersection ajoutant la méthode query au container original\n */\nexport type EnhancedContainer<T extends Container> = T & {\n  queryId<E extends HTMLElement>(id: string): E | null;\n  queryClass<E extends HTMLElement>(className: string): E | null;\n};\n\nexport class BnumDOM {\n  /**\n   * \"Caste\" un container pour lui injecter les extensions Bnum via un Proxy.\n   * C'est l'équivalent d'une méthode d'extension C# résolue à l'exécution.\n   */\n  static from<T extends Container>(container: T): EnhancedContainer<T> {\n    return new Proxy(container, {\n      get(target, prop, receiver) {\n        if (prop === 'queryId') {\n          return (id: string) => {\n            return target instanceof ShadowRoot\n              ? target.getElementById(id)\n              : target.querySelector(`#${id}`);\n          };\n        } else if (prop === 'queryClass') {\n          return (className: string) => {\n            return target instanceof ShadowRoot\n              ? target.querySelector(`.${className}`)\n              : target.getElementsByClassName(className)[0] || null;\n          };\n        }\n\n        const value = Reflect.get(target, prop, target);\n        return typeof value === 'function' ? value.bind(target) : value;\n      },\n    }) as EnhancedContainer<T>;\n  }\n}\n","/**\n * Utilitaires pour les tableaux.\n */\nexport abstract class ArrayUtils {\n  /**\n   * Transforme un objet d'attributs en une chaîne de caractères pour utilisation dans une balise HTML.\n   * @param attribs Objet contenant les attributs et leurs valeurs.\n   * @returns Chaîne de caractères représentant les attributs pour une balise HTML.\n   */\n  static toStringAttribs(attribs: Record<string, any>): string {\n    return Object.entries(attribs)\n      .map(([key, value]) => `${key}=\"${value}\"`)\n      .join(' ');\n  }\n\n  /**\n   * Trie un tableau d'objets sur deux niveaux de dates (Descendant).\n   * @param arr Le tableau d'objets à trier.\n   * @param primarySelector Callback pour la date principale.\n   * @param secondarySelector Callback pour la date secondaire (fallback).\n   */\n  static sortByDatesDescending<T>(\n    arr: T[],\n    primarySelector: (item: T) => Date | number,\n    secondarySelector: (item: T) => Date | number,\n  ): T[] {\n    return [...arr].sort((a, b) => {\n      const dateA = this.#_getTime(primarySelector(a));\n      const dateB = this.#_getTime(primarySelector(b));\n\n      if (dateB !== dateA) {\n        return dateB - dateA;\n      }\n\n      const subA = this.#_getTime(secondarySelector(a));\n      const subB = this.#_getTime(secondarySelector(b));\n\n      return subB - subA;\n    });\n  }\n\n  /**\n   * Récupère le timestamp d'une Date ou d'un nombre.\n   * @param value Date ou nombre représentant un timestamp.\n   * @returns Le timestamp en millisecondes.\n   */\n  static #_getTime(value: Date | number): number {\n    return value instanceof Date ? value.getTime() : value;\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable } from '../core/utils/types';\nimport style from './bnum-element.less';\nimport { BnumDOM, Container, EnhancedContainer } from '../core/utils/BnumDom';\nimport { ArrayUtils } from '../core/utils/ArrayUtils';\n\nexport type CustomDom = EnhancedContainer<Container>;\n\n/**\n * Type du callback déclenché lors d’un changement d’attribut HTML.\n *\n * @param name Nom de l'attribut modifié.\n * @param oldVal Ancienne valeur de l'attribut.\n * @param newVal Nouvelle valeur de l'attribut.\n */\nexport type BnumHTMLElementAttributeChangedCallback = (\n  name: string,\n  oldVal: string | null,\n  newVal: string | null,\n) => void;\n\nexport type TagCreatorConstructor = {\n  classes?: Nullable<string[]>;\n  attributes?: Nullable<Record<string, any>>;\n  data?: Nullable<Record<string, any>>;\n  child?: Nullable<HTMLElement | string>;\n};\n\n/**\n * Classe de base pour les composants bnum personnalisés.\n *\n * Fournit les méthodes de cycle de vie et de gestion des attributs pour les webcomponents.\n * Permet la gestion de données internes, d'attributs, de classes CSS, de styles, d'événements, et de rendu.\n */\nexport default abstract class BnumElement extends HTMLElement {\n  /** Données mises en mémoire, accessibles via la méthode data(). */\n  #_data: Map<string, any> | null = null;\n  #_pendingAttributes: Map<\n    string,\n    { oldVal: string | null; newVal: string | null }\n  > | null = null;\n  #_updateScheduled = false;\n\n  /** Indique si le composant a déjà été chargé une première fois. */\n  #firstLoad = false;\n\n  protected _p_styleElement: HTMLStyleElement | null = null;\n\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   * À surcharger dans les classes dérivées pour observer des attributs spécifiques.\n   */\n  static get observedAttributes(): string[] {\n    return this._p_observedAttributes();\n  }\n\n  /**\n   * Méthode interne pour définir les attributs observés.\n   * Peut être surchargée par les classes dérivées.\n   * @returns Liste des noms d'attributs à observer.\n   */\n  protected static _p_observedAttributes(): string[] {\n    return [];\n  }\n\n  /**\n   * Indique si le composant a été chargé au moins une fois.\n   * Utile pour différencier le premier chargement des rechargements.\n   */\n  get alreadyLoaded(): boolean {\n    return this.#firstLoad;\n  }\n\n  /**\n   * Constructeur du composant.\n   * Initialise l'event de changement d'attribut et attache un shadow DOM si nécessaire.\n   */\n  constructor() {\n    super();\n\n    if (this._p_isShadowElement())\n      this._p_attachCustomShadow() ?? this.attachShadow({ mode: 'open' });\n\n    // Supprime tout script enfant pour éviter l'exécution indésirable.\n    const script = this.querySelector('script');\n    if (script) script.remove();\n  }\n\n  /**\n   * Callback appelée lors d’un changement d’attribut observé.\n   * Déclenche l'événement interne de changement d'attribut.\n   *\n   * @param name Nom de l'attribut modifié.\n   * @param oldVal Ancienne valeur.\n   * @param newVal Nouvelle valeur.\n   */\n  attributeChangedCallback(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (this.#firstLoad) {\n      this.#_pendingAttributes ??= new Map<\n        string,\n        { oldVal: string | null; newVal: string | null }\n      >();\n\n      this.#_pendingAttributes.set(name, { oldVal, newVal });\n\n      if (!this.#_updateScheduled) {\n        this.#_updateScheduled = true;\n\n        requestAnimationFrame(() => this.#_flushUpdates());\n      }\n    }\n  }\n\n  /**\n   * Callback appelée lorsque le composant est ajouté au DOM.\n   * Déclenche le rendu du composant.\n   */\n  connectedCallback(): void {\n    if (!this.#firstLoad) {\n      this.render();\n    }\n  }\n\n  /**\n   * Callback appelée lorsque le composant est retiré du DOM.\n   * Permet de nettoyer les ressources ou événements.\n   */\n  disconnectedCallback(): void {\n    this._p_preunload();\n    this._p_detach();\n  }\n\n  /**\n   * Déclenche le rendu du composant.\n   * Appelle les hooks de préchargement, de rendu et d'attachement.\n   */\n  render(): void {\n    // Empêche de relancer le rendu complet\n    if (this.#firstLoad) return;\n\n    this._p_preload();\n\n    const container = this._p_isShadowElement() ? this.shadowRoot : this;\n    if (container) {\n      if (this._p_isShadowElement()) {\n        // On injecte le style de manière sécurisée\n        const styleStr = this._p_getStyle();\n        if (styleStr) {\n          const styleEl = document.createElement('style');\n          // .textContent est sécurisé contre l'injection XSS\n          styleEl.textContent = styleStr;\n          container.appendChild(styleEl);\n\n          this._p_styleElement = styleEl;\n        }\n\n        // On gère les feuilles de styles adoptées\n        const stylesheets = this._p_getStylesheets();\n        if (\n          stylesheets.length > 0 &&\n          'adoptedStyleSheets' in Document.prototype\n        ) {\n          (container as ShadowRoot).adoptedStyleSheets = [\n            ...(container as ShadowRoot).adoptedStyleSheets,\n            ...stylesheets,\n          ];\n        }\n      }\n\n      // Si un template est déjà défini, on l'utilise\n      const template = this._p_fromTemplate();\n      if (template) {\n        const templateContent = template.content.cloneNode(\n          true,\n        ) as DocumentFragment;\n        container.appendChild(templateContent);\n      }\n\n      // On construit le DOM interne\n      this._p_buildDOM(BnumDOM.from(container));\n    }\n\n    this._p_attach();\n    this.#firstLoad = true;\n  }\n\n  // ======================\n  // === Public helpers ===\n  // ======================\n  //#region public\n\n  /**\n   * Récupère ou définit une donnée liée à l'élément.\n   * @param name Nom de la donnée.\n   * @param options Options de récupération ou de définition.\n   * @returns La valeur de la donnée ou l'instance courante.\n   */\n  data<T>(name: string, opts?: { fromAttribute?: boolean }): T;\n  data<T>(name: string, value: T | symbol, fromAttribute?: boolean): this;\n  data<T>(\n    name: string,\n    valueOrOpts?: T | symbol | { fromAttribute?: boolean },\n    fromAttribute: boolean = false,\n  ): T | this {\n    // Cas lecture : opts est un objet ou undefined\n    if (\n      valueOrOpts === undefined ||\n      valueOrOpts === null ||\n      (typeof valueOrOpts === 'object' && !('value' in valueOrOpts))\n    ) {\n      const opts = (valueOrOpts as { fromAttribute?: boolean }) || {};\n      return this.#_getData<T>(name, opts.fromAttribute ?? false);\n    }\n\n    // Cas écriture : valueOrOpts est T ou symbol\n    return this.#_setData(name, valueOrOpts as T, fromAttribute);\n  }\n\n  /** Ajoute une ou plusieurs classes CSS à l'élément. */\n  addClass(...classNames: string[]): this {\n    this.classList.add(...classNames.flatMap((c) => c.split(' ')));\n    return this;\n  }\n\n  /** Retire une ou plusieurs classes CSS de l'élément. */\n  removeClass(...classNames: string[]): this {\n    this.classList.remove(...classNames.flatMap((c) => c.split(' ')));\n    return this;\n  }\n\n  /** Bascule une classe CSS sur l’élément. */\n  toggleClass(className: string, force?: boolean): this {\n    this.classList.toggle(className, force);\n    return this;\n  }\n\n  /** Vérifie si l’élément possède une classe CSS donnée. */\n  hasClass(className: string): boolean {\n    return this.classList.contains(className);\n  }\n\n  /**\n   * Obtient ou définit un attribut HTML.\n   * @param name Nom de l'attribut.\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur de l'attribut ou l'instance courante.\n   */\n  attr(name: string): string | null;\n  attr(name: string, value: string | boolean | number): this;\n  attr(name: string, value?: string | boolean | number): string | this | null {\n    if (value === undefined || value === null) return this.getAttribute(name);\n    this.setAttribute(\n      name,\n      typeof value === 'string' ? value : value.toString(),\n    );\n    return this;\n  }\n\n  /**\n   * Définit plusieurs attributs HTML à la fois.\n   * @param attribs Objet contenant les paires nom-valeur des attributs à définir.\n   * @returns L'instance courante pour le chaînage.\n   */\n  attrs(attribs: Record<string, string | boolean | number>): this {\n    for (const keys of Object.keys(attribs)) {\n      this.attr(keys, attribs[keys]);\n    }\n    return this;\n  }\n\n  /**\n   * Essaye de définir un attribut html\n   * @param doSomething true pour le définir\n   * @param name Nom de l'attribut\n   * @param value Nouvelle valeur\n   * @returns L'instance courante pour le chaînage.\n   */\n  condAttr(\n    doSomething: boolean,\n    name: string,\n    value: string | boolean | number,\n  ): this {\n    if (doSomething) this.attr(name, value);\n\n    return this;\n  }\n\n  /**\n   * Manipule les styles CSS de l'élément.\n   * @param prop Propriété CSS ou objet de propriétés.\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur du style ou l'instance courante.\n   */\n  css(prop: string): string;\n  css(prop: string, value: string): this;\n  css(prop: Record<string, string>): this;\n  css(prop: string | Record<string, string>, value?: string): string | this {\n    if (typeof prop === 'string') {\n      if (value === undefined) return this.style[prop as any];\n      this.style[prop as any] = value;\n    } else {\n      for (const [k, v] of Object.entries(prop)) {\n        this.style[k as any] = v;\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Manipule le contenu HTML de l'élément.\n   * @param value Valeur à définir (optionnel).\n   * @returns Contenu HTML ou l'instance courante.\n   */\n  html(): string;\n  html(value: string): this;\n  html(value?: string): string | this {\n    if (value === undefined) return this.innerHTML;\n    this.innerHTML = value;\n    return this;\n  }\n\n  /**\n   * Manipule le texte de l'élément.\n   * @param value Valeur à définir (optionnel).\n   * @returns Texte ou l'instance courante.\n   */\n  text(): string;\n  text(value: string): this;\n  text(value?: string): string | this {\n    if (value === undefined) return this.textContent || '';\n    this.textContent = value;\n    return this;\n  }\n\n  /**\n   * Manipule la valeur (pour input/select/textarea).\n   * @param value Valeur à définir (optionnel).\n   * @returns Valeur ou l'instance courante.\n   */\n  val(): string | undefined;\n  val(value: string): this | undefined;\n  val(value?: string): string | this | undefined {\n    if ('value' in this) {\n      if (value === undefined) return (this as any).value;\n      (this as any).value = value;\n      return this;\n    }\n    return undefined;\n  }\n\n  /**\n   * Ajoute un écouteur d'événement sur l'élément.\n   * @param type Type d'événement.\n   * @param listener Fonction de rappel.\n   * @param options Options d'écoute.\n   * @returns L'instance courante.\n   */\n  on(\n    type: string,\n    listener: EventListener,\n    options?: boolean | AddEventListenerOptions,\n  ): this {\n    this.addEventListener(type, listener, options);\n    return this;\n  }\n\n  /**\n   * Retire un écouteur d'événement de l'élément.\n   * @param type Type d'événement.\n   * @param listener Fonction de rappel.\n   * @param options Options d'écoute.\n   * @returns L'instance courante.\n   */\n  off(\n    type: string,\n    listener: EventListener,\n    options?: boolean | EventListenerOptions,\n  ): this {\n    this.removeEventListener(type, listener, options);\n    return this;\n  }\n\n  /**\n   * Déclenche un événement personnalisé sur l'élément.\n   * @param type Type d'événement.\n   * @param detail Détail de l'événement.\n   * @returns L'instance courante.\n   */\n  trigger(type: string, detail?: any, options?: CustomEventInit): this {\n    this.dispatchEvent(new CustomEvent(type, { detail, ...options }));\n    return this;\n  }\n\n  /**\n   * Ajoute un ou plusieurs nœuds ou chaînes HTML à la fin de l'élément.\n   * @param nodes Nœuds ou chaînes HTML à ajouter.\n   * @returns L'instance courante.\n   */\n  append(...nodes: (Node | string)[]): this {\n    for (const node of nodes) {\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('beforeend', node);\n      } else {\n        this.appendChild(node);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Ajoute l'élément courant à un autre élément cible.\n   * @param target Élément cible.\n   * @returns L'instance courante.\n   */\n  appendTo(target: Element): this {\n    target?.appendChild(this);\n    return this;\n  }\n\n  /**\n   * Ajoute un ou plusieurs nœuds ou chaînes HTML au début de l'élément.\n   * @param nodes Nœuds ou chaînes HTML à ajouter.\n   * @returns L'instance courante.\n   */\n  prepend(...nodes: (Node | string)[]): this {\n    for (let i = nodes.length - 1; i >= 0; --i) {\n      const node = nodes[i];\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('afterbegin', node);\n      } else {\n        this.insertBefore(node, this.firstChild);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Ajoute l'élément courant au début d'un autre élément cible.\n   * @param target Élément cible.\n   * @returns L'instance courante.\n   */\n  prependTo(target: Element): this {\n    target?.insertBefore(this, target.firstChild);\n    return this;\n  }\n\n  /**\n   * Insère un ou plusieurs nœuds ou chaînes HTML avant l'élément courant.\n   * @param nodes Nœuds ou chaînes HTML à insérer.\n   * @returns L'instance courante.\n   */\n  before(...nodes: (Node | string)[]): this {\n    for (const node of nodes) {\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('beforebegin', node);\n      } else {\n        this.parentNode?.insertBefore(node, this);\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Insère un ou plusieurs nœuds ou chaînes HTML après l'élément courant.\n   * @param nodes Nœuds ou chaînes HTML à insérer.\n   * @returns L'instance courante.\n   */\n  after(...nodes: (Node | string)[]): this {\n    for (let i = nodes.length - 1; i >= 0; --i) {\n      const node = nodes[i];\n      if (typeof node === 'string') {\n        this.insertAdjacentHTML('afterend', node);\n      } else if (this.parentNode) {\n        if (this.nextSibling) {\n          this.parentNode.insertBefore(node, this.nextSibling);\n        } else {\n          this.parentNode.appendChild(node);\n        }\n      }\n    }\n    return this;\n  }\n\n  /**\n   * Cache l'élément en lui appliquant la classe `hidden`\n   * @returns Chaîne\n   */\n  hide() {\n    return this.addClass('hidden');\n  }\n\n  /**\n   * Affiche l'élément en lui enlevant la classe `hidden`\n   * @returns Chaîne\n   */\n  show() {\n    return this.removeClass('hidden');\n  }\n  //#endregion\n\n  // ======================\n  // === Private helpers ==\n  // ======================\n  //#region private\n\n  /**\n   * Récupère une donnée interne ou depuis un attribut data-*.\n   * @param name Nom de la donnée.\n   * @param fromAttribute Si vrai, lit depuis l'attribut data-*.\n   * @returns La valeur de la donnée.\n   */\n  #_getData<T>(name: string, fromAttribute: boolean): T {\n    let data: any = EMPTY_STRING;\n\n    if (fromAttribute) {\n      data = this.getAttribute(`data-${name}`);\n    } else {\n      if (this.hasAttribute(`data-${name}`)) {\n        data = this.#_getData<T>(name, true);\n        this.removeAttribute(`data-${name}`);\n        this._p_setData(name, data);\n      } else {\n        data = this._p_getData<T>(name);\n      }\n    }\n\n    return data;\n  }\n\n  /**\n   * Définit une donnée interne ou dans un attribut data-*.\n   * @param name Nom de la donnée.\n   * @param value Valeur à définir.\n   * @param fromAttribute Si vrai, écrit dans l'attribut data-*.\n   * @returns L'instance courante.\n   */\n  #_setData<T>(name: string, value: T, fromAttribute: boolean): this {\n    if (fromAttribute) this.setAttribute(`data-${name}`, String(value));\n    else this._p_setData(name, value);\n    return this;\n  }\n\n  /**\n   * Exécute toutes les mises à jour en attente en une seule fois.\n   */\n  #_flushUpdates(): void {\n    // On libère le verrou pour permettre de futures mises à jour\n    this.#_updateScheduled = false;\n\n    if (this.#_pendingAttributes === null) return;\n\n    if (\n      (this.constructor as any).__CONFIG_UPDATE_ALL__ ??\n      this._p_isUpdateForAllAttributes()\n    )\n      this._p_update('all', null, null);\n    else {\n      // On itère sur tous les changements accumulés\n      for (const [name, { oldVal, newVal }] of this.#_pendingAttributes) {\n        if (this._p_update(name, oldVal, newVal) === 'break') break;\n      }\n    }\n\n    // On vide la liste des modifications en attente\n    this.#_pendingAttributes.clear();\n\n    this._p_postFlush();\n  }\n  //#endregion\n\n  // ======================\n  // === Protected ========\n  // ======================\n  //#region protected\n  /**\n   * Permet d'attacher un shadowroot custom au lieu de juste `{mode:'open'}`\n   * @returns Null si pas de root custom.\n   */\n  protected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n    return null;\n  }\n\n  /**\n   * Demande une mise à jour de l'élément.\n   * La mise à jour sera effectuée lors du prochain frame via requestAnimationFrame.\n   */\n  protected _p_requestAttributeUpdate(): this {\n    if (this.#firstLoad && !this.#_updateScheduled) {\n      this.#_updateScheduled = true;\n      requestAnimationFrame(() => this.#_flushUpdates());\n    }\n\n    return this;\n  }\n\n  /**\n   * Ajoute des attributs en attente de traitement.\n   * @param name Nom de l'attribut.\n   * @param oldVal Ancienne valeur\n   * @param newVal Nouvelle valeur\n   * @returns Chaîne\n   */\n  protected _p_addPendingAttribute(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): this {\n    this.#_pendingAttributes ??= new Map<\n      string,\n      { oldVal: string | null; newVal: string | null }\n    >();\n\n    this.#_pendingAttributes.set(name, { oldVal, newVal });\n\n    return this;\n  }\n\n  /**\n   * Récupère une donnée interne.\n   * @param name Nom de la donnée.\n   * @returns Valeur de la donnée.\n   */\n  protected _p_getData<T>(name: string): T {\n    this.#_data ??= new Map<string, any>();\n\n    return this.#_data.get(name);\n  }\n\n  /**\n   * Définit une donnée interne.\n   * @param name Nom de la donnée.\n   * @param value Valeur à définir.\n   * @returns L'instance courante.\n   */\n  protected _p_setData<T>(name: string, value: T): this {\n    this.#_data ??= new Map<string, any>();\n\n    this.#_data.set(name, value);\n    return this;\n  }\n\n  /**\n   * Vérifie si une donnée interne existe.\n   * @param name Nom de la donnée.\n   * @returns Vrai si la donnée existe.\n   */\n  protected _p_hasData(name: string): boolean {\n    return this.#_data === null ? false : this.#_data.has(name);\n  }\n\n  /**\n   * Crée un élément HTML générique avec options (classes, attributs, data, enfant).\n   * @param tag Nom de la balise HTML à créer.\n   * @param options Options de création (classes, attributs, data, enfant).\n   * @returns L'élément HTML créé.\n   */\n  protected _p_createTag<T extends HTMLElement>(\n    tag: string,\n    options?: TagCreatorConstructor,\n  ): T;\n  /**\n   * Crée un élément <span> avec options.\n   * @param tag 'span'\n   * @param options Options de création.\n   * @returns L'élément HTMLSpanElement créé.\n   */\n  protected _p_createTag<HTMLSpanElement>(\n    tag: 'span',\n    options?: TagCreatorConstructor,\n  ): HTMLSpanElement;\n  /**\n   * Crée un élément <slot> avec options.\n   * @param tag 'slot'\n   * @param options Options de création.\n   * @returns L'élément HTMLSlotElement créé.\n   */\n  protected _p_createTag<HTMLSlotElement>(\n    tag: 'slot',\n    options?: TagCreatorConstructor,\n  ): HTMLSlotElement;\n  /**\n   * Crée un élément <div> avec options.\n   * @param tag 'div'\n   * @param options Options de création.\n   * @returns L'élément HTMLDivElement créé.\n   */\n  protected _p_createTag<HTMLDivElement>(\n    tag: 'div',\n    options?: TagCreatorConstructor,\n  ): HTMLDivElement;\n  /**\n   * Implémentation de la création d'un élément HTML avec options.\n   * @param tag Nom de la balise HTML à créer.\n   * @param options Options de création (classes, attributs, data, enfant).\n   * @returns L'élément HTML créé.\n   */\n  protected _p_createTag<T extends HTMLElement>(\n    tag: string,\n    options?: TagCreatorConstructor,\n  ): T {\n    const element = document.createElement(tag) as T;\n\n    if (options) {\n      const { classes, attributes, data, child } = options;\n\n      if (classes) {\n        if (attributes) attributes['class'] = classes.join(' ');\n        else element.classList.add(...classes);\n      }\n\n      if (data) {\n        for (const [dataName, dataValue] of Object.entries(data)) {\n          element.setAttribute(`data-${dataName}`, String(dataValue));\n        }\n      }\n\n      if (attributes) {\n        for (const [attrName, attrValue] of Object.entries(attributes)) {\n          element.setAttribute(attrName, String(attrValue));\n        }\n      }\n\n      if (child)\n        element.appendChild(\n          typeof child === 'string' ? document.createTextNode(child) : child,\n        );\n    }\n\n    return element;\n  }\n\n  /**\n   * Crée un élément <slot> avec nom et valeur par défaut.\n   * @param name Nom du slot (optionnel).\n   * @param defaultValue Valeur par défaut si le slot est vide (optionnel).\n   * @returns L'élément HTMLSlotElement créé.\n   */\n  protected _p_createSlot(\n    name?: string,\n    defaultValue?: HTMLElement,\n  ): HTMLSlotElement {\n    const slot = this._p_createTag<HTMLSlotElement>('slot', {\n      attributes: name ? { name } : undefined,\n      child: defaultValue || null,\n    });\n    return slot;\n  }\n\n  /**\n   * Crée plusieurs éléments <slot> selon les options fournies.\n   * @param options Liste d'options pour chaque slot.\n   * @returns Tableau d'éléments HTMLSlotElement créés.\n   */\n  protected _p_createSlots(\n    ...options: { name?: string; defaultValue?: HTMLElement }[]\n  ): HTMLSlotElement[] {\n    const slots: HTMLSlotElement[] = [];\n    for (const opt of options) {\n      slots.push(this._p_createSlot(opt.name, opt.defaultValue));\n    }\n    return slots;\n  }\n\n  /**\n   * Crée un élément <span> avec options.\n   * @param options Options de création.\n   * @returns L'élément HTMLSpanElement créé.\n   */\n  protected _p_createSpan(options?: TagCreatorConstructor): HTMLSpanElement {\n    return this._p_createTag('span', options);\n  }\n\n  /**\n   * Crée plusieurs éléments <span> selon les options fournies.\n   * @param options Liste d'options pour chaque span.\n   * @returns Tableau d'éléments HTMLSpanElement créés.\n   */\n  protected _p_createSpans(\n    ...options: (TagCreatorConstructor | null)[]\n  ): HTMLSpanElement[] {\n    const spans: HTMLSpanElement[] = [];\n    for (const opt of options) {\n      spans.push(this._p_createSpan(opt || undefined));\n    }\n    return spans;\n  }\n\n  /**\n   * Crée un élément <div> avec options.\n   * @param options Options de création.\n   * @returns L'élément HTMLDivElement créé.\n   */\n  protected _p_createDiv(options?: TagCreatorConstructor): HTMLDivElement {\n    return this._p_createTag('div', options);\n  }\n\n  /**\n   * Crée plusieurs éléments <div> selon les options fournies.\n   * @param options Liste d'options pour chaque div.\n   * @returns Tableau d'éléments HTMLDivElement créés.\n   */\n  protected _p_createDivs(\n    ...options: (TagCreatorConstructor | null)[]\n  ): HTMLDivElement[] {\n    const divs: HTMLDivElement[] = [];\n    for (const opt of options) {\n      divs.push(this._p_createDiv(opt || undefined));\n    }\n    return divs;\n  }\n\n  /**\n   * Crée un nœud de texte.\n   * @param text Texte à insérer dans le nœud.\n   * @returns Le nœud de texte créé.\n   */\n  protected _p_createTextNode(text: string): Text {\n    return document.createTextNode(text);\n  }\n\n  /**\n   * Indique si l'élément est à l'intérieur d'un ShadowRoot.\n   */\n  get _p_isInsideShadowRoot(): boolean {\n    return this.getRootNode({ composed: false }) instanceof ShadowRoot;\n  }\n\n  // ======================\n  // === Virtual methods ==\n  // ======================\n\n  /**\n   * Hook appelé après le flush des mises à jour d'attributs.\n   */\n  protected _p_postFlush(): void {}\n\n  /**\n   * Si la méthode _p_update doit être appelé une seule fois ou non.\n   * @returns `true` pour appeler _p_update une seule fois, `false` pour l'appeler à chaque changement d'attribut.\n   */\n  protected _p_isUpdateForAllAttributes(): boolean {\n    return false;\n  }\n\n  /**\n   * Retourne le style CSS à injecter dans le composant.\n   * @returns Chaîne de style CSS.\n   * @deprecated Utiliser _p_getStylesheet ou _p_getStylesheets à la place.\n   */\n  protected _p_getStyle(): string {\n    return EMPTY_STRING;\n  }\n\n  /**\n   * Retourne la liste des feuilles de style CSS à injecter dans le composant.\n   * @returns Tableau de feuilles de style CSS.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    const sheets = [BASE_STYLE];\n    const componentStyle = (this.constructor as any).__CACHE_STYLE__;\n\n    if (componentStyle)\n      sheets.push(\n        ...(Array.isArray(componentStyle) ? componentStyle : [componentStyle]),\n      );\n\n    return sheets;\n  }\n\n  /**\n   * Hook appelé avant le rendu du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_preload(): void {}\n\n  /**\n   * Hook appelé à la création de l'élément.\n   *\n   * À surcharger dans les classes dérivées, doit créer le dom via des nodes et non via innerHTML.\n   *\n   * Est appelé qu'une seule fois.\n   *\n   * @param container Le conteneur (ShadowRoot ou this) où construire le DOM.\n   */\n  protected _p_buildDOM(container: CustomDom): void {}\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return (this.constructor as any).__CACHE_TEMPLATE__ || null;\n  }\n\n  /**\n   * Hook appelé LORS D'UN CHANGEMENT d'attribut, après le premier rendu.\n   *\n   * C'est ici que doit se faire la mise à jour \"chirurgicale\" du DOM.\n   *\n   * @param name Nom de l'attribut modifié.\n   * @param oldVal Ancienne valeur.\n   * @param newVal Nouvelle valeur.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {}\n\n  /**\n   * Hook appelé après le rendu du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_attach(): void {}\n\n  /**\n   * Hook appelé avant le déchargement du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_preunload(): void {}\n\n  /**\n   * Hook appelé lors du détachement du composant.\n   * À surcharger dans les classes dérivées.\n   */\n  protected _p_detach(): void {}\n\n  /**\n   * Indique si le composant doit utiliser un Shadow DOM.\n   * À surcharger dans les classes dérivées.\n   * @returns Vrai si Shadow DOM.\n   */\n  protected _p_isShadowElement(): boolean {\n    return (this.constructor as any).__CONFIG_SHADOW__ ?? true;\n  }\n  //#endregion\n\n  // ======================\n  // === Static API =======\n  // ======================\n  //#region static\n\n  protected static _p_WriteAttributes(attrs: Record<string, string>): string {\n    if (Object.keys(attrs).length === 0) return EMPTY_STRING;\n\n    return ArrayUtils.toStringAttribs(attrs);\n  }\n\n  /**\n   * Méthode statique pour créer une instance du composant.\n   * Doit être implémentée dans les classes dérivées.\n   * @throws Erreur si non implémentée.\n   */\n  static Create(...args: any[]): BnumElement {\n    throw new Error('Create method must be implemented in derived class.');\n  }\n\n  /**\n   * Retourne le nom de la balise du composant.\n   * Doit être implémenté dans les classes dérivées.\n   * @throws Erreur si non implémenté.\n   * @readonly\n   */\n  static get TAG(): string {\n    throw new Error('TAG getter must be implemented in derived class.');\n  }\n\n  /**\n   * Construit une feuille de style CSS à partir d'une chaîne CSS.\n   * @param cssText CSS à ajouter\n   * @returns Feuille de style\n   */\n  static ConstructCSSStyleSheet(cssText: string): CSSStyleSheet {\n    const sheet = new CSSStyleSheet();\n    sheet.replaceSync(cssText);\n    return sheet;\n  }\n\n  static CreateTemplate(html: string): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = html;\n    return template;\n  }\n\n  /**\n   * Définit le composant comme élément personnalisé si ce n'est pas déjà fait.\n   */\n  static TryDefine(): void {\n    this.TryDefineElement(\n      this.TAG,\n      this as unknown as CustomElementConstructor,\n    );\n  }\n\n  /**\n   * Définit un élément personnalisé avec le tag et le constructeur donnés.\n   * @param tag Nom de la balise personnalisée.\n   * @param constructor Constructeur de l'élément.\n   */\n  static TryDefineElement(\n    tag: string,\n    constructor: CustomElementConstructor,\n  ): void {\n    if (!customElements.get(tag)) {\n      customElements.define(tag, constructor);\n    }\n  }\n\n  //#endregion\n}\n\n/**\n * Style commun à tous les BnumElement.\n */\nconst BASE_STYLE = BnumElement.ConstructCSSStyleSheet(style);\n","import { BnumConfig } from './BnumConfig';\nimport { LogEnum } from './LogEnum';\n\nexport default class Log {\n  static trace(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.TRACE\n    )\n      console.trace(`[${context}]`, ...args);\n  }\n\n  static debug(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.debug(`🔎 [${context}]`, ...args);\n  }\n\n  static info(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.INFO\n    )\n      console.info(`ℹ️ [${context}]`, ...args);\n  }\n\n  static warn(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.WARN\n    )\n      console.warn(`⚠️ [${context}]`, ...args);\n  }\n\n  static error(context: string, ...args: any[]): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.ERROR\n    )\n      console.error(`### [${context}]`, ...args);\n  }\n\n  static time(label: string): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.time(label);\n  }\n\n  static timeEnd(label: string): void {\n    if (\n      BnumConfig.Get('console_logging') &&\n      BnumConfig.Get('console_logging_level')! <= LogEnum.DEBUG\n    )\n      console.timeEnd(label);\n  }\n}\n","import { EMPTY_STRING } from \"@rotomeca/utils\";\nimport { Nullable } from \"./utils\";\n\nexport default class RotomecaCookies {\n  /**\n   * Récupère la valeur d'un cookie par son nom\n   * @param name Nom du cookie\n   * @returns Valeur du cookie ou null si absent\n   */\n  get(name: string): Nullable<string> {\n    const match = document.cookie.match(\n      new RegExp('(^| )' + name + '=([^;]+)'),\n    );\n    return match ? decodeURIComponent(match[2]) : null;\n  }\n\n  /**\n   * Définit un cookie\n   * @param name Nom du cookie\n   * @param value Valeur du cookie\n   * @param options Options : nombre de jours de validité et chemin\n   */\nset(\n    name: string,\n    value: string,\n    options: { days?: number; path?: string; secure?: boolean; sameSite?: 'Lax' | 'Strict' | 'None' } = {}\n  ): void {\n    const { \n      days, \n      path = '/', \n      secure = true, \n      sameSite = 'Lax' \n    } = options;\n\n    let expires = EMPTY_STRING;\n    if (days) {\n      const date = new Date();\n      date.setTime(date.getTime() + days * 86_400_000); \n      expires = `; expires=${date.toUTCString()}`;\n    }\n\n    // Protection contre l'injection via encodeURIComponent et attributs de sécurité\n    const cookieString = `${encodeURIComponent(name)}=${encodeURIComponent(value)}${expires}; path=${path}; SameSite=${sameSite}${secure ? '; Secure' : EMPTY_STRING}`;\n    document.cookie = cookieString;\n  }\n\n\n  /**\n   * Supprime un cookie\n   * @param name Nom du cookie à supprimer\n   */\n  delete(name: string): void {\n    this.set(name, '', { days: -1 });\n  }\n}","/**\n *  Classe pour gérer les métadonnées du document HTML (titre, balises meta).\n */\nexport default class RotomecaMeta {\n  /**\n   * Change le titre du document\n   */\n  set title(value: string) {\n    document.title = value;\n  }\n\n  /**\n   * Retourne le titre actuel du document\n   */\n  get title(): string {\n    return document.title;\n  }\n\n  /**\n   * Définit une balise meta standard (name=\"description\")\n   * @param content Contenu de la balise meta description\n   */\n  setDescription(content: string): this {\n    return this.#updateMeta('name', 'description', content);\n  }\n\n  /**\n   * Définit une balise OpenGraph (property=\"og:image\")\n   * @param property Nom de la propriété OpenGraph (ex: \"image\")\n   * @param content Valeur de la propriété\n   */\n  setOgTag(property: string, content: string): this {\n    return this.#updateMeta('property', `og:${property}`, content);\n  }\n\n  /**\n   * Méthode générique interne pour créer ou mettre à jour une balise meta\n   * @param attrKey \"name\" ou \"property\"\n   * @param attrValue Valeur de l'attribut\n   * @param content Contenu de la balise meta\n   * @private\n   */\n  #updateMeta(\n    attrKey: 'name' | 'property',\n    attrValue: string,\n    content: string,\n  ): this {\n    let tag = document.querySelector(`meta[${attrKey}=\"${attrValue}\"]`);\n\n    if (!tag) {\n      tag = document.createElement('meta');\n      tag.setAttribute(attrKey, attrValue);\n      document.head.appendChild(tag);\n    }\n\n    tag.setAttribute('content', content);\n    return this;\n  }\n}","export default class RotomecaScripts {\n  /**\n   * Cache pour ne pas charger 2 fois le même script\n   * @private\n   */\n  #_loaded: Set<string> = new Set();\n\n  /**\n   * Charge un script externe et attend qu'il soit prêt\n   * @param url URL du script à charger\n   * @param options async et defer (par défaut true)\n   * @returns Promise résolue quand le script est chargé\n   */\n  load(url: string, { async = true, defer = true } = {}): Promise<void> {\n    if (this.#_loaded.has(url)) return Promise.resolve();\n\n    // Si le script est déjà dans le DOM (ajouté manuellement)\n    if (document.querySelector(`script[src=\"${url}\"]`)) {\n      this.#_loaded.add(url);\n      return Promise.resolve();\n    }\n\n    return new Promise((resolve, reject) => {\n      const script = document.createElement('script');\n      script.src = url;\n      script.async = async;\n      script.defer = defer;\n\n      script.onload = () => {\n        this.#_loaded.add(url);\n        resolve();\n      };\n\n      script.onerror = () => {\n        reject(new Error(`RotomecaScripts: Failed to load script ${url}`));\n      };\n\n      document.head.appendChild(script);\n    });\n  }\n}","import { EMPTY_STRING } from \"@rotomeca/utils\";\nimport { Nullable } from \"./utils\";\nimport RotomecaCssRule from \"./RotomecaCssRule\";\n\n/**\n * Gère un ensemble de feuilles de style CSS dynamiques pour l'application.\n * Permet d'ajouter, supprimer et mettre à jour des règles CSS à la volée.\n */\nexport default class RotomecaStyleSheets {\n  /**\n   * Identifiant de la mise à jour planifiée (requestAnimationFrame).\n   * Null si aucune mise à jour n'est en attente.\n   */\n  #_pendingUpdate: Nullable<number> = null;\n  /**\n   * Indique si la feuille de style native a été montée dans le document.\n   */\n  #_mounted = false;\n  /**\n   * Registre des règles CSS, indexées par identifiant.\n   */\n  #_registry: Map<string, RotomecaCssRule> = new Map();\n  /**\n   * Map des fonctions de nettoyage des listeners pour chaque règle.\n   */\n  #_listenersDisposers: Map<string, () => void> = new Map();\n  /**\n   * Feuille de style native utilisée pour injecter les règles dans le DOM.\n   */\n  #_nativeSheet: CSSStyleSheet = new CSSStyleSheet();\n\n  /**\n   * Ajoute une règle CSS avec un identifiant spécifique.\n   * @param id Identifiant unique de la règle.\n   * @param rule Règle CSS à ajouter.\n   */\n  add(id: string, rule: RotomecaCssRule): this {\n    if (this.#_registry.has(id)) {\n      console.warn('/!\\\\[RotomecaStyleSheets/add]', `Rule with id '${id}' already exists.`);\n      return this;\n    }\n\n    rule.onUpdate.add(id, () => this.#_scheduleRender());\n\n    this.#_listenersDisposers.set(id, () => {\n      rule.onUpdate.remove(id);\n    });\n\n    this.#_registry.set(id, rule);\n\n    return this.#_scheduleRender();\n  }\n\n  /**\n   * Ajoute une règle CSS et génère automatiquement un identifiant.\n   * @param rule Règle CSS à ajouter.\n   * @returns L'identifiant généré.\n   */\n  push(rule: RotomecaCssRule): string {\n    const id = this.#_generateId();\n    void this.add(id, rule);\n    return id;\n  }\n\n  /**\n   * Ajoute plusieurs règles CSS à la feuille de style.\n   * @param rules Liste des règles à ajouter.\n   */\n  addMultiples(...rules: RotomecaCssRule[]): this {\n    for (const rule of rules) {\n      this.push(rule);\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime une règle CSS par son identifiant.\n   * @param id Identifiant de la règle à supprimer.\n   */\n  remove(id: string): this {\n    if (this.#_registry.has(id)) {\n      const disposer = this.#_listenersDisposers.get(id);\n      if (disposer) disposer();\n      this.#_listenersDisposers.delete(id);\n\n      this.#_registry.delete(id);\n      return this.#_scheduleRender();\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime toutes les règles CSS de la feuille de style.\n   */\n  clear(): this {\n    for (const disposer of this.#_listenersDisposers.values()) {\n      disposer();\n    }\n    this.#_registry.clear();\n    this.#_listenersDisposers.clear();\n    return this.#_scheduleRender();\n  }\n\n  /**\n   * Monte la feuille de style native dans le document si ce n'est pas déjà fait.\n   * @private\n   */\n  #_mount(): this {\n    if (\n      !this.#_mounted &&\n      !document.adoptedStyleSheets.includes(this.#_nativeSheet)\n    ) {\n      document.adoptedStyleSheets = [\n        ...document.adoptedStyleSheets,\n        this.#_nativeSheet,\n      ];\n      this.#_mounted = true;\n    }\n\n    return this;\n  }\n\n  /**\n   * Planifie un rendu asynchrone de la feuille de style.\n   * @private\n   */\n  #_scheduleRender(): this {\n    if (this.#_pendingUpdate) return this;\n    this.#_pendingUpdate = requestAnimationFrame(() => {\n      this.#_render();\n      this.#_pendingUpdate = null;\n    });\n    return this;\n  }\n\n  /**\n   * Génère le CSS et le remplace dans la feuille de style native.\n   * @private\n   */\n  #_render(): this {\n    if (this.#_registry.size === 0) {\n      this.#_nativeSheet.replaceSync(EMPTY_STRING);\n      return this;\n    }\n\n    const cssContent = Array.from(this.#_registry.values())\n      .map((rule) => rule.toString())\n      .join('\\n');\n\n    this.#_nativeSheet.replaceSync(cssContent);\n\n    return this.#_mount();\n  }\n\n  /**\n   * Génère un identifiant unique pour une nouvelle règle CSS.\n   * @private\n   */\n  #_generateId(): string {\n    do {\n      var id = `bnum-stylesheet-${crypto.randomUUID().substring(0, 8)}`;\n    } while (this.#_registry.has(id));\n    return id;\n  }\n}\n","import RotomecaCookies from \"./RotomecaCookies\";\nimport RotomecaMeta from \"./RotomecaMeta\";\nimport RotomecaScripts from \"./RotomecaScripts\";\nimport RotomecaStyleSheets from \"./RotomecaStyleSheets\";\nimport { Nullable } from \"./utils\";\n\n/**\n * Singleton pour accéder aux feuilles de style dynamiques de l'application.\n */\nexport default class RotomecaDocument {\n  /**\n   * Instance unique de RotomecaDocument.\n   * @private\n   */\n  static #_instance: Nullable<RotomecaDocument> = null;\n  /**\n   * Retourne l'instance unique de RotomecaDocument.\n   * @deprecated Utilisez RotomecaDocument.Instance à la place.\n   */\n  static get instance(): RotomecaDocument {\n    return this.Instance;\n  }\n\n  static get Instance(): RotomecaDocument {\n    return (this.#_instance ??= new RotomecaDocument());\n  }\n\n  /**\n   * Instance des feuilles de style dynamiques.\n   * @private\n   */\n  #_styleSheets: Nullable<RotomecaStyleSheets> = null;\n\n  /**\n   * Retourne l'ensemble des feuilles de style dynamiques.\n   */\n  get styleSheets(): RotomecaStyleSheets {\n    return (this.#_styleSheets ??= new RotomecaStyleSheets());\n  }\n\n  #_meta: Nullable<RotomecaMeta> = null;\n  /**\n   * Retourne l'objet de gestion des métadonnées du document.\n   */\n  get meta(): RotomecaMeta {\n    return (this.#_meta ??= new RotomecaMeta());\n  }\n\n  #_scripts: Nullable<RotomecaScripts> = null;\n  /**\n   * Retourne l'objet de gestion des scripts du document.\n   */\n  get scripts(): RotomecaScripts {\n    return (this.#_scripts ??= new RotomecaScripts());\n  }\n\n  #_cookies: Nullable<RotomecaCookies> = null;\n  /**\n   * Retourne l'objet de gestion des cookies du document.\n   */\n  get cookies(): RotomecaCookies {\n    return (this.#_cookies ??= new RotomecaCookies());\n  }\n\n  /**\n   * Retourne l'objet Document du navigateur.\n   */\n  get document(): Document {\n    return document;\n  }\n}","/**\n * @template T\n * @callback OnCallbackAddedCallback\n * @param {string} key\n * @param {T} callbackAdded\n * @return {void}\n */\n\n/**\n * @template T\n * @callback OnCallbackRemovedCallback\n * @param {string} key\n * @param {T} callbackRemoved\n * @return {void}\n */\n\n/**\n * @class\n * @classdesc Contient les données d'un callback. La fonction et les arguments.\n * @template T\n * @package\n */\nclass JsEventData {\n  /**\n   * T doit être une fonction\n   * @param {T} callback Fonction qui sera appelé\n   * @param {Array} args Arguments à ajouter lorsque la fonction sera appelé\n   */\n  constructor(callback, args) {\n    /**\n     * Fonction qui sera appelé\n     * @type {T}\n     */\n    this.callback = callback;\n    /**\n     * Arguments à ajouter lorsque la fonction sera appelé\n     * @type {Array}\n     */\n    this.args = args;\n  }\n}\n\n/**\n * @class\n * @classdesc Représente un évènement. On lui ajoute ou supprime des callbacks, puis on les appelle les un après les autres.\n * @template T\n */\nclass JsEvent {\n  #_onnadded;\n  #_onremoved;\n  /**\n   * Constructeur de la classe.\n   */\n  constructor() {\n    /**\n     * Liste des évènements à appeler\n     * @type {Object<string, JsEventData<T>>}\n     * @member\n     */\n    this.events = {};\n  }\n\n  /**\n   * Fire when a callback is added\n   * @type {JsEvent<OnCallbackAddedCallback<T>>}\n   * @readonly\n   * @event\n   */\n  get onadded() {\n    if (!this.#_onnadded) this.#_onnadded = new JsEvent();\n\n    return this.#_onnadded;\n  }\n\n  /**\n   * Fire when a callback is removed\n   * @type {JsEvent<OnCallbackRemovedCallback<T>>}\n   * @event\n   * @readonly\n   */\n  get onremoved() {\n    if (!this.#_onremoved) this.#_onremoved = new JsEvent();\n\n    return this.#_onremoved;\n  }\n\n  /**\n   * Ajoute un callback\n   * @param {T} event Callback qui sera appelé lors de l'appel de l'évènement\n   * @param  {...any} args Liste des arguments qui seront passé aux callback\n   * @returns {string} Clé créée\n   * @fires JsEvent.onadded\n   */\n  push(event, ...args) {\n    const key = this.#_generateKey();\n    this.add(key, event, ...args);\n    return key;\n  }\n\n  /**\n   * Ajoute un callback avec un clé qui permet de le retrouver plus tard\n   * @param {string} key Clé de l'évènement\n   * @param {T} event Callback qui sera appelé lors de l'appel de l'évènement\n   * @param  {...any} args Liste des arguments qui seront passé aux callback\n   * @fires JsEvent.onadded\n   */\n  add(key, event, ...args) {\n    this.events[key] = new JsEventData(event, args);\n    this.onadded.call(key, this.events[key]);\n  }\n\n  /**\n   * Vérifie si une clé éxiste\n   * @param {string} key\n   * @returns {boolean}\n   */\n  has(key) {\n    return !!this.events[key];\n  }\n\n  /**\n   * Supprime un callback\n   * @param {string} key Clé\n   * @fires JsEvent.onremoved\n   */\n  remove(key) {\n    this.onremoved.call(key, this.events[key]);\n    this.events[key] = null;\n  }\n\n  /**\n   * Renvoie si il y a des évènements ou non.\n   * @returns {boolean}\n   */\n  haveEvents() {\n    return this.count() > 0;\n  }\n\n  /**\n   * Affiche le nombre d'évènements\n   * @returns {number}\n   */\n  count() {\n    return Object.keys(this.events).length;\n  }\n\n  /**\n   * Appèle les callbacks\n   * @param  {...any} params Paramètres à envoyer aux callbacks\n   * @returns {null | any | Array}\n   */\n  call(...params) {\n    let results = {};\n    const keys = Object.keys(this.events);\n\n    if (keys.length !== 0) {\n      for (let index = 0, len = keys.length; index < len; ++index) {\n        const key = keys[index];\n\n        if (this.events[key]) {\n          const { args, callback } = this.events[key];\n\n          if (callback)\n            results[key] = this.#_call_callback(\n              callback,\n              ...[...args, ...params],\n            );\n        }\n      }\n    }\n\n    switch (Object.keys(results).length) {\n      case 0:\n        return null;\n      case 1:\n        return results[Object.keys(results)[0]];\n      default:\n        return results;\n    }\n  }\n\n  /**\n   * Vide la classe\n   */\n  clear() {\n    this.events = {};\n  }\n\n    /**\n   * Lance un callback\n   * @param {T} callback Callback à appeler\n   * @param  {...any} args Paramètres à envoyer aux callbacks\n   * @returns {*}\n   * @private\n   */\n  #_call_callback(callback, ...args) {\n    return callback(...args);\n  }\n\n  /**\n   * Génère une clé pour l'évènement\n   * @private\n   * @returns {string}\n   */\n  #_generateKey() {\n    const g_key = Math.random() * (this.count() + 10);\n\n    let ae = false;\n    for (const key in this.events) {\n      if (Object.hasOwnProperty.call(this.events, key)) {\n        if (key === g_key) {\n          ae = true;\n          break;\n        }\n      }\n    }\n\n    if (ae) return this.#_generateKey();\n    else return g_key;\n  }\n}\n\nmodule.exports = JsEvent;\n","const JsEvent = require('./JsEvent');\nconst JsCircularEvent = require('./JsCircularEvent');\n\nmodule.exports = JsEvent;\nmodule.exports.JsCircularEvent = JsCircularEvent;","const JsEvent = require(\"./JsEvent\");\n\nclass JsCircularEvent extends JsEvent {\n    constructor() {\n        super();\n    }\n\n    call(param) {\n        let results = param;\n        const keys = Object.keys(this.events);\n\n        if (keys.length !== 0) {\n            for (let index = 0, len = keys.length; index < len; ++index) {\n                const key = keys[index];\n\n                if (this.events[key]) {\n                    const { args, callback } = this.events[key];\n                    results.defaultsParams = args;\n                    if (callback){\n                        results = {...results, ...this.#_call_callback(\n                        callback,\n                        results\n                        ) ?? {}};\n                    }\n                }\n            }\n        }\n\n        return results;\n    }\n\n  #_call_callback(callback, ...args) {\n    return callback(...args);\n  }\n}\n\nmodule.exports = JsCircularEvent;","import JsEvent from \"@rotomeca/event\";\nimport RotomecaCssProperty from \"./RotomecaCssProperty\";\nimport { Action, Nullable } from \"./utils\";\n\n/**\n * Représente une règle CSS composée d'un sélecteur et de propriétés.\n * Permet d'ajouter ou de retirer dynamiquement des propriétés.\n */\nexport default class RotomecaCssRule {\n  /**\n   * Sélecteur CSS de la règle.\n   * @private\n   */\n  #_selectorText: string;\n  /**\n   * Liste des propriétés CSS associées à la règle.\n   * @private\n   */\n  #_properties: RotomecaCssProperty[];\n  /**\n   * Gestionnaire d'événements pour les changements de la règle.\n   * @private\n   */\n  #_onUpdate: Nullable<JsEvent<Action>> = null;\n\n  /**\n   * Événement déclenché lors d'une modification de la règle.\n   */\n  public get onUpdate(): JsEvent<Action> {\n    return (this.#_onUpdate ??= new JsEvent<Action>());\n  }\n  /**\n   * @param selectorText Sélecteur CSS de la règle.\n   * @param args Propriétés CSS de la règle.\n   */\n  constructor(selectorText: string, ...args: RotomecaCssProperty[]) {\n    this.#_selectorText = selectorText;\n    this.#_properties = args;\n\n    for (const prop of this.#_properties) {\n      prop.event.push(() => this.#_notifyParent());\n    }\n  }\n\n  /**\n   * Retourne le sélecteur CSS de la règle.\n   */\n  get selectorText(): string {\n    return this.#_selectorText;\n  }\n\n  /**\n   * Ajoute une propriété à la règle CSS.\n   * @param prop Propriété à ajouter.\n   */\n  public addProperty(prop: RotomecaCssProperty) {\n    this.#_properties.push(prop);\n    prop.event.push(() => this.#_notifyParent());\n    this.#_notifyParent();\n\n    return this;\n  }\n\n  /**\n   * Retourne une propriété de la règle CSS par son index.\n   * @param index Index de la propriété à récupérer.\n   */\n  public get(index: number): RotomecaCssProperty | undefined {\n    return this.#_properties[index];\n  }\n\n  /**\n   * Supprime une propriété de la règle CSS par son nom.\n   * @param propName Nom de la propriété à supprimer.\n   * @param options all: supprime toutes les occurrences si true.\n   */\n  public removeProperty(\n    propName: string,\n    { all = false }: { all?: boolean } = {},\n  ) {\n    let stop: boolean = false;\n    this.#_properties = this.#_properties.filter((prop) => {\n      if (stop) return true;\n      if (prop.name === propName) {\n        if (!all) stop = true;\n        return false;\n      }\n      return true;\n    });\n\n    this.#_notifyParent();\n    return this;\n  }\n\n  /**\n   * Retourne la règle CSS sous forme de chaîne.\n   */\n  toString(): string {\n    const props = this.#_properties\n      .map((prop) => `  ${prop.toString()}`)\n      .join('\\n');\n    return `${this.#_selectorText} {\\n${props}\\n}`;\n  }\n\n  /**\n   * Notifie les listeners parents qu'une modification a eu lieu.\n   * @private\n   */\n  #_notifyParent() {\n    if (this.#_onUpdate && this.#_onUpdate.count() > 0) this.#_onUpdate.call();\n  }\n}","import JsEvent from \"@rotomeca/event\";\nimport { Action, Nullable } from \"./utils\";\nimport { EMPTY_STRING } from \"@rotomeca/utils\";\n\n/**\n * Représente une propriété CSS (nom, valeur, important).\n * Permet de notifier les changements de valeur.\n */\nexport default class RotomecaCssProperty {\n  /**\n   * Nom de la propriété CSS.\n   * @private\n   */\n  #_name: string;\n  /**\n   * Valeur de la propriété CSS.\n   * @private\n   */\n  #_value: string;\n  /**\n   * Indique si la propriété est !important.\n   * @private\n   */\n  #_important: boolean;\n\n  /**\n   * Gestionnaire d'événements pour les changements de la propriété.\n   * @private\n   */\n  #_listeners: Nullable<JsEvent<Action>> = null;\n  /**\n   * Événement déclenché lors d'une modification de la propriété.\n   */\n  public get event(): JsEvent<Action> {\n    return (this.#_listeners ??= new JsEvent<Action>());\n  }\n\n  /**\n   * @param name Nom de la propriété CSS.\n   * @param value Valeur de la propriété CSS.\n   * @param important Indique si la propriété est !important.\n   */\n  constructor(name: string, value: string, important: boolean = false) {\n    this.#_name = name;\n    this.#_value = value;\n    this.#_important = important;\n  }\n\n  /**\n   * Modifie la valeur de la propriété CSS.\n   */\n  public set value(value: string) {\n    if (this.#_value !== value) {\n      this.#_value = value;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Modifie l'état important de la propriété CSS.\n   */\n  public set important(important: boolean) {\n    if (this.#_important !== important) {\n      this.#_important = important;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Modifie le nom de la propriété CSS.\n   */\n  public set name(name: string) {\n    if (this.#_name !== name) {\n      this.#_name = name;\n      this.#_notify();\n    }\n  }\n\n  /**\n   * Retourne la valeur de la propriété CSS.\n   */\n  public get value(): string {\n    return this.#_value;\n  }\n\n  /**\n   * Retourne le nom de la propriété CSS.\n   */\n  public get name(): string {\n    return this.#_name;\n  }\n\n  /**\n   * Retourne si la propriété est !important.\n   */\n  public get important(): boolean {\n    return this.#_important;\n  }\n\n  /**\n   * Retourne la propriété CSS sous forme de chaîne.\n   */\n  toString(): string {\n    return `${this.#_name}: ${this.#_value}${this.#_important ? ' !important' : EMPTY_STRING};`;\n  }\n\n  /**\n   * Notifie les listeners qu'une modification a eu lieu.\n   * @private\n   */\n  #_notify(): void {\n    if (this.#_listeners) this.#_listeners.call();\n  }\n}","import BnumElement from './bnum-element';\n\n/**\n * Classe interne étendant BnumElement pour gérer les états personnalisés via ElementInternals.\n */\nexport default abstract class BnumElementInternal extends BnumElement {\n  /**\n   * Internals de l'élément, utilisé pour accéder aux états personnalisés.\n   * @private\n   */\n  #_internal: ElementInternals = this.attachInternals();\n\n  constructor() {\n    super();\n  }\n\n  /**\n   * Retourne l'objet ElementInternals associé à l'élément.\n   * @protected\n   */\n  protected get _p_internal(): ElementInternals {\n    return this.#_internal;\n  }\n\n  /**\n   * Retourne l'ensemble des états personnalisés de l'élément.\n   * @protected\n   */\n  protected get _p_states(): CustomStateSet {\n    return this._p_internal.states;\n  }\n\n  /**\n   * Efface tous les états personnalisés de l'élément.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_clearStates(): this {\n    this._p_states.clear();\n    return this;\n  }\n\n  /**\n   * Ajoute un état personnalisé à l'élément.\n   * @param {string} state - Nom de l'état à ajouter.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_addState(state: string): this {\n    this._p_states.add(state);\n    return this;\n  }\n\n  /**\n   * Ajoute plusieurs états personnalisés à l'élément.\n   * @param {string[]} states - Liste des états à ajouter.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_addStates(...states: string[]): this {\n    for (let index = 0, len = states.length; index < len; ++index) {\n      this._p_states.add(states[index]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Supprime un état personnalisé de l'élément.\n   * @param {string} state - Nom de l'état à supprimer.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_removeState(state: string): this {\n    this._p_states.delete(state);\n    return this;\n  }\n\n  /**\n   * Supprime plusieurs états personnalisés de l'élément.\n   * @param {string[]} states - Liste des états à supprimer.\n   * @returns {this}\n   * @protected\n   */\n  protected _p_removeStates(states: string[]): this {\n    for (let index = 0, len = states.length; index < len; ++index) {\n      this._p_states.delete(states[index]);\n    }\n\n    return this;\n  }\n\n  /**\n   * Vérifie si l'élément possède un état personnalisé donné.\n   * @param {string} state - Nom de l'état à vérifier.\n   * @returns {boolean}\n   * @protected\n   */\n  protected _p_hasState(state: string): boolean {\n    return this._p_states.has(state);\n  }\n}\n","import { Nullable } from './types';\n\n/**\n * Classe de gestion de planification d'exécution de callback.\n * Permet de regrouper plusieurs appels en une seule exécution lors du prochain frame.\n */\nexport class Scheduler<T> {\n  /**\n   * Indique si une exécution est déjà planifiée.\n   * @private\n   */\n  #_started: boolean = false;\n\n  /**\n   * Dernière valeur planifiée pour l'exécution.\n   * @private\n   */\n  #_lastValue: Nullable<T> = null;\n\n  /**\n   * Callback à exécuter lors de la planification.\n   * @private\n   */\n  #_callback: (value: Nullable<T>) => void;\n\n  /**\n   * Constructeur de la classe Scheduler.\n   * @param callback Sera appelée avec la dernière valeur planifiée lors du prochain frame.\n   */\n  constructor(callback: (value: Nullable<T>) => void) {\n    this.#_callback = callback;\n  }\n\n  /**\n   * Demande la planification de l'exécution de la callback avec la valeur donnée.\n   * Si une exécution est déjà planifiée, seule la dernière valeur sera utilisée.\n   * @param value Valeur la plus récente planifiée pour l'exécution.\n   */\n  public schedule(value: T): void {\n    this.#_lastValue = value;\n\n    if (!this.#_started) {\n      this.#_started = true;\n      requestAnimationFrame(() => {\n        this.#_callback(this.#_lastValue);\n        this.#_started = false;\n        this.#_lastValue = null;\n      });\n    }\n  }\n\n  /**\n   * Accesseur protégé pour obtenir la dernière valeur planifiée.\n   */\n  protected get _p_value(): Nullable<T> {\n    return this.#_lastValue;\n  }\n\n  /**\n   * Accesseur protégé pour définir la dernière valeur planifiée.\n   */\n  protected set _p_value(value: Nullable<T>) {\n    this.#_lastValue = value;\n  }\n\n  /**\n   * Appelle immédiatement la callback avec la valeur donnée, sans planification.\n   * @param value Valeur à transmettre au callback\n   */\n  public call(value: T): void {\n    this.#_callback(value);\n  }\n}\n\n/**\n * Variante de Scheduler pour gérer des tableaux ou des symboles de réinitialisation.\n *\n * Permet de regrouper plusieurs appels en une seule exécution lors du prochain frame.\n *\n * Si jamais une réinitialisation est demandée, le tableau sera vidé avant d'ajouter de nouveaux éléments.\n */\nexport class SchedulerArray<T> {\n  /**\n   * Indique si une exécution est déjà planifiée.\n   * @private\n   */\n  #_started: boolean = false;\n\n  /**\n   * Symbole utilisé pour réinitialiser le tableau.\n   * @private\n   */\n  #_resetSymbol: Symbol;\n  /**\n   * Pile des éléments planifiés.\n   * @private\n   */\n  #_stack: (T | T[] | Symbol)[] = [];\n  /**\n   * Callback à exécuter lors de la planification.\n   * @private\n   */\n  #_callback: (value: Nullable<T[] | Symbol>) => void;\n\n  /**\n   * Constructeur de la classe SchedulerArray.\n   * @param callback Fonction appelée lors de la planification.\n   * @param resetSymbol Symbole utilisé pour réinitialiser le tableau.\n   */\n  constructor(\n    callback: (value: Nullable<T[] | Symbol>) => void,\n    resetSymbol: Symbol,\n  ) {\n    this.#_callback = callback;\n    this.#_resetSymbol = resetSymbol;\n  }\n\n  /**\n   * Demande la planification de l'exécution de la callback avec la valeur donnée.\n   * Peut recevoir un tableau, un élément ou un symbole de réinitialisation.\n   * @param value Valeur la plus récente planifiée pour l'exécution.\n   */\n  public schedule(value: T[]): void;\n  public schedule(value: T): void;\n  public schedule(value: Symbol): void;\n  public schedule(value: T | Symbol): void;\n  public schedule(value: T[] | Symbol): void;\n  public schedule(value: Symbol | T | T[]): void {\n    this.#_add(value);\n\n    if (!this.#_started) {\n      this.#_started = true;\n      requestAnimationFrame(() => {\n        for (const element of this.#_getStackItems()) {\n          this.#_callback(element);\n        }\n\n        this.#_started = false;\n        this.#_stack.length = 0;\n      });\n    }\n  }\n\n  /**\n   * Appelle immédiatement la callback avec la valeur donnée, sans planification.\n   *\n   * La stack en mémoire est utilisé si aucune valeur n'est fournie. Sinon, elle sera vidée avant d'ajouter la nouvelle valeur.\n   * @param value Valeur à transmettre au callback\n   */\n  public call(value: Nullable<T | T[] | Symbol>): void {\n    if (value !== null) {\n      this.#_stack.length = 0;\n      this.#_add(value!);\n    }\n\n    for (const element of this.#_getStackItems()) {\n      this.#_callback(element);\n    }\n\n    this.#_stack.length = 0;\n  }\n\n  /**\n   * Ajoute une valeur ou un tableau de valeurs à la pile, ou gère le symbole de réinitialisation.\n   * @param value Valeur, tableau de valeurs ou symbole de réinitialisation à ajouter.\n   * @returns void\n   */\n  #_add(value: Symbol | T | T[]): void {\n    // Gestion du symbole de réinitialisation\n    if (value === this.#_resetSymbol) {\n      this.#_stack.length = 0;\n      this.#_stack.push(value);\n      this.#_stack.push([]);\n      return;\n    }\n\n    // Initialisation de la pile si vide\n    if (this.#_stack.length === 0) this.#_stack.push([]);\n\n    // Ajout de l'élément ou des éléments au dernier tableau de la pile\n    if (Array.isArray(value)) {\n      (this.#_stack[this.#_stack.length - 1] as T[]).push(...value);\n    } else if (value !== this.#_resetSymbol) {\n      (this.#_stack[this.#_stack.length - 1] as T[]).push(value as T);\n    }\n  }\n\n  /**\n   * Générateur pour obtenir les éléments de la pile un par un.\n   *\n   * Gère les tableaux et le symbole de réinitialisation.\n   * @returns Générateur d'éléments de type T[] ou Symbol.\n   */\n  *#_getStackItems(): Generator<T[] | Symbol, void, unknown> {\n    for (const element of this.#_stack) {\n      if (element === this.#_resetSymbol) {\n        yield element as Symbol;\n      } else if (Array.isArray(element)) {\n        yield element;\n      } else {\n        yield [element as T];\n      }\n    }\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\n\ntype Style = string[] | string | CSSStyleSheet | CSSStyleSheet[];\n\n/**\n * Options de configuration pour le décorateur `@Define`.\n */\nexport interface DefineOptions {\n  /**\n   * Le nom du tag HTML du Web Component (ex: 'bnum-button').\n   * Si défini, il créera ou écrasera automatiquement la propriété statique `TAG` de la classe.\n   */\n  tag?: string;\n\n  /**\n   * La vue JSX ou la chaîne HTML du composant.\n   * Sera compilée en `HTMLTemplateElement` une seule fois à l'initialisation de la classe.\n   */\n  template?: string | Node;\n\n  /**\n   * Les styles CSS du composant (chaîne brute importée).\n   * Seront compilés en `CSSStyleSheet` une seule fois à l'initialisation de la classe.\n   */\n  styles?: Style;\n}\n\n/**\n * Décorateur de classe pour définir un Web Component.\n * * Il gère automatiquement :\n * 1. L'enregistrement du Custom Element via `customElements.define`.\n * 2. La création et la mise en cache du Template (Performance).\n * 3. La création et la mise en cache des Styles (Performance).\n * 4. La définition de la propriété statique `TAG` sur la classe.\n *\n * @param options Les options de configuration (tag, template, style)\n * @example\n * ```tsx\n * const VIEW = <div class=\"box\"><slot /></div>;\n * @Define({\n * tag: 'my-component',\n * template: VIEW,\n * styles: '.box { color: red; }'\n * })\n * export class MyComponent extends BnumElementInternal {\n * // Pas besoin de déclarer static get TAG(), c'est automatique !\n * }\n * ```\n */\nexport function Define(options: DefineOptions = {}) {\n  return function (target: Function, context: ClassDecoratorContext) {\n    // Vérification de sécurité : on ne décore que des classes\n    if (context.kind !== 'class') {\n      throw new Error('@Define ne peut être utilisé que sur une classe.');\n    }\n\n    // Initialisation unique au chargement de la classe (Load Time)\n    context.addInitializer(function () {\n      const clazz = this as any;\n\n      // ---------------------------------------------------------\n      // 1. INJECTION DU STATIC TAG\n      // ---------------------------------------------------------\n      if (options.tag) {\n        // On définit ou redéfinit la propriété statique 'TAG'\n        Object.defineProperty(clazz, 'TAG', {\n          get: () => options.tag,\n          configurable: true, // Permet d'être reconfiguré si nécessaire\n          enumerable: true,\n        });\n      }\n\n      // Vérification finale pour s'assurer qu'on a un TAG valide\n      const finalTag = clazz.TAG;\n      if (!finalTag) {\n        console.warn(\n          `[Define] La classe ${context.name} n'a pas de TAG défini (ni via options, ni via static TAG).`,\n        );\n        return; // On ne peut pas enregistrer sans tag\n      }\n\n      // ---------------------------------------------------------\n      // 2. COMPILATION UNIQUE DU TEMPLATE (CACHE)\n      // ---------------------------------------------------------\n      if (options.template) {\n        const tpl = document.createElement('template');\n\n        if (options.template instanceof Node) {\n          // Support du JSX DOM Node\n          tpl.content.appendChild(options.template);\n        } else {\n          // Support du JSX String ou HTML String\n          tpl.innerHTML = String(options.template);\n        }\n\n        // Stockage caché sur le constructeur\n        clazz.__CACHE_TEMPLATE__ = tpl;\n      }\n\n      // ---------------------------------------------------------\n      // 3. COMPILATION UNIQUE DES STYLES (CACHE)\n      // ---------------------------------------------------------\n      if (options.styles) initStyle(clazz, options.styles);\n\n      // ---------------------------------------------------------\n      // 4. ENREGISTREMENT DU WEB COMPONENT\n      // ---------------------------------------------------------\n      if (!customElements.get(finalTag)) {\n        customElements.define(finalTag, clazz);\n      }\n    });\n  };\n}\n\nfunction initStyle(clazz: { __CACHE_STYLE__: CSSStyleSheet[] }, styles: Style) {\n  var strStyles;\n  const array = Array.isArray(styles) ? styles : [styles];\n  clazz.__CACHE_STYLE__ = [];\n\n  for (const style of array) {\n    if (style instanceof CSSStyleSheet) clazz.__CACHE_STYLE__.push(style);\n    else if (!strStyles) strStyles = style;\n    else strStyles += style;\n  }\n\n  if (strStyles && strStyles !== EMPTY_STRING) {\n    const sheet = new CSSStyleSheet();\n    sheet.replaceSync(strStyles);\n    clazz.__CACHE_STYLE__.push(sheet);\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\n\n/**\n * @Attr : Synchronise une propriété (auto-accessor) avec un attribut HTML.\n * Gère dynamiquement les types string, boolean et number.\n */\nexport function Attr(attributeName?: string) {\n\treturn function <This extends HTMLElement, Value>(\n\t\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\t\tcontext: ClassAccessorDecoratorContext<This, Value>,\n\t): ClassAccessorDecoratorResult<This, Value> {\n\t\tconst attrName = attributeName || String(context.name);\n\n\t\treturn {\n\t\t\tget(this: This): Value {\n\t\t\t\tconst val = this.getAttribute(attrName);\n\n\t\t\t\t// Logique de conversion selon la valeur de l'attribut\n\t\t\t\t// On utilise \"as unknown as Value\" pour satisfaire le compilateur\n\t\t\t\tif (val === EMPTY_STRING || val === 'true')\n\t\t\t\t\treturn true as unknown as Value;\n\t\t\t\tif (val === null) return false as unknown as Value;\n\n\t\t\t\t// Si c'est un nombre (on vérifie si la conversion est possible)\n\t\t\t\tconst num = Number(val);\n\t\t\t\tif (val !== EMPTY_STRING && !isNaN(num)) return num as unknown as Value;\n\n\t\t\t\treturn val as unknown as Value;\n\t\t\t},\n\t\t\tset(this: This, value: Value) {\n\t\t\t\tif (value === null || value === undefined || value === false) {\n\t\t\t\t\tthis.removeAttribute(attrName);\n\t\t\t\t} else {\n\t\t\t\t\t// Si c'est un booléen true, on met un attribut vide (pattern HTML standard)\n\t\t\t\t\tconst strVal = value === true ? EMPTY_STRING : String(value);\n\t\t\t\t\tthis.setAttribute(attrName, strVal);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t};\n}\ntype DataAccessortCallback = <This extends HTMLElement, Value>(\n\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\tcontext: ClassAccessorDecoratorContext<This, Value>,\n) => ClassAccessorDecoratorResult<This, Value>;\n\nexport function Data(\n\tname: string,\n\toptions: { setter?: boolean },\n): DataAccessortCallback;\nexport function Data(options: { setter?: boolean }): DataAccessortCallback;\nexport function Data(): DataAccessortCallback;\nexport function Data(\n\tnameOrOptions?: string | { setter?: boolean },\n\tmaybeOptions?: { setter?: boolean },\n): DataAccessortCallback {\n\t// 1. Déduction intelligente des arguments\n\tlet attributeName: string | undefined;\n\tlet setter = true;\n\n\tif (typeof nameOrOptions === 'string') {\n\t\tattributeName = nameOrOptions;\n\t\tsetter = maybeOptions?.setter ?? true;\n\t} else if (typeof nameOrOptions === 'object') {\n\t\tsetter = nameOrOptions.setter ?? true;\n\t}\n\n\treturn function <This extends HTMLElement, Value>(\n\t\t_target: ClassAccessorDecoratorTarget<This, Value>,\n\t\tcontext: ClassAccessorDecoratorContext<This, Value>,\n\t): ClassAccessorDecoratorResult<This, Value> {\n\t\t// 2. Nettoyage du nom (ex: #_icon devient icon)\n\t\t// On enlève le # et le _ au début pour le nom de l'attribut data\n\t\tconst autoName = String(context.name).replace(/^[#_]+/, '');\n\t\tconst finalAttrName = attributeName || autoName;\n\n\t\treturn {\n\t\t\tget(this: This): Value {\n\t\t\t\tconst val =\n\t\t\t\t\ttypeof (this as any).data === 'function'\n\t\t\t\t\t\t? (this as any).data(finalAttrName)\n\t\t\t\t\t\t: this.getAttribute(`data-${finalAttrName}`);\n\n\t\t\t\tif (val === EMPTY_STRING || val === 'true')\n\t\t\t\t\treturn true as unknown as Value;\n\t\t\t\tif (val === null || val === undefined) return _target.get.call(this);\n\n\t\t\t\tconst num = Number(val);\n\t\t\t\tif (val !== EMPTY_STRING && !isNaN(num)) return num as unknown as Value;\n\n\t\t\t\treturn val as unknown as Value;\n\t\t\t},\n\t\t\tset(this: This, value: Value) {\n\t\t\t\tif (!setter) return;\n\n\t\t\t\tconst isFalsy =\n\t\t\t\t\tvalue === null || value === undefined || value === false;\n\t\t\t\tconst strVal = value === true ? EMPTY_STRING : String(value);\n\n\t\t\t\tif (typeof (this as any).data === 'function') {\n\t\t\t\t\t(this as any).data(finalAttrName, isFalsy ? null : strVal);\n\t\t\t\t} else {\n\t\t\t\t\tconst domAttrName = `data-${finalAttrName}`;\n\t\t\t\t\tif (isFalsy) this.removeAttribute(domAttrName);\n\t\t\t\t\telse this.setAttribute(domAttrName, strVal);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t};\n}\n\n/**\n * Option pour Data pour indiquer qu'un accessor ne devrait pas avoir de setter.\n *\n * @example\n * ```typescript\n * ///\n * @Data(NO_SETTER)\n * accessor #_label!: string;\n * ```\n */\nexport const NO_SETTER = { setter: false };\n","/**\n * @SetAttr : Ajoute un attribut avec une valeur fixe à un élément.\n * @param attributeName Nom de l'attribut à ajouter.\n * @param value Valeur de l'attribut à définir.\n * @returns Un décorateur de méthode qui ajoute l'attribut à l'élément.\n */\nexport function SetAttr(\n  attributeName: string,\n  value: string | number | boolean,\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: HTMLElement, ..._args: any[]) {\n      const rtn = originalMethod.apply(this, _args);\n      if ((this as any)?.attr) (this as any).attr(attributeName, value);\n      else this.setAttribute(attributeName, value as unknown as string);\n\n      return rtn;\n    };\n  };\n}\n\n/**\n * @SetAttrs : Ajoute un attribut avec une valeur fixe à un élément.\n * @param attributeName Nom de l'attribut à ajouter.\n * @param value Valeur de l'attribut à définir.\n * @returns Un décorateur de méthode qui ajoute l'attribut à l'élément.\n */\nexport function SetAttrs(attribs: Record<string, string | boolean | number>) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: HTMLElement, ..._args: any[]) {\n      if ((this as any)?.attrs) (this as any).attrs(attribs);\n      else {\n        for (const [key, value] of Object.entries(attribs)) {\n          this.setAttribute(key, value as unknown as string);\n        }\n      }\n\n      return originalMethod.apply(this, _args);\n    };\n  };\n}\n","/**\n * @Autobind : Lie automatiquement la méthode à l'instance.\n */\nexport function Autobind(\n  originalMethod: any,\n  context: ClassMethodDecoratorContext,\n) {\n  context.addInitializer(function (this: any) {\n    this[context.name] = originalMethod.bind(this);\n  });\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { Optional } from 'core/utils/types';\n\n/**\n * @Fire : Déclenche un événement personnalisé.\n * Utilise la méthode trigger() de BnumElement si elle existe (Fluent API),\n * sinon utilise le dispatchEvent standard.\n */\nexport function Fire(\n  eventName: string,\n  options: CustomEventInit = { bubbles: true, composed: true },\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: any, ...args: any[]) {\n      const result = originalMethod.apply(this, args);\n      const detail = result ?? args[0];\n\n      // Utilisation de trigger (BnumElement) ou dispatchEvent (Standard)\n      if (typeof this.trigger === 'function') {\n        this.trigger(eventName, detail, options);\n      } else {\n        this.dispatchEvent(new CustomEvent(eventName, { ...options, detail }));\n      }\n\n      return result;\n    };\n  };\n}\n\n/**\n * Interface pour les constructeurs d'événements.\n * Gère deux cas :\n * 1. La classe connaît son nom (new EventClass(options))\n * 2. Le nom est passé au décorateur (new EventClass(name, options))\n */\ntype EventConstructor<T extends CustomEvent> = new (...args: any[]) => T;\n\n/**\n * @CustomFire : Décorateur de méthode (Stage 3).\n * Déclenche un événement d'une classe spécifique lors de l'appel de la méthode.\n * * @param EventClass La classe de l'événement à instancier (doit étendre CustomEvent).\n * @param eventName Optionnel : Force un nom d'événement spécifique.\n * @param options Options d'initialisation (bubbles, composed, etc.).\n */\nexport function CustomFire<T extends CustomEvent>(\n  EventClass: EventConstructor<T>,\n  eventName?: string,\n  options: CustomEventInit = { bubbles: true, composed: true },\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') return;\n\n    return function (this: any, ...args: any[]) {\n      const result = originalMethod.apply(this, args);\n      const detail = result ?? args[0];\n      const eventInit = { ...options, detail };\n\n      const event = _____StCustomFire\n        .tryInitEvent(EventClass, eventName, eventInit)\n        .unwrapOr(new EventClass(result));\n\n      this.dispatchEvent(event);\n\n      return result;\n    };\n  };\n}\n\nabstract class _____StCustomFire {\n  @Risky()\n  static tryInitEvent<T extends CustomEvent<any>>(\n    EventClass: EventConstructor<T>,\n    eventName: Optional<string>,\n    eventInit: any,\n  ): Result<T> {\n    const event = eventName\n      ? new EventClass(eventName, eventInit)\n      : new EventClass(eventInit);\n    return Result.Ok(event);\n  }\n}\n","/**\n * @Self : Injecte la classe (le constructeur) dans la propriété.\n * Utilisable sur un champ simple : @Self _!: typeof MaClasse;\n */\nexport function Self(_value: undefined, context: ClassFieldDecoratorContext) {\n  if (context.kind !== 'field') {\n    throw new Error('@Self ne peut être utilisé que sur un champ (field).');\n  }\n\n  // On enregistre une fonction qui s'exécutera à la création de l'instance\n  context.addInitializer(function (this: any) {\n    // On assigne le constructeur à la propriété (ex: '_')\n    this[context.name] = this.constructor;\n  });\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport style from './bnum-badge.less';\nimport { CustomDom } from '../../bnum-element';\nimport { Define, Self } from '../../../core/decorators';\n\nconst STYLE = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n/**\n * Badge d'information.\n *\n * @structure Badge classique\n * <bnum-badge data-value=\"Je suis un badge !\"></bnum-badge>\n *\n * @structure Badge avec un nombre\n * <bnum-badge data-value=\"9999\"></bnum-badge>\n *\n * @structure Arrondi forcé\n * <bnum-badge data-value=\"9999\" circle></bnum-badge>\n *\n * @structure Secondary\n * <bnum-badge data-value=\"42\" data-variation=\"secondary\" circle></bnum-badge>\n *\n * @structure Danger\n * <bnum-badge data-value=\"42\" data-variation=\"danger\" circle></bnum-badge>\n *\n * @state has-value - Le badge a une valeur.\n * @state no-value - Le badge n'a pas de valeur.\n * @state is-circle - Le badge est en mode cercle.\n * @state variation-primary - Le badge utilise la variation primaire.\n * @state variation-secondary - Le badge utilise la variation secondaire.\n * @state variation-danger - Le badge utilise la variation danger.\n *\n * @cssvar {inline-block} --bnum-badge-display - Permet de surcharger la propriété CSS display du badge.\n * @cssvar {100px} --bnum-badge-border-radius - Permet de surcharger le rayon de bordure du badge.\n * @cssvar {10px} --bnum-badge-padding - Permet de surcharger le padding du badge.\n * @cssvar {100%} --bnum-badge-circle-border-radius - Permet de surcharger le rayon de bordure du badge en mode \"cercle\".\n * @cssvar {#000091} --bnum-badge-primary-color - Définit la couleur de fond du badge en variation \"primary\".\n * @cssvar {#f5f5fe} --bnum-badge-primary-text-color - Définit la couleur du texte du badge en variation \"primary\".\n * @cssvar {#ffffff} --bnum-badge-secondary-color - Définit la couleur de fond du badge en variation \"secondary\".\n * @cssvar {#000091} --bnum-badge-secondary-text-color - Définit la couleur du texte du badge en variation \"secondary\".\n * @cssvar {solid} --bnum-badge-type - Permet de surcharger le type de bordure (ex: solid, dashed) pour la variation \"secondary\".\n * @cssvar {thin} --bnum-badge-size - Permet de surcharger l’épaisseur de la bordure pour la variation \"secondary\".\n * @cssvar {#ce0500} --bnum-badge-danger-color - Définit la couleur de fond du badge en variation \"danger\".\n * @cssvar {#f5f5fe} --bnum-badge-danger-text-color - Définit la couleur du texte du badge en variation \"danger\".\n *\n */\n@Define()\nexport class HTMLBnumBadge extends BnumElementInternal {\n  //#region Constants\n\n  /**\n   * Nom de l'attribut pour la valeur du badge.\n   */\n  static readonly DATA_VALUE = 'value';\n  /**\n   * Nom de l'attribut pour la variation du badge.\n   */\n  static readonly DATA_VARIATION = 'variation';\n\n  /**\n   * Nom de l'attribut pour la valeur du badge.\n   * @attr {string} data-value - Valeur affichée dans le badge.\n   */\n  static readonly ATTR_VALUE = 'data-value';\n  /**\n   * Nom de l'attribut pour la variation du badge.\n   * @attr {'primary' | 'secondary' | 'danger'} (optional) (default:'primary') data-variation - Variation du badge.\n   */\n  static readonly ATTR_VARIATION = 'data-variation';\n  /**\n   * Nom de l'attribut pour le mode cercle.\n   * @attr {any} (optional) circle - Indique si le badge doit être affiché en cercle.\n   */\n  static readonly ATTR_CIRCLE = 'circle';\n  /**\n   * Valeur de variation primaire.\n   */\n  static readonly VARIATION_PRIMARY = 'primary';\n  /**\n   * Valeur de variation secondaire.\n   */\n  static readonly VARIATION_SECONDARY = 'secondary';\n  /**\n   * Valeur de variation danger.\n   */\n  static readonly VARIATION_DANGER = 'danger';\n  /**\n   * Nom de la classe d'état \"a une valeur\".\n   */\n  static readonly STATE_HAS_VALUE = 'has-value';\n  /**\n   * Nom de la classe d'état \"pas de valeur\".\n   */\n  static readonly STATE_NO_VALUE = 'no-value';\n  /**\n   * Nom de la classe d'état \"cercle\".\n   */\n  static readonly STATE_IS_CIRCLE = 'is-circle';\n  /**\n   * Préfixe de la classe d'état pour la variation.\n   */\n  static readonly STATE_VARIATION_PREFIX = 'variation-';\n\n  //#endregion Constants\n  //#region Private Fields\n  /**\n   * Valeur affichée dans le badge.\n   */\n  #_value: string = EMPTY_STRING;\n  /**\n   * Planificateur de mise à jour asynchrone.\n   */\n  #_updateSchduler: Nullable<Scheduler<number>> = null;\n  /**\n   * Élément span contenant la valeur du badge.\n   */\n  #_spanElement: Nullable<HTMLSpanElement> = null;\n  //#endregion Private Fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumBadge */\n  @Self _!: typeof HTMLBnumBadge;\n  /**\n   * Récupère la valeur depuis l'attribut data-value.\n   */\n  get #_dataValue(): string {\n    return this.data(this._.DATA_VALUE) || EMPTY_STRING;\n  }\n\n  /**\n   * Récupère la variation depuis l'attribut data-variation.\n   */\n  get #_dataVariation(): string {\n    return this.data(this._.DATA_VARIATION) || this._.VARIATION_PRIMARY;\n  }\n  /**\n   * Valeur affichée dans le badge.\n   */\n  get value(): string {\n    if (!this.alreadyLoaded) this.#_value = this.#_dataValue;\n    return this.#_value;\n  }\n\n  set value(value: string) {\n    if (!this.alreadyLoaded) this.removeAttribute(this._.ATTR_VALUE);\n    this.#_value = value;\n\n    this.#_requestUpdate();\n  }\n\n  /**\n   * Variation de style du badge.\n   */\n  get variation(): string {\n    return this.#_dataVariation;\n  }\n\n  set variation(value: string) {\n    this.data(this._.DATA_VARIATION, value);\n\n    this.#_requestUpdate();\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * Retourne les styles à appliquer au composant.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), STYLE];\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n\n    this.#_spanElement = this._p_createSpan();\n    container.appendChild(this.#_spanElement);\n\n    const force = true;\n    this.#_update(force);\n  }\n\n  /**\n   * Indique si toutes les modifications d'attributs doivent déclencher une mise à jour.\n   */\n  protected _p_isUpdateForAllAttributes(): boolean {\n    return true;\n  }\n\n  /**\n   * Met à jour le composant lors d'un changement d'attribut.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    return this.#_update();\n  }\n  //#endregion Lifecycle\n\n  //#region Private Methods\n  /**\n   * Demande une mise à jour asynchrone du composant.\n   */\n  #_requestUpdate(): this {\n    (this.#_updateSchduler ??= new Scheduler<number>(() => {\n      this.#_update();\n    })).schedule(0);\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage du badge selon ses propriétés et attributs.\n   */\n  #_update(force: boolean = false): void {\n    if (!this.alreadyLoaded && !force) return;\n\n    this._p_clearStates();\n\n    const value = this.value;\n    this.#_spanElement!.textContent = value;\n\n    if (value !== EMPTY_STRING) this._p_addState(this._.STATE_HAS_VALUE);\n    else this._p_addState(this._.STATE_NO_VALUE);\n\n    if (this.hasAttribute(this._.ATTR_CIRCLE))\n      this._p_addState(this._.STATE_IS_CIRCLE);\n\n    this._p_addState(`${this._.STATE_VARIATION_PREFIX}${this.variation}`);\n  }\n  //#endregion Private Methods\n\n  //#region Static Methods\n  /**\n   * Attributs observés pour ce composant.\n   */\n  protected static _p_observedAttributes(): string[] {\n    return [this.ATTR_CIRCLE];\n  }\n\n  /**\n   * Crée un badge via JavaScript.\n   * @param value Valeur à afficher\n   * @param options Options de création (cercle, variation)\n   */\n  static Create(\n    value: string,\n    {\n      circle = false,\n      variation = undefined,\n    }: {\n      circle?: boolean;\n      variation?: 'primary' | 'secondary' | 'danger';\n    } = {},\n  ): HTMLBnumBadge {\n    const badge = document.createElement(this.TAG) as HTMLBnumBadge;\n\n    return badge\n      .attr(this.ATTR_VALUE, value)\n      .condAttr(circle, this.ATTR_CIRCLE, true)\n      .condAttr(variation !== undefined, this.ATTR_VARIATION, variation!);\n  }\n\n  /**\n   * Génère le HTML d'un badge.\n   * @param value Valeur à afficher\n   * @param attrs Attributs additionnels\n   */\n  static Write(value: string, attrs: Record<string, string> = {}): string {\n    const attributes = this._p_WriteAttributes(attrs);\n    return `<${this.TAG} ${this.ATTR_VALUE}=\"${value}\" ${attributes}></${this.TAG}>`;\n  }\n\n  /**\n   * Tag HTML du composant.\n   */\n  static get TAG() {\n    return 'bnum-badge';\n  }\n  //#endregion Static Methods\n}\n","import { BnumConfig } from '../BnumConfig';\n\nconst TAG_PREFIX = BnumConfig.Get('tag_prefix')! as 'bnum';\n\nexport const TAG_ICON = `${TAG_PREFIX}-icon` as const;\nexport const TAG_BUTTON = `${TAG_PREFIX}-button` as const;\nexport const TAG_PRIMARY = `${TAG_PREFIX}-primary-button` as const;\nexport const TAG_SECONDARY = `${TAG_PREFIX}-secondary-button` as const;\nexport const TAG_DANGER = `${TAG_PREFIX}-danger-button` as const;\nexport const TAG_HELPER = `${TAG_PREFIX}-helper` as const;\nexport const TAG_PICTURE = `${TAG_PREFIX}-img` as const;\nexport const TAG_CARD_TITLE = `${TAG_PREFIX}-card-title` as const;\nexport const TAG_CARD = `${TAG_PREFIX}-card` as const;\nexport const TAG_CARD_EMAIL = `${TAG_PREFIX}-card-email` as const;\nexport const TAG_CARD_AGENDA = `${TAG_PREFIX}-card-agenda` as const;\nexport const TAG_CARD_ITEM = `${TAG_PREFIX}-card-item` as const;\nexport const TAG_CARD_ITEM_MAIL = `${TAG_PREFIX}-card-item-mail` as const;\nexport const TAG_CARD_ITEM_AGENDA = `${TAG_PREFIX}-card-item-agenda` as const;\nexport const TAG_CARD_LIST = `${TAG_PREFIX}-card-list` as const;\nexport const TAG_DATE = `${TAG_PREFIX}-date` as const;\nexport const TAG_ICON_BUTTON = `${TAG_PREFIX}-icon-button` as const;\nexport const TAG_COLUMN = `${TAG_PREFIX}-column` as const;\nexport const TAG_INPUT = `${TAG_PREFIX}-input` as const;\nexport const TAG_INPUT_DATE = `${TAG_INPUT}-date` as const;\nexport const TAG_INPUT_NUMBER = `${TAG_INPUT}-number` as const;\nexport const TAG_INPUT_SEARCH = `${TAG_INPUT}-search` as const;\nexport const TAG_INPUT_TEXT = `${TAG_INPUT}-text` as const;\nexport const TAG_INPUT_TIME = `${TAG_INPUT}-time` as const;\nexport const TAG_FOLDER = `${TAG_PREFIX}-folder` as const;\nexport const TAG_HIDE = `${TAG_PREFIX}-hide` as const;\nexport const TAG_FOLDER_LIST = `${TAG_PREFIX}-folder-list` as const;\nexport const TAG_HEADER = `${TAG_PREFIX}-header` as const;\nexport const TAG_SEGMENTED_ITEM = `${TAG_PREFIX}-segmented-item` as const;\nexport const TAG_SEGMENTED_CONTROL = `${TAG_PREFIX}-segmented-control` as const;\nexport const TAG_SELECT = `${TAG_PREFIX}-select` as const;\nexport const TAG_BADGE = `${TAG_PREFIX}-badge` as const;\nexport const TAG_FRAGMENT = `${TAG_PREFIX}-fragment` as const;\nexport const TAG_RADIO = `${TAG_PREFIX}-radio` as const;\nexport const TAG_RADIO_GROUP = `${TAG_PREFIX}-radio-group` as const;\n","/**\n * RegEx qui permet de vérifier si un texte possède uniquement des charactères alphanumériques.\n * @constant\n * @default /^[0-9a-zA-Z]+$/\n */\nexport const REG_ALPHANUM = /^[0-9a-zA-Z]+$/;\nexport const ISO_FORMAT_REGEX = /^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$/;\nexport const REG_MAILTO = /^mailto:/;\nexport const REG_MAIL_NAME_GLOBAL = /(^<|>$)/g;\nexport const REG_LIGHT_PICTURE_NAME = /(-light)\\.(([\\w\\d]+)|\\1?.+)$/;\nexport const REG_XSS_SAFE = /^[-.\\w\\s%()]+$/;\n","/**\n * Événement personnalisé signalant le changement d'un élément.\n *\n * @template T Type du nouvel élément.\n * @template Y Type de l'ancien élément.\n * @template TCaller Type de l'élément ayant déclenché l'événement (doit hériter de HTMLElement).\n */\nexport default class ElementChangedEvent<T, Y, TCaller extends HTMLElement> extends CustomEvent<null> {\n  #_new: T;\n  #_old: Y;\n  #_caller: TCaller;\n\n  /**\n   * Crée une nouvelle instance d'ElementChangedEvent.\n   *\n   * @param type Le type de changement.\n   * @param newElement Le nouvel élément.\n   * @param oldElement L'ancien élément.\n   * @param caller L'élément ayant déclenché l'événement.\n   * @param initDict Options d'initialisation de l'événement.\n   */\n  constructor(\n    type: string,\n    newElement: T,\n    oldElement: Y,\n    caller: TCaller,\n    initDict: CustomEventInit<null> = {}\n  ) {\n    super(`custom:element-changed.${type}`, initDict);\n    this.#_new = newElement;\n    this.#_old = oldElement;\n    this.#_caller = caller;\n  }\n\n  /** Retourne le nouvel élément. */\n  get newElement(): T {\n    return this.#_new;\n  }\n\n  /** Retourne l'ancien élément. */\n  get oldElement(): Y {\n    return this.#_old;\n  }\n\n  /** Retourne l'élément qui a déclenché l'événement. */\n  get caller(): TCaller {\n    return this.#_caller;\n  }\n}","import JsEvent from '@rotomeca/event';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport ElementChangedEvent from '../../../core/utils/events/ElementChangedEvent';\nimport { TAG_ICON } from '../../../core/utils/constants/tags';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport symbols from '../../../core/styles/material-symbols.css';\nimport style from './bnum-icon.less';\nimport { Define, Self } from '../../../core/decorators';\n\n/**\n * Classe CSS utilisée pour les icônes Material Symbols.\n */\nconst ICON_CLASS = 'material-symbols-outlined';\n\n/**\n * Feuille de style CSS pour les icônes Material Symbols.\n */\nconst SYMBOLS = BnumElement.ConstructCSSStyleSheet(\n  symbols.replaceAll(`.${ICON_CLASS}`, ':host'),\n);\n\nconst STYLE = BnumElement.ConstructCSSStyleSheet(style);\n\n/**\n * Composant personnalisé \"bnum-icon\" pour afficher une icône Material Symbol.\n *\n * Ce composant permet d'afficher une icône en utilisant le nom de l'icône Material Symbol.\n * Le nom peut être défini via le contenu du slot ou via l'attribut `data-icon`.\n *\n * @example\n * <bnum-icon>home</bnum-icon>\n * <bnum-icon data-icon=\"search\"></bnum-icon>\n *\n * @slot (default) - Nom de l'icône material symbol.\n *\n * @event custom:element-changed:icon - Déclenché lors du changement d'icône.\n */\n@Define()\nexport class HTMLBnumIcon extends BnumElementInternal {\n  //#region Constantes\n  /**\n   * Nom de l'événement déclenché lors du changement d'icône.\n   * @type {string}\n   */\n  static readonly EVENT_ICON_CHANGED: string = 'icon';\n  /**\n   * Nom de la donnée pour l'icône.\n   * @type {string}\n   */\n  static readonly DATA_ICON: string = 'icon';\n  /**\n   * Attribut HTML pour définir l'icône.\n   * @type {string}\n   */\n  static readonly ATTRIBUTE_DATA_ICON: string = `data-${this.DATA_ICON}`;\n  /**\n   * Nom de l'attribut class.\n   * @type {string}\n   */\n  static readonly ATTRIBUTE_CLASS: string = 'class';\n  //#endregion Constantes\n\n  //#region Private fields\n  static #_fontPromise: Promise<void> | null = null;\n  #_updateScheduler: Nullable<Scheduler<string>> = null;\n  /**\n   * Événement déclenché lors du changement d'icône.\n   */\n  #_oniconchanged: Nullable<\n    JsEvent<(newIcon: string, oldIcon: string) => void>\n  > = null;\n  //#endregion Private fields\n\n  //#region Getter/setter\n  /** Référence à la classe HTMLBnumIcon */\n  @Self _!: typeof HTMLBnumIcon;\n\n  /**\n   * Événement déclenché lors du changement d'icône. (via la propriété icon)\n   */\n  get oniconchanged(): JsEvent<(newIcon: string, oldIcon: string) => void> {\n    this.#_oniconchanged ??= new JsEvent<\n      (newIcon: string, oldIcon: string) => void\n    >();\n    return this.#_oniconchanged;\n  }\n\n  /**\n   * Obtient le nom de l'icône actuellement affichée.\n   * @returns {string} Le nom de l'icône.\n   */\n  get icon(): string {\n    const icon =\n      this.textContent?.trim?.() ||\n      (this.data(this._.DATA_ICON) as string) ||\n      EMPTY_STRING;\n\n    return icon;\n  }\n\n  /**\n   * Définit le nom de l'icône à afficher.\n   * Déclenche l'événement oniconchanged si la valeur change.\n   * @param {string | null} value - Le nouveau nom de l'icône.\n   * @throws {Error} Si la valeur n'est pas une chaîne valide.\n   */\n  set icon(value: string | null) {\n    if (value !== null) {\n      if (typeof value === 'string' && /^[\\w-]+$/.test(value)) {\n        const oldValue = this.icon;\n        this.data(this._.DATA_ICON, value);\n\n        this.#_requestUpdateDOM(value);\n\n        this.oniconchanged.call(value, oldValue);\n      } else {\n        throw new Error('Icon must be a valid string.');\n      }\n    }\n  }\n  //#endregion Getter/setter\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant HTMLBnumIcon.\n   * Initialise les écouteurs d'attributs et l'événement oniconchanged.\n   */\n  constructor() {\n    super();\n\n    this.oniconchanged.add('default', (newIcon: string, oldIcon: string) => {\n      this.dispatchEvent(\n        new ElementChangedEvent(\n          this._.EVENT_ICON_CHANGED,\n          newIcon,\n          oldIcon,\n          this,\n        ),\n      );\n    });\n  }\n\n  /**\n   * Retourne les feuilles de style à appliquer dans le Shadow DOM.\n   * @returns {CSSStyleSheet[]} Les feuilles de style.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SYMBOLS, STYLE];\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   * @param {ShadowRoot} container - Le conteneur du Shadow DOM.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    container.appendChild(this._p_createSlot());\n\n    const icon = this.data<string>(this._.DATA_ICON);\n    if (icon) this.#_updateIcon(icon);\n\n    if (!this.hasAttribute('aria-hidden') && !this.hasAttribute('aria-label')) {\n      this.setAttribute('aria-hidden', 'true');\n\n      this.#_checkAndLoadFont();\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  async #_checkAndLoadFont() {\n    const FONT_SPEC = '24px \"Material Symbols Outlined\"';\n\n    // Optimisation : On ne lance le chargement qu'une fois globalement\n    if (!document.fonts.check(FONT_SPEC)) {\n      this._p_addState('loading');\n\n      if (!this._.#_fontPromise) {\n        this._.#_fontPromise = document.fonts.load(FONT_SPEC).then(() => {});\n      }\n\n      await this._.#_fontPromise;\n      this._p_removeState('loading');\n    }\n  }\n\n  /**\n   * Demande une mise à jour du DOM pour l'icône.\n   * @param {string} icon - Nom de l'icône.\n   * @returns {this}\n   * @private\n   */\n  #_requestUpdateDOM(icon: string): this {\n    this.#_updateScheduler ??= new Scheduler<string>(\n      (icon: Nullable<string>) => {\n        this.#_updateIcon(icon!);\n      },\n    );\n    this.#_updateScheduler.schedule(icon);\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage de l'icône.\n   * @param {string} icon - Nom de l'icône.\n   * @private\n   */\n  #_updateIcon(icon: string): void {\n    this.textContent = icon;\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * Crée une nouvelle instance de HTMLBnumIcon avec l'icône spécifiée.\n   * @param {string} icon - Le nom de l'icône à utiliser.\n   * @returns {HTMLBnumIcon} L'élément créé.\n   */\n  static Create(icon: string): HTMLBnumIcon {\n    const element = this.EMPTY;\n    element.icon = icon;\n    return element;\n  }\n\n  static Write(icon: string, attribs: Record<string, string> = {}): string {\n    const attributes = this._p_WriteAttributes(attribs);\n    return `<${TAG_ICON} data-icon=\"${icon}\" ${attributes}></${TAG_ICON}>`;\n  }\n\n  /**\n   * Retourne le tag HTML utilisé pour ce composant.\n   * @returns {string}\n   * @readonly\n   */\n  static get TAG(): string {\n    return TAG_ICON;\n  }\n\n  /**\n   * Retourne un élément HTMLBnumIcon vide.\n   * @returns {HTMLBnumIcon}\n   */\n  static get EMPTY(): HTMLBnumIcon {\n    return document.createElement(this.TAG) as HTMLBnumIcon;\n  }\n\n  /**\n   * Retourne la classe CSS utilisée pour les icônes Material Symbols.\n   * @returns {string}\n   */\n  static get HTML_CLASS(): string {\n    return ICON_CLASS;\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'home'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get HOME(): HTMLBnumIcon {\n    return this.Create('home');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'search'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get SEARCH(): HTMLBnumIcon {\n    return this.Create('search');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'settings'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get SETTINGS(): HTMLBnumIcon {\n    return this.Create('settings');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'person'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get USER(): HTMLBnumIcon {\n    return this.Create('person');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'mail'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get MAIL(): HTMLBnumIcon {\n    return this.Create('mail');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'close'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get CLOSE(): HTMLBnumIcon {\n    return this.Create('close');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'check'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get CHECK(): HTMLBnumIcon {\n    return this.Create('check');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'warning'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get WARNING(): HTMLBnumIcon {\n    return this.Create('warning');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'info'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get INFO(): HTMLBnumIcon {\n    return this.Create('info');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'delete'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get DELETE(): HTMLBnumIcon {\n    return this.Create('delete');\n  }\n\n  /**\n   * Retourne une instance de HTMLBnumIcon avec l'icône 'add'.\n   * @returns {HTMLBnumIcon}\n   */\n  static get ADD(): HTMLBnumIcon {\n    return this.Create('add');\n  }\n  //#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { TAG_BUTTON } from '../../../core/utils/constants/tags';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { REG_XSS_SAFE } from '../../../core/utils/constants/regexp';\nimport JsEvent from '@rotomeca/event';\nimport ElementChangedEvent from '../../../core/utils/events/ElementChangedEvent';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport style from './bnum-button.less';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable } from '../../../core/utils/types';\nimport {\n  Autobind,\n  Define,\n  Fire,\n  Self,\n  SetAttr,\n} from '../../../core/decorators';\nimport { ErrorPath, HappyPath, RiskyPath } from '@rotomeca/rop';\n\n//#region External Constants\n/**\n * Style CSS du composant bouton.\n */\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\n// Constantes pour les tags des différents types de boutons\n/**\n * Icône de chargement utilisée dans le bouton.\n */\nconst ICON_LOADER = 'progress_activity';\n//#endregion External Constants\n//#region Types and Enums\n/**\n * Enumération des types de boutons.\n */\nexport enum EButtonType {\n  PRIMARY = 'primary',\n  SECONDARY = 'secondary',\n  TERTIARY = 'tertiary',\n  DANGER = 'danger',\n}\n\n/**\n * Enumération des positions possibles de l'icône dans le bouton.\n */\nexport enum EIconPosition {\n  LEFT = 'left',\n  RIGHT = 'right',\n}\n\n/**\n * Enumération des tailles de layout pour cacher le texte.\n */\nexport enum EHideOn {\n  SMALL = 'small',\n  TOUCH = 'touch',\n}\n\n/**\n * Type représentant les variations possibles du bouton.\n */\nexport type ButtonVariation = 'primary' | 'secondary' | 'tertiary' | 'danger';\n\n/**\n * Position possible de l'icône dans le bouton.\n */\nexport type IconPosition = 'left' | 'right';\n\n/**\n * Taille de layout sur laquelle le texte doit être caché.\n */\nexport type HideTextOnLayoutSize = 'small' | 'touch' | null;\n//#endregion Types and Enums\n\n//#region Main Constants\nconst ATTRIBUTE_LOADING = 'loading';\nconst EVENT_LOADING_STATE_CHANGED = 'custom:loading';\nconst CLASS_WRAPPER = 'wrapper';\nconst CLASS_SLOT = 'slot';\nconst CLASS_ICON = 'icon';\nconst TAG = TAG_BUTTON;\n//#endregion Main Constants\n\n//#region Template\n/**\n * Template HTML du composant bouton.\n */\nconst TEMPLATE = BnumElement.CreateTemplate(`\n  <div class=\"${CLASS_WRAPPER}\">\n    <span class=\"${CLASS_SLOT}\">\n      <slot></slot>\n    </span>\n    <${HTMLBnumIcon.TAG} hidden=\"true\" class=\"${CLASS_ICON}\"></${HTMLBnumIcon.TAG}>\n  </div>\n  `);\n//#endregion Template\n\n//#region Documentation\n/**\n * Composant bouton principal de la bibliothèque Bnum.\n * Gère les variations, l'icône, l'état de chargement, etc.\n *\n * @structure Bouton primaire\n * <bnum-button data-variation=\"primary\">Texte du bouton</bnum-button>\n *\n * @structure Bouton secondaire\n * <bnum-button data-variation=\"secondary\">Texte du bouton</bnum-button>\n *\n * @structure Bouton danger\n * <bnum-button data-variation=\"danger\">Texte du bouton</bnum-button>\n *\n * @structure Bouton avec icône\n * <bnum-button data-icon=\"home\">Texte du bouton</bnum-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-button loading>Texte du bouton</bnum-button>\n *\n * @structure Bouton arrondi\n * <bnum-button rounded>Texte du bouton</bnum-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-button>\n *\n * @slot (default) - Contenu du bouton (texte, HTML, etc.)\n *\n * @state loading - Actif si le bouton est en état de chargement\n * @state rounded - Actif si le bouton est arrondi\n * @state disabled - Actif si le bouton est désactivé\n * @state icon - Actif si le bouton contient une icône\n * @state without-icon - Actif si le bouton ne contient pas d'icône\n * @state icon-pos-left - Actif si l'icône est positionnée à gauche\n * @state icon-pos-right - Actif si l'icône est positionnée à droite\n * @state hide-text-on-small - Actif si le texte est caché sur les petits layouts\n * @state hide-text-on-touch - Actif si le texte est caché sur les layouts tactiles\n * @state primary - Actif si le bouton est de type primaire\n * @state secondary - Actif si le bouton est de type secondaire\n * @state tertiary - Actif si le bouton est de type tertiaire\n * @state danger - Actif si le bouton est de type danger\n *\n * @cssvar {inline-block} --bnum-button-display - Définit le type d'affichage du bouton\n * @cssvar {6px 10px} --bnum-button-padding - Définit le padding interne du bouton\n * @cssvar {0} --bnum-button-border-radius - Définit l'arrondi des coins du bouton\n * @cssvar {pointer} --bnum-button-cursor - Définit le curseur de la souris au survol du bouton\n * @cssvar {5px} --bnum-button-rounded-border-radius - Arrondi des coins pour le bouton arrondi\n * @cssvar {7.5px} --bnum-button-without-icon-padding-top - Padding top si le bouton n'a pas d'icône\n * @cssvar {7.5px} --bnum-button-without-icon-padding-bottom - Padding bottom si le bouton n'a pas d'icône\n * @cssvar {var(--bnum-color-primary)} --bnum-button-primary-background-color - Couleur de fond du bouton (état primaire)\n * @cssvar {var(--bnum-text-on-primary)} --bnum-button-primary-text-color - Couleur du texte du bouton (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-border-color)} --bnum-button-primary-border - Bordure du bouton (état primaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-primary-border-color - Couleur de la bordure (état primaire)\n * @cssvar {var(--bnum-color-primary-hover)} --bnum-button-primary-hover-background-color - Couleur de fond au survol (état primaire)\n * @cssvar {var(--bnum-text-on-primary-hover)} --bnum-button-primary-hover-text-color - Couleur du texte au survol (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-hover-border-color)} --bnum-button-primary-hover-border - Bordure au survol (état primaire)\n * @cssvar {var(--bnum-color-primary-hover)} --bnum-button-primary-hover-border-color - Couleur de la bordure au survol (état primaire)\n * @cssvar {var(--bnum-color-primary-active)} --bnum-button-primary-active-background-color - Couleur de fond lors du clic (état primaire)\n * @cssvar {var(--bnum-text-on-primary-active)} --bnum-button-primary-active-text-color - Couleur du texte lors du clic (état primaire)\n * @cssvar {solid thin var(--bnum-button-primary-active-border-color)} --bnum-button-primary-active-border - Bordure lors du clic (état primaire)\n * @cssvar {var(--bnum-color-primary-active)} --bnum-button-primary-active-border-color - Couleur de la bordure lors du clic (état primaire)\n * @cssvar {var(--bnum-color-secondary)} --bnum-button-secondary-background-color - Couleur de fond (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary)} --bnum-button-secondary-text-color - Couleur du texte (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-border-color)} --bnum-button-secondary-border - Bordure (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-border-color - Couleur de la bordure (état secondaire)\n * @cssvar {var(--bnum-color-secondary-hover)} --bnum-button-secondary-hover-background-color - Couleur de fond au survol (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary-hover)} --bnum-button-secondary-hover-text-color - Couleur du texte au survol (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-hover-border-color)} --bnum-button-secondary-hover-border - Bordure au survol (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-hover-border-color - Couleur de la bordure au survol (état secondaire)\n * @cssvar {var(--bnum-color-secondary-active)} --bnum-button-secondary-active-background-color - Couleur de fond lors du clic (état secondaire)\n * @cssvar {var(--bnum-text-on-secondary-active)} --bnum-button-secondary-active-text-color - Couleur du texte lors du clic (état secondaire)\n * @cssvar {solid thin var(--bnum-button-secondary-active-border-color)} --bnum-button-secondary-active-border - Bordure lors du clic (état secondaire)\n * @cssvar {var(--bnum-color-primary)} --bnum-button-secondary-active-border-color - Couleur de la bordure lors du clic (état secondaire)\n * @cssvar {var(--bnum-color-danger)} --bnum-button-danger-background-color - Couleur de fond (état danger)\n * @cssvar {var(--bnum-text-on-danger)} --bnum-button-danger-text-color - Couleur du texte (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-border-color)} --bnum-button-danger-border - Bordure (état danger)\n * @cssvar {var(--bnum-color-danger)} --bnum-button-danger-border-color - Couleur de la bordure (état danger)\n * @cssvar {var(--bnum-color-danger-hover)} --bnum-button-danger-hover-background-color - Couleur de fond au survol (état danger)\n * @cssvar {var(--bnum-text-on-danger-hover)} --bnum-button-danger-hover-text-color - Couleur du texte au survol (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-hover-border-color)} --bnum-button-danger-hover-border - Bordure au survol (état danger)\n * @cssvar {var(--bnum-color-danger-hover)} --bnum-button-danger-hover-border-color - Couleur de la bordure au survol (état danger)\n * @cssvar {var(--bnum-color-danger-active)} --bnum-button-danger-active-background-color - Couleur de fond lors du clic (état danger)\n * @cssvar {var(--bnum-text-on-danger-active)} --bnum-button-danger-active-text-color - Couleur du texte lors du clic (état danger)\n * @cssvar {solid thin var(--bnum-button-danger-active-border-color)} --bnum-button-danger-active-border - Bordure lors du clic (état danger)\n * @cssvar {var(--bnum-color-danger-active)} --bnum-button-danger-active-border-color - Couleur de la bordure lors du clic (état danger)\n * @cssvar {0.6} --bnum-button-disabled-opacity - Opacité du bouton désactivé\n * @cssvar {none} --bnum-button-disabled-pointer-events - Gestion des événements souris pour le bouton désactivé\n * @cssvar {flex} --bnum-button-wrapper-display - Type d'affichage du wrapper interne\n * @cssvar {center} --bnum-button-wrapper-align-items - Alignement vertical du contenu du wrapper\n * @cssvar {flex} --bnum-button-icon-display - Type d'affichage de l'icône\n * @cssvar {flex} --bnum-button-loader-display - Type d'affichage du loader\n * @cssvar {0.75s} --bnum-button-spin-duration - Durée de l'animation de spin\n * @cssvar {linear} --bnum-button-spin-timing - Fonction de timing de l'animation de spin\n * @cssvar {infinite} --bnum-button-spin-iteration - Nombre d'itérations de l'animation de spin\n * @cssvar {-3px} --bnum-button-margin-bottom-text-correction - Correction basse du texte\n */\n@Define()\nexport class HTMLBnumButton extends BnumElement {\n  //#endregion Component Definition\n  //#region Constantes\n  /**\n   * Attribut pour rendre le bouton arrondi.\n   * @attr {boolean | undefined} (optional) rounded - Rend le bouton arrondi\n   */\n  static readonly ATTR_ROUNDED = 'rounded';\n  /**\n   * Attribut de chargement du bouton.\n   * @attr {boolean | undefined} (optional) loading - Met le bouton en état de chargement et le désactive\n   */\n  static readonly ATTR_LOADING = ATTRIBUTE_LOADING;\n  /**\n   * Attribut de désactivation du bouton.\n   * @attr {boolean | undefined} (optional) disabled - Désactive le bouton\n   */\n  static readonly ATTR_DISABLED = 'disabled';\n  /**\n   * Attribut de variation du bouton.\n   * @attr {EButtonType | undefined} (optional) (default: EButtonType.PRIMARY) data-variation - Variation du bouton (primary, secondary, etc.)\n   */\n  static readonly ATTR_VARIATION = 'variation';\n  /**\n   * Attribut d'icône du bouton.\n   * @attr {string | undefined} (optional) data-icon - Icône affichée dans le bouton\n   */\n  static readonly ATTR_ICON = 'icon';\n  /**\n   * Attribut de position de l'icône dans le bouton.\n   * @attr {EIconPosition | undefined} (optional) (default: EIconPosition.RIGHT) data-icon-pos - Position de l'icône (gauche ou droite)\n   */\n  static readonly ATTR_ICON_POS = 'icon-pos';\n  /**\n   * Attribut de marge de l'icône dans le bouton.\n   * @attr {string | undefined} (optional) (default: var（--custom-bnum-button-icon-margin, 10px）) data-icon-margin - Marge de l'icône (gauche, droite)\n   */\n  static readonly ATTR_ICON_MARGIN = 'icon-margin';\n  /**\n   * Attribut de taille de layout pour cacher le texte.\n   * @attr {EHideOn | undefined} (optional) data-hide - Taille de layout pour cacher le texte\n   */\n  static readonly ATTR_HIDE = 'hide';\n  /**\n   * État du bouton lorsqu'il contient une icône.\n   */\n  static readonly STATE_ICON = 'icon';\n  /**\n   * État du bouton lorsqu'il ne contient pas d'icône.\n   */\n  static readonly STATE_WITHOUT_ICON = 'without-icon';\n  /**\n   * État du bouton lorsqu'il est arrondi.\n   */\n  static readonly STATE_ROUNDED = 'rounded';\n  /**\n   * État du bouton lorsqu'il est en chargement.\n   */\n  static readonly STATE_LOADING = 'loading';\n  /**\n   * État du bouton lorsqu'il est désactivé.\n   */\n  static readonly STATE_DISABLED = 'disabled';\n  /**\n   * Événement déclenché lors du changement d'icône.\n   * @event custom:element-changed.icon\n   * @detail ElementChangedEvent\n   */\n  static readonly EVENT_ICON = 'icon';\n  /**\n   * Événement déclenché lors du changement de variation du bouton.\n   * @event custom:element-changed.variation\n   * @detail ElementChangedEvent\n   */\n  static readonly EVENT_VARIATION = 'variation';\n  /**\n   * Événement déclenché lors du changement de propriété de l'icône.\n   * @event custom:element-changed.icon.prop\n   * @detail { type: string, newValue: boolean | string }\n   */\n  static readonly EVENT_ICON_PROP_CHANGED = 'custom:icon.prop.changed';\n  /**\n   * Événement déclenché lors du changement d'état de chargement.\n   * @event custom:loading\n   * @detail { state: boolean }\n   */\n  static readonly EVENT_LOADING_STATE_CHANGED = EVENT_LOADING_STATE_CHANGED;\n  /**\n   * Valeur par défaut de la marge de l'icône dans le bouton.\n   */\n  static readonly DEFAULT_CSS_VAR_ICON_MARGIN =\n    'var(--custom-bnum-button-icon-margin, 10px)';\n  /**\n   * Nom de la propriété de l'icône pour la position.\n   */\n  static readonly ICON_PROP_POS = 'pos';\n  /**\n   * Classe CSS du wrapper du bouton.\n   */\n  static readonly CLASS_WRAPPER = CLASS_WRAPPER;\n  /**\n   * Classe CSS de l'icône du bouton.\n   */\n  static readonly CLASS_ICON = CLASS_ICON;\n  /**\n   * Classe CSS du slot du bouton.\n   */\n  static readonly CLASS_SLOT = CLASS_SLOT;\n  /**\n   * Propriété CSS pour la marge de l'icône.\n   */\n  static readonly CSS_PROPERTY_ICON_MARGIN = '--bnum-button-icon-gap';\n  //#endregion Constantes\n\n  //#region Private fields\n  /**\n   * Internals pour la gestion des états personnalisés.\n   * @private\n   */\n  #_internals: ElementInternals;\n  #_wrapper!: HTMLDivElement;\n  #_iconEl!: HTMLBnumIcon;\n  #_renderScheduler: Nullable<Scheduler<void>> = null;\n  #_onClick: Nullable<JsEvent<(click: string) => void>> = null;\n  #_lastClick: Nullable<string> = null;\n  //#endregion Private fields\n  //#region Public fields\n  /**\n   * Événement déclenché lors du changement d'état de chargement.\n   */\n  public onloadingstatechange: JsEvent<(state: boolean) => void> =\n    new JsEvent();\n  /**\n   * Événement déclenché lors du changement d'icône.\n   */\n  public oniconchange: JsEvent<(newIcon: string, oldIcon: string) => void> =\n    new JsEvent();\n  /**\n   * Événement déclenché lors du changement de propriété de l'icône.\n   */\n  public oniconpropchange: JsEvent<\n    (type: 'margin' | 'pos', newValue: string) => void\n  > = new JsEvent();\n  /**\n   * Événement déclenché lors du changement de variation du bouton.\n   */\n  public onvariationchange: JsEvent<\n    (newVariation: ButtonVariation, oldVariation: ButtonVariation) => void\n  > = new JsEvent();\n\n  public get linkedClickEvent(): JsEvent<(click: string) => void> {\n    if (this.#_onClick === null) {\n      this.#_onClick = new JsEvent<(click: string) => void>();\n\n      this.addEventListener('click', () => {\n        this.#_onClick?.call?.();\n      });\n    }\n\n    return this.#_onClick;\n  }\n  //#endregion Public fields\n  //#region Getter/setter\n  /** Référence à la classe HtmlBnumButton */\n  @Self _!: typeof HTMLBnumButton;\n\n  /**\n   * Variation du bouton (primary, secondary, etc.).\n   */\n  get variation(): EButtonType {\n    return (\n      (this.data(this._.ATTR_VARIATION) as EButtonType) || EButtonType.PRIMARY\n    );\n  }\n  set variation(value: EButtonType) {\n    if (Object.values(EButtonType).includes(value)) {\n      const fromAttribute = false;\n      this.data(this._.ATTR_VARIATION, value, fromAttribute);\n\n      if (this.alreadyLoaded) {\n        this.onvariationchange.call(value, this.variation);\n        this.#_requestUpdateDOM();\n      }\n    }\n  }\n\n  /**\n   * Icône affichée dans le bouton.\n   */\n  get icon(): string | null {\n    return (this.data(this._.ATTR_ICON) as string) || null;\n  }\n  set icon(value: string | null) {\n    if (this.alreadyLoaded)\n      this.oniconchange.call(value || EMPTY_STRING, this.icon || EMPTY_STRING);\n\n    if (typeof value === 'string' && /^[\\w-]+$/.test(value)) {\n      const fromAttribute = false;\n      this.data(this._.ATTR_ICON, value, fromAttribute);\n    } else {\n      this.data(this._.ATTR_ICON, null);\n    }\n\n    if (this.alreadyLoaded) this.#_requestUpdateDOM();\n  }\n\n  /**\n   * Position de l'icône (gauche ou droite).\n   */\n  get iconPos(): EIconPosition {\n    return (this.data(this._.ATTR_ICON_POS) as EIconPosition) || EIconPosition;\n  }\n  set iconPos(value: EIconPosition) {\n    if (this.alreadyLoaded)\n      this.oniconpropchange.call(this._.ICON_PROP_POS, value);\n\n    if (Object.values(EIconPosition).includes(value)) {\n      const fromAttribute = false;\n      this.data(this._.ATTR_ICON_POS, value, fromAttribute);\n    }\n\n    if (this.alreadyLoaded) this.#_requestUpdateDOM();\n  }\n\n  /**\n   * Marge appliquée à l'icône.\n   */\n  get iconMargin(): string {\n    return (\n      (this.data(this._.ATTR_ICON_MARGIN) as string) ||\n      this._.DEFAULT_CSS_VAR_ICON_MARGIN\n    );\n  }\n  set iconMargin(value: string | null) {\n    if (this.alreadyLoaded)\n      this.oniconpropchange.call('margin', value || EMPTY_STRING);\n\n    if (typeof value === 'string' && REG_XSS_SAFE.test(value)) {\n      const fromAttribute = false;\n      this.data(this._.ATTR_ICON_MARGIN, value, fromAttribute);\n      this.style.setProperty(this._.CSS_PROPERTY_ICON_MARGIN, value);\n    } else if (value === null) {\n      this.data(this._.ATTR_ICON_MARGIN, value);\n      this.style.removeProperty(this._.CSS_PROPERTY_ICON_MARGIN);\n    }\n  }\n\n  /**\n   * Taille de layout sur laquelle le texte doit être caché.\n   */\n  get hideTextOnLayoutSize(): EHideOn | null {\n    const data = this.data<EHideOn | null | undefined>(this._.ATTR_HIDE);\n\n    if ([...Object.values(EHideOn), null, undefined].includes(data))\n      return data as EHideOn;\n    return null;\n  }\n  //#endregion Getter/setter\n  //#region Lifecycle\n  /**\n   * Constructeur du bouton Bnum.\n   */\n  constructor() {\n    super();\n    this.#_internals = this.attachInternals();\n\n    this.oniconchange.push((n, o) => {\n      this.dispatchEvent(\n        new ElementChangedEvent(this._.EVENT_ICON, n, o, this),\n      );\n    });\n\n    this.onvariationchange.push((n, o) => {\n      this.dispatchEvent(\n        new ElementChangedEvent(this._.EVENT_VARIATION, n, o, this),\n      );\n    });\n\n    this.oniconpropchange.push((type, newValue) => {\n      this.dispatchEvent(\n        new CustomEvent(this._.EVENT_ICON_PROP_CHANGED, {\n          detail: { type, newValue },\n        }),\n      );\n    });\n\n    this.onloadingstatechange.push(this.#_onLoadingChange);\n  }\n\n  /**\n   * Template HTML du composant bouton.\n   * @returns Template utiliser pour le composant\n   */\n  @HappyPath((r) => r)\n  @ErrorPath(() => null)\n  @RiskyPath()\n  protected _p_fromTemplate(): Nullable<HTMLTemplateElement> {\n    return TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM du composant bouton.\n   * @param container - Le conteneur du Shadow DOM.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    this.#_wrapper = container.querySelector(`.${this._.CLASS_WRAPPER}`)!;\n    this.#_iconEl = container.querySelector(\n      `.${this._.CLASS_ICON}`,\n    )! as HTMLBnumIcon;\n\n    if (this.data(this._.ATTR_ICON_MARGIN)) {\n      this.style.setProperty(\n        this._.CSS_PROPERTY_ICON_MARGIN,\n        this.data(this._.ATTR_ICON_MARGIN),\n      );\n    }\n\n    this.#_updateDOM();\n\n    HTMLBnumButton.ToButton(this);\n  }\n\n  protected _p_update(\n    name?: string,\n    oldVal?: string | null,\n    newVal?: string | null,\n  ): void {\n    if (!this.#_wrapper) return;\n\n    this.#_updateDOM();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  /**\n   * Demande une mise à jour du DOM du bouton.\n   */\n  #_requestUpdateDOM(): void {\n    this.#_renderScheduler ??= new Scheduler<void>(() => {\n      this.#_updateDOM();\n    });\n    this.#_renderScheduler.schedule();\n  }\n\n  /**\n   * Met à jour le DOM du bouton (icône, états, etc.).\n   * @private\n   */\n  #_updateDOM(): void {\n    const isLoading = this.#_isLoading();\n    const isDisabled = this.#_isDisabled();\n\n    // Reset des états\n    this.#_internals.states.clear();\n\n    // États globaux\n    this.#_internals.states.add(this.variation);\n    if (this.#_isRounded()) this.#_internals.states.add(this._.STATE_ROUNDED);\n    if (isLoading) this.#_internals.states.add(this._.STATE_LOADING);\n    if (isDisabled || isLoading)\n      this.#_internals.states.add(this._.STATE_DISABLED);\n\n    // Gestion de l'icône\n    const effectiveIcon = isLoading ? ICON_LOADER : this.icon;\n\n    if (effectiveIcon) {\n      this.#_internals.states.add(this._.STATE_ICON);\n\n      // L'état CSS \"icon-pos-left\" déclenchera le \"flex-direction: row-reverse\"\n      this.#_internals.states.add(`icon-pos-${this.iconPos}`);\n\n      if (this.hideTextOnLayoutSize) {\n        this.#_internals.states.add(\n          `hide-text-on-${this.hideTextOnLayoutSize}`,\n        );\n      }\n\n      // Mise à jour du composant icône enfant\n      if (this.#_iconEl.icon !== effectiveIcon)\n        this.#_iconEl.icon = effectiveIcon;\n      this.#_iconEl.hidden = false;\n    } else {\n      this.#_internals.states.add(this._.STATE_WITHOUT_ICON);\n      this.#_iconEl.hidden = true;\n    }\n\n    // Accessibilité (Internals gère aria-disabled, mais tabindex doit être géré ici)\n    this.#_internals.ariaDisabled = String(isDisabled || isLoading);\n    this.tabIndex = isDisabled || isLoading ? -1 : 0;\n\n    if (this.hasAttribute('click')) {\n      const click = this.getAttribute('click');\n\n      if (click !== this.#_lastClick) {\n        if (this.linkedClickEvent.has('click'))\n          this.linkedClickEvent.remove('click');\n\n        if (click && REG_XSS_SAFE.test(click)) {\n          this.#_lastClick = click;\n          this.linkedClickEvent.add(\n            'click',\n            (click: string) => {\n              // Si c'est un id unique\n              var elementToClick = document.getElementById(click!);\n\n              if (elementToClick) elementToClick.click();\n              else {\n                // Sinon on part du principe que c'est un sélecteur CSS\n                const elements = document.querySelector(click!);\n                if (elements) (elements as HTMLElement).click();\n                else\n                  throw new Error(\n                    `[${TAG}] L'attribut 'click' ne référence aucun élément.`,\n                  );\n              }\n            },\n            click,\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Indique si le bouton est arrondi.\n   * @private\n   */\n  #_isRounded(): boolean {\n    return this.#_is(this._.ATTR_ROUNDED);\n  }\n  /**\n   * Indique si le bouton est en état de chargement.\n   * @private\n   */\n  #_isLoading(): boolean {\n    return this.#_is(this._.ATTR_LOADING);\n  }\n  /**\n   * Indique si le bouton est désactivé.\n   * @private\n   */\n  #_isDisabled(): boolean {\n    return this.#_is(this._.ATTR_DISABLED);\n  }\n\n  /**\n   * Vérifie la présence d'un attribut et sa valeur.\n   * @private\n   * @param attr Nom de l'attribut à vérifier\n   * @returns true si l'attribut est présent et sa valeur est valide\n   */\n  #_is(attr: string): boolean {\n    return (\n      this.hasAttribute(attr) &&\n      !['false', false].includes(this.getAttribute(attr) as any)\n    );\n  }\n  //#endregion Private methods\n\n  //#region Event handlers\n  /**\n   * Gestion du changement d'état de chargement.\n   * @param state Nouvel état de chargement\n   * @returns Détail de l'événement\n   */\n  @Autobind\n  @Fire(EVENT_LOADING_STATE_CHANGED)\n  #_onLoadingChange(state: boolean): { state: boolean } {\n    return { state };\n  }\n  //#endregion Event handlers\n\n  //#region Public methods\n  /**\n   * Met le bouton en état de chargement.\n   * @returns L'instance du bouton\n   */\n  @SetAttr(ATTRIBUTE_LOADING, true)\n  setLoading(): this {\n    return this;\n  }\n  /**\n   * Arrête l'état de chargement du bouton.\n   * @returns L'instance du bouton\n   */\n  stopLoading(): this {\n    this.removeAttribute(this._.ATTR_LOADING);\n    return this;\n  }\n\n  /**\n   * Bascule l'état de chargement du bouton.\n   * @returns L'instance du bouton\n   */\n  toggleLoading(): this {\n    if (this.#_isLoading()) {\n      this.stopLoading();\n    } else {\n      this.setLoading();\n    }\n    return this;\n  }\n  //#endregion Public methods\n  //#region Static methods\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   */\n  static _p_observedAttributes(): string[] {\n    return [this.ATTR_ROUNDED, this.ATTR_LOADING, this.ATTR_DISABLED, 'click'];\n  }\n\n  /**\n   * Transforme un élément en bouton accessible (role, tabindex, etc.).\n   * @static\n   * @param element Élément HTML à transformer\n   * @returns L'élément modifié\n   */\n  static ToButton<T extends HTMLElement>(element: T): T {\n    if (!element.onkeydown) {\n      element.onkeydown = (e: KeyboardEvent) => {\n        if (\n          (e.key === ' ' || e.key === 'Enter') &&\n          e.target instanceof HTMLElement\n        ) {\n          e.target.click();\n        }\n      };\n      element.setAttribute('data-set-event', 'onkeydown');\n    }\n\n    if (\n      !element.hasAttribute('role') ||\n      element.getAttribute('role') !== 'button'\n    )\n      element.setAttribute('role', 'button');\n    if (!element.hasAttribute('tabindex'))\n      element.setAttribute('tabindex', '0');\n    return element;\n  }\n\n  /**\n   * Crée un bouton Bnum avec les options spécifiées.\n   * @static\n   * @param buttonClass Classe du bouton à instancier\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static _p_Create<T extends HTMLBnumButton>(\n    buttonClass: { TAG: string },\n    {\n      text = EMPTY_STRING,\n      icon = null,\n      iconPos = EIconPosition.RIGHT,\n      iconMargin = null,\n      variation = null,\n      rounded = false,\n      loading = false,\n      hideOn = null,\n    }: {\n      text?: string;\n      icon?: string | null;\n      iconPos?: EIconPosition;\n      iconMargin?: string | null | 0;\n      variation?: EButtonType | null;\n      rounded?: boolean;\n      loading?: boolean;\n      hideOn?: Nullable<EHideOn>;\n    } = {},\n  ): T {\n    const node = document.createElement(buttonClass.TAG) as unknown as T;\n    node.textContent = text;\n\n    if (rounded) node.setAttribute(this.ATTR_ROUNDED, 'true');\n    if (iconMargin === 0) iconMargin = '0px';\n    if (icon) node.setAttribute(`data-${this.ATTR_ICON}`, icon);\n    if (iconPos) node.setAttribute(`data-${this.ATTR_ICON_POS}`, iconPos);\n    if (iconMargin)\n      node.setAttribute(`data-${this.ATTR_ICON_MARGIN}`, iconMargin);\n    if (variation) node.setAttribute(`data-${this.ATTR_VARIATION}`, variation);\n    if (loading) node.setAttribute(this.ATTR_LOADING, 'true');\n    if (hideOn) node.setAttribute(`data-${this.ATTR_HIDE}`, hideOn);\n\n    return node;\n  }\n\n  /**\n   * Crée un bouton Bnum standard.\n   * @static\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static Create(\n    options: {\n      text?: string;\n      icon?: string | null;\n      iconPos?: EIconPosition;\n      iconMargin?: string | null;\n      variation?: EButtonType | null;\n      rounded?: boolean;\n      loading?: boolean;\n      hideOn?: EHideOn;\n    } = {},\n  ): HTMLBnumButton {\n    return this._p_Create(this, options);\n  }\n\n  /**\n   * Crée un bouton Bnum ne contenant qu'une icône.\n   * @static\n   * @param icon Nom de l'icône à afficher\n   * @param options Options de configuration du bouton\n   * @returns Instance du bouton créé\n   */\n  static CreateOnlyIcon(\n    icon: string,\n    {\n      variation = EButtonType.PRIMARY,\n      rounded = false,\n      loading = false,\n    }: {\n      variation?: EButtonType | null;\n      rounded?: boolean;\n      loading?: boolean;\n    } = {},\n  ): HTMLBnumButton {\n    return this.Create({\n      icon,\n      variation,\n      rounded,\n      loading,\n      iconMargin: '0px',\n    });\n  }\n\n  /**\n   * Tag HTML du composant bouton.\n   * @static\n   * @returns Nom du tag HTML\n   */\n  static get TAG(): string {\n    return TAG;\n  }\n  //#endregion Static methods\n}\n","// type: decorators\n// description: Decorators to handle risky operations by converting exceptions into Result types.\nimport { riskyAsync, riskySync } from \"./Risky.internal/functions\";\n/**\n * Decorator to handle risky operations by converting exceptions into Result types.\n * Use with HappyPath or ErrorPath to handle the respective paths.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyPath() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyPath can only be applied to methods.\");\n        }\n        return (function (...args) {\n            return riskySync.call(this, originalMethod, ...args);\n        });\n    };\n}\n/**\n * Decorator to handle risky async operations by converting exceptions into Result types.\n * Use with HappyPath or ErrorPath to handle the respective paths.\n * @returns A method decorator that wraps the original method with error handling.\n */\nexport function RiskyPathAsync() {\n    return function (originalMethod, context) {\n        if (context.kind !== \"method\") {\n            throw new Error(\"RiskyPathAsync can only be applied to methods.\");\n        }\n        return (async function (...args) {\n            return await riskyAsync.call(this, originalMethod, ...args);\n        });\n    };\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_DANGER } from '../../../core/utils/constants/tags';\nimport { EButtonType, HTMLBnumButton } from '../button/bnum-button';\n\n/**\n * Bouton Bnum de type \"Danger\".\n *\n * @structure Cas standard\n * <bnum-danger-button>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton avec icône\n * <bnum-danger-button data-icon=\"home\">Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-danger-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-danger-button loading>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton arrondi\n * <bnum-danger-button rounded>Texte du bouton</bnum-danger-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-danger-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-danger-button>\n */\n@Define()\nexport class HTMLBnumDangerButton extends HTMLBnumButton {\n  constructor() {\n    super();\n    const fromAttribute = false;\n    this.data(HTMLBnumButton.ATTR_VARIATION, EButtonType.DANGER, fromAttribute);\n  }\n\n  static get TAG(): string {\n    return TAG_DANGER;\n  }\n}\n","import Log from '../utils/Log';\n\n// On définit un type qui regroupe tous les endroits où on peut poser le décorateur\ntype GenericContext =\n  | ClassDecoratorContext\n  | ClassMethodDecoratorContext\n  | ClassGetterDecoratorContext\n  | ClassSetterDecoratorContext\n  | ClassFieldDecoratorContext\n  | ClassAccessorDecoratorContext;\n\nexport function NonStd(reason?: string, fatal: boolean = false) {\n  // On accepte 'any' pour la value (car ça peut être une classe, une fonction, undefined pour un champ...)\n  // On utilise notre type GenericContext\n  return function (value: any, context: GenericContext) {\n    // On construit un message propre selon le type (classe, méthode, field...)\n    const typeLabel =\n      {\n        class: 'La classe',\n        method: 'La méthode',\n        getter: 'Le getter',\n        setter: 'Le setter',\n        field: 'Le champ',\n        accessor: 'L\\'accesseur',\n      }[context.kind] || 'L\\'élément';\n\n    const name = String(context.name);\n    const message = `${typeLabel} '${name}' est non standard${reason ? ` : ${reason}` : ''}.`;\n\n    // addInitializer fonctionne partout !\n    // - Pour une classe : s'exécute à la définition de la classe.\n    // - Pour un membre (méthode/champ) : s'exécute à la création de l'instance.\n    context.addInitializer(function () {\n      if (fatal) {\n        throw new Error(message);\n      } else {\n        Log.warn(name, message);\n      }\n    });\n  };\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { Nullable } from './types';\n\nexport enum BnumDateLocale {\n  FR = 'fr-FR',\n  EN = 'en-US',\n}\n\n/**\n * Native replacements for date-fns functions to reduce bundle size.\n * Uses Intl API for localization and native Date for manipulations.\n */\nexport class BnumDateUtils {\n  /**\n   * Equivalent to date-fns/format.\n   * @param date Date to format.\n   * @param options Intl options or a simple locale string.\n   * @param locale Locale string (e.g., 'fr-FR', 'en-US').\n   */\n  static format(\n    date: Date,\n    options: Intl.DateTimeFormatOptions = {\n      day: '2-digit',\n      month: '2-digit',\n      year: 'numeric',\n    },\n    locale: string = 'fr-FR',\n  ): string {\n    return new Intl.DateTimeFormat(locale, options).format(date);\n  }\n\n  /**\n   * Parse une chaîne de caractères en objet Date.\n   * @param dateString La chaîne à parser (ex: \"12/08/1997\")\n   * @param format Optionnel : le format de la chaîne (ex: \"dd/MM/yyyy\")\n   */\n  static parse(dateString: string, format?: string): Nullable<Date> {\n    return this.#_parse(dateString, format).unwrapOr(null);\n  }\n\n  /**\n   * Parse une chaîne de caractères en objet Date.\n   * @param dateString La chaîne à parser (ex: \"12/08/1997\")\n   * @param format Optionnel : le format de la chaîne (ex: \"dd/MM/yyyy\")\n   */\n  @Risky()\n  static #_parse(dateString: string, format?: string): Result<Nullable<Date>> {\n    if (!dateString) return null as any;\n\n    // 1. Si aucun format n'est fourni, on tente le parsing natif (ISO 8601)\n    if (!format) {\n      const d = new Date(dateString);\n      return (this.isValid(d) ? d : null) as any;\n    } else {\n      if (['PPPP', 'PPP', 'PP', 'P'].includes(format)) {\n        format = 'dd/MM/yyyy';\n      }\n    }\n\n    // On extrait les nombres de la chaîne (ignore les séparateurs comme / - :)\n    const values = dateString.match(/\\d+/g);\n    const tokens = format.match(/[a-zA-Z]+/g);\n\n    if (!values || !tokens || values.length !== tokens.length)\n      return null as any;\n\n    let year = new Date().getFullYear();\n    let month = 0;\n    let day = 1;\n    let hour = 0;\n    let minute = 0;\n\n    tokens.forEach((token, index) => {\n      const val = parseInt(values[index], 10);\n      if (token.includes('y')) year = val;\n      if (token.includes('M')) month = val - 1; // Mois 0-11 en JS\n      if (token.includes('d')) day = val;\n      if (token.includes('H')) hour = val;\n      if (token.includes('m')) minute = val;\n    });\n\n    const result = new Date(year, month, day, hour, minute);\n    return (this.isValid(result) ? result : null) as any;\n  }\n\n  /**\n   * Equivalent to date-fns/isValid.\n   */\n  static isValid(date: any): date is Date {\n    return date instanceof Date && !isNaN(date.getTime());\n  }\n\n  /**\n   * Equivalent to date-fns/addDays (Immutable).\n   */\n  static addDays(date: Date, days: number): Date {\n    const result = new Date(date);\n    result.setDate(result.getDate() + days);\n    return result;\n  }\n\n  /**\n   * Equivalent to date-fns/addMonths (Immutable).\n   */\n  static addMonths(date: Date, months: number): Date {\n    const result = new Date(date);\n    result.setMonth(result.getMonth() + months);\n    return result;\n  }\n\n  /**\n   * Equivalent to date-fns/addYears (Immutable).\n   */\n  static addYears(date: Date, years: number): Date {\n    const result = new Date(date);\n    result.setFullYear(result.getFullYear() + years);\n    return result;\n  }\n\n  /**\n   * Convertit dynamiquement une chaîne de tokens (ex: \"dd/MM\") en options Intl.\n   * @param pattern La chaîne de formatage.\n   */\n  static getOptionsFromToken(pattern: string): Intl.DateTimeFormatOptions {\n    if (pattern.includes('PPPP')) return { dateStyle: 'full' };\n    if (pattern.includes('PPP')) return { dateStyle: 'long' };\n    if (pattern.includes('PP')) return { dateStyle: 'medium' };\n    if (pattern.includes('P')) return { dateStyle: 'short' };\n\n    const options: Intl.DateTimeFormatOptions = {};\n\n    if (pattern.includes('yyyy')) options.year = 'numeric';\n    else if (pattern.includes('yy')) options.year = '2-digit';\n\n    if (pattern.includes('MMMM')) options.month = 'long';\n    else if (pattern.includes('MMM')) options.month = 'short';\n    else if (pattern.includes('MM')) options.month = '2-digit';\n    else if (pattern.includes('M')) options.month = 'numeric';\n\n    if (pattern.includes('dd')) options.day = '2-digit';\n    else if (pattern.includes('d')) options.day = 'numeric';\n\n    if (pattern.includes('EEEE')) options.weekday = 'long';\n    else if (pattern.includes('E')) options.weekday = 'short';\n\n    if (pattern.includes('HH')) options.hour = '2-digit';\n    else if (pattern.includes('H')) options.hour = 'numeric';\n\n    if (pattern.includes('mm')) options.minute = '2-digit';\n\n    // Force 24h si on demande des heures\n    if (options.hour) options.hour12 = false;\n\n    return options;\n  }\n\n  /**\n   * Vérifie si deux dates correspondent au même jour (ignore l'heure).\n   * @param date Première date à comparer.\n   * @param now Deuxième date à comparer (par défaut : Date actuelle).\n   * @returns True si c'est le même jour.\n   */\n  static isSameDay(date: Date, now: Date = new Date()): boolean {\n    return (\n      date.getFullYear() === now.getFullYear() &&\n      date.getMonth() === now.getMonth() &&\n      date.getDate() === now.getDate()\n    );\n  }\n\n  /**\n   * Vérifie si la date fournie est aujourd'hui.\n   */\n  static isToday(date: Date): boolean {\n    return this.isSameDay(date, new Date());\n  }\n\n  /**\n   * Retourne une nouvelle date fixée au début du jour (00:00:00.000).\n   */\n  static startOfDay(date: Date): Date {\n    const result = new Date(date);\n    result.setHours(0, 0, 0, 0);\n    return result;\n  }\n\n  /**\n   * Retourne une nouvelle date fixée à la fin du jour (23:59:59.999).\n   */\n  static endOfDay(date: Date): Date {\n    const result = new Date(date);\n    result.setHours(23, 59, 59, 999);\n    return result;\n  }\n\n  /**\n   * Soustrait un nombre de jours à une date (Immuable).\n   */\n  static subDays(date: Date, amount: number): Date {\n    return this.addDays(date, -amount);\n  }\n\n  /**\n   * Vérifie si une date se trouve dans un intervalle donné (inclusif).\n   * @param date Date à vérifier.\n   * @param interval Objet contenant start et end.\n   */\n  static isWithinInterval(\n    date: Date,\n    interval: { start: Date; end: Date },\n  ): boolean {\n    const time = date.getTime();\n    return time >= interval.start.getTime() && time <= interval.end.getTime();\n  }\n}\n","import BnumElementInternal from '../../bnum-element-states';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { TAG_DATE } from '../../../core/utils/constants/tags';\nimport { JsCircularEvent } from '@rotomeca/event';\nimport { CustomDom } from '../../bnum-element';\nimport { Define, Self } from '../../../core/decorators';\nimport { NonStd } from '../../../core/decorators/nonstd';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from '../../../core/utils/Log';\nimport {\n  BnumDateLocale,\n  BnumDateUtils,\n} from '../../../core/utils/BnumDateUtils';\n\n/**\n * Affiche une date formatée qui peut être mise à jour dynamiquement.\n *\n * /!\\ Seuls les formats de date supportés ceux par intl.DateTimeFormat.\n *\n * Vous DEVEZ utiliser les tokens suivants pour la configuration du format en html:\n *\n * - P : format court (ex: 12/08/1997)\n * - PP : format moyen (ex: 12 août 1997)\n * - PPP : format long (ex: mardi 12 août 1997)\n * - PPPP : format complet (ex: mardi 12 août 1997)\n * - yyyy : année sur 4 chiffres\n * - yy : année sur 2 chiffres\n * - M : mois numérique sans zéro initial\n * - MM : mois numérique avec zéro initial\n * - MMM : mois abrégé (ex: août)\n * - MMMM : mois complet (ex: août)\n * - d : jour du mois sans zéro initial\n * - dd : jour du mois avec zéro initial\n * - EEEE : jour de la semaine complet (ex: mardi)\n * - E : jour de la semaine abrégé (ex: mar)\n * - H : heure sans zéro initial (0-23)\n * - HH : heure avec zéro initial (00-23)\n * - mm : minutes avec zéro initial (00-59)\n *\n * Pour la locale, utilisez ceux par intl.\n *\n * A la place de `fr_FR`, vous pouvez utilisez `fr`.\n *\n * @structure Date simple\n * <bnum-date format=\"P\">1997-08-12</bnum-date>\n *\n * @structure Date avec parsing personnalisé\n * <bnum-date format=\"PPPP\" data-start-format=\"dd/MM/yyyy\">12/08/1997</bnum-date>\n *\n * @structure Date avec attribut data-date\n * <bnum-date format=\"ddMMyyyy HHmm\" data-date=\"1997-08-12T15:30:00Z\"></bnum-date>\n *\n * @structure Date en anglais\n * <bnum-date format=\"PPPP\" locale=\"en\">1997-08-12</bnum-date>\n *\n * @state invalid - Actif quand la date est invalide ou non définie\n * @state not-ready - Actif quand le composant n'est pas encore prêt\n */\n@Define()\n@NonStd('Ne respecte pas la classe template')\nexport class HTMLBnumDate extends BnumElementInternal {\n  /**\n   * Attribut format\n   * @attr {string} (optional) (default: 'P') format - Le format de sortie.\n   */\n  static readonly ATTRIBUTE_FORMAT = 'format';\n  /**\n   * Attribut locale\n   * @attr {string} (optional) (default: undefined) locale - La locale pour le formatage\n   */\n  static readonly ATTRIBUTE_LOCALE = 'locale';\n  /**\n   * Attribut date\n   * @attr {string | undefined} (optional) data-date - La date source (prioritaire sur le textContent)\n   */\n  static readonly ATTRIBUTE_DATE = 'data-date';\n  /**\n   * Attribut start-format\n   * @attr {string | undefined} (optional) data-start-format - Le format de parsing si la date source est une chaîne\n   */\n  static readonly ATTRIBUTE_START_FORMAT = 'data-start-format';\n  /**\n   * Événement déclenché lors de la mise à jour d'un attribut\n   * @event bnum-date:attribute-updated\n   * @detail { property: string; newValue: string | null; oldValue: string | null }\n   */\n  static readonly EVENT_ATTRIBUTE_UPDATED = 'bnum-date:attribute-updated';\n  /**\n   * Événement déclenché lors de la mise à jour du format de la date\n   * @event bnum-date:attribute-updated:format\n   * @detail { property: string; newValue: string | null; oldValue: string | null }\n   */\n  static readonly EVENT_ATTRIBUTE_UPDATED_FORMAT =\n    'bnum-date:attribute-updated:format';\n  /**\n   * Événement déclenché lors de la mise à jour de la locale\n   * @event bnum-date:attribute-updated:locale\n   * @detail { property: string; newValue: string | null; oldValue: string | null }\n   */\n  static readonly EVENT_ATTRIBUTE_UPDATED_LOCALE =\n    'bnum-date:attribute-updated:locale';\n  /**\n   * Événement déclenché lors de la mise à jour de la date\n   * @event bnum-date:date\n   * @detail { property: string; newValue: Date | null; oldValue: Date | null }\n   */\n  static readonly EVENT_DATE = 'bnum-date:date';\n  /** Valeur par défaut du format */\n  static readonly DEFAULT_FORMAT = 'dd/MM/yyyy HH:mm';\n  /** Valeur par défaut de la locale */\n  static readonly DEFAULT_LOCALE = 'fr';\n  /**\n   * État invalide\n   */\n  static readonly STATE_INVALID = 'invalid';\n  /** État non prêt */\n  static readonly STATE_NOT_READY = 'not-ready';\n\n  /** Nom de la balise */\n  static get TAG(): string {\n    return TAG_DATE;\n  }\n\n  /**\n   * Registre statique des raccourcis des locales.\n   */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  static readonly #LOCALES: Record<string, BnumDateLocale> = {\n    fr: BnumDateLocale.FR,\n    en: BnumDateLocale.EN,\n  };\n\n  /** Attributs observés pour la mise à jour. */\n  protected static _p_observedAttributes(): string[] {\n    return [this.ATTRIBUTE_FORMAT, this.ATTRIBUTE_LOCALE];\n  }\n\n  // --- Champs privés (état interne) ---\n  /** Référence à la classe HTMLBnumDate */\n  @Self _!: typeof HTMLBnumDate;\n\n  /** L'objet Date (notre source de vérité) */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #originalDate: Date | null = null;\n\n  /** Le format d'affichage (ex: 'PPPP') */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #outputFormat: string = this._.DEFAULT_FORMAT; // 'P' -> 12/08/1997\n\n  /** La locale (code) */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #locale: string = this._.DEFAULT_LOCALE;\n\n  /** Le format de parsing (ex: 'dd/MM/yyyy') */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #startFormat: string | null = null;\n\n  /** L'élément SPAN interne qui contient le texte formaté */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #outputElement: HTMLSpanElement | null = null;\n  #_renderSheduled: boolean = false;\n\n  /**\n   * Événement circulaire déclenché lors du formatage de la date.\n   * Permet de personnaliser le formatage via un listener externe.\n   */\n  public formatEvent: JsCircularEvent<\n    (param: { date: string | Date }) => { date: string | Date }\n  > = new JsCircularEvent();\n\n  /**\n   * Indique que ce composant utilise le Shadow DOM.\n   * @returns {boolean}\n   */\n  protected _p_isShadowElement(): boolean {\n    return true;\n  }\n\n  /**\n   * Construit le DOM interne (appelé une seule fois).\n   * @param container Le ShadowRoot\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    this.#outputElement = document.createElement('span');\n    this.#outputElement.setAttribute('part', 'date-text'); // Permet de styler depuis l'extérieur\n    container.append(this.#outputElement);\n  }\n\n  /**\n   * Phase de pré-chargement (avant _p_buildDOM).\n   * On lit les attributs initiaux et le textContent.\n   */\n  protected _p_preload(): void {\n    // On ajoute un listener sur `bnum-date:attribute-updated` pour trigger les propriété de manière + précises.\n    this.addEventListener(this._.EVENT_ATTRIBUTE_UPDATED, (e) => {\n      this.trigger(\n        `${this._.EVENT_ATTRIBUTE_UPDATED}:${(e as CustomEvent).detail.property}`,\n        (e as CustomEvent).detail,\n      );\n    });\n\n    // Lire les attributs de configuration\n    this.#outputFormat =\n      this.getAttribute(this._.ATTRIBUTE_FORMAT) || this.#outputFormat;\n    this.#locale = this.getAttribute(this._.ATTRIBUTE_LOCALE) || this.#locale;\n    this.#startFormat =\n      this.getAttribute(this._.ATTRIBUTE_START_FORMAT) || null;\n\n    // Déterminer la date initiale (priorité à data-date)\n    const initialDateStr =\n      this.getAttribute(this._.ATTRIBUTE_DATE) ||\n      this.textContent?.trim() ||\n      null;\n\n    // Définir la date sans déclencher de rendu (render=false)\n    if (initialDateStr) this.setDate(initialDateStr, this.#startFormat, false);\n  }\n\n  /**\n   * Phase d'attachement (après _p_buildDOM).\n   * C'est ici qu'on fait le premier rendu.\n   */\n  protected _p_attach(): void {\n    this.#renderDate();\n  }\n\n  /**\n   * Gère les changements d'attributs (appelé après _p_preload).\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (oldVal === newVal) return;\n\n    let needsRender = false;\n\n    switch (name) {\n      case this._.ATTRIBUTE_FORMAT:\n        this.#outputFormat = newVal || this._.DEFAULT_FORMAT;\n        needsRender = true;\n        break;\n      case this._.ATTRIBUTE_LOCALE:\n        this.#locale = newVal || this._.DEFAULT_LOCALE;\n        needsRender = true;\n        break;\n      case this._.ATTRIBUTE_START_FORMAT:\n        this.#startFormat = newVal;\n        // Pas de re-rendu, affecte seulement le prochain setDate()\n        break;\n      case this._.ATTRIBUTE_DATE:\n        // Re-parse la date\n        this.setDate(newVal, this.#startFormat, false);\n        needsRender = true;\n        break;\n    }\n\n    if (needsRender) {\n      this.#renderDate();\n      // On déclenche l'événement pour la réactivité\n      this.trigger(this._.EVENT_ATTRIBUTE_UPDATED, {\n        property: name,\n        newValue: newVal,\n        oldValue: oldVal,\n      });\n    }\n  }\n\n  // --- API Publique (Propriétés) ---\n\n  /**\n   * Définit ou obtient l'objet Date.\n   * C'est le point d'entrée principal pour JS.\n   */\n  get date(): Date | null {\n    return this.#originalDate;\n  }\n  set date(value: Date | string | null) {\n    this.setDate(value, this.#startFormat, true);\n  }\n\n  /** Définit ou obtient le format d'affichage. */\n  get format(): string {\n    return this.#outputFormat;\n  }\n  set format(value: string) {\n    this.setAttribute(this._.ATTRIBUTE_FORMAT, value);\n  }\n\n  /** Définit ou obtient la locale. */\n  get locale(): string {\n    return this.#locale;\n  }\n  set locale(value: string) {\n    this.setAttribute(this._.ATTRIBUTE_LOCALE, value);\n  }\n\n  public get localeElement(): BnumDateLocale {\n    return (\n      this._.#LOCALES[this.#locale] ||\n      this.#locale ||\n      this._.#LOCALES[this._.DEFAULT_LOCALE]\n    );\n  }\n\n  // --- API Publique (Méthodes) ---\n\n  /**\n   * Définit la date à partir d'une chaîne, d'un objet Date ou null.\n   * @param dateInput La date source.\n   * @param startFormat Le format pour parser la date si c'est une chaîne.\n   * @param triggerRender Indique s'il faut rafraîchir l'affichage (par défaut: true).\n   */\n  public setDate(\n    dateInput: string | Date | null,\n    startFormat?: string | null,\n    triggerRender: boolean = true,\n  ): void {\n    const oldDate = this.#originalDate;\n    let newDate: Date | null = null;\n\n    if (dateInput === null) {\n      newDate = null;\n    } else if (dateInput instanceof Date) {\n      newDate = dateInput;\n    } else if (typeof dateInput === 'string') {\n      if (dateInput.trim() === 'now') {\n        newDate = new Date();\n      } else {\n        const formatToUse = startFormat || this.#startFormat;\n        if (formatToUse) {\n          // Parsing avec format spécifique\n          newDate = BnumDateUtils.parse(dateInput, formatToUse); //parse(dateInput, formatToUse, new Date());\n        } else {\n          // Parsing natif (ISO 8601, timestamps...)\n          newDate = new Date(dateInput);\n        }\n      }\n    }\n\n    // Vérification de la validité\n    if (newDate && BnumDateUtils.isValid(newDate)) {\n      this.#originalDate = newDate;\n    } else {\n      this.#originalDate = null;\n    }\n\n    // Déclenche le rendu et/ou l'événement si la date a changé\n    if (oldDate?.getTime() !== this.#originalDate?.getTime()) {\n      if (triggerRender) {\n        this.#renderDate();\n      }\n      this.trigger(this._.EVENT_DATE, {\n        property: 'date',\n        newValue: this.#originalDate,\n        oldValue: oldDate,\n      });\n    }\n  }\n\n  /** Récupère l'objet Date actuel. */\n  public getDate(): Date | null {\n    return this.#originalDate;\n  }\n\n  /** Ajoute un nombre de jours à la date actuelle. */\n  public addDays(days: number): void {\n    if (!this.#originalDate) return;\n    this.date = BnumDateUtils.addDays(this.#originalDate, days);\n  }\n\n  /** Ajoute un nombre de mois à la date actuelle. */\n  public addMonths(months: number): void {\n    if (!this.#originalDate) return;\n    this.date = BnumDateUtils.addMonths(this.#originalDate, months);\n  }\n\n  /** Ajoute un nombre d'années à la date actuelle. */\n  public addYears(years: number): void {\n    if (!this.#originalDate) return;\n    this.date = BnumDateUtils.addYears(this.#originalDate, years);\n  }\n\n  public askRender(): void {\n    if (this.#_renderSheduled) return;\n    this.#_renderSheduled = true;\n    requestAnimationFrame(() => {\n      this.#_renderSheduled = false;\n      this.#renderDate();\n    });\n  }\n\n  // --- Méthodes Privées ---\n\n  /**\n   * Met à jour le textContent du span interne.\n   * C'est la seule fonction qui écrit dans le DOM.\n   */\n  @NonStd('Ne suis pas le bon pattern de nommage pour un membre privée')\n  #renderDate(): void {\n    this._p_clearStates();\n    if (!this.#outputElement) {\n      this._p_addState(this._.STATE_NOT_READY);\n      return; // Pas encore prêt\n    }\n\n    if (!this.#originalDate) {\n      this.#outputElement.textContent = EMPTY_STRING; // Affiche une chaîne vide si date invalide/null\n      this._p_addState(this._.STATE_INVALID);\n      return;\n    }\n\n    // Trouve la locale, avec fallback sur 'fr'\n    const locale = this.localeElement;\n\n    const textContent = this.#_format(locale).match({\n      Ok: (formated) =>\n        this.formatEvent.call({ date: formated })?.date || formated,\n      Err: (e) => {\n        Log.error(\n          'HTMLBnumDate/renderDate',\n          `Erreur de formatage Intl. Format: \"${this.#outputFormat}`,\n          '\\\\',\n          BnumDateUtils.getOptionsFromToken(this.#outputFormat),\n          '\"',\n          e,\n        );\n\n        this._p_addState(HTMLBnumDate.STATE_INVALID);\n        return 'Date invalide';\n      },\n    });\n\n    this.#outputElement.textContent = textContent;\n    this.setAttribute('aria-label', this.#outputElement.textContent);\n  }\n\n  @Risky()\n  #_format(locale: BnumDateLocale): Result<string> {\n    if (this.#originalDate === null) throw new Error('Date is null');\n\n    return BnumDateUtils.format(\n      this.#originalDate,\n      BnumDateUtils.getOptionsFromToken(this.#outputFormat),\n      locale,\n    ) as any;\n  }\n\n  /**\n   * Méthode statique pour la création (non implémentée ici,\n   * mais suit le pattern de BnumElement).\n   */\n  static Create(\n    dateInput?: string | Date,\n    options?: {\n      format?: string;\n      locale?: string;\n      startFormat?: string;\n    },\n  ): HTMLBnumDate {\n    const el = document.createElement(this.TAG) as HTMLBnumDate;\n    if (options?.format) el.format = options.format;\n    if (options?.locale) el.locale = options.locale;\n    if (options?.startFormat)\n      el.setAttribute(this.ATTRIBUTE_START_FORMAT, options.startFormat);\n\n    if (typeof dateInput === 'string')\n      el.appendChild(document.createTextNode(dateInput));\n    else if (dateInput) el.date = dateInput;\n\n    return el;\n  }\n}\n","import BnumElement from 'components/bnum-element';\nimport { Define, Light } from 'core/decorators';\nimport { TAG_FRAGMENT } from 'core/utils/constants/tags';\n\n/**\n * Composant Web Component utilitaire \"Fragment\".\n * * Ce composant agit comme un conteneur logique pour regrouper des éléments du DOM\n * sans introduire de boîte de rendu visuelle supplémentaire (via `display: contents` généralement défini dans le style).\n *\n * @remarks\n * Il permet de contourner la règle \"un seul élément racine\" ou de grouper des éléments\n * pour des traitements logiques (boucles, conditions) sans briser le contexte de formatage\n * CSS du parent (ex: `display: grid` ou `display: flex`).\n *\n * @example\n * ```html\n * <div class=\"grid-container\">\n * <bnum-fragment>\n * <div class=\"cell-1\">Item A</div>\n * <div class=\"cell-2\">Item B</div>\n * </bnum-fragment>\n * </div>\n * ```\n */\n@Define({ tag: TAG_FRAGMENT })\n@Light()\nexport class HTMLBnumFragment extends BnumElement {\n  constructor() {\n    super();\n  }\n\n  connectedCallback(): void {\n    if (this.style.display !== 'contents') this.style.display = 'contents';\n  }\n}\n","import BnumElement from 'components/bnum-element';\n\nexport function Light() {\n  return function (target: Function, context: ClassDecoratorContext) {\n    if (context.kind !== 'class') {\n      throw new Error('@Light ne peut être utilisé que sur une classe.');\n    }\n\n    if (!(target.prototype instanceof BnumElement))\n      throw new Error(\n        '@Light ne peut être utiliser sur une classe qui hérite de BnumElement',\n      );\n\n    context.addInitializer(function () {\n      (this as any).__CONFIG_SHADOW__ = false;\n    });\n  };\n}\n","// bnum-helper.ts\n\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport helperStyle from './bnum-helper.less';\nimport { TAG_HELPER } from '../../../core/utils/constants/tags';\nimport { Define } from '../../../core/decorators';\n\nconst SHEET = BnumElement.ConstructCSSStyleSheet(helperStyle);\n\n/**\n * Constante représentant l'icône utilisée par défaut.\n */\nconst ICON = 'help' as const;\n\n/**\n * Élément web personnalisé représentant une aide contextuelle avec une icône.\n *\n * @structure Cas standard\n * <bnum-helper>Ceci est une aide contextuelle.</bnum-helper>\n */\n@Define()\nexport default class HTMLBnumHelper extends BnumElement {\n  /**\n   * Constructeur de l'élément HTMLBnumHelper.\n   * Initialise l'élément.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Précharge les données de l'élément.\n   * Si l'élément possède des enfants, le texte est déplacé dans l'attribut title et le contenu est vidé.\n   */\n  protected _p_preload(): void {\n    super._p_preload();\n    setTimeout(() => {\n      if (this.hasChildNodes()) {\n        this.setAttribute('title', this.textContent ?? EMPTY_STRING);\n        this.textContent = EMPTY_STRING;\n      }\n    }, 0);\n  }\n\n  /**\n   * Construit le DOM interne de l'élément.\n   * Ajoute l'icône d'aide dans le conteneur.\n   * @param container Racine du shadow DOM ou élément HTML.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n\n    container.appendChild(HTMLBnumIcon.Create(ICON));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Crée une nouvelle instance de HTMLBnumHelper avec le texte d'aide spécifié.\n   * @param title Texte d'aide à afficher dans l'attribut title.\n   * @returns {HTMLBnumHelper} Instance du composant.\n   */\n  static Create(title: string): HTMLBnumHelper {\n    const element = document.createElement(this.TAG) as HTMLBnumHelper;\n    element.setAttribute('title', title);\n    return element;\n  }\n\n  /**\n   * Tag HTML du composant.\n   * @readonly\n   * @returns {string} Tag HTML utilisé pour ce composant.\n   */\n  static get TAG(): string {\n    return TAG_HELPER;\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumButton } from '../button/bnum-button';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport style from './bnum-icon-button.less';\nimport { TAG_ICON_BUTTON } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport JsEvent from '@rotomeca/event';\nimport { REG_XSS_SAFE } from '../../../core/utils/constants/regexp';\nimport { Define, Self } from '../../../core/decorators';\nimport Log from '../../../core/utils/Log';\n\n//#region Global Constants\nconst ID_ICON = 'icon';\n//#endregion Global Constants\n\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\nconst TEMPLATE = BnumElement.CreateTemplate(`\n    <${HTMLBnumIcon.TAG} id=\"${ID_ICON}\"><slot></slot></${HTMLBnumIcon.TAG}>\n    `);\n\n/**\n * Button contenant une icône.\n *\n * @structure Button Icon\n * <bnum-icon-button>home</bnum-icon-button>\n *\n * @structure Button Disabled\n * <bnum-icon-button disabled>home</bnum-icon-button>\n *\n * @cssvar {0.6} --bnum-button-disabled-opacity - Opacité du bouton désactivé\n * @cssvar {none} --bnum-button-disabled-pointer-events - Gestion des événements souris pour le bouton désactivé\n *\n * @slot (default) - Contenu de l'icône (nom de l'icône à afficher)\n */\n@Define()\nexport class HTMLBnumButtonIcon extends BnumElement {\n  //#region Constantes\n  /**\n   * Id de l'icône à l'intérieur du bouton\n   */\n  static readonly ID_ICON = ID_ICON;\n  /**\n   * Attribut pour définir le gestionnaire de clic\n   * @event click\n   */\n  static readonly ATTRIBUTE_ON_CLICK: string = 'onclick';\n  //#endregion Constantes\n\n  //#region Private fields\n  /**\n   * Référence vers l'élément icône à l'intérieur du bouton\n   */\n  #_icon: HTMLBnumIcon | null = null;\n  #_onClick: Nullable<JsEvent<(click: string) => void>> = null;\n  #_lastClick: Nullable<string> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumButtonIcon */\n  @Self _!: typeof HTMLBnumButtonIcon;\n\n  get #_linkedClickEvent(): JsEvent<(click: string) => void> {\n    if (this.#_onClick === null) {\n      this.#_onClick = new JsEvent<(click: string) => void>();\n\n      this.addEventListener('click', () => {\n        this.#_onClick?.call?.();\n      });\n    }\n\n    return this.#_onClick;\n  }\n\n  /**\n   * Référence vers l'élément icône à l'intérieur du bouton.\n   *\n   * Si l'icône n'a pas été mise en mémoire, elle sera cherché puis mise en mémoire.\n   */\n  get #_iconElement(): HTMLBnumIcon {\n    if (!this.#_icon) {\n      const icon =\n        this.querySelector(HTMLBnumIcon.TAG) ??\n        this.shadowRoot?.getElementById(this._.ID_ICON);\n\n      if (!icon) this.#_throw('Icon element not found inside icon button');\n\n      this.#_icon = icon as HTMLBnumIcon;\n    }\n\n    return this.#_icon;\n  }\n\n  /**\n   * Icône affichée dans le bouton\n   */\n  get icon() {\n    return (\n      (this.#_iconElement.icon || this.#_throw('Icon is not defined')) ??\n      EMPTY_STRING\n    );\n  }\n\n  set icon(value: string) {\n    this.#_iconElement.icon = value;\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_buildDOM(_: ShadowRoot | HTMLElement): void {\n    HTMLBnumButton.ToButton(this);\n\n    if (this.title === EMPTY_STRING)\n      Log.warn(\n        this._.TAG,\n        'Icon button should have a title for accessibility purposes',\n      );\n\n    if (this.hasAttribute('click')) {\n      const click = this.getAttribute('click');\n      this.#_updateAttributeClick(click ?? EMPTY_STRING);\n    }\n  }\n\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    if (oldVal === newVal) return;\n\n    if (name === 'click') {\n      this.#_updateAttributeClick(newVal ?? EMPTY_STRING);\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  #_updateAttributeClick(val: string) {\n    if (val !== this.#_lastClick) {\n      this.#_lastClick = val;\n\n      if (this.#_linkedClickEvent.has('click'))\n        this.#_linkedClickEvent.remove('click');\n\n      if (val && REG_XSS_SAFE.test(val)) {\n        this.#_linkedClickEvent.add(\n          'click',\n          (click: string) => {\n            // Si c'est un id unique\n            var elementToClick = document.getElementById(click!);\n\n            if (elementToClick) elementToClick.click();\n            else {\n              // Sinon on part du principe que c'est un sélecteur CSS\n              const elements = document.querySelector(click!);\n              if (elements) (elements as HTMLElement).click();\n              else\n                throw new Error(\n                  `[${this._.TAG}] L'attribut 'click' ne référence aucun élément.`,\n                );\n            }\n          },\n          val,\n        );\n      }\n    }\n  }\n\n  /**\n   * Permet de lancer une erreur avec un message spécifique dans une expression inline.\n   * @param msg Message à envoyer dans l'erreur.\n   */\n  #_throw(msg: string) {\n    throw new Error(msg);\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   */\n  static _p_observedAttributes(): string[] {\n    return ['click'];\n  }\n\n  /**\n   * Génère un bouton icône avec l'icône spécifiée.\n   * @param icon Icône à afficher dans le bouton.\n   * @returns Node créée.\n   */\n  static Create(icon: string): HTMLBnumButtonIcon {\n    const node = document.createElement(this.TAG) as HTMLBnumButtonIcon;\n    node.icon = icon;\n    return node;\n  }\n\n  /**\n   * Génère le code HTML d'un bouton icône avec l'icône spécifiée.\n   * @param icon Icône à afficher dans le bouton.\n   * @returns Code HTML créée.\n   */\n  static Write(icon: string, attrs: Record<string, string> = {}): string {\n    return `<${this.TAG} ${this._p_WriteAttributes(attrs)}>${icon}</${this.TAG}>`;\n  }\n\n  /**\n   * Tag de l'élément.\n   */\n  static get TAG() {\n    return TAG_ICON_BUTTON;\n  }\n  //#endregion Static methods\n}\n","export const EVENT_DEFAULT = 'default';\n","import JsEvent from '@rotomeca/event';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { EButtonType, HTMLBnumButton } from '../button/bnum-button';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT } from '../../../core/utils/constants/tags';\nimport { Result, Risky } from '@rotomeca/rop';\nimport base from './extra/bnum-input-base.less';\nimport style from './bnum-input.less';\n\nexport const INPUT_BASE_STYLE =\n  BnumElementInternal.ConstructCSSStyleSheet(base);\nconst STYLE = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst ID_INPUT = 'bnum-input';\nconst ID_HINT_TEXT = 'hint-text';\nconst ID_HINT_TEXT_LABEL = 'hint-text__label';\nconst ID_HINT_TEXT_HINT = 'hint-text__hint';\nconst ID_INPUT_ICON = 'input__icon';\nconst ID_INPUT_BUTTON = 'input__button';\nconst ID_STATE = 'state';\nconst ID_STATE_ICON = 'state__icon';\nconst ID_SUCCESS_TEXT = 'success-text';\nconst ID_ERROR_TEXT = 'error-text';\n\nconst CLASS_STATE_TEXT_SUCCESS = 'state__text success';\nconst CLASS_STATE_TEXT_ERROR = 'state__text error';\n\nconst DEFAULT_INPUT_TYPE = 'text';\nconst DEFAULT_BUTTON_VARIATION = EButtonType.PRIMARY;\n\nconst SLOT_HINT = 'hint';\nconst SLOT_BUTTON = 'button';\nconst SLOT_SUCCESS = 'success';\nconst SLOT_ERROR = 'error';\n\nconst TEXT_VALID_INPUT =\n  BnumConfig.Get('local_keys')?.valid_input || 'Le champs est valide !';\nconst TEXT_INVALID_INPUT =\n  BnumConfig.Get('local_keys')?.invalid_input || 'Le champs est invalide !';\n//#endregion Global Constants\n\n//#region Template\n// Utilisation des constantes dans le template\nconst BASE_TEMPLATE = `\n  <label id=\"${ID_HINT_TEXT}\" class=\"label-container\" for=\"${ID_INPUT}\">\n    <span id=\"${ID_HINT_TEXT_LABEL}\" class=\"label-container--label\">\n      <slot></slot>\n    </span>\n    <span id=\"${ID_HINT_TEXT_HINT}\" class=\"label-container--hint\">\n      <slot name=\"${SLOT_HINT}\"></slot>\n    </span>\n  </label>\n  <div class=\"container\">\n    <div class=\"addons\">\n      <div class=\"addons__inner\">\n        <!-- {{addoninner}} -->\n        <${HTMLBnumIcon.TAG} id=\"${ID_INPUT_ICON}\"></${HTMLBnumIcon.TAG}>\n          <input id=\"${ID_INPUT}\" class=\"input-like\" type=\"${DEFAULT_INPUT_TYPE}\" />\n        </div>\n        <${HTMLBnumButton.TAG} id=\"${ID_INPUT_BUTTON}\" rounded data-variation=\"${DEFAULT_BUTTON_VARIATION}\"><slot name=\"${SLOT_BUTTON}\"></slot></${HTMLBnumButton.TAG}>\n    </div>\n    <span id=\"${ID_STATE}\">\n        <${HTMLBnumIcon.TAG} id=\"${ID_STATE_ICON}\"></${HTMLBnumIcon.TAG}>\n        <span id=\"${ID_SUCCESS_TEXT}\" class=\"${CLASS_STATE_TEXT_SUCCESS}\"><slot name=\"${SLOT_SUCCESS}\">${TEXT_VALID_INPUT}</slot></span>\n        <span id=\"${ID_ERROR_TEXT}\" class=\"${CLASS_STATE_TEXT_ERROR}\"><slot name=\"${SLOT_ERROR}\">${TEXT_INVALID_INPUT}</slot></span>\n    </span>\n  </div>\n    `;\n//#endregion Template\n\n/**\n * Composant Input du design system Bnum.\n * Permet de gérer un champ de saisie enrichi avec gestion d'états, d'icônes, de bouton et d'accessibilité.\n *\n * @structure Sans rien\n * <bnum-input></bnum-input>\n *\n * @structure Avec une légende\n * <bnum-input>Label du champ</bnum-input>\n *\n * @structure Avec une légende et un indice\n * <bnum-input>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input>\n *\n * @structure Avec un bouton\n * <bnum-input button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input>\n *\n * @structure En erreur\n * <bnum-input pattern=\"^[a-zA-Z0-9]+$\" data-value=\"@@@@@\">Label du champ\n * </bnum-input>\n *\n * @structure Avec un état de succès\n * <bnum-input state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input>\n *\n * @structure Avec une icône\n * <bnum-input icon=\"search\">Label du champ</bnum-input>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input>\n *\n * @structure Nombre\n * <bnum-input type=\"number\" data-value=\"42\">Label du champ</bnum-input>\n *\n * @structure Désactivé\n * <bnum-input disabled>\n *   Label du champ\n * </bnum-input>\n *\n * @structure Complet\n * <bnum-input\n *   data-value=\"Valeur initiale\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input>\n *\n * @slot (defaut) - Contenu du label principal du champ.\n * @slot hint - Contenu de l'indice d'utilisation (hint) du champ.\n * @slot success - Contenu du message de succès du champ.\n * @slot error - Contenu du message d'erreur du champ.\n * @slot button - Contenu du bouton interne (si présent).\n *\n * @state success - État de succès.\n * @state error - État d'erreur.\n * @state disabled - État désactivé.\n * @state icon - Présence d'une icône.\n * @state button - Présence d'un bouton.\n * @state obi - Bouton avec icône seulement (sans texte).\n * @state state - Présence d'un état (success / error).\n *\n * @cssvar {#666} --bnum-input-hint-text-color - Couleur du texte du hint.\n * @cssvar {#eee} --bnum-input-background-color - Couleur de fond de l'input.\n * @cssvar {#666} --bnum-input-color - Couleur du texte de l'input.\n * @cssvar {#3a3a3a} --bnum-input-line-color - Couleur de la ligne/bordure de l'input.\n * @cssvar {#36b37e} --bnum-input-state-success-color - Couleur de l'état de succès.\n * @cssvar {#de350b} --bnum-input-state-error-color - Couleur de l'état d'erreur.\n * @cssvar {inset 0 -2px 0 0 #3a3a3a} --bnum-input-box-shadow - Ombre portée de l'input.\n *\n */\n@Define()\nexport class HTMLBnumInput extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Template de l'élément input.\n   * Dans la classe cette fois si pour éviter les problèmes de scope.\n   */\n  static readonly TEMPLATE = this.CreateTemplate();\n  /**\n   * Événement déclenché au clic sur le bouton interne.\n   *\n   * Attention ! Vous devez écouter l'événement via la propriété `onButtonClicked` pour que le gestionnaire soit bien attaché.\n   * @event bnum-input:button.click\n   * @detail MouseEvent\n   */\n  static readonly EVENT_BUTTON_CLICK = 'bnum-input:button.click';\n  /**\n   * Événement déclenché à la saisie dans le champ.\n   * @event input\n   * @detail InputEvent\n   */\n  static readonly EVENT_INPUT = 'input';\n  /**\n   * Événement déclenché au changement de valeur du champ.\n   * @event change\n   * @detail Event\n   */\n  static readonly EVENT_CHANGE = 'change';\n  /**\n   * Attribut data-value du composant.\n   * @attr {string} (optional) (default: undefined) data-value - Valeur initiale du champ.\n   */\n  static readonly ATTRIBUTE_DATA_VALUE = 'data-value';\n\n  /**\n   * @attr {string} (optional) (default: undefined) placeholder - Texte indicatif du champ.\n   */\n  static readonly ATTRIBUTE_PLACEHOLDER = 'placeholder';\n\n  /**\n   * @attr {string} (optional) (default: 'text') type - Type de l'input (text, password, email, etc.)\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n\n  /**\n   * @attr {string} (optional) (default: undefined) disabled - Désactive le champ.\n   */\n  static readonly ATTRIBUTE_DISABLED = 'disabled';\n\n  /**\n   * @attr {string} (optional) (default: undefined) state - État du champ (success, error, etc.).\n   */\n  static readonly ATTRIBUTE_STATE = 'state';\n\n  /**\n   * @attr {string} (optional) (default: undefined) button - Présence d'un bouton interne (primary, secondary, danger, ...).\n   */\n  static readonly ATTRIBUTE_BUTTON = 'button';\n\n  /**\n   * @attr {string} (optional) (default: undefined) button-icon - Icône du bouton interne.\n   */\n  static readonly ATTRIBUTE_BUTTON_ICON = 'button-icon';\n\n  /**\n   * @attr {string} (optional) (default: undefined) icon - Icône à afficher dans le champ.\n   */\n  static readonly ATTRIBUTE_ICON = 'icon';\n\n  /**\n   * @attr {string} (optional) (default: undefined) required - Champ requis.\n   */\n  static readonly ATTRIBUTE_REQUIRED = 'required';\n\n  /**\n   * @attr {string} (optional) (default: undefined) readonly - Champ en lecture seule.\n   */\n  static readonly ATTRIBUTE_READONLY = 'readonly';\n\n  /**\n   * @attr {string} (optional) (default: undefined) pattern - Expression régulière de validation.\n   */\n  static readonly ATTRIBUTE_PATTERN = 'pattern';\n\n  /**\n   * @attr {string} (optional) (default: undefined) minlength - Longueur minimale du champ.\n   */\n  static readonly ATTRIBUTE_MINLENGTH = 'minlength';\n\n  /**\n   * @attr {string} (optional) (default: undefined) maxlength - Longueur maximale du champ.\n   */\n  static readonly ATTRIBUTE_MAXLENGTH = 'maxlength';\n\n  /**\n   * @attr {string} (optional) (default: undefined) autocomplete - Attribut autocomplete HTML.\n   */\n  static readonly ATTRIBUTE_AUTOCOMPLETE = 'autocomplete';\n\n  /**\n   * @attr {string} (optional) (default: undefined) inputmode - Mode de saisie (mobile).\n   */\n  static readonly ATTRIBUTE_INPUTMODE = 'inputmode';\n\n  /**\n   * @attr {string} (optional) (default: undefined) spellcheck - Correction orthographique.\n   */\n  static readonly ATTRIBUTE_SPELLCHECK = 'spellcheck';\n\n  /**\n   * @attr {string} (optional) (default: undefined) ignorevalue - Attribut interne pour ignorer la synchronisation de valeur. Ne pas utiliser.\n   */\n  static readonly ATTRIBUTE_IGNOREVALUE = 'ignorevalue';\n\n  /**\n   * @attr {string} (optional) (default: undefined) name - Nom du champ (attribut HTML name).\n   */\n  static readonly ATTRIBUTE_NAME = 'name';\n\n  /** ID du label principal */\n  static readonly ID_HINT_TEXT = ID_HINT_TEXT;\n  /** ID du label du champ */\n  static readonly ID_HINT_TEXT_LABEL = ID_HINT_TEXT_LABEL;\n  /** ID du hint */\n  static readonly ID_HINT_TEXT_HINT = ID_HINT_TEXT_HINT;\n  /** ID de l'input */\n  static readonly ID_INPUT = ID_INPUT;\n  /** ID du bouton */\n  static readonly ID_INPUT_BUTTON = ID_INPUT_BUTTON;\n  /** ID de l'icône d'état */\n  static readonly ID_STATE_ICON = ID_STATE_ICON;\n  /** ID de l'icône d'input */\n  static readonly ID_INPUT_ICON = ID_INPUT_ICON;\n  /** ID du texte de succès */\n  static readonly ID_SUCCESS_TEXT = ID_SUCCESS_TEXT;\n  /** ID du texte d'erreur */\n  static readonly ID_ERROR_TEXT = ID_ERROR_TEXT;\n  /** ID du conteneur d'état */\n  static readonly ID_STATE = ID_STATE;\n\n  /** Classe CSS pour le texte de succès */\n  static readonly CLASS_STATE_TEXT_SUCCESS = CLASS_STATE_TEXT_SUCCESS;\n  /** Classe CSS pour le texte d'erreur */\n  static readonly CLASS_STATE_TEXT_ERROR = CLASS_STATE_TEXT_ERROR;\n\n  /**\n   * État de succès.\n   */\n  static readonly STATE_SUCCESS = 'success';\n  /**\n   * État d'erreur.\n   */\n  static readonly STATE_ERROR = 'error';\n  /**\n   * État désactivé.\n   */\n  static readonly STATE_DISABLED = 'disabled';\n  /**\n   * État avec icône.\n   */\n  static readonly STATE_ICON = 'icon';\n  /**\n   * État avec bouton.\n   */\n  static readonly STATE_BUTTON = 'button';\n  /**\n   * État bouton avec icône seulement (sans texte).\n   *\n   * (obi = Only Button Icon)\n   */\n  static readonly STATE_OBI = 'obi';\n  /**\n   * État avec état (success / error).\n   */\n  static readonly STATE_STATE = 'state';\n\n  /**\n   * Icône affichée en cas de succès de validation.\n   */\n  static readonly ICON_SUCCESS = 'check_circle';\n  /**\n   * Icône affichée en cas d'erreur de validation.\n   */\n  static readonly ICON_ERROR = 'cancel';\n\n  /**\n   * Nom du slot pour le bouton interne.\n   */\n  static readonly SLOT_BUTTON = 'button';\n  /**\n   * Nom du slot pour l'indice d'utilisation (hint).\n   */\n  static readonly SLOT_HINT = 'hint';\n  /**\n   * Nom du slot pour le message de succès.\n   */\n  static readonly SLOT_SUCCESS = 'success';\n  /**\n   * Nom du slot pour le message d'erreur.\n   */\n  static readonly SLOT_ERROR = 'error';\n\n  /**\n   * Type d'input par défaut.\n   */\n  static readonly DEFAULT_INPUT_TYPE = 'text';\n  /**\n   * Variation du bouton par défaut.\n   */\n  static readonly DEFAULT_BUTTON_VARIATION = DEFAULT_BUTTON_VARIATION;\n\n  /**\n   * Texte affiché en cas de succès de validation.\n   */\n  static readonly TEXT_VALID_INPUT = TEXT_VALID_INPUT;\n  /**\n   * Texte affiché en cas d'erreur de validation.\n   */\n  static readonly TEXT_INVALID_INPUT = TEXT_INVALID_INPUT;\n  /**\n   * Texte affiché en cas d'erreur de champ.\n   */\n  static readonly TEXT_ERROR_FIELD =\n    BnumConfig.Get('local_keys')?.error_field ||\n    'Ce champ contient une erreur.';\n\n  static readonly formAssociated = true;\n  //#endregion Constants\n\n  //#region Private fields\n  /**\n   * Icône d'état (success / error)\n   */\n  #_stateIcon: Nullable<HTMLBnumIcon> = null;\n  /**\n   * Input HTML interne\n   */\n  #_input: Nullable<HTMLInputElement> = null;\n  /**\n   * Bouton HTML interne\n   */\n  #_button: Nullable<HTMLBnumButton> = null;\n  /**\n   * Icône interne\n   */\n  #_icon: Nullable<HTMLBnumIcon> = null;\n\n  /**\n   * Événement déclenché au clic sur le bouton (si présent)\n   */\n  #_onButtonClicked: Nullable<JsEvent<(clickEvent: MouseEvent) => void>> = null;\n\n  /**\n   * Valeur initiale (pour la réinitialisation du formulaire)\n   */\n  #_initValue: string = EMPTY_STRING;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumInput */\n  @Self _!: typeof HTMLBnumInput;\n  /**\n   * Permet d'écouter le clic sur le bouton interne.\n   * @returns {JsEvent} Instance d'événement personnalisée.\n   */\n  get onButtonClicked(): JsEvent<(clickEvent: MouseEvent) => void> {\n    if (this.#_onButtonClicked === null) {\n      this.#_onButtonClicked = new JsEvent();\n      this.#_onButtonClicked.add(EVENT_DEFAULT, (clickEvent) => {\n        this.trigger(this._.EVENT_BUTTON_CLICK, {\n          innerEvent: clickEvent,\n        });\n      });\n\n      this.#_initialiseButton();\n    }\n\n    return this.#_onButtonClicked;\n  }\n\n  // -- Formulaire --\n  /**\n   * Valeur courante du champ de saisie.\n   */\n  get value(): string {\n    return (\n      this.#_input?.value ||\n      this.getAttribute(this._.ATTRIBUTE_DATA_VALUE) ||\n      EMPTY_STRING\n    );\n  }\n  set value(val: string) {\n    if (this.#_input === null)\n      this.setAttribute(this._.ATTRIBUTE_DATA_VALUE, val);\n    else {\n      this.#_input!.value = val;\n      this.#_setFormValue(val);\n    }\n  }\n\n  /**\n   * Nom du champ (attribut HTML name).\n   */\n  get name(): string {\n    return this.getAttribute(this._.ATTRIBUTE_NAME) || EMPTY_STRING;\n  }\n  set name(val: string) {\n    this.setAttribute(this._.ATTRIBUTE_NAME, val);\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant.\n   * Initialise la valeur initiale à partir de l'attribut data-value.\n   */\n  constructor() {\n    super();\n\n    this.#_initValue =\n      this.getAttribute(this._.ATTRIBUTE_DATA_VALUE) ?? EMPTY_STRING;\n  }\n\n  /**\n   * Attache un Shadow DOM personnalisé.\n   */\n  protected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n    return this.attachShadow({ mode: 'open', delegatesFocus: true });\n  }\n\n  /**\n   * Récupère des stylesheet déjà construites pour le composant.\n   * @returns Liste de stylesheet\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), INPUT_BASE_STYLE, STYLE];\n  }\n\n  /**\n   * Retourne le template HTML utilisé pour le composant.\n   */\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return this._.TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM interne et attache les écouteurs d'événements.\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    this.#_input = container.querySelector(`#${this._.ID_INPUT}`);\n    this.#_button = container.querySelector(`#${this._.ID_INPUT_BUTTON}`);\n    this.#_stateIcon = container.querySelector(`#${this._.ID_STATE_ICON}`);\n    this.#_icon = container.querySelector(`#${this._.ID_INPUT_ICON}`);\n\n    this.#_input!.addEventListener(this._.EVENT_INPUT, (e) => {\n      this.#_inputValueChangedCallback(e);\n    });\n\n    this.#_input!.addEventListener(this._.EVENT_CHANGE, (e) => {\n      this.#_inputValueChangedCallback(e);\n    });\n\n    this.#_initialiseButton().#_update();\n\n    this.attr(this._.ATTRIBUTE_IGNOREVALUE, 'true').removeAttribute(\n      this._.ATTRIBUTE_DATA_VALUE,\n    );\n  }\n\n  /**\n   * Met à jour le composant lors d'un changement d'attribut.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    if (this.alreadyLoaded === false) return 'break';\n\n    if (newVal == oldVal) return;\n\n    switch (name) {\n      case this._.ATTRIBUTE_DATA_VALUE:\n        if (this.attr(this._.ATTRIBUTE_IGNOREVALUE) !== null) {\n          this.removeAttribute(this._.ATTRIBUTE_IGNOREVALUE);\n          break;\n        }\n        if (newVal !== null) {\n          this.#_setFormValue(newVal);\n\n          if (this.#_input) this.#_input.value = newVal;\n\n          this.setAttribute(this._.ATTRIBUTE_IGNOREVALUE, 'true');\n          this.removeAttribute(this._.ATTRIBUTE_DATA_VALUE);\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  /**\n   * Appelé après le flush du DOM pour synchroniser l'état.\n   */\n  protected _p_postFlush(): void {\n    this.#_update();\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  // --- Formulaire --\n  /**\n   * Réinitialise la valeur du champ lors d'une remise à zéro du formulaire parent.\n   */\n  formResetCallback(): void {\n    this.value = this.#_initValue;\n  }\n\n  /**\n   * Active ou désactive le champ selon l'état du fieldset parent.\n   */\n  formDisabledCallback(disabled: boolean): void {\n    if (disabled) this.setAttribute(this._.ATTRIBUTE_DISABLED, 'disabled');\n    this.#_sync();\n  }\n\n  // -- Helper --\n  /**\n   * Active le bouton interne avec texte, icône et variation éventuels.\n   * @param options Objet contenant le texte, l'icône et la variation du bouton.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  enableButton({\n    text = undefined,\n    icon = undefined,\n    variation = DEFAULT_BUTTON_VARIATION,\n  }: { text?: string; icon?: string; variation?: EButtonType } = {}): this {\n    this.setAttribute(this._.ATTRIBUTE_BUTTON, variation);\n\n    if (text !== undefined) {\n      this.querySelector(`slot[name=\"${this._.SLOT_BUTTON}\"]`)?.remove?.();\n      const span = this._p_createSpan({\n        child: text,\n        attributes: { slot: 'button' },\n      });\n      this.appendChild(span);\n    }\n\n    if (icon !== undefined) {\n      this.setAttribute(this._.ATTRIBUTE_BUTTON_ICON, icon);\n    }\n    return this;\n  }\n\n  /**\n   * Active uniquement l'icône du bouton interne (sans texte).\n   * @param icon Nom de l'icône à afficher sur le bouton.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  enableButtonIconOnly(icon: string): this {\n    this.querySelector(`slot[name=\"${this._.SLOT_BUTTON}\"]`)?.remove?.();\n    this.removeAttribute(this._.ATTRIBUTE_BUTTON);\n    this.setAttribute(this._.ATTRIBUTE_BUTTON_ICON, icon);\n    return this;\n  }\n\n  /**\n   * Masque le bouton interne.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  hideButton(): this {\n    this.removeAttribute(this._.ATTRIBUTE_BUTTON);\n    this.removeAttribute(this._.ATTRIBUTE_BUTTON_ICON);\n    return this;\n  }\n\n  /**\n   * Définit l'état de succès avec un message optionnel.\n   * @param message Message de succès à afficher.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  setSuccessState(message?: string): this {\n    return this.#_setState(this._.SLOT_SUCCESS, message);\n  }\n\n  /**\n   * Définit l'état d'erreur avec un message optionnel.\n   * @param message Message d'erreur à afficher.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  setErrorState(message?: string): this {\n    return this.#_setState(this._.SLOT_ERROR, message);\n  }\n\n  /**\n   * Définit une icône à afficher dans le champ.\n   * @param icon Nom de l'icône à afficher.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  setIcon(icon: string): this {\n    this.setAttribute(this._.ATTRIBUTE_ICON, icon);\n    return this;\n  }\n\n  /**\n   * Supprime l'icône affichée dans le champ.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  removeIcon(): this {\n    this.removeAttribute(this._.ATTRIBUTE_ICON);\n    return this;\n  }\n\n  /**\n   * Définit un indice d'utilisation (hint) pour le champ.\n   * @param hint Texte de l'indice à afficher.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  setHint(hint: string): this {\n    this.removeHint();\n    const span = this._p_createSpan({\n      child: hint,\n      attributes: { slot: this._.SLOT_HINT },\n    });\n    this.appendChild(span);\n    return this;\n  }\n\n  /**\n   * Supprime l'indice d'utilisation (hint) du champ.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  removeHint(): this {\n    this.querySelector(`slot[name=\"${this._.SLOT_HINT}\"]`)?.remove?.();\n    return this;\n  }\n\n  /**\n   * Définit le label principal du champ.\n   * @param label Texte ou élément HTML à utiliser comme label.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  setLabel(label: string | HTMLElement): this {\n    // On supprime tout ce qui n'a pas l'attribut slot\n    const nodes = this.childNodes.values();\n    for (const node of nodes) {\n      if (node instanceof HTMLElement) {\n        const element = node as HTMLElement;\n\n        if (!element.hasAttribute('slot')) this.removeChild(element);\n      }\n    }\n\n    if (typeof label === 'string')\n      this.appendChild(this._p_createTextNode(label));\n    else this.appendChild(label);\n\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Private methods\n  /**\n   * Met à jour l'état visuel et fonctionnel du composant selon ses attributs.\n   * @private\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_update(): this {\n    this._p_clearStates();\n\n    if (this.#_input?.value || false) this._p_addState('value');\n\n    const btnValue = this.attr(this._.ATTRIBUTE_BUTTON);\n    if (btnValue !== null) {\n      this._p_addState(this._.STATE_BUTTON);\n      switch (btnValue) {\n        case EButtonType.PRIMARY:\n          this.#_button!.variation = EButtonType.PRIMARY;\n          break;\n\n        case EButtonType.SECONDARY:\n          this.#_button!.variation = EButtonType.SECONDARY;\n          break;\n\n        case EButtonType.DANGER:\n          this.#_button!.variation = EButtonType.DANGER;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    const button_icon = this.attr(this._.ATTRIBUTE_BUTTON_ICON);\n    if (button_icon !== null) {\n      this.#_button!.icon = button_icon;\n\n      if (!this._p_hasState(this._.STATE_BUTTON))\n        this._p_addStates(this._.STATE_BUTTON, this._.STATE_OBI);\n      else if (btnValue === EMPTY_STRING) this._p_addState(this._.STATE_OBI);\n    }\n\n    const icon = this.attr(this._.ATTRIBUTE_ICON);\n    if (icon !== null) {\n      this._p_addState(this._.STATE_ICON);\n      this.#_icon!.icon = icon;\n    }\n\n    if (this.attr(this._.ATTRIBUTE_DISABLED) !== null)\n      this._p_addState(this._.STATE_DISABLED);\n\n    return this.#_updateState(this.attr(this._.ATTRIBUTE_STATE)).#_sync();\n  }\n\n  /**\n   * Synchronise les propriétés et attributs de l'input interne.\n   * Met à jour les propriétés HTML de l'input selon les attributs du composant.\n   * @private\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_sync(): this {\n    if (!this.#_input) return this;\n\n    const input = this.#_input;\n\n    // 1. Propriétés de base\n    input.value = this.value;\n    input.type =\n      this.getAttribute(this._.ATTRIBUTE_TYPE) ||\n      HTMLBnumInput.DEFAULT_INPUT_TYPE;\n    input.placeholder =\n      this.getAttribute(this._.ATTRIBUTE_PLACEHOLDER) || EMPTY_STRING;\n\n    // 2. États Booléens (On utilise .disabled / .readOnly pour la réactivité JS)\n    input.disabled =\n      this.hasAttribute(this._.ATTRIBUTE_DISABLED) ||\n      this._p_hasState(this._.STATE_DISABLED);\n    input.readOnly = this.hasAttribute(this._.ATTRIBUTE_READONLY);\n    input.required = this.hasAttribute(this._.ATTRIBUTE_REQUIRED);\n\n    // 3. Validation & UX (On utilise setAttribute pour les attributs HTML5)\n    this.#_setFieldAttr(this._.ATTRIBUTE_PATTERN);\n    this.#_setFieldAttr(this._.ATTRIBUTE_MINLENGTH);\n    this.#_setFieldAttr(this._.ATTRIBUTE_MAXLENGTH);\n    this.#_setFieldAttr(this._.ATTRIBUTE_AUTOCOMPLETE);\n    this.#_setFieldAttr(this._.ATTRIBUTE_INPUTMODE);\n    this.#_setFieldAttr(this._.ATTRIBUTE_SPELLCHECK);\n    this.#_setFieldAttr('min');\n    this.#_setFieldAttr('max');\n    this.#_setFieldAttr('step');\n\n    return this.#_updateA11y();\n  }\n\n  /**\n   * Met à jour l'accessibilité (a11y) de l'input selon l'état.\n   * Met à jour les attributs ARIA et la validité de l'input.\n   * @private\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_updateA11y(): this {\n    if (!this.#_input) return this;\n\n    return this.#_setValidity();\n  }\n\n  /**\n   * Met à jour l'état visuel selon l'état passé en paramètre.\n   * @private\n   * @param state L'état à appliquer (success, error, etc.)\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_updateState(state: Nullable<string>): this {\n    if (state !== null) {\n      switch (state) {\n        case this._.STATE_SUCCESS:\n          this._p_addStates(this._.STATE_STATE, this._.STATE_SUCCESS);\n          this.#_stateIcon!.icon = this._.ICON_SUCCESS;\n          break;\n\n        case this._.STATE_ERROR:\n          this._p_addStates(this._.STATE_STATE, this._.STATE_ERROR);\n          this.#_stateIcon!.icon = this._.ICON_ERROR;\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Définit l'état (succès ou erreur) et le message associé.\n   * @private\n   * @param state Type d'état (success ou error).\n   * @param message Message à afficher.\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_setState(\n    state: typeof this._.SLOT_SUCCESS | typeof this._.SLOT_ERROR,\n    message?: string,\n  ): this {\n    this.setAttribute(this._.ATTRIBUTE_STATE, state);\n\n    if (message) {\n      this.querySelector(`slot[name=\"${state}\"]`)?.remove?.();\n      const span = this._p_createSpan({\n        child: message,\n        attributes: { slot: state },\n      });\n      this.appendChild(span);\n    }\n\n    return this;\n  }\n\n  /**\n   * Met à jour la validité de l'input et les messages d'erreur/succès.\n   * Gère également les attributs ARIA liés à la validation.\n   * @private\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_setValidity(): this {\n    if (!this.#_input) return this;\n\n    const stateAttr = this.attr(this._.ATTRIBUTE_STATE);\n    const isManualError = stateAttr === this._.STATE_ERROR;\n\n    if (isManualError) {\n      this.#_internalSetValidity(\n        { customError: true },\n        this._.TEXT_ERROR_FIELD,\n        this.#_input,\n      );\n    } else {\n      this.#_safeCheckValidity().match({\n        Ok: (isValid) => {\n          const isSuccess =\n            isValid && this.#_input!.validationMessage === EMPTY_STRING;\n\n          if (isSuccess) {\n            this.#_internalSetValidity({});\n          } else {\n            this.#_internalSetValidity(\n              this.#_input!.validity,\n              this.#_input!.validationMessage,\n              this.#_input!,\n            );\n          }\n\n          return void 0;\n        },\n        Err: () => this.#_internalSetValidity({}), // Fallback de sécurité\n      });\n    }\n\n    return this.#_syncValidationUI(isManualError);\n  }\n\n  /**\n   * Gère l'interface utilisateur de validation (messages, icônes, ARIA).\n   * @param isManualError Si l'erreur est définie manuellement via l'attribut state.\n   * @returns Cette instance pour chaînage.\n   */\n  #_syncValidationUI(isManualError: boolean): this {\n    const input = this.#_input!;\n    const hasNativeError = input.validationMessage !== EMPTY_STRING;\n    const isError = isManualError || (hasNativeError && !input.validity.valid);\n    const isSuccess = !isManualError && hasNativeError && input.validity.valid;\n    const hasState = isError || isSuccess;\n\n    if (hasState) {\n      this._p_addStates(\n        this._.STATE_STATE,\n        isSuccess ? this._.STATE_SUCCESS : this._.STATE_ERROR,\n      );\n\n      const successText =\n        this.#_input!.validationMessage || this._.TEXT_VALID_INPUT;\n      const errorText =\n        this.#_input!.validationMessage || this._.TEXT_INVALID_INPUT;\n      const validationText = isSuccess ? successText : errorText;\n      const slotTextId = isSuccess\n        ? this._.ID_SUCCESS_TEXT\n        : this._.ID_ERROR_TEXT;\n\n      this.shadowRoot!.querySelector<HTMLSlotElement>(\n        `#${slotTextId} slot`,\n      )!.innerText = validationText;\n\n      input.setAttribute('aria-invalid', isError ? 'true' : 'false');\n\n      const descriptions: string[] = [];\n      if (isError) descriptions.push(this._.ID_ERROR_TEXT);\n      if (isSuccess) descriptions.push(this._.ID_SUCCESS_TEXT);\n\n      input.setAttribute('aria-describedby', descriptions.join(' '));\n    } else {\n      input.removeAttribute('aria-invalid');\n      input.removeAttribute('aria-describedby');\n    }\n\n    const finalState = isError\n      ? this._.STATE_ERROR\n      : isSuccess\n        ? this._.STATE_SUCCESS\n        : null;\n    return this.#_updateState(finalState);\n  }\n\n  /**\n   * Initialise le bouton interne et son écouteur de clic.\n   * Ajoute un écouteur d'événement sur le bouton si nécessaire.\n   * @private\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  #_initialiseButton(): this {\n    if (this.#_onButtonClicked !== null && this.#_button !== null) {\n      this.#_button.addEventListener('click', (e) => {\n        this.onButtonClicked.call(e);\n      });\n    }\n\n    return this;\n  }\n\n  /**\n   * Callback appelé lors d'un changement de valeur de l'input.\n   * @private\n   * @param e Evénement de changement de valeur.\n   */\n  #_inputValueChangedCallback(e: Event): void {\n    this._p_inputValueChangedCallback(e);\n  }\n\n  /**\n   * Callback protégé appelé lors d'un changement de valeur de l'input.\n   * @protected\n   * @param e Evénement de changement de valeur.\n   * @returns Résultat de l'opération.\n   */\n  @Risky()\n  protected _p_inputValueChangedCallback(e: Event): Result<void> {\n    this.#_setFormValue(this.#_input!.value);\n    this.#_update();\n\n    return this.#_dispatchEvent(e).tapError(() => {\n      this.#_dispatchInputEventFallback(e);\n    });\n  }\n\n  /**\n   * Transfère un attribut du composant vers l'input interne si présent.\n   * @private\n   * @param attrName Nom de l'attribut à synchroniser.\n   */\n  #_setFieldAttr(attrName: string): void {\n    const val = this.getAttribute(attrName);\n    if (val !== null) {\n      this.#_input!.setAttribute(attrName, val);\n    } else {\n      this.#_input!.removeAttribute(attrName);\n    }\n  }\n\n  /**\n   * Définit la valeur du formulaire interne.\n   * @param value Valeur à définir.\n   * @returns Résultat de l'opération.\n   */\n  @Risky()\n  #_setFormValue(value: string): Result<void> {\n    this._p_internal.setFormValue(value);\n    return Result.Ok();\n  }\n\n  /**\n   * Met à jour la validité interne de l'input.\n   * @param flags Drapeaux de validité.\n   * @param message Message de validation.\n   * @param anchor Ancre HTML pour le message.\n   * @returns Résultat de l'opération.\n   */\n  @Risky()\n  #_internalSetValidity(\n    flags?: ValidityStateFlags | undefined,\n    message?: string | undefined,\n    anchor?: HTMLElement | undefined,\n  ): Result<void> {\n    return this._p_internal.setValidity(flags, message, anchor) as any;\n  }\n\n  /**\n   * Fait une vérification sécurisée de la validité de l'input.\n   * @returns Résultat de l'opération avec la validité.\n   */\n  @Risky()\n  #_safeCheckValidity(): Result<boolean> {\n    return this.#_input!.checkValidity() as any;\n  }\n\n  /**\n   * Effectue la dispatch de l'événement passé en paramètre.\n   * @param e Evénement à dispatcher.\n   * @returns Résultat de l'opération.\n   */\n  @Risky()\n  #_dispatchEvent(e: Event): Result<void> {\n    this.dispatchEvent(e);\n    return Result.Ok();\n  }\n\n  /**\n   * Fallback pour la dispatch des événements input/change.\n   * @param e Evènement qui pose problème\n   */\n  #_dispatchInputEventFallback(e: Event): void {\n    this.dispatchEvent(\n      e.type === 'input'\n        ? new InputEvent('input', {\n            data: this.value,\n            inputType: this.attr('type') || 'text',\n          })\n        : new Event('change'),\n    );\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * @inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return [\n      this.ATTRIBUTE_DATA_VALUE,\n      this.ATTRIBUTE_PLACEHOLDER,\n      this.ATTRIBUTE_TYPE,\n      this.ATTRIBUTE_DISABLED,\n      this.ATTRIBUTE_STATE,\n      this.ATTRIBUTE_BUTTON,\n      this.ATTRIBUTE_BUTTON_ICON,\n      this.ATTRIBUTE_ICON,\n      this.ATTRIBUTE_REQUIRED,\n      this.ATTRIBUTE_READONLY,\n      this.ATTRIBUTE_PATTERN,\n      this.ATTRIBUTE_MINLENGTH,\n      this.ATTRIBUTE_MAXLENGTH,\n      this.ATTRIBUTE_AUTOCOMPLETE,\n      this.ATTRIBUTE_INPUTMODE,\n      this.ATTRIBUTE_SPELLCHECK,\n      'min',\n      'max',\n      'step',\n    ];\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInput} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      type,\n      disabled,\n      state,\n      button,\n      'button-icon': buttonIcon,\n      icon,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      hint,\n      success,\n      error,\n      btnText,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      type?: string;\n      disabled?: string;\n      state?: string;\n      button?: string;\n      'button-icon'?: string;\n      icon?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n    } = {},\n  ): HTMLBnumInput {\n    const el = document.createElement(this.TAG) as HTMLBnumInput;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(this.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (type !== undefined) el.setAttribute(this.ATTRIBUTE_TYPE, type);\n    if (disabled !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined) el.setAttribute(this.ATTRIBUTE_STATE, state);\n    if (button !== undefined) el.setAttribute(this.ATTRIBUTE_BUTTON, button);\n    if (buttonIcon !== undefined)\n      el.setAttribute(this.ATTRIBUTE_BUTTON_ICON, buttonIcon);\n    if (icon !== undefined) el.setAttribute(this.ATTRIBUTE_ICON, icon);\n    if (required !== undefined)\n      el.setAttribute(this.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(this.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined) el.setAttribute(this.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(this.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(this.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(this.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(this.ATTRIBUTE_NAME, name);\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = this.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = this.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = this.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = this.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  static CreateTemplate(html: string = EMPTY_STRING): HTMLTemplateElement {\n    return BnumElementInternal.CreateTemplate(\n      BASE_TEMPLATE.replace('<!-- {{addoninner}} -->', html),\n    );\n  }\n\n  /**\n   * Tag HTML du composant.\n   */\n  static override get TAG(): string {\n    return TAG_INPUT;\n  }\n  //#endregion Static methods\n}\n","import { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT_NUMBER } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport style from './bnum-input-number.less';\n\nconst SHEET = HTMLBnumInput.ConstructCSSStyleSheet(style);\n\n/**\n * Input nombre.\n *\n * @structure Sans rien\n * <bnum-input-number></bnum-input-number>\n *\n * @structure Avec une légende\n * <bnum-input-number>Label du champ</bnum-input-number>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-number>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-number>\n *\n * @structure Avec un bouton\n * <bnum-input-number button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-number>\n *\n * @structure En erreur\n * <bnum-input-number min=\"200\" data-value=\"5\">Label du champ\n * </bnum-input-number>\n *\n * @structure Avec un état de succès\n * <bnum-input-number state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-number>\n *\n * @structure Avec une icône\n * <bnum-input-number icon=\"search\">Label du champ</bnum-input-number>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-number placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-number>\n *\n * @structure Désactivé\n * <bnum-input-number disabled>\n *   Label du champ\n * </bnum-input-number>\n *\n * @structure Complet\n * <bnum-input-number\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-number>\n *\n */\n@Define()\nexport class HTMLBnumInputNumber extends HTMLBnumInput {\n  /**\n   * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n  /**\n   * Valeur pour l'attribut type.\n   */\n  static readonly TYPE = 'number';\n\n  /** Référence à la classe HTMLBnumInputNumber */\n  @Self __!: typeof HTMLBnumInputNumber;\n\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  protected _p_preload(): void {\n    this.setAttribute(this.__.ATTRIBUTE_TYPE, this.__.TYPE);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    super._p_buildDOM(container);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super\n      ._p_observedAttributes()\n      .filter((x) => x !== this.ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInputNumber} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      disabled,\n      state,\n      button,\n      'button-icon': buttonIcon,\n      icon,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      min,\n      max,\n      hint,\n      success,\n      error,\n      btnText,\n      step,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      disabled?: string;\n      state?: string;\n      button?: string;\n      'button-icon'?: string;\n      icon?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n      min?: number;\n      max?: number;\n      step?: number;\n    } = {},\n  ): HTMLBnumInputNumber {\n    const el = document.createElement(this.TAG) as HTMLBnumInputNumber;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(this.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (disabled !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined) el.setAttribute(this.ATTRIBUTE_STATE, state);\n    if (button !== undefined) el.setAttribute(this.ATTRIBUTE_BUTTON, button);\n    if (buttonIcon !== undefined)\n      el.setAttribute(this.ATTRIBUTE_BUTTON_ICON, buttonIcon);\n    if (icon !== undefined) el.setAttribute(this.ATTRIBUTE_ICON, icon);\n    if (required !== undefined)\n      el.setAttribute(this.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(this.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined) el.setAttribute(this.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(this.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(this.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(this.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(this.ATTRIBUTE_NAME, name);\n    if (min !== undefined) el.setAttribute('min', min.toString());\n    if (max !== undefined) el.setAttribute('max', max.toString());\n    if (step !== undefined) el.setAttribute('step', step.toString());\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = this.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = this.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = this.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = this.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static get TAG(): string {\n    return TAG_INPUT_NUMBER;\n  }\n\n  static get AdditionnalStylesheet(): CSSStyleSheet {\n    return SHEET;\n  }\n}\n","import { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT_DATE } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInputNumber } from '../input-number/bnum-input-number';\nimport { HTMLBnumInput } from '../input/bnum-input';\n\n/**\n * Input de date.\n *\n * @structure Sans rien\n * <bnum-input-date></bnum-input-date>\n *\n * @structure Avec une légende\n * <bnum-input-date>Label du champ</bnum-input-date>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-date>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-date>\n *\n * @structure Avec un bouton\n * <bnum-input-date button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-date>\n *\n * @structure En erreur\n * <bnum-input-date min=\"2025-01-01\" data-value=\"2024-01-01\">Label du champ\n * </bnum-input-date>\n *\n * @structure Avec un état de succès\n * <bnum-input-date state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-date>\n *\n * @structure Avec une icône\n * <bnum-input-date icon=\"search\">Label du champ</bnum-input-date>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-date placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-date>\n *\n * @structure Désactivé\n * <bnum-input-date disabled>\n *   Label du champ\n * </bnum-input-date>\n *\n * @structure Complet\n * <bnum-input-date\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-date>\n *\n */\n@Define()\nexport class HTMLBnumInputDate extends HTMLBnumInput {\n  /**\n   * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n  /**\n   * Valeur pour l'attribut type.\n   */\n  static readonly TYPE = 'date';\n\n  /** Référence à la classe HTMLBnumInputDate */\n  @Self __!: typeof HTMLBnumInputDate;\n\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [\n      ...super._p_getStylesheets(),\n      HTMLBnumInputNumber.AdditionnalStylesheet,\n    ];\n  }\n\n  protected _p_preload(): void {\n    this.setAttribute(this.__.ATTRIBUTE_TYPE, this.__.TYPE);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    super._p_buildDOM(container);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super\n      ._p_observedAttributes()\n      .filter((x) => x !== this.ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInputDate} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      disabled,\n      state,\n      button,\n      'button-icon': buttonIcon,\n      icon,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      min,\n      max,\n      hint,\n      success,\n      error,\n      btnText,\n      step,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      disabled?: string;\n      state?: string;\n      button?: string;\n      'button-icon'?: string;\n      icon?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n      min?: number;\n      max?: number;\n      step?: number;\n    } = {},\n  ): HTMLBnumInputDate {\n    const el = document.createElement(this.TAG) as HTMLBnumInputDate;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(this.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (disabled !== undefined)\n      el.setAttribute(this.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined) el.setAttribute(this.ATTRIBUTE_STATE, state);\n    if (button !== undefined) el.setAttribute(this.ATTRIBUTE_BUTTON, button);\n    if (buttonIcon !== undefined)\n      el.setAttribute(this.ATTRIBUTE_BUTTON_ICON, buttonIcon);\n    if (icon !== undefined) el.setAttribute(this.ATTRIBUTE_ICON, icon);\n    if (required !== undefined)\n      el.setAttribute(this.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(this.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined) el.setAttribute(this.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(this.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(this.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(this.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(this.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(this.ATTRIBUTE_NAME, name);\n    if (min !== undefined) el.setAttribute('min', min.toString());\n    if (max !== undefined) el.setAttribute('max', max.toString());\n    if (step !== undefined) el.setAttribute('step', step.toString());\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = this.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = this.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = this.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = this.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static override get TAG() {\n    return TAG_INPUT_DATE;\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumInput } from '../input/bnum-input';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport { HTMLBnumButtonIcon } from '../icon-button/bnum-icon-button';\nimport style from './bnum-input-search.less';\nimport { Autobind, Define, Fire, Self } from '../../../core/decorators';\nimport { TAG_INPUT_SEARCH } from '../../../core/utils/constants/tags';\n\nconst SHEET = HTMLBnumInput.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst ID_ACTIONS_CONTAINER = 'input-search-actions-container';\nconst ID_CLEAR_BUTTON = 'input-clear-button';\nconst SLOT_ACTIONS = 'actions';\n\nconst EVENT_SEARCH = 'bnum-input-search:search';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = HTMLBnumInput.CreateTemplate(\n  `<div id=\"${ID_ACTIONS_CONTAINER}\">\n      ${HTMLBnumButtonIcon.Write('close', { id: ID_CLEAR_BUTTON })}\n      <slot name=\"${SLOT_ACTIONS}\"></slot>\n    </div>`,\n);\n//#endregion Template\n/**\n * Composant d'input de recherche.\n *\n * Utilise le composant de base `bnum-input` avec des configurations spécifiques pour la recherche.\n *\n * @structure Basique\n * <bnum-input-search>Label de recherche</bnum-input-search>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-search>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-search>\n *\n * @structure Désactivé\n * <bnum-input-search disabled placeholder=\"Recherche désactivée\">\n *   Label du champ\n * </bnum-input-search>\n *\n * @structure Avec des boutons custom\n * <bnum-input-search placeholder=\"Recherche avec des boutons\">\n *   Label du champ\n *   <bnum-icon-button slot=\"actions\">filter_list</bnum-icon-button>\n *\n * </bnum-input-search>\n *\n * @slot button - Contenu du bouton de recherche (texte ou icône). (Inutilisé)\n * @slot actions - Contenu des actions personnalisées à droite du champ de recherche.\n *\n */\n@Define()\nexport class HTMLBnumInputSearch extends HTMLBnumInput {\n  //#region Constants\n  /**\n   * @attr {string} (default: 'text') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'text' pour ce composant.\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n  /**\n   * @attr {undefined} (default: undefined) button - Attribut pour afficher le bouton interne. Ne pas modifier, toujours présent pour ce composant.\n   */\n  static readonly ATTRIBUTE_BUTTON = 'button';\n  /**\n   * @attr {string} (default: 'search') button-icon - Icône du bouton interne. Ne pas modifier, toujours 'search' pour ce composant.\n   */\n  static readonly ATTRIBUTE_BUTTON_ICON = 'button-icon';\n  /**\n   * Texte affiché dans le champ de recherche.\n   */\n  static readonly TEXT_SEARCH_FIELD =\n    BnumConfig.Get('local_keys')?.search_field || 'Rechercher';\n  /**\n   * Événement déclenché au clic sur le bouton interne.\n   * @event bnum-input:button.click\n   * @detail MouseEvent\n   */\n  static readonly EVENT_BUTTON_CLICK = 'bnum-input:button.click';\n  /**\n   * Événement déclenché au clic par le bouton interne ou à la validation par la touche \"Entrée\".\n   * Envoie la valeur actuelle de l'input de recherche.\n   * @event bnum-input-search:search\n   * @detail { value: string; name: string; caller: HTMLBnumInputSearch }\n   */\n  static readonly EVENT_SEARCH = EVENT_SEARCH;\n  /**\n   * Événement déclenché lors du clic sur le bouton de vidage du champ de recherche.\n   * @event bnum-input-search:clear\n   * @detail { caller: HTMLBnumInputSearch }\n   */\n  static readonly EVENT_CLEAR = 'bnum-input-search:clear';\n  /**\n   * Icône du bouton de recherche.\n   */\n  static readonly BUTTON_ICON = 'search';\n  /**\n   * ID du conteneur des actions de recherche.\n   */\n  static readonly ID_ACTIONS_CONTAINER = ID_ACTIONS_CONTAINER;\n  /**\n   * ID du bouton pour vider le champ de recherche.\n   */\n  static readonly ID_CLEAR_BUTTON = ID_CLEAR_BUTTON;\n  /**\n   * Nom du slot pour les actions personnalisées.\n   */\n  static readonly SLOT_ACTIONS = SLOT_ACTIONS;\n  //#endregion Constants\n\n  //#region Private fields\n  /**\n   * Bouton interne pour vider le champ de recherche.\n   * @private\n   * @type {HTMLBnumButtonIcon | null}\n   */\n  #_emptyButton: HTMLBnumButtonIcon | null = null;\n  //#endregion Private fields\n\n  /** Référence à la classe HTMLBnumInputSearch */\n  @Self __!: typeof HTMLBnumInputSearch;\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant de recherche.\n   */\n  constructor() {\n    super();\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Précharge les attributs spécifiques à l'input de recherche.\n   * Définit le placeholder et l'icône du bouton si non présents.\n   */\n  protected _p_preload(): void {\n    if (this.attr(HTMLBnumInput.ATTRIBUTE_PLACEHOLDER) === null) {\n      this.attr(HTMLBnumInput.ATTRIBUTE_PLACEHOLDER, this.__.TEXT_SEARCH_FIELD);\n    }\n\n    this.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON_ICON, this.__.BUTTON_ICON);\n  }\n\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    super._p_buildDOM(container);\n\n    this.#_emptyButton = container.querySelector(\n      `#${this.__.ID_ACTIONS_CONTAINER} ${HTMLBnumButtonIcon.TAG}`,\n    ) as HTMLBnumButtonIcon;\n\n    this.#_emptyButton!.addEventListener('click', () => {\n      this.value = EMPTY_STRING;\n      this._p_inputValueChangedCallback(new Event('input'));\n      this.#_triggerEventSearch();\n      this.trigger(this.__.EVENT_CLEAR, { caller: this });\n    });\n  }\n\n  /**\n   * Attache les événements nécessaires au composant.\n   * Supprime les attributs inutiles et gère les événements de recherche.\n   */\n  protected _p_attach(): void {\n    super._p_attach();\n\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON);\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON_ICON);\n\n    this.onButtonClicked.add(EVENT_DEFAULT, this.#_triggerEventSearch);\n\n    this.addEventListener('keydown', (e: KeyboardEvent) => {\n      if (e.key === 'Enter') {\n        this.#_triggerEventSearch();\n      }\n    });\n  }\n\n  protected _p_inputValueChangedCallback(e: Event): void {\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON);\n    this.setAttribute(\n      HTMLBnumInput.ATTRIBUTE_BUTTON_ICON,\n      HTMLBnumInputSearch.BUTTON_ICON,\n    );\n    super._p_inputValueChangedCallback?.(e);\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON);\n  }\n\n  /**\n   * Nettoie les attributs après le rendu du composant.\n   */\n  protected _p_postFlush(): void {\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON);\n    this.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON_ICON, this.__.BUTTON_ICON);\n    super._p_postFlush();\n    this.removeAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON);\n  }\n  //#endregion Lifecycle\n  //#region Public Methods\n  /**\n   * Désactive le bouton de recherche.\n   */\n  disableSearchButton(): this {\n    (this._p_isShadowElement() === false ? this : this.shadowRoot!)\n      .querySelector(`#${HTMLBnumInput.ID_INPUT_BUTTON}`)\n      ?.setAttribute(\n        HTMLBnumInput.ATTRIBUTE_DISABLED,\n        HTMLBnumInput.ATTRIBUTE_DISABLED,\n      );\n    return this;\n  }\n\n  /**\n   * Active le bouton de recherche.\n   */\n  enableSearchButton(): this {\n    (this._p_isShadowElement() === false ? this : this.shadowRoot!)\n      .querySelector(`#${HTMLBnumInput.ID_INPUT_BUTTON}`)\n      ?.removeAttribute(HTMLBnumInput.ATTRIBUTE_DISABLED);\n    return this;\n  }\n  //#endregion Public Methods\n  //#region Private Methods\n\n  /**\n   * Déclenche l'événement de recherche avec la valeur actuelle de l'input.\n   * @private\n   */\n  @Autobind\n  @Fire(EVENT_SEARCH)\n  #_triggerEventSearch() {\n    return {\n      value: this.value,\n      name: this.name,\n      caller: this,\n    };\n  }\n  //#endregion Private Methods\n  //#region Static Methods\n  /**\n   * Retourne la liste des attributs observés, en excluant ceux spécifiques à la recherche.\n   * @inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super._p_observedAttributes().filter((x) => {\n      switch (x) {\n        case this.ATTRIBUTE_TYPE:\n        case HTMLBnumInput.ATTRIBUTE_BUTTON:\n        case HTMLBnumInput.ATTRIBUTE_BUTTON_ICON:\n          return false;\n\n        default:\n          return true;\n      }\n    });\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInput} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      disabled,\n      state,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      hint,\n      success,\n      error,\n      btnText,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      disabled?: string;\n      state?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n    } = {},\n  ): HTMLBnumInputSearch {\n    const el = document.createElement(\n      HTMLBnumInputSearch.TAG,\n    ) as HTMLBnumInputSearch;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (disabled !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_STATE, state);\n    if (required !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(HTMLBnumInput.ATTRIBUTE_NAME, name);\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = HTMLBnumInput.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = HTMLBnumInput.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = HTMLBnumInput.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = HTMLBnumInput.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  /**\n   * Crée un composant de recherche à partir d'un input existant.\n   * @param input Instance de HTMLBnumInput à convertir.\n   * @returns {HTMLBnumInputSearch} Nouvelle instance de recherche.\n   */\n  static FromInput(input: HTMLBnumInput): HTMLBnumInputSearch {\n    let init = {};\n    // Copier les attributs pertinents de l'input d'origine dans l'objet init\n    for (const attr of input.attributes) {\n      switch (attr.name) {\n        case HTMLBnumInput.ATTRIBUTE_PLACEHOLDER:\n        case HTMLBnumInput.ATTRIBUTE_NAME:\n        case HTMLBnumInput.ATTRIBUTE_DISABLED:\n        case HTMLBnumInput.ATTRIBUTE_REQUIRED:\n        case HTMLBnumInput.ATTRIBUTE_READONLY:\n        case HTMLBnumInput.ATTRIBUTE_PATTERN:\n        case HTMLBnumInput.ATTRIBUTE_MINLENGTH:\n        case HTMLBnumInput.ATTRIBUTE_MAXLENGTH:\n        case HTMLBnumInput.ATTRIBUTE_AUTOCOMPLETE:\n        case HTMLBnumInput.ATTRIBUTE_INPUTMODE:\n        case HTMLBnumInput.ATTRIBUTE_SPELLCHECK:\n        case HTMLBnumInput.ATTRIBUTE_DATA_VALUE:\n          init = { ...init, [attr.name]: attr.value };\n          break;\n      }\n    }\n\n    // On recherche les slots dans l'input d'origine et on l'ajoute dans l'init.\n    const label =\n      input.querySelector(':not([slot])')?.textContent || EMPTY_STRING;\n    const hint = input.querySelector(\n      `[slot=\"${HTMLBnumInput.SLOT_HINT}\"]`,\n    )?.textContent;\n    const success = input.querySelector(\n      `[slot=\"${HTMLBnumInput.SLOT_SUCCESS}\"]`,\n    )?.textContent;\n    const error = input.querySelector(\n      `[slot=\"${HTMLBnumInput.SLOT_ERROR}\"]`,\n    )?.textContent;\n    const btnText = input.querySelector(\n      `[slot=\"${HTMLBnumInput.SLOT_BUTTON}\"]`,\n    )?.textContent;\n\n    if (hint) init = { ...init, hint };\n    if (success) init = { ...init, success };\n    if (error) init = { ...init, error };\n    if (btnText) init = { ...init, btnText };\n\n    return this.Create(label, init);\n  }\n\n  /**\n   * Retourne le tag HTML du composant.\n   */\n  static get TAG(): string {\n    return TAG_INPUT_SEARCH;\n  }\n  //#endregion Static Methods\n}\n","import { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT_TEXT } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInput } from '../input/bnum-input';\n\n/**\n * Input texte.\n *\n * @structure Sans rien\n * <bnum-input-text></bnum-input-text>\n *\n * @structure Avec une légende\n * <bnum-input-text>Label du champ</bnum-input-text>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-text>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-text>\n *\n * @structure Avec un bouton\n * <bnum-input-text button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-text>\n *\n * @structure En erreur\n * <bnum-input-text pattern=\"^[a-zA-Z0-9]+$\" data-value=\"@@@@@\">Label du champ\n * </bnum-input-text>\n *\n * @structure Avec un état de succès\n * <bnum-input-text state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-text>\n *\n * @structure Avec une icône\n * <bnum-input-text icon=\"search\">Label du champ</bnum-input-text>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-text placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-text>\n *\n * @structure Désactivé\n * <bnum-input-text disabled>\n *   Label du champ\n * </bnum-input-text>\n *\n * @structure Complet\n * <bnum-input-text\n *   data-value=\"Valeur initiale\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-text>\n *\n */\n@Define()\nexport class HTMLBnumInputText extends HTMLBnumInput {\n  /**\n   * @attr {string} (optional) (default: 'text') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'text' pour ce composant.\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n  /**\n   * Valeur 'text' pour l'attribut type.\n   */\n  static readonly TYPE_TEXT = 'text';\n\n  /** Référence à la classe HTMLBnumInputText */\n  @Self __!: typeof HTMLBnumInputText;\n\n  constructor() {\n    super();\n  }\n\n  protected _p_preload(): void {\n    super._p_preload();\n    this.setAttribute(this.__.ATTRIBUTE_TYPE, this.__.TYPE_TEXT);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    super._p_buildDOM(container);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super\n      ._p_observedAttributes()\n      .filter((x) => x !== this.ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInputText} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      disabled,\n      state,\n      button,\n      'button-icon': buttonIcon,\n      icon,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      hint,\n      success,\n      error,\n      btnText,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      disabled?: string;\n      state?: string;\n      button?: string;\n      'button-icon'?: string;\n      icon?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n    } = {},\n  ): HTMLBnumInputText {\n    const el = document.createElement(this.TAG) as HTMLBnumInputText;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (disabled !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_STATE, state);\n    if (button !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON, button);\n    if (buttonIcon !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON_ICON, buttonIcon);\n    if (icon !== undefined) el.setAttribute(HTMLBnumInput.ATTRIBUTE_ICON, icon);\n    if (required !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(HTMLBnumInput.ATTRIBUTE_NAME, name);\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = HTMLBnumInput.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = HTMLBnumInput.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = HTMLBnumInput.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = HTMLBnumInput.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static get TAG(): string {\n    return TAG_INPUT_TEXT;\n  }\n}\n","import { Define, Self } from '../../../core/decorators';\nimport { TAG_INPUT_TIME } from '../../../core/utils/constants/tags';\nimport { HTMLBnumInputNumber } from '../input-number/bnum-input-number';\nimport { HTMLBnumInput } from '../input/bnum-input';\n\n/**\n * Input de temps.\n *\n * @structure Sans rien\n * <bnum-input-time></bnum-input-time>\n *\n * @structure Avec une légende\n * <bnum-input-time>Label du champ</bnum-input-time>\n *\n * @structure Avec une légende et un indice\n * <bnum-input-time>\n * Label du champ\n * <span slot=\"hint\">Indice d'utilisation</span>\n * </bnum-input-time>\n *\n * @structure Avec un bouton\n * <bnum-input-time button=\"true\" button-icon=\"add\">Label du champ\n *   <span slot=\"button\">Ajouter</span>\n * </bnum-input-time>\n *\n * @structure En erreur\n * <bnum-input-time min=\"05:00\" data-value=\"04:00\">Label du champ\n * </bnum-input-time>\n *\n * @structure Avec un état de succès\n * <bnum-input-time state=\"success\">Label du champ\n *   <span slot=\"success\">Le champ est valide !</span>\n * </bnum-input-time>\n *\n * @structure Avec une icône\n * <bnum-input-time icon=\"search\">Label du champ</bnum-input-time>\n *\n * @structure Avec un bouton avec icône seulement\n * <bnum-input-time placeholder=\"LA LA !\" button-icon=\"add\">Label du champ\n * </bnum-input-time>\n *\n * @structure Désactivé\n * <bnum-input-time disabled>\n *   Label du champ\n * </bnum-input-time>\n *\n * @structure Complet\n * <bnum-input-time\n *   data-value=\"5\"\n *   placeholder=\"Texte indicatif\"\n *   type=\"text\"\n *   state=\"error\"\n *   icon=\"search\"\n *   button=\"primary\"\n *   button-icon=\"send\"\n *   step=\"10\"\n * >\n *   Label du champ\n *   <span slot=\"hint\">Indice d'utilisation</span>\n *   <span slot=\"success\">Le champ est valide !</span>\n *   <span slot=\"error\">Le champ est invalide !</span>\n *   <span slot=\"button\">Envoyer</span>\n * </bnum-input-time>\n *\n */\n@Define()\nexport class HTMLBnumInputTime extends HTMLBnumInput {\n  /**\n   * @attr {string} (optional) (default: 'number') type - Type de l'input (text, password, email, etc.) Ne pas modifier, toujours 'number' pour ce composant.\n   */\n  static readonly ATTRIBUTE_TYPE = 'type';\n  /**\n   * Valeur pour l'attribut type.\n   */\n  static readonly TYPE = 'time';\n\n  /** Référence à la classe HTMLBnumInputTime */\n  @Self __!: typeof HTMLBnumInputTime;\n\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [\n      ...super._p_getStylesheets(),\n      HTMLBnumInputNumber.AdditionnalStylesheet,\n    ];\n  }\n\n  protected _p_preload(): void {\n    this.setAttribute(this.__.ATTRIBUTE_TYPE, this.__.TYPE);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    super._p_buildDOM(container);\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return super\n      ._p_observedAttributes()\n      .filter((x) => x !== this.ATTRIBUTE_TYPE);\n  }\n\n  /**\n   * Crée une instance du composant avec les options fournies.\n   * @param label Texte du label principal.\n   * @param options Options d'initialisation (attributs et slots).\n   * @returns {HTMLBnumInputTime} Instance du composant.\n   */\n  static Create(\n    label: string,\n    {\n      'data-value': dataValue,\n      placeholder,\n      name,\n      disabled,\n      state,\n      button,\n      'button-icon': buttonIcon,\n      icon,\n      required,\n      readonly,\n      pattern,\n      minlength,\n      maxlength,\n      autocomplete,\n      inputmode,\n      spellcheck,\n      min,\n      max,\n      hint,\n      success,\n      error,\n      btnText,\n      step,\n    }: {\n      'data-value'?: string;\n      placeholder?: string;\n      name?: string;\n      disabled?: string;\n      state?: string;\n      button?: string;\n      'button-icon'?: string;\n      icon?: string;\n      required?: string;\n      readonly?: string;\n      pattern?: string;\n      minlength?: string;\n      maxlength?: string;\n      autocomplete?: string;\n      inputmode?: string;\n      spellcheck?: string;\n      hint?: string;\n      success?: string;\n      error?: string;\n      btnText?: string;\n      min?: number;\n      max?: number;\n      step?: number;\n    } = {},\n  ): HTMLBnumInputTime {\n    const el = document.createElement(this.TAG) as HTMLBnumInputTime;\n\n    // Appliquer chaque attribut si défini\n    if (dataValue !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DATA_VALUE, dataValue);\n    if (placeholder !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PLACEHOLDER, placeholder);\n    if (disabled !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_DISABLED, disabled);\n    if (state !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_STATE, state);\n    if (button !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON, button);\n    if (buttonIcon !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_BUTTON_ICON, buttonIcon);\n    if (icon !== undefined) el.setAttribute(HTMLBnumInput.ATTRIBUTE_ICON, icon);\n    if (required !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_REQUIRED, required);\n    if (readonly !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_READONLY, readonly);\n    if (pattern !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_PATTERN, pattern);\n    if (minlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MINLENGTH, minlength);\n    if (maxlength !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_MAXLENGTH, maxlength);\n    if (autocomplete !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_AUTOCOMPLETE, autocomplete);\n    if (inputmode !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_INPUTMODE, inputmode);\n    if (spellcheck !== undefined)\n      el.setAttribute(HTMLBnumInput.ATTRIBUTE_SPELLCHECK, spellcheck);\n    if (name !== undefined) el.setAttribute(HTMLBnumInput.ATTRIBUTE_NAME, name);\n    if (min !== undefined) el.setAttribute('min', min.toString());\n    if (max !== undefined) el.setAttribute('max', max.toString());\n    if (step !== undefined) el.setAttribute('step', step.toString());\n\n    // Slot par défaut (label)\n    el.textContent = label;\n\n    // Slots nommés\n    if (hint) {\n      const hintSlot = document.createElement('span');\n      hintSlot.slot = HTMLBnumInput.SLOT_HINT;\n      hintSlot.textContent = hint;\n      el.appendChild(hintSlot);\n    }\n    if (success) {\n      const successSlot = document.createElement('span');\n      successSlot.slot = HTMLBnumInput.SLOT_SUCCESS;\n      successSlot.textContent = success;\n      el.appendChild(successSlot);\n    }\n    if (error) {\n      const errorSlot = document.createElement('span');\n      errorSlot.slot = HTMLBnumInput.SLOT_ERROR;\n      errorSlot.textContent = error;\n      el.appendChild(errorSlot);\n    }\n    if (btnText) {\n      const buttonSlot = document.createElement('span');\n      buttonSlot.slot = HTMLBnumInput.SLOT_BUTTON;\n      buttonSlot.textContent = btnText;\n      el.appendChild(buttonSlot);\n    }\n\n    return el;\n  }\n\n  /**\n   *@inheritdoc\n   */\n  static get TAG(): string {\n    return TAG_INPUT_TIME;\n  }\n}\n\nHTMLBnumInputTime.TryDefine();\n","import { Define } from '../../../core/decorators';\nimport { TAG_PRIMARY } from '../../../core/utils/constants/tags';\nimport { EButtonType, HTMLBnumButton } from '../button/bnum-button';\n\n/**\n * Bouton Bnum de type \"Primary\".\n *\n * @structure Cas standard\n * <bnum-primary-button>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton avec icône\n * <bnum-primary-button data-icon=\"home\">Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-primary-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-primary-button loading>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton arrondi\n * <bnum-primary-button rounded>Texte du bouton</bnum-primary-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-primary-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-primary-button>\n */\n@Define()\nexport class HTMLBnumPrimaryButton extends HTMLBnumButton {\n  constructor() {\n    super();\n    const fromAttribute = false;\n    this.data(\n      HTMLBnumButton.ATTR_VARIATION,\n      EButtonType.PRIMARY,\n      fromAttribute,\n    );\n  }\n  static get TAG(): string {\n    return TAG_PRIMARY;\n  }\n}\n","// core/jsx/index.ts\n\nimport { EMPTY_STRING } from '@rotomeca/utils';\n\nconst VOID_TAGS = new Set([\n  'area',\n  'base',\n  'br',\n  'col',\n  'embed',\n  'hr',\n  'img',\n  'input',\n  'link',\n  'meta',\n  'param',\n  'source',\n  'track',\n  'wbr',\n]);\n\nexport function h(tag: any, props: any, ...argsChildren: any[]) {\n  if (typeof tag === 'function' && 'TAG' in tag) {\n    tag = (tag as any).TAG;\n  }\n\n  if (typeof tag === 'function') {\n    const children = argsChildren.length ? argsChildren : props?.children || [];\n    return tag({ ...props, children });\n  }\n\n  let attrs = EMPTY_STRING;\n  if (props) {\n    for (const key in props) {\n      const value = props[key];\n\n      if (key === 'children' || value == null || value === false) continue;\n\n      const name = key === 'className' ? 'class' : key;\n\n      if (key === 'style' && typeof value === 'object') {\n        let styleStr = EMPTY_STRING;\n        for (const sKey in value) {\n          styleStr += `${sKey}:${value[sKey]};`;\n        }\n        attrs += ` ${name}=\"${styleStr}\"`;\n      } else if (value === true) {\n        attrs += ` ${name}`;\n      } else {\n        attrs += ` ${name}=\"${value}\"`;\n      }\n    }\n  }\n\n  const open = `<${tag}${attrs}>`;\n  if (VOID_TAGS.has(tag as string)) return open;\n\n  const rawChildren = argsChildren.length > 0 ? argsChildren : props?.children;\n  const content = renderChildren(rawChildren);\n\n  return `${open}${content}</${tag}>`;\n}\n\n// Helper récursif ultra-rapide pour les enfants\nfunction renderChildren(child: any): string {\n  if (child == null || child === false || child === true) return EMPTY_STRING;\n\n  if (Array.isArray(child)) {\n    let str = EMPTY_STRING;\n    for (let i = 0; i < child.length; i++) {\n      str += renderChildren(child[i]);\n    }\n    return str;\n  }\n\n  return String(child);\n}\n\nexport const Fragment = (props: any) => {\n  return props.children ? renderChildren(props.children) : EMPTY_STRING;\n};\n","// core/decorators/ui.ts\nexport function UI(\n  selectorMap: Record<string, string>,\n  options?: { shadowRoot?: boolean },\n) {\n  const { shadowRoot = true } = options || {};\n\n  return function <T extends HTMLElement, V extends object>(\n    target: ClassAccessorDecoratorTarget<T, V>,\n    context: ClassAccessorDecoratorContext<T, V>,\n  ) {\n    const name = String(context.name);\n    // Symbole pour stocker l'objet UI une fois créé\n    const uiCacheKey = Symbol(name);\n\n    return {\n      get(this: T): V {\n        // 1. Si l'objet UI existe déjà, on le retourne\n        if ((this as any)[uiCacheKey]) {\n          return (this as any)[uiCacheKey];\n        }\n\n        const root = shadowRoot ? this.shadowRoot || this : this;\n\n        // 2. On crée un objet vide\n        const uiObject: any = {};\n\n        // 3. On utilise un Map interne pour stocker les résultats des querySelector\n        //    pour ne pas les refaire à chaque accès (Cache granulaire)\n        const domCache = new Map<string, Element | null>();\n\n        // 4. On définit dynamiquement des getters pour chaque clé\n        for (const [key, selector] of Object.entries(selectorMap)) {\n          Object.defineProperty(uiObject, key, {\n            configurable: true,\n            enumerable: true,\n            get: () => {\n              // A. Si on a déjà cherché cet élément précis, on le rend\n              if (domCache.has(key)) {\n                return domCache.get(key);\n              }\n\n              // B. Sinon, on fait le querySelector (LAZY)\n              const element = root.querySelector(selector);\n\n              // C. On le met en cache\n              domCache.set(key, element);\n\n              return element;\n            },\n            // Permet d'écraser manuellement si besoin : this.#_ui.icon = ...\n            set: (value: Element | null) => {\n              domCache.set(key, value);\n            },\n          });\n        }\n\n        // 5. On stocke l'objet configuré sur l'instance et on le retourne\n        (this as any)[uiCacheKey] = uiObject;\n        return uiObject as V;\n      },\n    };\n  };\n}\n","import { ValueOf } from 'core/utils/types';\n\nexport const PropertyMode = {\n  default: 'rw',\n  readonly: 'readonly',\n  init: 'init',\n} as const;\nexport type PropertyMode = ValueOf<typeof PropertyMode>;\n\nexport interface PropertyOptions {\n  /**\n   * Mode d'accès au setter :\n   * - 'rw' (Read/Write) : Comportement par défaut { get; set; }\n   * - 'readonly' : Setter désactivé après initialisation { get; }\n   * - 'init' : Assignable une seule fois (ou null -> value) { get; init; }\n   * @default 'rw'\n   */\n  mode?: PropertyMode;\n\n  /**\n   * Déclenche _p_update() lors du changement de valeur ?\n   * @default false\n   */\n  reactive?: boolean;\n}\n\n/**\n * @Property Gère la réactivité et les droits d'accès des Auto-Accessors.\n * Simule les comportements C# { get; set; }, { get; init; } et { get; }.\n */\nexport function Property(options: PropertyOptions = {}) {\n  const { mode = PropertyMode.default, reactive = false } = options;\n\n  return function <This extends any, Value>(\n    target: ClassAccessorDecoratorTarget<This, Value>,\n    context: ClassAccessorDecoratorContext<This, Value>,\n  ): ClassAccessorDecoratorResult<This, Value> {\n    const name = String(context.name);\n\n    return {\n      // Init: Appelé lors de l'initialisation de la classe (ex: accessor x = 10)\n      init(initialValue: Value): Value {\n        return initialValue;\n      },\n\n      // Get: Lecture standard via le backing field natif\n      get(this: This): Value {\n        return target.get.call(this);\n      },\n\n      // Set: Logique de protection et réactivité\n      set(this: This, newValue: Value) {\n        const oldValue = target.get.call(this);\n\n        // 1. Gestion des Modes (Runtime Security)\n        if (mode === 'readonly') {\n          // Note: L'initialisation via \"accessor x = val\" passe par init(), pas set().\n          // Donc ici, c'est une tentative de modification ultérieure.\n          throw new Error(`[Property] '${name}' is ReadOnly ({ get; }).`);\n        }\n\n        if (mode === 'init') {\n          // Pattern { get; init; }\n          // On autorise si la valeur actuelle est undefined/null (premier set)\n          // Ou si on est techniquement encore dans la phase de construction (dur à détecter parfaitement en JS pur sans état,\n          // mais on suppose que si oldValue existe, c'est trop tard).\n          if (oldValue !== undefined && oldValue !== null) {\n            throw new Error(\n              `[Property] '${name}' is InitOnly ({ get; init; }).`,\n            );\n          }\n        }\n\n        // 2. Optimisation : Pas de changement, pas d'event\n        if (oldValue === newValue) return;\n\n        // 3. Mise à jour du backing field natif\n        target.set.call(this, newValue);\n\n        // 4. Réactivité (Appel du moteur de rendu Bnum)\n        if (reactive && typeof (this as any)._p_update === 'function') {\n          (this as any)._p_update();\n        }\n      },\n    };\n  };\n}\n","import BnumElement from 'components/bnum-element';\nimport { Nullable } from '../types';\nimport { Property, PropertyMode } from 'core/decorators/property';\n\nexport type CheckedChangeEventConstructorOption<\n\tTValue,\n\tTDetails,\n\tTCaller extends HTMLElement,\n> = {\n\tvalue: TValue;\n\tchecked: boolean;\n\tname: string;\n\tcaller: TCaller;\n\tdetails?: Nullable<TDetails>;\n};\n\nexport class CheckedChangeEvent<\n\tTValue,\n\tTDetails,\n\tTCaller extends BnumElement,\n> extends CustomEvent<TDetails> {\n\t@Property({ mode: PropertyMode.init }) accessor value!: TValue;\n\t@Property({ mode: PropertyMode.init }) accessor name!: string;\n\t@Property({ mode: PropertyMode.init }) accessor checked!: boolean;\n\t@Property({ mode: PropertyMode.init }) accessor caller!: TCaller;\n\n\tconstructor(\n\t\toptions: CheckedChangeEventConstructorOption<TValue, TDetails, TCaller>,\n\t) {\n\t\tsuper(\n\t\t\t`${(options.caller.constructor as any).TAG}:change`,\n\t\t\toptions.details ?? { bubbles: true, cancelable: true },\n\t\t);\n\n\t\tthis.value = options.value;\n\t\tthis.name = options.name;\n\t\tthis.checked = options.checked;\n\t\tthis.caller = options.caller;\n\t}\n}\n","import JsEvent from '@rotomeca/event';\nimport { Nullable } from '../utils/types';\n\nconst listenersCacheKey = Symbol('listenersCache');\n\nexport function Listener<TCallback extends Function, This = any>(\n  initilizator?: Nullable<(event: JsEvent<TCallback>, instance: This) => void>,\n) {\n  return function (\n    _target: ClassAccessorDecoratorTarget<This, JsEvent<TCallback>>,\n    context: ClassAccessorDecoratorContext<This, JsEvent<TCallback>>,\n  ): ClassAccessorDecoratorResult<This, JsEvent<TCallback>> {\n    const methodName = String(context.name);\n    const listenerCacheKey = Symbol(`listener_${methodName}`);\n\n    return {\n      get(this: This): JsEvent<TCallback> {\n        const self = this as any;\n\n        if (!self[listenersCacheKey])\n          self[listenersCacheKey] = new Map<Symbol, JsEvent<any>>();\n\n        if (self[listenersCacheKey].has(listenerCacheKey)) {\n          return self[listenersCacheKey].get(listenerCacheKey);\n        }\n\n        const event = new JsEvent<TCallback>();\n        if (initilizator) {\n          initilizator(event, this);\n        }\n\n        self[listenersCacheKey].set(listenerCacheKey, event);\n\n        return self[listenersCacheKey].get(listenerCacheKey);\n      },\n    };\n  };\n}\n","import BnumElementInternal from 'components/bnum-element-states';\nimport { HTMLBnumFragment } from '../fragment/bnum-fragment';\nimport { Attr, CustomFire, Data, Define, SetAttr } from 'core/decorators';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable, Optional } from 'core/utils/types';\nimport { UI } from 'core/decorators/ui';\nimport {\n\tCheckedChangeEvent,\n\tCheckedChangeEventConstructorOption,\n} from 'core/utils/events/CheckedChangeEvent';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from 'core/utils/Log';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { INPUT_BASE_STYLE } from '../input/bnum-input';\nimport style from './bnum-radio.less';\nimport { Listener } from 'core/decorators/listener';\nimport JsEvent from '@rotomeca/event';\nimport { TAG_RADIO } from 'core/utils/constants/tags';\n\n//#region Utilities\n\n/**\n * Vérifie si une valeur est null ou undefined.\n *\n * @template T - Le type de la valeur à vérifier\n * @param newVal - La valeur à tester\n * @returns `true` si la valeur est null ou undefined, `false` sinon\n *\n * @example\n * ```ts\n * isNullOrUndefined(null); // true\n * isNullOrUndefined(undefined); // true\n * isNullOrUndefined(\"test\"); // false\n * ```\n */\nfunction isNullOrUndefined<T>(newVal: Optional<Nullable<T>>) {\n\treturn newVal === null || newVal === undefined;\n}\n\n/**\n * Vérifie si une clé correspond à une clé valide d'actions.\n *\n * @param key - La clé à vérifier\n * @returns `true` si la clé fait partie des actions disponibles, `false` sinon\n *\n * @remarks\n * Les clés valides sont : 'checked', 'value', 'name', 'disabled'\n */\nfunction isOnActionKey(key: string): key is keyof OnActionsOptions {\n\treturn ['checked', 'value', 'name', 'disabled'].includes(key);\n}\n\n/**\n * Ajoute un listener sur l'instance qui active l'évènement\n * @param event Evènement qui est initialisé\n * @param instance Elément qui contient l'évènement\n */\nfunction onStateChangeInitializer(\n\tevent: OnChangeEvent,\n\tinstance: HTMLBnumRadio,\n) {\n\tinstance.addEventListener('bnum-radio:change', (e: Event) =>\n\t\tevent.call(e as BnumRadioCheckedChangeEvent),\n\t);\n}\n\n//#endregion Utilities\n\n//#region Internals Types\n\n/**\n * Paramètres passés à un callback d'action.\n *\n * @remarks\n * Utilisé pour transmettre le nom et la valeur d'un attribut lors d'une mise à jour.\n */\ntype OnActionParam = {\n\t/** Le nom de l'attribut concerné */\n\tname: string;\n\t/** La valeur de l'attribut (peut être null) */\n\tval: Nullable<string>;\n};\n\n/**\n * Signature d'un callback d'action.\n *\n * @param option - Les paramètres de l'action\n * @returns Les paramètres modifiés après traitement\n *\n * @remarks\n * Permet d'intercepter et de modifier les paramètres avant qu'ils ne soient appliqués.\n */\ntype OnActionCallback = (option: OnActionParam) => OnActionParam;\n\n/**\n * Options de callbacks pour les différentes actions possibles.\n *\n * @remarks\n * Chaque propriété correspond à un attribut qui peut être intercepté lors d'une mise à jour.\n */\ntype OnActionsOptions = {\n\t/** Callback exécuté lors de la modification de l'attribut 'checked' */\n\tchecked?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'value' */\n\tvalue?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'name' */\n\tname?: OnActionCallback;\n\t/** Callback exécuté lors de la modification de l'attribut 'disabled' */\n\tdisabled?: OnActionCallback;\n};\n\n/**\n * Détails additionnels pour l'événement de changement de l'état coché.\n */\ntype CheckedChangeEventDetails = {\n\t/** L'événement natif sous-jacent */\n\tinner: Event;\n\t/** Indique si l'événement peut se propager */\n\tbubbles: boolean;\n\t/** Indique si l'événement peut être annulé */\n\tcancelable: boolean;\n};\n\n/**\n * Options de construction pour l'événement de changement d'état coché du radio.\n *\n * @remarks\n * Spécialisation du type générique {@link CheckedChangeEventConstructorOption} pour le composant radio.\n */\ntype BnumRadioCheckedChangeEventConstructorOption =\n\tCheckedChangeEventConstructorOption<\n\t\tstring,\n\t\tCheckedChangeEventDetails,\n\t\tHTMLBnumRadio\n\t>;\n\n/**\n * Événement personnalisé déclenché lors du changement d'état d'un bouton radio.\n *\n * @remarks\n * Cet événement encapsule les informations sur le changement d'état (coché/décoché)\n * d'un élément radio personnalisé.\n */\nexport class BnumRadioCheckedChangeEvent extends CheckedChangeEvent<\n\tstring,\n\tCheckedChangeEventDetails,\n\tHTMLBnumRadio\n> {}\n\n/**\n * Interface définissant les références aux éléments UI du composant radio.\n *\n * @remarks\n * Utilisé par le décorateur {@link UI} pour injecter les références typées\n * aux éléments du Shadow DOM. Ces références permettent d'interagir avec\n * l'input natif et les slots de contenu.\n */\ntype BnumRadioUi = {\n\t/** L'élément input radio natif */\n\tinput: HTMLInputElement;\n\t/** Le slot contenant la légende principale du radio */\n\tslotLegend: HTMLSlotElement;\n\t/** Le slot contenant l'indice/aide du radio */\n\tslotHint: HTMLSlotElement;\n};\n\ntype OnChangeCallback = (ev: BnumRadioCheckedChangeEvent) => void;\ntype OnChangeEvent = JsEvent<OnChangeCallback>;\n//#endregion Internals Types\n\n//#region Global Constants\n\n/**\n * Identifiant de l'élément input radio interne.\n * @internal\n */\nconst ID_INPUT = 'radio';\n\n/**\n * Nom de l'attribut 'checked'.\n * @internal\n */\nconst ATTRIBUTE_CHECKED = 'checked';\n\n/**\n * Nom de l'attribut 'value'.\n * @internal\n */\nconst ATTRIBUTE_VALUE = 'value';\n\n/**\n * Nom de l'événement 'change'.\n * @internal\n */\nconst EVENT_CHANGE = 'bnum-radio:change';\n\n/**\n * Liste des attributs synchronisés entre l'élément hôte et l'input interne.\n *\n * @remarks\n * Ces attributs sont automatiquement propagés de l'élément personnalisé vers l'input natif.\n * @internal\n */\nconst SYNCED_ATTRIBUTES = ['name', 'checked', 'value', 'disabled'];\n\n/**\n * Template HTML du composant radio.\n *\n * @remarks\n * Structure DOM utilisée pour créer le shadow DOM du composant.\n * Comprend un input radio natif et un label avec des slots pour le contenu et l'indice.\n * @internal\n */\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<input type=\"radio\" id={ID_INPUT} class=\"radio\" />\n\t\t<label part=\"label\" for=\"radio\" class=\"radio__label\">\n\t\t\t<span class=\"radio__label--legend\">\n\t\t\t\t<slot id=\"legend\"></slot>\n\t\t\t</span>\n\t\t\t<span class=\"radio--hint label-container--hint\">\n\t\t\t\t<slot id=\"hint\" name=\"hint\"></slot>\n\t\t\t</span>\n\t\t</label>\n\t</HTMLBnumFragment>\n);\n\n//#endregion Global Constants\n\n/**\n * Composant personnalisé représentant un bouton radio avec support de formulaire.\n *\n * @remarks\n * Ce composant Web étend {@link BnumElementInternal} et fournit un bouton radio personnalisé\n * avec support complet des formulaires HTML, gestion d'état et accessibilité.\n *\n * Le composant utilise le Shadow DOM pour encapsuler son style et sa structure,\n * et synchronise automatiquement ses attributs avec un input radio natif sous-jacent.\n *\n * @example\n * Structure simple :\n * ```html\n * <bnum-radio name=\"rotomeca\" value=\"valeur 1\">\n *   Mon élément\n * </bnum-radio>\n * ```\n *\n * @example\n * Structure avec indice :\n * ```html\n * <bnum-radio name=\"rotomeca\" value=\"valeur 2\">\n *   Mon élément\n *   <span slot=\"hint\">Indice !</span>\n * </bnum-radio>\n * ```\n *\n * @fires BnumRadioCheckedChangeEvent - Déclenché lorsque l'état coché du radio change\n *\n * @public\n *\n * @structure Structure simple\n * <bnum-radio name=\"rotomeca\" value=\"valeur 1\">\n *   Mon élément\n * </bnum-radio>\n *\n * @structure Structure avec indice\n * <bnum-radio name=\"rotomeca\" value=\"valeur 2\">\n *   Mon élément\n *   <span slot=\"hint\">Indice !</span>\n * </bnum-radio>\n *\n * @structure Disabled\n * <bnum-radio name=\"radio\" value=\"valeur x\" data-legend=\"Mon élément\" data-hint=\"Indice !\" checked disabled></bnum-radio>\n *\n * @slot (default) - Légende de l'élément\n * @slot hint - Aide supplémentaire dans la légende\n *\n * @event {CustomEvent<{ inner: BnumRadioCheckedChangeEvent }>} bnum-radio:change - Lorsque l'élément change d'état\n *\n * @attr {string} value - Valeur de l'élément\n * @attr {string} name - Nom de l'élément, permet de gérer les interactions des radio ayant le même nom\n * @attr {'disabled' | '' | undefined} (optional) disabled - Désactive l'élément\n * @attr {'' | undefined} (optional) checked - Si l'élément est actif ou non\n * @attr {string | undefined} (optional) data-legend - Label de l'élément. Est écraser si un slot est défini.\n * @attr {string | undefined} (optional) data-hint - Aide supplémentaire pour le label. Est écraser si un slot est défini.\n *\n * @cssvar {#000091} --bnum-radio-color - Couleur du radio\n * @cssvar {1rem} --bnum-radio-font-size - Taille du label principal\n * @cssvar {1px} --bnum-radio-border-size - Taille du countour du radio\n * @cssvar {50%} --bnum-radio-border-radius - \"border-radius\" de l'élément\n */\n@Define({\n\ttemplate: TEMPLATE,\n\ttag: TAG_RADIO,\n\tstyles: [INPUT_BASE_STYLE, style],\n})\nexport class HTMLBnumRadio extends BnumElementInternal {\n\t//#region Constants\n\t/**\n\t * Indique que ce composant peut être associé à un formulaire.\n\t *\n\t * @remarks\n\t * Permet au composant de participer au cycle de vie des formulaires HTML,\n\t * notamment la soumission et la validation.\n\t *\n\t * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/ElementInternals#instance_properties | ElementInternals}\n\t */\n\tstatic readonly formAssociated = true;\n\t//#endregion Constants\n\n\t//#region Getters/Setters\n\t/**\n\t * Références aux éléments du DOM interne.\n\t *\n\t * @remarks\n\t * Injecté automatiquement par le décorateur {@link UI}.\n\t * Fournit un accès typé à l'input radio natif et aux slots de contenu.\n\t *\n\t * @internal\n\t */\n\t@UI({\n\t\tinput: `#${ID_INPUT}`,\n\t\tslotLegend: '#legend',\n\t\tslotHint: '#hint',\n\t})\n\taccessor #_ui!: BnumRadioUi;\n\n\t/**\n\t * Le nom du groupe de boutons radio.\n\t *\n\t * @remarks\n\t * Les boutons radio partageant le même nom forment un groupe mutuellement exclusif.\n\t * Un seul bouton peut être sélectionné à la fois dans un groupe.\n\t *\n\t * @defaultValue Chaîne vide\n\t */\n\t@Attr() accessor name: string = EMPTY_STRING;\n\n\t/**\n\t * La valeur associée au bouton radio.\n\t *\n\t * @remarks\n\t * Cette valeur est envoyée lors de la soumission du formulaire si le radio est coché.\n\t *\n\t * @defaultValue Chaîne vide\n\t */\n\t@Attr() accessor value: string = EMPTY_STRING;\n\n\t/**\n\t * Indique si le bouton radio est coché.\n\t *\n\t * @remarks\n\t * Contrôle l'état de sélection du bouton radio.\n\t *\n\t * @defaultValue `true`\n\t */\n\t@Attr() accessor checked: boolean = true;\n\n\t/**\n\t * Indique si le bouton radio est désactivé.\n\t *\n\t * @remarks\n\t * Un bouton radio désactivé ne peut pas être sélectionné ni recevoir le focus.\n\t *\n\t * @defaultValue `false`\n\t */\n\t@Attr() accessor disabled: boolean = false;\n\n\t/**\n\t * Texte de la légende principale du bouton radio.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel qui sera affiché comme label principal du radio.\n\t * Cette propriété est en lecture seule (pas de setter) et est initialisée\n\t * lors de la construction du composant.\n\t *\n\t * @defaultValue Chaîne vide\n\t * @internal\n\t */\n\t@Data({ setter: false }) accessor #_legend: string = EMPTY_STRING;\n\n\t/**\n\t * Appelé lorsque l'état de l'élément change\n\t */\n\t@Listener(onStateChangeInitializer) accessor onstatechange!: OnChangeEvent;\n\n\t/**\n\t * Texte de l'indice/aide du bouton radio.\n\t *\n\t * @remarks\n\t * Stocke le contenu textuel qui sera affiché comme information complémentaire.\n\t * Cette propriété est en lecture seule (pas de setter) et est initialisée\n\t * lors de la construction du composant.\n\t *\n\t * @defaultValue Chaîne vide\n\t * @internal\n\t */\n\t@Data({ setter: false }) accessor #_hint: string = EMPTY_STRING;\n\n\t/**\n\t * Récupère l'input radio interne.\n\t *\n\t * @remarks\n\t * Permet d'accéder à l'input radio natif pour des opérations spécifiques.\n\t *\n\t * @returns L'input radio interne\n\t */\n\tget internalCheckbox(): HTMLInputElement {\n\t\treturn this.#_ui.input;\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\t/**\n\t * Constructeur du composant HTMLBnumRadio.\n\t *\n\t * @remarks\n\t * Initialise l'instance du composant en appelant le constructeur parent.\n\t */\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Attache un Shadow DOM au composant.\n\t *\n\t * @returns La racine du Shadow DOM créée\n\t *\n\t * @remarks\n\t * Configure le Shadow DOM en mode 'open' avec délégation du focus.\n\t * Cela permet au focus de se déplacer automatiquement vers l'input interne.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n\t\treturn this.attachShadow({ mode: 'open', delegatesFocus: true });\n\t}\n\n\t/**\n\t * Construit le DOM du composant après son attachement.\n\t *\n\t * @remarks\n\t * Configure le rôle ARIA, initialise les écouteurs d'événements,\n\t * initialise le contenu des slots et synchronise l'état initial avec les attributs.\n\t *\n\t * @protected\n\t * @override\n\t */\n\t@SetAttr('role', 'radio')\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_setupListeners().#_init().#_sync();\n\t}\n\n\t/**\n\t * Gère la mise à jour d'un attribut observé.\n\t *\n\t * @param name - Le nom de l'attribut modifié\n\t * @param oldVal - L'ancienne valeur de l'attribut\n\t * @param newVal - La nouvelle valeur de l'attribut\n\t *\n\t * @remarks\n\t * Cette méthode est appelée automatiquement lorsqu'un attribut observé change.\n\t * Elle détermine si une mise à jour est nécessaire et la déclenche si besoin.\n\t *\n\t * Pour l'attribut 'checked', compare l'état booléen plutôt que la chaîne.\n\t * Pour l'attribut 'value', compare avec la valeur de l'input interne.\n\t *\n\t * @protected\n\t * @override\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tlet needUpdate = oldVal !== newVal;\n\n\t\tif (name === ATTRIBUTE_CHECKED) {\n\t\t\tconst isChecked = this.#_ui.input.checked;\n\t\t\tconst willBeChecked = newVal !== null && newVal !== 'false';\n\t\t\tneedUpdate = isChecked !== willBeChecked;\n\t\t} else if (name === ATTRIBUTE_VALUE) {\n\t\t\tneedUpdate = this.#_ui.input.value !== newVal;\n\t\t}\n\n\t\tif (needUpdate) {\n\t\t\tthis.#_update(name, newVal, {\n\t\t\t\tchecked: this.#_onUpdateChecked.bind(this),\n\t\t\t}).tapError(error =>\n\t\t\t\tLog.error('HTMLBnumRadio/_p_update', error.message, error),\n\t\t\t);\n\t\t}\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Public methods\n\t/**\n\t * Update l'état du radio et déclenche l'événement bnum-radio:change\n\t * @param checked - L'état à appliquer\n\t */\n\tupdateCheckAndFire(checked: boolean) {\n\t\tthis.internalCheckbox.checked = checked;\n\t\tthis.#_fireChange(new Event('change', { bubbles: true, composed: true }));\n\t}\n\t//#endregion Public methods\n\n\t//#region Private methods\n\t/**\n\t * Initialise le contenu des slots avec les valeurs de légende et d'indice.\n\t *\n\t * @returns L'instance courante pour chaînage de méthodes\n\t *\n\t * @remarks\n\t * Cette méthode remplit les slots du Shadow DOM avec le contenu textuel\n\t * stocké dans les propriétés privées `#_legend` et `#_hint`.\n\t * Elle n'affecte les slots que si les valeurs correspondantes sont définies.\n\t *\n\t * @private\n\t */\n\t#_init() {\n\t\tconst legend = this.#_legend;\n\t\tconst hint = this.#_hint;\n\n\t\tconst hasLegend = !!legend;\n\t\tconst hasHint = !!hint;\n\n\t\tif (hasLegend) this.#_ui.slotLegend.innerText = legend;\n\n\t\tif (hasHint) this.#_ui.slotHint.innerText = hint;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Callback exécuté lors de la mise à jour de l'attribut 'checked'.\n\t *\n\t * @param options - Les paramètres de l'action contenant le nom et la valeur\n\t * @returns Les paramètres modifiés après traitement\n\t *\n\t * @remarks\n\t * Met à jour l'état coché de l'input interne, l'attribut ARIA et la valeur du formulaire.\n\t * Si le radio n'est pas coché, la valeur est définie à null pour le formulaire.\n\t *\n\t * @private\n\t */\n\t#_onUpdateChecked(options: OnActionParam) {\n\t\tconst { val: newVal } = options;\n\t\tconst isChecked = !(isNullOrUndefined(newVal) || newVal === 'false');\n\t\tconst input = this.#_ui.input;\n\n\t\tif (input.checked !== isChecked) {\n\t\t\tinput.checked = isChecked;\n\t\t}\n\n\t\tthis._p_internal.ariaChecked = String(isChecked);\n\n\t\tthis.#_setFormValue(isChecked ? this.value : null);\n\n\t\tif (!isChecked) options.val = null;\n\n\t\treturn options;\n\t}\n\n\t/**\n\t * Met à jour un attribut de l'input interne avec gestion des callbacks.\n\t *\n\t * @param name - Le nom de l'attribut à mettre à jour\n\t * @param newVal - La nouvelle valeur de l'attribut\n\t * @param onactions - Callbacks optionnels à exécuter avant la mise à jour\n\t * @returns Un {@link Result} indiquant le succès ou l'échec de l'opération\n\t *\n\t * @remarks\n\t * Si un callback est défini pour l'attribut concerné, il est exécuté avant la mise à jour.\n\t * Le callback peut modifier le nom et la valeur avant leur application.\n\t *\n\t * Si la nouvelle valeur est null ou undefined, l'attribut est supprimé de l'input.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_update(\n\t\tname: string,\n\t\tnewVal: Nullable<string>,\n\t\tonactions?: OnActionsOptions,\n\t): Result<void> {\n\t\tif (onactions && isOnActionKey(name)) {\n\t\t\tconst callback = onactions[name as keyof OnActionsOptions];\n\n\t\t\tif (callback) {\n\t\t\t\tconst plugin = callback({\n\t\t\t\t\tname,\n\t\t\t\t\tval: newVal,\n\t\t\t\t});\n\n\t\t\t\tif (plugin) {\n\t\t\t\t\tname = plugin.name;\n\t\t\t\t\tnewVal = plugin.val;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (isNullOrUndefined(newVal)) this.#_ui.input.removeAttribute(name);\n\t\telse this.#_ui.input.setAttribute(name, newVal!);\n\n\t\treturn Result.Ok();\n\t}\n\n\t/**\n\t * Configure l'écouteur d'événement pour les changements de l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Écoute l'événement 'change' de l'input natif et déclenche l'événement personnalisé.\n\t *\n\t * @private\n\t */\n\t#_handleInnerChange() {\n\t\tthis.#_ui.input.addEventListener('change', ev => {\n\t\t\tthis.#_fireChange(ev);\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Déclenche l'événement personnalisé de changement d'état.\n\t *\n\t * @param ev - L'événement natif ayant déclenché le changement\n\t * @returns Les options de construction de l'événement personnalisé\n\t *\n\t * @remarks\n\t * Stoppe la propagation de l'événement natif, met à jour l'état interne,\n\t * puis construit et déclenche un {@link BnumRadioCheckedChangeEvent}.\n\t *\n\t * Le décorateur {@link CustomFire} gère automatiquement la création et le dispatch\n\t * de l'événement à partir des options retournées.\n\t *\n\t * @fires BnumRadioCheckedChangeEvent\n\t * @private\n\t */\n\t@CustomFire(BnumRadioCheckedChangeEvent)\n\t#_fireChange(ev: Event) {\n\t\tev.stopPropagation();\n\t\tthis.#_updateInternal();\n\t\tconst details: CheckedChangeEventDetails = {\n\t\t\tinner: ev,\n\t\t\tbubbles: true,\n\t\t\tcancelable: true,\n\t\t};\n\t\tconst options: BnumRadioCheckedChangeEventConstructorOption = {\n\t\t\tvalue: this.value,\n\t\t\tchecked: this.checked,\n\t\t\tname: this.name,\n\t\t\tcaller: this,\n\t\t\tdetails,\n\t\t};\n\t\treturn options;\n\t}\n\n\t/**\n\t * Met à jour l'état interne du composant à partir de l'input natif.\n\t *\n\t * @remarks\n\t * Synchronise les propriétés `checked` et `value` du composant\n\t * avec celles de l'input interne, et met à jour l'attribut ARIA correspondant.\n\t *\n\t * @private\n\t */\n\t#_updateInternal() {\n\t\tconst input = this.#_ui.input;\n\t\tthis.checked = !!input.checked;\n\t\tthis._p_internal.ariaChecked = this.checked as unknown as string;\n\t\tthis.value = input.value;\n\t}\n\n\t/**\n\t * Configure tous les écouteurs d'événements du composant.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Actuellement configure uniquement l'écouteur de changement de l'input interne.\n\t *\n\t * @private\n\t */\n\t#_setupListeners() {\n\t\tthis.#_handleInnerChange();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Synchronise les attributs entre l'élément hôte et l'input interne.\n\t *\n\t * @returns L'instance courante pour chaînage\n\t *\n\t * @remarks\n\t * Parcourt tous les {@link SYNCED_ATTRIBUTES} et applique leurs valeurs à l'input.\n\t *\n\t * Cas particulier : si l'attribut 'checked' n'est pas présent mais que la propriété\n\t * `checked` est à `true`, l'attribut est défini explicitement.\n\t *\n\t * @private\n\t */\n\t#_sync() {\n\t\tfor (const attr of SYNCED_ATTRIBUTES) {\n\t\t\tif (this.hasAttribute(attr)) {\n\t\t\t\tthis._p_update(attr, null, this.getAttribute(attr));\n\t\t\t} else {\n\t\t\t\tif (attr === ATTRIBUTE_CHECKED && this.checked) {\n\t\t\t\t\tthis._p_update(ATTRIBUTE_CHECKED, null, 'true');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit la valeur du composant dans le formulaire parent.\n\t *\n\t * @param value - La valeur à définir (null si le radio n'est pas coché)\n\t * @returns Un {@link Result} indiquant le succès de l'opération\n\t *\n\t * @remarks\n\t * Utilise l'API ElementInternals pour intégrer le composant dans le système de formulaires.\n\t * La valeur est null lorsque le radio n'est pas coché, et correspond à la propriété\n\t * `value` lorsqu'il est coché.\n\t *\n\t * @private\n\t */\n\t@Risky()\n\t#_setFormValue(value: Nullable<string>): Result<void> {\n\t\tthis._p_internal.setFormValue(value);\n\t\treturn Result.Ok();\n\t}\n\t//#endregion Private methods\n\n\t//#region Static\n\t/**\n\t * Retourne la liste des attributs observés par le composant.\n\t *\n\t * @returns Un tableau contenant tous les noms d'attributs observés\n\t *\n\t * @remarks\n\t * Combine les attributs observés du parent avec les {@link SYNCED_ATTRIBUTES} spécifiques\n\t * à ce composant. Les changements de ces attributs déclencheront {@link _p_update}.\n\t *\n\t * @protected\n\t * @static\n\t * @override\n\t * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n\t * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n\t */\n\t@NonStd('Deprecated')\n\tprotected static _p_observedAttributes(): string[] {\n\t\treturn [...super._p_observedAttributes(), ...SYNCED_ATTRIBUTES];\n\t}\n\n\t/**\n\t * Retourne le nom de l'événement 'change'.\n\t *\n\t * @returns Le nom de l'événement 'change'\n\t */\n\tpublic static get EVENT_CHANGE(): typeof EVENT_CHANGE {\n\t\treturn EVENT_CHANGE;\n\t}\n\t//#endregion Static\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_SECONDARY } from '../../../core/utils/constants/tags';\nimport { EButtonType, HTMLBnumButton } from '../button/bnum-button';\n\n/**\n * Bouton Bnum de type \"Secondary\".\n *\n * @structure Cas standard\n * <bnum-secondary-button>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton avec icône\n * <bnum-secondary-button data-icon=\"home\">Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton avec une icône à gauche\n * <bnum-secondary-button data-icon=\"home\" data-icon-pos=\"left\">Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton en état de chargement\n * <bnum-secondary-button loading>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton arrondi\n * <bnum-secondary-button rounded>Texte du bouton</bnum-secondary-button>\n *\n * @structure Bouton cachant le texte sur les petits layouts\n * <bnum-secondary-button data-hide=\"small\" data-icon=\"menu\">Menu</bnum-secondary-button>\n */\n@Define()\nexport class HTMLBnumSecondaryButton extends HTMLBnumButton {\n  constructor() {\n    super();\n    const fromAttribute = false;\n    this.data(\n      HTMLBnumButton.ATTR_VARIATION,\n      EButtonType.SECONDARY,\n      fromAttribute,\n    );\n  }\n  static get TAG(): string {\n    return TAG_SECONDARY;\n  }\n}\n","import { Scheduler } from 'core/utils/Scheduler';\nimport { Optional } from 'core/utils/types';\n\nconst schedulersKey = Symbol('schedulers');\n\n/**\n * Décorateur permettant de planifier l'exécution d'une méthode via un {@link Scheduler}.\n *\n * Ce décorateur modifie le comportement de la méthode cible pour qu'elle agisse comme un initialiseur de `Scheduler`.\n * La méthode originale ne sera appelée qu'une seule fois par instance de classe pour configurer le callback du `Scheduler`.\n * Les appels subséquents à la méthode décorée déclencheront la planification (`schedule`) sur l'instance de `Scheduler` mise en cache,\n * en passant le premier argument de l'appel comme valeur à planifier.\n *\n * Le `Scheduler` utilise généralement `requestAnimationFrame` pour différer et regrouper l'exécution,\n * ce qui est utile pour des mises à jour d'interface ou des opérations coûteuses qui peuvent être regroupées.\n *\n * @returns Une fonction décoratrice de méthode.\n *\n * @example\n * ```typescript\n * class Composant {\n *   @Schedule()\n *   protected onUpdate(initValue: number) {\n *     // Cette méthode retourne le callback exécuté par le Scheduler.\n *     // Elle est appelée une seule fois à la première exécution.\n *     return (val: number | null) => {\n *       console.log('Valeur traitée :', val);\n *     };\n *   }\n *\n *   trigger() {\n *     this.onUpdate(1); // Initialise le scheduler et planifie 1\n *     this.onUpdate(2); // Planifie 2 (l'exécution réelle se fera plus tard avec la dernière valeur)\n *   }\n * }\n * ```\n */\nexport function Schedule() {\n\treturn function (target: Function, context: ClassMethodDecoratorContext) {\n\t\tconst sKey = Symbol(String(context.name));\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tconst caches = (this[schedulersKey] ??= new Map<\n\t\t\t\tsymbol,\n\t\t\t\tScheduler<any>\n\t\t\t>()) as Map<symbol, Scheduler<any>>;\n\t\t\tlet scheduler: Optional<Scheduler<any>>;\n\t\t\tif (caches.has(sKey)) scheduler = caches.get(sKey);\n\t\t\telse scheduler = new Scheduler(target.bind(this, ...args));\n\n\t\t\tif (scheduler) scheduler.schedule(args[0]);\n\t\t};\n\t};\n}\n","/**\n * Décorateur de classe.\n * Indique que ce composant doit déclencher une mise à jour complète (`_p_update`)\n * à chaque modification d'un attribut observé.\n *  Cela évite d'avoir à surcharger manuellement `_p_isUpdateForAllAttributes`.\n * @example\n * ```tsx\n * // imports ...\n *\n * @Define({ ... })\n * @UpdateAll()\n * export class MyComponent extends BnumElementInternal { ... }\n * ```\n */\nexport function UpdateAll() {\n  return function (target: Function, context: ClassDecoratorContext) {\n    if (context.kind !== 'class') {\n      throw new Error('@UpdateAll ne peut être utilisé que sur une classe.');\n    }\n\n    context.addInitializer(function () {\n      (this as any).__CONFIG_UPDATE_ALL__ = true;\n    });\n  };\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { EMPTY_STRING, isNullOrUndefined } from '@rotomeca/utils';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { Attr, Autobind, Data, Define, Fire } from 'core/decorators';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { Schedule } from 'core/decorators/schedule';\nimport { UI } from 'core/decorators/ui';\nimport { UpdateAll } from 'core/decorators/updateAll';\nimport Log from 'core/utils/Log';\nimport { Nullable } from 'core/utils/types';\nimport { INPUT_BASE_STYLE } from '../input/bnum-input';\nimport style from './bnum-select.less';\nimport { TAG_SELECT } from 'core/utils/constants/tags';\nimport { HTMLBnumIcon } from '../icon/bnum-icon';\n\n//#region Types\n/**\n * Interface pour la récupération des données Ui de `HTMLBnumSelect`\n */\nexport interface BnumSelectUi {\n  /**\n   * slot du label\n   */\n  slotLabel: HTMLSlotElement;\n  /**\n   * slot de l'indice\n   */\n  slotHint: HTMLSlotElement;\n  /**\n   * select interne\n   */\n  select: HTMLSelectElement;\n}\n\ntype Value = string | number | boolean;\n\n/**\n * Item qui sert à la création d'une option pour {@link HTMLBnumSelect.addOption}\n */\nexport type BnumSelectAddOptionObject = {\n  /**\n   * Valeur de l'option dans l'attribut `value`\n   */\n  value: Nullable<Value>;\n  /**\n   * Texte de l'option. Si {@link BnumSelectAddOptionObject.value} est null ou pas défini, ça sera la valeur de l'option.\n   */\n  text: string;\n  /**\n   * Si vrai, l'option sera ajouté avant les autres options.\n   */\n  prepend?: boolean;\n};\n\n//#endregon Types\n\n//#region Global Constants\nconst SYNCED_ATTRIBUTES = [\n  'autocomplete',\n  'autofocus',\n  'disabled',\n  'form',\n  'multiple',\n  'required',\n  'size',\n  'name',\n  'value',\n];\n\nconst TEMPLATE = (\n  <div class=\"bnum-select__container\">\n    <label\n      id=\"select-label\"\n      class=\"bnum-select__container__label label-container\"\n      for=\"select\"\n    >\n      <span class=\"bnum-select__container__label--legend label-container--label\">\n        <slot name=\"label\"></slot>\n      </span>\n      <span class=\"bnum-select__container__label--hint label-container--hint\">\n        <slot name=\"hint\"></slot>\n      </span>\n    </label>\n    <div class=\"select-container\">\n      <select\n        id=\"select\"\n        class=\"bnum-select__container__select input-like\"\n      ></select>\n      <HTMLBnumIcon data-icon=\"keyboard_arrow_down\" class=\"icon-arrow-down\" />\n    </div>\n  </div>\n);\n//#endregion Global Constants\n\n/**\n * @structure Defaut\n * <bnum-select>\n *   <span slot=\"label\">Un select</span>\n *   <option value=\"none\" selected disabled>Choisissez une option</option>\n *   <option value=\"a\">a</option>\n *   <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @structure Avec des optgroup\n * <bnum-select>\n *   <span slot=\"label\">Un select</span>\n *   <optgroup label=\"yolo\">\n *   <option value=\"none\" selected disabled>Choisissez une option</option>\n *   <option value=\"a\">a</option>\n *   <option value=\"b\">b</option>\n *   </optgroup>\n *   <optgroup label=\"swag\">\n *   <option value=\"c\">c</option>\n *   <option value=\"d\">d</option>\n *   <option value=\"e\">e</option>\n *   </optgroup>\n * </bnum-select>\n *\n * @structure Avec des data\n * <bnum-select data-legend=\"Legende data\" data-hint=\"Indice !\" data-default-value=\"none\" data-default-text=\"Choisissez un option\">\n * <option value=\"a\">a</option>\n * <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @structure Sans légendes\n * <bnum-select no-legend data-legend=\"Legende data\" data-hint=\"Indice !\" data-default-value=\"none\" data-default-text=\"Choisissez un option\">\n * <option value=\"a\">a</option>\n * <option value=\"b\">b</option>\n * </bnum-select>\n *\n * @slot label - Légende du select\n * @slot hint - Légende additionnel\n *\n * @attr {undefined | boolean} (optional) no-legend - Cache visuellement la légende. (Ne dispence pas d'en mettre une.)\n * @attr {undefined | string} (optional) name - Nom de l'élément\n * @attr {undefined | string} (optional) data-legend - Texte de la légende. Est écrasé si le slot est défini.\n * @attr {undefined | string} (optional) data-hint - Texte additionnel de la légende. Est écrasé si le slot est défini.\n * @attr {undefined | string} (optional) data-default-value - Génère une option par défaut avec cette valeur.\n * @attr {undefined | string} (optional) data-default-text - Génère une option par défaut avec ce texte.\n *\n * @event {CustomEvent<{innerEvent: Event, caller: HTMLBnumSelect}>} change - Lorsque le select change de valeur.\n */\n@Define({\n  tag: TAG_SELECT,\n  template: TEMPLATE,\n  styles: [INPUT_BASE_STYLE, style],\n})\n@UpdateAll()\nexport class HTMLBnumSelect extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Required to participate in HTMLFormElement\n   */\n  static readonly formAssociated = true;\n  //#endregion Constants\n\n  //#region Private fields\n  #_observer: Nullable<MutationObserver> = null;\n  #_initValue: Nullable<string> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /**\n   * Elements d'interface interne\n   */\n  @UI({\n    slotLabel: '#select-label slot[name=\"label\"]',\n    slotHint: '#select-label slot[name=\"hint\"]',\n    select: '#select',\n  })\n  accessor #_ui!: BnumSelectUi;\n\n  /**\n   * Récupère l'information du data-legend.\n   *\n   * @remark\n   * `data-legend` correspond à la légende affiché par défaut.\n   */\n  @Data({ setter: false }) accessor #_legend: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-hint.\n   *\n   * @remark\n   * `data-hint` correspond à l'indice affiché par défaut.\n   */\n  @Data({ setter: false }) accessor #_hint: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-default-value.\n   *\n   * @remark\n   * `data-default-value` génère un élément `<option value=\"${this.#_defaultValue}\" selected disabled>${this.#_defaultText}</option>`\n   */\n  @Data('default-value', { setter: false })\n  accessor #_defaultValue: Nullable<string> = null;\n  /**\n   * Récupère l'information du data-default-text.\n   *\n   * @remark\n   * `data-default-text` génère un élément `<option value=\"${this.#_defaultValue}\" selected disabled>${this.#_defaultText}</option>`\n   */\n  @Data('default-text', { setter: false })\n  accessor #_defaultText: Nullable<string> = null;\n\n  /**\n   * Nom de l'input\n   */\n  @Attr() accessor name: string = EMPTY_STRING;\n  /**\n   * Si l'attribut `no-legend` est actif, la légende ne s'affichera pas (seulement pour les lecteurs d'écrans).\n   */\n  @Attr('no-legend') accessor noLegend: boolean = true;\n\n  /**\n   * Valeur du select\n   */\n  get value() {\n    return this.#_ui.select.value;\n  }\n  set value(value: string) {\n    this.#_setFormValue(value);\n    this.#_ui.select.value = value;\n  }\n\n  /**\n   * Tout les options disponibles\n   */\n  get options(): ReadonlyArray<HTMLOptionElement> {\n    return Array.from((this.shadowRoot || this).querySelectorAll('option'));\n  }\n\n  /**\n   * Select dans le shadow-root\n   */\n  get select(): HTMLSelectElement {\n    return this.#_ui.select;\n  }\n\n  /**\n   * Récupère les options et optgroup du light-dom.\n   */\n  get #_lightOptions() {\n    return Array.from(\n      this.querySelectorAll(':scope > option, :scope > optgroup'),\n    );\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n    this.#_tryInitValue({ ignoreSelectedValue: true }).tapError((error) => {\n      Log.error(\n        'HTMLBnumSelectElement',\n        'Impossible d\\'initialiser la valeur par défaut !',\n        error,\n      );\n    });\n  }\n\n  /**\n   * Callback appelée lorsque le composant est ajouté au DOM.\n   *\n   * Déclenche le rendu du composant.\n   *\n   * @override Pour pouvoir ajouter un observer et observer le light-dom.\n   */\n  connectedCallback(): void {\n    super.connectedCallback();\n    (this.#_observer ??= new MutationObserver(this.#_obserse)).observe(this, {\n      childList: true,\n    });\n  }\n\n  /**\n   * On attache un shadow-dom custom pour pouvoir déléger le focus.\n   * @returns ShadowRoot ouvert avec le focus délégué.\n   */\n  protected _p_attachCustomShadow(): Nullable<ShadowRoot> {\n    return this.attachShadow({ mode: 'open', delegatesFocus: true });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_preload(): void {\n    this.#_setDefault();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_buildDOM(): void {\n    this.#_moveOptions();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_attach(): void {\n    this.#_tryInitValue().match({\n      Ok: () => {\n        this.#_setDataLegend().#_setDataHint().#_initListeners().#_sync();\n\n        if (!this.#_hasLegend) {\n          Log.warn('HTMLBnumSelect', 'Vous devez mettre un libellé !');\n        }\n      },\n      Err: (error) => {\n        Log.error(\n          'HTMLBnumSelect',\n          'Impossible d\\'initialiser la valeur du select !',\n          error,\n          this,\n        );\n      },\n    });\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_detach(): void {\n    this.#_observer?.disconnect?.();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_update(): void | Nullable<'break'> {\n    this.#_sync();\n  }\n  //#endregion Lifecycle\n\n  //#region Publics Methods\n\n  /**\n   * Ajoute un groupe d'option\n   * @param group Groupe à ajouter\n   * @returns Le groupe ajouté au shadow-dom\n   */\n  addOptGroup(group: HTMLOptGroupElement): HTMLOptGroupElement {\n    this.appendChild(group);\n    return group;\n  }\n\n  /**\n   * Ajoute une option dans le select\n   * @param option Element html à ajouter\n   * @param param1 Paramètres optionnels\n   * @returns Chaîne\n   */\n  addOption(\n    option: HTMLOptionElement,\n    { prepend }?: { prepend?: boolean },\n  ): this;\n  /**\n   * Ajoute une option dans le select à partir d'un objet\n   * @param item option à ajouter à partir d'un objet js.\n   * @returns Option créée\n   */\n  addOption(item: BnumSelectAddOptionObject): HTMLOptionElement;\n  /**\n   * Ajoute une option dans le select\n   * @param opt Option à ajouter\n   * @param param1\n   * @returns Chaîne ou option créée\n   */\n  addOption(\n    opt: HTMLOptionElement | BnumSelectAddOptionObject,\n    { prepend = false }: { prepend?: boolean } = {},\n  ): HTMLOptionElement | this {\n    let returnElement: HTMLOptionElement | this;\n    let option: HTMLOptionElement;\n\n    if (opt instanceof HTMLOptionElement) {\n      option = opt;\n      returnElement = this;\n    } else {\n      option = document.createElement('option');\n\n      if (opt.value !== null && opt.value !== undefined)\n        option.value = String(opt.value);\n\n      option.text = opt.text;\n      prepend = prepend || opt.prepend || false;\n      returnElement = option;\n    }\n\n    if (prepend) this.prepend(option);\n    else this.appendChild(option);\n\n    return returnElement;\n  }\n\n  // --- Formulaire --\n  /**\n   * Réinitialise la valeur du champ lors d'une remise à zéro du formulaire parent.\n   */\n  formResetCallback(): void {\n    this.value = this.#_defaultValue ?? EMPTY_STRING;\n  }\n\n  /**\n   * Active ou désactive le champ selon l'état du fieldset parent.\n   */\n  formDisabledCallback(disabled: boolean): void {\n    if (disabled) this.setAttribute('disabled', 'disabled');\n    this.#_sync();\n  }\n  //#endregion Publics Methods\n\n  //#region Private methods\n  #_initListeners() {\n    return this.#_onInnerSelect();\n  }\n\n  @Autobind\n  #_obserse(mutations: MutationRecord[]) {\n    const hasOptionMutation = mutations.some((m) =>\n      Array.from(m.addedNodes).some(\n        (n) =>\n          n instanceof HTMLOptionElement || n instanceof HTMLOptGroupElement,\n      ),\n    );\n\n    if (hasOptionMutation) {\n      this.#_scheduleMoveOptions();\n    }\n  }\n\n  @Schedule()\n  #_scheduleMoveOptions() {\n    this.#_moveOptions();\n  }\n\n  #_moveOptions() {\n    this.#_ui.select.append(...this.#_lightOptions);\n    return this;\n  }\n\n  #_setDataLegend() {\n    return this.#_setLabelPart(this.#_legend, this.#_ui.slotLabel);\n  }\n\n  #_setDataHint() {\n    return this.#_setLabelPart(this.#_hint, this.#_ui.slotHint);\n  }\n\n  #_setLabelPart(what: Nullable<string>, slot: HTMLSlotElement) {\n    if (what) slot.appendChild(this._p_createTextNode(what));\n    return this;\n  }\n\n  #_hasLegend() {\n    const hasLabel =\n      this.querySelectorAll('[slot=\"label\"]').length > 0 || this.#_legend;\n    const hasHint =\n      this.querySelectorAll('[slot=\"hint\"]').length > 0 || this.#_hint;\n    return hasLabel || hasHint;\n  }\n\n  #_setDefault() {\n    const value = this.#_defaultValue;\n    const text = this.#_defaultText;\n\n    if (value || text) {\n      const effectiveValue = value || text;\n      const effectiveText = text || value;\n      const createdOption = this.addOption({\n        value: effectiveValue,\n        text: effectiveText!,\n        prepend: true,\n      });\n      createdOption.setAttribute('selected', 'true');\n      createdOption.setAttribute('disabled', 'disabled');\n    }\n\n    return this;\n  }\n\n  #_sync() {\n    const select = this.#_ui.select;\n    for (const attr of SYNCED_ATTRIBUTES) {\n      if (this.hasAttribute(attr))\n        select.setAttribute(attr, this.getAttribute(attr)!);\n      else if (select.hasAttribute(attr)) select.removeAttribute(attr);\n    }\n  }\n\n  @Risky()\n  #_tryInitValue({\n    ignoreSelectedValue = false,\n  }: { ignoreSelectedValue?: boolean } = {}): Result<void> {\n    if (isNullOrUndefined(this.#_initValue))\n      this.#_initValue =\n        this.#_defaultValue ?? (ignoreSelectedValue ? null : this.value);\n\n    return Result.Ok();\n  }\n\n  @Risky()\n  #_setFormValue(value: string): Result<void> {\n    this._p_internal.setFormValue(value);\n    return Result.Ok();\n  }\n\n  @Autobind\n  @Fire('change')\n  #_fireSelect(event: Event) {\n    return { innerEvent: event, caller: this };\n  }\n\n  #_onInnerSelect() {\n    this.#_ui.select.addEventListener('change', this.#_fireSelect);\n    return this;\n  }\n  //#endregion Private methods\n\n  //#region Static\n  /**\n   * Méthode interne pour définir les attributs observés.\n   * @returns Attributs à observer\n   * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n   * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n   */\n  @NonStd('Deprecated')\n  protected static _p_observedAttributes(): string[] {\n    return [...super._p_observedAttributes(), ...SYNCED_ATTRIBUTES];\n  }\n  //#endregion Static\n}\n","import JsEvent from '@rotomeca/event';\nimport { TAG_CARD_ITEM } from '../../../core/utils/constants/tags';\nimport BnumElementInternal from '../../bnum-element-states';\nimport style from './bnum-card-item.less';\nimport { HTMLBnumButton } from '../../atoms/button/bnum-button';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable } from '../../../core/utils/types';\nimport { Define, Self } from '../../../core/decorators';\nimport { NonStd } from '../../../core/decorators/nonstd';\nimport { CustomDom } from '../../bnum-element';\n\nconst SHEET = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n/**\n * Représente un item d'une carte `<bnum-card>` qui peut être mis dans un `bnum-card-list`.\n *\n * L'élément est considéré comme un `li` d'une liste pour des raisons d'accessibilité.\n *\n * @structure Item de carte\n * <bnum-card-item><p>Contenu de l'item</p></bnum-card-item>\n *\n * @structure Désactivé\n * <bnum-card-item disabled><p>Contenu de l'item</p></bnum-card-item>\n *\n * @state disabled - Actif quand l'item est désactivé\n *\n * @slot (default) - Contenu de l'item\n *\n * @cssvar {100%} --bnum-card-item-width-percent - Largeur en pourcentage du composant\n * @cssvar {30px} --bnum-card-item-width-modifier - Valeur soustraite à la largeur\n * @cssvar {var(--bnum-color-surface, #f6f6f7)} --bnum-card-item-background-color - Couleur de fond normale\n * @cssvar {var(--bnum-color-surface-hover, #eaeaea)} --bnum-card-item-background-color-hover - Couleur de fond au survol\n * @cssvar {var(--bnum-color-surface-active, #dfdfdf)} --bnum-card-item-background-color-active - Couleur de fond à l'état actif\n * @cssvar {pointer} --bnum-card-item-cursor - Type de curseur\n * @cssvar {15px} --bnum-card-item-padding - Espacement interne\n * @cssvar {block} --bnum-card-item-display - Type d'affichage\n */\n@Define()\n@NonStd('Ne respecte pas la classe template')\nexport class HTMLBnumCardItem extends BnumElementInternal {\n  /**\n   * Template de base pour les enfants du composant.\n   *\n   * En `static readonly` cette fois pour éviter les problèmes de scope.\n   */\n  static readonly BASE_TEMPLATE = this.CreateChildTemplate(EMPTY_STRING);\n  /**\n   * Attribut désactivé\n   * @attr {boolean | 'disabled' | undefined} (optional) disabled - Indique si l'item est désactivé\n   */\n  static readonly ATTRIBUTE_DISABLED = 'disabled';\n  /**\n   * État désactivé\n   */\n  static readonly STATE_DISABLED = 'disabled';\n  /**\n   * Rôle du composant\n   */\n  static readonly ROLE = 'listitem';\n  /**\n   * Événement click\n   * @event click\n   * @detail MouseEvent\n   */\n  static readonly CLICK = 'click';\n\n  /**\n   * Événement déclenché lors du clic sur l'item.\n   * Permet d'attacher des gestionnaires personnalisés au clic.\n   */\n  #_onitemclicked: Nullable<JsEvent<(e: MouseEvent) => void>> = null;\n  protected _p_slot: HTMLSlotElement | null = null;\n\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   * Utile pour détecter les changements d'attributs et mettre à jour l'état du composant.\n   * @returns {string[]} Liste des attributs observés.\n   */\n  static _p_observedAttributes(): string[] {\n    return [this.ATTRIBUTE_DISABLED];\n  }\n\n  /** Référence à la classe HTMLBnumCardItem */\n  @Self _!: typeof HTMLBnumCardItem;\n\n  /**\n   * Événement déclenché lors du clic sur l'item.\n   * Permet d'attacher des gestionnaires personnalisés au clic.\n   */\n  get onitemclicked(): JsEvent<(e: MouseEvent) => void> {\n    this.#_onitemclicked ??= new JsEvent<(e: MouseEvent) => void>();\n\n    return this.#_onitemclicked;\n  }\n\n  /**\n   * Constructeur du composant.\n   * Initialise l'événement personnalisé et attache le gestionnaire de clic.\n   */\n  constructor() {\n    super();\n    this.addEventListener(this._.CLICK, (e: MouseEvent) => {\n      if (this.onitemclicked.haveEvents()) this.onitemclicked.call(e);\n    });\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return this._.BASE_TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   * Ajoute le slot pour le contenu et configure les attributs nécessaires.\n   * @param container ShadowRoot ou HTMLElement qui contient le DOM du composant.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    this._p_slot = container.queryId('defaultslot');\n  }\n\n  protected _p_attach(): void {\n    super._p_attach();\n\n    HTMLBnumButton.ToButton(this)\n      .attr('role', this._.ROLE)\n      ._p_update(\n        this._.ATTRIBUTE_DISABLED,\n        null,\n        this.attr(this._.ATTRIBUTE_DISABLED),\n      );\n  }\n\n  /**\n   * Met à jour l'état du composant en fonction des changements d'attributs.\n   * Gère l'état désactivé et l'attribut aria-disabled.\n   * @param name Nom de l'attribut modifié.\n   * @param oldVal Ancienne valeur de l'attribut.\n   * @param newVal Nouvelle valeur de l'attribut.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    this._p_render();\n  }\n\n  protected _p_render() {\n    this._p_clearStates();\n\n    if (this.hasAttribute('disabled')) {\n      this.setAttribute('aria-disabled', 'true');\n      this._p_addState(this._.STATE_DISABLED);\n    } else this.removeAttribute('aria-disabled');\n  }\n\n  protected _p_isUpdateForAllAttributes(): boolean {\n    return true;\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  static CreateChildTemplate(\n    childTemplate: string,\n    {\n      defaultSlot = true,\n      slotName = EMPTY_STRING,\n    }: { defaultSlot?: boolean; slotName?: string } = {},\n  ): HTMLTemplateElement {\n    const template = document.createElement('template');\n    template.innerHTML = `${defaultSlot ? `<slot id=\"defaultslot\" ${slotName ? `name=\"${slotName}\"` : ''}></slot>` : EMPTY_STRING}${childTemplate}`;\n    return template;\n  }\n\n  /**\n   * Retourne le tag du composant.\n   * @returns {string} Tag du composant.\n   */\n  static get TAG(): string {\n    return TAG_CARD_ITEM;\n  }\n}\n\nHTMLBnumCardItem.TryDefine();\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { JsCircularEvent } from '@rotomeca/event';\nimport { HTMLBnumDate } from '../../atoms/date/bnum-date';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { Nullable } from '../../../core/utils/types';\nimport { CapitalizeLine } from '@rotomeca/utils';\nimport { TAG_CARD_ITEM_AGENDA } from '../../../core/utils/constants/tags';\nimport style from './bnum-card-item-agenda.less';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { BnumDateUtils } from '../../../core/utils/BnumDateUtils';\n\nconst SHEET = HTMLBnumCardItem.ConstructCSSStyleSheet(style);\n\n/**\n * Type de callback pour la définition de l'action au démarrage.\n * Permet de personnaliser l'action affichée dans la carte agenda.\n */\nexport declare type OnStartDefineActionCallback = (param: {\n  location: string;\n  action: HTMLElement | null | undefined;\n}) => {\n  location: string;\n  action: HTMLElement | null | undefined;\n};\n\n/**\n * Type pour la création d'une action d'événement.\n */\nexport declare type EventCreationAction =\n  | Nullable<{ element: HTMLElement; callback: () => void }>\n  | Nullable<OnStartDefineActionCallback>;\n\n/**\n * Options pour la création d'une instance HTMLBnumCardItemAgenda.\n */\nexport declare type CreateConstructorOptions = {\n  allDay?: boolean;\n  title?: Nullable<string>;\n  location?: Nullable<string>;\n  action?: Nullable<EventCreationAction>;\n  isPrivate?: Nullable<boolean>;\n  mode?: Nullable<string>;\n};\n\n/**\n * Options pour la création d'une instance HTMLBnumCardItemAgenda à partir d'un événement.\n */\nexport declare type FromEventConstructorOptions = {\n  startDateSelector?: Nullable<(agendaEvent: any) => Date>;\n  endDateSelector?: Nullable<(agendaEvent: any) => Date>;\n  allDaySelector?: Nullable<(agendaEvent: any) => boolean>;\n  titleSelector?: Nullable<(agendaEvent: any) => string>;\n  locationSelector?: Nullable<(agendaEvent: any) => string>;\n  action?: Nullable<EventCreationAction>;\n};\n\n//#region Global Constants\nconst CLASS_DAY = 'bnum-card-item-agenda-day';\nconst CLASS_HORIZONTAL = 'bnum-card-item-agenda-horizontal';\nconst CLASS_BLOCK = 'bnum-card-item-agenda-block';\nconst CLASS_HOUR = 'bnum-card-item-agenda-hour';\nconst CLASS_VERTICAL = 'bnum-card-item-agenda-vertical';\nconst CLASS_TITLE = 'bnum-card-item-agenda-title';\nconst CLASS_TITLE_OVERRIDE = 'bnum-card-item-agenda-title-override';\nconst CLASS_LOCATION = 'bnum-card-item-agenda-location';\nconst CLASS_LOCATION_OVERRIDE = 'bnum-card-item-agenda-location-override';\nconst CLASS_ACTION = 'bnum-card-item-agenda-action';\nconst CLASS_ACTION_OVERRIDE = 'bnum-card-item-agenda-action-override';\nconst CLASS_PRIVATE_ICON = 'bnum-card-item-agenda-private-icon';\nconst CLASS_ALL_DAY = 'bnum-card-item-agenda-all-day';\n\nconst SLOT_TITLE = 'title';\nconst SLOT_LOCATION = 'location';\nconst SLOT_ACTION = 'action';\n\nconst ICON_PRIVATE = 'lock';\n//#endregion Global Constants\n\n//#region Template\nconst AGENDA = `\n  <span class=\"${CLASS_DAY} bold\"></span>\n  <div class=\"${CLASS_HORIZONTAL}\">\n     <div class=\"${CLASS_BLOCK}\">\n        <span class=\"${CLASS_HOUR} bold\"></span>\n        <div class=\"${CLASS_VERTICAL}\">\n            <span class=\"${CLASS_TITLE} bold-500\">\n                <slot name=\"${SLOT_TITLE}\"></slot>\n                <div class=\"${CLASS_TITLE_OVERRIDE}\" hidden></div>\n            </span>\n            <span class=\"${CLASS_LOCATION}\">\n                <slot name=\"${SLOT_LOCATION}\"></slot>\n                <div class=\"${CLASS_LOCATION_OVERRIDE}\" hidden></div>\n            </span>\n        </div>\n     </div>\n     <span class=\"${CLASS_ACTION}\">\n        <slot name=\"${SLOT_ACTION}\"></slot>\n        <div class=\"${CLASS_ACTION_OVERRIDE}\" hidden></div>\n     </span>\n  </div>\n  <${HTMLBnumIcon.TAG} class=\"${CLASS_PRIVATE_ICON}\" hidden>${ICON_PRIVATE}</${HTMLBnumIcon.TAG}>\n`;\n\nconst TEMPLATE = HTMLBnumCardItem.CreateChildTemplate(AGENDA, {\n  defaultSlot: false,\n});\n\n//#endregion Template\n\n/**\n * Item de carte agenda\n *\n * @structure Initalisation basique\n * <bnum-card-item-agenda\n * data-date=\"2024-01-01\"\n * data-start-date=\"2024-01-01 08:00:00\"\n * data-end-date=\"2024-01-01 10:00:00\"\n * data-title=\"Réunion de projet\"\n * data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple avec des dates de départs et fin différentes du jour de base\n * <bnum-card-item-agenda\n * data-date=\"2025-11-20\"\n * data-start-date=\"2025-10-20 09:40:00\"\n * data-end-date=\"2025-12-20 10:10:00\"\n * data-title=\"Réunion de projet\"\n * data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée entière\n * <bnum-card-item-agenda all-day\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n *\n * @structure Exemple avec des slots\n * <bnum-card-item-agenda\n * data-date=\"2025-11-20\"\n * data-start-date=\"2025-11-20 09:40:00\"\n * data-end-date=\"2025-11-20 10:10:00\">\n * <span slot=\"title\">Réunion de projet avec l'équipe marketing</span>\n * <span slot=\"location\">Salle de conférence, Bâtiment A</span>\n * <bnum-primary-button slot=\"action\" rounded data-icon='video_camera_front' data-icon-margin=\"0\" onclick=\"alert('Action déclenchée !')\"></bnum-primary-button>\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée privée\n * <bnum-card-item-agenda all-day private\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n * @structure Exemple de journée avec un mode\n * <bnum-card-item-agenda all-day mode=\"telework\"\n * data-date=\"2025-11-21\"\n * data-title=\"Télétravail\"\n * data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n *\n * @slot title - Contenu du titre de l'événement\n * @slot location - Contenu du lieu de l'événement\n * @slot action - Contenu de l'action de l'événement (bouton etc...)\n *\n * @state no-location - Actif quand le lieu n'est pas défini\n * @state all-day - Actif quand l'événement dure toute la journée\n * @state private - Actif quand l'événement est privé\n * @state mode-X - Actif quand le mode de l'événement est défini à \"X\" (remplacer X par le mode)\n * @state action - Actif quand une action est définie pour l'événement\n *\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-gap - Contrôle l'espacement général entre les éléments du composant.\n * @cssvar {var(--bnum-font-weight-bold, 700)} --bnum-card-item-agenda-date-bold - Poids de police pour les textes en gras (date).\n * @cssvar {var(--bnum-font-weight-medium, 500)} --bnum-card-item-agenda-date-bold-medium - Poids de police medium pour certains textes.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-padding-right-hour - Padding à droite de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-left-hour - Padding à gauche de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-top-hour - Padding en haut de l'heure.\n * @cssvar {0} --bnum-card-item-agenda-padding-bottom-hour - Padding en bas de l'heure.\n * @cssvar {var(--bnum-border-surface, 1px solid #E0E0E0)} --bnum-card-item-agenda-date-border-right - Bordure à droite de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-left - Bordure à gauche de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-top - Bordure en haut de l'heure.\n * @cssvar {none} --bnum-card-item-agenda-date-border-bottom - Bordure en bas de l'heure.\n * @cssvar {var(--bnum-font-size-xs, 12px)} --bnum-card-item-agenda-location-font-size - Taille de police pour le lieu.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-private-icon-top - Position top de l'icône privée.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-private-icon-right - Position right de l'icône privée.\n * @cssvar {italic} --bnum-card-item-agenda-telework-font-style - Style de police en mode télétravail.\n * @cssvar {'\\e88a'} --bnum-card-item-agenda-telework-icon-content - Contenu de l'icône télétravail.\n * @cssvar {var(--bnum-icon-font-family, 'Material Symbols Outlined')} --bnum-card-item-agenda-telework-icon-font-family - Famille de police de l'icône télétravail.\n * @cssvar {var(--bnum-font-size-xxl, 32px)} --bnum-card-item-agenda-telework-icon-font-size - Taille de l'icône télétravail.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-telework-icon-bottom - Position bottom de l'icône télétravail.\n * @cssvar {var(--bnum-space-s, 8px)} --bnum-card-item-agenda-telework-icon-right - Position right de l'icône télétravail.\n * @cssvar {20px} --bnum-card-item-agenda-telework-action-margin-right - Marge à droite de l'action en mode télétravail.\n */\n@Define()\nexport class HTMLBnumCardItemAgenda extends HTMLBnumCardItem {\n  //#region Constants\n  /** Attribut HTML pour indiquer un événement sur toute la journée\n   * @attr {boolean | string | undefined} (optional) (default: undefined) all-day - Indique si l'événement dure toute la journée\n   */\n  static readonly ATTRIBUTE_ALL_DAY: string = 'all-day';\n  /** Attribut HTML pour indiquer un événement privé\n   * @attr {boolean | string | undefined} (optional) (default: undefined) private - Indique si l'événement est privé\n   */\n  static readonly ATTRIBUTE_PRIVATE: string = 'private';\n  /** Attribut HTML pour indiquer le mode de l'événement\n   * @attr {string | undefined} (optional) (default: undefined) mode - Indique le mode de l'événement et permet des affichages visuels (custom ou non) en fonction de celui-ci. Créer l'état CSS `mode-X`.\n   */\n  static readonly ATTRIBUTE_MODE: string = 'mode';\n  /** Attribut HTML pour le titre (data-title)\n   * @attr {string | undefined} (optional) (default: undefined) data-title - Titre de l'événement\n   */\n  static readonly ATTRIBUTE_DATA_TITLE: string = 'data-title';\n  /** Attribut HTML pour le lieu (data-location)\n   * @attr {string | undefined} (optional) (default: undefined) data-location - Lieu de l'événement\n   */\n  static readonly ATTRIBUTE_DATA_LOCATION: string = 'data-location';\n  /** Clé de donnée pour la date de base\n   * @attr {string | undefined} data-date - Date de base de l'événement\n   */\n  static readonly DATA_DATE: string = 'date';\n  /** Clé de donnée pour le format de la date de base\n   * @attr {string | undefined} (optional) (default: yyyy-MM-dd) data-date-format - Format de la date de base de l'événement\n   */\n  static readonly DATA_DATE_FORMAT: string = 'date-format';\n  /** Clé de donnée pour la date de début\n   * @attr {string | undefined} data-start-date - Date de début de l'événement\n   */\n  static readonly DATA_START_DATE: string = 'start-date';\n  /** Clé de donnée pour le format de la date de début\n   * @attr {string | undefined} (optional) (default: yyyy-MM-dd HH:mm:ss) data-start-date-format - Format de la date de début de l'événement\n   */\n  static readonly DATA_START_DATE_FORMAT: string = 'start-date-format';\n  /** Clé de donnée pour la date de fin\n   * @attr {string | undefined} data-end-date - Date de fin de l'événement\n   */\n  static readonly DATA_END_DATE: string = 'end-date';\n  /** Clé de donnée pour le format de la date de fin\n   * @attr {string | undefined} (optional) (default: yyyy-MM-dd HH:mm:ss) data-end-date-format - Format de la date de fin de l'événement\n   */\n  static readonly DATA_END_DATE_FORMAT: string = 'end-date-format';\n  /** Clé de donnée pour le titre */\n  static readonly DATA_TITLE: string = 'title';\n  /** Clé de donnée pour le lieu */\n  static readonly DATA_LOCATION: string = 'location';\n  /** Format par défaut pour la date (ex: 2024-01-01) */\n  static readonly FORMAT_DATE_DEFAULT: string = 'yyyy-MM-dd';\n  /** Format par défaut pour la date et l'heure (ex: 2024-01-01 08:00:00) */\n  static readonly FORMAT_DATE_TIME_DEFAULT: string = 'yyyy-MM-dd HH:mm:ss';\n  /** Format par défaut pour l'heure (ex: 08:00) */\n  static readonly FORMAT_HOUR_DEFAULT: string = 'HH:mm';\n  /** Format pour l'heure si le jour est différent (ex: 20/11) */\n  static readonly FORMAT_HOUR_DIFF_DAY: string = 'dd/MM';\n  /** Texte pour \"Aujourd'hui\" (localisé) */\n  static readonly FORMAT_TODAY: string = BnumConfig.Get('local_keys')!.today!;\n  /** Texte pour \"Demain\" (localisé) */\n  static readonly FORMAT_TOMORROW: string =\n    BnumConfig.Get('local_keys')!.tomorrow!;\n  /** Format pour la date d'événement (ex: lundi 20 novembre) */\n  static readonly FORMAT_EVENT_DATE: string = 'EEEE dd MMMM';\n  /** Classe CSS pour le jour de l'agenda */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_DAY = CLASS_DAY;\n  /** Classe CSS pour l'heure de l'agenda */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_HOUR = CLASS_HOUR;\n  /** Classe CSS pour le titre de l'agenda */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_TITLE = CLASS_TITLE;\n  /** Classe CSS pour le lieu de l'agenda */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_LOCATION = CLASS_LOCATION;\n  /** Classe CSS pour l'action de l'agenda */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_ACTION = CLASS_ACTION;\n  /** Classe CSS pour le titre en override */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_TITLE_OVERRIDE =\n    CLASS_TITLE_OVERRIDE;\n  /** Classe CSS pour le lieu en override */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_LOCATION_OVERRIDE =\n    CLASS_LOCATION_OVERRIDE;\n  /** Classe CSS pour l'action en override */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_ACTION_OVERRIDE =\n    CLASS_ACTION_OVERRIDE;\n  /** Classe CSS pour la disposition horizontale */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_HORIZONTAL = CLASS_HORIZONTAL;\n  /** Classe CSS pour la disposition verticale */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_VERTICAL = CLASS_VERTICAL;\n  /** Classe CSS pour l'affichage \"toute la journée\" */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_ALL_DAY = CLASS_ALL_DAY;\n  /** Classe CSS pour l'icône privée */\n  static readonly CLASS_BNUM_CARD_ITEM_AGENDA_PRIVATE_ICON = CLASS_PRIVATE_ICON;\n  /** Nom du slot pour le titre */\n  static readonly SLOT_NAME_TITLE: string = SLOT_TITLE;\n  /** Nom du slot pour le lieu */\n  static readonly SLOT_NAME_LOCATION: string = SLOT_LOCATION;\n  /** Nom du slot pour l'action */\n  static readonly SLOT_NAME_ACTION: string = SLOT_ACTION;\n  /** État CSS pour absence de lieu */\n  static readonly STATE_NO_LOCATION: string = 'no-location';\n  /** État CSS pour \"toute la journée\" */\n  static readonly STATE_ALL_DAY: string = 'all-day';\n  /** État CSS pour événement privé */\n  static readonly STATE_PRIVATE: string = 'private';\n  /** Préfixe d'état CSS pour le mode */\n  static readonly STATE_MODE_PREFIX: string = 'mode-';\n  /**\n   * État CSS lorsque l'action est définie\n   */\n  static readonly STATE_ACTION_DEFINED: string = 'action';\n  /** Texte affiché pour \"toute la journée\" (localisé) */\n  static readonly TEXT_ALL_DAY: string = BnumConfig.Get('local_keys')!.day!;\n  /** Attribut d'état interne pour la gestion du rendu différé */\n  static readonly ATTRIBUTE_PENDING: string = 'agenda_all';\n  /** Mode par défaut */\n  static readonly MODE_DEFAULT: string = 'default';\n  /** Nom de l'icône pour les événements privés */\n  static readonly ICON_PRIVATE: string = ICON_PRIVATE;\n  /** Symbole pour la réinitialisation interne */\n  static readonly SYMBOL_RESET: Symbol = Symbol('reset');\n\n  //#endregion\n  //#region Private Fields\n  #_sd: Nullable<Date> = null;\n  #_ed: Nullable<Date> = null;\n  #_bd: Nullable<Date> = null;\n  #_pr: Nullable<boolean> = null;\n  #_spanDate: HTMLSpanElement | null = null;\n  #_spanHour: HTMLSpanElement | null = null;\n  #_slotLocation: HTMLSlotElement | null = null;\n  #_slotTitle: HTMLSlotElement | null = null;\n  #_slotAction: HTMLSlotElement | null = null;\n  #_overrideAction: HTMLDivElement | null = null;\n  #_overrideLocation: HTMLDivElement | null = null;\n  #_overrideTitle: HTMLDivElement | null = null;\n  #_privateIcon: Nullable<HTMLBnumIcon> = null;\n  #_spanAllday: Nullable<HTMLSpanElement> = null;\n  #_bnumDateStart: Nullable<HTMLBnumDate> = null;\n  #_bnumDateEnd: Nullable<HTMLBnumDate> = null;\n  #_shedulerTitle: Nullable<Scheduler<HTMLElement | string | Symbol>> = null;\n  #_shedulerLocation: Nullable<Scheduler<HTMLElement | string | Symbol>> = null;\n  #_shedulerAction: Nullable<Scheduler<HTMLElement | Symbol>> = null;\n  /**\n   * Événement circulaire déclenché lors de la définition de l'action.\n   * Permet de personnaliser l'action affichée dans la carte agenda.\n   */\n  #_onstartdefineaction: Nullable<\n    JsCircularEvent<OnStartDefineActionCallback>\n  > = null;\n  //#endregion\n  //#region Public Fields\n  //#endregion\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumCardItemAgenda */\n  @Self __!: typeof HTMLBnumCardItemAgenda;\n  /**\n   * Événement circulaire déclenché lors de la définition de l'action.\n   *\n   * Permet de personnaliser l'action affichée dans la carte agenda.\n   */\n  get onstartdefineaction(): JsCircularEvent<OnStartDefineActionCallback> {\n    this.#_onstartdefineaction ??=\n      new JsCircularEvent<OnStartDefineActionCallback>();\n\n    return this.#_onstartdefineaction;\n  }\n  /**\n   * Indique si l'événement dure toute la journée.\n   */\n  get isAllDay(): boolean {\n    return this.hasAttribute(this.__.ATTRIBUTE_ALL_DAY);\n  }\n  /**\n   * Date de base de l'événement (jour affiché).\n   */\n  get baseDate(): Date {\n    return (\n      this.#_bd ??\n      BnumDateUtils.parse(this.#_baseDate, this.#_baseDateFormat) ??\n      new Date()\n    );\n  }\n  set baseDate(value: Date) {\n    const oldValue = this.#_bd;\n    this.#_bd = value;\n    this.#_bnumDateStart?.askRender?.();\n    this.#_bnumDateEnd?.askRender?.();\n    this._p_addPendingAttribute(\n      this.__.ATTRIBUTE_PENDING,\n      oldValue === null\n        ? null\n        : BnumDateUtils.format(\n            oldValue,\n            BnumDateUtils.getOptionsFromToken(this.#_baseDateFormat),\n          ),\n      BnumDateUtils.format(\n        value,\n        BnumDateUtils.getOptionsFromToken(this.#_baseDateFormat),\n      ),\n    )._p_requestAttributeUpdate();\n  }\n  /**\n   * Date de début de l'événement.\n   */\n  get startDate(): Date {\n    return (\n      this.#_sd ??\n      BnumDateUtils.parse(this.#_startDate, this.#_startDateFormat) ??\n      new Date()\n    );\n  }\n  set startDate(value: Date) {\n    const oldValue = this.#_sd;\n    this.#_sd = value;\n    this.#_bnumDateEnd?.askRender?.();\n    this._p_addPendingAttribute(\n      this.__.ATTRIBUTE_PENDING,\n      oldValue === null\n        ? null\n        : BnumDateUtils.format(\n            oldValue,\n            BnumDateUtils.getOptionsFromToken(this.#_startDateFormat),\n          ),\n      BnumDateUtils.format(\n        value,\n        BnumDateUtils.getOptionsFromToken(this.#_startDateFormat),\n      ),\n    )._p_requestAttributeUpdate();\n  }\n  /**\n   * Date de fin de l'événement.\n   */\n  get endDate(): Date {\n    return (\n      this.#_ed ??\n      BnumDateUtils.parse(this.#_endDate, this.#_endDateFormat) ??\n      new Date()\n    );\n  }\n  set endDate(value: Date) {\n    const oldValue = this.#_ed;\n    this.#_ed = value;\n    this.#_bnumDateStart?.askRender?.();\n    this._p_addPendingAttribute(\n      this.__.ATTRIBUTE_PENDING,\n      oldValue === null\n        ? null\n        : BnumDateUtils.format(\n            oldValue,\n            BnumDateUtils.getOptionsFromToken(this.#_endDateFormat),\n          ),\n      BnumDateUtils.format(\n        value,\n        BnumDateUtils.getOptionsFromToken(this.#_endDateFormat),\n      ),\n    )._p_requestAttributeUpdate();\n  }\n  get private(): boolean {\n    return this.#_pr ?? this.#_private;\n  }\n  set private(value: boolean) {\n    const oldValue = this.#_pr;\n    this.#_pr = value;\n\n    this._p_addPendingAttribute(\n      this.__.ATTRIBUTE_PENDING,\n      JSON.stringify(oldValue),\n      JSON.stringify(value),\n    )._p_requestAttributeUpdate();\n  }\n  get #_private(): boolean {\n    return this.hasAttribute(this.__.ATTRIBUTE_PRIVATE);\n  }\n  get #_getMode(): string {\n    return (\n      this.getAttribute(this.__.ATTRIBUTE_MODE) ||\n      HTMLBnumCardItemAgenda.MODE_DEFAULT\n    );\n  }\n  get #_baseDate(): string {\n    return this.data(this.__.DATA_DATE) || EMPTY_STRING;\n  }\n  get #_baseDateFormat(): string {\n    return (\n      this.data(this.__.DATA_DATE_FORMAT) ||\n      HTMLBnumCardItemAgenda.FORMAT_DATE_DEFAULT\n    );\n  }\n  get #_startDate(): string {\n    return this.data(this.__.DATA_START_DATE) || EMPTY_STRING;\n  }\n  get #_startDateFormat(): string {\n    return (\n      this.data(this.__.DATA_START_DATE_FORMAT) ||\n      HTMLBnumCardItemAgenda.FORMAT_DATE_TIME_DEFAULT\n    );\n  }\n  get #_endDate(): string {\n    return this.data(this.__.DATA_END_DATE) || EMPTY_STRING;\n  }\n  get #_endDateFormat(): string {\n    return (\n      this.data(this.__.DATA_END_DATE_FORMAT) ||\n      this.__.FORMAT_DATE_TIME_DEFAULT\n    );\n  }\n  get #_title(): Nullable<string> {\n    return this.data(this.__.DATA_TITLE);\n  }\n  get #_location(): Nullable<string> {\n    return this.data(this.__.DATA_LOCATION);\n  }\n  //#endregion\n\n  constructor() {\n    super();\n  }\n\n  //#region Lifecycle Hooks\n  /**\n   * Récupère le style CSS à appliquer au composant.\n   * @returns Chaîne de style CSS à appliquer au composant.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Précharge les données nécessaires à l'initialisation du composant.\n   */\n  protected _p_preload(): void {\n    super._p_preload();\n\n    this.#_sd = this.startDate;\n    this.#_ed = this.endDate;\n  }\n\n  protected _p_buildDOM(container: CustomDom): void {\n    // Note: BnumElement a déjà cloné le template dans 'container' grâce à _p_fromTemplate\n    super._p_buildDOM(container);\n\n    // Récupération des références du Template\n    this.#_spanDate = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_DAY}`,\n    );\n    this.#_spanHour = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_HOUR}`,\n    );\n\n    // Slots et Overrides\n    const slots = container.querySelectorAll('slot');\n    this.#_slotTitle = slots[0];\n    this.#_slotLocation = slots[1];\n    this.#_slotAction = slots[2];\n\n    this.#_overrideTitle = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_TITLE_OVERRIDE}`,\n    );\n    this.#_overrideLocation = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_LOCATION_OVERRIDE}`,\n    );\n    this.#_overrideAction = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_ACTION_OVERRIDE}`,\n    );\n\n    // Initialisation UNIQUE des sous-composants (Date & Heure)\n    // On crée les composants maintenant, on les mettra à jour dans renderDOM\n    const dateHtml = this.#_generateDateHtml(new Date());\n    this.#_spanDate!.appendChild(dateHtml);\n\n    // Création des heures (Start / End)\n    this.#_bnumDateStart = this.setHourLogic(HTMLBnumDate.Create(new Date()));\n    this.#_bnumDateEnd = this.setHourLogic(HTMLBnumDate.Create(new Date()));\n\n    // Création du label \"Toute la journée\" (caché par défaut)\n    this.#_spanAllday = this._p_createSpan({\n      classes: [this.__.CLASS_BNUM_CARD_ITEM_AGENDA_ALL_DAY],\n      child: this.__.TEXT_ALL_DAY,\n    });\n    this.#_spanAllday.hidden = true;\n\n    // On attache tout au DOM maintenant (pour ne plus y toucher)\n    this.#_spanHour!.append(\n      this.#_bnumDateStart,\n      this.#_bnumDateEnd,\n      this.#_spanAllday,\n    );\n\n    // Initialisation de l'icône privée\n    this.#_privateIcon = container.querySelector(\n      `.${this.__.CLASS_BNUM_CARD_ITEM_AGENDA_PRIVATE_ICON}`,\n    );\n  }\n\n  /**\n   * Attache le composant au DOM et initialise les valeurs par défaut.\n   */\n  protected _p_attach(): void {\n    super._p_attach();\n\n    if (this._p_slot) this._p_slot.hidden = true;\n\n    if (this.#_title) {\n      const defaultTitle: Text = document.createTextNode(this.#_title);\n      this.#_slotTitle!.appendChild(defaultTitle);\n    }\n\n    if (this.#_location) {\n      const defaultLocation: Text = document.createTextNode(this.#_location);\n      this.#_slotLocation!.appendChild(defaultLocation);\n    }\n\n    this.#_renderDOM();\n    this.#_release();\n  }\n\n  /**\n   * Libère les attributs data- utilisés pour l'initialisation.\n   */\n  #_release(): void {\n    this.#_startDate;\n    this.#_endDate;\n    this.#_startDateFormat;\n    this.#_endDateFormat;\n    this.#_baseDate;\n    this.#_baseDateFormat;\n  }\n\n  /**\n   * Met à jour le rendu du composant.\n   */\n  protected _p_render() {\n    super._p_render();\n\n    this.#_renderDOM();\n  }\n\n  /**\n   * Met à jour l'affichage du composant selon les données courantes.\n   */\n  #_renderDOM(): void {\n    var createDate = true;\n\n    this._p_addState(`${this.__.STATE_MODE_PREFIX}${this.#_getMode}`);\n\n    // Gestion des slots\n    if (this.#_isSlotLocationEmpty())\n      this._p_addState(this.__.STATE_NO_LOCATION);\n\n    // Gestion de l'action\n    const eventResult = this.onstartdefineaction.call({\n      location: this.#_isSlotLocationEmpty()\n        ? this.#_location || EMPTY_STRING\n        : this.#_slotLocation!.textContent || EMPTY_STRING,\n      action: undefined,\n    });\n\n    if (eventResult.action) {\n      this.updateAction(eventResult.action, { forceCall: true });\n    }\n\n    if (\n      eventResult.action ||\n      this.#_overrideAction!.hidden === false ||\n      (this.#_slotAction && this.#_slotAction!.children.length > 0)\n    ) {\n      this._p_addState(this.__.STATE_ACTION_DEFINED);\n    }\n\n    if (this.#_spanDate && this.#_spanDate.children.length > 0) {\n      const dateHtml: Nullable<HTMLBnumDate> = this.shadowRoot!.querySelector(\n        HTMLBnumDate.TAG,\n      );\n\n      if (dateHtml != null) {\n        createDate = false;\n        dateHtml.date = this.baseDate;\n      }\n    }\n\n    if (createDate) {\n      const dateHtml: HTMLBnumDate = this.#_generateDateHtml(this.baseDate);\n      this.#_spanDate!.appendChild(dateHtml);\n    }\n\n    // Gestion de la date\n    if (this.isAllDay) {\n      if (this.#_bnumDateStart !== null) this.#_bnumDateStart.hidden = true;\n      if (this.#_bnumDateEnd !== null) this.#_bnumDateEnd.hidden = true;\n\n      if (this.#_spanAllday === null) {\n        this._p_addState(this.__.STATE_ALL_DAY);\n        const spanAllDay: HTMLSpanElement = this._p_createSpan({\n          classes: [this.__.CLASS_BNUM_CARD_ITEM_AGENDA_ALL_DAY],\n          child: this.__.TEXT_ALL_DAY,\n        });\n        this.#_spanAllday = spanAllDay;\n        this.#_spanHour!.appendChild(spanAllDay);\n      } else this.#_spanAllday.hidden = false;\n    } else {\n      if (this.#_spanAllday !== null) this.#_spanAllday.hidden = true;\n\n      if (this.#_bnumDateStart == null && this.#_bnumDateEnd == null) {\n        const htmlStartDate: HTMLBnumDate = this.setHourLogic(\n          HTMLBnumDate.Create(this.startDate),\n        );\n        const htmlEndDate: HTMLBnumDate = this.setHourLogic(\n          HTMLBnumDate.Create(this.endDate),\n        );\n\n        this.#_bnumDateStart = htmlStartDate;\n        this.#_bnumDateEnd = htmlEndDate;\n\n        this.#_spanHour!.append(htmlStartDate, htmlEndDate);\n      } else {\n        this.#_bnumDateStart!.hidden = false;\n        this.#_bnumDateEnd!.hidden = false;\n        this.#_bnumDateStart!.date = this.startDate;\n        this.#_bnumDateEnd!.date = this.endDate;\n      }\n    }\n\n    if (this.#_private) {\n      this._p_addState(this.__.STATE_PRIVATE);\n      if (this.#_privateIcon === null) {\n        this.#_privateIcon = HTMLBnumIcon.Create(this.__.ICON_PRIVATE).addClass(\n          this.__.CLASS_BNUM_CARD_ITEM_AGENDA_PRIVATE_ICON,\n        );\n        this.shadowRoot!.appendChild(this.#_privateIcon);\n      } else this.#_privateIcon.hidden = false;\n    } else if (this.#_privateIcon) this.#_privateIcon.hidden = true;\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  //#endregion\n\n  //#region Public Methods\n  /**\n   * Met à jour l'action affichée dans la carte agenda.\n   * @param element Élément HTML à afficher comme action\n   * @returns L'instance du composant\n   */\n  public updateAction(\n    element: HTMLElement,\n    { forceCall = false }: { forceCall?: boolean } = {},\n  ): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerAction(element, { forceCall });\n  }\n\n  /**\n   * Réinitialise l'action à sa valeur par défaut.\n   * @returns L'instance du composant\n   */\n  public resetAction(): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerAction(this.__.SYMBOL_RESET);\n  }\n\n  /**\n   * Met à jour le titre affiché dans la carte agenda.\n   * @param element Élément HTML ou texte à afficher comme titre\n   * @returns L'instance du composant\n   */\n  public updateTitle(element: HTMLElement): HTMLBnumCardItemAgenda;\n  public updateTitle(element: string): HTMLBnumCardItemAgenda;\n  public updateTitle(element: HTMLElement | string): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerTitle(element);\n  }\n\n  /**\n   * Réinitialise le titre à sa valeur par défaut.\n   * @returns L'instance du composant\n   */\n  public resetTitle(): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerTitle(this.__.SYMBOL_RESET);\n  }\n\n  /**\n   * Met à jour le lieu affiché dans la carte agenda.\n   * @param element Élément HTML ou texte à afficher comme lieu\n   * @returns L'instance du composant\n   */\n  public updateLocation(element: HTMLElement): HTMLBnumCardItemAgenda;\n  public updateLocation(element: string): HTMLBnumCardItemAgenda;\n  public updateLocation(element: HTMLElement | string): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerLocation(element);\n  }\n\n  /**\n   * Réinitialise le lieu à sa valeur par défaut.\n   * @returns L'instance du composant\n   */\n  public resetLocation(): HTMLBnumCardItemAgenda {\n    return this.#_requestShedulerLocation(this.__.SYMBOL_RESET);\n  }\n\n  /**\n   * Applique la logique d'affichage pour la date (aujourd'hui, demain, etc.).\n   * @param element Instance HTMLBnumDate à formater\n   * @returns Instance HTMLBnumDate modifiée\n   */\n  public setDateLogic(element: HTMLBnumDate): HTMLBnumDate {\n    element.formatEvent.add(EVENT_DEFAULT, (param) => {\n      const now: Date = new Date();\n      const date: Date =\n        typeof param.date === 'string'\n          ? ((BnumDateUtils.parse(param.date, element.format) ??\n              param.date) as Date)\n          : (param.date as Date);\n\n      if (BnumDateUtils.isSameDay(date, now)) param.date = this.__.FORMAT_TODAY;\n      else if (BnumDateUtils.isSameDay(date, BnumDateUtils.addDays(now, 1)))\n        param.date = this.__.FORMAT_TOMORROW;\n      else\n        param.date = CapitalizeLine(\n          BnumDateUtils.format(\n            date,\n            BnumDateUtils.getOptionsFromToken(this.__.FORMAT_EVENT_DATE),\n            element.localeElement,\n          ),\n        );\n\n      return param;\n    });\n\n    return element;\n  }\n\n  /**\n   * Applique la logique d'affichage pour l'heure (heure ou date selon le jour).\n   * @param element Instance HTMLBnumDate à formater\n   * @returns Instance HTMLBnumDate modifiée\n   */\n  public setHourLogic(element: HTMLBnumDate): HTMLBnumDate {\n    element.formatEvent.add(EVENT_DEFAULT, (param: { date: Date | string }) => {\n      const date: Date =\n        typeof param.date === 'string'\n          ? ((BnumDateUtils.parse(param.date, element.format) ??\n              param.date) as Date)\n          : (param.date as Date);\n\n      if (BnumDateUtils.isSameDay(date, this.baseDate))\n        param.date = BnumDateUtils.format(\n          date,\n          BnumDateUtils.getOptionsFromToken(this.__.FORMAT_HOUR_DEFAULT),\n          element.localeElement,\n        );\n      else\n        param.date = BnumDateUtils.format(\n          date,\n          BnumDateUtils.getOptionsFromToken(this.__.FORMAT_HOUR_DIFF_DAY),\n          element.localeElement,\n        );\n      return param;\n    });\n\n    return element;\n  }\n  //#endregion\n\n  //#region Private Methods\n  #_requestShedulerAction(\n    element: HTMLElement | Symbol,\n    { forceCall = false }: { forceCall?: boolean } = {},\n  ): this {\n    this.#_shedulerAction ??= new Scheduler<HTMLElement | Symbol>((element) =>\n      this.#_updateAction(element!),\n    );\n\n    if (forceCall) this.#_shedulerAction.call(element);\n    else this.#_shedulerAction.schedule(element);\n    return this;\n  }\n\n  #_updateAction(element: HTMLElement | Symbol): void {\n    if (element === this.__.SYMBOL_RESET) {\n      this._p_removeState(this.__.STATE_ACTION_DEFINED);\n      this.#_resetItem(this.#_overrideAction!, this.#_slotAction!);\n      return;\n    }\n\n    this._p_addState(this.__.STATE_ACTION_DEFINED);\n    this.#_overrideAction!.innerHTML = EMPTY_STRING;\n    this.#_overrideAction!.appendChild(element as HTMLElement);\n\n    this.#_slotAction!.hidden = true;\n    this.#_overrideAction!.hidden = false;\n  }\n\n  #_requestShedulerTitle(element: HTMLElement | string | Symbol): this {\n    this.#_shedulerTitle ??= new Scheduler<HTMLElement | string | Symbol>(\n      (element) => this.#_updateTitle(element!),\n    );\n\n    this.#_shedulerTitle.schedule(element);\n    return this;\n  }\n\n  #_updateTitle(element: HTMLElement | string | Symbol): void {\n    if (element === this.__.SYMBOL_RESET) {\n      this.#_resetItem(this.#_overrideTitle!, this.#_slotTitle!);\n      return;\n    }\n\n    this.#_overrideTitle!.innerHTML = EMPTY_STRING;\n\n    if (typeof element === 'string') {\n      const textNode: Text = document.createTextNode(element);\n      this.#_overrideTitle!.appendChild(textNode);\n    } else {\n      this.#_overrideTitle!.appendChild(element as HTMLElement);\n    }\n\n    this.#_slotTitle!.hidden = true;\n    this.#_overrideTitle!.hidden = false;\n  }\n\n  #_requestShedulerLocation(element: HTMLElement | string | Symbol): this {\n    this.#_shedulerLocation ??= new Scheduler<HTMLElement | string | Symbol>(\n      (element) => this.#_updateLocation(element!),\n    );\n\n    this.#_shedulerLocation.schedule(element);\n    return this;\n  }\n\n  #_updateLocation(element: HTMLElement | string | Symbol): void {\n    if (element === this.__.SYMBOL_RESET) {\n      this.#_resetItem(this.#_overrideLocation!, this.#_slotLocation!);\n      return;\n    }\n\n    this.#_overrideLocation!.innerHTML = EMPTY_STRING;\n\n    if (typeof element === 'string') {\n      const textNode: Text = document.createTextNode(element);\n      this.#_overrideLocation!.appendChild(textNode);\n    } else {\n      this.#_overrideLocation!.appendChild(element as HTMLElement);\n    }\n\n    this.#_slotLocation!.hidden = true;\n    this.#_overrideLocation!.hidden = false;\n  }\n\n  #_resetItem(\n    action: HTMLElement,\n    slot: HTMLSlotElement,\n  ): HTMLBnumCardItemAgenda {\n    action.innerHTML = EMPTY_STRING;\n    slot.hidden = false;\n    action.hidden = true;\n\n    return this;\n  }\n  #_slotEmpty(slot: HTMLSlotElement): boolean {\n    return slot.assignedNodes().length === 0;\n  }\n  #_isSlotLocationEmpty(): boolean {\n    return this.#_slotLocation ? this.#_slotEmpty(this.#_slotLocation) : true;\n  }\n  #_generateDateHtml(startDate: Date): HTMLBnumDate {\n    return this.setDateLogic(HTMLBnumDate.Create(startDate));\n  }\n  //#endregion\n\n  //#region Static Methods\n  /**\n   * Crée une nouvelle instance du composant agenda avec les paramètres donnés.\n   * @param baseDate Date de base\n   * @param startDate Date de début\n   * @param endDate Date de fin\n   * @param options Options supplémentaires (allDay, title, location, action)\n   * @returns Instance HTMLBnumCardItemAgenda\n   */\n  public static Create(\n    baseDate: Date,\n    startDate: Date,\n    endDate: Date,\n    {\n      allDay = false,\n      title = null,\n      location = null,\n      action = null,\n      isPrivate = false,\n      mode = null,\n    }: CreateConstructorOptions = {},\n  ): HTMLBnumCardItemAgenda {\n    let node = document.createElement(this.TAG) as HTMLBnumCardItemAgenda;\n\n    node.baseDate = baseDate;\n    node.startDate = startDate;\n    node.endDate = endDate;\n\n    if (allDay)\n      node.setAttribute(this.ATTRIBUTE_ALL_DAY, this.ATTRIBUTE_ALL_DAY);\n    if (title) node.setAttribute(this.ATTRIBUTE_DATA_TITLE, title);\n    if (location) node.setAttribute(this.ATTRIBUTE_DATA_LOCATION, location);\n\n    if (isPrivate)\n      node.setAttribute(this.ATTRIBUTE_PRIVATE, this.ATTRIBUTE_PRIVATE);\n    if (mode) node.setAttribute(this.ATTRIBUTE_MODE, mode);\n\n    if (action) {\n      if (typeof action === 'function') node.onstartdefineaction.push(action);\n      else\n        node.onstartdefineaction.push((param) => {\n          param.action = action!.element;\n          param.action!.onclick = action!.callback;\n          return param;\n        });\n    }\n\n    return node;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  static _p_observedAttributes(): string[] {\n    return [\n      ...super._p_observedAttributes(),\n      this.ATTRIBUTE_ALL_DAY,\n      this.ATTRIBUTE_PRIVATE,\n      this.ATTRIBUTE_MODE,\n    ];\n  }\n\n  /**\n   * Crée une nouvelle instance du composant agenda à partir d'un objet événement.\n   * @param baseDate Date de base\n   * @param agendaEvent Objet événement source\n   * @param options Fonctions de sélection et action personnalisée\n   * @returns Instance HTMLBnumCardItemAgenda\n   */\n  public static FromEvent(\n    baseDate: Date,\n    agendaEvent: any,\n    {\n      startDateSelector = null,\n      endDateSelector = null,\n      allDaySelector = null,\n      titleSelector = null,\n      locationSelector = null,\n      action = null,\n    }: FromEventConstructorOptions = {},\n  ): HTMLBnumCardItemAgenda {\n    const [startDate, endDate] = this.#_tryGetAgendaDates(\n      {\n        val: agendaEvent.start,\n        selector: startDateSelector,\n      },\n      {\n        val: agendaEvent.end,\n        selector: endDateSelector,\n      },\n    );\n\n    const allDay: boolean =\n      agendaEvent?.allDay ?? allDaySelector?.(agendaEvent) ?? false;\n\n    const title: string =\n      agendaEvent?.title ?? titleSelector?.(agendaEvent) ?? EMPTY_STRING;\n\n    const location: string =\n      agendaEvent?.location ?? locationSelector?.(agendaEvent) ?? EMPTY_STRING;\n\n    return this.Create(baseDate, startDate, endDate, {\n      allDay: allDay,\n      title: title,\n      location: location,\n      action: action,\n    });\n  }\n\n  /**\n   * Retourne le tag HTML du composant.\n   */\n  public static get TAG(): string {\n    return TAG_CARD_ITEM_AGENDA;\n  }\n\n  /**\n   * Tente d'obtenir une date d'agenda à partir d'une valeur donnée.\n   * @param val La valeur à analyser.\n   * @param selector Une fonction de sélection pour extraire la date.\n   * @returns La date d'agenda ou une date invalide.\n   */\n  static #_TryGetAgendaDate(\n    val: any,\n    selector: Nullable<(obj: any) => Date>,\n  ): Date {\n    return typeof val === 'string'\n      ? new Date(val)\n      : val?.toDate\n        ? val.toDate()\n        : (selector?.(val) ?? new Date('Date invalide'));\n  }\n\n  /**\n   * Tente d'obtenir une liste de dates d'agenda à partir des valeurs données.\n   * @param options Options contenant les valeurs et sélecteurs.\n   * @returns La liste des dates d'agenda.\n   */\n  static #_tryGetAgendaDates(\n    ...options: {\n      val: any;\n      selector: Nullable<(obj: any) => Date>;\n    }[]\n  ): Date[] {\n    return options.map((option) =>\n      this.#_TryGetAgendaDate(option.val, option.selector),\n    );\n  }\n  //#endregion\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { HTMLBnumDate } from '../../atoms/date/bnum-date';\nimport style from './bnum-card-item-mail.less';\nimport JsEvent from '@rotomeca/event';\nimport { CallbackChangedSimple, Nullable } from '../../../core/utils/types';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { TAG_CARD_ITEM_MAIL } from '../../../core/utils/constants/tags';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { BnumDateUtils } from '../../../core/utils/BnumDateUtils';\n\nconst SHEET = HTMLBnumCardItem.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst CLASS_MAIN_CONTENT = 'main-content';\nconst CLASS_SENDER = 'sender';\nconst ID_SENDER_SLOT = 'senderslot';\nconst SLOT_SENDER_NAME = 'sender';\nconst PART_SENDER_OVERRIDE = 'sender-override';\nconst CLASS_SUBJECT = 'subject';\nconst ID_SUBJECT_SLOT = 'subjectslot';\nconst SLOT_SUBJECT_NAME = 'subject';\nconst PART_SUBJECT_OVERRIDE = 'subject-override';\nconst CLASS_DATE = 'date';\nconst ID_DATE_SLOT = 'dateslot';\nconst SLOT_DATE_NAME = 'date';\nconst PART_DATE_OVERRIDE = 'date-override';\nconst ID_DATE_ELEMENT_OVERRIDE = 'date-element-override';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = HTMLBnumCardItem.CreateChildTemplate(\n  `\n  <div class=\"${CLASS_MAIN_CONTENT}\">\n    <div class=\"${CLASS_SENDER}\">\n      <slot id=\"${ID_SENDER_SLOT}\" name=\"${SLOT_SENDER_NAME}\"></slot>\n      <span class=\"${PART_SENDER_OVERRIDE}\" part=\"${PART_SENDER_OVERRIDE}\" hidden></span>\n    </div>\n    <div class=\"${CLASS_SUBJECT}\">\n      <slot id=\"${ID_SUBJECT_SLOT}\" name=\"${SLOT_SUBJECT_NAME}\"></slot>\n      <span class=\"${PART_SUBJECT_OVERRIDE}\" part=\"${PART_SUBJECT_OVERRIDE}\" hidden></span>\n    </div>\n  </div>\n  <div class=\"${CLASS_DATE}\">\n    <slot id=\"${ID_DATE_SLOT}\" name=\"${SLOT_DATE_NAME}\"></slot>\n    <span class=\"${PART_DATE_OVERRIDE}\" part=\"${PART_DATE_OVERRIDE}\" hidden>\n      <${HTMLBnumDate.TAG} id=\"${ID_DATE_ELEMENT_OVERRIDE}\"></${HTMLBnumDate.TAG}>\n    </span>\n  </div>\n  `,\n  { defaultSlot: false },\n);\n\n//#endregion Template\n\n/**\n * Composant HTML personnalisé représentant un élément de carte mail.\n *\n * Permet d'afficher un sujet, un expéditeur et une date, avec possibilité d'override du contenu par défaut.\n *\n * Utilise des slots pour l'intégration dans le Shadow DOM et propose des méthodes pour forcer ou réinitialiser le contenu.\n *\n * Note: En passant par `data-date` ou `.updateDate()`, le format d'affichage de la date est ajusté selon la logique métier :\n * - Si la date est aujourd'hui, seule l'heure est affichée (HH:mm).\n * - Si la date est comprise entre hier et il y a 7 jours, le jour de la semaine et l'heure sont affichés (E - HH:mm).\n * - Sinon, le format par défaut de HTMLBnumDate est utilisé.\n *\n * @structure Item de carte mail\n * <bnum-card-item-mail data-date=\"now\">\n * <span slot=\"subject\">Sujet par défaut</span>\n * <span slot=\"sender\">Expéditeur par défaut</span>\n * </bnum-card-item-mail>\n *\n * @structure Item de carte data\n * <bnum-card-item-mail data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n *\n * @structure Item de carte lue\n * <bnum-card-item-mail read data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n *\n * @state read - Actif quand le mail est marqué comme lu.\n *\n * @slot (default) - N'existe pas, si vous mettez du contenu en dehors des slots, ils ne seront pas affichés.\n * @slot sender - Contenu de l'expéditeur (texte ou HTML).\n * @slot subject - Contenu du sujet (texte ou HTML).\n * @slot date - Contenu de la date. /!\\ Si vous passez par ce slot, la mécanique de formatage automatique de la date ne s'appliquera pas.\n */\n@Define()\nexport class HTMLBnumCardItemMail extends HTMLBnumCardItem {\n  //#region Constants\n  /**\n   * Attribut data pour le sujet du mail.\n   * @attr {string} (optional) data-subject - Sujet du mail.\n   */\n  static readonly DATA_SUBJECT = 'subject';\n  static readonly ATTRIBUTE_DATA_SUBJECT = `data-${this.DATA_SUBJECT}`;\n  /**\n   * Attribut data pour la date du mail.\n   * @attr {string} (optional) data-sender - Expéditeur du mail.\n   */\n  static readonly DATA_SENDER = 'sender';\n  static readonly ATTRIBUTE_DATA_SENDER = `data-${this.DATA_SENDER}`;\n  /**\n   * Attribut data pour la date du mail.\n   * @attr {string} (optional) data-date - Date du mail, optionnel, mais conseillé si vous voulez la logique de formatage automatique.\n   */\n  static readonly DATA_DATE = 'date';\n  static readonly ATTRIBUTE_DATA_DATE = `data-${this.DATA_DATE}`;\n  /**\n   * Attribut pour marquer le mail comme lu.\n   * @attr {boolean} (optional) read - Indique si le mail est lu.\n   */\n  static readonly ATTRIBUTE_READ = 'read';\n  /**\n   * Événement déclenché lors du changement de l'expéditeur du mail.\n   * @event bnum-card-item-mail:sender-changed\n   * @detail { caller: HTMLBnumCardItemMail }\n   */\n  static readonly EVENT_SENDER_CHANGED = 'bnum-card-item-mail:sender-changed';\n  /**\n   * Événement déclenché lors du changement du sujet du mail.\n   * @event bnum-card-item-mail:subject-changed\n   * @detail { caller: HTMLBnumCardItemMail }\n   */\n  static readonly EVENT_SUBJECT_CHANGED = 'bnum-card-item-mail:subject-changed';\n  /**\n   * Événement déclenché lors du changement de la date du mail.\n   * @event bnum-card-item-mail:date-changed\n   * @detail { caller: HTMLBnumCardItemMail }\n   */\n  static readonly EVENT_DATE_CHANGED = 'bnum-card-item-mail:date-changed';\n  /**\n   * Nom du slot pour l'expéditeur.\n   */\n  static readonly SLOT_SENDER_NAME = SLOT_SENDER_NAME;\n  /**\n   * Nom du slot pour le sujet.\n   */\n  static readonly SLOT_SUBJECT_NAME = SLOT_SUBJECT_NAME;\n  /**\n   * Nom du slot pour la date.\n   */\n  static readonly SLOT_DATE_NAME = SLOT_DATE_NAME;\n  /**\n   * Nom de la part pour override de l'expéditeur.\n   */\n  static readonly PART_SENDER_OVERRIDE = PART_SENDER_OVERRIDE;\n  /**\n   * Nom de la part pour override du sujet.\n   */\n  static readonly PART_SUBJECT_OVERRIDE = PART_SUBJECT_OVERRIDE;\n  /**\n   * Nom de la part pour override de la date.\n   */\n  static readonly PART_DATE_OVERRIDE = PART_DATE_OVERRIDE;\n  /**\n   * Classe CSS pour l'expéditeur.\n   */\n  static readonly CLASS_SENDER = CLASS_SENDER;\n  /**\n   * Classe CSS pour le sujet.\n   */\n  static readonly CLASS_SUBJECT = CLASS_SUBJECT;\n  /**\n   * Classe CSS pour la date.\n   */\n  static readonly CLASS_DATE = CLASS_DATE;\n  /**\n   * Classe CSS pour le contenu principal.\n   */\n  static readonly CLASS_MAIN_CONTENT = CLASS_MAIN_CONTENT;\n  static readonly ID_DATE_ELEMENT_OVERRIDE = ID_DATE_ELEMENT_OVERRIDE;\n  static readonly ID_SENDER_SLOT = ID_SENDER_SLOT;\n  static readonly ID_SUBJECT_SLOT = ID_SUBJECT_SLOT;\n  static readonly ID_DATE_SLOT = ID_DATE_SLOT;\n  /**\n   * Nom de l'état \"lu\".\n   */\n  static readonly STATE_READ = 'read';\n  /**\n   * Format d'affichage de la date pour aujourd'hui.\n   */\n  static readonly TODAY_FORMAT = 'HH:mm';\n  /**\n   * Format d'affichage de la date pour les autres jours.\n   */\n  static readonly OTHER_DAY_FORMAT = 'dd/MM/yyyy';\n  /**\n   * Format d'affichage de la date pour la semaine.\n   */\n  static readonly WEEK_FORMAT = 'E - HH:mm';\n  static readonly SYMBOL_RESET = Symbol('reset');\n  //#endregion\n\n  //#region Private fields\n  // --- Slots du Shadow DOM ---\n  /**\n   * Slot pour la date dans le Shadow DOM.\n   */\n  #_slot_date: HTMLSlotElement | null = null;\n  /**\n   * Slot pour l'expéditeur dans le Shadow DOM.\n   */\n  #_slot_sender: HTMLSlotElement | null = null;\n\n  // --- Conteneurs d'OVERRIDE (cachés par défaut) ---\n  /**\n   * Élément pour override de l'expéditeur.\n   */\n  #_override_sender: HTMLSpanElement | null = null;\n  /**\n   * Élément pour override du sujet.\n   */\n  #_override_subject: HTMLSpanElement | null = null;\n  /**\n   * Élément pour override de la date.\n   */\n  #_override_date: HTMLSpanElement | null = null;\n  /**\n   * Élément HTMLBnumDate utilisé pour override la date.\n   */\n  #_dateOverrideElement: HTMLBnumDate | null = null;\n  /**\n   * Scheduler pour la mise à jour du sujet.\n   */\n  #_subjectScheduler: Nullable<Scheduler<string | HTMLElement | Symbol>> = null;\n  /**\n   * Scheduler pour la mise à jour de la date.\n   */\n  #_dateScheduler: Nullable<Scheduler<string | Date | HTMLBnumDate | Symbol>> =\n    null;\n  #_defaultDate: HTMLBnumDate | null = null;\n  /**\n   * Scheduler pour la mise à jour de l'expéditeur.\n   */\n  #_senderScheduler: Nullable<Scheduler<string | HTMLElement | Symbol>> = null;\n  //#endregion Private fields\n  //#region Public fields\n  /**\n   * Événement déclenché lors du changement du sujet du mail.\n   * Permet d'attacher des gestionnaires personnalisés au changement de sujet.\n   */\n  public onsubjectchanged: JsEvent<\n    CallbackChangedSimple<HTMLBnumCardItemMail>\n  > = new JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>>();\n\n  /**\n   * Événement déclenché lors du changement de l'expéditeur du mail.\n   * Permet d'attacher des gestionnaires personnalisés au changement d'expéditeur.\n   */\n  public onsenderchanged: JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>> =\n    new JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>>();\n\n  /**\n   * Événement déclenché lors du changement de la date du mail.\n   * Permet d'attacher des gestionnaires personnalisés au changement de date.\n   */\n  public ondatechanged: JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>> =\n    new JsEvent<CallbackChangedSimple<HTMLBnumCardItemMail>>();\n  //#endregion Public fields\n\n  //#region Getters\n  /** Référence à la classe HTMLBnumCardItemMail */\n  @Self __!: typeof HTMLBnumCardItemMail;\n\n  /**\n   * Retourne l'élément HTMLBnumDate pour l'override de la date.\n   *\n   * Initialise la variable si elle n'a pas encore été initialisée.\n   */\n  get #_lazyDateOverrideElement(): HTMLBnumDate {\n    return (this.#_dateOverrideElement ??= (() => {\n      const tmp = this.#_queryById<HTMLBnumDate>(\n        this.#_override_date!,\n        this.__.ID_DATE_ELEMENT_OVERRIDE,\n      );\n\n      this.#_configureDateElement(tmp);\n      return tmp;\n    })());\n  }\n\n  // --- Getters pour lire les data-attributs ---\n  /**\n   * Retourne la date du mail, en tenant compte de l'override si présent.\n   */\n  get date(): Date {\n    return this.#_override_date?.hidden === false\n      ? this.#_lazyDateOverrideElement.getDate()!\n      : (this.#_defaultDate?.getDate?.() ?? new Date());\n  }\n  /**\n   * Retourne le sujet du mail depuis l'attribut data.\n   */\n  get #_mailSubject(): string {\n    return this.data(this.__.DATA_SUBJECT) || EMPTY_STRING;\n  }\n  /**\n   * Retourne la date du mail depuis l'attribut data.\n   */\n  get #_mailDate(): string {\n    return this.data(this.__.DATA_DATE) || EMPTY_STRING;\n  }\n  /**\n   * Retourne l'expéditeur du mail depuis l'attribut data.\n   */\n  get #_mailSender(): string {\n    return this.data(this.__.DATA_SENDER) || EMPTY_STRING;\n  }\n  //#endregion Getters\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant.\n   */\n  constructor() {\n    super();\n\n    this.onsenderchanged.add(EVENT_DEFAULT, (sender) => {\n      this.trigger(this.__.EVENT_SENDER_CHANGED, {\n        caller: sender,\n      });\n    });\n\n    this.onsubjectchanged.add(EVENT_DEFAULT, (sender) => {\n      this.trigger(this.__.EVENT_SUBJECT_CHANGED, {\n        caller: sender,\n      });\n    });\n\n    this.ondatechanged.add(EVENT_DEFAULT, (sender) => {\n      this.trigger(this.__.EVENT_DATE_CHANGED, { caller: sender });\n    });\n  }\n\n  /**\n   * Crée le layout du Shadow DOM (avec slots ET overrides).\n   * @param container Le conteneur du Shadow DOM ou un élément HTML.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n    // Hydratation\n\n    this.#_slot_sender = this.#_queryById<HTMLSlotElement>(\n      container,\n      this.__.ID_SENDER_SLOT,\n    );\n    this.#_override_sender = this.#_queryByClass<HTMLSpanElement>(\n      container,\n      this.__.PART_SENDER_OVERRIDE,\n    );\n\n    // On écrase _p_slot car dans notre template, il n'y a pas de slot par défaut\n    this._p_slot = this.#_queryById<HTMLSlotElement>(\n      container,\n      this.__.ID_SUBJECT_SLOT,\n    );\n    this.#_override_subject = this.#_queryByClass<HTMLSpanElement>(\n      container,\n      this.__.PART_SUBJECT_OVERRIDE,\n    );\n\n    this.#_slot_date = this.#_queryById<HTMLSlotElement>(\n      container,\n      this.__.ID_DATE_SLOT,\n    );\n    this.#_override_date = this.#_queryByClass<HTMLSpanElement>(\n      container,\n      this.__.PART_DATE_OVERRIDE,\n    );\n  }\n\n  /**\n   * Crée le contenu par défaut et l'attache aux slots.\n   * Initialise les nœuds pour le sujedate-element-overridet, l'expéditeur et la date.\n   */\n  protected _p_attach(): void {\n    super._p_attach();\n\n    if (this.#_mailSubject !== EMPTY_STRING)\n      this._p_slot!.appendChild(this._p_createTextNode(this.#_mailSubject));\n\n    // Crée le nœud texte pour l'EXPÉDITEUR par défaut\n    if (this.#_mailSender !== EMPTY_STRING)\n      this.#_slot_sender!.appendChild(\n        this._p_createTextNode(this.#_mailSender),\n      );\n\n    if (this.#_mailDate !== EMPTY_STRING) {\n      // Crée l'élément DATE par défaut\n      const defaultDate = HTMLBnumDate.Create(this.#_mailDate);\n      this.#_configureDateElement(defaultDate); // Applique la logique\n      this.#_slot_date!.appendChild(defaultDate);\n      this.#_defaultDate = defaultDate;\n    }\n  }\n\n  /**\n   * Retourne les stylesheets à appliquer au composant.\n   * @returns Liste des CSSStyleSheet à appliquer.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Méthode appelée lors de la mise à jour d'un attribut observé.\n   * @param name Nom de l'attribut.\n   * @param oldVal Ancienne valeur.\n   * @param newVal Nouvelle valeur.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    super._p_update(name, oldVal, newVal);\n\n    if (this.hasAttribute(this.__.ATTRIBUTE_READ))\n      this._p_addState(this.__.STATE_READ);\n  }\n\n  /**\n   * Retourne le template HTML utilisé pour le composant.\n   * @returns Le template HTML.\n   */\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  /**\n   * Force le contenu de l'expéditeur, en ignorant le slot.\n   * @param content Contenu texte ou HTML à afficher comme expéditeur.\n   * @returns L'instance courante pour chaînage.\n   */\n  updateSender(content: string | HTMLElement): this {\n    return this.#_requestUpdateSender(content);\n  }\n\n  /**\n   * Réaffiche le contenu du slot \"sender\" (annule l'override).\n   * @returns L'instance courante pour chaînage.\n   */\n  resetSender(): this {\n    return this.#_requestUpdateSender(this.__.SYMBOL_RESET);\n  }\n\n  /**\n   * Force le contenu du sujet, en ignorant le slot.\n   * @param content Contenu texte ou HTML à afficher comme sujet.\n   * @returns L'instance courante pour chaînage.\n   */\n  updateSubject(content: string | HTMLElement): this {\n    return this.#_requestUpdateSubject(content);\n  }\n\n  /**\n   * Réaffiche le contenu du slot \"subject\" (annule l'override).\n   * @returns L'instance courante pour chaînage.\n   */\n  resetSubject(): this {\n    return this.#_requestUpdateSubject(this.__.SYMBOL_RESET);\n  }\n\n  /**\n   * Force le contenu de la date, en ignorant le slot.\n   * @param content Chaîne, Date ou élément HTML à afficher comme date.\n   * @returns L'instance courante pour chaînage.\n   */\n  updateDate(content: string | Date | HTMLBnumDate): this {\n    return this.#_requestUpdateDate(content);\n  }\n\n  /**\n   * Réaffiche le contenu du slot \"date\" (annule l'override).\n   * @returns L'instance courante pour chaînage.\n   */\n  resetDate(): this {\n    return this.#_requestUpdateDate(this.__.SYMBOL_RESET);\n  }\n  //#endregion Public methods\n  //#region Private methods\n  /**\n   * Met à jour l'affichage de l'expéditeur (slot ou override).\n   * @param content Contenu à afficher ou symbole de reset.\n   */\n  #_updateSender(content: string | HTMLElement | Symbol): void {\n    if (!this.#_override_sender || !this.#_slot_sender) return;\n\n    if (content === this.__.SYMBOL_RESET) {\n      this.#_slot_sender.hidden = false;\n      this.#_override_sender.hidden = true;\n    } else {\n      if (typeof content === 'string')\n        this.#_override_sender.innerHTML = content;\n      else this.#_override_sender.replaceChildren(content as HTMLElement);\n\n      // On cache le slot, on montre l'override\n      this.#_slot_sender.hidden = true;\n      this.#_override_sender.hidden = false;\n    }\n\n    this.onsenderchanged.call(this);\n  }\n\n  /**\n   * Planifie la mise à jour de l'expéditeur.\n   * @param content Contenu à afficher ou symbole de reset.\n   * @returns L'instance courante pour chaînage.\n   */\n  #_requestUpdateSender(content: string | HTMLElement | Symbol): this {\n    (this.#_senderScheduler ??= new Scheduler<string | HTMLElement | Symbol>(\n      (value) => this.#_updateSender(value!),\n    )).schedule(content);\n\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage du sujet (slot ou override).\n   * @param content Contenu à afficher ou symbole de reset.\n   */\n  #_updateSubject(content: string | HTMLElement | Symbol): void {\n    if (!this.#_override_subject || !this._p_slot) return;\n\n    if (content === this.__.SYMBOL_RESET) {\n      this._p_slot.hidden = false;\n      this.#_override_subject.hidden = true;\n    } else if (typeof content === 'string')\n      this.#_override_subject.innerHTML = content;\n    else this.#_override_subject.replaceChildren(content as HTMLElement);\n\n    // On cache le slot, on montre l'override\n    this._p_slot.hidden = true;\n    this.#_override_subject.hidden = false;\n\n    this.onsubjectchanged.call(this);\n  }\n\n  /**\n   * Planifie la mise à jour du sujet.\n   * @param content Contenu à afficher ou symbole de reset.\n   * @returns L'instance courante pour chaînage.\n   */\n  #_requestUpdateSubject(content: string | HTMLElement | Symbol): this {\n    (this.#_subjectScheduler ??= new Scheduler<string | HTMLElement | Symbol>(\n      (value) => this.#_updateSubject(value!),\n    )).schedule(content);\n\n    return this;\n  }\n\n  /**\n   * Met à jour l'affichage de la date (slot ou override).\n   * @param content Contenu à afficher ou symbole de reset.\n   */\n  #_updateDate(content: string | Date | HTMLBnumDate | Symbol): void {\n    if (!this.#_override_date || !this.#_slot_date) return;\n\n    if (content === this.__.SYMBOL_RESET) {\n      this.#_slot_date.hidden = false;\n      this.#_override_date.hidden = true;\n    } else {\n      if (typeof content === 'string' || content instanceof Date)\n        this.#_lazyDateOverrideElement.setDate(content);\n      else\n        this.#_lazyDateOverrideElement.setDate(\n          (content as HTMLBnumDate).getDate()!,\n        );\n\n      this.#_slot_date.hidden = true;\n      this.#_override_date.hidden = false;\n    }\n\n    this.ondatechanged.call(this);\n  }\n\n  /**\n   * Planifie la mise à jour de la date.\n   * @param content Contenu à afficher ou symbole de reset.\n   * @returns L'instance courante pour chaînage.\n   */\n  #_requestUpdateDate(content: string | Date | HTMLBnumDate | Symbol): this {\n    (this.#_dateScheduler ??= new Scheduler<\n      string | Date | HTMLBnumDate | Symbol\n    >((value) => this.#_updateDate(value!))).schedule(content);\n\n    return this;\n  }\n\n  /**\n   * Recherche un élément par son id dans le container donné.\n   * @param container Container dans lequel chercher.\n   * @param id Id de l'élément.\n   * @returns L'élément trouvé.\n   */\n  #_queryById<T extends HTMLElement>(\n    container: ShadowRoot | HTMLElement,\n    id: string,\n  ): T {\n    return container instanceof ShadowRoot\n      ? (container.getElementById(id) as T)\n      : (container.querySelector(`#${id}`) as T);\n  }\n\n  /**\n   * Recherche un élément par sa classe dans le container donné.\n   * @param container Container dans lequel chercher.\n   * @param className Classe de l'élément.\n   * @returns L'élément trouvé.\n   */\n  #_queryByClass<T extends HTMLElement>(\n    container: ShadowRoot | HTMLElement,\n    className: string,\n  ): T {\n    return container instanceof ShadowRoot\n      ? (container.querySelector(`.${className}`) as T)\n      : (container.getElementsByClassName(className)?.[0] as T);\n  }\n\n  /**\n   * Configure le format d'affichage de la date selon la logique métier :\n   * - Affiche l'heure si la date est aujourd'hui.\n   * - Affiche le jour et l'heure si la date est comprise entre hier et il y a 7 jours.\n   * - Sinon, conserve le format par défaut.\n   * @param element Instance de HTMLBnumDate à configurer.\n   */\n  #_configureDateElement(element: HTMLBnumDate): void {\n    this.__.SetDateLogique(element);\n  }\n\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * Applique la logique de formatage de date à un élément HTMLBnumDate.\n   * @param element Élément HTMLBnumDate à configurer.\n   */\n  static SetDateLogique(element: HTMLBnumDate): void {\n    element.formatEvent.add(EVENT_DEFAULT, (param) => {\n      const originalDate = element.getDate();\n      if (!originalDate) return param;\n      if (BnumDateUtils.isToday(originalDate)) {\n        return {\n          date: BnumDateUtils.format(\n            originalDate,\n            BnumDateUtils.getOptionsFromToken(this.TODAY_FORMAT),\n            element.localeElement,\n          ),\n        };\n      }\n      const now = new Date();\n      const startOfInterval = BnumDateUtils.startOfDay(\n        BnumDateUtils.subDays(now, 7),\n      );\n      const endOfInterval = BnumDateUtils.endOfDay(\n        BnumDateUtils.subDays(now, 1),\n      );\n      if (\n        BnumDateUtils.isWithinInterval(originalDate, {\n          start: startOfInterval,\n          end: endOfInterval,\n        })\n      ) {\n        return {\n          date: BnumDateUtils.format(\n            originalDate,\n            BnumDateUtils.getOptionsFromToken(this.WEEK_FORMAT),\n            element.localeElement,\n          ),\n        };\n      }\n      return {\n        date: BnumDateUtils.format(\n          originalDate,\n          BnumDateUtils.getOptionsFromToken(this.OTHER_DAY_FORMAT),\n          element.localeElement,\n        ), // Format par défaut si aucune condition n'est remplie\n      };\n    });\n  }\n\n  static _p_observedAttributes(): string[] {\n    return [...super._p_observedAttributes(), this.ATTRIBUTE_READ];\n  }\n\n  /**\n   * Crée une nouvelle instance du composant avec les valeurs fournies.\n   * @param subject Sujet du mail.\n   * @param sender Expéditeur du mail.\n   * @param date Date du mail\n   * @returns Instance HTMLBnumCardItemMail.\n   */\n  static Create(\n    subject: string,\n    sender: string,\n    date: string | Date,\n  ): HTMLBnumCardItemMail {\n    let node = document.createElement(this.TAG) as HTMLBnumCardItemMail;\n\n    node.attr(this.ATTRIBUTE_DATA_SUBJECT, subject);\n    node.attr(this.ATTRIBUTE_DATA_SENDER, sender);\n\n    if (typeof date === 'string') node.attr(this.ATTRIBUTE_DATA_DATE, date);\n    else node.attr(this.ATTRIBUTE_DATA_DATE, date.toISOString());\n\n    return node;\n  }\n\n  /**\n   * Retourne le tag HTML du composant.\n   */\n  static get TAG(): string {\n    return TAG_CARD_ITEM_MAIL;\n  }\n  //#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement, { CustomDom } from '../../bnum-element';\nimport { HTMLBnumCardItem } from '../card-item/bnum-card-item';\nimport { TAG_CARD_LIST } from '../../../core/utils/constants/tags';\nimport style from './bnum-card-list.less';\nimport { Nullable } from '../../../core/utils/types';\nimport { SchedulerArray } from '../../../core/utils/Scheduler';\nimport { Define, Self, SetAttr } from '../../../core/decorators';\n\n/**\n * Feuille de style CSS pour le composant liste de cartes.\n */\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\n/**\n * Composant liste de cartes Bnum.\n * Permet d'afficher une liste d'éléments de type carte.\n *\n * @structure Default\n * <bnum-card-list>\n *  <bnum-card-item></bnum-card-item>\n *  <bnum-card-item></bnum-card-item>\n *  <bnum-card-item></bnum-card-item>\n * </bnum-card-list>\n *\n * @structure Mail et agenda\n * <bnum-card-list>\n *   <bnum-card-item-mail data-date=\"now\">\n *     <span slot=\"subject\">Sujet par défaut</span>\n *     <span slot=\"sender\">Expéditeur par défaut</span>\n *   </bnum-card-item-mail>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * </bnum-card-list>\n *\n * @structure Dans une card\n * <bnum-card>\n * <bnum-card-title slot=\"title\" data-icon=\"info\">Diverses informations</bnum-card-title>\n * <bnum-card-list>\n *   <bnum-card-item-mail data-date=\"now\">\n *     <span slot=\"subject\">Sujet par défaut</span>\n *     <span slot=\"sender\">Expéditeur par défaut</span>\n *   </bnum-card-item-mail>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * </bnum-card-list>\n * </bnum-card>\n *\n * @slot (default) - Contenu de la liste de cartes (éléments HTMLBnumCardItem)\n *\n *\n */\n@Define()\nexport class HTMLBnumCardList extends BnumElement {\n  //#region Constants\n  /**\n   * Symbole utilisé pour réinitialiser la liste.\n   */\n  static readonly SYMBOL_RESET = Symbol('reset');\n  //#endregion Constants\n  //#region Private fields\n  /**\n   * Ordonnanceur de modifications de la liste.\n   */\n  #_modifierScheduler: Nullable<SchedulerArray<HTMLBnumCardItem>> = null;\n  //#endregion Private fields\n\n  /** Référence à la classe HTMLBnumCardList */\n  @Self _!: typeof HTMLBnumCardList;\n\n  //#region Lifecycle\n  /**\n   * Constructeur de la liste de cartes.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Retourne la feuille de style à appliquer au composant.\n   * @returns {CSSStyleSheet[]} Feuilles de style CSS\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   * @param container Racine du shadow DOM ou élément HTML\n   */\n  @SetAttr('role', 'list')\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n    container.appendChild(this._p_createSlot());\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  /**\n   * Ajoute un ou plusieurs éléments de type carte à la liste.\n   * @param nodes Éléments HTMLBnumCardItem à ajouter\n   * @returns {this} L'instance courante\n   */\n  public add(...nodes: HTMLBnumCardItem[]): this {\n    return this.#_requestModifier(nodes);\n  }\n\n  /**\n   * Vide la liste de toutes ses cartes.\n   * @returns {this} L'instance courante\n   */\n  public clear(): this {\n    return this.#_requestModifier(this._.SYMBOL_RESET);\n  }\n  //#endregion Public methods\n  //#region  Private methods\n  #_requestModifier(items: HTMLBnumCardItem[] | Symbol): this {\n    (this.#_modifierScheduler ??= new SchedulerArray<HTMLBnumCardItem>(\n      (values) => this.#_modifier(values!),\n      this._.SYMBOL_RESET,\n    )).schedule(items);\n\n    return this;\n  }\n  #_modifier(items: HTMLBnumCardItem[] | Symbol): void {\n    if (items === this._.SYMBOL_RESET) {\n      this.innerHTML! = EMPTY_STRING;\n    } else this.append(...(items as HTMLBnumCardItem[]));\n  }\n  //#endregion  Private methods\n\n  //#region Static methods\n  /**\n   * Crée une nouvelle instance de liste de cartes avec des éléments optionnels.\n   * @param items Tableau d'éléments HTMLBnumCardItem ou null\n   * @returns {HTMLBnumCardList} Nouvelle instance de liste de cartes\n   */\n  static Create(items: Nullable<HTMLBnumCardItem[]> = null): HTMLBnumCardList {\n    const node = document.createElement(this.TAG) as HTMLBnumCardList;\n\n    if (items && items.length > 0) {\n      node.add(\n        ...items.filter((item): item is HTMLBnumCardItem => item !== null),\n      );\n    }\n\n    return node;\n  }\n\n  /**\n   * Retourne le tag HTML du composant.\n   */\n  static get TAG(): string {\n    return TAG_CARD_LIST;\n  }\n  //#endregion Static methods\n}\n","import style from './bnum-card-title.less';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { TAG_CARD_TITLE } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Define, Self } from '../../../core/decorators';\n\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst ATTRIBUTE_URL = 'url';\nconst ATTRIBUTE_DATA_ICON = 'icon';\nconst SLOT_NAME_ICON = 'icon';\nconst CLASS_LINK = 'card-title-link';\nconst STATE_URL = 'url';\nconst STATE_WITHOUT_URL = 'without-url';\nconst CLASS_ICON_TITLE = 'card-icon-title';\nconst ID_SLOT_ICON = 'sloticon';\nconst ID_SLOT_TEXT = 'mainslot';\nconst ID_CUSTOM_BODY = 'custombody';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = BnumElement.CreateTemplate(`\n      <h2><a class=\"${CLASS_LINK}\">\n        <span class=\"container\">\n          <slot id=\"${ID_SLOT_ICON}\" name=\"${SLOT_NAME_ICON}\"></slot>\n          <${HTMLBnumIcon.TAG} class=\"${CLASS_ICON_TITLE}\" hidden></${HTMLBnumIcon.TAG}>\n        </span>\n        <span class=\"container\">\n          <slot id=\"${ID_SLOT_TEXT}\"></slot>\n          <span id=\"${ID_CUSTOM_BODY}\" hidden></span>\n        </span>\n      </a></h2>\n    `);\n//#endregion Template\n\n/**\n * Composant représentant le titre d'une carte, pouvant inclure une icône et un lien.\n * Permet d'afficher un titre enrichi avec une icône et éventuellement un lien cliquable.\n *\n * @structure Cas url et icône\n * <bnum-card-title data-icon=\"labs\" url=\"https://example.com\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas icône uniquement\n * <bnum-card-title data-icon=\"labs\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas lien uniquement\n * <bnum-card-title url=\"https://example.com\">Titre de la carte</bnum-card-title>\n *\n * @structure Cas texte seul\n * <bnum-card-title>Titre de la carte</bnum-card-title>\n *\n * @structure Cas icône via slot\n * <bnum-card-title>\n * <bnum-icon slot=\"icon\">drive_folder_upload</bnum-icon>\n * Titre de la carte\n * </bnum-card-title>\n *\n * @state url - Actif lorsque le titre contient un lien.\n * @state without-url - Actif lorsque le titre ne contient pas de lien.\n *\n * @slot (default) - Titre de la carte (texte ou HTML)\n * @slot icon - Icône personnalisée à afficher avant le titre. Note: si une icône est définie via l'attribut `data-icon` ou via la propriété `icon`, ce slot sera ignoré.\n *\n * @cssvar {flex} --bnum-card-title-display - Définit le mode d'affichage du titre de la carte.\n * @cssvar {center} --bnum-card-title-align-items - Définit l'alignement vertical des éléments dans le titre de la carte.\n * @cssvar {var(--bnum-space-s, 10px)} --bnum-card-title-gap - Définit l'espacement entre l'icône et le texte du titre.\n */\n@Define()\nexport class HTMLBnumCardTitle extends BnumElement {\n  //#region Constants\n  /**\n   * Nom de l'attribut pour définir l'URL du lien du titre de la carte.\n   * @attr {string | null} (optional) url - URL du lien du titre de la carte\n   */\n  static readonly ATTRIBUTE_URL: string = ATTRIBUTE_URL;\n  /**\n   * Nom de la data pour définir l'icône du titre de la carte.\n   * @attr {string | null} (optional) data-icon - Nom de l'icône (Material Symbols) à afficher avant le titre\n   */\n  static readonly ATTRIBUTE_DATA_ICON: string = ATTRIBUTE_DATA_ICON;\n  /**\n   * Nom du slot pour l'icône du titre de la carte.\n   */\n  static readonly SLOT_NAME_ICON: string = SLOT_NAME_ICON;\n  /**\n   * Nom de la classe au titre de la carte lorsqu'un url est défini\n   */\n  static readonly CLASS_LINK: string = CLASS_LINK;\n  /**\n   * Nom de l'état lorsque le titre contient un lien.\n   */\n  static readonly STATE_URL: string = STATE_URL;\n  /**\n   * Nom de l'état lorsque le titre ne contient pas de lien.\n   */\n  static readonly STATE_WITHOUT_URL: string = STATE_WITHOUT_URL;\n  /**\n   * Nom de la classe pour l'icône du titre de la carte.\n   */\n  static readonly CLASS_ICON_TITLE: string = CLASS_ICON_TITLE;\n  /**\n   * ID du slot pour l'icône du titre de la carte.\n   */\n  static readonly ID_SLOT_ICON: string = ID_SLOT_ICON;\n  /**\n   * ID du slot pour le texte du titre de la carte.\n   */\n  static readonly ID_SLOT_TEXT: string = ID_SLOT_TEXT;\n  /**\n   * ID de l'élément personnalisé pour le corps du titre de la carte.\n   */\n  static readonly ID_CUSTOM_BODY: string = ID_CUSTOM_BODY;\n  //#endregion Constants\n\n  //#region Private fields\n  /**\n   * Élément représentant l'icône du titre de la carte.\n   * Peut être un composant icône ou un slot HTML.\n   * @private\n   */\n  #_iconElement: HTMLBnumIcon | null = null;\n  #_iconSlotElement: Nullable<HTMLSlotElement> = null;\n\n  /**\n   * Slot pour le texte du titre de la carte.\n   * @private\n   */\n  #_textSlotElement: HTMLSlotElement | null = null;\n  #_customBodyElement: HTMLSpanElement | null = null;\n\n  /**\n   * Élément lien (<a>) englobant le titre si une URL est définie.\n   * @private\n   */\n  #_linkElement: HTMLAnchorElement | null = null;\n  #_internals: ElementInternals = this.attachInternals();\n  #_domScheduler: Nullable<Scheduler<void>> = null;\n  #_bodyScheduler: Nullable<Scheduler<HTMLElement | string | Text>> = null;\n  #_initBody: Nullable<HTMLElement | string | Text> = null;\n  //#endregion Private fields\n\n  //#region Getter/Setters\n  /** Référence à la classe HTMLBnumCardTitle */\n  @Self _!: typeof HTMLBnumCardTitle;\n\n  /**\n   * Obtient le nom de l'icône associée au titre de la carte.\n   * @returns {string | null} Nom de l'icône ou null si aucune icône n'est définie\n   */\n  public get icon(): string | null {\n    return this.data(this._.ATTRIBUTE_DATA_ICON);\n  }\n\n  /**\n   * Définit le nom de l'icône associée au titre de la carte.\n   * Met à jour le DOM pour refléter le changement.\n   * @param {string | null} v Nom de l'icône ou null\n   */\n  public set icon(v: string | null) {\n    if (this.alreadyLoaded) {\n      this._p_setData(this._.ATTRIBUTE_DATA_ICON, v);\n      this.#_requestUpdateDom();\n    } else {\n      const fromAttribute = true;\n      this.data(this._.ATTRIBUTE_DATA_ICON, v, fromAttribute);\n    }\n  }\n\n  /**\n   * Obtient l'URL du lien du titre de la carte.\n   * @returns {string | null} URL ou null si aucun lien n'est défini\n   */\n  public get url(): string | null {\n    return this.getAttribute(this._.ATTRIBUTE_URL);\n  }\n\n  /**\n   * Définit l'URL du lien du titre de la carte.\n   * Ajoute ou retire l'attribut selon la valeur.\n   * @param {string | null} v URL ou null\n   */\n  public set url(v: string | null) {\n    if (v) this.setAttribute(this._.ATTRIBUTE_URL, v);\n    else this.removeAttribute(this._.ATTRIBUTE_URL);\n  }\n  //#endregion Getter/Setters\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant HTMLBnumCardTitle.\n   * Initialise le composant sans ajouter d'éléments DOM.\n   */\n  constructor() {\n    super();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM du composant dans le conteneur donné.\n   * Ajoute l'icône, le texte et le lien selon les propriétés définies.\n   * @param {ShadowRoot | HTMLElement} container Conteneur dans lequel construire le DOM\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    this.#_iconSlotElement = container.querySelector(`#${this._.ID_SLOT_ICON}`);\n    this.#_textSlotElement = container.querySelector(`#${this._.ID_SLOT_TEXT}`);\n    this.#_customBodyElement = container.querySelector(\n      `#${this._.ID_CUSTOM_BODY}`,\n    );\n    this.#_linkElement = container.querySelector(`.${this._.CLASS_LINK}`);\n    this.#_iconElement = container.querySelector(`.${this._.CLASS_ICON_TITLE}`);\n\n    this.#_updateDOM();\n\n    if (this.#_initBody) {\n      this.#_updateBody(this.#_initBody);\n      this.#_initBody = null;\n    }\n  }\n\n  protected _p_isUpdateForAllAttributes(): boolean {\n    return true;\n  }\n\n  /**\n   * Méthode appelée lors de la mise à jour d'un attribut observé.\n   * Met à jour le DOM du composant.\n   * @param {string} name Nom de l'attribut modifié\n   * @param {string | null} oldVal Ancienne valeur\n   * @param {string | null} newVal Nouvelle valeur\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (this.alreadyLoaded) this.#_updateDOM();\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  /**\n   * Demande une mise à jour du DOM du composant.\n   * Utilise un ordonnanceur pour éviter les mises à jour redondantes.\n   * @private\n   */\n  #_requestUpdateDom(): void {\n    this.#_domScheduler ??= new Scheduler<void>(() => {\n      this.#_updateDOM();\n    });\n    this.#_domScheduler.schedule();\n  }\n\n  /**\n   * Met à jour le DOM du composant selon les propriétés actuelles.\n   * Affiche ou masque l'icône et met à jour le lien si nécessaire.\n   * @private\n   */\n  #_updateDOM(): void {\n    const url = this.url;\n    const icon = this.icon;\n\n    this.#_internals.states.clear();\n\n    if (icon) {\n      this.#_iconElement!.icon = icon;\n      this.#_iconElement!.hidden = false;\n      this.#_iconSlotElement!.hidden = true;\n    } else this.#_iconElement!.hidden = true;\n\n    if (url) {\n      this.#_linkElement!.href = url;\n      this.#_internals.states.add(this._.STATE_URL);\n\n      this.#_linkElement!.removeAttribute('role');\n      this.#_linkElement!.removeAttribute('aria-disabled');\n    } else {\n      this.#_linkElement!.removeAttribute('href');\n      this.#_internals.states.add(this._.STATE_WITHOUT_URL);\n    }\n  }\n\n  /**\n   * Met à jour le corps du titre de la carte.\n   * @param element Elément HTML, texte ou nœud Text à insérer dans le titre\n   * @private\n   */\n  #_updateBody(element: HTMLElement | string | Text): void {\n    this.#_customBodyElement!.hidden = false;\n    this.#_textSlotElement!.hidden = true;\n\n    if (typeof element === 'string')\n      this.#_customBodyElement!.textContent = element;\n    else this.#_customBodyElement!.appendChild(element);\n  }\n  //#endregion Private methods\n\n  //#region Public methods\n\n  /**\n   * Met à jour le contenu du titre de la carte.\n   * Remplace le texte ou ajoute un élément HTML comme corps du titre.\n   * @param {HTMLElement | string | Text} element Le contenu à insérer (texte, élément ou nœud Text)\n   * @returns {HTMLBnumCardTitle} Retourne l'instance pour chaînage\n   */\n  public updateBody(\n    element: HTMLElement | string | Text,\n    { force = false } = {},\n  ): HTMLBnumCardTitle {\n    this.#_bodyScheduler ??= new Scheduler<HTMLElement | string | Text>(\n      (el: Nullable<HTMLElement | string | Text>) => {\n        this.#_updateBody(el!);\n      },\n    );\n\n    if (!this.alreadyLoaded) this.#_initBody = element;\n    else if (force) this.#_bodyScheduler.call(element);\n    else this.#_bodyScheduler.schedule(element);\n\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Static methods\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   * Permet de réagir aux changements de ces attributs.\n   * @returns {string[]} Liste des attributs observés\n   */\n  static _p_observedAttributes(): string[] {\n    return [this.ATTRIBUTE_URL];\n  }\n\n  /**\n   * Crée dynamiquement une instance du composant HTMLBnumCardTitle.\n   * Permet d'initialiser le titre avec un texte, une icône et/ou un lien.\n   * @param {HTMLElement | string | Text} text Le contenu du titre (élément, texte ou chaîne)\n   * @param {{ icon?: string | null; link?: string | null }} options Options pour l'icône et le lien\n   * @returns {HTMLBnumCardTitle} Instance du composant configurée\n   */\n  public static Create(\n    text: HTMLElement | string | Text,\n    {\n      icon = null,\n      link = null,\n    }: { icon?: string | null; link?: string | null },\n  ): HTMLBnumCardTitle {\n    let node: HTMLBnumCardTitle = document.createElement(\n      this.TAG,\n    ) as HTMLBnumCardTitle;\n    if (icon) node.icon = icon;\n    if (link) node.url = link;\n\n    return node.updateBody(text, { force: true });\n  }\n\n  /**\n   * Génère le HTML d'un titre de carte avec icône et lien optionnels.\n   * Utile pour créer dynamiquement le composant dans une chaîne HTML.\n   * @param {string | null} icon Icône à afficher\n   * @param {string} text Texte du titre\n   * @param {string | null} link URL du lien\n   * @returns {string} HTML généré\n   */\n  public static Generate(\n    icon: string | null,\n    text: string,\n    link: string | null,\n  ): string {\n    let data = [];\n\n    if (icon) data.push(`data-icon=\"${icon}\"`);\n    if (link) data.push(`url=\"${link}\"`);\n\n    return `<${this.TAG} ${data.join(' ')}>${text}</${this.TAG}>`;\n  }\n\n  /**\n   * Retourne le tag HTML du composant.\n   * Permet d'obtenir le nom du composant pour l'utiliser dans le DOM.\n   * @readonly\n   * @returns {string} Tag HTML\n   */\n  public static get TAG(): string {\n    return TAG_CARD_TITLE;\n  }\n  //#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport BnumElement from '../../bnum-element';\nimport { Define, SetAttr } from '../../../core/decorators';\nimport { TAG_FOLDER_LIST } from '../../../core/utils/constants/tags';\n\n@Define()\nexport class HTMLBnumFolderList extends BnumElement {\n  constructor() {\n    super();\n  }\n\n  @SetAttr('role', 'group')\n  protected _p_preload(): void {}\n\n  protected _p_isShadowElement(): boolean {\n    return false;\n  }\n\n  static Write(\n    content: string = EMPTY_STRING,\n    attrs: Record<string, string> = {},\n  ): string {\n    const attributes = this._p_WriteAttributes(attrs);\n    return `<${this.TAG} ${attributes}>${content}</${this.TAG}>`;\n  }\n\n  static get TAG() {\n    return TAG_FOLDER_LIST;\n  }\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Nullable } from '../../../core/utils/types';\nimport { HTMLBnumBadge } from '../../atoms/badge/bnum-badge';\nimport { HTMLBnumButtonIcon } from '../../atoms/icon-button/bnum-icon-button';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { HTMLBnumFolderList } from '../../organisms/folder-list/bnum-folder-list';\nimport style from './bnum-folder.less';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\nimport { TAG_FOLDER } from '../../../core/utils/constants/tags';\n\n/**\n * Structure de données pour l'événement personnalisé de changement de statut \"non-lu\".\n */\ninterface UnreadChangedEventDetail {\n  unread: number;\n  caller: HTMLBnumFolder;\n}\n\n/**\n * Interface représentant le cache des éléments du DOM interne (Shadow Root).\n * Permet un accès rapide sans requêter le DOM à chaque fois.\n */\ndeclare type Ui = {\n  name: Nullable<HTMLLinkElement>;\n  icon: Nullable<HTMLBnumIcon>;\n  toggle: Nullable<HTMLBnumButtonIcon>;\n  badge: Nullable<HTMLBnumBadge>;\n  container: Nullable<HTMLElement>;\n};\n\nconst STYLE = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n//#region Template\nconst TEMPLATE = BnumElementInternal.CreateTemplate(\n  `\n    <div class=\"bal-container\">\n      <div class=\"bal-container__title\">\n        ${HTMLBnumIcon.Write('square', { class: 'bal-container__title__icon' })}\n        <a tabindex=\"-1\" id=\"bal-name\" class=\"bal-container__title__name\"></a>\n      </div>\n      <div class=\"bal-container__left\">\n        ${HTMLBnumBadge.Write('0', { circle: 'true', class: 'bal-container__left__badge' })}\n        ${HTMLBnumButtonIcon.Write('keyboard_arrow_down', { tabindex: '-1', class: 'bal-container__toggle flex' })}\n      </div>\n    </div>\n    ${HTMLBnumFolderList.Write('<slot name=\"folders\"></slot>', { class: 'bal-sub-folders' })}\n  `,\n);\n//#endregion Template\n\n/**\n * Composant Web Component représentant un dossier dans une structure arborescente.\n * Gère l'affichage hiérarchique, les badges de notification (non-lus), la sélection et l'état d'expansion.\n *\n * @structure Base\n * <bnum-folder\n * folder-id=\"identifiant-unique-du-dossier\"\n * id=\"rcmliINBOX\"\n * label=\"Dossier Racine\"\n * unread=\"5\"\n * icon=\"folder\"\n * level=\"0\"\n * is-virtual=\"false\"\n * is-collapsed=\"true\"\n * is-selected=\"false\"\n * >\n * </bnum-folder>\n *\n * @structure Avec de sous-dossiers\n * <bnum-tree id=\"rcmliTREE\">\n * <bnum-folder\n * folder-id=\"identifiant-unique-du-dossier\"\n * id=\"rcmliINBOX\"\n * label=\"Dossier Racine\"\n * unread=\"17\"\n * icon=\"folder\"\n * level=\"0\"\n * is-virtual=\"true\"\n * is-collapsed=\"true\"\n * is-selected=\"false\"\n * >\n *  <bnum-folder\n *  slot=\"folders\"\n *  folder-id=\"identifiant-unique-du-dossier-sub\"\n *  id=\"rcmliSUBFOLDER\"\n *  label=\"Dossier enfant\"\n *  unread=\"17\"\n *  icon=\"folder\"\n *  level=\"1\"\n *  is-virtual=\"false\"\n *  is-collapsed=\"true\"\n *  is-selected=\"false\"\n *  >\n *  </bnum-folder>\n *  <bnum-folder\n *  slot=\"folders\"\n *  folder-id=\"identifiant-unique-du-dossier-sub2\"\n *  id=\"rcmliSUBFOLDER\"\n *  label=\"Dossier enfant 2\"\n *  unread=\"0\"\n *  icon=\"folder\"\n *  level=\"1\"\n *  is-virtual=\"false\"\n *  is-collapsed=\"true\"\n *  is-selected=\"false\"\n *  >\n *   <bnum-folder\n *   slot=\"folders\"\n *   folder-id=\"identifiant-unique-du-dossier--sub-sub2\"\n *   id=\"rcmliSUBFOLDERSUB\"\n *   label=\"Dossier enfant enfant\"\n *   unread=\"0\"\n *   icon=\"folder\"\n *   level=\"2\"\n *   is-virtual=\"false\"\n *   is-collapsed=\"true\"\n *   is-selected=\"false\"\n *   >\n *   </bnum-folder>\n *  </bnum-folder>\n * </bnum-folder>\n * </bnum-tree>\n *\n *\n * @slot folders - Slot pour insérer des sous-dossiers (`bnum-folder`).\n *\n * @state no-subfolders - Indique que le dossier n'a pas de sous-dossiers.\n * @state triple-digit-unread - Indique que le compteur de non-lu est à 3 chiffres (99+).\n * @state double-digit-unread - Indique que le compteur de non-lu est à 2 chiffres (10-99).\n * @state single-digit-unread - Indique que le compteur de non-lu est à 1 chiffre (1-9).\n *\n * @extends BnumElementInternal\n * @fires bnum-folder:unread-changed - Lorsqu'un compteur de non-lu est mis à jour.\n * @fires bnum-folder:select - Lorsque le dossier est sélectionné.\n * @fires bnum-folder:toggle - Lorsque le dossier est plié ou déplié.\n *\n * @cssvar {0.5em} --bnum-folder-indentation-base - Unité de base pour le calcul du décalage (padding-left) par niveau de profondeur.\n * @cssvar {0} --internal-bnum-folder-level - Variable interne (pilotée par JS) indiquant le niveau de profondeur actuel.\n * @cssvar {Calculated} --bnum-folder-indentation - Valeur finale du padding-left (base * level).\n * @cssvar {block} --bnum-folder-display - Type d'affichage du composant host.\n * @cssvar {100%} --bnum-folder-width - Largeur du composant host.\n * @cssvar {10px 15px} --bnum-folder-title-padding - Espacement interne du conteneur flex (Standard : 10px vertical, 15px horizontal).\n * @cssvar {10px} --bnum-folder-gap - Espace entre l'icône, le titre et les badges.\n * @cssvar {125px} --bnum-folder-text-ellipisis-max-width - Largeur maximale du libellé avant troncation.\n * @cssvar {inherit} --bnum-folder-icon-color - Couleur de l'icône du dossier.\n * @cssvar {5px} --bnum-badge-padding - Padding interne pour réduire la taille du badge (calcul de la taille).\n * @cssvar {#2e2eff} --bnum-color-primary-active - Couleur de fond du badge en mode cumulatif (Blue Thunder Active).\n * @cssvar {solid 1px #ddd} --bnum-border-in-column - Bordure inférieure appliquée aux dossiers de niveau 0.\n * @cssvar {15px 15px} --bnum-folder-bal-title-padding - Padding spécifique pour les dossiers racines (15px vertical, 15px horizontal).\n * @cssvar {#c1c1fb} --bnum-color-list-hover - Couleur de fond au survol d'un dossier interactif (Blue List Hover).\n * @cssvar {#e3e3fd} --bnum-color-list - Couleur de fond d'un dossier sélectionné (Blue List).\n * @cssvar {#adadf9} --bnum-color-list-drag - Couleur de fond lors du dragover (Blue List Active).\n */\n@Define()\nexport class HTMLBnumFolder extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Attribut indiquant si le dossier est replié.\n   * @attr {boolean} is-collapsed (default: true) - Indique si le dossier est visuellement replié.\n   */\n  static readonly ATTR_IS_COLLAPSED = 'is-collapsed';\n  /**  Attribut indiquant si le dossier est virtuel (non cliquable/sélectionnable).\n   * @attr {boolean} is-virtual (default: true) - Indique si le dossier est virtuel.\n   */\n  static readonly ATTR_IS_VIRTUAL = 'is-virtual';\n  /**  Attribut indiquant si le dossier est actuellement sélectionné.\n   * @attr {boolean} is-selected (default: false) - Indique si le dossier est sélectionné.\n   */\n  static readonly ATTR_IS_SELECTED = 'is-selected';\n  /**  Attribut définissant le nombre d'éléments non lus.\n   * @attr {number} unread (default: 0) - Nombre d'éléments non lus dans le dossier.\n   */\n  static readonly ATTR_UNREAD = 'unread';\n  /**  Attribut définissant la profondeur du dossier dans l'arbre.\n   * @attr {number} level (default: 0) - Niveau de profondeur du dossier dans l'arborescence.\n   */\n  static readonly ATTR_LEVEL = 'level';\n  /**  Attribut pour le libellé du dossier.\n   * @attr {string} label (default: /) - Libellé (nom) du dossier.\n   */\n  static readonly ATTR_LABEL = 'label';\n  /**  Attribut définissant l'icône associée.\n   * @attr {string} icon (default: /) - Nom de l'icône à afficher pour le dossier.\n   */\n  static readonly ATTR_ICON = 'icon';\n  /**  Attribut ARIA role.\n   * @attr {string} role - Rôle ARIA pour l'accessibilité. Défini par l'élément.\n   */\n  static readonly ATTR_ROLE = 'role';\n  /**  Attribut title natif. */\n  static readonly ATTR_TITLE = 'title';\n\n  // Events\n  /**  Événement natif de clic.\n   * @event click\n   * @detail MouseEvent\n   */\n  static readonly EVENT_CLICK = 'click';\n  /**  Événement custom pour le changement de non-lu.\n   * @event bnum-folder:unread-changed\n   * @detail UnreadChangedEventDetail\n   */\n  static readonly EVENT_UNREAD_CHANGED = 'bnum-folder:unread-changed';\n  /**  Événement custom de sélection.\n   * @event bnum-folder:select\n   * @detail { caller: HTMLBnumFolder; innerEvent?: Event }\n   */\n  static readonly EVENT_SELECT = 'bnum-folder:select';\n  /**  Événement custom de bascule (plié/déplié).\n   * @event bnum-folder:toggle\n   * @detail { caller: HTMLBnumFolder; innerEvent?: Event; collapsed: boolean }\n   */\n  static readonly EVENT_TOGGLE = 'bnum-folder:toggle';\n\n  // CSS Classes (Selectors & Template)\n  /**  Classe du conteneur principal (flex row). */\n  static readonly CLASS_CONTAINER = 'bal-container';\n  /**  Conteneur gauche regroupant l'icône et le nom. */\n  static readonly CLASS_TITLE = 'bal-container__title';\n  /**  Icône principale du dossier (ex: dossier, fichier). */\n  static readonly CLASS_TITLE_ICON = 'bal-container__title__icon';\n  /**  Libellé (nom) du dossier. */\n  static readonly CLASS_TITLE_NAME = 'bal-container__title__name';\n  /**  Conteneur droit (zone d'actions et métadonnées). */\n  static readonly CLASS_LEFT = 'bal-container__left';\n  /**  Badge de notification (compteur non-lu). */\n  static readonly CLASS_LEFT_BADGE = 'bal-container__left__badge';\n  /**  Bouton de bascule (toggle) pour plier/déplier. */\n  static readonly CLASS_TOGGLE = 'bal-container__toggle';\n  /**  Conteneur des enfants (slot). */\n  static readonly CLASS_SUB_FOLDERS = 'bal-sub-folders';\n  /**  Utilitaire pour l'affichage flexbox. */\n  static readonly CLASS_FLEX = 'flex';\n  /**  Modificateur CSS du badge pour le mode cumulatif (dossier plié). */\n  static readonly CLASS_IS_CUMULATIVE = 'is-cumulative';\n\n  // IDs\n  /**  ID interne pour l'ancre du nom (a11y/focus). */\n  static readonly ID_NAME = 'bal-name';\n\n  // States\n  /**  État : Dossier feuille (sans enfants). */\n  static readonly STATE_NO_SUBFOLDERS = 'no-subfolders';\n  /**  État : Compteur à 3 chiffres (ou 99+). */\n  static readonly STATE_TRIPLE_DIGIT = 'triple-digit-unread';\n  /**  État : Compteur à 2 chiffres (10-99). */\n  static readonly STATE_DOUBLE_DIGIT = 'double-digit-unread';\n  /**  État : Compteur à 1 chiffre (1-9). */\n  static readonly STATE_SINGLE_DIGIT = 'single-digit-unread';\n  /**  État : Aucun non-lu. */\n  static readonly STATE_NO_UNREAD = 'no-unread';\n\n  // Values & Configs\n  /** Valeur min affichage compteur (0). */\n  static readonly VAL_MIN_UNREAD = 0;\n  /** Valeur max avant troncation (99). */\n  static readonly VAL_MAX_UNREAD = 99;\n  /**  Chaîne 'true'. */\n  static readonly VAL_TRUE = 'true';\n  /**  Chaîne 'false'. */\n  static readonly VAL_FALSE = 'false';\n  /**  Texte affiché au-delà du max (\"99+\"). */\n  static readonly VAL_99_PLUS = `${this.VAL_MAX_UNREAD}+`;\n  /**  Chaîne \"0\". */\n  static readonly VAL_ZERO = '0';\n  /**  Rôle ARIA 'treeitem'. */\n  static readonly VAL_ROLE_TREEITEM = 'treeitem';\n  /**  Attribut ARIA 'aria-expanded'. */\n  static readonly ARIA_EXPANDED = 'aria-expanded';\n  /**  Attribut ARIA 'aria-selected'. */\n  static readonly ARIA_SELECTED = 'aria-selected';\n  /**  Var CSS pour l'indentation (padding-left). */\n  static readonly CSS_VAR_LEVEL = '--internal-bnum-folder-level';\n\n  // Icons\n  /**  Icône défaut (carré/dossier). */\n  static readonly ICON_SQUARE = 'square';\n  /**  Icône déplié (flèche bas). */\n  static readonly ICON_ARROW_DOWN = 'keyboard_arrow_down';\n  /**  Icône plié (flèche haut). */\n  static readonly ICON_ARROW_UP = 'keyboard_arrow_up';\n  //#endregion Constants\n\n  //#region Private fields\n  /**\n   * Cache pour les éléments internes du Shadow DOM.\n   * Initialisé lors de `_p_buildDOM`.\n   * @private\n   * @type {Ui}\n   */\n  #_ui: Ui = {\n    name: null,\n    icon: null,\n    toggle: null,\n    badge: null,\n    container: null,\n  };\n\n  /**\n   * Compteur interne des éléments non lus propres à ce dossier (hors enfants).\n   * @private\n   * @type {number}\n   */\n  #_selfUnread: number = 0;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumFolder */\n  @Self _!: typeof HTMLBnumFolder;\n\n  /**\n   * Indique si le dossier est visuellement replié.\n   * @returns {boolean} `true` si l'attribut `is-collapsed` est à 'true'.\n   */\n  get collapsed(): boolean {\n    return this.getAttribute(this._.ATTR_IS_COLLAPSED) === this._.VAL_TRUE;\n  }\n\n  /**\n   * Récupère la liste des classes CSS appliquées à l'élément hôte.\n   * @returns {string[]} Un tableau des classes.\n   */\n  get classes(): string[] {\n    return Array.from(this.classList);\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  /**\n   * Constructeur du composant.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * Récupère les feuilles de style à appliquer au Shadow DOM.\n   * @protected\n   * @returns {CSSStyleSheet[]} Tableau des feuilles de styles.\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), STYLE];\n  }\n\n  /**\n   * Fournit le template HTML du composant.\n   * @protected\n   * @returns {HTMLTemplateElement | null} Le template.\n   */\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM et initialise les références UI et les écouteurs d'événements internes.\n   * @protected\n   * @param container - Le conteneur racine.\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    super._p_buildDOM(container);\n\n    this.#_ui.name = container.querySelector<HTMLLinkElement>(\n      `#${this._.ID_NAME}`,\n    );\n    this.#_ui.icon = container.querySelector<HTMLBnumIcon>(\n      `.${this._.CLASS_TITLE_ICON}`,\n    );\n    this.#_ui.toggle = container.querySelector<HTMLBnumButtonIcon>(\n      `.${this._.CLASS_TOGGLE}`,\n    );\n    this.#_ui.badge = container.querySelector<HTMLBnumBadge>(\n      `.${this._.CLASS_LEFT_BADGE}`,\n    );\n    this.#_ui.container = container.querySelector<HTMLElement>(\n      `.${this._.CLASS_CONTAINER}`,\n    );\n\n    this.#_ui.container?.addEventListener?.(this._.EVENT_CLICK, (e: Event) => {\n      this.select(e);\n    });\n\n    this.#_ui.toggle?.addEventListener?.(this._.EVENT_CLICK, (e: Event) => {\n      this.toggle(e);\n    });\n  }\n\n  /**\n   * Appelé lorsque le composant est attaché au DOM.\n   * Initialise les états par défaut et les écouteurs globaux.\n   * @protected\n   */\n  protected _p_attach(): void {\n    super._p_attach();\n\n    if (this.childElementCount === 0) {\n      this._p_addState(this._.STATE_NO_SUBFOLDERS);\n    } else {\n      this.addEventListener(\n        this._.EVENT_UNREAD_CHANGED,\n        this.#_onChildUnreadChanged.bind(this),\n      );\n    }\n\n    if (this.hasAttribute(this._.ATTR_IS_COLLAPSED) === false) {\n      this.setAttribute(this._.ATTR_IS_COLLAPSED, this._.VAL_TRUE);\n    }\n\n    this.addEventListener(\n      this._.EVENT_SELECT,\n      this.#_onFolderSelect.bind(this),\n    );\n\n    // Initialisation des valeurs visuelles basées sur les attributs initiaux\n    this.attr(this._.ATTR_ROLE, this._.VAL_ROLE_TREEITEM)\n      .#_updateIcon(this.attr(this._.ATTR_ICON) ?? EMPTY_STRING)\n      .#_updateLabel(this.attr(this._.ATTR_LABEL) ?? EMPTY_STRING)\n      .#_updateLevel(\n        this.attr(this._.ATTR_LEVEL) ? +this.attr(this._.ATTR_LEVEL)! : 0,\n      )\n      .#_updateSelected(this.attr(this._.ATTR_IS_SELECTED) === this._.VAL_TRUE)\n      .#_updateIsCollapsed(\n        this.attr(this._.ATTR_IS_COLLAPSED) === this._.VAL_TRUE,\n      )\n      .#_updateUnread(\n        this.attr(this._.ATTR_UNREAD)\n          ? +this.attr(this._.ATTR_UNREAD)!\n          : this._.VAL_MIN_UNREAD,\n      );\n  }\n\n  /**\n   * Gère la mise à jour des attributs observés.\n   * @protected\n   * @param {string} name - Nom de l'attribut modifié.\n   * @param {string | null} oldVal - Ancienne valeur.\n   * @param {string | null} newVal - Nouvelle valeur.\n   * @returns {void | Nullable<'break'>} Peut retourner 'break' pour arrêter la propagation.\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    if (name === this._.ATTR_UNREAD) {\n      // On gère les dissonances visuels (badge value vs attribute value)\n      oldVal = this.#_ui.badge?.value ?? oldVal;\n\n      // Optimisation: Evite les updates de DOM coûteux si déjà en 99+\n      if (this.#_shouldSkipUnreadUpdate(oldVal, newVal)) return;\n    }\n\n    if (oldVal === newVal) return;\n\n    switch (name) {\n      case this._.ATTR_LABEL:\n        this.#_updateLabel(newVal ?? EMPTY_STRING);\n        break;\n      case this._.ATTR_UNREAD:\n        this.#_updateUnread(newVal ? +newVal : 0);\n        break;\n\n      case this._.ATTR_ICON:\n        this.#_updateIcon(newVal ?? EMPTY_STRING);\n        break;\n\n      case this._.ATTR_IS_COLLAPSED:\n        this.#_updateIsCollapsed(newVal === this._.VAL_TRUE);\n        this.#_refreshDisplay();\n        break;\n\n      case this._.ATTR_LEVEL:\n        this.#_updateLevel(newVal ? +newVal : 0);\n        break;\n\n      case this._.ATTR_IS_SELECTED:\n        this.#_updateSelected(newVal === this._.VAL_TRUE);\n        break;\n      default:\n        break;\n    }\n  }\n\n  //#endregion Lifecycle\n\n  //#region Event handlers\n  /**\n   * Gestionnaire d'événement pour le changement de statut \"non-lu\" des enfants.\n   * Déclenche un rafraîchissement de l'affichage cumulatif si nécessaire.\n   * @private\n   * @param {Event} e - L'événement custom `UnreadChangedEventDetail`.\n   */\n  #_onChildUnreadChanged(e: Event): void {\n    const detail = (e as CustomEvent<UnreadChangedEventDetail>).detail;\n\n    // Protection contre les boucles infinies (self-trigger)\n    if (detail?.caller === this) return;\n\n    this.#_refreshDisplay();\n  }\n\n  /**\n   * Intercepte la sélection pour empêcher l'action sur les dossiers virtuels.\n   * @private\n   * @param {Event} e - L'événement de sélection.\n   */\n  #_onFolderSelect(e: Event): void {\n    if (this.getAttribute(this._.ATTR_IS_VIRTUAL) === this._.VAL_TRUE) {\n      e.stopPropagation();\n    }\n  }\n  //#endregion Event handlers\n\n  //#region Private methods\n  /**\n   * Détermine si la mise à jour visuelle du badge doit être sautée (ex: 99+ vers 100).\n   * @private\n   * @param {string | null} oldVal - Ancienne valeur.\n   * @param {string | null} newVal - Nouvelle valeur.\n   * @returns {boolean} True si la mise à jour doit être ignorée.\n   */\n  #_shouldSkipUnreadUpdate(\n    oldVal: string | null,\n    newVal: string | null,\n  ): boolean {\n    const oldNum = oldVal ? +oldVal : this._.VAL_MIN_UNREAD;\n    const newNum = newVal ? +newVal : this._.VAL_MIN_UNREAD;\n\n    return oldNum > this._.VAL_MAX_UNREAD && newNum > this._.VAL_MAX_UNREAD;\n  }\n\n  /**\n   * Calcule le total des éléments non lus (Soi-même + tous les descendants).\n   * @private\n   * @returns {number} Le total calculé.\n   */\n  #_getTotalUnread(): number {\n    let total = this.#_selfUnread;\n    const descendants = this.getElementsByTagName(this._.TAG);\n\n    for (let i = 0, len = descendants.length; i < len; i++) {\n      const val = descendants[i].getAttribute(this._.ATTR_UNREAD);\n      if (val) total += +val;\n    }\n\n    return total;\n  }\n\n  /**\n   * Met à jour uniquement l'élément visuel (Badge) en fonction de l'état (plié/déplié).\n   * Si plié, affiche le cumulatif. Si déplié, affiche le score propre.\n   * @private\n   */\n  #_refreshDisplay(): void {\n    if (!this.#_ui.badge) return;\n\n    const isCollapsed = this.collapsed;\n    const hasChildren = this.children.length > 0;\n\n    const displayValue =\n      isCollapsed && hasChildren ? this.#_getTotalUnread() : this.#_selfUnread;\n\n    this.#_applyBadgeState(displayValue, isCollapsed);\n  }\n\n  /**\n   * Applique l'état visuel et la valeur au badge.\n   * @private\n   * @param {number} value - La valeur numérique à afficher.\n   * @param {boolean} isCollapsed - Si le dossier parent est replié (pour le style cumulatif).\n   */\n  #_applyBadgeState(value: number, isCollapsed: boolean): void {\n    const badge = this.#_ui.badge!;\n    let state = this._.STATE_NO_UNREAD;\n    let text = EMPTY_STRING;\n\n    if (value > 99) {\n      text = this._.VAL_99_PLUS;\n      state = this._.STATE_TRIPLE_DIGIT;\n    } else if (value > 0) {\n      text = value.toString();\n      state = value > 9 ? this._.STATE_DOUBLE_DIGIT : this._.STATE_SINGLE_DIGIT;\n    }\n\n    if (badge.value !== text) badge.value = text;\n\n    this._p_addState(state);\n\n    const isCumulative = value !== this.#_selfUnread && isCollapsed;\n\n    if (badge.classList.contains(this._.CLASS_IS_CUMULATIVE) !== isCumulative) {\n      badge.classList.toggle(this._.CLASS_IS_CUMULATIVE, isCumulative);\n    }\n  }\n\n  /**\n   * Met à jour le libellé du dossier dans le DOM.\n   * @private\n   * @param {string} label - Nouveau libellé.\n   * @returns {this}\n   */\n  #_updateLabel(label: string): this {\n    if (this.#_ui.name) {\n      this.#_ui.name.textContent = label;\n      this.#_ui.name.title = label;\n    }\n    return this;\n  }\n\n  /**\n   * Met à jour la valeur interne 'non-lu' et propage l'événement.\n   * @private\n   * @param {number} unread - Nouvelle valeur.\n   * @returns {this}\n   */\n  #_updateUnread(unread: number): this {\n    this.#_selfUnread = unread;\n    this.#_refreshDisplay();\n\n    if (this.alreadyLoaded) {\n      this.trigger(\n        this._.EVENT_UNREAD_CHANGED,\n        {\n          unread: unread,\n          caller: this,\n        },\n        { bubbles: true, composed: true },\n      );\n    }\n    return this;\n  }\n\n  /**\n   * Met à jour l'icône de toggle et l'attribut ARIA.\n   * @private\n   * @param {boolean} isCollapsed - État plié.\n   * @returns {this}\n   */\n  #_updateIsCollapsed(isCollapsed: boolean): this {\n    if (this.#_ui.toggle) {\n      this.#_ui.toggle.icon = isCollapsed\n        ? this._.ICON_ARROW_DOWN\n        : this._.ICON_ARROW_UP;\n    }\n\n    this.setAttribute(this._.ARIA_EXPANDED, String(!isCollapsed));\n    return this;\n  }\n\n  /**\n   * Met à jour l'icône principale du dossier.\n   * @private\n   * @param {string} icon - Nom de l'icône.\n   * @returns {this}\n   */\n  #_updateIcon(icon: string): this {\n    if (this.#_ui.icon) {\n      this.#_ui.icon.icon = icon;\n    }\n\n    return this;\n  }\n\n  /**\n   * Met à jour le niveau d'indentation via CSS Variable.\n   * @private\n   * @param {number} level - Niveau de profondeur (clamped 0-10).\n   * @returns {this}\n   */\n  #_updateLevel(level: number): this {\n    const levelClamped = Math.max(0, Math.min(level, 10));\n    this.style.setProperty(this._.CSS_VAR_LEVEL, levelClamped.toString());\n    return this;\n  }\n\n  /**\n   * Met à jour l'attribut ARIA de sélection.\n   * @private\n   * @param {boolean} isSelected - État sélectionné.\n   * @returns {this}\n   */\n  #_updateSelected(isSelected: boolean): this {\n    return this.attr(this._.ARIA_SELECTED, isSelected.toString());\n  }\n  //#endregion Private methods\n\n  //#region Public methods\n  /**\n   * Bascule l'état plié/déplié du dossier.\n   * Met à jour l'attribut DOM et déclenche l'événement `EVENT_TOGGLE`.\n   * @public\n   * @param {Event} [innerEvent] - L'événement déclencheur originel (optionnel).\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  toggle(innerEvent?: Event): this {\n    innerEvent?.stopPropagation?.();\n    const isCollapsed =\n      this.getAttribute(this._.ATTR_IS_COLLAPSED) === this._.VAL_TRUE;\n    this.setAttribute(\n      this._.ATTR_IS_COLLAPSED,\n      isCollapsed ? this._.VAL_FALSE : this._.VAL_TRUE,\n    );\n\n    this.trigger(this._.EVENT_TOGGLE, {\n      innerEvent,\n      caller: this,\n      collapsed: !isCollapsed,\n    });\n\n    return this;\n  }\n\n  /**\n   * Sélectionne le dossier.\n   * Déclenche l'événement `EVENT_SELECT`.\n   * @public\n   * @param {Event} [innerEvent] - L'événement déclencheur originel (optionnel).\n   * @returns {this} L'instance courante pour chaînage.\n   */\n  select(innerEvent?: Event): this {\n    this.trigger(this._.EVENT_SELECT, {\n      innerEvent,\n      caller: this,\n    });\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Static methods\n  /**\n   * Définit la liste des attributs à observer pour les changements.\n   * @protected\n   * @returns {string[]} Liste des noms d'attributs.\n   */\n  protected static _p_observedAttributes(): string[] {\n    return [\n      this.ATTR_LABEL,\n      this.ATTR_UNREAD,\n      this.ATTR_ICON,\n      this.ATTR_IS_COLLAPSED,\n      this.ATTR_LEVEL,\n      this.ATTR_IS_SELECTED,\n    ];\n  }\n\n  /**\n   * Génère la chaîne HTML statique pour ce composant (SSR / Helper).\n   * @static\n   * @param {Object} props - Propriétés de construction.\n   * @param {Record<string, string>} [props.attributes={}] - Attributs HTML.\n   * @param {string[]} [props.children=[]] - Contenu enfant.\n   * @returns {string} Le HTML sous forme de chaîne.\n   */\n  static Write({\n    attributes = {},\n    children = [],\n  }: {\n    attributes?: Record<string, string>;\n    children?: string[];\n  } = {}): string {\n    const attrsString = Object.entries(attributes)\n      .map(([key, value]) => `${key}=\"${value}\"`)\n      .join(' ');\n\n    const childrenString = children.join(EMPTY_STRING);\n\n    return `<${this.TAG} ${attrsString}>${childrenString}</${this.TAG}>`;\n  }\n\n  /**\n   * Retourne le nom de la balise HTML associée à ce composant.\n   * @static\n   * @returns {string} 'bnum-folder'\n   */\n  static get TAG(): string {\n    return TAG_FOLDER;\n  }\n  //#region Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { Autobind, Define } from '../../../core/decorators';\nimport { TAG_HIDE } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { NonStd } from '../../../core/decorators/nonstd';\n\nconst TAG = TAG_HIDE;\n\nconst BREAKPOINTS: Record<string, number> = {\n  phone: 480,\n  small: 768, // Tablet portrait\n  touch: 1024, // Tablet landscape / Touch laptops\n  normal: 1200, // Desktop\n};\n\n/**\n * Composant BnumHide\n * Permet de cacher son contenu selon des breakpoints définis.\n * @structure Base\n * <bnum-hide breakpoint=\"small\" mode=\"down\">Bonjour</bnum-hide>\n */\n@Define()\n@NonStd('Ne respecte pas la classe template')\nexport class HTMLBnumHide extends BnumElementInternal {\n  // --- Propriétés Privées ---\n  #_mediaQueryList: Nullable<MediaQueryList> = null;\n  #_boundHandleChange: (e: MediaQueryListEvent | MediaQueryList) => void;\n\n  constructor() {\n    super();\n    // On lie la fonction une seule fois pour pouvoir la retirer proprement\n    this.#_boundHandleChange = this.#_handleChange;\n  }\n\n  static get TAG(): string {\n    return TAG;\n  }\n\n  static get observedAttributes() {\n    return ['breakpoint', 'mode'];\n  }\n\n  protected _p_isShadowElement(): boolean {\n    return false;\n  }\n\n  // --- Cycle de vie ---\n\n  connectedCallback(): void {\n    super.connectedCallback?.();\n    this.#_setupListener();\n  }\n\n  disconnectedCallback(): void {\n    this.#_removeListener();\n    super.disconnectedCallback?.();\n  }\n\n  attributeChangedCallback(name: string, oldVal: string, newVal: string): void {\n    super.attributeChangedCallback?.(name, oldVal, newVal);\n    if (oldVal === newVal) return;\n\n    // Si on change les paramètres, on refait l'écouteur\n    this.#_setupListener();\n  }\n\n  // --- Logique Métier ---\n\n  /**\n   * Configure le listener matchMedia selon les attributs\n   */\n  #_setupListener(): void {\n    this.#_removeListener(); // Nettoyage préalable\n\n    const breakpointKey = this.getAttribute('breakpoint') || 'touch';\n    const mode = this.getAttribute('mode') || 'down'; // 'down' (défaut) ou 'up'\n\n    const width = BREAKPOINTS[breakpointKey];\n\n    if (!width) {\n      console.warn(\n        `[${TAG}] Breakpoint inconnu : ${breakpointKey}. Utilisez: ${Object.keys(BREAKPOINTS).join(', ')}`,\n      );\n      return;\n    }\n\n    // Construction de la requête média\n    // mode 'down' : cache si l'écran est PLUS PETIT que la valeur (max-width)\n    // mode 'up'   : cache si l'écran est PLUS GRAND que la valeur (min-width)\n    const query =\n      mode === 'up'\n        ? `(min-width: ${width}px)`\n        : `(max-width: ${width - 0.02}px)`; // -0.02px évite le conflit exact au pixel\n\n    this.#_mediaQueryList = window.matchMedia(query);\n\n    // Initialisation immédiate de l'état\n    this.#_handleChange(this.#_mediaQueryList);\n\n    // Abonnement aux changements\n    this.#_mediaQueryList.addEventListener('change', this.#_boundHandleChange);\n  }\n\n  #_removeListener(): void {\n    if (this.#_mediaQueryList) {\n      this.#_mediaQueryList.removeEventListener(\n        'change',\n        this.#_boundHandleChange,\n      );\n      this.#_mediaQueryList = null;\n    }\n  }\n\n  /**\n   * Réaction au changement de breakpoint\n   * Si la media query match, c'est qu'on est dans la zone \"à cacher\".\n   */\n  @Autobind\n  #_handleChange(mq: MediaQueryList | MediaQueryListEvent): void {\n    const shouldHide = mq.matches;\n\n    // Mise à jour de l'état interne (si ton BnumElementInternal gère un state 'hidden')\n    // Sinon, on manipule directement l'attribut hidden natif HTML\n    if (shouldHide) {\n      this.setAttribute('hidden', EMPTY_STRING);\n      this.style.display = 'none'; // Sécurité CSS inline\n    } else {\n      this.removeAttribute('hidden');\n      this.style.removeProperty('display');\n    }\n  }\n}\n","// type: decorator\n\nimport { delegate } from '../utils/eventsFunctions';\nimport Log from '../utils/Log';\nimport { Nullable } from '../utils/types';\n\n/**\n * Décorateur pour attacher automatiquement un écouteur d'événement.\n * La méthode décorée doit retourner la fonction de callback.\n *  @param eventName Nom de l'événement à écouter (ex: 'click')\n *  @param option Sélecteur CSS pour le délégateur (optionnel)\n */\nexport function Listen(\n  eventName: string,\n  { selector = null }: { selector?: Nullable<string> } = {},\n) {\n  return function (originalMethod: any, context: ClassMethodDecoratorContext) {\n    if (context.kind !== 'method') {\n      throw new Error('@Listen ne peut être utilisé que sur des méthodes.');\n    }\n\n    // On ajoute un initialiseur qui s'exécutera à la création de chaque instance\n    context.addInitializer(function (this: any) {\n      const handler = originalMethod.call(this);\n\n      if (typeof handler === 'function') {\n        const boundHandler = handler.bind(this);\n\n        if (selector) delegate(this, eventName, selector, boundHandler);\n        else this.addEventListener(eventName, boundHandler);\n      } else {\n        Log.warn(\n          '@Listen',\n          `La méthode \"${String(context.name)}\" n'a pas renvoyé de fonction pour l'événement \"${eventName}\".`,\n        );\n      }\n    });\n  };\n}\n","// type: functions\n// descriptions: Fonctions utilitaires pour la gestion des événements DOM\n\n/**\n * Délègue un événement à un sélecteur spécifique à partir d'une cible.\n * @param  target Élément sur lequel écouter l'événement\n * @param  event Nom de l'événement (ex: 'click')\n * @param  selector Sélecteur CSS pour filtrer la cible\n * @param  callback Fonction appelée lors de l'événement\n */\nexport function delegate<T extends HTMLElement>(\n  target: T,\n  event: string,\n  selector: string,\n  callback: (e: CustomEvent) => void,\n): void {\n  target.addEventListener(event, (e: Event) => {\n    if (!(e.target instanceof HTMLElement)) return;\n\n    // On cherche l'élément correspondant au sélecteur le plus proche\n    const element = e.target.closest(selector);\n\n    // On vérifie que l'élément trouvé est bien à l'intérieur de notre \"target\"\n    if (element && target.contains(element)) {\n      callback(\n        new CustomEvent(event, {\n          detail: { innerEvent: e, target: element },\n        }),\n      );\n    }\n  });\n}\n","import { Result, Risky } from '@rotomeca/rop';\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport {\n\tBnumRadioCheckedChangeEvent,\n\tHTMLBnumFragment,\n\tHTMLBnumRadio,\n\tINPUT_BASE_STYLE,\n} from 'components/atoms';\nimport BnumElementInternal from 'components/bnum-element-states';\nimport { Attr, Autobind, Data, Define, Fire, NO_SETTER } from 'core/decorators';\nimport { Listen } from 'core/decorators/listen';\nimport { Schedule } from 'core/decorators/schedule';\nimport { UI } from 'core/decorators/ui';\nimport Log from 'core/utils/Log';\nimport { Nullable, Optional } from 'core/utils/types';\nimport style from './bnum-radio-group.less';\nimport { NonStd } from 'core/decorators/nonstd';\nimport { TAG_RADIO_GROUP } from 'core/utils/constants/tags';\n\n//#region Types\n/**\n * Interface définissant les éléments UI internes du groupe de boutons radio.\n */\ntype BnumRadioGroupUi = {\n\tgroup: HTMLDivElement;\n\tlegend: HTMLSlotElement;\n\thint: HTMLSlotElement;\n};\n\ntype BnumRadioGroupEvents = {\n\t[EVENT_CHANGE]: typeof EVENT_CHANGE;\n};\n//#endregion Types\n\n//#region Global constants\n// eslint-disable-next-line quotes\nconst DEFAULT_LABEL = \"Perdu dans l'arbre\";\nconst DEFAULT_HINT = EMPTY_STRING;\nconst ID_GROUP = 'group';\nconst ID_LEGEND = 'legend';\nconst ID_HINT = 'hint';\nconst DATA_INLINE = 'inline';\nconst STATE_INLINE = DATA_INLINE;\nconst ATTR_NAME = 'name';\nconst EVENT_CHANGE = 'change';\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<HTMLBnumFragment>\n\t\t<div class=\"group__label label-container\" id=\"label\">\n\t\t\t<div class=\"group__label--legend label-container--label\">\n\t\t\t\t<slot id={ID_LEGEND} name=\"legend\">\n\t\t\t\t\t{DEFAULT_LABEL}\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<div class=\"group__label--hint label-container--hint\">\n\t\t\t\t<slot id={ID_HINT} name=\"hint\">\n\t\t\t\t\t{DEFAULT_HINT}\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tid={ID_GROUP}\n\t\t\trole=\"radiogroup\"\n\t\t\tclass=\"group__label__group\"\n\t\t\taria-describedby=\"label\"\n\t\t>\n\t\t\t<slot></slot>\n\t\t</div>\n\t</HTMLBnumFragment>\n);\n//#endregion Template\n\n/**\n * Composant `bnum-radio-group`\n *\n * Ce composant représente un groupe de boutons radio. Il gère la sélection unique parmi ses enfants `bnum-radio`,\n * la navigation au clavier, et l'accessibilité (via `role=\"radiogroup\"`).\n *\n * @structure Structure de base\n * <bnum-radio-group id=\"groupe1\" name=\"choix\" data-label=\"Faites un choix\" data-hint=\"Indice !\">\n *   <bnum-radio value=\"1\">Choix 1</bnum-radio>\n *   <bnum-radio value=\"2\">Choix 2</bnum-radio>\n * </bnum-radio-group>\n *\n * @structure Structure en ligne (inline)\n * <bnum-radio-group id=\"groupe2\" name=\"inline\" data-inline=\"true\" data-label=\"Choix en ligne\">\n *   <bnum-radio value=\"A\">Choix A</bnum-radio>\n *   <bnum-radio value=\"B\">Choix B</bnum-radio>\n * </bnum-radio-group>\n *\n * @slot legend - Description du groupe\n * @slot hint - Indice ou aide pour le groupe\n * @slot (default) - Boutons radio\n *\n * @state inline - Indique si le groupe doit afficher ses options en ligne\n *\n * @attr {string} name - Le nom du groupe de boutons radio. Cet attribut est appliqué à tous les boutons radio enfants pour assurer qu'ils appartiennent au même groupe logique.\n * @attr {string} data-label - Le libellé du groupe.\n * @attr {string} data-hint - L'indice ou l'aide pour le groupe.\n *\n * @event {CustomEvent<{inner:BnumRadioCheckedChangeEvent, caller: HTMLBnumRadioGroup}>} change - Lorsque la valeur change\n *\n * @cssvar {15px} --bnum-radio-group-gap - Espacement entre les boutons radio\n * @cssvar {#666} --bnum-input-hint-text-color - Couleur du texte d'indice ou d'aide\n */\n@Define({\n\ttag: TAG_RADIO_GROUP,\n\ttemplate: TEMPLATE,\n\tstyles: [INPUT_BASE_STYLE, style],\n})\nexport class HTMLBnumRadioGroup extends BnumElementInternal {\n\t//#region Private fields\n\t/**\n\t * Instance de MutationObserver pour surveiller les changements dans les enfants du groupe.\n\t * @private\n\t */\n\t#_observer: Nullable<MutationObserver> = null;\n\t//#endregion Private fields\n\n\t//#region Getters/Setters\n\t/**\n\t * Références aux éléments du DOM interne.\n\t * @private\n\t */\n\t@UI({\n\t\tgroup: `#${ID_GROUP}`,\n\t\tlegend: `#${ID_LEGEND}`,\n\t\thint: `#${ID_HINT}`,\n\t})\n\taccessor #_ui!: BnumRadioGroupUi;\n\n\t/**\n\t * Le nom du groupe de boutons radio.\n\t * Cet attribut est appliqué à tous les boutons radio enfants pour assurer qu'ils appartiennent au même groupe logique.\n\t */\n\t@Attr() accessor name: string = EMPTY_STRING;\n\n\t/**\n\t * Le libellé du groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_label: string = EMPTY_STRING;\n\n\t/**\n\t * Le texte d'indice ou d'aide pour le groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_hint: string = EMPTY_STRING;\n\n\t/**\n\t * La valeur initiale sélectionnée du groupe.\n\t * @private\n\t */\n\t@Data(NO_SETTER) accessor #_value: Nullable<string> = null;\n\n\t/**\n\t * Indique si le groupe doit afficher ses options en ligne (horizontalement).\n\t *\n\t * @returns {boolean} `true` si le mode inline est activé, sinon `false`.\n\t */\n\tget inline(): boolean {\n\t\treturn this.data(DATA_INLINE);\n\t}\n\n\t/**\n\t * Définit si le groupe doit afficher ses options en ligne.\n\t *\n\t * @param {boolean} value - La nouvelle valeur pour le mode inline.\n\t */\n\tset inline(value: boolean) {\n\t\tthis.data(DATA_INLINE, value).#_setInlineState();\n\t}\n\n\t/**\n\t * Récupère la liste de tous les éléments `bnum-radio` enfants directs du groupe.\n\t *\n\t * @returns {HTMLBnumRadio[]} Un tableau contenant les éléments `HTMLBnumRadio`.\n\t */\n\tget radios(): HTMLBnumRadio[] {\n\t\treturn Array.from(this.querySelectorAll<HTMLBnumRadio>(HTMLBnumRadio.TAG));\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Appelée lorsque le composant est inséré dans le DOM.\n\t * Initialise l'observateur de mutations pour détecter l'ajout ou la suppression de boutons radio.\n\t */\n\tconnectedCallback(): void {\n\t\tsuper.connectedCallback();\n\t\t(this.#_observer ??= new MutationObserver(e => this.#_obserse(e))).observe(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tchildList: true,\n\t\t\t},\n\t\t);\n\t}\n\n\t/**\n\t * Méthode protégée pour construire le DOM initial.\n\t * @protected\n\t */\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_init();\n\t}\n\n\t/**\n\t * Méthode protégée appelée lorsqu'un attribut observé change.\n\t *\n\t * @param {string} name - Le nom de l'attribut modifié.\n\t * @param {string | null} oldVal - L'ancienne valeur de l'attribut.\n\t * @param {string | null} newVal - La nouvelle valeur de l'attribut.\n\t * @returns {void | Nullable<'break'>}\n\t * @protected\n\t */\n\tprotected _p_update(\n\t\tname: string,\n\t\toldVal: string | null,\n\t\tnewVal: string | null,\n\t): void | Nullable<'break'> {\n\t\tif (name === ATTR_NAME && oldVal !== newVal) {\n\t\t\tthis.#_setName();\n\t\t}\n\t}\n\n\t/**\n\t * Appelée lorsque le composant est retiré du DOM.\n\t * Nettoie l'observateur de mutations.\n\t * @protected\n\t */\n\tprotected _p_detach(): void {\n\t\tthis.#_observer?.disconnect?.();\n\t}\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Initialise le composant.\n\t * Configure les écouteurs, les données par défaut, la valeur par défaut et les états.\n\t * @private\n\t */\n\t#_init() {\n\t\treturn this.#_setListeners()\n\t\t\t.#_setDefaultData()\n\t\t\t.#_setDefaultValue()\n\t\t\t.#_initStates();\n\t}\n\n\t/**\n\t * Propage le nom du groupe à tous les boutons radio enfants.\n\t * @private\n\t */\n\t#_setName() {\n\t\tfor (const radio of this.radios) {\n\t\t\tradio.name = this.name;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Initialise le libellé (légende) du groupe dans le slot correspondant.\n\t * @private\n\t */\n\t#_setLegend() {\n\t\treturn this.#_initData(this.#_label, this.#_ui.legend);\n\t}\n\n\t/**\n\t * Initialise l'indice (hint) du groupe dans le slot correspondant.\n\t * @private\n\t */\n\t#_setHint() {\n\t\treturn this.#_initData(this.#_hint, this.#_ui.hint);\n\t}\n\n\t/**\n\t * Helper pour initialiser le contenu textuel d'un slot si des données sont fournies.\n\t * @private\n\t */\n\t#_initData(data: Optional<Nullable<string>>, slot: HTMLSlotElement): this {\n\t\tif (data) slot.textContent = data;\n\t\treturn this;\n\t}\n\n\t/**\n\t * Initialise les états visuels du composant (ex: inline).\n\t * @private\n\t */\n\t#_initStates() {\n\t\treturn this.#_initInline();\n\t}\n\n\t/**\n\t * Applique l'état initial pour le mode inline.\n\t * @private\n\t */\n\t#_initInline() {\n\t\tif (this.inline) this.#_setInlineState();\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Définit les données par défaut (nom, légende, indice).\n\t * @private\n\t */\n\t#_setDefaultData() {\n\t\treturn this.#_setName().#_setLegend().#_setHint();\n\t}\n\n\t/**\n\t * Définit la sélection initiale basée sur la valeur par défaut.\n\t * Si la valeur par défaut ne correspond à aucun radio, enregistre une erreur ou sélectionne le premier par défaut.\n\t * @private\n\t */\n\t#_setDefaultValue() {\n\t\tthis.#_setDefaultRadioFromValue().match({\n\t\t\tOk: () => this.#_setDefaultRadio(),\n\t\t\tErr: e => Log.error(this.constructor.name, e.message, e),\n\t\t});\n\t\treturn this;\n\t}\n\n\t/**\n\t * Tente de définir le bouton radio sélectionné en fonction de `_value`.\n\t * @returns {Result<void>} Résultat de l'opération.\n\t * @private\n\t */\n\t@Risky()\n\t#_setDefaultRadioFromValue(): Result<void> {\n\t\tconst value = this.#_value;\n\n\t\tif (!value) return Result.Ok();\n\n\t\tconst radio = this.radios.find(r => r.value === value);\n\t\tif (radio) {\n\t\t\tthis.#_check(radio);\n\t\t\treturn Result.Ok();\n\t\t}\n\n\t\tthrow new Error(`Aucun radio trouvé avec la valeur \"${value}\"`);\n\t}\n\n\t/**\n\t * Sélectionne le premier bouton radio par défaut si aucun n'est déjà sélectionné.\n\t * @private\n\t */\n\t#_setDefaultRadio(): void {\n\t\tif (this.radios.length > 0 && !this.radios.find(x => x.checked)) {\n\t\t\tthis.#_check(this.radios[0]);\n\t\t}\n\t}\n\n\t/**\n\t * Configure les écouteurs d'événements pour le changement de radio et la navigation clavier.\n\t * @private\n\t */\n\t#_setListeners(): this {\n\t\tthis.#_listenRadioChange();\n\t\tthis.#_handleKeyboardNavigation();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Écoute l'événement de changement d'un bouton radio enfant.\n\t * @private\n\t */\n\t@Listen(HTMLBnumRadio.EVENT_CHANGE, { selector: HTMLBnumRadio.TAG })\n\t#_listenRadioChange() {\n\t\treturn this.#_handleRadioChange;\n\t}\n\n\t/**\n\t * Gère la navigation au clavier (flèches directionnelles) entre les boutons radio.\n\t * @private\n\t */\n\t@Listen('keydown')\n\t#_handleKeyboardNavigation() {\n\t\treturn (e: KeyboardEvent) => {\n\t\t\tconst isRTL = getComputedStyle(this).direction === 'rtl';\n\t\t\tconst KEY_NEXT = ['ArrowDown', isRTL ? 'ArrowLeft' : 'ArrowRight'];\n\t\t\tconst KEY_PREV = ['ArrowUp', isRTL ? 'ArrowRight' : 'ArrowLeft'];\n\t\t\tconst ALL_KEYS = [...KEY_NEXT, ...KEY_PREV];\n\n\t\t\tif (!ALL_KEYS.includes(e.key)) return;\n\n\t\t\te.preventDefault();\n\n\t\t\tconst radios = this.radios;\n\t\t\tif (radios.length === 0) return;\n\n\t\t\tconst currentRadio = radios.find(r => r.checked);\n\t\t\tconst currentIndex = currentRadio ? radios.indexOf(currentRadio) : -1;\n\t\t\tconst direction = KEY_PREV.includes(e.key) ? -1 : 1;\n\n\t\t\tconst nextIndex =\n\t\t\t\t(currentIndex + direction + radios.length) % radios.length;\n\n\t\t\tconst targetRadio = radios[nextIndex];\n\n\t\t\tif (targetRadio) {\n\t\t\t\tthis.#_check(targetRadio, { fire: true });\n\t\t\t\ttargetRadio.internalCheckbox.focus();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Gère le changement d'état d'un bouton radio.\n\t * Assure qu'un seul radio est sélectionné à la fois.\n\t *\n\t * @param {CustomEvent} e - L'événement de changement.\n\t * @private\n\t */\n\t@Autobind\n\t#_handleRadioChange(\n\t\te: CustomEvent<{ innerEvent: BnumRadioCheckedChangeEvent }>,\n\t) {\n\t\te.stopPropagation();\n\t\tconst { innerEvent: inner } = e.detail;\n\n\t\tif (inner.checked) this.#_check(inner.caller).#_fireChange(inner);\n\t}\n\n\t/**\n\t * Notifie les écouteurs externes qu'un changement de sélection a eu lieu.\n\t *\n\t * @param {BnumRadioCheckedChangeEvent} e - L'événement interne du radio.\n\t * @returns L'événement formaté.\n\t * @private\n\t */\n\t@Fire('change')\n\t#_fireChange(e: BnumRadioCheckedChangeEvent) {\n\t\treturn { inner: e, caller: this };\n\t}\n\n\t/**\n\t * Marque un bouton radio comme sélectionné et désélectionne les autres.\n\t * Met à jour les attributs `tabindex` pour la navigation clavier.\n\t *\n\t * @param {HTMLBnumRadio} radio - Le bouton radio à sélectionner.\n\t * @param {object} options - Options supplémentaires.\n\t * @param {boolean} [options.fire=false] - Si `true`, déclenche l'événement de changement sur le radio.\n\t * @private\n\t */\n\t#_check(\n\t\tradio: HTMLBnumRadio,\n\t\t{ fire = false }: { fire?: boolean } = {},\n\t): this {\n\t\tfor (const r of this.radios) {\n\t\t\tif (r !== radio) {\n\t\t\t\tr.checked = false;\n\t\t\t\tthis.#_stopFocus(r);\n\t\t\t}\n\t\t}\n\n\t\tif (fire) radio.updateCheckAndFire(true);\n\t\telse radio.checked = true;\n\n\t\tthis.#_canFocus(radio);\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Fonction de rappel pour l'observateur de mutations.\n\t * Détecte si de nouveaux boutons radio sont ajoutés et planifie leur initialisation.\n\t * @private\n\t */\n\t#_obserse(mutations: MutationRecord[]) {\n\t\tconst hasOptionMutation = mutations.some(m =>\n\t\t\tArray.from(m.addedNodes).some(n => n instanceof HTMLBnumRadio),\n\t\t);\n\n\t\tif (hasOptionMutation) {\n\t\t\tthis.#_scheduleSetupRadios();\n\t\t}\n\t}\n\n\t/**\n\t * Planifie la configuration des radios (utilisé lors de mutations dynamiques).\n\t * @private\n\t */\n\t@Schedule()\n\t#_scheduleSetupRadios() {\n\t\tthis.#_setupRadios();\n\t}\n\n\t/**\n\t * Configure l'état initial des boutons radio (nom, sélection, focus).\n\t * @private\n\t */\n\t#_setupRadios() {\n\t\tlet hasChecked = false;\n\t\tfor (const radio of this.radios) {\n\t\t\tif (radio.name !== this.name) radio.name = this.name;\n\t\t\tif (radio.checked) {\n\t\t\t\tif (!hasChecked) {\n\t\t\t\t\thasChecked = true;\n\t\t\t\t\tthis.#_canFocus(radio);\n\t\t\t\t} else {\n\t\t\t\t\tradio.checked = false;\n\t\t\t\t\tthis.#_stopFocus(radio);\n\t\t\t\t}\n\t\t\t} else this.#_stopFocus(radio);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Autorise le focus sur le radio.\n\t * @param radio Bouton radio concerné.\n\t * @returns Chaîne\n\t */\n\t#_canFocus(radio: Readonly<HTMLBnumRadio>) {\n\t\tradio.setAttribute('tabindex', '0');\n\t\treturn this;\n\t}\n\n\t/**\n\t * Retire le focus du radio.\n\t * @param radio Bouton radio concerné.\n\t * @returns Chaîne\n\t */\n\t#_stopFocus(radio: Readonly<HTMLBnumRadio>) {\n\t\tradio.setAttribute('tabindex', '-1');\n\t\treturn this;\n\t}\n\n\t/**\n\t * Applique ou retire l'état visuel \"inline\" sur le composant.\n\t * @private\n\t */\n\t#_setInlineState() {\n\t\tif (this.inline) this._p_addState(STATE_INLINE);\n\t\telse this._p_removeState(STATE_INLINE);\n\t}\n\t//#endregion Private methods\n\n\t//#region Static\n\t/**\n\t * Liste des attributs observés par le composant.\n\t * @returns {string[]} Liste des noms d'attributs.\n\t * @protected\n\t * @static\n\t * @override\n\t * @deprecated Utilisez le décorateur {@link Observe} du commit 3e38db0162eef596874dbe32490d9e96b09fb1c0\n\t * @see [feat(composants): ✨ Ajout d'un décorateur pour réduire le boilerplate des attibuts à observer](https://github.com/messagerie-melanie2/design-system-bnum/commit/3e38db0162eef596874dbe32490d9e96b09fb1c0)\n\t */\n\t@NonStd('Deprecated')\n\tprotected static _p_observedAttributes(): string[] {\n\t\treturn [ATTR_NAME];\n\t}\n\n\t/**\n\t * Evènements disponibles pour ce composant.\n\t * @readonly\n\t */\n\tstatic get EVENTS(): Readonly<BnumRadioGroupEvents> {\n\t\treturn {\n\t\t\t[EVENT_CHANGE]: EVENT_CHANGE,\n\t\t};\n\t}\n\t//#endregion Static\n}\n","//type: enum\n//description: États internes pour bnum-segmented-item\n\n/**\n * États possibles pour l'élément bnum-segmented-item.\n */\nexport enum States {\n  SELECTED = 'selected',\n  DISABLED = 'disabled',\n  ICON = 'icon',\n}\n","// type: Webcomposant\n// description: Segmented Item component for segmented control\n\nimport { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumIcon } from '../../../atoms/icon/bnum-icon';\nimport BnumElementInternal from '../../../bnum-element-states';\nimport { Nullable } from '../../../../core/utils/types';\nimport {\n  Attr,\n  Data,\n  Define,\n  Fire,\n  SetAttr,\n  SetAttrs,\n} from '../../../../core/decorators';\nimport { UI } from '../../../../core/decorators/ui';\nimport { Result, Risky } from '@rotomeca/rop';\nimport Log from '../../../../core/utils/Log';\nimport { Listen } from '../../../../core/decorators/listen';\nimport { Listener } from '../../../../core/decorators/listener';\nimport JsEvent from '@rotomeca/event';\nimport {\n  BnumSegmentedItemUI,\n  CallSelectArg,\n  EventSelectArgs,\n  OnSelectCallback,\n  OnSelectListenerInitializer,\n  SegmentedItemCreateOptions,\n} from './bnum-segmented-item.internal';\nimport { States } from './bnum-segmented-item.internal/States';\nimport style from './bnum-segmented-item.less';\nimport { TAG_SEGMENTED_ITEM } from '../../../../core/utils/constants/tags';\nimport { UpdateAll } from 'core/decorators/updateAll';\n\n//#region Global constants\n// --- FLAT CONSTANTS ---\n\n// Ids\nconst ID_ICON = 'icon';\nconst ID_CONTAINER = 'container';\nconst ID_LABEL = 'label';\n\n// Selectors\nconst SEL_ICON = `#${ID_ICON}` as const;\nconst SEL_CONTAINER = `#${ID_CONTAINER}` as const;\nconst SEL_LABEL = `#${ID_LABEL}` as const;\n\n// Events\nconst EVT_SELECTED = 'bnum-segmented-item:selected';\nconst EVT_ERROR = 'bnum-segmented-item:error';\n\n// Attributes\nconst ATTR_SELECTED = 'selected';\nconst ATTR_DISABLED = 'disabled';\n\n// States\nconst STATE_SELECTED = States.SELECTED as 'selected';\nconst STATE_DISABLED = States.DISABLED as 'disabled';\nconst STATE_ICON = States.ICON as 'icon';\n\n// --- PUBLIC OBJECTS ---\n\n/**\n * Evènements non-conventionnels\n */\nconst EVENTS = {\n  SELECTED: EVT_SELECTED,\n  ERROR: EVT_ERROR,\n} as const;\n//#endregion Global constants\n\n//#region Template\n\nconst TEMPLATE = (\n  <div class=\"segmented-item__container\" id={ID_CONTAINER}>\n    <HTMLBnumIcon class=\"segmented-item__container__icon\" id={ID_ICON} />\n    <span class=\"segmented-item__container__label\" id={ID_LABEL}>\n      <slot></slot>\n    </span>\n  </div>\n);\n//#endregion Template\n\n/**\n * Composant représentant un item individuel au sein d'un contrôle segmenté.\n * * @structure Defaut\n * <bnum-segmented-item value=\"item1\" data-icon=\"home\">Item 1</bnum-segmented-item>\n *\n * @structure Selected\n * <bnum-segmented-item value=\"item1\" selected data-icon=\"home\">Item 1</bnum-segmented-item>\n *\n * @structure Disabled\n * <bnum-segmented-item value=\"item1\" disabled data-icon=\"home\">Item 1</bnum-segmented-item>\n * \n * @slot default - Le contenu textuel (label) de l'élément.\n * \n * @state selected - quand l'élément est sélectionné.\n * @state disabled - quand l'élément est désactivé.\n * @state icon - quand une icône est définie via data-icon.\n * \n * @attr {boolean} (optional) (default: false) disabled - Indique si l'item est désactivé. \n * @attr {boolean} (optional) (default: false) selected - Indique si l'item est sélectionné.\n\n */\n@Define({\n  tag: TAG_SEGMENTED_ITEM,\n  styles: style,\n  template: TEMPLATE,\n})\n@UpdateAll()\nexport class HTMLBnumSegmentedItem extends BnumElementInternal {\n  //#region Private Fields\n  /** Références aux éléments du Shadow DOM. */\n  @UI({\n    icon: SEL_ICON,\n    label: SEL_LABEL,\n    container: SEL_CONTAINER,\n  })\n  accessor #_ui!: BnumSegmentedItemUI;\n  //#endregion Private Fields\n\n  //#region Getters/Setters\n  /** @attr {boolean} (optional) (default: false) selected - État de sélection. */\n  @Attr() accessor selected: boolean = false;\n\n  /** @attr {boolean} (optional) (default: false) disabled - État désactivé. */\n  @Attr() accessor disabled: boolean = false;\n\n  /** @attr {string} (optional) (default: '') data-icon - Nom de l'icône à afficher. */\n  @Data({ setter: false }) accessor #_icon: string = EMPTY_STRING;\n\n  /** Instance JsEvent pour la souscription aux changements de sélection. */\n  @Listener(OnSelectListenerInitializer)\n  accessor onSelected!: JsEvent<OnSelectCallback>;\n\n  /** @attr {string} value - Valeur technique de l'item. */\n  get value(): string {\n    return this.getAttribute('value') || this.innerText || EMPTY_STRING;\n  }\n  set value(value: string) {\n    this.setAttribute('value', value);\n  }\n\n  /** Récupère le nom de l'icône actuelle. */\n  get icon(): string {\n    return this.#_icon;\n  }\n\n  /** Définit une nouvelle icône et met à jour le DOM. */\n  set icon(value: string) {\n    this.#_icon = value;\n    this.#_updateIcon(value);\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /** Initialise le DOM et les écouteurs. */\n  @SetAttr('role', 'radio')\n  protected _p_buildDOM(): void {\n    this.#_updateDom().match({\n      Ok: () => this.#_setListeners(),\n      Err: (error) => this.#_dispatchError(error),\n    });\n  }\n\n  /** Gère la mise à jour des attributs. */\n  protected _p_update(\n    _: string,\n    __: string | null,\n    ___: string | null,\n  ): void | Nullable<'break'> {\n    this.#_updateDom().tapError((error) => this.#_dispatchError(error));\n  }\n\n  //#endregion Lifecycle\n\n  //#region Public Methods\n  /**\n   * Met à jour le texte du label via textContent.\n   * @param text Nouveau texte.\n   */\n  @Risky()\n  updateLabel(text: string): Result<void> {\n    return this.#_verifyUi().tap(() => {\n      this.textContent = text;\n    });\n  }\n\n  /**\n   * Vérifie si l'élément possède un état spécifique.\n   * @param state État à vérifier.\n   */\n  @Risky()\n  is(state: States): Result<boolean> {\n    var result;\n\n    switch (state) {\n      case States.SELECTED:\n        result = this.hasAttribute(ATTR_SELECTED);\n        break;\n\n      case States.DISABLED:\n        result = this.hasAttribute(ATTR_DISABLED);\n        break;\n\n      case States.ICON:\n        result = this.#_icon !== EMPTY_STRING;\n        break;\n\n      default:\n        throw new Error(`State \"${state}\" is not recognized.`);\n    }\n\n    return Result.Ok(result);\n  }\n\n  /**\n   * Désactive l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  disable(): this {\n    this.disabled = true;\n    return this;\n  }\n\n  /**\n   * Active l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  enable(): this {\n    this.disabled = false;\n    return this;\n  }\n\n  /**\n   * Sélectionne l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  select(): this {\n    this.selected = true;\n    return this;\n  }\n\n  /**\n   * Désélectionne l'élément.\n   * @returns Cette instance pour le chaînage.\n   */\n  unselect(): this {\n    this.selected = false;\n    return this;\n  }\n\n  /**\n   * Met à jour la valeur technique de l'élément.\n   * @param value Nouvelle valeur.\n   * @returns Cette instance pour le chaînage.\n   */\n  updateValue(value: string): this {\n    this.value = value;\n    return this;\n  }\n\n  /**\n   * Déclenche manuellement la logique de sélection.\n   *\n   * /!\\ Ne modifie pas l'état sélectionné de l'élément.\n   * @param options Options incluant l'événement parent.\n   */\n  callSelect({ parentEvent = null }: CallSelectArg = {}): void {\n    const args: EventSelectArgs = {\n      parentEvent,\n      caller: this,\n      value: this.value,\n    };\n    this.onSelected.call(args);\n  }\n  //#endregion Public Methods\n\n  //#region Private Methods\n  /** Synchronise l'ensemble du DOM avec les états internes. */\n  @Risky()\n  #_updateDom(): Result<void> {\n    return this.#_verifyUi()\n      .tap(() => this.#_clearStates())\n      .tap(() => this.#_updateSelected())\n      .tap(() => this.#_updateDisabled())\n      .andThen(() => this.#_setIcon());\n  }\n\n  /** Vérifie la disponibilité des éléments UI du Shadow DOM. */\n  @Risky()\n  #_verifyUi(): Result<void> {\n    if (!this.#_ui.icon || !this.#_ui.label || !this.#_ui.container) {\n      Log.error('HTMLBnumSegmentedItem', 'UI not correctly initialized');\n      throw new Error('UI not correctly initialized');\n    }\n    return Result.Ok();\n  }\n\n  /** Configure l'icône et active l'état associé. */\n  @Risky()\n  #_setIcon() {\n    return this.#_updateIcon(this.#_icon).tap(() => {\n      this._p_addState(STATE_ICON);\n    });\n  }\n\n  /** Met à jour la propriété icon du webcomponent bnum-icon interne. */\n  @Risky()\n  #_updateIcon(icon: string): Result<void> {\n    return this.#_verifyUi().tap(() => {\n      this.#_ui.icon!.icon = icon;\n    });\n  }\n\n  /** Réinitialise tous les états CSS custom. */\n  #_clearStates() {\n    this._p_clearStates();\n    return this;\n  }\n\n  /** Met à jour l'UI en fonction de l'attribut selected. */\n  #_updateSelected() {\n    if (this.hasAttribute(ATTR_SELECTED)) this.#_select();\n    else this.#_unselect();\n\n    return this;\n  }\n\n  /** Met à jour l'UI en fonction de l'attribut disabled. */\n  #_updateDisabled() {\n    if (this.hasAttribute(ATTR_DISABLED)) this.#_disable();\n    else this.#_enable();\n\n    return this;\n  }\n\n  /** Active l'état désactivé. */\n  @SetAttrs({ 'aria-disabled': 'true', tabindex: '-1' })\n  #_disable() {\n    this._p_addState(STATE_DISABLED);\n  }\n\n  /** Désactive l'état désactivé. */\n  @SetAttr('aria-disabled', 'false')\n  #_enable() {\n    if (!this.hasAttribute(ATTR_SELECTED)) this.#_unselect();\n  }\n\n  /** Applique les attributs et états de sélection. */\n  @SetAttrs({\n    'aria-checked': 'true',\n    tabindex: '0',\n  })\n  #_select() {\n    this._p_addState(STATE_SELECTED);\n  }\n\n  /** Retire les attributs et états de sélection. */\n  @SetAttrs({\n    'aria-checked': 'false',\n    tabindex: '-1',\n  })\n  #_unselect() {}\n\n  /** Filtre le clic si l'item est désactivé ou déjà sélectionné. */\n  #_onClickDisabled(e: Event) {\n    const canBeClicked = !this.disabled && !this.selected;\n    if (canBeClicked) return this.callSelect({ parentEvent: e });\n  }\n\n  /** Émet l'événement d'erreur. */\n  @Fire(EVT_ERROR)\n  #_dispatchError(error: Error) {\n    return { error, caller: this };\n  }\n\n  /** Émet l'événement de sélection. */\n  @Fire(EVT_SELECTED)\n  #_onclick(e: Event) {\n    return { event: e, caller: this, value: this.value };\n  }\n\n  /** Gère l'accessibilité clavier (Entrée/Espace). */\n  #_onKeyDown(e: KeyboardEvent) {\n    const canBeClicked = !this.disabled && !this.selected;\n    const isEnterOrSpace = e.key === 'Enter' || e.key === ' ';\n    if (canBeClicked && isEnterOrSpace) {\n      e.preventDefault();\n      return this.click();\n    }\n  }\n\n  /** Initialise les écouteurs via décorateur @Listen. */\n  #_setListeners() {\n    this.#_listenClick();\n    this.#_listenKeyDown();\n  }\n\n  /**\n   * Ecoute les clics sur l'élément.\n   * @returns Action à faire lors d'un clic.\n   */\n  @Listen('click')\n  #_listenClick() {\n    return this.#_onClickDisabled;\n  }\n\n  /**\n   * Ecoute les événements clavier sur l'élément.\n   * @returns Action à faire lors d'un keydown.\n   */\n  @Listen('keydown')\n  #_listenKeyDown() {\n    return this.#_onKeyDown;\n  }\n\n  //#endregion Private Methods\n\n  //#region Protected Methods\n  /**\n   * Déclencheur interne pour le pont avec l'initialiseur de Listener.\n   * @internal\n   */\n  protected _p_onSelectedTrigger(e: Event): void {\n    this.#_onclick(e);\n  }\n  //#endregion Protected Methods\n\n  //#region Static Methods\n  protected static _p_observedAttributes(): string[] {\n    return [...super._p_observedAttributes(), ATTR_SELECTED, ATTR_DISABLED];\n  }\n\n  /**\n   * Crée un élément segmented-item.\n   * @param value Valeur technique de l'item.\n   * @param options Options de création.\n   * @returns L'élément créé.\n   */\n  static Create(\n    value: string,\n    options?: SegmentedItemCreateOptions,\n  ): HTMLBnumSegmentedItem {\n    const node = document.createElement(this.TAG) as HTMLBnumSegmentedItem;\n\n    if (options?.onSelect)\n      node.addEventListener(EVT_SELECTED, (e: any) => options.onSelect!(e));\n\n    if (options?.OnError)\n      node.addEventListener(EVT_ERROR, (e: any) =>\n        options.OnError!(e.error, e.caller),\n      );\n\n    if (options?.label) node.textContent = options.label;\n\n    return node\n      .attr('value', value)\n      .condAttr(\n        options?.iconName as unknown as boolean,\n        'data-icon',\n        options!.iconName!,\n      )\n      .condAttr(options?.selected as boolean, ATTR_SELECTED, true)\n      .condAttr(options?.disabled as boolean, ATTR_DISABLED, true);\n  }\n\n  /**\n   * Accès aux états disponibles pour cet élément.\n   */\n  static get States() {\n    return States;\n  }\n\n  /**\n   * Accès aux évènements non-conventionnels de cet élément.\n   */\n  static get Events() {\n    return EVENTS;\n  }\n  //#endregion Static Methods\n}\n","// type: functions\n// description: Fonctions pour initialiser les listeners internes\n\nimport JsEvent from '@rotomeca/event';\nimport {\n  EventSelectArgs,\n  HTMLBnumSegmentedItem,\n  OnSelectCallback,\n} from '../bnum-segmented-item.internal';\n\n/**\n * Interface mapping the protected members needed for internal wiring.\n */\ninterface BnumSegmentedItemInternal {\n  _p_onSelectedTrigger(event: Event): void;\n}\n\nexport function OnSelectListenerInitializer(\n  listener: JsEvent<OnSelectCallback>,\n  instance: HTMLBnumSegmentedItem,\n): void {\n  listener.add('default', (args: EventSelectArgs) => {\n    (instance as unknown as BnumSegmentedItemInternal)._p_onSelectedTrigger(\n      args.parentEvent ?? new Event('click'),\n    );\n  });\n}\n","import { HTMLBnumSegmentedItem } from '../bnum-segmented-item.part';\nimport { Listen } from '../../../../core/decorators/listen';\nimport BnumElementInternal from '../../../bnum-element-states';\nimport { Data, Define, Fire, SetAttr } from '../../../../core/decorators';\nimport { Nullable } from '../../../../core/utils/types';\nimport Log from '../../../../core/utils/Log';\nimport style from './bnum-segmented-control.less';\nimport { TAG_SEGMENTED_CONTROL } from 'core/utils/constants/tags';\n\n//#region Global constants\nconst SELECTOR_SELECTED = '[selected]';\nconst STATE_NO_LEGEND = 'no-legend';\nconst EVENT_CHANGE = 'bnum-segmented-control:change';\nconst EVENT_ERROR = 'bnum-segmented-control:error';\nconst TAG_SEGMENTED_ITEM = HTMLBnumSegmentedItem.TAG;\n\n/**\n * Énumération des événements émis par le contrôle segmenté.\n *\n * @remarks\n * - `CHANGE` : déclenché lors de la sélection d'un item\n * - `ERROR` : déclenché en cas d'erreur interne\n *\n * @example\n * ```typescript\n * control.addEventListener(\n *   HTMLBnumSegmentedControl.Events.CHANGE,\n *   (e) => console.log('Sélection:', e.detail.value)\n * );\n * ```\n */\nconst EVENTS = {\n\tCHANGE: EVENT_CHANGE,\n\tERROR: EVENT_ERROR,\n} as const;\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = (\n\t<div id=\"container\">\n\t\t<label class=\"bnum-segmented-control__legend\">\n\t\t\t<slot></slot>\n\t\t</label>\n\t\t<div class=\"bnum-segmented-control__items\">\n\t\t\t{' '}\n\t\t\t<slot name=\"items\"></slot>\n\t\t</div>\n\t</div>\n);\n//#endregion Template\n\n/**\n * Élément de contrôle segmenté (groupe de boutons radio).\n *\n * @structure Sans icône\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" value=\"option2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @structure Avec icône\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" data-icon=\"add\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"remove\" value=\"option2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @structure Avec 3 segments\n * <bnum-segmented-control>\n *   Légende du contrôle\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_agenda\" value=\"option1\">Option 1</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_array\" value=\"option2\">Option 2</bnum-segmented-item>\n *  <bnum-segmented-item slot=\"items\" data-icon=\"view_carousel\" value=\"option3\">Option 3</bnum-segmented-item>\n * </bnum-segmented-control>\n *\n * @description\n * Composant permettant de présenter plusieurs options mutuellement exclusives\n * sous la forme d'un groupe de contrôles segmentés.\n *\n * @remarks\n * - Respecte le pattern WAI-ARIA \"Radio Group\"\n * - Support complet de la navigation au clavier (flèches, boucle cyclique)\n * - Support de la directionnalité RTL (arabe, hébreu, etc.)\n * - La sélection suit le focus pour l'accessibilité\n *\n * @example\n * ```html\n * <bnum-segmented-control>\n *    Choisir une option\n *    <bnum-segmented-item slot=\"items\" selected value=\"opt1\">Option 1</bnum-segmented-item>\n *    <bnum-segmented-item slot=\"items\" value=\"opt2\">Option 2</bnum-segmented-item>\n * </bnum-segmented-control>\n * ```\n *\n * @example\n * ```typescript\n * const control = HTMLBnumSegmentedControl.Create('Ma légende');\n * control.addEventListener('bnum-segmented-control:change', (e) => {\n *   console.log('Valeur sélectionnée:', e.detail.value);\n * });\n * ```\n *\n * @fires {CustomEvent} bnum-segmented-control:change - Émis lors de la sélection d'un item. Détail : `{value: string, item: HTMLBnumSegmentedItem, caller: HTMLBnumSegmentedControl}`\n * @fires {CustomEvent} bnum-segmented-control:error - Émis en cas d'erreur interne. Détail : `{error: Error, caller: HTMLBnumSegmentedControl}`\n *\n * @see {@link HTMLBnumSegmentedItem}\n */\n@Define({\n\ttag: TAG_SEGMENTED_CONTROL,\n\tstyles: style,\n\ttemplate: TEMPLATE,\n})\nexport class HTMLBnumSegmentedControl extends BnumElementInternal {\n\t//#region Getters/Setters\n\t/**\n\t * Contrôle l'affichage de la légende du contrôle segmenté.\n\t *\n\t * @remarks\n\t * - `true` : affiche la légende (défaut)\n\t * - `false` : masque la légende via la classe `no-legend`\n\t *\n\t * @decorator `@Data()`\n\t * @default true\n\t */\n\t@Data() accessor #_legend: boolean = true;\n\n\t/**\n\t * Récupère l'élément actuellement sélectionné dans le contrôle.\n\t *\n\t * @remarks\n\t * Retourne `null` si aucun élément n'est sélectionné.\n\t *\n\t * @readonly\n\t * @returns {Nullable<HTMLBnumSegmentedItem>} L'item sélectionné ou null.\n\t */\n\tget selected(): Nullable<HTMLBnumSegmentedItem> {\n\t\treturn this.querySelector(SELECTOR_SELECTED);\n\t}\n\n\t/**\n\t * Récupère la valeur de l'élément actuellement sélectionné.\n\t *\n\t * @remarks\n\t * La valeur provient de l'attribut `value` de l'item sélectionné.\n\t * Retourne `null` si aucun élément n'est sélectionné.\n\t *\n\t * @readonly\n\t * @returns {Nullable<string>} La valeur de l'item sélectionné ou null.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = document.querySelector('bnum-segmented-control');\n\t * console.log(control.currentValue); // \"option1\"\n\t * ```\n\t */\n\tget currentValue(): Nullable<string> {\n\t\treturn this.selected?.value || null;\n\t}\n\t//#endregion Getters/Setters\n\n\t//#region Lifecycle\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\t/**\n\t * Initialise le DOM et configure le composant.\n\t *\n\t * @remarks\n\t * Définit l'attribut `role=\"radiogroup\"` et initialise :\n\t * - L'affichage/masquage de la légende\n\t * - Les écouteurs d'événements clavier\n\t * - Les écouteurs de sélection d'items\n\t *\n\t * @protected\n\t * @decorator `@SetAttr('role', 'radiogroup')`\n\t */\n\t@SetAttr('role', 'radiogroup')\n\tprotected _p_buildDOM(): void {\n\t\tthis.#_initLegendVisibility().#_setListeners().#_initSelectedItem();\n\t}\n\n\t//#endregion Lifecycle\n\n\t//#region Private methods\n\t/**\n\t * Gère l'affichage de la légende en fonction de l'attribut `data-legend`.\n\t *\n\t * @remarks\n\t * Si `legend` est `false`, ajoute l'état CSS `no-legend` au composant.\n\t *\n\t * @private\n\t * @returns L'instance courante pour le chaînage de méthodes.\n\t */\n\t#_initLegendVisibility(): this {\n\t\tif (!(this.#_legend ?? true)) this._p_addState(STATE_NO_LEGEND);\n\t\treturn this;\n\t}\n\n\t/**\n   * Initialise la sélection du premier item par défaut.\n   *\n   * @description\n   * Si aucun item n'est déjà sélectionné, sélectionne automatiquement\n   * le premier item du contrôle segmenté.\n   *\n   * @remarks\n   * - Garantit qu'au moins un item est toujours sélectionné\n   * - Déclenche l'événement `bnum-segmented-control:change` via `click()`\n   * - Utile pour initialiser le state du composant au chargement\n\n   * @returns L'instance courante pour le chaînage de méthodes.\n   */\n\t#_initSelectedItem(): this {\n\t\tif (!this.selected) {\n\t\t\tconst firstItem = this.querySelector(\n\t\t\t\tTAG_SEGMENTED_ITEM,\n\t\t\t) as Nullable<HTMLBnumSegmentedItem>;\n\t\t\tif (firstItem) firstItem.click();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Enregistre les écouteurs d'événements du composant.\n\t *\n\t * @remarks\n\t * Configure :\n\t * - La navigation au clavier (flèches, boucle cyclique)\n\t * - La sélection d'items\n\t *\n\t * @private\n\t * @returns L'instance courante pour le chaînage de méthodes.\n\t */\n\t#_setListeners(): this {\n\t\tthis.#_onItemSelected();\n\t\tthis.#_handleKeyboardNavigation();\n\t\treturn this;\n\t}\n\n\t/**\n\t * Gère la navigation au clavier au sein du groupe (accessibilité).\n\t *\n\t * @description\n\t * Intercepte les touches fléchées pour déplacer le focus et la sélection :\n\t * - **Flèche bas / Flèche droite (LTR)** : sélectionne l'item suivant\n\t * - **Flèche haut / Flèche gauche (LTR)** : sélectionne l'item précédent\n\t * - **Support RTL** : les flèches droite/gauche sont inversées\n\t * - **Comportement cyclique** : la dernière option ramène à la première\n\t *\n\t * @remarks\n\t * Respecte le pattern WAI-ARIA \"Radio Group\" où la sélection suit le focus.\n\t * Prévient le scroll natif de la page lors de la navigation.\n\t *\n\t * @private\n\t * @decorator `@Listen('keydown')`\n\t * @returns Fonction de gestion de l'événement clavier.\n\t */\n\t@Listen('keydown')\n\t#_handleKeyboardNavigation(): Function {\n\t\treturn (e: KeyboardEvent) => {\n\t\t\t// Définition des touches de navigation\n\t\t\t// Support RTL : si la page est en arabe/hébreu, Gauche/Droite sont inversés\n\t\t\tconst isRTL = getComputedStyle(this).direction === 'rtl';\n\t\t\tconst KEY_NEXT = ['ArrowDown', isRTL ? 'ArrowLeft' : 'ArrowRight'];\n\t\t\tconst KEY_PREV = ['ArrowUp', isRTL ? 'ArrowRight' : 'ArrowLeft'];\n\t\t\tconst ALL_KEYS = [...KEY_NEXT, ...KEY_PREV];\n\n\t\t\t// Ignorer les touches non concernées\n\t\t\tif (!ALL_KEYS.includes(e.key)) return;\n\n\t\t\t// Prévenir le scroll natif de la page\n\t\t\te.preventDefault();\n\n\t\t\t// Récupération des items\n\t\t\tconst items = Array.from(\n\t\t\t\tthis.querySelectorAll(TAG_SEGMENTED_ITEM),\n\t\t\t) as HTMLBnumSegmentedItem[];\n\n\t\t\tif (items.length === 0) return;\n\n\t\t\t// Calcul du nouvel index (Logique cyclique)\n\t\t\tconst currentItem = this.selected as HTMLBnumSegmentedItem;\n\t\t\t// Si rien n'est sélectionné, on part de -1 (donc next sera 0)\n\t\t\tconst currentIndex = currentItem ? items.indexOf(currentItem) : -1;\n\t\t\tconst direction = KEY_PREV.includes(e.key) ? -1 : 1;\n\n\t\t\t// Formule mathématique pour le \"wrap-around\" (boucle fin -> début)\n\t\t\tconst nextIndex =\n\t\t\t\t(currentIndex + direction + items.length) % items.length;\n\n\t\t\tconst targetItem = items[nextIndex];\n\n\t\t\tif (targetItem) {\n\t\t\t\ttargetItem.focus();\n\t\t\t\ttargetItem.click();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Enregistre l'écouteur pour l'événement de sélection d'un item.\n\t *\n\t * @remarks\n\t * Déclenche {@link #_onItemSelectedAction} lorsqu'un item emet l'événement\n\t * `HTMLBnumSegmentedItem.Events.SELECTED`.\n\t *\n\t * @private\n\t * @decorator `@Listen(HTMLBnumSegmentedItem.Events.SELECTED, { selector: TAG_SEGMENTED_ITEM })`\n\t * @returns Fonction de gestion de la sélection d'item.\n\t */\n\t@Listen(HTMLBnumSegmentedItem.Events.SELECTED, {\n\t\tselector: TAG_SEGMENTED_ITEM,\n\t})\n\t#_onItemSelected(): Function {\n\t\treturn this.#_onItemSelectedAction;\n\t}\n\n\t/**\n\t * Traite la sélection d'un item du contrôle segmenté.\n\t *\n\t * @description\n\t * Désélectionne tous les items existants et sélectionne le nouvel item.\n\t * Émet l'événement `bnum-segmented-control:change` avec les détails.\n\t *\n\t * @remarks\n\t * - Valide que la cible de l'événement existe\n\t * - Lève une erreur si la cible est manquante\n\t * - Garantit qu'un seul item est sélectionné à la fois\n\t *\n\t * @private\n\t * @decorator `@Fire('bnum-segmented-control:change')`\n\t * @param e - Événement de sélection d'item depuis `HTMLBnumSegmentedItem`.\n\t * @returns Détails de l'événement émis : `{value: string, item: HTMLBnumSegmentedItem, caller: HTMLBnumSegmentedControl}`\n\t *\n\t * @fires bnum-segmented-control:change\n\t *\n\t * @example\n\t * ```typescript\n\t * control.addEventListener('bnum-segmented-control:change', (e) => {\n\t *   console.log('Item sélectionné:', e.detail.item);\n\t *   console.log('Valeur:', e.detail.value);\n\t * });\n\t * ```\n\t */\n\t@Fire(EVENT_CHANGE)\n\t#_onItemSelectedAction(\n\t\te: CustomEvent<{\n\t\t\tinnerEvent: Nullable<Event>;\n\t\t\ttarget: Nullable<HTMLBnumSegmentedItem>;\n\t\t}>,\n\t) {\n\t\tconst { target } = e.detail;\n\n\t\tif (!target) {\n\t\t\tthis.#_onError(\n\t\t\t\tnew Error(\"Élément cible manquant dans l'événement sélectionné.\"),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#_unselectAllItems();\n\t\tthis.#_selectItem(target!);\n\n\t\treturn { value: target?.value, item: target, caller: this };\n\t}\n\n\t/**\n\t * Traite les erreurs internes du composant.\n\t *\n\t * @remarks\n\t * - Enregistre l'erreur dans les logs\n\t * - Émet l'événement `bnum-segmented-control:error`\n\t * - Peut être déclenché lors de la sélection d'items invalides\n\t *\n\t * @private\n\t * @decorator `@Fire('bnum-segmented-control:error')`\n\t * @param error - L'erreur survenue.\n\t * @returns Détails de l'événement d'erreur : `{error: Error, caller: HTMLBnumSegmentedControl}`\n\t *\n\t * @fires bnum-segmented-control:error\n\t *\n\t * @example\n\t * ```typescript\n\t * control.addEventListener('bnum-segmented-control:error', (e) => {\n\t *   console.error('Erreur dans le contrôle:', e.detail.error);\n\t * });\n\t * ```\n\t */\n\t@Fire(EVENT_ERROR)\n\t#_onError(error: Error) {\n\t\tLog.error('HTMLBnumSegmentedControl', 'Une erreur est survenue', error);\n\t\treturn { error, caller: this };\n\t}\n\n\t/**\n\t * Désélectionne tous les items du contrôle segmenté.\n\t *\n\t * @remarks\n\t * Supprime l'attribut `selected` de tous les items, indépendamment de leur\n\t * état actuel.\n\t *\n\t * @private\n\t */\n\t#_unselectAllItems(): void {\n\t\tconst items = this.querySelectorAll(TAG_SEGMENTED_ITEM);\n\n\t\tif (items.length > 0) {\n\t\t\tfor (const element of Array.from(items)) {\n\t\t\t\telement.removeAttribute('selected');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Sélectionne un item spécifique du contrôle segmenté.\n\t *\n\t * @remarks\n\t * Ajoute l'attribut `selected=\"true\"` à l'item fourni.\n\t * Doit être appelé après {@link #_unselectAllItems} pour respecter\n\t * le comportement de sélection unique.\n\t *\n\t * @private\n\t * @param item - L'item à sélectionner.\n\t */\n\t#_selectItem(item: HTMLBnumSegmentedItem): void {\n\t\titem.setAttribute('selected', 'true');\n\t}\n\t//#region Private methods\n\n\t//#region Static methods\n\t/**\n\t * Crée un nouveau contrôle segmenté avec une légende.\n\t *\n\t * @remarks\n\t * Fabrique statique pour créer rapidement un contrôle segmenté vide.\n\t * Les items doivent être ajoutés manuellement après la création.\n\t *\n\t * @static\n\t * @param legend - La légende du contrôle segmenté.\n\t * @returns L'élément de contrôle segmenté créé.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = HTMLBnumSegmentedControl.Create('Choisir une option');\n\t * document.body.appendChild(control);\n\t * ```\n\t */\n\tstatic Create(legend: string): HTMLBnumSegmentedControl {\n\t\tconst node = document.createElement(this.TAG) as HTMLBnumSegmentedControl;\n\t\tnode.textContent = legend;\n\t\treturn node;\n\t}\n\n\t/**\n\t * Récupère l'énumération des événements du composant.\n\t *\n\t * @remarks\n\t * Contient les noms des événements personnalisés émis par le composant.\n\t * Utiliser ces constantes plutôt que des chaînes de caractères brutes\n\t * pour éviter les erreurs typographiques.\n\t *\n\t * @example\n\t * ```typescript\n\t * const control = document.querySelector('bnum-segmented-control');\n\t *\n\t * // Bonne pratique : utiliser Events\n\t * control.addEventListener(\n\t *   HTMLBnumSegmentedControl.Events.CHANGE,\n\t *   (e) => console.log('Changement:', e.detail)\n\t * );\n\t *\n\t * // À éviter : chaîne brute\n\t * control.addEventListener('bnum-segmented-control:change', (e) => {});\n\t * ```\n\t */\n\tstatic get Events() {\n\t\treturn EVENTS;\n\t}\n\n\t//#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { TAG_CARD } from '../../../core/utils/constants/tags';\nimport { removeButtonRole, setButtonRole } from '../../../core/utils/utils';\nimport style from './bnum-card.less';\nimport { HTMLBnumIcon } from '../../atoms/icon/bnum-icon';\nimport { Nullable } from '../../../core/utils/types';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Define, Self } from '../../../core/decorators';\nimport { CustomDom } from '../../bnum-element';\n\nexport { HTMLBnumCardElement };\n\nconst SHEET = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n/**\n * Données du titre de la carte défini dans les attributs `data` du composant\n */\ntype TitleData = {\n  /**\n   * Icône du titre\n   */\n  icon?: string;\n  /**\n   * Texte du titre\n   */\n  text?: string;\n  /**\n   * Lien du titre\n   */\n  link?: string;\n  /**\n   * Indique si toutes les données du titre sont présentes\n   */\n  has: () => boolean;\n};\n\n/**\n * Élément à ajouter dans un slot avec un nom de slot optionnel.\n */\nclass ScheduleElementAppend {\n  #_element: Element;\n  #_slot: Nullable<string>;\n\n  /**\n   * Constructeur de la classe ScheduleElementAppend.\n   * @param element Element à ajouter\n   * @param slot Dans quel slot (null pour le slot principal)\n   */\n  constructor(element: Element, slot: Nullable<string> = null) {\n    this.#_element = element;\n    this.#_slot = slot;\n  }\n\n  /**\n   * Retourne l'élément à ajouter.\n   */\n  get element(): Element {\n    return this.#_element;\n  }\n\n  /**\n   * Retourne le nom du slot où ajouter l'élément.\n   */\n  get slot(): Nullable<string> {\n    return this.#_slot;\n  }\n}\n\n//#region Global constants\nconst CSS_CLASS_TITLE = 'card-title';\nconst CSS_CLASS_BODY = 'card-body';\nconst SLOT_TITLE = 'title';\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = BnumElementInternal.CreateTemplate(\n  `\n      <div class=\"${CSS_CLASS_TITLE}\">\n        <slot name=\"${SLOT_TITLE}\"></slot>\n      </div>\n      <div class=\"${CSS_CLASS_BODY}\">\n        <slot id=\"mainslot\"></slot>\n      </div>\n    `,\n);\n//#endregion Template\n/**\n * Élément HTML représentant une carte personnalisée Bnum.\n *\n * Liste des slots :\n * - title : Contenu du titre de la carte. Si aucun contenu n'est fourni, un titre par défaut sera généré à partir des attributs de données.\n * - (slot par défaut) : Contenu du corps de la carte.\n *\n * Liste des data :\n * - title-icon : Icône du titre de la carte.\n * - title-text : Texte du titre de la carte.\n * - title-link : Lien du titre de la carte.\n *\n * /!\\ Les data servent à définir un titre par défaut, si le slot \"title\" est vide ou pas défini.\n *\n * Liste des attributs :\n * - clickable : Rend la carte cliquable.\n * - loading : Indique si la carte est en état de chargement.\n *\n * Évènements personnalisés :\n * - bnum-card:loading : Déclenché lorsque l'état de chargement de la carte change.\n * - bnum-card:click : Déclenché lorsqu'un clic est effectué sur une carte cliquable.\n *\n * @structure Cas standard\n * <bnum-card>\n * <span slot=\"title\">Titre de la carte</span>\n * <p>Contenu principal.</p>\n * </bnum-card>\n *\n * @structure Carte cliquable\n * <bnum-card clickable>\n * <span slot=\"title\">Carte cliquable</span>\n * <p>Cliquez n'importe où.</p>\n * </bnum-card>\n *\n * @structure Carte avec titre par défaut (via data-attrs)\n * <bnum-card\n * data-title-text=\"Titre généré\"\n * data-title-icon=\"info\"\n * >\n * <p>Le slot \"title\" est vide.</p>\n * </bnum-card>\n *\n * @structure Carte avec un chargement\n * <bnum-card loading>\n * <bnum-card-title slot=\"title\" data-icon=\"info\">Titre en cours de chargement...</bnum-card-title>\n * <p>Chargement</p>\n * </bnum-card>\n *\n * @state clickable - Est actif lorsque la carte est cliquable.\n * @state loading - Est actif lorsque la carte est en état de chargement.\n *\n * @slot title - Contenu du titre de la carte. Si aucun contenu n'est fourni, un titre par défaut sera généré.\n * @slot (default) - Contenu du corps de la carte. Masqué si l'état `loading` est actif.\n *\n * @cssvar {block} --bnum-card-display - Définit le type d'affichage du composant.\n * @cssvar {var(--bnum-space-m, 15px)} --bnum-card-padding - Définit le padding interne de la carte.\n * @cssvar {auto} --bnum-card-width - Définit la largeur de la carte.\n * @cssvar {auto} --bnum-card-height - Définit la hauteur de la carte.\n * @cssvar {var(--bnum-color-surface, #f6f6f7)} --bnum-card-background-color - Couleur de fond de la carte.\n * @cssvar {var(--bnum-color-surface-hover, #eaeaea)} --bnum-card-background-color-hover - Couleur de fond au survol.\n * @cssvar {var(--bnum-color-surface-active, #dfdfdf)} --bnum-card-background-color-active - Couleur de fond à l'état actif.\n * @cssvar {pointer} --bnum-card-clickable-cursor - Curseur utilisé lorsque la carte est cliquable.\n * @cssvar {var(--bnum-card-loader-animation-rotate360, var(--bnum-animation-rotate360, rotate360 1s linear infinite))} --bnum-card-loader-animation-rotate360 - Animation appliquée au loader (spinner).\n *\n */\n@Define()\nclass HTMLBnumCardElement extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Indique si la carte est cliquable.\n   * @prop {boolean | undefined} clickable - Si vrai, rend la carte interactive et accessible (rôle bouton).\n   * @attr {boolean | string | undefined} (optional) clickable\n   * @type {string}\n   */\n  static readonly STATE_CLICKABLE = 'clickable';\n  /**\n   * Indique si la carte est en cours de chargement.\n   * @prop {boolean | undefined} loading - Si vrai, affiche un spinner et masque le corps.\n   * @attr {boolean | string | undefined} (optional) loading\n   * @type {string}\n   */\n  static readonly STATE_LOADING = 'loading';\n\n  /**\n   * Classe CSS pour le titre de la carte.\n   * @type {string}\n   */\n  static readonly CSS_CLASS_TITLE = CSS_CLASS_TITLE;\n  /**\n   * Classe CSS pour le corps de la carte.\n   * @type {string}\n   */\n  static readonly CSS_CLASS_BODY = CSS_CLASS_BODY;\n  /**\n   * Classe CSS pour l'affichage du loading.\n   * @type {string}\n   */\n  static readonly CSS_CLASS_LOADING = 'card-loading';\n\n  /**\n   * Nom de la data pour l'icône du titre.\n   * @attr {string | undefined} (optional) data-title-icon - Nom de l'icône (Material Symbols) pour le titre par défaut.\n   * @type {string}\n   */\n  static readonly DATA_TITLE_ICON = 'title-icon';\n  /**\n   * Nom de la data pour le texte du titre.\n   * @attr {string | undefined} (optional) data-title-text - Texte à afficher dans le titre par défaut.\n   * @type {string}\n   */\n  static readonly DATA_TITLE_TEXT = 'title-text';\n  /**\n   * Nom de la data pour le lien du titre.\n   * @attr {string | undefined} (optional) data-title-link - URL à utiliser si le titre par défaut doit être un lien.\n   * @type {string}\n   */\n  static readonly DATA_TITLE_LINK = 'title-link';\n\n  /**\n   * Nom de l'évènement déclenché lors du loading.\n   * @event bnum-card:loading\n   * @detail { oldValue: string|null, newValue: string|null, caller: HTMLBnumCardElement }\n   * @type {string}\n   */\n  static readonly EVENT_LOADING = 'bnum-card:loading';\n  /**\n   * Nom de l'évènement déclenché lors d'un clic sur la carte.\n   * @event bnum-card:click\n   * @detail { originalEvent: MouseEvent }\n   * @type {string}\n   */\n  static readonly EVENT_CLICK = 'bnum-card:click';\n\n  /**\n   * Nom du slot pour le titre.\n   * @type {string}\n   */\n  static readonly SLOT_TITLE = SLOT_TITLE;\n  /**\n   * Nom de l'icône utilisée pour le spinner de chargement.\n   * @type {string}\n   */\n  static readonly ICON_SPINNER = 'progress_activity';\n  /**\n   * Symbole utilisé pour réinitialiser le contenu du slot.\n   */\n  static readonly SYMBOL_RESET = Symbol('reset');\n  //#endregion\n\n  //#region Private fields\n  /**\n   * Élément HTML utilisé pour afficher le loading.\n   * @type {HTMLElement | null}\n   */\n  #_loadingElement: HTMLElement | null = null;\n  #_scheduleBody: Nullable<Scheduler<Element | Symbol>> = null;\n  #_scheduleTitle: Nullable<Scheduler<Element | Symbol>> = null;\n  #_scheduleAppend: Nullable<Scheduler<ScheduleElementAppend>> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumCardElement */\n  @Self _!: typeof HTMLBnumCardElement;\n\n  /**\n   * Retourne l'icône du titre depuis les données du composant.\n   * @returns {string} Icône du titre.\n   */\n  private get _titleIcon(): string {\n    return this.data(this._.DATA_TITLE_ICON);\n  }\n\n  /**\n   * Retourne le texte du titre depuis les données du composant.\n   * @returns {string} Texte du titre.\n   */\n  private get _titleText(): string {\n    return this.data(this._.DATA_TITLE_TEXT);\n  }\n\n  /**\n   * Retourne le lien du titre depuis les données du composant.\n   * @returns {string} Lien du titre.\n   */\n  private get _titleLink(): string {\n    return this.data(this._.DATA_TITLE_LINK);\n  }\n\n  /**\n   * Retourne les données du titre sous forme d'objet TitleData.\n   * @returns {TitleData} Objet contenant les données du titre.\n   */\n  private get _titleData(): TitleData {\n    return {\n      icon: this._titleIcon,\n      text: this._titleText,\n      link: this._titleLink,\n      has: () => {\n        return this._titleText !== null && this._titleText !== undefined;\n      },\n    };\n  }\n\n  /**\n   * Si vrai, affiche la carte en état de chargement. Elle montre un spinner et masque le corps, de plus, tout les `pointer-events` sont désactivés.\n   * @returns {boolean}\n   */\n  get loading(): boolean {\n    return this.hasAttribute(this._.STATE_LOADING);\n  }\n\n  /**\n   * Définit l'état de chargement de la carte.\n   * @param {boolean} value\n   * @returns {void}\n   */\n  set loading(value: boolean) {\n    if (value) {\n      this.setAttribute(this._.STATE_LOADING, this._.STATE_LOADING);\n    } else {\n      this.removeAttribute(this._.STATE_LOADING);\n    }\n  }\n\n  /**\n   * Si vrai, la carte est cliquable et interactive.\n   * @returns {boolean}\n   */\n  public get clickable(): boolean {\n    return this.hasAttribute(this._.STATE_CLICKABLE);\n  }\n\n  /**\n   * Définit si la carte est cliquable ou non.\n   * @param {boolean} value\n   * @returns {void}\n   */\n  public set clickable(value: boolean) {\n    // Ajoute le rôle et la tabulation pour l'accessibilité\n    if (value) {\n      this.setAttribute(this._.STATE_CLICKABLE, this._.STATE_CLICKABLE);\n\n      setButtonRole(this);\n    } else {\n      this.removeAttribute(this._.STATE_CLICKABLE);\n\n      removeButtonRole(this);\n    }\n  }\n  //#endregion Getters/Setters\n  /**\n   * Retourne la liste des attributs observés par le composant.\n   * @returns {string[]} Liste des attributs observés.\n   */\n  static _p_observedAttributes(): string[] {\n    return [this.STATE_CLICKABLE, this.STATE_LOADING];\n  }\n\n  //#region Lifecycle\n  /**\n   * Constructeur de la classe HTMLBnumCardElement.\n   * Initialise les écouteurs d'évènements.\n   * @constructor\n   */\n  constructor() {\n    super();\n    this.addEventListener('click', this.#_handleClick.bind(this));\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  /**\n   * Construit le DOM interne du composant.\n   * @param {ShadowRoot | HTMLElement} container ShadowRoot ou HTMLElement cible.\n   * @returns {void}\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    const titleData = this._titleData;\n\n    if (titleData.has()) {\n      HTMLBnumCardTitle.Create(titleData.text || EMPTY_STRING, {\n        icon: titleData.icon || null,\n        link: titleData.link || null,\n      }).appendTo(\n        container.querySelector(`slot[name=\"${this._.SLOT_TITLE}\"]`)!,\n      );\n    }\n\n    this.#_updateDOM();\n  }\n\n  /**\n   * Met à jour le composant lors d'un changement d'attribut.\n   * @param {string} name Nom de l'attribut modifié.\n   * @param {string | null} oldVal Ancienne valeur.\n   * @param {string | null} newVal Nouvelle valeur.\n   * @returns {void}\n   */\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void {\n    if (name === this._.STATE_LOADING) {\n      this.trigger(this._.EVENT_LOADING, {\n        oldValue: oldVal,\n        newValue: newVal,\n        caller: this,\n      });\n    }\n\n    this.#_updateDOM();\n  }\n\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n  //#endregion Lifecycle\n\n  //#region Private methods\n  /**\n   * Met à jour l'affichage du DOM selon l'état du composant.\n   * @returns {void}\n   */\n  #_updateDOM(): void {\n    this._p_clearStates();\n\n    if (this.clickable) this._p_addState(this._.STATE_CLICKABLE);\n\n    if (this.loading) {\n      this._p_addState(this._.STATE_LOADING);\n\n      // Initialise le loading si nécessaire\n      if (!this.#_loadingElement) {\n        const div = this.shadowRoot?.querySelector<HTMLElement>(\n          `.${this._.CSS_CLASS_BODY}`,\n        )!;\n        div.appendChild(this.#_getLoading());\n      }\n    }\n  }\n\n  /**\n   * Retourne l'élément HTML du loading (spinner).\n   * @returns {HTMLElement} Élément HTML du loading.\n   */\n  #_getLoading(): HTMLElement {\n    if (!this.#_loadingElement) {\n      const loadingDiv = document.createElement('div');\n      loadingDiv.classList.add(this._.CSS_CLASS_LOADING);\n\n      const spinner = HTMLBnumIcon.Create(this._.ICON_SPINNER).addClass(\n        'loader',\n      );\n      loadingDiv.appendChild(spinner);\n\n      this.#_loadingElement = loadingDiv;\n    }\n\n    return this.#_loadingElement;\n  }\n\n  /**\n   * Gère le clic sur la carte.\n   * @param {MouseEvent} event Événement de clic sur la carte.\n   * @returns {void}\n   */\n  #_handleClick(event: MouseEvent): void {\n    if (this.clickable) {\n      // Déclenche un événement \"click\" natif\n      // ou un événement personnalisé si vous préférez\n      this.trigger(this._.EVENT_CLICK, { originalEvent: event });\n    }\n  }\n\n  #_requestUpdateTitle(element: Element | Symbol): void {\n    this.#_scheduleTitle ??= new Scheduler<Element | Symbol>((el) =>\n      this.#_updateOrResetTitle(el!),\n    );\n    this.#_scheduleTitle.schedule(element);\n  }\n\n  #_updateOrResetTitle(element: Element | Symbol): void {\n    if (element === this._.SYMBOL_RESET) this.#_resetTitle();\n    else this.#_updateTitle(element as Element);\n  }\n\n  #_updateTitle(element: Element): void {\n    element.setAttribute('slot', this._.SLOT_TITLE);\n    const oldTitles = this.querySelectorAll(`[slot=\"${this._.SLOT_TITLE}\"]`);\n    oldTitles.forEach((node) => node.remove());\n    this.appendChild(element);\n  }\n\n  #_resetTitle(): void {\n    // On trouve tous les éléments du Light DOM assignés au slot \"title\"\n    const nodes = this.querySelectorAll(`[slot=\"${this._.SLOT_TITLE}\"]`);\n    nodes.forEach((node) => node.remove());\n  }\n\n  #_requestUpdateBody(element: Element | Symbol): void {\n    this.#_scheduleBody ??= new Scheduler<Element | Symbol>((el) =>\n      this.#_updateOrResetBody(el!),\n    );\n    this.#_scheduleBody.schedule(element);\n  }\n\n  #_updateOrResetBody(element: Element | Symbol): void {\n    if (element === this._.SYMBOL_RESET) this.#_resetBody();\n    else this.#_updateBody(element as Element);\n  }\n\n  #_updateBody(element: Element): void {\n    element.removeAttribute('slot');\n\n    const oldBodyNodes = Array.from(this.childNodes).filter(\n      (node) =>\n        (node.nodeType === Node.ELEMENT_NODE &&\n          (node as Element).getAttribute('slot') !== this._.SLOT_TITLE) ||\n        (node.nodeType === Node.TEXT_NODE &&\n          node.textContent?.trim() !== EMPTY_STRING),\n    );\n\n    oldBodyNodes.forEach((node) => node.remove());\n\n    this.appendChild(element);\n  }\n\n  #_resetBody(): void {\n    // On trouve tous les éléments qui n'ont PAS de slot=\"title\"\n    const nodes = Array.from(this.childNodes).filter(\n      (node) =>\n        (node.nodeType === Node.ELEMENT_NODE &&\n          (node as Element).getAttribute('slot') !== this._.SLOT_TITLE) ||\n        (node.nodeType === Node.TEXT_NODE &&\n          node.textContent?.trim() !== EMPTY_STRING),\n    );\n\n    nodes.forEach((node) => node.remove());\n  }\n\n  #_requestAppendElement(appended: ScheduleElementAppend): void {\n    this.#_scheduleAppend ??= new Scheduler<ScheduleElementAppend>((el) =>\n      this.#_appendElement(el!),\n    );\n    this.#_scheduleAppend.schedule(appended);\n  }\n\n  #_appendElement(appended: ScheduleElementAppend): void {\n    if (appended.slot) appended.element.setAttribute('slot', appended.slot);\n    else appended.element.removeAttribute('slot');\n\n    this.appendChild(appended.element);\n  }\n  //#endregion Private methods\n\n  //#region Public methods\n  /**\n   * Remplace tout le contenu du slot \"title\" par un nouvel élément.\n   * @param {Element} element Élément à insérer dans le slot \"title\".\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  updateTitle(element: Element): HTMLBnumCardElement {\n    this.#_requestUpdateTitle(element);\n    return this;\n  }\n\n  /**\n   * Remplace tout le contenu du slot par défaut (body) par un nouvel élément.\n   * @param {Element} element Élément à insérer dans le corps de la carte.\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  updateBody(element: Element): HTMLBnumCardElement {\n    this.#_requestUpdateBody(element);\n    return this;\n  }\n\n  /**\n   * Supprime tous les éléments du slot \"title\".\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  public clearTitle(): HTMLBnumCardElement {\n    this.#_requestUpdateTitle(this._.SYMBOL_RESET);\n    return this;\n  }\n\n  /**\n   * Supprime tous les éléments du corps de la carte (hors slot \"title\").\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  public clearBody(): HTMLBnumCardElement {\n    this.#_requestUpdateBody(this._.SYMBOL_RESET);\n    return this;\n  }\n  /**\n   * Ajoute un élément au slot \"title\" sans supprimer les éléments existants.\n   * @param {Element} element Élément à ajouter au slot \"title\".\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  public appendToTitle(element: Element): HTMLBnumCardElement {\n    this.#_requestAppendElement(\n      new ScheduleElementAppend(element, this._.SLOT_TITLE),\n    );\n    return this;\n  }\n\n  /**\n   * Ajoute un élément au corps de la carte (slot par défaut) sans supprimer les éléments existants.\n   * @param {Element} element Élément à ajouter au corps de la carte.\n   * @returns {HTMLBnumCardElement} L'instance courante de HTMLCardElement.\n   */\n  public appendToBody(element: Element): HTMLBnumCardElement {\n    this.#_requestAppendElement(new ScheduleElementAppend(element));\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Static properties\n\n  /**\n   * Crée une nouvelle instance de HTMLBnumCardElement avec les options spécifiées.\n   * @param param0 Options de création de la carte\n   * @param param0.title Titre de la carte (optionnel)\n   * @param param0.body Corps de la carte (optionnel)\n   * @param param0.clickable Si vrai, rend la carte cliquable (optionnel, défaut false)\n   * @param param0.loading Si vrai, affiche la carte en état de chargement (optionnel, défaut false)\n   * @returns Element HTMLBnumCardElement créé\n   */\n  public static override Create({\n    title = null,\n    body = null,\n    clickable = false,\n    loading = false,\n  }: {\n    title?: Nullable<HTMLBnumCardTitle>;\n    body?: Nullable<Element>;\n    clickable?: boolean;\n    loading?: boolean;\n  } = {}): HTMLBnumCardElement {\n    const card = document.createElement(this.TAG) as HTMLBnumCardElement;\n\n    if (title) card.updateTitle(title);\n    if (body) card.updateBody(body);\n\n    if (clickable)\n      card.setAttribute(this.STATE_CLICKABLE, this.STATE_CLICKABLE);\n\n    if (loading) card.setAttribute(this.STATE_LOADING, this.STATE_LOADING);\n\n    return card;\n  }\n\n  /**\n   * Retourne le nom de la balise personnalisée pour cet élément.\n   * @returns Nom de la balise personnalisée.\n   */\n  public static get TAG(): string {\n    return TAG_CARD;\n  }\n  //#endregion Static properties\n}\n","import BnumElement from '../../components/bnum-element';\nimport { HTMLBnumButton } from '../../components/atoms/button/bnum-button';\n\n/**\n * Définit le rôle du bouton sur l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié en bouton.\n */\nexport { setButtonRole, removeButtonRole };\n\n/**\n * Définit le rôle du bouton sur l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié en bouton.\n */\nfunction setButtonRole(element: BnumElement): BnumElement {\n  return HTMLBnumButton.ToButton(element);\n}\n\n/**\n * Supprime le rôle du bouton et les attributs associés de l'élément donné.\n * @param element Élément Bnum à modifier.\n * @returns L'élément Bnum modifié sans rôle de bouton.\n */\nfunction removeButtonRole(element: BnumElement): BnumElement {\n  if (element.getAttribute('data-set-event') === 'onkeydown') {\n    element.removeAttribute('data-set-event');\n    element.onkeydown = null;\n  }\n\n  element.removeAttribute('role');\n  element.removeAttribute('tabindex');\n\n  return element;\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumCardElement } from '../card/bnum-card';\nimport { Nullable } from '../../../core/utils/types';\nimport style from './bnum-card-agenda.less';\nimport JsEvent from '@rotomeca/event';\nimport { HTMLBnumCardList } from '../../molecules/card-list/bnum-card-list';\nimport { HTMLBnumCardItem } from '../../molecules/card-item/bnum-card-item';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { TAG_CARD_AGENDA } from '../../../core/utils/constants/tags';\nimport { HTMLBnumCardItemAgenda } from '../../molecules/card-item-agenda/bnum-card-item-agenda';\nimport { Define, Self } from '../../../core/decorators';\nimport { ArrayUtils } from '../../../core/utils/ArrayUtils';\n\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst ID_CARD_TITLE = 'bnum-card-title';\nconst ID_CARD_ITEM_NO_ELEMENTS = 'no-elements';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = BnumElement.CreateTemplate(\n  `\n    <${HTMLBnumCardElement.TAG}>\n      <${HTMLBnumCardTitle.TAG} id=\"${ID_CARD_TITLE}\" slot=\"title\" data-icon=\"today\">${BnumConfig.Get('local_keys')!.last_events!}</${HTMLBnumCardTitle.TAG}>\n        <${HTMLBnumCardList.TAG}>\n          <slot></slot>\n          <${HTMLBnumCardItem.TAG} id=\"${ID_CARD_ITEM_NO_ELEMENTS}\" disabled hidden>${BnumConfig.Get('local_keys')!.no_events!}</${HTMLBnumCardItem.TAG}>\n        </${HTMLBnumCardList.TAG}>\n    </${HTMLBnumCardElement.TAG}>\n    `,\n);\n//#endregion Template\n\n/**\n * Organisme qui permet d'afficher simplement une liste d'évènements dans une carte.\n *\n * @structure Avec des éléments\n * <bnum-card-agenda>\n * <bnum-card-item-agenda\n *    data-date=\"2024-01-01\"\n *    data-start-date=\"2024-01-01 08:00:00\"\n *    data-end-date=\"2024-01-01 10:00:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * <bnum-card-item-agenda\n *    data-date=\"2025-11-20\"\n *    data-start-date=\"2025-10-20 09:40:00\"\n *    data-end-date=\"2025-12-20 10:10:00\"\n *    data-title=\"Réunion de projet\"\n *    data-location=\"Salle de conférence\">\n * </bnum-card-item-agenda>\n * <bnum-card-item-agenda all-day\n *    data-date=\"2025-11-21\"\n *    data-title=\"Télétravail\"\n *    data-location=\"A la maison\">\n * </bnum-card-item-agenda>\n * </bnum-card-agenda>\n *\n * @structure Sans éléments\n * <bnum-card-agenda>\n * </bnum-card-agenda>\n *\n * @structure Avec une url\n * <bnum-card-agenda data-url=\"#\">\n * </bnum-card-agenda>\n *\n * @slot (default) - Contenu des éléments de type HTMLBnumCardItemAgenda.\n *\n * @cssvar {block} --bnum-card-agenda - Définit le display du composant. Par défaut à \"block\".\n */\n@Define()\nexport class HTMLBnumCardAgenda extends BnumElement {\n  //#region Constants\n  /**\n   * Nom du event déclenché lorsque les éléments changent (ajout/suppression).\n   * @event bnum-card-agenda:change\n   * @detail HTMLBnumCardItemAgenda[]\n   */\n  static readonly CHANGE_EVENT: string = 'bnum-card-agenda:change';\n  /**\n   * Data pour l'URL du titre.\n   */\n  static readonly DATA_URL: string = 'url';\n  /**\n   * Attribut data pour l'URL du titre.\n   * @attr {string | undefined} (optional) data-url - Ajoute une url au titre. Ne rien mettre pour que l'option \"url\" du titre ne s'active pas.\n   */\n  static readonly ATTRIBUTE_DATA_URL: string = `data-${HTMLBnumCardAgenda.DATA_URL}`;\n  /**\n   * Attribut pour le mode loading.\n   * @attr {string | undefined} (optional) loading - Si présent, affiche le mode loading.\n   */\n  static readonly ATTRIBUTE_LOADING: string = 'loading';\n  /**\n   * ID du titre.\n   */\n  static readonly ID_CARD_TITLE = ID_CARD_TITLE;\n  /**\n   * ID de l'élément \"Aucun élément\".\n   */\n  static readonly ID_CARD_ITEM_NO_ELEMENTS = ID_CARD_ITEM_NO_ELEMENTS;\n  //#endregion Constants\n\n  //#region Private fields\n  #_isSorting: boolean = false;\n  #_cardTitle!: HTMLBnumCardTitle;\n  #_slot!: HTMLSlotElement;\n  #_noElements!: HTMLBnumCardItem;\n  #_card: Nullable<HTMLBnumCardElement> = null;\n\n  /**\n   * Déclenché lorsque les éléments changent (ajout/suppression).\n   */\n  #_onchange: Nullable<JsEvent<(data: HTMLBnumCardItemAgenda[]) => void>> =\n    null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumCardAgenda */\n  @Self _!: typeof HTMLBnumCardAgenda;\n\n  /**\n   * Déclenché lorsque les éléments changent (ajout/suppression).\n   */\n  public get onElementChanged(): JsEvent<\n    (data: HTMLBnumCardItemAgenda[]) => void\n  > {\n    if (this.#_onchange === null) {\n      this.#_onchange = new JsEvent<\n        (data: HTMLBnumCardItemAgenda[] | Symbol) => void\n      >();\n\n      this.#_onchange.add(EVENT_DEFAULT, (data) => {\n        this.trigger(this._.CHANGE_EVENT, { detail: data });\n      });\n    }\n\n    return this.#_onchange;\n  }\n\n  /**\n   * Mode loading.\n   */\n  public get loading(): boolean {\n    return this.hasAttribute(this._.ATTRIBUTE_LOADING);\n  }\n\n  public set loading(value: boolean) {\n    if (value) {\n      this.setAttribute(this._.ATTRIBUTE_LOADING, this._.ATTRIBUTE_LOADING);\n    } else {\n      this.removeAttribute(this._.ATTRIBUTE_LOADING);\n    }\n  }\n\n  get #_cardPart(): HTMLBnumCardElement {\n    if (this.#_card === null) {\n      this.#_card =\n        this.querySelector?.(HTMLBnumCardElement.TAG) ??\n        this.shadowRoot?.querySelector?.(HTMLBnumCardElement.TAG) ??\n        null;\n    }\n    return this.#_card!;\n  }\n\n  /**\n   * Récupère l'URL du titre.\n   */\n  get #_url(): string {\n    return this.data(this._.DATA_URL) || EMPTY_STRING;\n  }\n  //#endregion Getters/Setters\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  protected get _p_styleSheets(): CSSStyleSheet[] {\n    return [SHEET];\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    this.#_cardTitle = container.querySelector(\n      `#${this._.ID_CARD_TITLE}`,\n    ) as HTMLBnumCardTitle;\n    this.#_slot = container.querySelector('slot')!;\n    this.#_noElements = container.querySelector(\n      `#${this._.ID_CARD_ITEM_NO_ELEMENTS}`,\n    ) as HTMLBnumCardItem;\n  }\n\n  protected _p_attach(): void {\n    if (this.#_url !== EMPTY_STRING) this.#_cardTitle.url = this.#_url;\n\n    // On écoute les changements dans le slot (Items statiques ou ajoutés via JS)\n    this.#_slot.addEventListener(\n      'slotchange',\n      this.#_handleSlotChange.bind(this),\n    );\n\n    this.#_handleSlotChange();\n  }\n\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    switch (name) {\n      case this._.ATTRIBUTE_LOADING:\n        if (newVal === null || newVal === EMPTY_STRING)\n          this.#_cardPart.removeAttribute(this._.ATTRIBUTE_LOADING);\n        else\n          this.#_cardPart.setAttribute(\n            this._.ATTRIBUTE_LOADING,\n            newVal || EMPTY_STRING,\n          );\n        break;\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  /**\n   * Ajoute des éléments.\n   *\n   * Note: On ajoute simplement au Light DOM. Le slotchange détectera l'ajout et déclenchera le tri.\n   * @param content Elements à ajouter\n   */\n  public add(...content: HTMLBnumCardItemAgenda[]): this {\n    this.append(...content);\n    return this;\n  }\n\n  /**\n   * Vide le composant.\n   */\n  public clear(): this {\n    this.innerHTML = EMPTY_STRING; // Vide le Light DOM\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Private methods\n  /**\n   * Gère le tri des éléments.\n   * Utilise requestAnimationFrame pour ne pas bloquer le thread si beaucoup d'items.\n   */\n  #_handleSlotChange(): void {\n    if (this.#_isSorting) return;\n\n    // On planifie le tri au prochain frame pour regrouper les appels multiples\n    requestAnimationFrame(() => {\n      this.#_sortChildren();\n    });\n  }\n\n  /**\n   * Tri les éléments enfants de la liste par date décroissante.\n   */\n  #_sortChildren(): void {\n    // Récupérer les éléments assignés au slot\n    const elements = this.#_slot.assignedElements() as HTMLElement[];\n\n    // Filtrer pour être sûr de ne trier que des événements (sécurité)\n    const agendaItems = elements.filter((el) =>\n      el.tagName.toLowerCase().includes(HTMLBnumCardItemAgenda.TAG),\n    ) as HTMLBnumCardItemAgenda[];\n\n    if (agendaItems.length === 0) {\n      this.#_noElements.hidden = false;\n      this.#_slot.hidden = true;\n      return;\n    } else {\n      this.#_noElements.hidden = true;\n      this.#_slot.hidden = false;\n    }\n\n    if (agendaItems.length < 2) return; // Pas besoin de trier\n\n    // 2. Vérifier si un tri est nécessaire (optimisation)\n    let isSorted = true;\n    for (let i = 0; i < agendaItems.length - 1; i++) {\n      if (this.#_getDate(agendaItems[i]) < this.#_getDate(agendaItems[i + 1])) {\n        isSorted = false;\n        break;\n      } else if (\n        this.#_getDate(agendaItems[i]) === this.#_getDate(agendaItems[i + 1])\n      ) {\n        // Même date de base, on regardmailItemse la date de début\n        if (\n          this.#_getStartDate(agendaItems[i]) <\n          this.#_getStartDate(agendaItems[i + 1])\n        ) {\n          isSorted = false;\n          break;\n        }\n      }\n    }\n    if (isSorted) return;\n\n    this.#_isSorting = true; // Verrouiller pour éviter que le déplacement ne relance slotchange\n\n    // Réinsérer dans l'ordre via un Fragment (1 seul Reflow)\n    const fragment = document.createDocumentFragment();\n    const sortedItems = ArrayUtils.sortByDatesDescending(\n      agendaItems,\n      (x) => this.#_getDate(x),\n      (x) => this.#_getStartDate(x),\n    );\n\n    fragment.append(...sortedItems);\n    this.appendChild(fragment); // Déplace les éléments existants, ne les recrée pas.\n\n    // Notifier le changement\n    this.onElementChanged.call(agendaItems);\n\n    // Déverrouiller après que le microtask de mutation soit passé\n    setTimeout(() => {\n      this.#_isSorting = false;\n    }, 0);\n  }\n\n  /**\n   * Helper pour parser la date de manière robuste\n   */\n  #_getDate(item: HTMLBnumCardItemAgenda): number {\n    return item.baseDate.getTime();\n  }\n\n  /**\n   * Helper pour parser la date de manière robuste\n   */\n  #_getStartDate(item: HTMLBnumCardItemAgenda): number {\n    return item.isAllDay ? this.#_getDate(item) : item.startDate.getTime();\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  protected static _p_observedAttributes(): string[] {\n    return [this.ATTRIBUTE_LOADING];\n  }\n\n  /**\n   * Méthode statique pour créer une instance du composant.\n   * @param param0 Options de création\n   * @param param0.contents Contenus initiaux à ajouter\n   * @param param0.url URL du titre\n   * @returns Nouvelle node HTMLBnumCardAgenda\n   */\n  static Create({\n    contents = [],\n    url = EMPTY_STRING,\n  }: {\n    contents?: HTMLBnumCardItemAgenda[];\n    url?: string;\n  } = {}): HTMLBnumCardAgenda {\n    const node = document.createElement(this.TAG) as HTMLBnumCardAgenda;\n\n    if (url !== EMPTY_STRING) node.setAttribute(this.ATTRIBUTE_DATA_URL, url);\n    if (contents.length > 0) node.add(...contents);\n\n    return node;\n  }\n\n  /**\n   * Tag du composant.\n   */\n  static get TAG(): string {\n    return TAG_CARD_AGENDA;\n  }\n  //#endregion Static methods\n}\n","import { EMPTY_STRING } from '@rotomeca/utils';\nimport { BnumConfig } from '../../../core/utils/BnumConfig';\nimport BnumElement from '../../bnum-element';\nimport { HTMLBnumCardElement } from '../card/bnum-card';\nimport { HTMLBnumCardItemMail } from '../../molecules/card-item-mail/bnum-card-item-mail';\nimport { Nullable } from '../../../core/utils/types';\nimport style from './bnum-card-email.less';\nimport JsEvent from '@rotomeca/event';\nimport { HTMLBnumCardList } from '../../molecules/card-list/bnum-card-list';\nimport { HTMLBnumCardItem } from '../../molecules/card-item/bnum-card-item';\nimport { HTMLBnumCardTitle } from '../../molecules/card-title/bnum-card-title';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { TAG_CARD_EMAIL } from '../../../core/utils/constants/tags';\nimport { Define, Self } from '../../../core/decorators';\n\nconst SHEET = BnumElement.ConstructCSSStyleSheet(style);\n\n//#region Global Constants\nconst ID_CARD_TITLE = 'bnum-card-title';\nconst ID_CARD_ITEM_NO_ELEMENTS = 'no-elements';\n//#endregion Global Constants\n\n//#region Template\nconst TEMPLATE = BnumElement.CreateTemplate(\n  `\n    <${HTMLBnumCardElement.TAG}>\n      <${HTMLBnumCardTitle.TAG} id=\"${ID_CARD_TITLE}\" slot=\"title\" data-icon=\"mail\">${BnumConfig.Get('local_keys')!.last_mails!}</${HTMLBnumCardTitle.TAG}>\n        <${HTMLBnumCardList.TAG}>\n          <slot></slot>\n          <${HTMLBnumCardItem.TAG} id=\"${ID_CARD_ITEM_NO_ELEMENTS}\" disabled hidden>${BnumConfig.Get('local_keys')!.no_mails!}</${HTMLBnumCardItem.TAG}>\n        </${HTMLBnumCardList.TAG}>\n    </${HTMLBnumCardElement.TAG}>\n    `,\n);\n\n/**\n * Organisme qui permet d'afficher simplement une liste de mails dans une carte.\n *\n * @structure Avec des éléments\n * <bnum-card-email>\n * <bnum-card-item-mail data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n * <bnum-card-item-mail read data-date=\"2025-10-31 11:11\" data-subject=\"Sujet ici\" data-sender=\"Expéditeur ici\">\n * </bnum-card-item-mail>\n * <bnum-card-item-mail data-date=\"now\">\n * <span slot=\"subject\">Sujet par défaut</span>\n * <span slot=\"sender\">Expéditeur par défaut</span>\n * </bnum-card-item-mail>\n * </bnum-card-email>\n *\n * @structure Sans éléments\n * <bnum-card-email>\n * </bnum-card-email>\n *\n * @structure Avec une url\n * <bnum-card-email data-url=\"#\">\n * </bnum-card-email>\n *\n * @slot (default) - Contenu des éléments de type HTMLBnumCardItemMail.\n *\n * @cssvar {block} --bnum-card-email-display - Définit le display du composant. Par défaut à \"block\".\n */\n@Define()\nexport class HTMLBnumCardEmail extends BnumElement {\n  //#region Constants\n  /**\n   * Nom du event déclenché lorsque les éléments changent (ajout/suppression).\n   * @event bnum-card-email:change\n   * @detail HTMLBnumCardItemMail[]\n   */\n  static readonly CHANGE_EVENT: string = 'bnum-card-email:change';\n  /**\n   * Data pour l'URL du titre.\n   */\n  static readonly DATA_URL: string = 'url';\n  /**\n   * Attribut data pour l'URL du titre.\n   * @attr {string | undefined} (optional) data-url - Ajoute une url au titre. Ne rien mettre pour que l'option \"url\" du titre ne s'active pas.\n   */\n  static readonly ATTRIBUTE_DATA_URL: string = `data-${this.DATA_URL}`;\n  /**\n   * ID du titre.\n   */\n  static readonly ID_CARD_TITLE: string = ID_CARD_TITLE;\n  /**\n   * ID de l'élément \"Aucun élément\".\n   */\n  static readonly ID_CARD_ITEM_NO_ELEMENTS: string = ID_CARD_ITEM_NO_ELEMENTS;\n  /**\n   * Attribut pour le mode loading.\n   * @attr {string | undefined} (optional) loading - Si présent, affiche le mode loading.\n   */\n  static readonly ATTRIBUTE_LOADING: string = 'loading';\n  //#endregion Constants\n\n  //#region Private fields\n  #_isSorting: boolean = false;\n  #_cardTitle!: HTMLBnumCardTitle;\n  #_slot!: HTMLSlotElement;\n  #_noElements!: HTMLBnumCardItem;\n  #_card: Nullable<HTMLBnumCardElement> = null;\n\n  /**\n   * Déclenché lorsque les éléments changent (ajout/suppression).\n   */\n  #_onchange: Nullable<JsEvent<(data: HTMLBnumCardItemMail[]) => void>> = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumCardEmail */\n  @Self _!: typeof HTMLBnumCardEmail;\n  /**\n   * Déclenché lorsque les éléments changent (ajout/suppression).\n   */\n  public get onElementChanged(): JsEvent<\n    (data: HTMLBnumCardItemMail[]) => void\n  > {\n    if (this.#_onchange === null) {\n      this.#_onchange = new JsEvent<\n        (data: HTMLBnumCardItemMail[] | Symbol) => void\n      >();\n\n      this.#_onchange.add(EVENT_DEFAULT, (data) => {\n        this.trigger(this._.CHANGE_EVENT, { detail: data });\n      });\n    }\n\n    return this.#_onchange;\n  }\n\n  /**\n   * Mode loading.\n   */\n  public get loading(): boolean {\n    return this.hasAttribute(this._.ATTRIBUTE_LOADING);\n  }\n\n  public set loading(value: boolean) {\n    if (value) {\n      this.setAttribute(this._.ATTRIBUTE_LOADING, this._.ATTRIBUTE_LOADING);\n    } else {\n      this.removeAttribute(this._.ATTRIBUTE_LOADING);\n    }\n  }\n\n  get #_cardPart(): HTMLBnumCardElement {\n    if (this.#_card === null) {\n      this.#_card =\n        this.querySelector?.(HTMLBnumCardElement.TAG) ??\n        this.shadowRoot?.querySelector?.(HTMLBnumCardElement.TAG) ??\n        null;\n    }\n    return this.#_card!;\n  }\n\n  /**\n   * Récupère l'URL du titre.\n   */\n  get #_url(): string {\n    return this.data(this._.DATA_URL) || EMPTY_STRING;\n  }\n  //#endregion Getters/Setters\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  protected get _p_styleSheets(): CSSStyleSheet[] {\n    return [SHEET];\n  }\n\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    this.#_cardTitle = container.querySelector(\n      `#${this._.ID_CARD_TITLE}`,\n    ) as HTMLBnumCardTitle;\n    this.#_slot = container.querySelector('slot')!;\n    this.#_noElements = container.querySelector(\n      `#${this._.ID_CARD_ITEM_NO_ELEMENTS}`,\n    ) as HTMLBnumCardItem;\n  }\n\n  protected _p_attach(): void {\n    if (this.#_url !== EMPTY_STRING) this.#_cardTitle.url = this.#_url;\n\n    // On écoute les changements dans le slot (Items statiques ou ajoutés via JS)\n    this.#_slot.addEventListener(\n      'slotchange',\n      this.#_handleSlotChange.bind(this),\n    );\n\n    this.#_handleSlotChange();\n  }\n\n  protected _p_update(\n    name: string,\n    oldVal: string | null,\n    newVal: string | null,\n  ): void | Nullable<'break'> {\n    switch (name) {\n      case this._.ATTRIBUTE_LOADING:\n        if (newVal === null || newVal === EMPTY_STRING)\n          this.#_cardPart.removeAttribute(this._.ATTRIBUTE_LOADING);\n        else\n          this.#_cardPart.setAttribute(\n            this._.ATTRIBUTE_LOADING,\n            newVal || EMPTY_STRING,\n          );\n        break;\n    }\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  /**\n   * Ajoute des éléments.\n   *\n   * Note: On ajoute simplement au Light DOM. Le slotchange détectera l'ajout et déclenchera le tri.\n   * @param content Elements à ajouter\n   */\n  public add(...content: HTMLBnumCardItemMail[]): this {\n    this.append(...content);\n    return this;\n  }\n\n  /**\n   * Vide le composant.\n   */\n  public clear(): this {\n    this.innerHTML = EMPTY_STRING; // Vide le Light DOM\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Private methods\n  /**\n   * Gère le tri des éléments.\n   * Utilise requestAnimationFrame pour ne pas bloquer le thread si beaucoup d'items.\n   */\n  #_handleSlotChange(): void {\n    if (this.#_isSorting) return;\n\n    // On planifie le tri au prochain frame pour regrouper les appels multiples\n    requestAnimationFrame(() => {\n      this.#_sortChildren();\n    });\n  }\n\n  /**\n   * Tri les éléments enfants de la liste par date décroissante.\n   */\n  #_sortChildren(): void {\n    // 1. Récupérer les éléments assignés au slot (Uniquement les Nodes Elements, pas le texte)\n    const elements = this.#_slot.assignedElements() as HTMLElement[];\n\n    // Filtrer pour être sûr de ne trier que des mails (sécurité)\n    const mailItems = elements.filter((el) =>\n      el.tagName.toLowerCase().includes(HTMLBnumCardItemMail.TAG),\n    ) as HTMLBnumCardItemMail[];\n\n    if (mailItems.length === 0) {\n      this.#_noElements.hidden = false;\n      this.#_slot.hidden = true;\n      return;\n    } else {\n      this.#_noElements.hidden = true;\n      this.#_slot.hidden = false;\n    }\n\n    if (mailItems.length < 2) return; // Pas besoin de trier\n\n    // 2. Vérifier si un tri est nécessaire (optimisation)\n    let isSorted = true;\n    for (let i = 0; i < mailItems.length - 1; i++) {\n      if (this.#_getDate(mailItems[i]) < this.#_getDate(mailItems[i + 1])) {\n        isSorted = false;\n        break;\n      }\n    }\n    if (isSorted) return;\n\n    // 3. Trier en mémoire\n    this.#_isSorting = true; // Verrouiller pour éviter que le déplacement ne relance slotchange\n\n    mailItems.sort((a, b) => {\n      // Tri décroissant (le plus récent en haut)\n      return this.#_getDate(b) - this.#_getDate(a);\n    });\n\n    // 4. Réinsérer dans l'ordre via un Fragment (1 seul Reflow)\n    const fragment = document.createDocumentFragment();\n    mailItems.forEach((item) => fragment.appendChild(item));\n    this.appendChild(fragment); // Déplace les éléments existants, ne les recrée pas.\n\n    // Notifier le changement\n    this.onElementChanged.call(mailItems);\n\n    // Déverrouiller après que le microtask de mutation soit passé\n    setTimeout(() => {\n      this.#_isSorting = false;\n    }, 0);\n  }\n\n  /**\n   * Helper pour parser la date de manière robuste\n   */\n  #_getDate(item: HTMLBnumCardItemMail): number {\n    const dateStr = item.getAttribute(HTMLBnumCardItemMail.ATTRIBUTE_DATA_DATE);\n    if (!dateStr) return item.date.getTime();\n    if (dateStr === 'now') return Date.now();\n    return new Date(dateStr).getTime();\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  protected static _p_observedAttributes(): string[] {\n    return [this.ATTRIBUTE_LOADING];\n  }\n\n  /**\n   * Méthode statique pour créer une instance du composant.\n   * @param param0 Options de création\n   * @param param0.contents Contenus initiaux à ajouter\n   * @param param0.url URL du titre\n   * @returns Nouvelle node HTMLBnumCardEmail\n   */\n  static Create({\n    contents = [],\n    url = EMPTY_STRING,\n  }: {\n    contents?: HTMLBnumCardItemMail[];\n    url?: string;\n  } = {}): HTMLBnumCardEmail {\n    const node = document.createElement(this.TAG) as HTMLBnumCardEmail;\n\n    if (url !== EMPTY_STRING) node.setAttribute(this.ATTRIBUTE_DATA_URL, url);\n    if (contents.length > 0) node.add(...contents);\n\n    return node;\n  }\n\n  /**\n   * Tag du composant.\n   */\n  static get TAG(): string {\n    return TAG_CARD_EMAIL;\n  }\n  //#endregion Static methods\n}\n","import JsEvent from '@rotomeca/event';\nimport { Scheduler } from '../../../core/utils/Scheduler';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElementInternal from '../../bnum-element-states';\nimport style from './bnum-header.less';\nimport { EVENT_DEFAULT } from '../../../core/utils/constants/constants';\nimport { Define, Self } from '../../../core/decorators';\nimport { TAG_HEADER } from '../../../core/utils/constants/tags';\n\nconst SHEET = BnumElementInternal.ConstructCSSStyleSheet(style);\n\n//#region Global constants\nconst DATA_BACKGROUND = 'background';\nconst CLASS_HEADER_CONTAINER = 'bnum-header-container';\nconst CLASS_HEADER_LEFT = 'header-left';\nconst CLASS_HEADER_RIGHT = 'header-right';\nconst CLASS_HEADER_TITLE = 'header-title';\nconst CLASS_HEADER_CUSTOM = 'header-custom';\nconst CLASS_HEADER_MODIFIER = 'header-modifier';\nconst PART_HEADER_CONTAINER = 'header-container';\nconst PART_HEADER_LEFT = 'header-left';\nconst PART_HEADER_RIGHT = 'header-right';\nconst PART_HEADER_TITLE = 'header-title';\nconst PART_HEADER_CUSTOM = 'header-custom';\nconst ID_TITLE_TEXT = 'title-text';\nconst ID_TITLE_CUSTOM = 'title-custom';\nconst SLOT_NAME_LOGO = 'logo';\nconst SLOT_NAME_TITLE = 'title';\nconst SLOT_NAME_ACTIONS = 'actions';\nconst SLOT_NAME_AVATAR = 'avatar';\nconst EVENT_BACKGROUND_CHANGED = 'bnum-header:background.changed';\n//#endregion Global constants\n\n//#region Template\nconst TEMPLATE = BnumElementInternal.CreateTemplate(\n  `\n  <div class=\"${CLASS_HEADER_MODIFIER}\">\n    <div  part=\"${PART_HEADER_CONTAINER}\" class=\"${CLASS_HEADER_CONTAINER}\">\n      <div part=\"${PART_HEADER_LEFT}\" class=\"${CLASS_HEADER_LEFT}\">\n        <slot name=\"${SLOT_NAME_LOGO}\"></slot>\n        \n        <slot name=\"${SLOT_NAME_TITLE}\"></slot>\n        \n        <h1 part=\"${PART_HEADER_TITLE}\" id=\"${ID_TITLE_TEXT}\" class=\"${CLASS_HEADER_TITLE}\" hidden></h1>\n\n        <div part=\"${PART_HEADER_CUSTOM}\" id=\"${ID_TITLE_CUSTOM}\" class=\"${CLASS_HEADER_CUSTOM}\" hidden></div>\n      </div>\n\n      <div part=\"${PART_HEADER_RIGHT}\" class=\"${CLASS_HEADER_RIGHT}\">\n        <slot name=\"${SLOT_NAME_ACTIONS}\"></slot> \n        <slot name=\"${SLOT_NAME_AVATAR}\"></slot>  \n      </div>\n    </div>\n  </div>\n`,\n);\n//#endregion Template\n/**\n * Composant Header du Bnum\n *\n * @structure Par défaut\n * <bnum-header>\n * <img slot=\"logo\" src=\"assets/bnumloader.svg\" alt=\"Logo du bnum\"/>\n * <h1 slot=\"title\">Accueil</h1>\n *\n * <bnum-secondary-button slot=\"actions\" data-icon=\"add\">Créer</bnum-secondary-button>\n * <bnum-icon-button slot=\"actions\">article</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">help</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">settings</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">notifications</bnum-icon-button>\n *\n * <img slot=\"avatar\" style=\"border-radius: 100%\" src=\"assets/avatar.png\" alt=\"Avatar de remplacement\"></img>\n * </bnum-header>\n *\n * @structure Avec image de fond\n * <bnum-header data-background=\"assets/headerbackground.gif\">\n * <img slot=\"logo\" src=\"assets/bnumloader.svg\" alt=\"Logo du bnum\"/>\n * <h1 slot=\"title\">Accueil</h1>\n *\n * <bnum-secondary-button slot=\"actions\" data-icon=\"add\">Créer</bnum-secondary-button>\n * <bnum-icon-button slot=\"actions\">article</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">help</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">settings</bnum-icon-button>\n * <bnum-icon-button slot=\"actions\">notifications</bnum-icon-button>\n *\n * <img slot=\"avatar\" style=\"border-radius: 100%\" src=\"assets/avatar.png\" alt=\"Avatar de remplacement\"></img>\n * </bnum-header>\n *\n * @slot logo - Slot pour le logo\n * @slot title - Slot pour le titre\n * @slot actions - Slot pour les actions\n * @slot avatar - Slot pour l'avatar\n *\n * @state with-background - Actif si une image de fond est définie\n *\n * @cssvar {block} --bnum-header-display - Définit le type d'affichage du header\n * @cssvar {60px} --bnum-header-height - Hauteur du header\n * @cssvar {#f5f6fa} --bnum-header-background-color - Couleur de fond du header\n * @cssvar {1px solid #e5e7eb} --bnum-header-border-bottom - Bordure basse du header\n * @cssvar {8px} --bnum-header-left-gap - Espace à gauche entre les éléments du header\n * @cssvar {24px} --bnum-header-right-gap - Espace à droite entre les éléments du header\n * @cssvar {45px} --bnum-header-logo-height - Hauteur du logo dans le header\n * @cssvar {none} --bnum-header-background-image - Image de fond du header (par défaut aucune)\n * @cssvar {#ffffff} --bnum-header-with-background-color - Couleur du texte sur fond personnalisé\n * @cssvar {#ffffff} --bnum-header-main-action-border-color - Couleur de la bordure du bouton principal sur fond personnalisé\n * @cssvar {#ffffff} --bnum-header-main-action-color - Couleur du texte du bouton principal sur fond personnalisé\n * @cssvar {5px 3px} --bnum-header-background-button-padding - Padding de l'action principale\n */\n@Define()\nexport class HTMLBnumHeader extends BnumElementInternal {\n  //#region Constants\n  /**\n   * Data pour avoir un background par défaut\n   * @attr {string | undefined} (optional) data-background - Met une image de fond par défaut\n   */\n  static readonly DATA_BACKGROUND = DATA_BACKGROUND;\n  /**\n   * Classe CSS du container principal\n   */\n  static readonly CLASS_HEADER_CONTAINER = CLASS_HEADER_CONTAINER;\n  /**\n   * Classe CSS de la partie gauche du header\n   */\n  static readonly CLASS_HEADER_LEFT = CLASS_HEADER_LEFT;\n  /**\n   * Classe CSS de la partie droite du header\n   */\n  static readonly CLASS_HEADER_RIGHT = CLASS_HEADER_RIGHT;\n  /**\n   * Classe CSS du titre textuel\n   */\n  static readonly CLASS_HEADER_TITLE = CLASS_HEADER_TITLE;\n  /**\n   * Classe CSS du conteneur du titre custom\n   */\n  static readonly CLASS_HEADER_CUSTOM = CLASS_HEADER_CUSTOM;\n  /**\n   * Classe CSS de la zone qui peut obtenir des \"effets\"\n   */\n  static readonly CLASS_HEADER_MODIFIER = CLASS_HEADER_MODIFIER;\n  /**\n   * Partie du container principal\n   */\n  static readonly PART_HEADER_CONTAINER = PART_HEADER_CONTAINER;\n  /**\n   * Partie du header gauche\n   */\n  static readonly PART_HEADER_LEFT = PART_HEADER_LEFT;\n  /**\n   * Partie du header droit\n   */\n  static readonly PART_HEADER_RIGHT = PART_HEADER_RIGHT;\n  /**\n   * Partie du titre\n   */\n  static readonly PART_HEADER_TITLE = PART_HEADER_TITLE;\n  /**\n   * Partie de l'élément custom\n   */\n  static readonly PART_HEADER_CUSTOM = PART_HEADER_CUSTOM;\n  /**\n   * ID du H1 pour le titre textuel\n   */\n  static readonly ID_TITLE_TEXT = ID_TITLE_TEXT;\n  /**\n   * ID du conteneur pour le titre custom\n   */\n  static readonly ID_TITLE_CUSTOM = ID_TITLE_CUSTOM;\n  /**\n   * Nom du slot pour le logo\n   */\n  static readonly SLOT_NAME_LOGO = SLOT_NAME_LOGO;\n  /**\n   * Nom du slot pour le titre\n   */\n  static readonly SLOT_NAME_TITLE = SLOT_NAME_TITLE;\n  /**\n   * Nom du slot pour les actions\n   */\n  static readonly SLOT_NAME_ACTIONS = SLOT_NAME_ACTIONS;\n  /**\n   * Nom du slot pour l'avatar\n   */\n  static readonly SLOT_NAME_AVATAR = SLOT_NAME_AVATAR;\n  /**\n   * Evènement du changement de d'image\n   * @event bnum-header:background.changed\n   * @detail {newBackground:Nullable<string>}\n   */\n  static readonly EVENT_BACKGROUND_CHANGED = EVENT_BACKGROUND_CHANGED;\n  //#endregion Constants\n\n  //#region Private fields\n  // Références DOM\n  /**\n   * Slot pour le titre par défaut\n   */\n  #_slotTitle: Nullable<HTMLSlotElement> = null;\n  /**\n   * H1 pour le titre textuel\n   */\n  #_titleText: Nullable<HTMLHeadingElement> = null;\n  /**\n   * Conteneur pour le titre custom\n   */\n  #_customTitleContainer: Nullable<HTMLDivElement> = null;\n\n  // Scheduler pour éviter le layout thrashing\n  /**\n   * Scheduler pour la mise à jour du titre\n   */\n  #_scheduleUpdateTitle: Nullable<Scheduler<HTMLElement | string | null>> =\n    null;\n  /**\n   * Scheduler pour la mise à jour de l'image de fond\n   */\n  #_scheduleUpdateBackground: Nullable<Scheduler<Nullable<string>>> = null;\n  /**\n   * Evènement du changement d'image de fond\n   */\n  #_onBackgroundChanged: Nullable<\n    JsEvent<(newBackground: Nullable<string>) => void>\n  > = null;\n  //#endregion Private fields\n\n  //#region Getters/Setters\n  /** Référence à la classe HTMLBnumHeader */\n  @Self _!: typeof HTMLBnumHeader;\n\n  /**\n   * Scheduler pour la mise à jour de l'image de fond\n   */\n  get #_backgroundScheduler(): Scheduler<Nullable<string>> {\n    return (\n      this.#_scheduleUpdateBackground ??\n      (this.#_scheduleUpdateBackground = new Scheduler<Nullable<string>>(\n        (val) => this.#_updateBackground(val),\n      ))\n    );\n  }\n\n  /**\n   * Evènement du changement d'image de fond\n   */\n  get onBackgroundChanged(): JsEvent<\n    (newBackground: Nullable<string>) => void\n  > {\n    if (this.#_onBackgroundChanged === null) {\n      this.#_onBackgroundChanged = new JsEvent<\n        (newBackground: Nullable<string>) => void\n      >();\n\n      this.#_onBackgroundChanged.add(EVENT_DEFAULT, (newBackground) => {\n        this.trigger(this._.EVENT_BACKGROUND_CHANGED, {\n          newBackground,\n        });\n      });\n    }\n    return this.#_onBackgroundChanged;\n  }\n  /**\n   * URL de l'image de fond du header\n   */\n  get ImgBackground(): Nullable<string> {\n    return this.data(this._.DATA_BACKGROUND);\n  }\n\n  set ImgBackground(value: Nullable<string>) {\n    this.data(this._.DATA_BACKGROUND, value);\n  }\n  //#endregion Getters/Setters\n\n  //#region Lifecycle\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_getStylesheets(): CSSStyleSheet[] {\n    return [...super._p_getStylesheets(), SHEET];\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_fromTemplate(): HTMLTemplateElement | null {\n    return TEMPLATE;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_buildDOM(container: ShadowRoot | HTMLElement): void {\n    this.#_slotTitle = container.querySelector(\n      `slot[name=\"${this._.SLOT_NAME_TITLE}\"]`,\n    ) as HTMLSlotElement;\n    this.#_titleText = container.querySelector(\n      `#${this._.ID_TITLE_TEXT}`,\n    ) as HTMLHeadingElement;\n    this.#_customTitleContainer = container.querySelector(\n      `#${this._.ID_TITLE_CUSTOM}`,\n    ) as HTMLDivElement;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected _p_attach(): void {\n    if (this.ImgBackground !== null)\n      this.#_backgroundScheduler.call(this.ImgBackground);\n  }\n  //#endregion Lifecycle\n\n  //#region Public methods\n  /**\n   * Change le titre dynamiquement.\n   * @param content Affiche l'élément dans le conteneur dédié.\n   */\n  public setPageTitle(content: HTMLElement): this;\n  /**\n   * Change le titre dynamiquement.\n   * @param text Met à jour le H1.\n   */\n  public setPageTitle(text: string): this;\n  /**\n   * Change le titre dynamiquement.\n   * @param element Reset le titre pour afficher le slot par défaut.\n   */\n  public setPageTitle(element: null): this;\n  /**\n   * Change le titre dynamiquement.\n   *\n   * @param content\n   * - String : Met à jour le H1.\n   * - HTMLElement : Affiche l'élément dans le conteneur dédié.\n   * - null : Affiche le slot par défaut.\n   */\n  public setPageTitle(content: HTMLElement | string | null): this {\n    // Initialisation Lazy du scheduler\n    (this.#_scheduleUpdateTitle ??= new Scheduler<HTMLElement | string | null>(\n      (val) => this.#_applyTitleUpdate(val), // On utilise 'val' fourni par le Scheduler\n    )).schedule(content);\n\n    return this;\n  }\n\n  /**\n   * Met à jour l'image de fond du header.\n   * @param urlOrData Interpréte la valeur comme une URL ou une Data URL.\n   * @returns L'instance courante pour le chaînage.\n   */\n  public updateBackground(urlOrData: string): this {\n    this.#_requestBackgroundUpdate(urlOrData);\n    return this;\n  }\n\n  /**\n   * Supprime l'image de fond du header.\n   * @returns L'instance courante pour le chaînage.\n   */\n  public clearBackground(): this {\n    this.#_requestBackgroundUpdate(null);\n    return this;\n  }\n  //#endregion Public methods\n\n  //#region Private methods\n  /**\n   * Exécuté par le Scheduler (au prochain frame ou microtask)\n   * @param content Contenu à appliquer\n   */\n  #_applyTitleUpdate(content: Nullable<HTMLElement | string>): void {\n    // Cas \"Reset\" -> On veut voir le Slot\n    if (!content) {\n      this.#_resetVisibility(true, false, false);\n      return;\n    }\n\n    // Cas \"String\" -> On utilise le H1 natif\n    if (typeof content === 'string') {\n      // Optimisation: ne toucher au DOM que si le texte change vraiment\n      if (this.#_titleText!.textContent !== content) {\n        this.#_titleText!.textContent = content;\n      }\n      this.#_resetVisibility(false, true, false);\n      return;\n    }\n\n    // Cas \"HTMLElement\" -> On injecte dans le conteneur custom\n    // On vide proprement le conteneur avant d'ajouter le nouvel élément\n    this.#_customTitleContainer!.replaceChildren(content);\n    this.#_resetVisibility(false, false, true);\n  }\n\n  /**\n   * Helper pour gérer la visibilité exclusive des 3 zones (Slot, H1, Custom)\n   * Utilise l'attribut 'hidden' standard HTML5\n   * @param showSlot Affiche le slot par défaut\n   * @param showText Affiche le H1\n   * @param showCustom Affiche le conteneur custom\n   */\n  #_resetVisibility(\n    showSlot: boolean,\n    showText: boolean,\n    showCustom: boolean,\n  ): void {\n    if (this.#_slotTitle) this.#_slotTitle.hidden = !showSlot;\n    if (this.#_titleText) this.#_titleText.hidden = !showText;\n    if (this.#_customTitleContainer)\n      this.#_customTitleContainer.hidden = !showCustom;\n  }\n\n  /**\n   * Planifie la mise à jour de l'image de fond\n   * @param value Nouvelle URL de l'image de fond, ou null pour la supprimer\n   */\n  #_requestBackgroundUpdate(value: Nullable<string>): void {\n    this.#_backgroundScheduler.schedule(value);\n  }\n\n  /**\n   * Met à jour l'image de fond du header\n   * @param value Nouvelle URL de l'image de fond, ou null pour la supprimer\n   */\n  #_updateBackground(value: Nullable<string>): void {\n    if (value) {\n      this.style.setProperty('--bnum-header-background-image', `url(${value})`);\n      this._p_addState('with-background');\n    } else {\n      this.style.removeProperty('--bnum-header-background-image');\n      this._p_removeState('with-background');\n    }\n\n    this.onBackgroundChanged.call(value);\n  }\n  //#endregion Private methods\n\n  //#region Static methods\n  /**\n   * Génère un nouvel élément HTMLBnumHeader\n   * @returns Element créé\n   */\n  static Create({\n    background = null,\n  }: { background?: string | null } = {}): HTMLBnumHeader {\n    return (document.createElement(this.TAG) as HTMLBnumHeader).condAttr(\n      background !== null,\n      `data-${this.DATA_BACKGROUND}`,\n      background!,\n    );\n  }\n\n  /**\n   * Tag HTML de l'élément\n   */\n  static get TAG(): string {\n    return TAG_HEADER;\n  }\n  //#endregion Static methods\n}\n","import { Define } from '../../../core/decorators';\nimport Log from '../../../core/utils/Log';\nimport BnumElementInternal from '../../bnum-element-states';\nimport { HTMLBnumFolder } from '../../molecules/folder/bnum-folder';\n\nconst ATTR_SELECTED = 'is-selected';\nconst ATTR_COLLAPSED = 'is-collapsed';\nconst ROLE_ITEM = '[role=\"treeitem\"]';\n@Define()\nexport class HTMLBnumTree extends BnumElementInternal {\n  #_selectedItem: HTMLElement | null = null;\n  #_focusedItem: HTMLElement | null = null;\n\n  constructor() {\n    super();\n  }\n\n  protected _p_isShadowElement(): boolean {\n    return false;\n  }\n\n  protected _p_attach(): void {\n    super._p_attach();\n    this.attrs({\n      role: 'tree',\n      tabindex: '0',\n    });\n\n    if (!this.attr('aria-label') && !this.attr('aria-labellerby')) {\n      Log.warn(\n        'HTMLBnumTree',\n        'Un arbre doit avoir un attribut aria-label ou aria-labelledby pour des raisons d\\'accessibilité.',\n        'Un texte par défaut a été ajouté.',\n      );\n\n      this.attr('aria-label', 'Arbre perdu dans la forêt');\n    }\n\n    // Délégation d'événements : un seul écouteur pour tout l'arbre\n    this.addEventListener('click', (e) => this.#_handleSelection(e));\n    this.addEventListener('keydown', (e) => this.#_handleKeyDown(e));\n\n    this.#_initializeRovingTabindex();\n  }\n\n  /**\n   * Initialise le focus : seul le premier élément est tabulable.\n   */\n  #_initializeRovingTabindex(): void {\n    const items = this.#_getAllItems();\n    if (items.length === 0) return;\n\n    const selected = items.find(\n      (i) => i.getAttribute(ATTR_SELECTED) === 'true',\n    );\n    items.forEach((i) => i.setAttribute('tabindex', '-1'));\n\n    const initial = selected || items[0];\n    initial.setAttribute('tabindex', '0');\n    this.#_focusedItem = initial;\n  }\n\n  /**\n   * Gestionnaire de sélection générique\n   * @param e Événement de clic\n   */\n  #_handleSelection(e: Event): void {\n    // On cherche l'élément treeitem le plus proche de la cible du clic\n    const target = (e.target as HTMLElement).closest(ROLE_ITEM) as HTMLElement;\n\n    if (!target || target.getAttribute('is-virtual') === 'true') return;\n\n    this.SelectItem(target);\n  }\n\n  /**\n   * Méthode publique pour sélectionner un item programmatiquement\n   * @param item L'élément à sélectionner\n   */\n  public SelectItem(item: HTMLElement): void {\n    // 1. Désélection de l'ancien (O(1))\n    if (this.#_selectedItem && this.#_selectedItem !== item) {\n      this.#_selectedItem.setAttribute(ATTR_SELECTED, 'false');\n    } else if (!this.#_selectedItem) {\n      // Si aucun élément n'était sélectionné auparavant\n      this.querySelectorAll(`[${ATTR_SELECTED}=\"true\"]`).forEach((el) => {\n        el.setAttribute(ATTR_SELECTED, 'false');\n      });\n    }\n    // 2. Sélection du nouveau\n    item.setAttribute(ATTR_SELECTED, 'true');\n    this.#_selectedItem = item;\n\n    // 3. Mise à jour du focus clavier (Roving Tabindex)\n    this.#_updateFocus(item);\n\n    // 4. Notification pour le reste de l'application\n    this.trigger('bnum-tree:change', { item });\n  }\n\n  #_handleKeyDown(e: KeyboardEvent): void {\n    const current = this.#_focusedItem;\n    if (!current) return;\n\n    const visibleItems = this.#_getVisibleItems();\n    const index = visibleItems.indexOf(current);\n    let next: HTMLElement | null = null;\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        next = visibleItems[index + 1] || null;\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        next = visibleItems[index - 1] || null;\n        break;\n      case 'ArrowRight':\n        e.preventDefault();\n        // Si l'élément est repliable\n        if (current.hasAttribute(ATTR_COLLAPSED)) {\n          if (current.getAttribute(ATTR_COLLAPSED) === 'true') {\n            current.setAttribute(ATTR_COLLAPSED, 'false');\n          } else {\n            next = visibleItems[index + 1] || null;\n          }\n        }\n        break;\n      case 'ArrowLeft':\n        e.preventDefault();\n        if (current.getAttribute(ATTR_COLLAPSED) === 'false') {\n          current.setAttribute(ATTR_COLLAPSED, 'true');\n        } else {\n          const parent = current.parentElement?.closest(\n            ROLE_ITEM,\n          ) as HTMLElement;\n          if (parent) next = parent;\n        }\n        break;\n      case 'Home':\n        e.preventDefault();\n        next = visibleItems[0];\n        break;\n      case 'End':\n        e.preventDefault();\n        next = visibleItems[visibleItems.length - 1];\n        break;\n      case 'Enter':\n      case ' ':\n        e.preventDefault();\n        current.click();\n        break;\n    }\n\n    if (next) this.#_updateFocus(next);\n  }\n\n  #_updateFocus(target: HTMLElement): void {\n    if (this.#_focusedItem) {\n      this.#_focusedItem.setAttribute('tabindex', '-1');\n    }\n    target.setAttribute('tabindex', '0');\n    target.focus();\n    this.#_focusedItem = target;\n  }\n\n  #_getAllItems(): HTMLElement[] {\n    return Array.from(\n      this.querySelectorAll(\n        `${ROLE_ITEM}, bnum-tree-item, ${HTMLBnumFolder.TAG}`,\n      ),\n    ) as HTMLElement[];\n  }\n\n  #_getVisibleItems(): HTMLElement[] {\n    return this.#_getAllItems().filter((item) => {\n      let parent = item.parentElement?.closest(ROLE_ITEM) as HTMLElement;\n      while (parent) {\n        if (parent.getAttribute(ATTR_COLLAPSED) === 'true') return false;\n        parent = parent.parentElement?.closest(ROLE_ITEM) as HTMLElement;\n      }\n      return true;\n    });\n  }\n\n  /**\n   * Ajoute des nodes à l'arbre.\n   *\n   * Les nodes de type texte sont enveloppés dans un span avec le rôle treeitem.\n   *\n   * Les éléments HTML qui n'ont pas le rôle treeitem se voient attribuer ce rôle.\n   * @param nodes Nodes à ajouter.\n   * @returns L'instance courante.\n   */\n  append(...nodes: (Node | string)[]): this {\n    const arrayOfNodes = [];\n    for (const node of nodes) {\n      if (typeof node === 'string') {\n        Log.warn(\n          'HTMLBnumTree',\n          'L\\'ajout direct de texte dans un arbre n\\'est pas autorisé. L\\'élément est envellopper dans un span !.',\n        );\n        arrayOfNodes.push(\n          this._p_createSpan({ child: node, attributes: { role: 'treeitem' } }),\n        );\n      } else if (\n        node instanceof HTMLElement &&\n        node.getAttribute('role') === 'group'\n      ) {\n        arrayOfNodes.push(node);\n      } else if (\n        node instanceof HTMLElement &&\n        node.getAttribute('role') !== 'treeitem'\n      ) {\n        node.setAttribute('role', 'treeitem');\n        arrayOfNodes.push(node);\n      }\n    }\n\n    super.append(...arrayOfNodes);\n    return this;\n  }\n\n  /**\n   * Ajoute une node brute à l'arbre.\n   * @param node Node à ajouter.\n   * @returns Node ajoutée.\n   */\n  appendChild<T extends Node>(node: T): T {\n    return super.appendChild(node);\n  }\n\n  static get TAG(): string {\n    return 'bnum-tree';\n  }\n}\n","import { Define } from '../../../core/decorators';\nimport { TAG_COLUMN } from '../../../core/utils/constants/tags';\nimport { Nullable } from '../../../core/utils/types';\nimport BnumElement, { CustomDom } from '../../bnum-element';\n\n/**\n * Type représentant les slots possibles d'une colonne.\n * - 'header' : pour l'en-tête\n * - 'body' : pour le corps\n * - 'footer' : pour le pied de page\n */\nexport type ColumnSlot = 'header' | 'body' | 'footer';\n\n/**\n * Tag HTML personnalisé interne utilisé pour ce composant.\n *\n * Source de vérité pour la lisibilités des autres constantes liées à la classe et au tag de celle-ci.\n */\nconst COMPONENT_TAG = TAG_COLUMN;\n\n/**\n *  Permet de structurer une colonne avec un en-tête, un corps et un pied de page.\n *\n * @structure Colonne\n * <bnum-column>\n *  <div slot=\"header\">En-tête de la colonne</div>\n *   <div>Contenu principal de la colonne</div>\n *  <div slot=\"footer\">Pied de page de la colonne</div>\n * </bnum-column>\n */\n@Define()\nexport class HTMLBnumColumn extends BnumElement {\n  //#region Constantes statiques\n\n  /**\n   * Tag HTML personnalisé utilisé pour ce composant.\n   */\n  static get TAG(): typeof COMPONENT_TAG {\n    return COMPONENT_TAG;\n  }\n\n  /**\n   * Nom de l'attribut pour le type de colonne.\n   * @attr {string} (optional) (default: 'default') type - Le type de colonne (ex: \"sidebar\", \"main\", \"tools\")\n   */\n  static readonly ATTR_TYPE = 'type';\n\n  /**\n   * Valeur par défaut pour le type de colonne.\n   */\n  static readonly DEFAULT_COLUMN_TYPE = 'default';\n\n  /**\n   * Préfixe commun pour les classes CSS de la colonne.\n   */\n  static readonly CLASS_PREFIX = this.TAG;\n\n  /**\n   * Classe CSS pour l'en-tête de la colonne.\n   */\n  static readonly CLASS_HEADER = `${this.CLASS_PREFIX}__header` as const;\n\n  /**\n   * Classe CSS \"legacy\" pour l'en-tête (compatibilité).\n   */\n  static readonly CLASS_RC_HEADER = 'header';\n\n  /**\n   * Ancienne classe CSS pour l'en-tête (pour rétrocompatibilité).\n   */\n  static readonly CLASS_RC_HEADER_OLD = `old-${this.CLASS_RC_HEADER}` as const;\n\n  /**\n   * Classe CSS pour le corps de la colonne.\n   */\n  static readonly CLASS_BODY = `${this.CLASS_PREFIX}__body` as const;\n\n  /**\n   * Classe CSS pour le pied de page de la colonne.\n   */\n  static readonly CLASS_FOOTER = `${this.CLASS_PREFIX}__footer` as const;\n\n  /**\n   * Classe CSS \"legacy\" pour le pied de page (compatibilité).\n   */\n  static readonly CLASS_RC_FOOTER = 'footer';\n\n  /**\n   * Classe CSS indiquant qu'un élément provient d'un slot.\n   */\n  static readonly CLASS_FROM_SLOT = 'from-slot';\n\n  /**\n   * Préfixe pour les classes CSS de contenu.\n   */\n  static readonly CLASS_CONTENT_PREFIX = this.CLASS_PREFIX;\n\n  /**\n   * Suffixe pour les classes CSS de contenu.\n   */\n  static readonly CLASS_CONTENT_POSTFIX = 'content';\n\n  /**\n   * Classe CSS pour le contenu de l'en-tête.\n   */\n  static readonly CLASS_CONTENT_HEADER =\n    `${this.CLASS_CONTENT_PREFIX}__header__${this.CLASS_CONTENT_POSTFIX}` as const;\n\n  /**\n   * Classe CSS pour le contenu du corps.\n   */\n  static readonly CLASS_CONTENT_BODY =\n    `${this.CLASS_CONTENT_PREFIX}__body__${this.CLASS_CONTENT_POSTFIX}` as const;\n\n  /**\n   * Classe CSS pour le contenu du pied de page.\n   */\n  static readonly CLASS_CONTENT_FOOTER =\n    `${this.CLASS_CONTENT_PREFIX}__footer__${this.CLASS_CONTENT_POSTFIX}` as const;\n\n  /**\n   * Nom du slot pour l'en-tête.\n   */\n  static readonly SLOT_HEADER = 'header';\n\n  /**\n   * Nom du slot pour le pied de page.\n   */\n  static readonly SLOT_FOOTER = 'footer';\n\n  /**\n   * Nom de l'attribut de données pour conserver le corps.\n   * @attr {boolean} (optional) (default: true) data-keep-body - Indique si le corps doit être conservé\n   */\n  static readonly DATA_KEEP_BODY = 'keep-body';\n  //#endregion Constantes statiques\n\n  //#region Constants Map\n\n  /**\n   * Regroupe les différentes classes CSS utilisées par le composant.\n   * @private\n   */\n  static readonly #_CLASSES = {\n    HOST: this.TAG,\n    HEADER: {\n      MAIN: this.CLASS_HEADER,\n      RC: this.CLASS_RC_HEADER,\n      OLD: this.CLASS_RC_HEADER_OLD,\n    },\n    BODY: this.CLASS_BODY,\n    FOOTER: {\n      MAIN: this.CLASS_FOOTER,\n      RC: this.CLASS_RC_FOOTER,\n    },\n    CONTENT_PREFIX: this.TAG,\n    FROM_SLOT: this.CLASS_FROM_SLOT,\n    CONTENT: {\n      HEADER: this.CLASS_CONTENT_HEADER,\n      BODY: this.CLASS_CONTENT_BODY,\n      FOOTER: this.CLASS_CONTENT_FOOTER,\n    },\n  } as const;\n\n  /**\n   * Regroupe les noms de slots utilisés.\n   * @private\n   */\n  static readonly #_SLOTS = {\n    HEADER: this.SLOT_HEADER,\n    FOOTER: this.SLOT_FOOTER,\n  } as const;\n\n  /**\n   * Regroupe les noms d'attributs utilisés.\n   * @private\n   */\n  static readonly #_ATTRIBUTES = {\n    TYPE: this.ATTR_TYPE,\n    DATA: {\n      KEEP_BODY: this.DATA_KEEP_BODY,\n    },\n  } as const;\n  //#endregion Constants Map\n\n  //#region Getters/Setters\n  /**\n   * Permet de définir le type de colonne (ex: \"sidebar\", \"main\", \"tools\")\n   * Utile pour le CSS qui va définir la largeur\n   */\n  get type(): string {\n    return (\n      this.getAttribute(HTMLBnumColumn.#_ATTRIBUTES.TYPE) ||\n      HTMLBnumColumn.DEFAULT_COLUMN_TYPE\n    );\n  }\n\n  /**\n   * Indique si le corps de la colonne doit être conservé lors de certaines opérations.\n   *\n   * Rappel: data- ne sert qu'à stocker des informations avant la création du composant.\n   */\n  get #_keepBody(): boolean {\n    return this.data(HTMLBnumColumn.#_ATTRIBUTES.DATA.KEEP_BODY) === 'true';\n  }\n  //#endregion Getters/Setters\n\n  //#region LifeCycle\n\n  /**\n   * Constructeur de la colonne Bnum.\n   */\n  constructor() {\n    super();\n  }\n\n  /**\n   * On désactive le shadow-dom pour cette élément.\n   * @protected\n   */\n  protected _p_isShadowElement(): boolean {\n    return false;\n  }\n\n  /**\n   * Logique de rendu Light DOM\n   * On récupère les enfants existants et on les réorganise.\n   * @param container Le conteneur dans lequel injecter le DOM reconstruit\n   * @protected\n   */\n  protected _p_buildDOM(container: CustomDom): void {\n    // Sauvegarde des enfants actuels\n    const originalChildren = Array.from(this.childNodes);\n\n    // Fragment temporaire pour construire le DOM avant injection\n    const fragment = document.createDocumentFragment();\n\n    // Création des conteneurs\n    const [headerContainer, bodyContainer, footerContainer] =\n      this._p_createDivs(\n        {\n          classes: [\n            HTMLBnumColumn.#_CLASSES.HEADER.MAIN,\n            HTMLBnumColumn.#_CLASSES.HEADER.RC,\n          ],\n        },\n        {\n          classes: [HTMLBnumColumn.#_CLASSES.BODY],\n        },\n        {\n          classes: [\n            HTMLBnumColumn.#_CLASSES.FOOTER.MAIN,\n            HTMLBnumColumn.#_CLASSES.FOOTER.RC,\n          ],\n        },\n      );\n\n    // Distribution des enfants (Slotting manuel)\n    let hasHeader = false;\n    let hasFooter = false;\n\n    for (const node of originalChildren) {\n      // Si c'est un noeud texte vide, on ignore\n      if (node.nodeType === Node.TEXT_NODE) {\n        if (node.textContent?.trim()) bodyContainer.appendChild(node);\n        continue;\n      }\n\n      const nodeElement: Nullable<HTMLElement> =\n        node.nodeType === Node.ELEMENT_NODE ? (node as HTMLElement) : null;\n\n      if (!nodeElement) continue;\n\n      const slotName = nodeElement.getAttribute\n        ? nodeElement.getAttribute('slot')\n        : null;\n\n      switch (slotName) {\n        case HTMLBnumColumn.#_SLOTS.HEADER:\n          this.#_processNode(\n            nodeElement,\n            HTMLBnumColumn.#_CLASSES.CONTENT.HEADER,\n          );\n          headerContainer.appendChild(node);\n\n          if (!hasHeader) hasHeader = true;\n          break;\n\n        case HTMLBnumColumn.#_SLOTS.FOOTER:\n          this.#_processNode(\n            nodeElement,\n            HTMLBnumColumn.#_CLASSES.CONTENT.FOOTER,\n          );\n          footerContainer.appendChild(node);\n\n          if (!hasFooter) hasFooter = true;\n          break;\n        default:\n          this.#_processNode(\n            nodeElement,\n            HTMLBnumColumn.#_CLASSES.CONTENT.BODY,\n          );\n          bodyContainer.appendChild(node);\n          break;\n      }\n    }\n\n    // Nettoyage du container principal\n    while (container.firstChild) {\n      container.removeChild(container.firstChild);\n    }\n\n    // Ajout des classes principales\n    this.classList.add(\n      HTMLBnumColumn.#_CLASSES.HOST,\n      `${HTMLBnumColumn.#_CLASSES.CONTENT_PREFIX}--${this.type}`,\n    );\n\n    // Injection conditionnelle dans le DOM\n    if (hasHeader) fragment.appendChild(headerContainer);\n\n    if (this.#_keepBody) fragment.appendChild(bodyContainer);\n    else fragment.append(...bodyContainer.childNodes);\n\n    if (hasFooter) fragment.appendChild(footerContainer);\n\n    container.appendChild(fragment);\n  }\n\n  /**\n   * Reactivity for Type attribute change\n   */\n  protected _p_update(\n    name: string,\n    oldVal: Nullable<string>,\n    newVal: Nullable<string>,\n  ): void {\n    if (oldVal === newVal) return;\n\n    if (name === HTMLBnumColumn.#_ATTRIBUTES.TYPE && this.alreadyLoaded) {\n      if (oldVal)\n        this.classList.remove(\n          `${HTMLBnumColumn.#_CLASSES.CONTENT_PREFIX}--${oldVal}`,\n        );\n      if (newVal)\n        this.classList.add(\n          `${HTMLBnumColumn.#_CLASSES.CONTENT_PREFIX}--${newVal}`,\n        );\n    }\n  }\n\n  //#endregion LifeCycle\n\n  //#region Méthodes privées\n  /**\n   * Traite un élément enfant : supprime l'attribut slot, ajoute les classes CSS nécessaires,\n   * et gère la rétrocompatibilité des classes \"header\".\n   * @param {HTMLElement} element L'élément à traiter\n   * @param {string} specificClass Classe CSS spécifique à ajouter\n   * @private\n   */\n  #_processNode(element: HTMLElement, specificClass: string): void {\n    element.removeAttribute('slot');\n    element.classList.add(specificClass, HTMLBnumColumn.#_CLASSES.FROM_SLOT);\n\n    // Gestion legacy \"header\" class duplication\n    if (element.classList.contains(HTMLBnumColumn.#_CLASSES.HEADER.RC)) {\n      element.classList.remove(HTMLBnumColumn.#_CLASSES.HEADER.RC);\n      element.classList.add(HTMLBnumColumn.#_CLASSES.HEADER.OLD);\n    }\n  }\n  //#endregion Méthodes privées\n\n  //#region Static Methods\n  /**\n   * Méthode interne pour définir les attributs observés.\n   * @returns Attributs à observer\n   */\n  protected static _p_observedAttributes(): string[] {\n    return [this.#_ATTRIBUTES.TYPE];\n  }\n  //#endregion Static Methods\n}\n","// #region Core & Configuration\nimport { BnumConfigOptions } from '../core/utils/constants/config';\nimport { BnumConfig } from '../core/utils/BnumConfig';\nimport BnumElement from '../components/bnum-element';\nimport Log from '../core/utils/Log';\nimport RotomecaDocument, {\n  RotomecaCssProperty,\n  RotomecaCssRule,\n} from '@rotomeca/document-utils';\n\n// Barrel Exports (Générés par le script)\nexport * from '../components/atoms';\nexport * from '../components/molecules';\nexport * from '../components/organisms';\nexport * from '../components/template';\n\n//#endregion Core & Configuration\n\n// #region Global Initialization\ndeclare global {\n  interface Window {\n    DsBnumConfig?: Partial<BnumConfigOptions>;\n  }\n}\n\nif (typeof window !== 'undefined' && window.DsBnumConfig) {\n  BnumConfig.Initialize(window.DsBnumConfig).tapError((error) => {\n    Log.error(\n      'design-system-bnum',\n      'Erreur lors de l\\'initialisation de la configuration globale :',\n      error,\n    );\n  });\n}\n// #endregion Global Initialization\n\n// Exports manuels spécifiques\nexport {\n  BnumConfig as Config,\n  BnumElement,\n  RotomecaDocument as DsDocument,\n  RotomecaCssProperty as DsCssProperty,\n  RotomecaCssRule as DsCssRule,\n};\n"],"names":["__esDecorate","ctor","descriptorIn","decorators","contextIn","initializers","extraInitializers","accept","f","TypeError","_","kind","key","target","prototype","descriptor","Object","getOwnPropertyDescriptor","name","done","i","length","context","p","access","addInitializer","push","result","get","set","init","unshift","defineProperty","__runInitializers","thisArg","value","useValue","arguments","call","__setFunctionName","prefix","description","concat","configurable","__classPrivateFieldGet","receiver","state","has","__classPrivateFieldSet","ResultState","LogEnum","SuppressedError","ATresult","isSuccess","this","Success","isError","Error","Ok","Create","Fail","error","Throw","undefined","err","throwIfError","constructor","super","match","matcher","andThen","fn","map","mapError","unwrapOr","tapError","tap","Err","defaultValue","riskySync","original","args","apply","Risky","originalMethod","happyPathSync","path","val","e","HappyPath","errorPathSync","ErrorPath","DEFAULT_CONFIG","local_keys","today","tomorrow","day","invalid_date","last_mails","no_mails","last_events","no_events","valid_input","invalid_input","error_field","search_field","console_logging","console_logging_level","TRACE","tag_prefix","isObject","item","Array","isArray","deepMerge","source","output","keys","forEach","targetValue","sourceValue","_currentConfig","BnumConfig","_static_Initialize_decorators","static","private","obj","Initialize","metadata","_metadata","_staticExtraInitializers","overrides","Result","Get","Set","Reset","Clone","JSON","parse","stringify","EMPTY_STRING","Capitalize","word","charAt","toUpperCase","slice","BnumDOM","from","container","Proxy","prop","id","ShadowRoot","getElementById","querySelector","className","getElementsByClassName","Reflect","bind","ArrayUtils","toStringAttribs","attribs","entries","join","sortByDatesDescending","arr","primarySelector","secondarySelector","sort","a","b","dateA","_getTime","dateB","subA","Date","getTime","BnumElement","HTMLElement","_data","_pendingAttributes","_updateScheduled","firstLoad","_p_styleElement","observedAttributes","_p_observedAttributes","alreadyLoaded","_p_isShadowElement","_p_attachCustomShadow","attachShadow","mode","script","remove","attributeChangedCallback","oldVal","newVal","Map","requestAnimationFrame","_flushUpdates","connectedCallback","render","disconnectedCallback","_p_preunload","_p_detach","_p_preload","shadowRoot","styleStr","_p_getStyle","styleEl","document","createElement","textContent","appendChild","stylesheets","_p_getStylesheets","Document","adoptedStyleSheets","template","_p_fromTemplate","templateContent","content","cloneNode","_p_buildDOM","_p_attach","data","valueOrOpts","fromAttribute","opts","_getData","_setData","addClass","classNames","classList","add","flatMap","c","split","removeClass","toggleClass","force","toggle","hasClass","contains","attr","getAttribute","setAttribute","toString","attrs","condAttr","doSomething","css","style","k","v","html","innerHTML","text","on","type","listener","options","addEventListener","off","removeEventListener","trigger","detail","dispatchEvent","CustomEvent","append","nodes","node","insertAdjacentHTML","appendTo","prepend","insertBefore","firstChild","prependTo","before","parentNode","after","nextSibling","hide","show","hasAttribute","removeAttribute","_p_setData","_p_getData","String","__CONFIG_UPDATE_ALL__","_p_isUpdateForAllAttributes","_p_update","clear","_p_postFlush","_p_requestAttributeUpdate","_p_addPendingAttribute","_p_hasData","_p_createTag","tag","element","classes","attributes","child","dataName","dataValue","attrName","attrValue","createTextNode","_p_createSlot","_p_createSlots","slots","opt","_p_createSpan","_p_createSpans","spans","_p_createDiv","_p_createDivs","divs","_p_createTextNode","_p_isInsideShadowRoot","getRootNode","composed","sheets","BASE_STYLE","componentStyle","__CACHE_STYLE__","__CACHE_TEMPLATE__","__CONFIG_SHADOW__","_p_WriteAttributes","TAG","ConstructCSSStyleSheet","cssText","sheet","CSSStyleSheet","replaceSync","CreateTemplate","TryDefine","TryDefineElement","customElements","define","Log","trace","console","debug","DEBUG","info","INFO","warn","WARN","ERROR","time","label","timeEnd","RotomecaCookies","cookie","RegExp","decodeURIComponent","days","secure","sameSite","expires","date","setTime","toUTCString","cookieString","encodeURIComponent","RotomecaMeta","title","setDescription","updateMeta","setOgTag","property","attrKey","head","RotomecaScripts","_loaded","load","url","async","defer","Promise","resolve","reject","src","onload","onerror","RotomecaStyleSheets","_pendingUpdate","_mounted","_registry","_listenersDisposers","_nativeSheet","rule","onUpdate","_scheduleRender","_generateId","addMultiples","rules","disposer","delete","values","_mount","includes","_render","size","cssContent","crypto","randomUUID","substring","RotomecaDocument","instance","Instance","_instance","_styleSheets","styleSheets","_meta","meta","_scripts","scripts","_cookies","cookies","JsEventData","callback","JsEvent","_onnadded","_onremoved","events","onadded","onremoved","event","_generateKey","haveEvents","count","params","results","index","len","_call_callback","g_key","Math","random","ae","hasOwnProperty","JsEvent_1","require$$0","JsCircularEvent","JsCircularEvent_1","param","defaultsParams","require$$1","eventModule","exports","RotomecaCssRule","_selectorText","_properties","_onUpdate","selectorText","_notifyParent","addProperty","removeProperty","propName","all","stop","filter","props","RotomecaCssProperty","_name","_value","_important","_listeners","important","_notify","BnumElementInternal","_internal","attachInternals","_p_internal","_p_states","states","_p_clearStates","_p_addState","_p_addStates","_p_removeState","_p_removeStates","_p_hasState","Scheduler","_started","_lastValue","_callback","schedule","_p_value","SchedulerArray","_resetSymbol","_stack","resetSymbol","_add","_getStackItems","Define","clazz","enumerable","finalTag","tpl","Node","styles","strStyles","array","initStyle","Attr","attributeName","_target","num","Number","isNaN","strVal","Data","nameOrOptions","maybeOptions","setter","autoName","replace","finalAttrName","isFalsy","domAttrName","NO_SETTER","SetAttr","_args","rtn","SetAttrs","Autobind","Fire","eventName","bubbles","CustomFire","EventClass","eventInit","_____StCustomFire","tryInitEvent","_static_tryInitEvent_decorators","Self","STYLE","HTMLBnumBadge","_classDecorators","_classSuper","___decorators","___initializers","___extraInitializers","_classDescriptor","_classThis","_classExtraInitializers","_updateSchduler","_spanElement","_dataValue","DATA_VALUE","_dataVariation","DATA_VARIATION","VARIATION_PRIMARY","ATTR_VALUE","_requestUpdate","variation","_update","STATE_HAS_VALUE","STATE_NO_VALUE","ATTR_CIRCLE","STATE_IS_CIRCLE","STATE_VARIATION_PREFIX","circle","ATTR_VARIATION","Write","TAG_PREFIX","TAG_ICON","TAG_BUTTON","TAG_PRIMARY","TAG_SECONDARY","TAG_DANGER","TAG_HELPER","TAG_CARD_TITLE","TAG_CARD","TAG_CARD_EMAIL","TAG_CARD_AGENDA","TAG_CARD_ITEM","TAG_CARD_ITEM_MAIL","TAG_CARD_ITEM_AGENDA","TAG_CARD_LIST","TAG_DATE","TAG_ICON_BUTTON","TAG_COLUMN","TAG_INPUT","TAG_INPUT_DATE","TAG_INPUT_NUMBER","TAG_INPUT_SEARCH","TAG_INPUT_TEXT","TAG_INPUT_TIME","TAG_FOLDER","TAG_HIDE","TAG_FOLDER_LIST","TAG_HEADER","TAG_SEGMENTED_ITEM","TAG_SEGMENTED_CONTROL","TAG_SELECT","TAG_FRAGMENT","TAG_RADIO","TAG_RADIO_GROUP","REG_XSS_SAFE","ElementChangedEvent","_new","_old","_caller","newElement","oldElement","caller","initDict","ICON_CLASS","SYMBOLS","replaceAll","HTMLBnumIcon","DATA_ICON","_HTMLBnumIcon__fontPromise","_updateScheduler","_oniconchanged","oniconchanged","icon","trim","test","oldValue","_requestUpdateDOM","newIcon","oldIcon","EVENT_ICON_CHANGED","_updateIcon","_checkAndLoadFont","FONT_SPEC","fonts","check","then","EMPTY","HTML_CLASS","HOME","SEARCH","SETTINGS","USER","MAIL","CLOSE","CHECK","WARNING","DELETE","ADD","SHEET","EButtonType","EIconPosition","EHideOn","ATTRIBUTE_LOADING","EVENT_LOADING_STATE_CHANGED","CLASS_WRAPPER","CLASS_SLOT","CLASS_ICON","TEMPLATE","HTMLBnumButton","__p_fromTemplate_decorators","r","_private__onLoadingChange_decorators","_setLoading_decorators","_instanceExtraInitializers","_private__onLoadingChange_descriptor","_onLoadingChange","setLoading","_internals","_wrapper","_iconEl","_renderScheduler","_onClick","_lastClick","onloadingstatechange","oniconchange","oniconpropchange","onvariationchange","linkedClickEvent","PRIMARY","ATTR_ICON","iconPos","ATTR_ICON_POS","ICON_PROP_POS","iconMargin","ATTR_ICON_MARGIN","DEFAULT_CSS_VAR_ICON_MARGIN","setProperty","CSS_PROPERTY_ICON_MARGIN","hideTextOnLayoutSize","ATTR_HIDE","n","o","EVENT_ICON","EVENT_VARIATION","newValue","EVENT_ICON_PROP_CHANGED","_updateDOM","ToButton","isLoading","_isLoading","isDisabled","_isDisabled","_isRounded","STATE_ROUNDED","STATE_LOADING","STATE_DISABLED","effectiveIcon","STATE_ICON","hidden","STATE_WITHOUT_ICON","ariaDisabled","tabIndex","click","elementToClick","elements","_is","ATTR_ROUNDED","ATTR_LOADING","ATTR_DISABLED","stopLoading","toggleLoading","onkeydown","_p_Create","buttonClass","RIGHT","rounded","loading","hideOn","CreateOnlyIcon","HTMLBnumDangerButton","DANGER","NonStd","reason","fatal","typeLabel","class","method","getter","field","accessor","message","BnumDateLocale","BnumDateUtils","_static_private__parse_decorators","_static_private__parse_descriptor","dateString","format","d","isValid","tokens","year","getFullYear","month","hour","minute","token","parseInt","_parse","locale","Intl","DateTimeFormat","addDays","setDate","getDate","addMonths","months","setMonth","getMonth","addYears","years","setFullYear","getOptionsFromToken","pattern","dateStyle","weekday","hour12","isSameDay","now","isToday","startOfDay","setHours","endOfDay","subDays","amount","isWithinInterval","interval","start","end","HTMLBnumDate","_private__format_decorators","_private_renderDate_descriptor","outputElement","STATE_NOT_READY","originalDate","STATE_INVALID","localeElement","_format","formated","formatEvent","outputFormat","_private_renderDate_decorators","renderDate","_private__format_descriptor","_static_private_LOCALES_decorators","__classPrivateFieldIn","_HTMLBnumDate_LOCALES","_static_private_LOCALES_initializers","_static_private_LOCALES_extraInitializers","_private_originalDate_decorators","_private_originalDate_initializers","_private_originalDate_extraInitializers","_private_outputFormat_decorators","_private_outputFormat_initializers","_private_outputFormat_extraInitializers","_private_locale_decorators","_private_locale_initializers","_private_locale_extraInitializers","_private_startFormat_decorators","startFormat","_private_startFormat_initializers","_private_startFormat_extraInitializers","_private_outputElement_decorators","_private_outputElement_initializers","_private_outputElement_extraInitializers","fr","FR","en","EN","ATTRIBUTE_FORMAT","ATTRIBUTE_LOCALE","DEFAULT_FORMAT","DEFAULT_LOCALE","_renderSheduled","EVENT_ATTRIBUTE_UPDATED","ATTRIBUTE_START_FORMAT","initialDateStr","ATTRIBUTE_DATE","needsRender","dateInput","triggerRender","oldDate","newDate","formatToUse","EVENT_DATE","askRender","el","HTMLBnumFragment","display","setTimeout","hasChildNodes","ID_ICON","HTMLBnumButtonIcon","_icon","_linkedClickEvent","_iconElement","_throw","_updateAttributeClick","msg","EVENT_DEFAULT","INPUT_BASE_STYLE","ID_INPUT","ID_HINT_TEXT","ID_HINT_TEXT_LABEL","ID_HINT_TEXT_HINT","ID_INPUT_ICON","ID_INPUT_BUTTON","ID_STATE","ID_STATE_ICON","ID_SUCCESS_TEXT","ID_ERROR_TEXT","CLASS_STATE_TEXT_SUCCESS","CLASS_STATE_TEXT_ERROR","DEFAULT_BUTTON_VARIATION","TEXT_VALID_INPUT","TEXT_INVALID_INPUT","BASE_TEMPLATE","HTMLBnumInput","__p_inputValueChangedCallback_decorators","_private__setFormValue_decorators","_private__internalSetValidity_decorators","_private__safeCheckValidity_decorators","_private__dispatchEvent_decorators","_p_inputValueChangedCallback","_private__setFormValue_descriptor","setFormValue","_setFormValue","_private__internalSetValidity_descriptor","flags","anchor","setValidity","_internalSetValidity","_private__safeCheckValidity_descriptor","_input","checkValidity","_safeCheckValidity","_private__dispatchEvent_descriptor","_dispatchEvent","_stateIcon","_button","_onButtonClicked","_initValue","onButtonClicked","clickEvent","EVENT_BUTTON_CLICK","innerEvent","_initialiseButton","ATTRIBUTE_DATA_VALUE","ATTRIBUTE_NAME","delegatesFocus","EVENT_INPUT","_inputValueChangedCallback","EVENT_CHANGE","ATTRIBUTE_IGNOREVALUE","formResetCallback","formDisabledCallback","disabled","ATTRIBUTE_DISABLED","_sync","enableButton","ATTRIBUTE_BUTTON","SLOT_BUTTON","span","slot","ATTRIBUTE_BUTTON_ICON","enableButtonIconOnly","hideButton","setSuccessState","_setState","SLOT_SUCCESS","setErrorState","SLOT_ERROR","setIcon","ATTRIBUTE_ICON","removeIcon","setHint","hint","removeHint","SLOT_HINT","setLabel","childNodes","removeChild","btnValue","STATE_BUTTON","SECONDARY","button_icon","STATE_OBI","_updateState","ATTRIBUTE_STATE","input","ATTRIBUTE_TYPE","DEFAULT_INPUT_TYPE","placeholder","ATTRIBUTE_PLACEHOLDER","readOnly","ATTRIBUTE_READONLY","required","ATTRIBUTE_REQUIRED","_setFieldAttr","ATTRIBUTE_PATTERN","ATTRIBUTE_MINLENGTH","ATTRIBUTE_MAXLENGTH","ATTRIBUTE_AUTOCOMPLETE","ATTRIBUTE_INPUTMODE","ATTRIBUTE_SPELLCHECK","_updateA11y","_setValidity","STATE_SUCCESS","STATE_STATE","ICON_SUCCESS","STATE_ERROR","ICON_ERROR","isManualError","customError","TEXT_ERROR_FIELD","validationMessage","validity","_syncValidationUI","hasNativeError","valid","successText","errorText","validationText","slotTextId","innerText","descriptions","finalState","_dispatchInputEventFallback","InputEvent","inputType","Event","button","buttonIcon","readonly","minlength","maxlength","autocomplete","inputmode","spellcheck","success","btnText","hintSlot","successSlot","errorSlot","buttonSlot","HTMLBnumInputNumber","____decorators","__","____initializers","____extraInitializers","TYPE","x","min","max","step","AdditionnalStylesheet","HTMLBnumInputDate","ID_ACTIONS_CONTAINER","ID_CLEAR_BUTTON","SLOT_ACTIONS","EVENT_SEARCH","HTMLBnumInputSearch","_private__triggerEventSearch_decorators","_private__triggerEventSearch_descriptor","_triggerEventSearch","_emptyButton","TEXT_SEARCH_FIELD","BUTTON_ICON","EVENT_CLEAR","disableSearchButton","enableSearchButton","FromInput","HTMLBnumInputText","TYPE_TEXT","HTMLBnumInputTime","HTMLBnumPrimaryButton","VOID_TAGS","h","argsChildren","children","sKey","open","renderChildren","str","UI","selectorMap","uiCacheKey","Symbol","root","uiObject","domCache","selector","PropertyMode","default","Property","reactive","initialValue","CheckedChangeEvent","_value_decorators","_value_initializers","_value_extraInitializers","_name_decorators","_name_initializers","_name_extraInitializers","_checked_decorators","checked","_checked_initializers","_checked_extraInitializers","_caller_decorators","_caller_initializers","_caller_extraInitializers","value_accessor_storage","name_accessor_storage","checked_accessor_storage","caller_accessor_storage","details","cancelable","listenersCacheKey","Listener","initilizator","methodName","listenerCacheKey","self","isNullOrUndefined","onStateChangeInitializer","BnumRadioCheckedChangeEvent","ATTRIBUTE_CHECKED","SYNCED_ATTRIBUTES","_jsxs","_jsx","part","for","HTMLBnumRadio","_private__ui_decorators","slotLegend","slotHint","_disabled_decorators","_private__legend_decorators","_private__hint_decorators","__p_buildDOM_decorators","_private__update_decorators","_static__p_observedAttributes_decorators","_private__ui_descriptor","_ui_accessor_storage","_ui","_private__ui_initializers","_private__ui_extraInitializers","_disabled_initializers","_disabled_extraInitializers","_private__legend_descriptor","_legend_accessor_storage","_legend","_private__legend_initializers","_private__legend_extraInitializers","_onstatechange_decorators","onstatechange","_onstatechange_initializers","_onstatechange_extraInitializers","_private__hint_descriptor","_hint_accessor_storage","_hint","_private__hint_initializers","_private__hint_extraInitializers","_private__update_descriptor","onactions","plugin","_private__fireChange_descriptor","ev","stopPropagation","_updateInternal","inner","_private__fireChange_decorators","_fireChange","disabled_accessor_storage","onstatechange_accessor_storage","internalCheckbox","_setupListeners","_init","needUpdate","_onUpdateChecked","updateCheckAndFire","legend","hasHint","isChecked","ariaChecked","_handleInnerChange","HTMLBnumSecondaryButton","schedulersKey","Schedule","caches","scheduler","UpdateAll","HTMLBnumSelect","slotLabel","select","_private__scheduleMoveOptions_decorators","_private__tryInitValue_decorators","_private__fireSelect_decorators","_private__defaultValue_descriptor","_defaultValue_accessor_storage","_private__defaultValue_decorators","_defaultValue","_private__defaultValue_initializers","_private__defaultValue_extraInitializers","_private__defaultText_descriptor","_defaultText_accessor_storage","_private__defaultText_decorators","_defaultText","_private__defaultText_initializers","_private__defaultText_extraInitializers","_noLegend_decorators","noLegend","_noLegend_initializers","_noLegend_extraInitializers","_private__obserse_descriptor","mutations","some","m","addedNodes","HTMLOptionElement","HTMLOptGroupElement","_scheduleMoveOptions","_private__obserse_decorators","_obserse","_private__scheduleMoveOptions_descriptor","_moveOptions","_private__tryInitValue_descriptor","ignoreSelectedValue","_tryInitValue","_private__fireSelect_descriptor","_fireSelect","_observer","noLegend_accessor_storage","querySelectorAll","_lightOptions","MutationObserver","observe","childList","_setDefault","_setDataLegend","_setDataHint","_initListeners","_hasLegend","disconnect","addOptGroup","group","addOption","returnElement","option","_onInnerSelect","_setLabelPart","what","hasLabel","effectiveValue","effectiveText","createdOption","HTMLBnumCardItem","CreateChildTemplate","_onitemclicked","_p_slot","onitemclicked","CLICK","queryId","ROLE","_p_render","childTemplate","defaultSlot","slotName","CLASS_DAY","CLASS_HORIZONTAL","CLASS_HOUR","CLASS_VERTICAL","CLASS_TITLE","CLASS_TITLE_OVERRIDE","CLASS_LOCATION","CLASS_LOCATION_OVERRIDE","CLASS_ACTION","CLASS_ACTION_OVERRIDE","CLASS_PRIVATE_ICON","SLOT_TITLE","SLOT_LOCATION","SLOT_ACTION","ICON_PRIVATE","AGENDA","HTMLBnumCardItemAgenda","_HTMLBnumCardItemAgenda__TryGetAgendaDate","toDate","_HTMLBnumCardItemAgenda__tryGetAgendaDates","_sd","_ed","_bd","_pr","_spanDate","_spanHour","_slotLocation","_slotTitle","_slotAction","_overrideAction","_overrideLocation","_overrideTitle","_privateIcon","_spanAllday","_bnumDateStart","_bnumDateEnd","_shedulerTitle","_shedulerLocation","_shedulerAction","_onstartdefineaction","onstartdefineaction","isAllDay","ATTRIBUTE_ALL_DAY","baseDate","_baseDate","_baseDateFormat","ATTRIBUTE_PENDING","startDate","_startDate","_startDateFormat","endDate","_endDate","_endDateFormat","_private","ATTRIBUTE_PRIVATE","_getMode","ATTRIBUTE_MODE","MODE_DEFAULT","DATA_DATE","DATA_DATE_FORMAT","FORMAT_DATE_DEFAULT","DATA_START_DATE","DATA_START_DATE_FORMAT","FORMAT_DATE_TIME_DEFAULT","DATA_END_DATE","DATA_END_DATE_FORMAT","_title","DATA_TITLE","_location","DATA_LOCATION","CLASS_BNUM_CARD_ITEM_AGENDA_DAY","CLASS_BNUM_CARD_ITEM_AGENDA_HOUR","CLASS_BNUM_CARD_ITEM_AGENDA_TITLE_OVERRIDE","CLASS_BNUM_CARD_ITEM_AGENDA_LOCATION_OVERRIDE","CLASS_BNUM_CARD_ITEM_AGENDA_ACTION_OVERRIDE","dateHtml","_generateDateHtml","setHourLogic","CLASS_BNUM_CARD_ITEM_AGENDA_ALL_DAY","TEXT_ALL_DAY","CLASS_BNUM_CARD_ITEM_AGENDA_PRIVATE_ICON","defaultTitle","defaultLocation","_renderDOM","_release","createDate","STATE_MODE_PREFIX","_isSlotLocationEmpty","STATE_NO_LOCATION","eventResult","location","action","updateAction","forceCall","STATE_ACTION_DEFINED","STATE_ALL_DAY","spanAllDay","htmlStartDate","htmlEndDate","STATE_PRIVATE","_requestShedulerAction","resetAction","SYMBOL_RESET","updateTitle","_requestShedulerTitle","resetTitle","updateLocation","_requestShedulerLocation","resetLocation","setDateLogic","FORMAT_TODAY","FORMAT_TOMORROW","FORMAT_EVENT_DATE","FORMAT_HOUR_DEFAULT","FORMAT_HOUR_DIFF_DAY","_updateAction","_resetItem","_updateTitle","textNode","_updateLocation","_slotEmpty","assignedNodes","allDay","isPrivate","ATTRIBUTE_DATA_TITLE","ATTRIBUTE_DATA_LOCATION","onclick","FromEvent","agendaEvent","startDateSelector","endDateSelector","allDaySelector","titleSelector","locationSelector","CLASS_MAIN_CONTENT","CLASS_SENDER","ID_SENDER_SLOT","SLOT_SENDER_NAME","PART_SENDER_OVERRIDE","CLASS_SUBJECT","ID_SUBJECT_SLOT","SLOT_SUBJECT_NAME","PART_SUBJECT_OVERRIDE","CLASS_DATE","ID_DATE_SLOT","SLOT_DATE_NAME","PART_DATE_OVERRIDE","ID_DATE_ELEMENT_OVERRIDE","HTMLBnumCardItemMail","DATA_SUBJECT","DATA_SENDER","_slot_date","_slot_sender","_override_sender","_override_subject","_override_date","_dateOverrideElement","_subjectScheduler","_dateScheduler","_defaultDate","_senderScheduler","onsubjectchanged","onsenderchanged","ondatechanged","_lazyDateOverrideElement","tmp","_queryById","_configureDateElement","_mailSubject","_mailDate","_mailSender","sender","EVENT_SENDER_CHANGED","EVENT_SUBJECT_CHANGED","EVENT_DATE_CHANGED","_queryByClass","defaultDate","ATTRIBUTE_READ","STATE_READ","updateSender","_requestUpdateSender","resetSender","updateSubject","_requestUpdateSubject","resetSubject","updateDate","_requestUpdateDate","resetDate","_updateSender","replaceChildren","_updateSubject","_updateDate","SetDateLogique","TODAY_FORMAT","startOfInterval","endOfInterval","WEEK_FORMAT","OTHER_DAY_FORMAT","subject","ATTRIBUTE_DATA_SUBJECT","ATTRIBUTE_DATA_SENDER","ATTRIBUTE_DATA_DATE","toISOString","HTMLBnumCardList","_modifierScheduler","_requestModifier","items","_modifier","SLOT_NAME_ICON","CLASS_LINK","CLASS_ICON_TITLE","ID_SLOT_ICON","ID_SLOT_TEXT","ID_CUSTOM_BODY","HTMLBnumCardTitle","_iconSlotElement","_textSlotElement","_customBodyElement","_linkElement","_domScheduler","_bodyScheduler","_initBody","ATTRIBUTE_DATA_ICON","_requestUpdateDom","ATTRIBUTE_URL","_updateBody","href","STATE_URL","STATE_WITHOUT_URL","updateBody","link","Generate","HTMLBnumFolderList","__p_preload_decorators","tabindex","HTMLBnumFolder","VAL_MAX_UNREAD","badge","_selfUnread","collapsed","ATTR_IS_COLLAPSED","VAL_TRUE","ID_NAME","CLASS_TITLE_ICON","CLASS_TOGGLE","CLASS_LEFT_BADGE","CLASS_CONTAINER","EVENT_CLICK","childElementCount","STATE_NO_SUBFOLDERS","EVENT_UNREAD_CHANGED","_onChildUnreadChanged","EVENT_SELECT","_onFolderSelect","ATTR_ROLE","VAL_ROLE_TREEITEM","_updateLabel","ATTR_LABEL","_updateLevel","ATTR_LEVEL","_updateSelected","ATTR_IS_SELECTED","_updateIsCollapsed","_updateUnread","ATTR_UNREAD","VAL_MIN_UNREAD","_shouldSkipUnreadUpdate","_refreshDisplay","ATTR_IS_VIRTUAL","oldNum","newNum","_getTotalUnread","total","descendants","getElementsByTagName","isCollapsed","hasChildren","displayValue","_applyBadgeState","STATE_NO_UNREAD","VAL_99_PLUS","STATE_TRIPLE_DIGIT","STATE_DOUBLE_DIGIT","STATE_SINGLE_DIGIT","isCumulative","CLASS_IS_CUMULATIVE","unread","ICON_ARROW_DOWN","ICON_ARROW_UP","ARIA_EXPANDED","level","levelClamped","CSS_VAR_LEVEL","isSelected","ARIA_SELECTED","VAL_FALSE","EVENT_TOGGLE","attrsString","childrenString","BREAKPOINTS","phone","small","touch","normal","HTMLBnumHide","_private__handleChange_descriptor","mq","matches","_private__handleChange_decorators","_handleChange","_mediaQueryList","_boundHandleChange","_setupListener","_removeListener","breakpointKey","width","query","window","matchMedia","Listen","handler","boundHandler","closest","delegate","ID_GROUP","ID_LEGEND","ID_HINT","DATA_INLINE","STATE_INLINE","ATTR_NAME","role","HTMLBnumRadioGroup","_private__setDefaultRadioFromValue_decorators","_private__listenRadioChange_decorators","_private__scheduleSetupRadios_decorators","_private__label_descriptor","_label_accessor_storage","_private__label_decorators","_label","_private__label_initializers","_private__label_extraInitializers","_private__value_descriptor","_value_accessor_storage","_private__value_decorators","_private__value_initializers","_private__value_extraInitializers","_private__setDefaultRadioFromValue_descriptor","radio","radios","find","_check","_setDefaultRadioFromValue","_private__listenRadioChange_descriptor","_handleRadioChange","_listenRadioChange","_private__handleKeyboardNavigation_descriptor","isRTL","getComputedStyle","direction","KEY_PREV","preventDefault","currentRadio","currentIndex","indexOf","targetRadio","fire","focus","_private__handleKeyboardNavigation_decorators","_handleKeyboardNavigation","_private__handleRadioChange_descriptor","_private__handleRadioChange_decorators","_private__scheduleSetupRadios_descriptor","_setupRadios","_scheduleSetupRadios","inline","_setInlineState","_setName","_setListeners","_setDefaultData","_setDefaultValue","_initStates","_setLegend","_initData","_setHint","_initInline","_setDefaultRadio","_stopFocus","_canFocus","hasChecked","EVENTS","EVENT_CHANGE$1","States","ID_CONTAINER","ID_LABEL","SEL_ICON","SEL_CONTAINER","SEL_LABEL","EVT_SELECTED","EVT_ERROR","ATTR_SELECTED","STATE_SELECTED","SELECTED","DISABLED","ICON","HTMLBnumSegmentedItem","_selected_decorators","_private__icon_decorators","OnSelectListenerInitializer","_updateLabel_decorators","_is_decorators","_private__updateDom_decorators","_private__verifyUi_decorators","_private__setIcon_decorators","_private__updateIcon_decorators","_private__enable_decorators","_private__select_decorators","_private__unselect_decorators","selected","_selected_initializers","_selected_extraInitializers","_private__icon_descriptor","_icon_accessor_storage","_private__icon_initializers","_private__icon_extraInitializers","_onSelected_decorators","onSelected","_onSelected_initializers","_onSelected_extraInitializers","updateLabel","is","_private__updateDom_descriptor","_verifyUi","_clearStates","_updateDisabled","_setIcon","_updateDom","_private__verifyUi_descriptor","_private__setIcon_descriptor","_private__updateIcon_descriptor","_private__disable_descriptor","_private__disable_decorators","_disable","_private__enable_descriptor","_unselect","_enable","_private__select_descriptor","_select","_private__unselect_descriptor","_private__dispatchError_descriptor","_private__dispatchError_decorators","_dispatchError","_private__onclick_descriptor","_private__onclick_decorators","_onclick","_private__listenClick_descriptor","_onClickDisabled","_private__listenClick_decorators","_listenClick","_private__listenKeyDown_descriptor","_onKeyDown","_private__listenKeyDown_decorators","_listenKeyDown","selected_accessor_storage","onSelected_accessor_storage","___","disable","enable","unselect","updateValue","callSelect","parentEvent","canBeClicked","isEnterOrSpace","_p_onSelectedTrigger","onSelect","OnError","iconName","Events","EVENT_ERROR","CHANGE","HTMLBnumSegmentedControl","_private__onItemSelected_decorators","currentItem","targetItem","_private__onItemSelected_descriptor","_onItemSelectedAction","_onItemSelected","_private__onItemSelectedAction_descriptor","_unselectAllItems","_selectItem","_onError","_private__onItemSelectedAction_decorators","_private__onError_descriptor","_private__onError_decorators","currentValue","_initLegendVisibility","_initSelectedItem","firstItem","ScheduleElementAppend","_element","_slot","CSS_CLASS_TITLE","CSS_CLASS_BODY","HTMLBnumCardElement","_loadingElement","_scheduleBody","_scheduleTitle","_scheduleAppend","_titleIcon","DATA_TITLE_ICON","_titleText","DATA_TITLE_TEXT","_titleLink","DATA_TITLE_LINK","_titleData","clickable","STATE_CLICKABLE","removeButtonRole","_handleClick","titleData","EVENT_LOADING","div","_getLoading","loadingDiv","CSS_CLASS_LOADING","spinner","ICON_SPINNER","originalEvent","_requestUpdateTitle","_updateOrResetTitle","_resetTitle","_requestUpdateBody","_updateOrResetBody","_resetBody","nodeType","ELEMENT_NODE","TEXT_NODE","_requestAppendElement","appended","_appendElement","clearTitle","clearBody","appendToTitle","appendToBody","body","card","ID_CARD_TITLE","ID_CARD_ITEM_NO_ELEMENTS","HTMLBnumCardAgenda","DATA_URL","_isSorting","_cardTitle","_noElements","_card","_onchange","onElementChanged","CHANGE_EVENT","_cardPart","_url","_p_styleSheets","_handleSlotChange","_sortChildren","agendaItems","assignedElements","tagName","toLowerCase","isSorted","_getDate","_getStartDate","fragment","createDocumentFragment","sortedItems","contents","ATTRIBUTE_DATA_URL","HTMLBnumCardEmail","mailItems","dateStr","CLASS_HEADER_CONTAINER","CLASS_HEADER_LEFT","CLASS_HEADER_RIGHT","CLASS_HEADER_TITLE","CLASS_HEADER_CUSTOM","CLASS_HEADER_MODIFIER","PART_HEADER_CONTAINER","PART_HEADER_LEFT","PART_HEADER_RIGHT","PART_HEADER_TITLE","PART_HEADER_CUSTOM","ID_TITLE_TEXT","ID_TITLE_CUSTOM","SLOT_NAME_LOGO","SLOT_NAME_TITLE","SLOT_NAME_ACTIONS","SLOT_NAME_AVATAR","HTMLBnumHeader","_customTitleContainer","_scheduleUpdateTitle","_scheduleUpdateBackground","_onBackgroundChanged","_backgroundScheduler","_updateBackground","onBackgroundChanged","newBackground","EVENT_BACKGROUND_CHANGED","ImgBackground","DATA_BACKGROUND","setPageTitle","_applyTitleUpdate","updateBackground","urlOrData","_requestBackgroundUpdate","clearBackground","_resetVisibility","showSlot","showText","showCustom","background","ATTR_COLLAPSED","ROLE_ITEM","HTMLBnumTree","_selectedItem","_focusedItem","_handleSelection","_handleKeyDown","_initializeRovingTabindex","_getAllItems","initial","SelectItem","_updateFocus","current","visibleItems","_getVisibleItems","next","parent","parentElement","arrayOfNodes","COMPONENT_TAG","HTMLBnumColumn","CLASS_PREFIX","CLASS_RC_HEADER","CLASS_CONTENT_PREFIX","CLASS_CONTENT_POSTFIX","_HTMLBnumColumn__CLASSES","HOST","HEADER","MAIN","CLASS_HEADER","RC","OLD","CLASS_RC_HEADER_OLD","BODY","CLASS_BODY","FOOTER","CLASS_FOOTER","CLASS_RC_FOOTER","CONTENT_PREFIX","FROM_SLOT","CLASS_FROM_SLOT","CONTENT","CLASS_CONTENT_HEADER","CLASS_CONTENT_BODY","CLASS_CONTENT_FOOTER","_HTMLBnumColumn__SLOTS","SLOT_HEADER","SLOT_FOOTER","_HTMLBnumColumn__ATTRIBUTES","ATTR_TYPE","DATA","KEEP_BODY","DATA_KEEP_BODY","DEFAULT_COLUMN_TYPE","_keepBody","originalChildren","headerContainer","bodyContainer","footerContainer","hasHeader","hasFooter","nodeElement","_processNode","specificClass","DsBnumConfig"],"mappings":"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"}